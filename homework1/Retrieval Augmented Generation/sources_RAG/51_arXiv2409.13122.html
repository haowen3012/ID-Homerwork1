<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation</title>
<!--Generated on Mon Sep 23 19:44:41 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.13122v2/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S1" title="In RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S2" title="In RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S2.SS0.SSS0.Px1" title="In 2 Related Work ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Retrieval-Augmented Generation (RAG)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S2.SS0.SSS0.Px2" title="In 2 Related Work ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Verbal Reinforcement Learning (VRL)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S2.SS0.SSS0.Px3" title="In 2 Related Work ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Repository-Level Code Completion</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3" title="In RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Framework Design</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1" title="In 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Components</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1.SSSx1" title="In 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Retriever</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1.SSSx2" title="In 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Actor (Generative LLM)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1.SSSx3" title="In 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Evaluator</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1.SSSx4" title="In 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Reflector</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS1.SSSx5" title="In 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Experience</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS2" title="In 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Leveraging Experience for Improved Retrieval</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS3" title="In 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Iterative Process</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS3.SSSx1" title="In 3.3 Iterative Process ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Overall Iterative Process</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS3.SSSx2" title="In 3.3 Iterative Process ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Achieving the Final Best Result in Iterations</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.SS4" title="In 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Component Interdependency</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4" title="In RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS1" title="In 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Benchmarks</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS1.SSSx1" title="In 4.1 Benchmarks ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Construction of RepoGenEval</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS2" title="In 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Selecting Optimal Reflector Model: Code Generation Models or General-purpose Models</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS2.SSSx1" title="In 4.2 Selecting Optimal Reflector Model: Code Generation Models or General-purpose Models ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS3" title="In 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Overall Model Evaluation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS3.SSSx1" title="In 4.3 Overall Model Evaluation ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS4" title="In 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Ablation Study</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS4.SSSx1" title="In 4.4 Ablation Study ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Experimental Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.SS4.SSSx2" title="In 4.4 Ablation Study ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title">Results</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S5" title="In RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Conclusion</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Jicheng Wang, Yifeng He, Hao Chen

</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id1.id1">In real-world software engineering tasks, solving a problem often requires understanding and modifying multiple functions, classes, and files across a large codebase.
Therefore, on the repository level, it is crucial to extract the relevant information to achieve accurate code completion effectively.
Existing code completion tools have achieved some success, but they struggle to optimize the retrieval and generation process dynamically. In this paper, we propose RepoGenReflex, a generic, dynamic, effective framework to address this challenge.
By leveraging the Retrieval-Augmented Generation (RAG) enhanced with Verbal Reinforcement Learning (VRL), it can dynamically choose the optimal results for repository-level code completion.
RepoGenReflex uses Reflector to give directional feedback to the next loop.
RepoGenReflex chooses the optimal results stored in the Experience cache based on the RAG-VRL loop.
To validate the framework’s generalization ability, we propose a new benchmark RepoGenEval, which consists of the latest, high-quality real-world repositories in line completion scenarios.
Our experiments demonstrate that RepoGenReflex achieves significant improvements after optimizing the Reflector component, resulting in enhanced accuracy and relevance of code completions. Additionally, RepoGenReflex consistently demonstrates superior performance and effectiveness across standard code completion tasks, highlighting the robustness and adaptability of our framework.
Our source code and benchmark will be publicly available.</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Code completion is a popular feature in modern software development. By automatically suggesting relevant code snippets and structures to the developer, code completion tools reduce the inclusion of irrelevant code snippets and improve the efficiency of the programmer.
However, code completion tools have fundamental limitations.
First, rule-based code completion like tools in Integrated Development Environments is difficult to develop and maintain,
and cannot be generalized to settings other than development, for example,
writing new features or fixing bugs <cite class="ltx_cite ltx_citemacro_citep">(Robbes and Lanza <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib27" title="">2008</a>; Bruch, Monperrus, and Mezini <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib3" title="">2009</a>; Proksch, Lerch, and Mezini <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib26" title="">2015</a>)</cite>.
Other approaches like automatic patch finding by genetic programming <cite class="ltx_cite ltx_citemacro_citep">(Weimer et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib35" title="">2009</a>)</cite> extend code completion to fixing bugs. These methods depend on static analysis on the Abstract Syntax Tree <cite class="ltx_cite ltx_citemacro_citep">(McCarthy <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib17" title="">1960</a>)</cite> and heuristic rules to guide the evolution process, but they may struggle with varying-length completions and may not dynamically adapt to new coding patterns efficiently.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">To overcome these limitations,
various work <cite class="ltx_cite ltx_citemacro_citep">(Izadi, Gismondi, and Gousios <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib8" title="">2022</a>; Guo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib7" title="">2023</a>; Petryshyn and Lukoševičius <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib24" title="">2024</a>)</cite> purposes to utilize large language models (LLMs) to generate patches for code completion.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Recent advancements in machine learning(ML) and natural language processing(NLP), especially with the development of LLMs, have led to the development of sophisticated code completion frameworks <cite class="ltx_cite ltx_citemacro_citep">(Svyatkovskiy et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib32" title="">2019</a>)</cite>.
Given an incomplete code snippet as the prompt, LLMs can generate the following tokens as completion, taking advantage of the massive code dataset it memorized at the training stage <cite class="ltx_cite ltx_citemacro_citep">(Nijkamp et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib20" title="">2022</a>; Li et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib12" title="">2022</a>; Phan et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib25" title="">2021</a>)</cite>.
Although simply prompting LLMs with all the related context information for code completion is direct and relatively efficient,
this approach is limited by LLMs’ context window size.
To generate the response successfully,
we cannot give all the related context information to LLMs in prompts.
In real-world software engineering, developers need to be aware of other files within the repository since there exists interrelated dependencies, shared utilities, configurations, and cross-API invocations resulting from modularization. Additionally, LLMs fine-tuned on labeled data excel in controlled evaluation settings but face challenges generalizing to unseen repositories without further fine-tuning. This is particularly due to the models’ reliance on localized knowledge, which is often insufficient when dealing with complex, modularized codebases that span multiple files and components. These limitations highlight the need for a more adaptive and context-aware approach to repository-level code completion. Therefore, direct code completion via LLM generation is far from practical usage.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">To overcome the limitations of context length and localized knowledge in reading long documents and adapting to new tasks, <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib11" title="">Lewis et al.</a></cite> proposed Retrieval-Augmented Generation (RAG), which uses retrieval to draw on relevant snippets from longer text or documents.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">RAG generates contextually relevant and accurate text by retrieving relevant snippets and combining them with the prompt provided to the LLM.
RAG has been adopted in various recent attempts in LLM-based applications <cite class="ltx_cite ltx_citemacro_citep">(Cai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib4" title="">2022</a>; Jimenez et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib9" title="">2023</a>; Sumers et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib31" title="">2023</a>)</cite>.
RepoCoder <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>)</cite> utilizes RAG to bridge the gap between static knowledge in pre-trained models and the dynamic, context-sensitive needs of real-world coding scenarios.
RepoCoder works by iteratively retrieving relevant code snippets from the repository, using them to generate accurate and contextually appropriate code. However, a major challenge remains in managing the iterative process to dynamically find out optimal results for each task.
RepoCoder relies on fixed iteration limits rather than dynamically adjusting based on the generated outputs, which can impact both accuracy and efficiency in large-scale applications.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">Reinforcement learning (RL) is promising in addressing the challenge of dynamic optimization in iterative processes.
Recent research has explored the potential of RL for optimizing iterative processes, particularly through policy gradient methods <cite class="ltx_cite ltx_citemacro_citep">(Lu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib14" title="">2022</a>)</cite>.
While this approach has shown state-of-the-art(SOTA) performance in tasks such as mathematical reasoning, it requires fine-tuning and updating model weights, which is both computationally expensive and limits generalization across different LLMs.
Verbal reinforcement learning (VRL) <cite class="ltx_cite ltx_citemacro_citep">(Shinn et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib28" title="">2024</a>)</cite>, on the other hand, provides a promising alternative by leveraging linguistic feedback to refine models without modifying their weights. VRL enables efficient optimization across various tasks including decision-making, coding, and language reasoning.
VRL addresses the computational expense and limited generalization across different LLMs by refining models through feedback rather than fine-tuning, thus maintaining model efficiency and adaptability.</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">In this paper, we introduce RepoGenReflex, a novel approach that enhances the RAG framework with VRL to further refine LLM-based repository-level code completion,
optimizing retrieval and generation iterations through iterative feedback.
As demonstrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>, RepoGenReflex iteratively retrieves relevant code snippets, generates possible code completion, evaluates the results by Evaluator, and gives detailed feedback using Reflector.
Reflector provides linguistic feedback, guiding the next iteration to improve the quality of the generated code.
Each feedback is stored in the Experience component, which helps refine future iterations, ensuring that the framework continuously improves its performance without the need for model weight updates, enabling efficient optimization across various tasks.</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="335" id="S1.F1.g1" src="x1.png" width="455"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>An overview of the model design, illustrating the iterative process of Retriever, Actor (Generative LLM), Evaluator, Reflector, and Experience components.</figcaption>
</figure>
<div class="ltx_para" id="S1.p8">
<p class="ltx_p" id="S1.p8.1">Existing benchmarks like RepoEval <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>)</cite> fall short in comprehensively evaluating the generalization ability of our framework, especially in diverse and complex real-world scenarios. RepoEval’s broad selection criteria and basic evaluation methods may not fully capture the challenges of modern codebases. To address these limitations, we propose RepoGenEval, a new benchmark with stricter selection criteria for high-quality repositories. It provides a thorough evaluation of our framework’s generalization and effectiveness capabilities.</p>
</div>
<div class="ltx_para" id="S1.p9">
<p class="ltx_p" id="S1.p9.1">Our experiments demonstrate that, by integrating VRL within the RAG framework, RepoGenReflex achieves significant improvements in optimizing the Reflector component, resulting in enhanced accuracy and relevance of code completions. Using EM and ES metrics as evaluation metrics, RepoGenReflex consistently demonstrates superior practical performance across standard code completion tasks. These results highlight the robustness and adaptability of our framework, suggesting a promising new direction for intelligent code generation tools. Our contributions can be summarized as follows:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We propose RepoGenReflex, a novel iterative retrieval-generation framework for repository-level code completion, leveraging VRL to dynamically optimize the retrieval and generation processes.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We introduce an adaptive iterative process that dynamically evaluates and optimizes each iteration’s result without model weight updates, ensuring efficient and continuous improvement in code completion performance.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">We demonstrate that RepoGenReflex surpasses traditional in-file code completion methods and outperforms current SOTA models by achieving significantly higher accuracy and relevance, establishing a robust foundation for the future development of code generation tools.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Retrieval-Augmented Generation (RAG)</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">RAG is a widely adopted strategy that enhances LLMs by integrating retrieval mechanisms with generative processes <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib11" title="">2020</a>)</cite>. Traditional RAG approaches typically involve three phases: <span class="ltx_text ltx_font_bold" id="S2.SS0.SSS0.Px1.p1.1.1">Retrieval</span>, which extracts relevant information from external sources related to the task.
<span class="ltx_text ltx_font_bold" id="S2.SS0.SSS0.Px1.p1.1.2">Augmentation</span>, which enriches the input with the retrieved data to enhance context.
<span class="ltx_text ltx_font_bold" id="S2.SS0.SSS0.Px1.p1.1.3">Generation</span>, which uses the enriched input to generate a more accurate, context-aware response. RAG has been successfully applied in various NLP tasks, including question answering <cite class="ltx_cite ltx_citemacro_citep">(Siriwardhana et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib30" title="">2023</a>; Mao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib16" title="">2020</a>)</cite>, document summarization <cite class="ltx_cite ltx_citemacro_citep">(Parvez et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib23" title="">2021</a>; Liu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib13" title="">2020</a>)</cite>, and code completion <cite class="ltx_cite ltx_citemacro_citep">(Parvez et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib23" title="">2021</a>; Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>; Wang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib34" title="">2024</a>; Wu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib36" title="">2024</a>)</cite>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Verbal Reinforcement Learning (VRL)</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px2.p1.1">Reinforcement Learning (RL) has demonstrated its efficacy in optimizing iterative processes by dynamically adjusting the model’s actions based on feedback. Traditional RL methods, such as Policy Gradient <cite class="ltx_cite ltx_citemacro_citep">(Lu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib14" title="">2022</a>)</cite>, require fine-tuning of model weights, which is computationally expensive and can limit the model’s generalization across different tasks. VRL offers an alternative by utilizing linguistic feedback to guide the iterative refinement of models without altering their underlying weights <cite class="ltx_cite ltx_citemacro_citep">(Shinn et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib28" title="">2024</a>)</cite>. VRL has been successfully applied in tasks such as sequential decision-making, language reasoning, and code generation. For example, the Reflexion framework <cite class="ltx_cite ltx_citemacro_citep">(Shinn et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib28" title="">2024</a>)</cite> employs VRL to iteratively refine the outputs of LLMs, significantly improving performance without the need for weight updates. This makes VRL an attractive approach for scenarios where computational efficiency and adaptability are critical.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Repository-Level Code Completion</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p1.1">Repository-level code completion involves generating code by considerin g the entire codebase of repositories, rather than just isolated files or functions. This approach has become a focal point for research in the code completion area and many studies have attempted to improve it.
A study by <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib29" title="">Shrivastava, Larochelle, and Tarlow</a></cite> proposes a framework that learns to generate example-specific prompts by prompt proposals. This highlights the ongoing challenges in effectively leveraging LLMs for code completion.
RepoCoder <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>)</cite> leverages RAG to iteratively retrieve and utilize relevant code snippets from repositories, enhancing the accuracy and context-awareness of code completions. However, RepoCoder has a weakness in that its performance relies on fixed iteration limits, which can result in suboptimal performance when the iteration number is not dynamically adjusted based on the generated outputs’ quality.</p>
</div>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p2">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p2.1">In this work, we extend the application of VRL to an RAG framework tailored for repository-level code completion. By incorporating VRL into the iterative retrieval and generation process, our approach aims to dynamically optimize each iteration based on feedback, enhancing the generalization and effectiveness of the framework without requiring model fine-tuning. This integration addresses the limitations of previous methods and provides a more flexible and powerful tool for intelligent code generation.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Framework Design</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a> depicts our framework, which consists of a Retriever, Actor (Generative LLM), Evaluator, Reflector, and Experience. Together they work iteratively to generate high-quality code.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Components</h3>
<section class="ltx_subsubsection" id="S3.SS1.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Retriever</h4>
<div class="ltx_para" id="S3.SS1.SSSx1.p1">
<p class="ltx_p" id="S3.SS1.SSSx1.p1.1">The Retriever component is responsible for extracting relevant code snippets from the repository files, which provide contextual information for the unfinished code. This step is crucial for grounding the language model’s generation in a relevant context, thereby improving the coherence and relevance of the generated code.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSSx2">
<h4 class="ltx_title ltx_title_subsubsection">Actor (Generative LLM)</h4>
<div class="ltx_para" id="S3.SS1.SSSx2.p1">
<p class="ltx_p" id="S3.SS1.SSSx2.p1.1">The Actor component utilizes a pre-trained language model (LM) to generate code by prompting. The initial prompt for LM consists of the retrieved snippets concatenated with the unfinished code, providing the LM with comprehensive context information.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSSx3">
<h4 class="ltx_title ltx_title_subsubsection">Evaluator</h4>
<div class="ltx_para" id="S3.SS1.SSSx3.p1">
<p class="ltx_p" id="S3.SS1.SSSx3.p1.1">The generated code is then passed to the Evaluator component, which assesses the code using Exact Match (EM) and Edit Similarity (ES) metrics. These metrics have been widely adopted in code completion area <cite class="ltx_cite ltx_citemacro_citep">(Lu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib15" title="">2021</a>; Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>)</cite>.
The EM metric is a binary measure that takes the value of 1 if the predicted code exactly matches the ground truth code and 0 otherwise. This provides a straightforward assessment of whether the model’s output is correct. To capture more subtle differences between the generated and ground truth code to provide a more fine-grained evaluation,
we employ the ES metric,</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="ES=1-\frac{\operatorname{Lev}(\hat{Y},Y)}{\max\left(|\hat{Y}|,|Y|\right)}" class="ltx_Math" display="block" id="S3.Ex1.m1.8"><semantics id="S3.Ex1.m1.8a"><mrow id="S3.Ex1.m1.8.9" xref="S3.Ex1.m1.8.9.cmml"><mrow id="S3.Ex1.m1.8.9.2" xref="S3.Ex1.m1.8.9.2.cmml"><mi id="S3.Ex1.m1.8.9.2.2" xref="S3.Ex1.m1.8.9.2.2.cmml">E</mi><mo id="S3.Ex1.m1.8.9.2.1" xref="S3.Ex1.m1.8.9.2.1.cmml">⁢</mo><mi id="S3.Ex1.m1.8.9.2.3" xref="S3.Ex1.m1.8.9.2.3.cmml">S</mi></mrow><mo id="S3.Ex1.m1.8.9.1" xref="S3.Ex1.m1.8.9.1.cmml">=</mo><mrow id="S3.Ex1.m1.8.9.3" xref="S3.Ex1.m1.8.9.3.cmml"><mn id="S3.Ex1.m1.8.9.3.2" xref="S3.Ex1.m1.8.9.3.2.cmml">1</mn><mo id="S3.Ex1.m1.8.9.3.1" xref="S3.Ex1.m1.8.9.3.1.cmml">−</mo><mfrac id="S3.Ex1.m1.8.8" xref="S3.Ex1.m1.8.8.cmml"><mrow id="S3.Ex1.m1.3.3.3.5" xref="S3.Ex1.m1.3.3.3.4.cmml"><mi id="S3.Ex1.m1.1.1.1.1" xref="S3.Ex1.m1.1.1.1.1.cmml">Lev</mi><mo id="S3.Ex1.m1.3.3.3.5a" xref="S3.Ex1.m1.3.3.3.4.cmml">⁡</mo><mrow id="S3.Ex1.m1.3.3.3.5.1" xref="S3.Ex1.m1.3.3.3.4.cmml"><mo id="S3.Ex1.m1.3.3.3.5.1.1" stretchy="false" xref="S3.Ex1.m1.3.3.3.4.cmml">(</mo><mover accent="true" id="S3.Ex1.m1.2.2.2.2" xref="S3.Ex1.m1.2.2.2.2.cmml"><mi id="S3.Ex1.m1.2.2.2.2.2" xref="S3.Ex1.m1.2.2.2.2.2.cmml">Y</mi><mo id="S3.Ex1.m1.2.2.2.2.1" xref="S3.Ex1.m1.2.2.2.2.1.cmml">^</mo></mover><mo id="S3.Ex1.m1.3.3.3.5.1.2" xref="S3.Ex1.m1.3.3.3.4.cmml">,</mo><mi id="S3.Ex1.m1.3.3.3.3" xref="S3.Ex1.m1.3.3.3.3.cmml">Y</mi><mo id="S3.Ex1.m1.3.3.3.5.1.3" stretchy="false" xref="S3.Ex1.m1.3.3.3.4.cmml">)</mo></mrow></mrow><mrow id="S3.Ex1.m1.8.8.8.5" xref="S3.Ex1.m1.8.8.8.6.cmml"><mi id="S3.Ex1.m1.6.6.6.3" xref="S3.Ex1.m1.6.6.6.3.cmml">max</mi><mo id="S3.Ex1.m1.8.8.8.5a" xref="S3.Ex1.m1.8.8.8.6.cmml">⁡</mo><mrow id="S3.Ex1.m1.8.8.8.5.2" xref="S3.Ex1.m1.8.8.8.6.cmml"><mo id="S3.Ex1.m1.8.8.8.5.2.3" xref="S3.Ex1.m1.8.8.8.6.cmml">(</mo><mrow id="S3.Ex1.m1.7.7.7.4.1.1.2" xref="S3.Ex1.m1.7.7.7.4.1.1.1.cmml"><mo id="S3.Ex1.m1.7.7.7.4.1.1.2.1" stretchy="false" xref="S3.Ex1.m1.7.7.7.4.1.1.1.1.cmml">|</mo><mover accent="true" id="S3.Ex1.m1.4.4.4.1" xref="S3.Ex1.m1.4.4.4.1.cmml"><mi id="S3.Ex1.m1.4.4.4.1.2" xref="S3.Ex1.m1.4.4.4.1.2.cmml">Y</mi><mo id="S3.Ex1.m1.4.4.4.1.1" xref="S3.Ex1.m1.4.4.4.1.1.cmml">^</mo></mover><mo id="S3.Ex1.m1.7.7.7.4.1.1.2.2" stretchy="false" xref="S3.Ex1.m1.7.7.7.4.1.1.1.1.cmml">|</mo></mrow><mo id="S3.Ex1.m1.8.8.8.5.2.4" xref="S3.Ex1.m1.8.8.8.6.cmml">,</mo><mrow id="S3.Ex1.m1.8.8.8.5.2.2.2" xref="S3.Ex1.m1.8.8.8.5.2.2.1.cmml"><mo id="S3.Ex1.m1.8.8.8.5.2.2.2.1" stretchy="false" xref="S3.Ex1.m1.8.8.8.5.2.2.1.1.cmml">|</mo><mi id="S3.Ex1.m1.5.5.5.2" xref="S3.Ex1.m1.5.5.5.2.cmml">Y</mi><mo id="S3.Ex1.m1.8.8.8.5.2.2.2.2" stretchy="false" xref="S3.Ex1.m1.8.8.8.5.2.2.1.1.cmml">|</mo></mrow><mo id="S3.Ex1.m1.8.8.8.5.2.5" xref="S3.Ex1.m1.8.8.8.6.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex1.m1.8b"><apply id="S3.Ex1.m1.8.9.cmml" xref="S3.Ex1.m1.8.9"><eq id="S3.Ex1.m1.8.9.1.cmml" xref="S3.Ex1.m1.8.9.1"></eq><apply id="S3.Ex1.m1.8.9.2.cmml" xref="S3.Ex1.m1.8.9.2"><times id="S3.Ex1.m1.8.9.2.1.cmml" xref="S3.Ex1.m1.8.9.2.1"></times><ci id="S3.Ex1.m1.8.9.2.2.cmml" xref="S3.Ex1.m1.8.9.2.2">𝐸</ci><ci id="S3.Ex1.m1.8.9.2.3.cmml" xref="S3.Ex1.m1.8.9.2.3">𝑆</ci></apply><apply id="S3.Ex1.m1.8.9.3.cmml" xref="S3.Ex1.m1.8.9.3"><minus id="S3.Ex1.m1.8.9.3.1.cmml" xref="S3.Ex1.m1.8.9.3.1"></minus><cn id="S3.Ex1.m1.8.9.3.2.cmml" type="integer" xref="S3.Ex1.m1.8.9.3.2">1</cn><apply id="S3.Ex1.m1.8.8.cmml" xref="S3.Ex1.m1.8.8"><divide id="S3.Ex1.m1.8.8.9.cmml" xref="S3.Ex1.m1.8.8"></divide><apply id="S3.Ex1.m1.3.3.3.4.cmml" xref="S3.Ex1.m1.3.3.3.5"><ci id="S3.Ex1.m1.1.1.1.1.cmml" xref="S3.Ex1.m1.1.1.1.1">Lev</ci><apply id="S3.Ex1.m1.2.2.2.2.cmml" xref="S3.Ex1.m1.2.2.2.2"><ci id="S3.Ex1.m1.2.2.2.2.1.cmml" xref="S3.Ex1.m1.2.2.2.2.1">^</ci><ci id="S3.Ex1.m1.2.2.2.2.2.cmml" xref="S3.Ex1.m1.2.2.2.2.2">𝑌</ci></apply><ci id="S3.Ex1.m1.3.3.3.3.cmml" xref="S3.Ex1.m1.3.3.3.3">𝑌</ci></apply><apply id="S3.Ex1.m1.8.8.8.6.cmml" xref="S3.Ex1.m1.8.8.8.5"><max id="S3.Ex1.m1.6.6.6.3.cmml" xref="S3.Ex1.m1.6.6.6.3"></max><apply id="S3.Ex1.m1.7.7.7.4.1.1.1.cmml" xref="S3.Ex1.m1.7.7.7.4.1.1.2"><abs id="S3.Ex1.m1.7.7.7.4.1.1.1.1.cmml" xref="S3.Ex1.m1.7.7.7.4.1.1.2.1"></abs><apply id="S3.Ex1.m1.4.4.4.1.cmml" xref="S3.Ex1.m1.4.4.4.1"><ci id="S3.Ex1.m1.4.4.4.1.1.cmml" xref="S3.Ex1.m1.4.4.4.1.1">^</ci><ci id="S3.Ex1.m1.4.4.4.1.2.cmml" xref="S3.Ex1.m1.4.4.4.1.2">𝑌</ci></apply></apply><apply id="S3.Ex1.m1.8.8.8.5.2.2.1.cmml" xref="S3.Ex1.m1.8.8.8.5.2.2.2"><abs id="S3.Ex1.m1.8.8.8.5.2.2.1.1.cmml" xref="S3.Ex1.m1.8.8.8.5.2.2.2.1"></abs><ci id="S3.Ex1.m1.5.5.5.2.cmml" xref="S3.Ex1.m1.5.5.5.2">𝑌</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex1.m1.8c">ES=1-\frac{\operatorname{Lev}(\hat{Y},Y)}{\max\left(|\hat{Y}|,|Y|\right)}</annotation><annotation encoding="application/x-llamapun" id="S3.Ex1.m1.8d">italic_E italic_S = 1 - divide start_ARG roman_Lev ( over^ start_ARG italic_Y end_ARG , italic_Y ) end_ARG start_ARG roman_max ( | over^ start_ARG italic_Y end_ARG | , | italic_Y | ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS1.SSSx3.p2">
<p class="ltx_p" id="S3.SS1.SSSx3.p2.1">where <span class="ltx_text ltx_markedasmath" id="S3.SS1.SSSx3.p2.1.1">Lev</span> denotes the Levenshtein distance <cite class="ltx_cite ltx_citemacro_citep">(Levenshtein et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib10" title="">1966</a>)</cite>, a metric that measures the minimum number of single-character edits (insertions, deletions, or substitutions) required to change one string into another. This formula ensures that the ES score considers both the size of the predicted and ground truth code, providing a more nuanced evaluation of generation quality.</p>
</div>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="339" id="S3.F2.g1" src="x2.png" width="465"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>A process of the prompt concatenated to the Reflector component
</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSSx4">
<h4 class="ltx_title ltx_title_subsubsection">Reflector</h4>
<div class="ltx_para" id="S3.SS1.SSSx4.p1">
<p class="ltx_p" id="S3.SS1.SSSx4.p1.1">Incorporating the Reflector component is a key innovation in our model design.
The initial generation prompt, along with the Evaluator’s results and the generated code, are concatenated to form a new prompt.
We show the process of composing a prompt to Reflector in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.F2" title="Figure 2 ‣ Evaluator ‣ 3.1 Components ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>.
The new prompt is fed back into the Reflector component to give detailed feedback. The Reflector allows the model to iteratively improve its outputs by learning from the evaluation results and its previous generation.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSSx5">
<h4 class="ltx_title ltx_title_subsubsection">Experience</h4>
<div class="ltx_para" id="S3.SS1.SSSx5.p1">
<p class="ltx_p" id="S3.SS1.SSSx5.p1.1">The Experience component stores the Reflector’s feedback on each iteration. This historical data is used to inform the Retriever component, enhancing the relevance of future retrieved snippets based on the model’s past performance. By leveraging past experiences, the model continuously refines its retrieval and generation processes.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Leveraging Experience for Improved Retrieval</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">The feedbacks stored in the Experience component play a crucial role in influencing the subsequent iterations. Each feedback generated by the Reflector component contains detailed analysis and suggestions to improve the generated code. As Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.F3" title="Figure 3 ‣ 3.2 Leveraging Experience for Improved Retrieval ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">3</span></a> illustrates, this feedback includes:</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i1.p1.1.1">Evaluation Analysis</span>: An analysis of EM and ES scores that quantitatively assess the generated code.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i2.p1.1.1">Contextual Analysis</span>: An analysis of the syntax and semantics of the code, considering the broader context in which the code operates.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i3.p1.1.1">Specific Suggestions</span>: Recommendations for the generated code, including corrections and enhancements.</p>
</div>
</li>
</ul>
</div>
<figure class="ltx_figure" id="S3.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="183" id="S3.F3.g1" src="x3.png" width="465"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>An example of detailed feedback from the Reflector, consisting of Evaluation Analysis, Contextual Analysis, and Specific Suggestions</figcaption>
</figure>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.1">These feedback elements are then extracted into the Reflector component for the next iteration. Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S3.F4" title="Figure 4 ‣ 3.2 Leveraging Experience for Improved Retrieval ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4</span></a> shows the details of the process.
Here’s how the procession works:</p>
<ul class="ltx_itemize" id="S3.I2">
<li class="ltx_item" id="S3.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i1.p1">
<p class="ltx_p" id="S3.I2.i1.p1.3"><span class="ltx_text ltx_font_bold" id="S3.I2.i1.p1.3.1">Constructing New Retrieval Targets</span>: Each feedback provides a detailed analysis and suggested improvements. The suggested improvements from the feedback, occupying <math alttext="x" class="ltx_Math" display="inline" id="S3.I2.i1.p1.1.m1.1"><semantics id="S3.I2.i1.p1.1.m1.1a"><mi id="S3.I2.i1.p1.1.m1.1.1" xref="S3.I2.i1.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.I2.i1.p1.1.m1.1b"><ci id="S3.I2.i1.p1.1.m1.1.1.cmml" xref="S3.I2.i1.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.p1.1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.p1.1.m1.1d">italic_x</annotation></semantics></math> lines, combined with the last <math alttext="n-x" class="ltx_Math" display="inline" id="S3.I2.i1.p1.2.m2.1"><semantics id="S3.I2.i1.p1.2.m2.1a"><mrow id="S3.I2.i1.p1.2.m2.1.1" xref="S3.I2.i1.p1.2.m2.1.1.cmml"><mi id="S3.I2.i1.p1.2.m2.1.1.2" xref="S3.I2.i1.p1.2.m2.1.1.2.cmml">n</mi><mo id="S3.I2.i1.p1.2.m2.1.1.1" xref="S3.I2.i1.p1.2.m2.1.1.1.cmml">−</mo><mi id="S3.I2.i1.p1.2.m2.1.1.3" xref="S3.I2.i1.p1.2.m2.1.1.3.cmml">x</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i1.p1.2.m2.1b"><apply id="S3.I2.i1.p1.2.m2.1.1.cmml" xref="S3.I2.i1.p1.2.m2.1.1"><minus id="S3.I2.i1.p1.2.m2.1.1.1.cmml" xref="S3.I2.i1.p1.2.m2.1.1.1"></minus><ci id="S3.I2.i1.p1.2.m2.1.1.2.cmml" xref="S3.I2.i1.p1.2.m2.1.1.2">𝑛</ci><ci id="S3.I2.i1.p1.2.m2.1.1.3.cmml" xref="S3.I2.i1.p1.2.m2.1.1.3">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.p1.2.m2.1c">n-x</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.p1.2.m2.1d">italic_n - italic_x</annotation></semantics></math> lines of the unfinished code, form a new <math alttext="n" class="ltx_Math" display="inline" id="S3.I2.i1.p1.3.m3.1"><semantics id="S3.I2.i1.p1.3.m3.1a"><mi id="S3.I2.i1.p1.3.m3.1.1" xref="S3.I2.i1.p1.3.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.I2.i1.p1.3.m3.1b"><ci id="S3.I2.i1.p1.3.m3.1.1.cmml" xref="S3.I2.i1.p1.3.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.p1.3.m3.1c">n</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.p1.3.m3.1d">italic_n</annotation></semantics></math>-line retrieval target. This can be mathematically represented as:</p>
</div>
<div class="ltx_para" id="S3.I2.i1.p2">
<table class="ltx_equation ltx_eqn_table" id="S3.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="T_{\_}{\text{new}}=\begin{bmatrix}F_{\_}{\text{feedback}}\\
C_{\_}{\text{last}}\end{bmatrix}" class="ltx_Math" display="block" id="S3.Ex2.m1.1"><semantics id="S3.Ex2.m1.1a"><mrow id="S3.Ex2.m1.1.2" xref="S3.Ex2.m1.1.2.cmml"><mrow id="S3.Ex2.m1.1.2.2" xref="S3.Ex2.m1.1.2.2.cmml"><msub id="S3.Ex2.m1.1.2.2.2" xref="S3.Ex2.m1.1.2.2.2.cmml"><mi id="S3.Ex2.m1.1.2.2.2.2" xref="S3.Ex2.m1.1.2.2.2.2.cmml">T</mi><mi id="S3.Ex2.m1.1.2.2.2.3" mathvariant="normal" xref="S3.Ex2.m1.1.2.2.2.3.cmml">_</mi></msub><mo id="S3.Ex2.m1.1.2.2.1" xref="S3.Ex2.m1.1.2.2.1.cmml">⁢</mo><mtext id="S3.Ex2.m1.1.2.2.3" xref="S3.Ex2.m1.1.2.2.3a.cmml">new</mtext></mrow><mo id="S3.Ex2.m1.1.2.1" xref="S3.Ex2.m1.1.2.1.cmml">=</mo><mrow id="S3.Ex2.m1.1.1.3" xref="S3.Ex2.m1.1.1.2.cmml"><mo id="S3.Ex2.m1.1.1.3.1" xref="S3.Ex2.m1.1.1.2.1.cmml">[</mo><mtable displaystyle="true" id="S3.Ex2.m1.1.1.1.1" rowspacing="0pt" xref="S3.Ex2.m1.1.1.1.1.cmml"><mtr id="S3.Ex2.m1.1.1.1.1a" xref="S3.Ex2.m1.1.1.1.1.cmml"><mtd id="S3.Ex2.m1.1.1.1.1b" xref="S3.Ex2.m1.1.1.1.1.cmml"><mrow id="S3.Ex2.m1.1.1.1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.1.1.1.cmml"><msub id="S3.Ex2.m1.1.1.1.1.1.1.1.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.2.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2.2.cmml">F</mi><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.2.3" mathvariant="normal" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2.3.cmml">_</mi></msub><mo id="S3.Ex2.m1.1.1.1.1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mtext id="S3.Ex2.m1.1.1.1.1.1.1.1.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.3a.cmml">feedback</mtext></mrow></mtd></mtr><mtr id="S3.Ex2.m1.1.1.1.1c" xref="S3.Ex2.m1.1.1.1.1.cmml"><mtd id="S3.Ex2.m1.1.1.1.1d" xref="S3.Ex2.m1.1.1.1.1.cmml"><mrow id="S3.Ex2.m1.1.1.1.1.2.1.1" xref="S3.Ex2.m1.1.1.1.1.2.1.1.cmml"><msub id="S3.Ex2.m1.1.1.1.1.2.1.1.2" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2.cmml"><mi id="S3.Ex2.m1.1.1.1.1.2.1.1.2.2" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2.2.cmml">C</mi><mi id="S3.Ex2.m1.1.1.1.1.2.1.1.2.3" mathvariant="normal" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2.3.cmml">_</mi></msub><mo id="S3.Ex2.m1.1.1.1.1.2.1.1.1" xref="S3.Ex2.m1.1.1.1.1.2.1.1.1.cmml">⁢</mo><mtext id="S3.Ex2.m1.1.1.1.1.2.1.1.3" xref="S3.Ex2.m1.1.1.1.1.2.1.1.3a.cmml">last</mtext></mrow></mtd></mtr></mtable><mo id="S3.Ex2.m1.1.1.3.2" xref="S3.Ex2.m1.1.1.2.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex2.m1.1b"><apply id="S3.Ex2.m1.1.2.cmml" xref="S3.Ex2.m1.1.2"><eq id="S3.Ex2.m1.1.2.1.cmml" xref="S3.Ex2.m1.1.2.1"></eq><apply id="S3.Ex2.m1.1.2.2.cmml" xref="S3.Ex2.m1.1.2.2"><times id="S3.Ex2.m1.1.2.2.1.cmml" xref="S3.Ex2.m1.1.2.2.1"></times><apply id="S3.Ex2.m1.1.2.2.2.cmml" xref="S3.Ex2.m1.1.2.2.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.2.2.2.1.cmml" xref="S3.Ex2.m1.1.2.2.2">subscript</csymbol><ci id="S3.Ex2.m1.1.2.2.2.2.cmml" xref="S3.Ex2.m1.1.2.2.2.2">𝑇</ci><ci id="S3.Ex2.m1.1.2.2.2.3.cmml" xref="S3.Ex2.m1.1.2.2.2.3">_</ci></apply><ci id="S3.Ex2.m1.1.2.2.3a.cmml" xref="S3.Ex2.m1.1.2.2.3"><mtext id="S3.Ex2.m1.1.2.2.3.cmml" xref="S3.Ex2.m1.1.2.2.3">new</mtext></ci></apply><apply id="S3.Ex2.m1.1.1.2.cmml" xref="S3.Ex2.m1.1.1.3"><csymbol cd="latexml" id="S3.Ex2.m1.1.1.2.1.cmml" xref="S3.Ex2.m1.1.1.3.1">matrix</csymbol><matrix id="S3.Ex2.m1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1"><matrixrow id="S3.Ex2.m1.1.1.1.1a.cmml" xref="S3.Ex2.m1.1.1.1.1"><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1"><times id="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1"></times><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2.2">𝐹</ci><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.2.3">_</ci></apply><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.3a.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.3"><mtext id="S3.Ex2.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.3">feedback</mtext></ci></apply></matrixrow><matrixrow id="S3.Ex2.m1.1.1.1.1b.cmml" xref="S3.Ex2.m1.1.1.1.1"><apply id="S3.Ex2.m1.1.1.1.1.2.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1"><times id="S3.Ex2.m1.1.1.1.1.2.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.1"></times><apply id="S3.Ex2.m1.1.1.1.1.2.1.1.2.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.2.1.1.2.1.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.2.1.1.2.2.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2.2">𝐶</ci><ci id="S3.Ex2.m1.1.1.1.1.2.1.1.2.3.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.2.3">_</ci></apply><ci id="S3.Ex2.m1.1.1.1.1.2.1.1.3a.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.3"><mtext id="S3.Ex2.m1.1.1.1.1.2.1.1.3.cmml" xref="S3.Ex2.m1.1.1.1.1.2.1.1.3">last</mtext></ci></apply></matrixrow></matrix></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex2.m1.1c">T_{\_}{\text{new}}=\begin{bmatrix}F_{\_}{\text{feedback}}\\
C_{\_}{\text{last}}\end{bmatrix}</annotation><annotation encoding="application/x-llamapun" id="S3.Ex2.m1.1d">italic_T start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT new = [ start_ARG start_ROW start_CELL italic_F start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT feedback end_CELL end_ROW start_ROW start_CELL italic_C start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT last end_CELL end_ROW end_ARG ]</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.I2.i1.p3">
<p class="ltx_p" id="S3.I2.i1.p3.1">Here:</p>
</div>
<div class="ltx_para" id="S3.I2.i1.p4">
<ul class="ltx_itemize" id="S3.I2.i1.I1">
<li class="ltx_item" id="S3.I2.i1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S3.I2.i1.I1.i1.1.1.1">–</span></span>
<div class="ltx_para" id="S3.I2.i1.I1.i1.p1">
<p class="ltx_p" id="S3.I2.i1.I1.i1.p1.2"><math alttext="F_{\_}{\text{feedback}}" class="ltx_Math" display="inline" id="S3.I2.i1.I1.i1.p1.1.m1.1"><semantics id="S3.I2.i1.I1.i1.p1.1.m1.1a"><mrow id="S3.I2.i1.I1.i1.p1.1.m1.1.1" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.cmml"><msub id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.2" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.2.cmml">F</mi><mi id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.3" mathvariant="normal" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.3.cmml">_</mi></msub><mo id="S3.I2.i1.I1.i1.p1.1.m1.1.1.1" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.1.cmml">⁢</mo><mtext id="S3.I2.i1.I1.i1.p1.1.m1.1.1.3" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.3a.cmml">feedback</mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i1.I1.i1.p1.1.m1.1b"><apply id="S3.I2.i1.I1.i1.p1.1.m1.1.1.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1"><times id="S3.I2.i1.I1.i1.p1.1.m1.1.1.1.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.1"></times><apply id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.2">𝐹</ci><ci id="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.3.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.2.3">_</ci></apply><ci id="S3.I2.i1.I1.i1.p1.1.m1.1.1.3a.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.3"><mtext id="S3.I2.i1.I1.i1.p1.1.m1.1.1.3.cmml" xref="S3.I2.i1.I1.i1.p1.1.m1.1.1.3">feedback</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.I1.i1.p1.1.m1.1c">F_{\_}{\text{feedback}}</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.I1.i1.p1.1.m1.1d">italic_F start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT feedback</annotation></semantics></math> represents the suggested improvements in the feedback, which occupy <math alttext="x" class="ltx_Math" display="inline" id="S3.I2.i1.I1.i1.p1.2.m2.1"><semantics id="S3.I2.i1.I1.i1.p1.2.m2.1a"><mi id="S3.I2.i1.I1.i1.p1.2.m2.1.1" xref="S3.I2.i1.I1.i1.p1.2.m2.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.I2.i1.I1.i1.p1.2.m2.1b"><ci id="S3.I2.i1.I1.i1.p1.2.m2.1.1.cmml" xref="S3.I2.i1.I1.i1.p1.2.m2.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.I1.i1.p1.2.m2.1c">x</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.I1.i1.p1.2.m2.1d">italic_x</annotation></semantics></math> lines.</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S3.I2.i1.I1.i2.1.1.1">–</span></span>
<div class="ltx_para" id="S3.I2.i1.I1.i2.p1">
<p class="ltx_p" id="S3.I2.i1.I1.i2.p1.2"><math alttext="C_{\_}{\text{last}}" class="ltx_Math" display="inline" id="S3.I2.i1.I1.i2.p1.1.m1.1"><semantics id="S3.I2.i1.I1.i2.p1.1.m1.1a"><mrow id="S3.I2.i1.I1.i2.p1.1.m1.1.1" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.cmml"><msub id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.2" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.2.cmml">C</mi><mi id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.3" mathvariant="normal" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.3.cmml">_</mi></msub><mo id="S3.I2.i1.I1.i2.p1.1.m1.1.1.1" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.1.cmml">⁢</mo><mtext id="S3.I2.i1.I1.i2.p1.1.m1.1.1.3" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.3a.cmml">last</mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i1.I1.i2.p1.1.m1.1b"><apply id="S3.I2.i1.I1.i2.p1.1.m1.1.1.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1"><times id="S3.I2.i1.I1.i2.p1.1.m1.1.1.1.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.1"></times><apply id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.2">𝐶</ci><ci id="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.3.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.2.3">_</ci></apply><ci id="S3.I2.i1.I1.i2.p1.1.m1.1.1.3a.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.3"><mtext id="S3.I2.i1.I1.i2.p1.1.m1.1.1.3.cmml" xref="S3.I2.i1.I1.i2.p1.1.m1.1.1.3">last</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.I1.i2.p1.1.m1.1c">C_{\_}{\text{last}}</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.I1.i2.p1.1.m1.1d">italic_C start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT last</annotation></semantics></math> represents the remaining unfinished code, which occupies <math alttext="n-x" class="ltx_Math" display="inline" id="S3.I2.i1.I1.i2.p1.2.m2.1"><semantics id="S3.I2.i1.I1.i2.p1.2.m2.1a"><mrow id="S3.I2.i1.I1.i2.p1.2.m2.1.1" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.cmml"><mi id="S3.I2.i1.I1.i2.p1.2.m2.1.1.2" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.2.cmml">n</mi><mo id="S3.I2.i1.I1.i2.p1.2.m2.1.1.1" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.1.cmml">−</mo><mi id="S3.I2.i1.I1.i2.p1.2.m2.1.1.3" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.3.cmml">x</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i1.I1.i2.p1.2.m2.1b"><apply id="S3.I2.i1.I1.i2.p1.2.m2.1.1.cmml" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1"><minus id="S3.I2.i1.I1.i2.p1.2.m2.1.1.1.cmml" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.1"></minus><ci id="S3.I2.i1.I1.i2.p1.2.m2.1.1.2.cmml" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.2">𝑛</ci><ci id="S3.I2.i1.I1.i2.p1.2.m2.1.1.3.cmml" xref="S3.I2.i1.I1.i2.p1.2.m2.1.1.3">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.I1.i2.p1.2.m2.1c">n-x</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.I1.i2.p1.2.m2.1d">italic_n - italic_x</annotation></semantics></math> lines.</p>
</div>
</li>
</ul>
</div>
</li>
<li class="ltx_item" id="S3.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i2.p1">
<p class="ltx_p" id="S3.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I2.i2.p1.1.1">Similarity-Based Retrieval</span>: The new retrieval target is then used to perform a similarity search against the repository files. This process involves finding the most relevant code snippets that align with the retrieval target. By incorporating suggested improvements into the retrieval target, Retriever can better understand the context and the specific requirements of the code completion task. The similarity between the retrieval target and the repository snippets is quantified using the Jaccard Index, calculated as:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\operatorname{Jaccard}(S_{\_}q,S_{\_}c)=\frac{|S_{\_}q\cap S_{\_}c|}{|S_{\_}q%
\cup S_{\_}c|}" class="ltx_Math" display="block" id="S3.Ex3.m1.5"><semantics id="S3.Ex3.m1.5a"><mrow id="S3.Ex3.m1.5.5" xref="S3.Ex3.m1.5.5.cmml"><mrow id="S3.Ex3.m1.5.5.2.2" xref="S3.Ex3.m1.5.5.2.3.cmml"><mi id="S3.Ex3.m1.3.3" xref="S3.Ex3.m1.3.3.cmml">Jaccard</mi><mo id="S3.Ex3.m1.5.5.2.2a" xref="S3.Ex3.m1.5.5.2.3.cmml">⁡</mo><mrow id="S3.Ex3.m1.5.5.2.2.2" xref="S3.Ex3.m1.5.5.2.3.cmml"><mo id="S3.Ex3.m1.5.5.2.2.2.3" stretchy="false" xref="S3.Ex3.m1.5.5.2.3.cmml">(</mo><mrow id="S3.Ex3.m1.4.4.1.1.1.1" xref="S3.Ex3.m1.4.4.1.1.1.1.cmml"><msub id="S3.Ex3.m1.4.4.1.1.1.1.2" xref="S3.Ex3.m1.4.4.1.1.1.1.2.cmml"><mi id="S3.Ex3.m1.4.4.1.1.1.1.2.2" xref="S3.Ex3.m1.4.4.1.1.1.1.2.2.cmml">S</mi><mi id="S3.Ex3.m1.4.4.1.1.1.1.2.3" mathvariant="normal" xref="S3.Ex3.m1.4.4.1.1.1.1.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.4.4.1.1.1.1.1" xref="S3.Ex3.m1.4.4.1.1.1.1.1.cmml">⁢</mo><mi id="S3.Ex3.m1.4.4.1.1.1.1.3" xref="S3.Ex3.m1.4.4.1.1.1.1.3.cmml">q</mi></mrow><mo id="S3.Ex3.m1.5.5.2.2.2.4" xref="S3.Ex3.m1.5.5.2.3.cmml">,</mo><mrow id="S3.Ex3.m1.5.5.2.2.2.2" xref="S3.Ex3.m1.5.5.2.2.2.2.cmml"><msub id="S3.Ex3.m1.5.5.2.2.2.2.2" xref="S3.Ex3.m1.5.5.2.2.2.2.2.cmml"><mi id="S3.Ex3.m1.5.5.2.2.2.2.2.2" xref="S3.Ex3.m1.5.5.2.2.2.2.2.2.cmml">S</mi><mi id="S3.Ex3.m1.5.5.2.2.2.2.2.3" mathvariant="normal" xref="S3.Ex3.m1.5.5.2.2.2.2.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.5.5.2.2.2.2.1" xref="S3.Ex3.m1.5.5.2.2.2.2.1.cmml">⁢</mo><mi id="S3.Ex3.m1.5.5.2.2.2.2.3" xref="S3.Ex3.m1.5.5.2.2.2.2.3.cmml">c</mi></mrow><mo id="S3.Ex3.m1.5.5.2.2.2.5" stretchy="false" xref="S3.Ex3.m1.5.5.2.3.cmml">)</mo></mrow></mrow><mo id="S3.Ex3.m1.5.5.3" xref="S3.Ex3.m1.5.5.3.cmml">=</mo><mfrac id="S3.Ex3.m1.2.2" xref="S3.Ex3.m1.2.2.cmml"><mrow id="S3.Ex3.m1.1.1.1.1" xref="S3.Ex3.m1.1.1.1.2.cmml"><mo id="S3.Ex3.m1.1.1.1.1.2" stretchy="false" xref="S3.Ex3.m1.1.1.1.2.1.cmml">|</mo><mrow id="S3.Ex3.m1.1.1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.1.cmml"><mrow id="S3.Ex3.m1.1.1.1.1.1.2" xref="S3.Ex3.m1.1.1.1.1.1.2.cmml"><msub id="S3.Ex3.m1.1.1.1.1.1.2.2" xref="S3.Ex3.m1.1.1.1.1.1.2.2.cmml"><mi id="S3.Ex3.m1.1.1.1.1.1.2.2.2" xref="S3.Ex3.m1.1.1.1.1.1.2.2.2.cmml">S</mi><mi id="S3.Ex3.m1.1.1.1.1.1.2.2.3" mathvariant="normal" xref="S3.Ex3.m1.1.1.1.1.1.2.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.1.1.1.1.1.2.1" xref="S3.Ex3.m1.1.1.1.1.1.2.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.1.2.3" xref="S3.Ex3.m1.1.1.1.1.1.2.3.cmml">q</mi></mrow><mo id="S3.Ex3.m1.1.1.1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.1.1.cmml">∩</mo><mrow id="S3.Ex3.m1.1.1.1.1.1.3" xref="S3.Ex3.m1.1.1.1.1.1.3.cmml"><msub id="S3.Ex3.m1.1.1.1.1.1.3.2" xref="S3.Ex3.m1.1.1.1.1.1.3.2.cmml"><mi id="S3.Ex3.m1.1.1.1.1.1.3.2.2" xref="S3.Ex3.m1.1.1.1.1.1.3.2.2.cmml">S</mi><mi id="S3.Ex3.m1.1.1.1.1.1.3.2.3" mathvariant="normal" xref="S3.Ex3.m1.1.1.1.1.1.3.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.1.1.1.1.1.3.1" xref="S3.Ex3.m1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.1.3.3" xref="S3.Ex3.m1.1.1.1.1.1.3.3.cmml">c</mi></mrow></mrow><mo id="S3.Ex3.m1.1.1.1.1.3" stretchy="false" xref="S3.Ex3.m1.1.1.1.2.1.cmml">|</mo></mrow><mrow id="S3.Ex3.m1.2.2.2.1" xref="S3.Ex3.m1.2.2.2.2.cmml"><mo id="S3.Ex3.m1.2.2.2.1.2" stretchy="false" xref="S3.Ex3.m1.2.2.2.2.1.cmml">|</mo><mrow id="S3.Ex3.m1.2.2.2.1.1" xref="S3.Ex3.m1.2.2.2.1.1.cmml"><mrow id="S3.Ex3.m1.2.2.2.1.1.2" xref="S3.Ex3.m1.2.2.2.1.1.2.cmml"><msub id="S3.Ex3.m1.2.2.2.1.1.2.2" xref="S3.Ex3.m1.2.2.2.1.1.2.2.cmml"><mi id="S3.Ex3.m1.2.2.2.1.1.2.2.2" xref="S3.Ex3.m1.2.2.2.1.1.2.2.2.cmml">S</mi><mi id="S3.Ex3.m1.2.2.2.1.1.2.2.3" mathvariant="normal" xref="S3.Ex3.m1.2.2.2.1.1.2.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.2.2.2.1.1.2.1" xref="S3.Ex3.m1.2.2.2.1.1.2.1.cmml">⁢</mo><mi id="S3.Ex3.m1.2.2.2.1.1.2.3" xref="S3.Ex3.m1.2.2.2.1.1.2.3.cmml">q</mi></mrow><mo id="S3.Ex3.m1.2.2.2.1.1.1" xref="S3.Ex3.m1.2.2.2.1.1.1.cmml">∪</mo><mrow id="S3.Ex3.m1.2.2.2.1.1.3" xref="S3.Ex3.m1.2.2.2.1.1.3.cmml"><msub id="S3.Ex3.m1.2.2.2.1.1.3.2" xref="S3.Ex3.m1.2.2.2.1.1.3.2.cmml"><mi id="S3.Ex3.m1.2.2.2.1.1.3.2.2" xref="S3.Ex3.m1.2.2.2.1.1.3.2.2.cmml">S</mi><mi id="S3.Ex3.m1.2.2.2.1.1.3.2.3" mathvariant="normal" xref="S3.Ex3.m1.2.2.2.1.1.3.2.3.cmml">_</mi></msub><mo id="S3.Ex3.m1.2.2.2.1.1.3.1" xref="S3.Ex3.m1.2.2.2.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.2.2.2.1.1.3.3" xref="S3.Ex3.m1.2.2.2.1.1.3.3.cmml">c</mi></mrow></mrow><mo id="S3.Ex3.m1.2.2.2.1.3" stretchy="false" xref="S3.Ex3.m1.2.2.2.2.1.cmml">|</mo></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex3.m1.5b"><apply id="S3.Ex3.m1.5.5.cmml" xref="S3.Ex3.m1.5.5"><eq id="S3.Ex3.m1.5.5.3.cmml" xref="S3.Ex3.m1.5.5.3"></eq><apply id="S3.Ex3.m1.5.5.2.3.cmml" xref="S3.Ex3.m1.5.5.2.2"><ci id="S3.Ex3.m1.3.3.cmml" xref="S3.Ex3.m1.3.3">Jaccard</ci><apply id="S3.Ex3.m1.4.4.1.1.1.1.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1"><times id="S3.Ex3.m1.4.4.1.1.1.1.1.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.1"></times><apply id="S3.Ex3.m1.4.4.1.1.1.1.2.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.4.4.1.1.1.1.2.1.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.2">subscript</csymbol><ci id="S3.Ex3.m1.4.4.1.1.1.1.2.2.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.2.2">𝑆</ci><ci id="S3.Ex3.m1.4.4.1.1.1.1.2.3.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.2.3">_</ci></apply><ci id="S3.Ex3.m1.4.4.1.1.1.1.3.cmml" xref="S3.Ex3.m1.4.4.1.1.1.1.3">𝑞</ci></apply><apply id="S3.Ex3.m1.5.5.2.2.2.2.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2"><times id="S3.Ex3.m1.5.5.2.2.2.2.1.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.1"></times><apply id="S3.Ex3.m1.5.5.2.2.2.2.2.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.5.5.2.2.2.2.2.1.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.2">subscript</csymbol><ci id="S3.Ex3.m1.5.5.2.2.2.2.2.2.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.2.2">𝑆</ci><ci id="S3.Ex3.m1.5.5.2.2.2.2.2.3.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.2.3">_</ci></apply><ci id="S3.Ex3.m1.5.5.2.2.2.2.3.cmml" xref="S3.Ex3.m1.5.5.2.2.2.2.3">𝑐</ci></apply></apply><apply id="S3.Ex3.m1.2.2.cmml" xref="S3.Ex3.m1.2.2"><divide id="S3.Ex3.m1.2.2.3.cmml" xref="S3.Ex3.m1.2.2"></divide><apply id="S3.Ex3.m1.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.1"><abs id="S3.Ex3.m1.1.1.1.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2"></abs><apply id="S3.Ex3.m1.1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1"><intersect id="S3.Ex3.m1.1.1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.1"></intersect><apply id="S3.Ex3.m1.1.1.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2"><times id="S3.Ex3.m1.1.1.1.1.1.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.1"></times><apply id="S3.Ex3.m1.1.1.1.1.1.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.1.2.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.1.2.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.2.2">𝑆</ci><ci id="S3.Ex3.m1.1.1.1.1.1.2.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.2.3">_</ci></apply><ci id="S3.Ex3.m1.1.1.1.1.1.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.2.3">𝑞</ci></apply><apply id="S3.Ex3.m1.1.1.1.1.1.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3"><times id="S3.Ex3.m1.1.1.1.1.1.3.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.1"></times><apply id="S3.Ex3.m1.1.1.1.1.1.3.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.1.3.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.1.3.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.2.2">𝑆</ci><ci id="S3.Ex3.m1.1.1.1.1.1.3.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.2.3">_</ci></apply><ci id="S3.Ex3.m1.1.1.1.1.1.3.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.3.3">𝑐</ci></apply></apply></apply><apply id="S3.Ex3.m1.2.2.2.2.cmml" xref="S3.Ex3.m1.2.2.2.1"><abs id="S3.Ex3.m1.2.2.2.2.1.cmml" xref="S3.Ex3.m1.2.2.2.1.2"></abs><apply id="S3.Ex3.m1.2.2.2.1.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1"><union id="S3.Ex3.m1.2.2.2.1.1.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1.1"></union><apply id="S3.Ex3.m1.2.2.2.1.1.2.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2"><times id="S3.Ex3.m1.2.2.2.1.1.2.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.1"></times><apply id="S3.Ex3.m1.2.2.2.1.1.2.2.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.2.1.1.2.2.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.2">subscript</csymbol><ci id="S3.Ex3.m1.2.2.2.1.1.2.2.2.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.2.2">𝑆</ci><ci id="S3.Ex3.m1.2.2.2.1.1.2.2.3.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.2.3">_</ci></apply><ci id="S3.Ex3.m1.2.2.2.1.1.2.3.cmml" xref="S3.Ex3.m1.2.2.2.1.1.2.3">𝑞</ci></apply><apply id="S3.Ex3.m1.2.2.2.1.1.3.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3"><times id="S3.Ex3.m1.2.2.2.1.1.3.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.1"></times><apply id="S3.Ex3.m1.2.2.2.1.1.3.2.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.2.1.1.3.2.1.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.2">subscript</csymbol><ci id="S3.Ex3.m1.2.2.2.1.1.3.2.2.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.2.2">𝑆</ci><ci id="S3.Ex3.m1.2.2.2.1.1.3.2.3.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.2.3">_</ci></apply><ci id="S3.Ex3.m1.2.2.2.1.1.3.3.cmml" xref="S3.Ex3.m1.2.2.2.1.1.3.3">𝑐</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex3.m1.5c">\operatorname{Jaccard}(S_{\_}q,S_{\_}c)=\frac{|S_{\_}q\cap S_{\_}c|}{|S_{\_}q%
\cup S_{\_}c|}</annotation><annotation encoding="application/x-llamapun" id="S3.Ex3.m1.5d">roman_Jaccard ( italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_q , italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_c ) = divide start_ARG | italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_q ∩ italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_c | end_ARG start_ARG | italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_q ∪ italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_c | end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.I2.i2.p2">
<p class="ltx_p" id="S3.I2.i2.p2.2">where <math alttext="S_{\_}q" class="ltx_Math" display="inline" id="S3.I2.i2.p2.1.m1.1"><semantics id="S3.I2.i2.p2.1.m1.1a"><mrow id="S3.I2.i2.p2.1.m1.1.1" xref="S3.I2.i2.p2.1.m1.1.1.cmml"><msub id="S3.I2.i2.p2.1.m1.1.1.2" xref="S3.I2.i2.p2.1.m1.1.1.2.cmml"><mi id="S3.I2.i2.p2.1.m1.1.1.2.2" xref="S3.I2.i2.p2.1.m1.1.1.2.2.cmml">S</mi><mi id="S3.I2.i2.p2.1.m1.1.1.2.3" mathvariant="normal" xref="S3.I2.i2.p2.1.m1.1.1.2.3.cmml">_</mi></msub><mo id="S3.I2.i2.p2.1.m1.1.1.1" xref="S3.I2.i2.p2.1.m1.1.1.1.cmml">⁢</mo><mi id="S3.I2.i2.p2.1.m1.1.1.3" xref="S3.I2.i2.p2.1.m1.1.1.3.cmml">q</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i2.p2.1.m1.1b"><apply id="S3.I2.i2.p2.1.m1.1.1.cmml" xref="S3.I2.i2.p2.1.m1.1.1"><times id="S3.I2.i2.p2.1.m1.1.1.1.cmml" xref="S3.I2.i2.p2.1.m1.1.1.1"></times><apply id="S3.I2.i2.p2.1.m1.1.1.2.cmml" xref="S3.I2.i2.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i2.p2.1.m1.1.1.2.1.cmml" xref="S3.I2.i2.p2.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i2.p2.1.m1.1.1.2.2.cmml" xref="S3.I2.i2.p2.1.m1.1.1.2.2">𝑆</ci><ci id="S3.I2.i2.p2.1.m1.1.1.2.3.cmml" xref="S3.I2.i2.p2.1.m1.1.1.2.3">_</ci></apply><ci id="S3.I2.i2.p2.1.m1.1.1.3.cmml" xref="S3.I2.i2.p2.1.m1.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i2.p2.1.m1.1c">S_{\_}q</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i2.p2.1.m1.1d">italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_q</annotation></semantics></math> represents the set of tokens in the retrieval target, and <math alttext="S_{\_}c" class="ltx_Math" display="inline" id="S3.I2.i2.p2.2.m2.1"><semantics id="S3.I2.i2.p2.2.m2.1a"><mrow id="S3.I2.i2.p2.2.m2.1.1" xref="S3.I2.i2.p2.2.m2.1.1.cmml"><msub id="S3.I2.i2.p2.2.m2.1.1.2" xref="S3.I2.i2.p2.2.m2.1.1.2.cmml"><mi id="S3.I2.i2.p2.2.m2.1.1.2.2" xref="S3.I2.i2.p2.2.m2.1.1.2.2.cmml">S</mi><mi id="S3.I2.i2.p2.2.m2.1.1.2.3" mathvariant="normal" xref="S3.I2.i2.p2.2.m2.1.1.2.3.cmml">_</mi></msub><mo id="S3.I2.i2.p2.2.m2.1.1.1" xref="S3.I2.i2.p2.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.I2.i2.p2.2.m2.1.1.3" xref="S3.I2.i2.p2.2.m2.1.1.3.cmml">c</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i2.p2.2.m2.1b"><apply id="S3.I2.i2.p2.2.m2.1.1.cmml" xref="S3.I2.i2.p2.2.m2.1.1"><times id="S3.I2.i2.p2.2.m2.1.1.1.cmml" xref="S3.I2.i2.p2.2.m2.1.1.1"></times><apply id="S3.I2.i2.p2.2.m2.1.1.2.cmml" xref="S3.I2.i2.p2.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i2.p2.2.m2.1.1.2.1.cmml" xref="S3.I2.i2.p2.2.m2.1.1.2">subscript</csymbol><ci id="S3.I2.i2.p2.2.m2.1.1.2.2.cmml" xref="S3.I2.i2.p2.2.m2.1.1.2.2">𝑆</ci><ci id="S3.I2.i2.p2.2.m2.1.1.2.3.cmml" xref="S3.I2.i2.p2.2.m2.1.1.2.3">_</ci></apply><ci id="S3.I2.i2.p2.2.m2.1.1.3.cmml" xref="S3.I2.i2.p2.2.m2.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i2.p2.2.m2.1c">S_{\_}c</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i2.p2.2.m2.1d">italic_S start_POSTSUBSCRIPT _ end_POSTSUBSCRIPT italic_c</annotation></semantics></math> represents the set of tokens in a candidate code snippet. This index measures the similarity between the two sets, ensuring that the retrieval process identifies snippets with the most relevant shared elements.</p>
</div>
</li>
</ul>
</div>
<figure class="ltx_figure" id="S3.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="209" id="S3.F4.g1" src="x4.png" width="968"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>The process from Experience to next iteration</figcaption>
</figure>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.1">This feedback-driven approach allows the framework to adapt and improve dynamically, leveraging historical performance data to guide future retrievals and generate more accurate and contextually appropriate code. By using detailed feedback to inform the retrieval targets, the framework can better align its generation process with the specific requirements of each task, ultimately leading to superior performance in code completion.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Iterative Process</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">In this section, we explore the iterative loop of our framework, focusing on how the Retriever, Actor, Evaluator, Reflector, and Experience components work together to refine generated code over multiple iterations.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS3.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Overall Iterative Process</h4>
<div class="ltx_para" id="S3.SS3.SSSx1.p1">
<p class="ltx_p" id="S3.SS3.SSSx1.p1.1">The model operates in a tightly coupled iterative loop, as illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>. The process starts with the Retriever extracting relevant snippets to generate a new prompt. The Actor uses this prompt to generate code, which is then evaluated. The Evaluator’s results and generated code inform the Reflector, which refines the output and feeds it back to the Retriever, repeating the cycle.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSSx2">
<h4 class="ltx_title ltx_title_subsubsection">Achieving the Final Best Result in Iterations</h4>
<div class="ltx_para" id="S3.SS3.SSSx2.p1">
<p class="ltx_p" id="S3.SS3.SSSx2.p1.1">To determine the optimal stopping point in this process, we implement a stopping criterion based on the stability of evaluation scores. Specifically, the process stops if the ES score does not show significant improvement (e.g., less than 1%) for a predefined number of iterations (e.g., 3 iterations) while the EM score is always 0. Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#alg1" title="Algorithm 1 ‣ 3.4 Component Interdependency ‣ 3 Framework Design ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a> shows the detail.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Component Interdependency</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">The interdependency between the Reflector and Experience component is particularly important in driving the iterative process towards optimal results.</p>
</div>
<div class="ltx_para" id="S3.SS4.p2">
<p class="ltx_p" id="S3.SS4.p2.1">The Reflector’s detailed feedback is the core input for the Experience component, which in turn enhances the retrieval process in subsequent iterations. This synergy between Reflector and Experience components drives the iterative process toward consistently higher quality code completions, ensuring robustness and adaptability in our framework.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Iterative process for code completion</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg1.l1.1">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg1.l1.2">IterativeProcess</span>(<math alttext="init\_input" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mrow id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml"><mi id="alg1.l1.m1.1.1.2" xref="alg1.l1.m1.1.1.2.cmml">i</mi><mo id="alg1.l1.m1.1.1.1" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.3" xref="alg1.l1.m1.1.1.3.cmml">n</mi><mo id="alg1.l1.m1.1.1.1a" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.4" xref="alg1.l1.m1.1.1.4.cmml">i</mi><mo id="alg1.l1.m1.1.1.1b" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.5" xref="alg1.l1.m1.1.1.5.cmml">t</mi><mo id="alg1.l1.m1.1.1.1c" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.6" mathvariant="normal" xref="alg1.l1.m1.1.1.6.cmml">_</mi><mo id="alg1.l1.m1.1.1.1d" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.7" xref="alg1.l1.m1.1.1.7.cmml">i</mi><mo id="alg1.l1.m1.1.1.1e" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.8" xref="alg1.l1.m1.1.1.8.cmml">n</mi><mo id="alg1.l1.m1.1.1.1f" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.9" xref="alg1.l1.m1.1.1.9.cmml">p</mi><mo id="alg1.l1.m1.1.1.1g" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.10" xref="alg1.l1.m1.1.1.10.cmml">u</mi><mo id="alg1.l1.m1.1.1.1h" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.11" xref="alg1.l1.m1.1.1.11.cmml">t</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><apply id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1"><times id="alg1.l1.m1.1.1.1.cmml" xref="alg1.l1.m1.1.1.1"></times><ci id="alg1.l1.m1.1.1.2.cmml" xref="alg1.l1.m1.1.1.2">𝑖</ci><ci id="alg1.l1.m1.1.1.3.cmml" xref="alg1.l1.m1.1.1.3">𝑛</ci><ci id="alg1.l1.m1.1.1.4.cmml" xref="alg1.l1.m1.1.1.4">𝑖</ci><ci id="alg1.l1.m1.1.1.5.cmml" xref="alg1.l1.m1.1.1.5">𝑡</ci><ci id="alg1.l1.m1.1.1.6.cmml" xref="alg1.l1.m1.1.1.6">_</ci><ci id="alg1.l1.m1.1.1.7.cmml" xref="alg1.l1.m1.1.1.7">𝑖</ci><ci id="alg1.l1.m1.1.1.8.cmml" xref="alg1.l1.m1.1.1.8">𝑛</ci><ci id="alg1.l1.m1.1.1.9.cmml" xref="alg1.l1.m1.1.1.9">𝑝</ci><ci id="alg1.l1.m1.1.1.10.cmml" xref="alg1.l1.m1.1.1.10">𝑢</ci><ci id="alg1.l1.m1.1.1.11.cmml" xref="alg1.l1.m1.1.1.11">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">init\_input</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_i italic_n italic_i italic_t _ italic_i italic_n italic_p italic_u italic_t</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     Initialize <math alttext="cur\_input\leftarrow init\_input" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mrow id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml"><mrow id="alg1.l2.m1.1.1.2" xref="alg1.l2.m1.1.1.2.cmml"><mi id="alg1.l2.m1.1.1.2.2" xref="alg1.l2.m1.1.1.2.2.cmml">c</mi><mo id="alg1.l2.m1.1.1.2.1" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.3" xref="alg1.l2.m1.1.1.2.3.cmml">u</mi><mo id="alg1.l2.m1.1.1.2.1a" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.4" xref="alg1.l2.m1.1.1.2.4.cmml">r</mi><mo id="alg1.l2.m1.1.1.2.1b" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.5" mathvariant="normal" xref="alg1.l2.m1.1.1.2.5.cmml">_</mi><mo id="alg1.l2.m1.1.1.2.1c" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.6" xref="alg1.l2.m1.1.1.2.6.cmml">i</mi><mo id="alg1.l2.m1.1.1.2.1d" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.7" xref="alg1.l2.m1.1.1.2.7.cmml">n</mi><mo id="alg1.l2.m1.1.1.2.1e" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.8" xref="alg1.l2.m1.1.1.2.8.cmml">p</mi><mo id="alg1.l2.m1.1.1.2.1f" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.9" xref="alg1.l2.m1.1.1.2.9.cmml">u</mi><mo id="alg1.l2.m1.1.1.2.1g" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.10" xref="alg1.l2.m1.1.1.2.10.cmml">t</mi></mrow><mo id="alg1.l2.m1.1.1.1" stretchy="false" xref="alg1.l2.m1.1.1.1.cmml">←</mo><mrow id="alg1.l2.m1.1.1.3" xref="alg1.l2.m1.1.1.3.cmml"><mi id="alg1.l2.m1.1.1.3.2" xref="alg1.l2.m1.1.1.3.2.cmml">i</mi><mo id="alg1.l2.m1.1.1.3.1" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.3" xref="alg1.l2.m1.1.1.3.3.cmml">n</mi><mo id="alg1.l2.m1.1.1.3.1a" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.4" xref="alg1.l2.m1.1.1.3.4.cmml">i</mi><mo id="alg1.l2.m1.1.1.3.1b" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.5" xref="alg1.l2.m1.1.1.3.5.cmml">t</mi><mo id="alg1.l2.m1.1.1.3.1c" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.6" mathvariant="normal" xref="alg1.l2.m1.1.1.3.6.cmml">_</mi><mo id="alg1.l2.m1.1.1.3.1d" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.7" xref="alg1.l2.m1.1.1.3.7.cmml">i</mi><mo id="alg1.l2.m1.1.1.3.1e" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.8" xref="alg1.l2.m1.1.1.3.8.cmml">n</mi><mo id="alg1.l2.m1.1.1.3.1f" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.9" xref="alg1.l2.m1.1.1.3.9.cmml">p</mi><mo id="alg1.l2.m1.1.1.3.1g" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.10" xref="alg1.l2.m1.1.1.3.10.cmml">u</mi><mo id="alg1.l2.m1.1.1.3.1h" xref="alg1.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.3.11" xref="alg1.l2.m1.1.1.3.11.cmml">t</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><apply id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1"><ci id="alg1.l2.m1.1.1.1.cmml" xref="alg1.l2.m1.1.1.1">←</ci><apply id="alg1.l2.m1.1.1.2.cmml" xref="alg1.l2.m1.1.1.2"><times id="alg1.l2.m1.1.1.2.1.cmml" xref="alg1.l2.m1.1.1.2.1"></times><ci id="alg1.l2.m1.1.1.2.2.cmml" xref="alg1.l2.m1.1.1.2.2">𝑐</ci><ci id="alg1.l2.m1.1.1.2.3.cmml" xref="alg1.l2.m1.1.1.2.3">𝑢</ci><ci id="alg1.l2.m1.1.1.2.4.cmml" xref="alg1.l2.m1.1.1.2.4">𝑟</ci><ci id="alg1.l2.m1.1.1.2.5.cmml" xref="alg1.l2.m1.1.1.2.5">_</ci><ci id="alg1.l2.m1.1.1.2.6.cmml" xref="alg1.l2.m1.1.1.2.6">𝑖</ci><ci id="alg1.l2.m1.1.1.2.7.cmml" xref="alg1.l2.m1.1.1.2.7">𝑛</ci><ci id="alg1.l2.m1.1.1.2.8.cmml" xref="alg1.l2.m1.1.1.2.8">𝑝</ci><ci id="alg1.l2.m1.1.1.2.9.cmml" xref="alg1.l2.m1.1.1.2.9">𝑢</ci><ci id="alg1.l2.m1.1.1.2.10.cmml" xref="alg1.l2.m1.1.1.2.10">𝑡</ci></apply><apply id="alg1.l2.m1.1.1.3.cmml" xref="alg1.l2.m1.1.1.3"><times id="alg1.l2.m1.1.1.3.1.cmml" xref="alg1.l2.m1.1.1.3.1"></times><ci id="alg1.l2.m1.1.1.3.2.cmml" xref="alg1.l2.m1.1.1.3.2">𝑖</ci><ci id="alg1.l2.m1.1.1.3.3.cmml" xref="alg1.l2.m1.1.1.3.3">𝑛</ci><ci id="alg1.l2.m1.1.1.3.4.cmml" xref="alg1.l2.m1.1.1.3.4">𝑖</ci><ci id="alg1.l2.m1.1.1.3.5.cmml" xref="alg1.l2.m1.1.1.3.5">𝑡</ci><ci id="alg1.l2.m1.1.1.3.6.cmml" xref="alg1.l2.m1.1.1.3.6">_</ci><ci id="alg1.l2.m1.1.1.3.7.cmml" xref="alg1.l2.m1.1.1.3.7">𝑖</ci><ci id="alg1.l2.m1.1.1.3.8.cmml" xref="alg1.l2.m1.1.1.3.8">𝑛</ci><ci id="alg1.l2.m1.1.1.3.9.cmml" xref="alg1.l2.m1.1.1.3.9">𝑝</ci><ci id="alg1.l2.m1.1.1.3.10.cmml" xref="alg1.l2.m1.1.1.3.10">𝑢</ci><ci id="alg1.l2.m1.1.1.3.11.cmml" xref="alg1.l2.m1.1.1.3.11">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">cur\_input\leftarrow init\_input</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_c italic_u italic_r _ italic_i italic_n italic_p italic_u italic_t ← italic_i italic_n italic_i italic_t _ italic_i italic_n italic_p italic_u italic_t</annotation></semantics></math>, <math alttext="iter\_cnt\leftarrow 0" class="ltx_Math" display="inline" id="alg1.l2.m2.1"><semantics id="alg1.l2.m2.1a"><mrow id="alg1.l2.m2.1.1" xref="alg1.l2.m2.1.1.cmml"><mrow id="alg1.l2.m2.1.1.2" xref="alg1.l2.m2.1.1.2.cmml"><mi id="alg1.l2.m2.1.1.2.2" xref="alg1.l2.m2.1.1.2.2.cmml">i</mi><mo id="alg1.l2.m2.1.1.2.1" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.3" xref="alg1.l2.m2.1.1.2.3.cmml">t</mi><mo id="alg1.l2.m2.1.1.2.1a" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.4" xref="alg1.l2.m2.1.1.2.4.cmml">e</mi><mo id="alg1.l2.m2.1.1.2.1b" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.5" xref="alg1.l2.m2.1.1.2.5.cmml">r</mi><mo id="alg1.l2.m2.1.1.2.1c" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.6" mathvariant="normal" xref="alg1.l2.m2.1.1.2.6.cmml">_</mi><mo id="alg1.l2.m2.1.1.2.1d" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.7" xref="alg1.l2.m2.1.1.2.7.cmml">c</mi><mo id="alg1.l2.m2.1.1.2.1e" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.8" xref="alg1.l2.m2.1.1.2.8.cmml">n</mi><mo id="alg1.l2.m2.1.1.2.1f" xref="alg1.l2.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m2.1.1.2.9" xref="alg1.l2.m2.1.1.2.9.cmml">t</mi></mrow><mo id="alg1.l2.m2.1.1.1" stretchy="false" xref="alg1.l2.m2.1.1.1.cmml">←</mo><mn id="alg1.l2.m2.1.1.3" xref="alg1.l2.m2.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m2.1b"><apply id="alg1.l2.m2.1.1.cmml" xref="alg1.l2.m2.1.1"><ci id="alg1.l2.m2.1.1.1.cmml" xref="alg1.l2.m2.1.1.1">←</ci><apply id="alg1.l2.m2.1.1.2.cmml" xref="alg1.l2.m2.1.1.2"><times id="alg1.l2.m2.1.1.2.1.cmml" xref="alg1.l2.m2.1.1.2.1"></times><ci id="alg1.l2.m2.1.1.2.2.cmml" xref="alg1.l2.m2.1.1.2.2">𝑖</ci><ci id="alg1.l2.m2.1.1.2.3.cmml" xref="alg1.l2.m2.1.1.2.3">𝑡</ci><ci id="alg1.l2.m2.1.1.2.4.cmml" xref="alg1.l2.m2.1.1.2.4">𝑒</ci><ci id="alg1.l2.m2.1.1.2.5.cmml" xref="alg1.l2.m2.1.1.2.5">𝑟</ci><ci id="alg1.l2.m2.1.1.2.6.cmml" xref="alg1.l2.m2.1.1.2.6">_</ci><ci id="alg1.l2.m2.1.1.2.7.cmml" xref="alg1.l2.m2.1.1.2.7">𝑐</ci><ci id="alg1.l2.m2.1.1.2.8.cmml" xref="alg1.l2.m2.1.1.2.8">𝑛</ci><ci id="alg1.l2.m2.1.1.2.9.cmml" xref="alg1.l2.m2.1.1.2.9">𝑡</ci></apply><cn id="alg1.l2.m2.1.1.3.cmml" type="integer" xref="alg1.l2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m2.1c">iter\_cnt\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m2.1d">italic_i italic_t italic_e italic_r _ italic_c italic_n italic_t ← 0</annotation></semantics></math>, <math alttext="max\_iter\leftarrow 10" class="ltx_Math" display="inline" id="alg1.l2.m3.1"><semantics id="alg1.l2.m3.1a"><mrow id="alg1.l2.m3.1.1" xref="alg1.l2.m3.1.1.cmml"><mrow id="alg1.l2.m3.1.1.2" xref="alg1.l2.m3.1.1.2.cmml"><mi id="alg1.l2.m3.1.1.2.2" xref="alg1.l2.m3.1.1.2.2.cmml">m</mi><mo id="alg1.l2.m3.1.1.2.1" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.3" xref="alg1.l2.m3.1.1.2.3.cmml">a</mi><mo id="alg1.l2.m3.1.1.2.1a" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.4" xref="alg1.l2.m3.1.1.2.4.cmml">x</mi><mo id="alg1.l2.m3.1.1.2.1b" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.5" mathvariant="normal" xref="alg1.l2.m3.1.1.2.5.cmml">_</mi><mo id="alg1.l2.m3.1.1.2.1c" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.6" xref="alg1.l2.m3.1.1.2.6.cmml">i</mi><mo id="alg1.l2.m3.1.1.2.1d" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.7" xref="alg1.l2.m3.1.1.2.7.cmml">t</mi><mo id="alg1.l2.m3.1.1.2.1e" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.8" xref="alg1.l2.m3.1.1.2.8.cmml">e</mi><mo id="alg1.l2.m3.1.1.2.1f" xref="alg1.l2.m3.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m3.1.1.2.9" xref="alg1.l2.m3.1.1.2.9.cmml">r</mi></mrow><mo id="alg1.l2.m3.1.1.1" stretchy="false" xref="alg1.l2.m3.1.1.1.cmml">←</mo><mn id="alg1.l2.m3.1.1.3" xref="alg1.l2.m3.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m3.1b"><apply id="alg1.l2.m3.1.1.cmml" xref="alg1.l2.m3.1.1"><ci id="alg1.l2.m3.1.1.1.cmml" xref="alg1.l2.m3.1.1.1">←</ci><apply id="alg1.l2.m3.1.1.2.cmml" xref="alg1.l2.m3.1.1.2"><times id="alg1.l2.m3.1.1.2.1.cmml" xref="alg1.l2.m3.1.1.2.1"></times><ci id="alg1.l2.m3.1.1.2.2.cmml" xref="alg1.l2.m3.1.1.2.2">𝑚</ci><ci id="alg1.l2.m3.1.1.2.3.cmml" xref="alg1.l2.m3.1.1.2.3">𝑎</ci><ci id="alg1.l2.m3.1.1.2.4.cmml" xref="alg1.l2.m3.1.1.2.4">𝑥</ci><ci id="alg1.l2.m3.1.1.2.5.cmml" xref="alg1.l2.m3.1.1.2.5">_</ci><ci id="alg1.l2.m3.1.1.2.6.cmml" xref="alg1.l2.m3.1.1.2.6">𝑖</ci><ci id="alg1.l2.m3.1.1.2.7.cmml" xref="alg1.l2.m3.1.1.2.7">𝑡</ci><ci id="alg1.l2.m3.1.1.2.8.cmml" xref="alg1.l2.m3.1.1.2.8">𝑒</ci><ci id="alg1.l2.m3.1.1.2.9.cmml" xref="alg1.l2.m3.1.1.2.9">𝑟</ci></apply><cn id="alg1.l2.m3.1.1.3.cmml" type="integer" xref="alg1.l2.m3.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m3.1c">max\_iter\leftarrow 10</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m3.1d">italic_m italic_a italic_x _ italic_i italic_t italic_e italic_r ← 10</annotation></semantics></math>, <math alttext="best\_em\leftarrow 0" class="ltx_Math" display="inline" id="alg1.l2.m4.1"><semantics id="alg1.l2.m4.1a"><mrow id="alg1.l2.m4.1.1" xref="alg1.l2.m4.1.1.cmml"><mrow id="alg1.l2.m4.1.1.2" xref="alg1.l2.m4.1.1.2.cmml"><mi id="alg1.l2.m4.1.1.2.2" xref="alg1.l2.m4.1.1.2.2.cmml">b</mi><mo id="alg1.l2.m4.1.1.2.1" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.3" xref="alg1.l2.m4.1.1.2.3.cmml">e</mi><mo id="alg1.l2.m4.1.1.2.1a" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.4" xref="alg1.l2.m4.1.1.2.4.cmml">s</mi><mo id="alg1.l2.m4.1.1.2.1b" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.5" xref="alg1.l2.m4.1.1.2.5.cmml">t</mi><mo id="alg1.l2.m4.1.1.2.1c" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.6" mathvariant="normal" xref="alg1.l2.m4.1.1.2.6.cmml">_</mi><mo id="alg1.l2.m4.1.1.2.1d" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.7" xref="alg1.l2.m4.1.1.2.7.cmml">e</mi><mo id="alg1.l2.m4.1.1.2.1e" xref="alg1.l2.m4.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m4.1.1.2.8" xref="alg1.l2.m4.1.1.2.8.cmml">m</mi></mrow><mo id="alg1.l2.m4.1.1.1" stretchy="false" xref="alg1.l2.m4.1.1.1.cmml">←</mo><mn id="alg1.l2.m4.1.1.3" xref="alg1.l2.m4.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m4.1b"><apply id="alg1.l2.m4.1.1.cmml" xref="alg1.l2.m4.1.1"><ci id="alg1.l2.m4.1.1.1.cmml" xref="alg1.l2.m4.1.1.1">←</ci><apply id="alg1.l2.m4.1.1.2.cmml" xref="alg1.l2.m4.1.1.2"><times id="alg1.l2.m4.1.1.2.1.cmml" xref="alg1.l2.m4.1.1.2.1"></times><ci id="alg1.l2.m4.1.1.2.2.cmml" xref="alg1.l2.m4.1.1.2.2">𝑏</ci><ci id="alg1.l2.m4.1.1.2.3.cmml" xref="alg1.l2.m4.1.1.2.3">𝑒</ci><ci id="alg1.l2.m4.1.1.2.4.cmml" xref="alg1.l2.m4.1.1.2.4">𝑠</ci><ci id="alg1.l2.m4.1.1.2.5.cmml" xref="alg1.l2.m4.1.1.2.5">𝑡</ci><ci id="alg1.l2.m4.1.1.2.6.cmml" xref="alg1.l2.m4.1.1.2.6">_</ci><ci id="alg1.l2.m4.1.1.2.7.cmml" xref="alg1.l2.m4.1.1.2.7">𝑒</ci><ci id="alg1.l2.m4.1.1.2.8.cmml" xref="alg1.l2.m4.1.1.2.8">𝑚</ci></apply><cn id="alg1.l2.m4.1.1.3.cmml" type="integer" xref="alg1.l2.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m4.1c">best\_em\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m4.1d">italic_b italic_e italic_s italic_t _ italic_e italic_m ← 0</annotation></semantics></math>, <math alttext="best\_es\leftarrow 0" class="ltx_Math" display="inline" id="alg1.l2.m5.1"><semantics id="alg1.l2.m5.1a"><mrow id="alg1.l2.m5.1.1" xref="alg1.l2.m5.1.1.cmml"><mrow id="alg1.l2.m5.1.1.2" xref="alg1.l2.m5.1.1.2.cmml"><mi id="alg1.l2.m5.1.1.2.2" xref="alg1.l2.m5.1.1.2.2.cmml">b</mi><mo id="alg1.l2.m5.1.1.2.1" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.3" xref="alg1.l2.m5.1.1.2.3.cmml">e</mi><mo id="alg1.l2.m5.1.1.2.1a" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.4" xref="alg1.l2.m5.1.1.2.4.cmml">s</mi><mo id="alg1.l2.m5.1.1.2.1b" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.5" xref="alg1.l2.m5.1.1.2.5.cmml">t</mi><mo id="alg1.l2.m5.1.1.2.1c" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.6" mathvariant="normal" xref="alg1.l2.m5.1.1.2.6.cmml">_</mi><mo id="alg1.l2.m5.1.1.2.1d" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.7" xref="alg1.l2.m5.1.1.2.7.cmml">e</mi><mo id="alg1.l2.m5.1.1.2.1e" xref="alg1.l2.m5.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m5.1.1.2.8" xref="alg1.l2.m5.1.1.2.8.cmml">s</mi></mrow><mo id="alg1.l2.m5.1.1.1" stretchy="false" xref="alg1.l2.m5.1.1.1.cmml">←</mo><mn id="alg1.l2.m5.1.1.3" xref="alg1.l2.m5.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m5.1b"><apply id="alg1.l2.m5.1.1.cmml" xref="alg1.l2.m5.1.1"><ci id="alg1.l2.m5.1.1.1.cmml" xref="alg1.l2.m5.1.1.1">←</ci><apply id="alg1.l2.m5.1.1.2.cmml" xref="alg1.l2.m5.1.1.2"><times id="alg1.l2.m5.1.1.2.1.cmml" xref="alg1.l2.m5.1.1.2.1"></times><ci id="alg1.l2.m5.1.1.2.2.cmml" xref="alg1.l2.m5.1.1.2.2">𝑏</ci><ci id="alg1.l2.m5.1.1.2.3.cmml" xref="alg1.l2.m5.1.1.2.3">𝑒</ci><ci id="alg1.l2.m5.1.1.2.4.cmml" xref="alg1.l2.m5.1.1.2.4">𝑠</ci><ci id="alg1.l2.m5.1.1.2.5.cmml" xref="alg1.l2.m5.1.1.2.5">𝑡</ci><ci id="alg1.l2.m5.1.1.2.6.cmml" xref="alg1.l2.m5.1.1.2.6">_</ci><ci id="alg1.l2.m5.1.1.2.7.cmml" xref="alg1.l2.m5.1.1.2.7">𝑒</ci><ci id="alg1.l2.m5.1.1.2.8.cmml" xref="alg1.l2.m5.1.1.2.8">𝑠</ci></apply><cn id="alg1.l2.m5.1.1.3.cmml" type="integer" xref="alg1.l2.m5.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m5.1c">best\_es\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m5.1d">italic_b italic_e italic_s italic_t _ italic_e italic_s ← 0</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     Initialize <math alttext="no\_imp\_thres\leftarrow 3" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><mrow id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml"><mi id="alg1.l3.m1.1.1.2.2" xref="alg1.l3.m1.1.1.2.2.cmml">n</mi><mo id="alg1.l3.m1.1.1.2.1" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.3" xref="alg1.l3.m1.1.1.2.3.cmml">o</mi><mo id="alg1.l3.m1.1.1.2.1a" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.4" mathvariant="normal" xref="alg1.l3.m1.1.1.2.4.cmml">_</mi><mo id="alg1.l3.m1.1.1.2.1b" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.5" xref="alg1.l3.m1.1.1.2.5.cmml">i</mi><mo id="alg1.l3.m1.1.1.2.1c" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.6" xref="alg1.l3.m1.1.1.2.6.cmml">m</mi><mo id="alg1.l3.m1.1.1.2.1d" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.7" xref="alg1.l3.m1.1.1.2.7.cmml">p</mi><mo id="alg1.l3.m1.1.1.2.1e" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.8" mathvariant="normal" xref="alg1.l3.m1.1.1.2.8.cmml">_</mi><mo id="alg1.l3.m1.1.1.2.1f" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.9" xref="alg1.l3.m1.1.1.2.9.cmml">t</mi><mo id="alg1.l3.m1.1.1.2.1g" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.10" xref="alg1.l3.m1.1.1.2.10.cmml">h</mi><mo id="alg1.l3.m1.1.1.2.1h" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.11" xref="alg1.l3.m1.1.1.2.11.cmml">r</mi><mo id="alg1.l3.m1.1.1.2.1i" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.12" xref="alg1.l3.m1.1.1.2.12.cmml">e</mi><mo id="alg1.l3.m1.1.1.2.1j" xref="alg1.l3.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.2.13" xref="alg1.l3.m1.1.1.2.13.cmml">s</mi></mrow><mo id="alg1.l3.m1.1.1.1" stretchy="false" xref="alg1.l3.m1.1.1.1.cmml">←</mo><mn id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><ci id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1">←</ci><apply id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2"><times id="alg1.l3.m1.1.1.2.1.cmml" xref="alg1.l3.m1.1.1.2.1"></times><ci id="alg1.l3.m1.1.1.2.2.cmml" xref="alg1.l3.m1.1.1.2.2">𝑛</ci><ci id="alg1.l3.m1.1.1.2.3.cmml" xref="alg1.l3.m1.1.1.2.3">𝑜</ci><ci id="alg1.l3.m1.1.1.2.4.cmml" xref="alg1.l3.m1.1.1.2.4">_</ci><ci id="alg1.l3.m1.1.1.2.5.cmml" xref="alg1.l3.m1.1.1.2.5">𝑖</ci><ci id="alg1.l3.m1.1.1.2.6.cmml" xref="alg1.l3.m1.1.1.2.6">𝑚</ci><ci id="alg1.l3.m1.1.1.2.7.cmml" xref="alg1.l3.m1.1.1.2.7">𝑝</ci><ci id="alg1.l3.m1.1.1.2.8.cmml" xref="alg1.l3.m1.1.1.2.8">_</ci><ci id="alg1.l3.m1.1.1.2.9.cmml" xref="alg1.l3.m1.1.1.2.9">𝑡</ci><ci id="alg1.l3.m1.1.1.2.10.cmml" xref="alg1.l3.m1.1.1.2.10">ℎ</ci><ci id="alg1.l3.m1.1.1.2.11.cmml" xref="alg1.l3.m1.1.1.2.11">𝑟</ci><ci id="alg1.l3.m1.1.1.2.12.cmml" xref="alg1.l3.m1.1.1.2.12">𝑒</ci><ci id="alg1.l3.m1.1.1.2.13.cmml" xref="alg1.l3.m1.1.1.2.13">𝑠</ci></apply><cn id="alg1.l3.m1.1.1.3.cmml" type="integer" xref="alg1.l3.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">no\_imp\_thres\leftarrow 3</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_n italic_o _ italic_i italic_m italic_p _ italic_t italic_h italic_r italic_e italic_s ← 3</annotation></semantics></math>, <math alttext="no\_imp\_cnt\leftarrow 0" class="ltx_Math" display="inline" id="alg1.l3.m2.1"><semantics id="alg1.l3.m2.1a"><mrow id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml"><mrow id="alg1.l3.m2.1.1.2" xref="alg1.l3.m2.1.1.2.cmml"><mi id="alg1.l3.m2.1.1.2.2" xref="alg1.l3.m2.1.1.2.2.cmml">n</mi><mo id="alg1.l3.m2.1.1.2.1" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.3" xref="alg1.l3.m2.1.1.2.3.cmml">o</mi><mo id="alg1.l3.m2.1.1.2.1a" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.4" mathvariant="normal" xref="alg1.l3.m2.1.1.2.4.cmml">_</mi><mo id="alg1.l3.m2.1.1.2.1b" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.5" xref="alg1.l3.m2.1.1.2.5.cmml">i</mi><mo id="alg1.l3.m2.1.1.2.1c" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.6" xref="alg1.l3.m2.1.1.2.6.cmml">m</mi><mo id="alg1.l3.m2.1.1.2.1d" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.7" xref="alg1.l3.m2.1.1.2.7.cmml">p</mi><mo id="alg1.l3.m2.1.1.2.1e" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.8" mathvariant="normal" xref="alg1.l3.m2.1.1.2.8.cmml">_</mi><mo id="alg1.l3.m2.1.1.2.1f" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.9" xref="alg1.l3.m2.1.1.2.9.cmml">c</mi><mo id="alg1.l3.m2.1.1.2.1g" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.10" xref="alg1.l3.m2.1.1.2.10.cmml">n</mi><mo id="alg1.l3.m2.1.1.2.1h" xref="alg1.l3.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.2.11" xref="alg1.l3.m2.1.1.2.11.cmml">t</mi></mrow><mo id="alg1.l3.m2.1.1.1" stretchy="false" xref="alg1.l3.m2.1.1.1.cmml">←</mo><mn id="alg1.l3.m2.1.1.3" xref="alg1.l3.m2.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b"><apply id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1"><ci id="alg1.l3.m2.1.1.1.cmml" xref="alg1.l3.m2.1.1.1">←</ci><apply id="alg1.l3.m2.1.1.2.cmml" xref="alg1.l3.m2.1.1.2"><times id="alg1.l3.m2.1.1.2.1.cmml" xref="alg1.l3.m2.1.1.2.1"></times><ci id="alg1.l3.m2.1.1.2.2.cmml" xref="alg1.l3.m2.1.1.2.2">𝑛</ci><ci id="alg1.l3.m2.1.1.2.3.cmml" xref="alg1.l3.m2.1.1.2.3">𝑜</ci><ci id="alg1.l3.m2.1.1.2.4.cmml" xref="alg1.l3.m2.1.1.2.4">_</ci><ci id="alg1.l3.m2.1.1.2.5.cmml" xref="alg1.l3.m2.1.1.2.5">𝑖</ci><ci id="alg1.l3.m2.1.1.2.6.cmml" xref="alg1.l3.m2.1.1.2.6">𝑚</ci><ci id="alg1.l3.m2.1.1.2.7.cmml" xref="alg1.l3.m2.1.1.2.7">𝑝</ci><ci id="alg1.l3.m2.1.1.2.8.cmml" xref="alg1.l3.m2.1.1.2.8">_</ci><ci id="alg1.l3.m2.1.1.2.9.cmml" xref="alg1.l3.m2.1.1.2.9">𝑐</ci><ci id="alg1.l3.m2.1.1.2.10.cmml" xref="alg1.l3.m2.1.1.2.10">𝑛</ci><ci id="alg1.l3.m2.1.1.2.11.cmml" xref="alg1.l3.m2.1.1.2.11">𝑡</ci></apply><cn id="alg1.l3.m2.1.1.3.cmml" type="integer" xref="alg1.l3.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m2.1c">no\_imp\_cnt\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m2.1d">italic_n italic_o _ italic_i italic_m italic_p _ italic_c italic_n italic_t ← 0</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l4.1">while</span> <math alttext="iter\_cnt&lt;max\_iter" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mrow id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml"><mi id="alg1.l4.m1.1.1.2.2" xref="alg1.l4.m1.1.1.2.2.cmml">i</mi><mo id="alg1.l4.m1.1.1.2.1" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.3" xref="alg1.l4.m1.1.1.2.3.cmml">t</mi><mo id="alg1.l4.m1.1.1.2.1a" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.4" xref="alg1.l4.m1.1.1.2.4.cmml">e</mi><mo id="alg1.l4.m1.1.1.2.1b" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.5" xref="alg1.l4.m1.1.1.2.5.cmml">r</mi><mo id="alg1.l4.m1.1.1.2.1c" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.6" mathvariant="normal" xref="alg1.l4.m1.1.1.2.6.cmml">_</mi><mo id="alg1.l4.m1.1.1.2.1d" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.7" xref="alg1.l4.m1.1.1.2.7.cmml">c</mi><mo id="alg1.l4.m1.1.1.2.1e" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.8" xref="alg1.l4.m1.1.1.2.8.cmml">n</mi><mo id="alg1.l4.m1.1.1.2.1f" xref="alg1.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.2.9" xref="alg1.l4.m1.1.1.2.9.cmml">t</mi></mrow><mo id="alg1.l4.m1.1.1.1" xref="alg1.l4.m1.1.1.1.cmml">&lt;</mo><mrow id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml"><mi id="alg1.l4.m1.1.1.3.2" xref="alg1.l4.m1.1.1.3.2.cmml">m</mi><mo id="alg1.l4.m1.1.1.3.1" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.3" xref="alg1.l4.m1.1.1.3.3.cmml">a</mi><mo id="alg1.l4.m1.1.1.3.1a" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.4" xref="alg1.l4.m1.1.1.3.4.cmml">x</mi><mo id="alg1.l4.m1.1.1.3.1b" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.5" mathvariant="normal" xref="alg1.l4.m1.1.1.3.5.cmml">_</mi><mo id="alg1.l4.m1.1.1.3.1c" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.6" xref="alg1.l4.m1.1.1.3.6.cmml">i</mi><mo id="alg1.l4.m1.1.1.3.1d" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.7" xref="alg1.l4.m1.1.1.3.7.cmml">t</mi><mo id="alg1.l4.m1.1.1.3.1e" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.8" xref="alg1.l4.m1.1.1.3.8.cmml">e</mi><mo id="alg1.l4.m1.1.1.3.1f" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.9" xref="alg1.l4.m1.1.1.3.9.cmml">r</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><lt id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1"></lt><apply id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2"><times id="alg1.l4.m1.1.1.2.1.cmml" xref="alg1.l4.m1.1.1.2.1"></times><ci id="alg1.l4.m1.1.1.2.2.cmml" xref="alg1.l4.m1.1.1.2.2">𝑖</ci><ci id="alg1.l4.m1.1.1.2.3.cmml" xref="alg1.l4.m1.1.1.2.3">𝑡</ci><ci id="alg1.l4.m1.1.1.2.4.cmml" xref="alg1.l4.m1.1.1.2.4">𝑒</ci><ci id="alg1.l4.m1.1.1.2.5.cmml" xref="alg1.l4.m1.1.1.2.5">𝑟</ci><ci id="alg1.l4.m1.1.1.2.6.cmml" xref="alg1.l4.m1.1.1.2.6">_</ci><ci id="alg1.l4.m1.1.1.2.7.cmml" xref="alg1.l4.m1.1.1.2.7">𝑐</ci><ci id="alg1.l4.m1.1.1.2.8.cmml" xref="alg1.l4.m1.1.1.2.8">𝑛</ci><ci id="alg1.l4.m1.1.1.2.9.cmml" xref="alg1.l4.m1.1.1.2.9">𝑡</ci></apply><apply id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3"><times id="alg1.l4.m1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.3.1"></times><ci id="alg1.l4.m1.1.1.3.2.cmml" xref="alg1.l4.m1.1.1.3.2">𝑚</ci><ci id="alg1.l4.m1.1.1.3.3.cmml" xref="alg1.l4.m1.1.1.3.3">𝑎</ci><ci id="alg1.l4.m1.1.1.3.4.cmml" xref="alg1.l4.m1.1.1.3.4">𝑥</ci><ci id="alg1.l4.m1.1.1.3.5.cmml" xref="alg1.l4.m1.1.1.3.5">_</ci><ci id="alg1.l4.m1.1.1.3.6.cmml" xref="alg1.l4.m1.1.1.3.6">𝑖</ci><ci id="alg1.l4.m1.1.1.3.7.cmml" xref="alg1.l4.m1.1.1.3.7">𝑡</ci><ci id="alg1.l4.m1.1.1.3.8.cmml" xref="alg1.l4.m1.1.1.3.8">𝑒</ci><ci id="alg1.l4.m1.1.1.3.9.cmml" xref="alg1.l4.m1.1.1.3.9">𝑟</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">iter\_cnt&lt;max\_iter</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_i italic_t italic_e italic_r _ italic_c italic_n italic_t &lt; italic_m italic_a italic_x _ italic_i italic_t italic_e italic_r</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l4.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <math alttext="retrieved\_snips\leftarrow\text{Retriever}(cur\_input)" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mrow id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml"><mi id="alg1.l5.m1.1.1.3.2" xref="alg1.l5.m1.1.1.3.2.cmml">r</mi><mo id="alg1.l5.m1.1.1.3.1" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.3" xref="alg1.l5.m1.1.1.3.3.cmml">e</mi><mo id="alg1.l5.m1.1.1.3.1a" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.4" xref="alg1.l5.m1.1.1.3.4.cmml">t</mi><mo id="alg1.l5.m1.1.1.3.1b" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.5" xref="alg1.l5.m1.1.1.3.5.cmml">r</mi><mo id="alg1.l5.m1.1.1.3.1c" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.6" xref="alg1.l5.m1.1.1.3.6.cmml">i</mi><mo id="alg1.l5.m1.1.1.3.1d" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.7" xref="alg1.l5.m1.1.1.3.7.cmml">e</mi><mo id="alg1.l5.m1.1.1.3.1e" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.8" xref="alg1.l5.m1.1.1.3.8.cmml">v</mi><mo id="alg1.l5.m1.1.1.3.1f" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.9" xref="alg1.l5.m1.1.1.3.9.cmml">e</mi><mo id="alg1.l5.m1.1.1.3.1g" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.10" xref="alg1.l5.m1.1.1.3.10.cmml">d</mi><mo id="alg1.l5.m1.1.1.3.1h" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.11" mathvariant="normal" xref="alg1.l5.m1.1.1.3.11.cmml">_</mi><mo id="alg1.l5.m1.1.1.3.1i" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.12" xref="alg1.l5.m1.1.1.3.12.cmml">s</mi><mo id="alg1.l5.m1.1.1.3.1j" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.13" xref="alg1.l5.m1.1.1.3.13.cmml">n</mi><mo id="alg1.l5.m1.1.1.3.1k" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.14" xref="alg1.l5.m1.1.1.3.14.cmml">i</mi><mo id="alg1.l5.m1.1.1.3.1l" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.15" xref="alg1.l5.m1.1.1.3.15.cmml">p</mi><mo id="alg1.l5.m1.1.1.3.1m" xref="alg1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3.16" xref="alg1.l5.m1.1.1.3.16.cmml">s</mi></mrow><mo id="alg1.l5.m1.1.1.2" stretchy="false" xref="alg1.l5.m1.1.1.2.cmml">←</mo><mrow id="alg1.l5.m1.1.1.1" xref="alg1.l5.m1.1.1.1.cmml"><mtext id="alg1.l5.m1.1.1.1.3" xref="alg1.l5.m1.1.1.1.3a.cmml">Retriever</mtext><mo id="alg1.l5.m1.1.1.1.2" xref="alg1.l5.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l5.m1.1.1.1.1.1" xref="alg1.l5.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l5.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l5.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l5.m1.1.1.1.1.1.1" xref="alg1.l5.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l5.m1.1.1.1.1.1.1.2" xref="alg1.l5.m1.1.1.1.1.1.1.2.cmml">c</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.3" xref="alg1.l5.m1.1.1.1.1.1.1.3.cmml">u</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1a" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.4" xref="alg1.l5.m1.1.1.1.1.1.1.4.cmml">r</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1b" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.5" mathvariant="normal" xref="alg1.l5.m1.1.1.1.1.1.1.5.cmml">_</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1c" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.6" xref="alg1.l5.m1.1.1.1.1.1.1.6.cmml">i</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1d" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.7" xref="alg1.l5.m1.1.1.1.1.1.1.7.cmml">n</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1e" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.8" xref="alg1.l5.m1.1.1.1.1.1.1.8.cmml">p</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1f" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.9" xref="alg1.l5.m1.1.1.1.1.1.1.9.cmml">u</mi><mo id="alg1.l5.m1.1.1.1.1.1.1.1g" xref="alg1.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.1.1.1.1.10" xref="alg1.l5.m1.1.1.1.1.1.1.10.cmml">t</mi></mrow><mo id="alg1.l5.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l5.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><ci id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">←</ci><apply id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3"><times id="alg1.l5.m1.1.1.3.1.cmml" xref="alg1.l5.m1.1.1.3.1"></times><ci id="alg1.l5.m1.1.1.3.2.cmml" xref="alg1.l5.m1.1.1.3.2">𝑟</ci><ci id="alg1.l5.m1.1.1.3.3.cmml" xref="alg1.l5.m1.1.1.3.3">𝑒</ci><ci id="alg1.l5.m1.1.1.3.4.cmml" xref="alg1.l5.m1.1.1.3.4">𝑡</ci><ci id="alg1.l5.m1.1.1.3.5.cmml" xref="alg1.l5.m1.1.1.3.5">𝑟</ci><ci id="alg1.l5.m1.1.1.3.6.cmml" xref="alg1.l5.m1.1.1.3.6">𝑖</ci><ci id="alg1.l5.m1.1.1.3.7.cmml" xref="alg1.l5.m1.1.1.3.7">𝑒</ci><ci id="alg1.l5.m1.1.1.3.8.cmml" xref="alg1.l5.m1.1.1.3.8">𝑣</ci><ci id="alg1.l5.m1.1.1.3.9.cmml" xref="alg1.l5.m1.1.1.3.9">𝑒</ci><ci id="alg1.l5.m1.1.1.3.10.cmml" xref="alg1.l5.m1.1.1.3.10">𝑑</ci><ci id="alg1.l5.m1.1.1.3.11.cmml" xref="alg1.l5.m1.1.1.3.11">_</ci><ci id="alg1.l5.m1.1.1.3.12.cmml" xref="alg1.l5.m1.1.1.3.12">𝑠</ci><ci id="alg1.l5.m1.1.1.3.13.cmml" xref="alg1.l5.m1.1.1.3.13">𝑛</ci><ci id="alg1.l5.m1.1.1.3.14.cmml" xref="alg1.l5.m1.1.1.3.14">𝑖</ci><ci id="alg1.l5.m1.1.1.3.15.cmml" xref="alg1.l5.m1.1.1.3.15">𝑝</ci><ci id="alg1.l5.m1.1.1.3.16.cmml" xref="alg1.l5.m1.1.1.3.16">𝑠</ci></apply><apply id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1"><times id="alg1.l5.m1.1.1.1.2.cmml" xref="alg1.l5.m1.1.1.1.2"></times><ci id="alg1.l5.m1.1.1.1.3a.cmml" xref="alg1.l5.m1.1.1.1.3"><mtext id="alg1.l5.m1.1.1.1.3.cmml" xref="alg1.l5.m1.1.1.1.3">Retriever</mtext></ci><apply id="alg1.l5.m1.1.1.1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1.1.1"><times id="alg1.l5.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l5.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.3">𝑢</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.4">𝑟</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.5">_</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.6">𝑖</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.7">𝑛</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.8">𝑝</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.9">𝑢</ci><ci id="alg1.l5.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l5.m1.1.1.1.1.1.1.10">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">retrieved\_snips\leftarrow\text{Retriever}(cur\_input)</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_r italic_e italic_t italic_r italic_i italic_e italic_v italic_e italic_d _ italic_s italic_n italic_i italic_p italic_s ← Retriever ( italic_c italic_u italic_r _ italic_i italic_n italic_p italic_u italic_t )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>         <math alttext="gen\_code\leftarrow\text{Actor}(retrieved\_snips)" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml"><mrow id="alg1.l6.m1.1.1.3" xref="alg1.l6.m1.1.1.3.cmml"><mi id="alg1.l6.m1.1.1.3.2" xref="alg1.l6.m1.1.1.3.2.cmml">g</mi><mo id="alg1.l6.m1.1.1.3.1" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.3" xref="alg1.l6.m1.1.1.3.3.cmml">e</mi><mo id="alg1.l6.m1.1.1.3.1a" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.4" xref="alg1.l6.m1.1.1.3.4.cmml">n</mi><mo id="alg1.l6.m1.1.1.3.1b" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.5" mathvariant="normal" xref="alg1.l6.m1.1.1.3.5.cmml">_</mi><mo id="alg1.l6.m1.1.1.3.1c" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.6" xref="alg1.l6.m1.1.1.3.6.cmml">c</mi><mo id="alg1.l6.m1.1.1.3.1d" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.7" xref="alg1.l6.m1.1.1.3.7.cmml">o</mi><mo id="alg1.l6.m1.1.1.3.1e" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.8" xref="alg1.l6.m1.1.1.3.8.cmml">d</mi><mo id="alg1.l6.m1.1.1.3.1f" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.9" xref="alg1.l6.m1.1.1.3.9.cmml">e</mi></mrow><mo id="alg1.l6.m1.1.1.2" stretchy="false" xref="alg1.l6.m1.1.1.2.cmml">←</mo><mrow id="alg1.l6.m1.1.1.1" xref="alg1.l6.m1.1.1.1.cmml"><mtext id="alg1.l6.m1.1.1.1.3" xref="alg1.l6.m1.1.1.1.3a.cmml">Actor</mtext><mo id="alg1.l6.m1.1.1.1.2" xref="alg1.l6.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l6.m1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l6.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l6.m1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.1.2" xref="alg1.l6.m1.1.1.1.1.1.1.2.cmml">r</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.3" xref="alg1.l6.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1a" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.4" xref="alg1.l6.m1.1.1.1.1.1.1.4.cmml">t</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1b" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.5" xref="alg1.l6.m1.1.1.1.1.1.1.5.cmml">r</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1c" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.6" xref="alg1.l6.m1.1.1.1.1.1.1.6.cmml">i</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1d" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.7" xref="alg1.l6.m1.1.1.1.1.1.1.7.cmml">e</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1e" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.8" xref="alg1.l6.m1.1.1.1.1.1.1.8.cmml">v</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1f" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.9" xref="alg1.l6.m1.1.1.1.1.1.1.9.cmml">e</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1g" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.10" xref="alg1.l6.m1.1.1.1.1.1.1.10.cmml">d</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1h" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.11" mathvariant="normal" xref="alg1.l6.m1.1.1.1.1.1.1.11.cmml">_</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1i" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.12" xref="alg1.l6.m1.1.1.1.1.1.1.12.cmml">s</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1j" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.13" xref="alg1.l6.m1.1.1.1.1.1.1.13.cmml">n</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1k" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.14" xref="alg1.l6.m1.1.1.1.1.1.1.14.cmml">i</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1l" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.15" xref="alg1.l6.m1.1.1.1.1.1.1.15.cmml">p</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1m" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.16" xref="alg1.l6.m1.1.1.1.1.1.1.16.cmml">s</mi></mrow><mo id="alg1.l6.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1"><ci id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2">←</ci><apply id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3"><times id="alg1.l6.m1.1.1.3.1.cmml" xref="alg1.l6.m1.1.1.3.1"></times><ci id="alg1.l6.m1.1.1.3.2.cmml" xref="alg1.l6.m1.1.1.3.2">𝑔</ci><ci id="alg1.l6.m1.1.1.3.3.cmml" xref="alg1.l6.m1.1.1.3.3">𝑒</ci><ci id="alg1.l6.m1.1.1.3.4.cmml" xref="alg1.l6.m1.1.1.3.4">𝑛</ci><ci id="alg1.l6.m1.1.1.3.5.cmml" xref="alg1.l6.m1.1.1.3.5">_</ci><ci id="alg1.l6.m1.1.1.3.6.cmml" xref="alg1.l6.m1.1.1.3.6">𝑐</ci><ci id="alg1.l6.m1.1.1.3.7.cmml" xref="alg1.l6.m1.1.1.3.7">𝑜</ci><ci id="alg1.l6.m1.1.1.3.8.cmml" xref="alg1.l6.m1.1.1.3.8">𝑑</ci><ci id="alg1.l6.m1.1.1.3.9.cmml" xref="alg1.l6.m1.1.1.3.9">𝑒</ci></apply><apply id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1"><times id="alg1.l6.m1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.2"></times><ci id="alg1.l6.m1.1.1.1.3a.cmml" xref="alg1.l6.m1.1.1.1.3"><mtext id="alg1.l6.m1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.3">Actor</mtext></ci><apply id="alg1.l6.m1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1"><times id="alg1.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.2">𝑟</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.4">𝑡</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.5">𝑟</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.6">𝑖</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.7">𝑒</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.8">𝑣</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.9">𝑒</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.10">𝑑</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.11.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.11">_</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.12.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.12">𝑠</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.13.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.13">𝑛</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.14.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.14">𝑖</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.15.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.15">𝑝</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.16.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.16">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">gen\_code\leftarrow\text{Actor}(retrieved\_snips)</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_g italic_e italic_n _ italic_c italic_o italic_d italic_e ← Actor ( italic_r italic_e italic_t italic_r italic_i italic_e italic_v italic_e italic_d _ italic_s italic_n italic_i italic_p italic_s )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <math alttext="em,es\leftarrow\text{Evaluator}(gen\_code)" class="ltx_Math" display="inline" id="alg1.l7.m1.3"><semantics id="alg1.l7.m1.3a"><mrow id="alg1.l7.m1.3.3" xref="alg1.l7.m1.3.3.cmml"><mrow id="alg1.l7.m1.2.2.2.2" xref="alg1.l7.m1.2.2.2.3.cmml"><mrow id="alg1.l7.m1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.cmml"><mi id="alg1.l7.m1.1.1.1.1.1.2" xref="alg1.l7.m1.1.1.1.1.1.2.cmml">e</mi><mo id="alg1.l7.m1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.3" xref="alg1.l7.m1.1.1.1.1.1.3.cmml">m</mi></mrow><mo id="alg1.l7.m1.2.2.2.2.3" xref="alg1.l7.m1.2.2.2.3.cmml">,</mo><mrow id="alg1.l7.m1.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.cmml"><mi id="alg1.l7.m1.2.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.2.cmml">e</mi><mo id="alg1.l7.m1.2.2.2.2.2.1" xref="alg1.l7.m1.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l7.m1.2.2.2.2.2.3" xref="alg1.l7.m1.2.2.2.2.2.3.cmml">s</mi></mrow></mrow><mo id="alg1.l7.m1.3.3.4" stretchy="false" xref="alg1.l7.m1.3.3.4.cmml">←</mo><mrow id="alg1.l7.m1.3.3.3" xref="alg1.l7.m1.3.3.3.cmml"><mtext id="alg1.l7.m1.3.3.3.3" xref="alg1.l7.m1.3.3.3.3a.cmml">Evaluator</mtext><mo id="alg1.l7.m1.3.3.3.2" xref="alg1.l7.m1.3.3.3.2.cmml">⁢</mo><mrow id="alg1.l7.m1.3.3.3.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.cmml"><mo id="alg1.l7.m1.3.3.3.1.1.2" stretchy="false" xref="alg1.l7.m1.3.3.3.1.1.1.cmml">(</mo><mrow id="alg1.l7.m1.3.3.3.1.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.cmml"><mi id="alg1.l7.m1.3.3.3.1.1.1.2" xref="alg1.l7.m1.3.3.3.1.1.1.2.cmml">g</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.3" xref="alg1.l7.m1.3.3.3.1.1.1.3.cmml">e</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1a" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.4" xref="alg1.l7.m1.3.3.3.1.1.1.4.cmml">n</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1b" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.5" mathvariant="normal" xref="alg1.l7.m1.3.3.3.1.1.1.5.cmml">_</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1c" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.6" xref="alg1.l7.m1.3.3.3.1.1.1.6.cmml">c</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1d" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.7" xref="alg1.l7.m1.3.3.3.1.1.1.7.cmml">o</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1e" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.8" xref="alg1.l7.m1.3.3.3.1.1.1.8.cmml">d</mi><mo id="alg1.l7.m1.3.3.3.1.1.1.1f" xref="alg1.l7.m1.3.3.3.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.3.3.3.1.1.1.9" xref="alg1.l7.m1.3.3.3.1.1.1.9.cmml">e</mi></mrow><mo id="alg1.l7.m1.3.3.3.1.1.3" stretchy="false" xref="alg1.l7.m1.3.3.3.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.3b"><apply id="alg1.l7.m1.3.3.cmml" xref="alg1.l7.m1.3.3"><ci id="alg1.l7.m1.3.3.4.cmml" xref="alg1.l7.m1.3.3.4">←</ci><list id="alg1.l7.m1.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2"><apply id="alg1.l7.m1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1"><times id="alg1.l7.m1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1"></times><ci id="alg1.l7.m1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.2">𝑒</ci><ci id="alg1.l7.m1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.3">𝑚</ci></apply><apply id="alg1.l7.m1.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2"><times id="alg1.l7.m1.2.2.2.2.2.1.cmml" xref="alg1.l7.m1.2.2.2.2.2.1"></times><ci id="alg1.l7.m1.2.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2.2">𝑒</ci><ci id="alg1.l7.m1.2.2.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2.2.3">𝑠</ci></apply></list><apply id="alg1.l7.m1.3.3.3.cmml" xref="alg1.l7.m1.3.3.3"><times id="alg1.l7.m1.3.3.3.2.cmml" xref="alg1.l7.m1.3.3.3.2"></times><ci id="alg1.l7.m1.3.3.3.3a.cmml" xref="alg1.l7.m1.3.3.3.3"><mtext id="alg1.l7.m1.3.3.3.3.cmml" xref="alg1.l7.m1.3.3.3.3">Evaluator</mtext></ci><apply id="alg1.l7.m1.3.3.3.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.1.1"><times id="alg1.l7.m1.3.3.3.1.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.1"></times><ci id="alg1.l7.m1.3.3.3.1.1.1.2.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.2">𝑔</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.3.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.3">𝑒</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.4.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.4">𝑛</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.5.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.5">_</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.6.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.6">𝑐</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.7.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.7">𝑜</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.8.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.8">𝑑</ci><ci id="alg1.l7.m1.3.3.3.1.1.1.9.cmml" xref="alg1.l7.m1.3.3.3.1.1.1.9">𝑒</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.3c">em,es\leftarrow\text{Evaluator}(gen\_code)</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.3d">italic_e italic_m , italic_e italic_s ← Evaluator ( italic_g italic_e italic_n _ italic_c italic_o italic_d italic_e )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l8.1">if</span> <math alttext="em==1.0" class="ltx_math_unparsed" display="inline" id="alg1.l8.m1.1"><semantics id="alg1.l8.m1.1a"><mrow id="alg1.l8.m1.1b"><mi id="alg1.l8.m1.1.1">e</mi><mi id="alg1.l8.m1.1.2">m</mi><mo id="alg1.l8.m1.1.3" rspace="0em">=</mo><mo id="alg1.l8.m1.1.4" lspace="0em">=</mo><mn id="alg1.l8.m1.1.5">1.0</mn></mrow><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">em==1.0</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.1d">italic_e italic_m = = 1.0</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l8.2">then</span>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>              <span class="ltx_text ltx_font_bold" id="alg1.l9.2">break</span>
<span class="ltx_text" id="alg1.l9.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l9.1.m1.1"><semantics id="alg1.l9.1.m1.1a"><mo id="alg1.l9.1.m1.1.1" xref="alg1.l9.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="alg1.l9.1.m1.1b"><ci id="alg1.l9.1.m1.1.1.cmml" xref="alg1.l9.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.1.m1.1d">▷</annotation></semantics></math> Correct result, stop iteration
         </span>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l10.1">if</span> <math alttext="es-best\_es&lt;0.01" class="ltx_Math" display="inline" id="alg1.l10.m1.1"><semantics id="alg1.l10.m1.1a"><mrow id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml"><mrow id="alg1.l10.m1.1.1.2" xref="alg1.l10.m1.1.1.2.cmml"><mrow id="alg1.l10.m1.1.1.2.2" xref="alg1.l10.m1.1.1.2.2.cmml"><mi id="alg1.l10.m1.1.1.2.2.2" xref="alg1.l10.m1.1.1.2.2.2.cmml">e</mi><mo id="alg1.l10.m1.1.1.2.2.1" xref="alg1.l10.m1.1.1.2.2.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.2.3" xref="alg1.l10.m1.1.1.2.2.3.cmml">s</mi></mrow><mo id="alg1.l10.m1.1.1.2.1" xref="alg1.l10.m1.1.1.2.1.cmml">−</mo><mrow id="alg1.l10.m1.1.1.2.3" xref="alg1.l10.m1.1.1.2.3.cmml"><mi id="alg1.l10.m1.1.1.2.3.2" xref="alg1.l10.m1.1.1.2.3.2.cmml">b</mi><mo id="alg1.l10.m1.1.1.2.3.1" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.3" xref="alg1.l10.m1.1.1.2.3.3.cmml">e</mi><mo id="alg1.l10.m1.1.1.2.3.1a" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.4" xref="alg1.l10.m1.1.1.2.3.4.cmml">s</mi><mo id="alg1.l10.m1.1.1.2.3.1b" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.5" xref="alg1.l10.m1.1.1.2.3.5.cmml">t</mi><mo id="alg1.l10.m1.1.1.2.3.1c" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.6" mathvariant="normal" xref="alg1.l10.m1.1.1.2.3.6.cmml">_</mi><mo id="alg1.l10.m1.1.1.2.3.1d" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.7" xref="alg1.l10.m1.1.1.2.3.7.cmml">e</mi><mo id="alg1.l10.m1.1.1.2.3.1e" xref="alg1.l10.m1.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.2.3.8" xref="alg1.l10.m1.1.1.2.3.8.cmml">s</mi></mrow></mrow><mo id="alg1.l10.m1.1.1.1" xref="alg1.l10.m1.1.1.1.cmml">&lt;</mo><mn id="alg1.l10.m1.1.1.3" xref="alg1.l10.m1.1.1.3.cmml">0.01</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b"><apply id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1"><lt id="alg1.l10.m1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1"></lt><apply id="alg1.l10.m1.1.1.2.cmml" xref="alg1.l10.m1.1.1.2"><minus id="alg1.l10.m1.1.1.2.1.cmml" xref="alg1.l10.m1.1.1.2.1"></minus><apply id="alg1.l10.m1.1.1.2.2.cmml" xref="alg1.l10.m1.1.1.2.2"><times id="alg1.l10.m1.1.1.2.2.1.cmml" xref="alg1.l10.m1.1.1.2.2.1"></times><ci id="alg1.l10.m1.1.1.2.2.2.cmml" xref="alg1.l10.m1.1.1.2.2.2">𝑒</ci><ci id="alg1.l10.m1.1.1.2.2.3.cmml" xref="alg1.l10.m1.1.1.2.2.3">𝑠</ci></apply><apply id="alg1.l10.m1.1.1.2.3.cmml" xref="alg1.l10.m1.1.1.2.3"><times id="alg1.l10.m1.1.1.2.3.1.cmml" xref="alg1.l10.m1.1.1.2.3.1"></times><ci id="alg1.l10.m1.1.1.2.3.2.cmml" xref="alg1.l10.m1.1.1.2.3.2">𝑏</ci><ci id="alg1.l10.m1.1.1.2.3.3.cmml" xref="alg1.l10.m1.1.1.2.3.3">𝑒</ci><ci id="alg1.l10.m1.1.1.2.3.4.cmml" xref="alg1.l10.m1.1.1.2.3.4">𝑠</ci><ci id="alg1.l10.m1.1.1.2.3.5.cmml" xref="alg1.l10.m1.1.1.2.3.5">𝑡</ci><ci id="alg1.l10.m1.1.1.2.3.6.cmml" xref="alg1.l10.m1.1.1.2.3.6">_</ci><ci id="alg1.l10.m1.1.1.2.3.7.cmml" xref="alg1.l10.m1.1.1.2.3.7">𝑒</ci><ci id="alg1.l10.m1.1.1.2.3.8.cmml" xref="alg1.l10.m1.1.1.2.3.8">𝑠</ci></apply></apply><cn id="alg1.l10.m1.1.1.3.cmml" type="float" xref="alg1.l10.m1.1.1.3">0.01</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.1c">es-best\_es&lt;0.01</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.1d">italic_e italic_s - italic_b italic_e italic_s italic_t _ italic_e italic_s &lt; 0.01</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l10.2">then</span>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>              <math alttext="no\_imp\_cnt\leftarrow no\_imp\_cnt+1" class="ltx_Math" display="inline" id="alg1.l11.m1.1"><semantics id="alg1.l11.m1.1a"><mrow id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml"><mrow id="alg1.l11.m1.1.1.2" xref="alg1.l11.m1.1.1.2.cmml"><mi id="alg1.l11.m1.1.1.2.2" xref="alg1.l11.m1.1.1.2.2.cmml">n</mi><mo id="alg1.l11.m1.1.1.2.1" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.3" xref="alg1.l11.m1.1.1.2.3.cmml">o</mi><mo id="alg1.l11.m1.1.1.2.1a" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.4" mathvariant="normal" xref="alg1.l11.m1.1.1.2.4.cmml">_</mi><mo id="alg1.l11.m1.1.1.2.1b" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.5" xref="alg1.l11.m1.1.1.2.5.cmml">i</mi><mo id="alg1.l11.m1.1.1.2.1c" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.6" xref="alg1.l11.m1.1.1.2.6.cmml">m</mi><mo id="alg1.l11.m1.1.1.2.1d" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.7" xref="alg1.l11.m1.1.1.2.7.cmml">p</mi><mo id="alg1.l11.m1.1.1.2.1e" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.8" mathvariant="normal" xref="alg1.l11.m1.1.1.2.8.cmml">_</mi><mo id="alg1.l11.m1.1.1.2.1f" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.9" xref="alg1.l11.m1.1.1.2.9.cmml">c</mi><mo id="alg1.l11.m1.1.1.2.1g" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.10" xref="alg1.l11.m1.1.1.2.10.cmml">n</mi><mo id="alg1.l11.m1.1.1.2.1h" xref="alg1.l11.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.2.11" xref="alg1.l11.m1.1.1.2.11.cmml">t</mi></mrow><mo id="alg1.l11.m1.1.1.1" stretchy="false" xref="alg1.l11.m1.1.1.1.cmml">←</mo><mrow id="alg1.l11.m1.1.1.3" xref="alg1.l11.m1.1.1.3.cmml"><mrow id="alg1.l11.m1.1.1.3.2" xref="alg1.l11.m1.1.1.3.2.cmml"><mi id="alg1.l11.m1.1.1.3.2.2" xref="alg1.l11.m1.1.1.3.2.2.cmml">n</mi><mo id="alg1.l11.m1.1.1.3.2.1" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.3" xref="alg1.l11.m1.1.1.3.2.3.cmml">o</mi><mo id="alg1.l11.m1.1.1.3.2.1a" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.4" mathvariant="normal" xref="alg1.l11.m1.1.1.3.2.4.cmml">_</mi><mo id="alg1.l11.m1.1.1.3.2.1b" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.5" xref="alg1.l11.m1.1.1.3.2.5.cmml">i</mi><mo id="alg1.l11.m1.1.1.3.2.1c" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.6" xref="alg1.l11.m1.1.1.3.2.6.cmml">m</mi><mo id="alg1.l11.m1.1.1.3.2.1d" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.7" xref="alg1.l11.m1.1.1.3.2.7.cmml">p</mi><mo id="alg1.l11.m1.1.1.3.2.1e" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.8" mathvariant="normal" xref="alg1.l11.m1.1.1.3.2.8.cmml">_</mi><mo id="alg1.l11.m1.1.1.3.2.1f" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.9" xref="alg1.l11.m1.1.1.3.2.9.cmml">c</mi><mo id="alg1.l11.m1.1.1.3.2.1g" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.10" xref="alg1.l11.m1.1.1.3.2.10.cmml">n</mi><mo id="alg1.l11.m1.1.1.3.2.1h" xref="alg1.l11.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l11.m1.1.1.3.2.11" xref="alg1.l11.m1.1.1.3.2.11.cmml">t</mi></mrow><mo id="alg1.l11.m1.1.1.3.1" xref="alg1.l11.m1.1.1.3.1.cmml">+</mo><mn id="alg1.l11.m1.1.1.3.3" xref="alg1.l11.m1.1.1.3.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><apply id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1"><ci id="alg1.l11.m1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1">←</ci><apply id="alg1.l11.m1.1.1.2.cmml" xref="alg1.l11.m1.1.1.2"><times id="alg1.l11.m1.1.1.2.1.cmml" xref="alg1.l11.m1.1.1.2.1"></times><ci id="alg1.l11.m1.1.1.2.2.cmml" xref="alg1.l11.m1.1.1.2.2">𝑛</ci><ci id="alg1.l11.m1.1.1.2.3.cmml" xref="alg1.l11.m1.1.1.2.3">𝑜</ci><ci id="alg1.l11.m1.1.1.2.4.cmml" xref="alg1.l11.m1.1.1.2.4">_</ci><ci id="alg1.l11.m1.1.1.2.5.cmml" xref="alg1.l11.m1.1.1.2.5">𝑖</ci><ci id="alg1.l11.m1.1.1.2.6.cmml" xref="alg1.l11.m1.1.1.2.6">𝑚</ci><ci id="alg1.l11.m1.1.1.2.7.cmml" xref="alg1.l11.m1.1.1.2.7">𝑝</ci><ci id="alg1.l11.m1.1.1.2.8.cmml" xref="alg1.l11.m1.1.1.2.8">_</ci><ci id="alg1.l11.m1.1.1.2.9.cmml" xref="alg1.l11.m1.1.1.2.9">𝑐</ci><ci id="alg1.l11.m1.1.1.2.10.cmml" xref="alg1.l11.m1.1.1.2.10">𝑛</ci><ci id="alg1.l11.m1.1.1.2.11.cmml" xref="alg1.l11.m1.1.1.2.11">𝑡</ci></apply><apply id="alg1.l11.m1.1.1.3.cmml" xref="alg1.l11.m1.1.1.3"><plus id="alg1.l11.m1.1.1.3.1.cmml" xref="alg1.l11.m1.1.1.3.1"></plus><apply id="alg1.l11.m1.1.1.3.2.cmml" xref="alg1.l11.m1.1.1.3.2"><times id="alg1.l11.m1.1.1.3.2.1.cmml" xref="alg1.l11.m1.1.1.3.2.1"></times><ci id="alg1.l11.m1.1.1.3.2.2.cmml" xref="alg1.l11.m1.1.1.3.2.2">𝑛</ci><ci id="alg1.l11.m1.1.1.3.2.3.cmml" xref="alg1.l11.m1.1.1.3.2.3">𝑜</ci><ci id="alg1.l11.m1.1.1.3.2.4.cmml" xref="alg1.l11.m1.1.1.3.2.4">_</ci><ci id="alg1.l11.m1.1.1.3.2.5.cmml" xref="alg1.l11.m1.1.1.3.2.5">𝑖</ci><ci id="alg1.l11.m1.1.1.3.2.6.cmml" xref="alg1.l11.m1.1.1.3.2.6">𝑚</ci><ci id="alg1.l11.m1.1.1.3.2.7.cmml" xref="alg1.l11.m1.1.1.3.2.7">𝑝</ci><ci id="alg1.l11.m1.1.1.3.2.8.cmml" xref="alg1.l11.m1.1.1.3.2.8">_</ci><ci id="alg1.l11.m1.1.1.3.2.9.cmml" xref="alg1.l11.m1.1.1.3.2.9">𝑐</ci><ci id="alg1.l11.m1.1.1.3.2.10.cmml" xref="alg1.l11.m1.1.1.3.2.10">𝑛</ci><ci id="alg1.l11.m1.1.1.3.2.11.cmml" xref="alg1.l11.m1.1.1.3.2.11">𝑡</ci></apply><cn id="alg1.l11.m1.1.1.3.3.cmml" type="integer" xref="alg1.l11.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">no\_imp\_cnt\leftarrow no\_imp\_cnt+1</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.1d">italic_n italic_o _ italic_i italic_m italic_p _ italic_c italic_n italic_t ← italic_n italic_o _ italic_i italic_m italic_p _ italic_c italic_n italic_t + 1</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l12.1">else</span>
</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>              <math alttext="no\_imp\_cnt\leftarrow 0" class="ltx_Math" display="inline" id="alg1.l13.m1.1"><semantics id="alg1.l13.m1.1a"><mrow id="alg1.l13.m1.1.1" xref="alg1.l13.m1.1.1.cmml"><mrow id="alg1.l13.m1.1.1.2" xref="alg1.l13.m1.1.1.2.cmml"><mi id="alg1.l13.m1.1.1.2.2" xref="alg1.l13.m1.1.1.2.2.cmml">n</mi><mo id="alg1.l13.m1.1.1.2.1" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.3" xref="alg1.l13.m1.1.1.2.3.cmml">o</mi><mo id="alg1.l13.m1.1.1.2.1a" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.4" mathvariant="normal" xref="alg1.l13.m1.1.1.2.4.cmml">_</mi><mo id="alg1.l13.m1.1.1.2.1b" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.5" xref="alg1.l13.m1.1.1.2.5.cmml">i</mi><mo id="alg1.l13.m1.1.1.2.1c" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.6" xref="alg1.l13.m1.1.1.2.6.cmml">m</mi><mo id="alg1.l13.m1.1.1.2.1d" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.7" xref="alg1.l13.m1.1.1.2.7.cmml">p</mi><mo id="alg1.l13.m1.1.1.2.1e" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.8" mathvariant="normal" xref="alg1.l13.m1.1.1.2.8.cmml">_</mi><mo id="alg1.l13.m1.1.1.2.1f" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.9" xref="alg1.l13.m1.1.1.2.9.cmml">c</mi><mo id="alg1.l13.m1.1.1.2.1g" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.10" xref="alg1.l13.m1.1.1.2.10.cmml">n</mi><mo id="alg1.l13.m1.1.1.2.1h" xref="alg1.l13.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l13.m1.1.1.2.11" xref="alg1.l13.m1.1.1.2.11.cmml">t</mi></mrow><mo id="alg1.l13.m1.1.1.1" stretchy="false" xref="alg1.l13.m1.1.1.1.cmml">←</mo><mn id="alg1.l13.m1.1.1.3" xref="alg1.l13.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l13.m1.1b"><apply id="alg1.l13.m1.1.1.cmml" xref="alg1.l13.m1.1.1"><ci id="alg1.l13.m1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1">←</ci><apply id="alg1.l13.m1.1.1.2.cmml" xref="alg1.l13.m1.1.1.2"><times id="alg1.l13.m1.1.1.2.1.cmml" xref="alg1.l13.m1.1.1.2.1"></times><ci id="alg1.l13.m1.1.1.2.2.cmml" xref="alg1.l13.m1.1.1.2.2">𝑛</ci><ci id="alg1.l13.m1.1.1.2.3.cmml" xref="alg1.l13.m1.1.1.2.3">𝑜</ci><ci id="alg1.l13.m1.1.1.2.4.cmml" xref="alg1.l13.m1.1.1.2.4">_</ci><ci id="alg1.l13.m1.1.1.2.5.cmml" xref="alg1.l13.m1.1.1.2.5">𝑖</ci><ci id="alg1.l13.m1.1.1.2.6.cmml" xref="alg1.l13.m1.1.1.2.6">𝑚</ci><ci id="alg1.l13.m1.1.1.2.7.cmml" xref="alg1.l13.m1.1.1.2.7">𝑝</ci><ci id="alg1.l13.m1.1.1.2.8.cmml" xref="alg1.l13.m1.1.1.2.8">_</ci><ci id="alg1.l13.m1.1.1.2.9.cmml" xref="alg1.l13.m1.1.1.2.9">𝑐</ci><ci id="alg1.l13.m1.1.1.2.10.cmml" xref="alg1.l13.m1.1.1.2.10">𝑛</ci><ci id="alg1.l13.m1.1.1.2.11.cmml" xref="alg1.l13.m1.1.1.2.11">𝑡</ci></apply><cn id="alg1.l13.m1.1.1.3.cmml" type="integer" xref="alg1.l13.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l13.m1.1c">no\_imp\_cnt\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.l13.m1.1d">italic_n italic_o _ italic_i italic_m italic_p _ italic_c italic_n italic_t ← 0</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>              <math alttext="best\_em\leftarrow em" class="ltx_Math" display="inline" id="alg1.l14.m1.1"><semantics id="alg1.l14.m1.1a"><mrow id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1.cmml"><mrow id="alg1.l14.m1.1.1.2" xref="alg1.l14.m1.1.1.2.cmml"><mi id="alg1.l14.m1.1.1.2.2" xref="alg1.l14.m1.1.1.2.2.cmml">b</mi><mo id="alg1.l14.m1.1.1.2.1" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.3" xref="alg1.l14.m1.1.1.2.3.cmml">e</mi><mo id="alg1.l14.m1.1.1.2.1a" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.4" xref="alg1.l14.m1.1.1.2.4.cmml">s</mi><mo id="alg1.l14.m1.1.1.2.1b" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.5" xref="alg1.l14.m1.1.1.2.5.cmml">t</mi><mo id="alg1.l14.m1.1.1.2.1c" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.6" mathvariant="normal" xref="alg1.l14.m1.1.1.2.6.cmml">_</mi><mo id="alg1.l14.m1.1.1.2.1d" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.7" xref="alg1.l14.m1.1.1.2.7.cmml">e</mi><mo id="alg1.l14.m1.1.1.2.1e" xref="alg1.l14.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.2.8" xref="alg1.l14.m1.1.1.2.8.cmml">m</mi></mrow><mo id="alg1.l14.m1.1.1.1" stretchy="false" xref="alg1.l14.m1.1.1.1.cmml">←</mo><mrow id="alg1.l14.m1.1.1.3" xref="alg1.l14.m1.1.1.3.cmml"><mi id="alg1.l14.m1.1.1.3.2" xref="alg1.l14.m1.1.1.3.2.cmml">e</mi><mo id="alg1.l14.m1.1.1.3.1" xref="alg1.l14.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m1.1.1.3.3" xref="alg1.l14.m1.1.1.3.3.cmml">m</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m1.1b"><apply id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1"><ci id="alg1.l14.m1.1.1.1.cmml" xref="alg1.l14.m1.1.1.1">←</ci><apply id="alg1.l14.m1.1.1.2.cmml" xref="alg1.l14.m1.1.1.2"><times id="alg1.l14.m1.1.1.2.1.cmml" xref="alg1.l14.m1.1.1.2.1"></times><ci id="alg1.l14.m1.1.1.2.2.cmml" xref="alg1.l14.m1.1.1.2.2">𝑏</ci><ci id="alg1.l14.m1.1.1.2.3.cmml" xref="alg1.l14.m1.1.1.2.3">𝑒</ci><ci id="alg1.l14.m1.1.1.2.4.cmml" xref="alg1.l14.m1.1.1.2.4">𝑠</ci><ci id="alg1.l14.m1.1.1.2.5.cmml" xref="alg1.l14.m1.1.1.2.5">𝑡</ci><ci id="alg1.l14.m1.1.1.2.6.cmml" xref="alg1.l14.m1.1.1.2.6">_</ci><ci id="alg1.l14.m1.1.1.2.7.cmml" xref="alg1.l14.m1.1.1.2.7">𝑒</ci><ci id="alg1.l14.m1.1.1.2.8.cmml" xref="alg1.l14.m1.1.1.2.8">𝑚</ci></apply><apply id="alg1.l14.m1.1.1.3.cmml" xref="alg1.l14.m1.1.1.3"><times id="alg1.l14.m1.1.1.3.1.cmml" xref="alg1.l14.m1.1.1.3.1"></times><ci id="alg1.l14.m1.1.1.3.2.cmml" xref="alg1.l14.m1.1.1.3.2">𝑒</ci><ci id="alg1.l14.m1.1.1.3.3.cmml" xref="alg1.l14.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m1.1c">best\_em\leftarrow em</annotation><annotation encoding="application/x-llamapun" id="alg1.l14.m1.1d">italic_b italic_e italic_s italic_t _ italic_e italic_m ← italic_e italic_m</annotation></semantics></math>, <math alttext="best\_es\leftarrow es" class="ltx_Math" display="inline" id="alg1.l14.m2.1"><semantics id="alg1.l14.m2.1a"><mrow id="alg1.l14.m2.1.1" xref="alg1.l14.m2.1.1.cmml"><mrow id="alg1.l14.m2.1.1.2" xref="alg1.l14.m2.1.1.2.cmml"><mi id="alg1.l14.m2.1.1.2.2" xref="alg1.l14.m2.1.1.2.2.cmml">b</mi><mo id="alg1.l14.m2.1.1.2.1" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.3" xref="alg1.l14.m2.1.1.2.3.cmml">e</mi><mo id="alg1.l14.m2.1.1.2.1a" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.4" xref="alg1.l14.m2.1.1.2.4.cmml">s</mi><mo id="alg1.l14.m2.1.1.2.1b" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.5" xref="alg1.l14.m2.1.1.2.5.cmml">t</mi><mo id="alg1.l14.m2.1.1.2.1c" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.6" mathvariant="normal" xref="alg1.l14.m2.1.1.2.6.cmml">_</mi><mo id="alg1.l14.m2.1.1.2.1d" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.7" xref="alg1.l14.m2.1.1.2.7.cmml">e</mi><mo id="alg1.l14.m2.1.1.2.1e" xref="alg1.l14.m2.1.1.2.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.2.8" xref="alg1.l14.m2.1.1.2.8.cmml">s</mi></mrow><mo id="alg1.l14.m2.1.1.1" stretchy="false" xref="alg1.l14.m2.1.1.1.cmml">←</mo><mrow id="alg1.l14.m2.1.1.3" xref="alg1.l14.m2.1.1.3.cmml"><mi id="alg1.l14.m2.1.1.3.2" xref="alg1.l14.m2.1.1.3.2.cmml">e</mi><mo id="alg1.l14.m2.1.1.3.1" xref="alg1.l14.m2.1.1.3.1.cmml">⁢</mo><mi id="alg1.l14.m2.1.1.3.3" xref="alg1.l14.m2.1.1.3.3.cmml">s</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m2.1b"><apply id="alg1.l14.m2.1.1.cmml" xref="alg1.l14.m2.1.1"><ci id="alg1.l14.m2.1.1.1.cmml" xref="alg1.l14.m2.1.1.1">←</ci><apply id="alg1.l14.m2.1.1.2.cmml" xref="alg1.l14.m2.1.1.2"><times id="alg1.l14.m2.1.1.2.1.cmml" xref="alg1.l14.m2.1.1.2.1"></times><ci id="alg1.l14.m2.1.1.2.2.cmml" xref="alg1.l14.m2.1.1.2.2">𝑏</ci><ci id="alg1.l14.m2.1.1.2.3.cmml" xref="alg1.l14.m2.1.1.2.3">𝑒</ci><ci id="alg1.l14.m2.1.1.2.4.cmml" xref="alg1.l14.m2.1.1.2.4">𝑠</ci><ci id="alg1.l14.m2.1.1.2.5.cmml" xref="alg1.l14.m2.1.1.2.5">𝑡</ci><ci id="alg1.l14.m2.1.1.2.6.cmml" xref="alg1.l14.m2.1.1.2.6">_</ci><ci id="alg1.l14.m2.1.1.2.7.cmml" xref="alg1.l14.m2.1.1.2.7">𝑒</ci><ci id="alg1.l14.m2.1.1.2.8.cmml" xref="alg1.l14.m2.1.1.2.8">𝑠</ci></apply><apply id="alg1.l14.m2.1.1.3.cmml" xref="alg1.l14.m2.1.1.3"><times id="alg1.l14.m2.1.1.3.1.cmml" xref="alg1.l14.m2.1.1.3.1"></times><ci id="alg1.l14.m2.1.1.3.2.cmml" xref="alg1.l14.m2.1.1.3.2">𝑒</ci><ci id="alg1.l14.m2.1.1.3.3.cmml" xref="alg1.l14.m2.1.1.3.3">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m2.1c">best\_es\leftarrow es</annotation><annotation encoding="application/x-llamapun" id="alg1.l14.m2.1d">italic_b italic_e italic_s italic_t _ italic_e italic_s ← italic_e italic_s</annotation></semantics></math>
         
</div>
<div class="ltx_listingline" id="alg1.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l15.1">if</span> <math alttext="no\_imp\_cnt\geq no\_imp\_thres" class="ltx_Math" display="inline" id="alg1.l15.m1.1"><semantics id="alg1.l15.m1.1a"><mrow id="alg1.l15.m1.1.1" xref="alg1.l15.m1.1.1.cmml"><mrow id="alg1.l15.m1.1.1.2" xref="alg1.l15.m1.1.1.2.cmml"><mi id="alg1.l15.m1.1.1.2.2" xref="alg1.l15.m1.1.1.2.2.cmml">n</mi><mo id="alg1.l15.m1.1.1.2.1" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.3" xref="alg1.l15.m1.1.1.2.3.cmml">o</mi><mo id="alg1.l15.m1.1.1.2.1a" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.4" mathvariant="normal" xref="alg1.l15.m1.1.1.2.4.cmml">_</mi><mo id="alg1.l15.m1.1.1.2.1b" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.5" xref="alg1.l15.m1.1.1.2.5.cmml">i</mi><mo id="alg1.l15.m1.1.1.2.1c" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.6" xref="alg1.l15.m1.1.1.2.6.cmml">m</mi><mo id="alg1.l15.m1.1.1.2.1d" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.7" xref="alg1.l15.m1.1.1.2.7.cmml">p</mi><mo id="alg1.l15.m1.1.1.2.1e" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.8" mathvariant="normal" xref="alg1.l15.m1.1.1.2.8.cmml">_</mi><mo id="alg1.l15.m1.1.1.2.1f" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.9" xref="alg1.l15.m1.1.1.2.9.cmml">c</mi><mo id="alg1.l15.m1.1.1.2.1g" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.10" xref="alg1.l15.m1.1.1.2.10.cmml">n</mi><mo id="alg1.l15.m1.1.1.2.1h" xref="alg1.l15.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.2.11" xref="alg1.l15.m1.1.1.2.11.cmml">t</mi></mrow><mo id="alg1.l15.m1.1.1.1" xref="alg1.l15.m1.1.1.1.cmml">≥</mo><mrow id="alg1.l15.m1.1.1.3" xref="alg1.l15.m1.1.1.3.cmml"><mi id="alg1.l15.m1.1.1.3.2" xref="alg1.l15.m1.1.1.3.2.cmml">n</mi><mo id="alg1.l15.m1.1.1.3.1" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.3" xref="alg1.l15.m1.1.1.3.3.cmml">o</mi><mo id="alg1.l15.m1.1.1.3.1a" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.4" mathvariant="normal" xref="alg1.l15.m1.1.1.3.4.cmml">_</mi><mo id="alg1.l15.m1.1.1.3.1b" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.5" xref="alg1.l15.m1.1.1.3.5.cmml">i</mi><mo id="alg1.l15.m1.1.1.3.1c" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.6" xref="alg1.l15.m1.1.1.3.6.cmml">m</mi><mo id="alg1.l15.m1.1.1.3.1d" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.7" xref="alg1.l15.m1.1.1.3.7.cmml">p</mi><mo id="alg1.l15.m1.1.1.3.1e" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.8" mathvariant="normal" xref="alg1.l15.m1.1.1.3.8.cmml">_</mi><mo id="alg1.l15.m1.1.1.3.1f" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.9" xref="alg1.l15.m1.1.1.3.9.cmml">t</mi><mo id="alg1.l15.m1.1.1.3.1g" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.10" xref="alg1.l15.m1.1.1.3.10.cmml">h</mi><mo id="alg1.l15.m1.1.1.3.1h" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.11" xref="alg1.l15.m1.1.1.3.11.cmml">r</mi><mo id="alg1.l15.m1.1.1.3.1i" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.12" xref="alg1.l15.m1.1.1.3.12.cmml">e</mi><mo id="alg1.l15.m1.1.1.3.1j" xref="alg1.l15.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l15.m1.1.1.3.13" xref="alg1.l15.m1.1.1.3.13.cmml">s</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l15.m1.1b"><apply id="alg1.l15.m1.1.1.cmml" xref="alg1.l15.m1.1.1"><geq id="alg1.l15.m1.1.1.1.cmml" xref="alg1.l15.m1.1.1.1"></geq><apply id="alg1.l15.m1.1.1.2.cmml" xref="alg1.l15.m1.1.1.2"><times id="alg1.l15.m1.1.1.2.1.cmml" xref="alg1.l15.m1.1.1.2.1"></times><ci id="alg1.l15.m1.1.1.2.2.cmml" xref="alg1.l15.m1.1.1.2.2">𝑛</ci><ci id="alg1.l15.m1.1.1.2.3.cmml" xref="alg1.l15.m1.1.1.2.3">𝑜</ci><ci id="alg1.l15.m1.1.1.2.4.cmml" xref="alg1.l15.m1.1.1.2.4">_</ci><ci id="alg1.l15.m1.1.1.2.5.cmml" xref="alg1.l15.m1.1.1.2.5">𝑖</ci><ci id="alg1.l15.m1.1.1.2.6.cmml" xref="alg1.l15.m1.1.1.2.6">𝑚</ci><ci id="alg1.l15.m1.1.1.2.7.cmml" xref="alg1.l15.m1.1.1.2.7">𝑝</ci><ci id="alg1.l15.m1.1.1.2.8.cmml" xref="alg1.l15.m1.1.1.2.8">_</ci><ci id="alg1.l15.m1.1.1.2.9.cmml" xref="alg1.l15.m1.1.1.2.9">𝑐</ci><ci id="alg1.l15.m1.1.1.2.10.cmml" xref="alg1.l15.m1.1.1.2.10">𝑛</ci><ci id="alg1.l15.m1.1.1.2.11.cmml" xref="alg1.l15.m1.1.1.2.11">𝑡</ci></apply><apply id="alg1.l15.m1.1.1.3.cmml" xref="alg1.l15.m1.1.1.3"><times id="alg1.l15.m1.1.1.3.1.cmml" xref="alg1.l15.m1.1.1.3.1"></times><ci id="alg1.l15.m1.1.1.3.2.cmml" xref="alg1.l15.m1.1.1.3.2">𝑛</ci><ci id="alg1.l15.m1.1.1.3.3.cmml" xref="alg1.l15.m1.1.1.3.3">𝑜</ci><ci id="alg1.l15.m1.1.1.3.4.cmml" xref="alg1.l15.m1.1.1.3.4">_</ci><ci id="alg1.l15.m1.1.1.3.5.cmml" xref="alg1.l15.m1.1.1.3.5">𝑖</ci><ci id="alg1.l15.m1.1.1.3.6.cmml" xref="alg1.l15.m1.1.1.3.6">𝑚</ci><ci id="alg1.l15.m1.1.1.3.7.cmml" xref="alg1.l15.m1.1.1.3.7">𝑝</ci><ci id="alg1.l15.m1.1.1.3.8.cmml" xref="alg1.l15.m1.1.1.3.8">_</ci><ci id="alg1.l15.m1.1.1.3.9.cmml" xref="alg1.l15.m1.1.1.3.9">𝑡</ci><ci id="alg1.l15.m1.1.1.3.10.cmml" xref="alg1.l15.m1.1.1.3.10">ℎ</ci><ci id="alg1.l15.m1.1.1.3.11.cmml" xref="alg1.l15.m1.1.1.3.11">𝑟</ci><ci id="alg1.l15.m1.1.1.3.12.cmml" xref="alg1.l15.m1.1.1.3.12">𝑒</ci><ci id="alg1.l15.m1.1.1.3.13.cmml" xref="alg1.l15.m1.1.1.3.13">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l15.m1.1c">no\_imp\_cnt\geq no\_imp\_thres</annotation><annotation encoding="application/x-llamapun" id="alg1.l15.m1.1d">italic_n italic_o _ italic_i italic_m italic_p _ italic_c italic_n italic_t ≥ italic_n italic_o _ italic_i italic_m italic_p _ italic_t italic_h italic_r italic_e italic_s</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l15.2">then</span>
</div>
<div class="ltx_listingline" id="alg1.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span>              <span class="ltx_text ltx_font_bold" id="alg1.l16.2">break</span> <span class="ltx_text" id="alg1.l16.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l16.1.m1.1"><semantics id="alg1.l16.1.m1.1a"><mo id="alg1.l16.1.m1.1.1" xref="alg1.l16.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="alg1.l16.1.m1.1b"><ci id="alg1.l16.1.m1.1.1.cmml" xref="alg1.l16.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l16.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l16.1.m1.1d">▷</annotation></semantics></math> Hardly improvement, stop iteration
         </span>
</div>
<div class="ltx_listingline" id="alg1.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span>         <math alttext="feedback\leftarrow\text{Reflector}(gen\_code,em,es)" class="ltx_Math" display="inline" id="alg1.l17.m1.3"><semantics id="alg1.l17.m1.3a"><mrow id="alg1.l17.m1.3.3" xref="alg1.l17.m1.3.3.cmml"><mrow id="alg1.l17.m1.3.3.5" xref="alg1.l17.m1.3.3.5.cmml"><mi id="alg1.l17.m1.3.3.5.2" xref="alg1.l17.m1.3.3.5.2.cmml">f</mi><mo id="alg1.l17.m1.3.3.5.1" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.3" xref="alg1.l17.m1.3.3.5.3.cmml">e</mi><mo id="alg1.l17.m1.3.3.5.1a" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.4" xref="alg1.l17.m1.3.3.5.4.cmml">e</mi><mo id="alg1.l17.m1.3.3.5.1b" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.5" xref="alg1.l17.m1.3.3.5.5.cmml">d</mi><mo id="alg1.l17.m1.3.3.5.1c" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.6" xref="alg1.l17.m1.3.3.5.6.cmml">b</mi><mo id="alg1.l17.m1.3.3.5.1d" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.7" xref="alg1.l17.m1.3.3.5.7.cmml">a</mi><mo id="alg1.l17.m1.3.3.5.1e" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.8" xref="alg1.l17.m1.3.3.5.8.cmml">c</mi><mo id="alg1.l17.m1.3.3.5.1f" xref="alg1.l17.m1.3.3.5.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.5.9" xref="alg1.l17.m1.3.3.5.9.cmml">k</mi></mrow><mo id="alg1.l17.m1.3.3.4" stretchy="false" xref="alg1.l17.m1.3.3.4.cmml">←</mo><mrow id="alg1.l17.m1.3.3.3" xref="alg1.l17.m1.3.3.3.cmml"><mtext id="alg1.l17.m1.3.3.3.5" xref="alg1.l17.m1.3.3.3.5a.cmml">Reflector</mtext><mo id="alg1.l17.m1.3.3.3.4" xref="alg1.l17.m1.3.3.3.4.cmml">⁢</mo><mrow id="alg1.l17.m1.3.3.3.3.3" xref="alg1.l17.m1.3.3.3.3.4.cmml"><mo id="alg1.l17.m1.3.3.3.3.3.4" stretchy="false" xref="alg1.l17.m1.3.3.3.3.4.cmml">(</mo><mrow id="alg1.l17.m1.1.1.1.1.1.1" xref="alg1.l17.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l17.m1.1.1.1.1.1.1.2" xref="alg1.l17.m1.1.1.1.1.1.1.2.cmml">g</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.3" xref="alg1.l17.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1a" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.4" xref="alg1.l17.m1.1.1.1.1.1.1.4.cmml">n</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1b" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.5" mathvariant="normal" xref="alg1.l17.m1.1.1.1.1.1.1.5.cmml">_</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1c" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.6" xref="alg1.l17.m1.1.1.1.1.1.1.6.cmml">c</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1d" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.7" xref="alg1.l17.m1.1.1.1.1.1.1.7.cmml">o</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1e" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.8" xref="alg1.l17.m1.1.1.1.1.1.1.8.cmml">d</mi><mo id="alg1.l17.m1.1.1.1.1.1.1.1f" xref="alg1.l17.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l17.m1.1.1.1.1.1.1.9" xref="alg1.l17.m1.1.1.1.1.1.1.9.cmml">e</mi></mrow><mo id="alg1.l17.m1.3.3.3.3.3.5" xref="alg1.l17.m1.3.3.3.3.4.cmml">,</mo><mrow id="alg1.l17.m1.2.2.2.2.2.2" xref="alg1.l17.m1.2.2.2.2.2.2.cmml"><mi id="alg1.l17.m1.2.2.2.2.2.2.2" xref="alg1.l17.m1.2.2.2.2.2.2.2.cmml">e</mi><mo id="alg1.l17.m1.2.2.2.2.2.2.1" xref="alg1.l17.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l17.m1.2.2.2.2.2.2.3" xref="alg1.l17.m1.2.2.2.2.2.2.3.cmml">m</mi></mrow><mo id="alg1.l17.m1.3.3.3.3.3.6" xref="alg1.l17.m1.3.3.3.3.4.cmml">,</mo><mrow id="alg1.l17.m1.3.3.3.3.3.3" xref="alg1.l17.m1.3.3.3.3.3.3.cmml"><mi id="alg1.l17.m1.3.3.3.3.3.3.2" xref="alg1.l17.m1.3.3.3.3.3.3.2.cmml">e</mi><mo id="alg1.l17.m1.3.3.3.3.3.3.1" xref="alg1.l17.m1.3.3.3.3.3.3.1.cmml">⁢</mo><mi id="alg1.l17.m1.3.3.3.3.3.3.3" xref="alg1.l17.m1.3.3.3.3.3.3.3.cmml">s</mi></mrow><mo id="alg1.l17.m1.3.3.3.3.3.7" stretchy="false" xref="alg1.l17.m1.3.3.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l17.m1.3b"><apply id="alg1.l17.m1.3.3.cmml" xref="alg1.l17.m1.3.3"><ci id="alg1.l17.m1.3.3.4.cmml" xref="alg1.l17.m1.3.3.4">←</ci><apply id="alg1.l17.m1.3.3.5.cmml" xref="alg1.l17.m1.3.3.5"><times id="alg1.l17.m1.3.3.5.1.cmml" xref="alg1.l17.m1.3.3.5.1"></times><ci id="alg1.l17.m1.3.3.5.2.cmml" xref="alg1.l17.m1.3.3.5.2">𝑓</ci><ci id="alg1.l17.m1.3.3.5.3.cmml" xref="alg1.l17.m1.3.3.5.3">𝑒</ci><ci id="alg1.l17.m1.3.3.5.4.cmml" xref="alg1.l17.m1.3.3.5.4">𝑒</ci><ci id="alg1.l17.m1.3.3.5.5.cmml" xref="alg1.l17.m1.3.3.5.5">𝑑</ci><ci id="alg1.l17.m1.3.3.5.6.cmml" xref="alg1.l17.m1.3.3.5.6">𝑏</ci><ci id="alg1.l17.m1.3.3.5.7.cmml" xref="alg1.l17.m1.3.3.5.7">𝑎</ci><ci id="alg1.l17.m1.3.3.5.8.cmml" xref="alg1.l17.m1.3.3.5.8">𝑐</ci><ci id="alg1.l17.m1.3.3.5.9.cmml" xref="alg1.l17.m1.3.3.5.9">𝑘</ci></apply><apply id="alg1.l17.m1.3.3.3.cmml" xref="alg1.l17.m1.3.3.3"><times id="alg1.l17.m1.3.3.3.4.cmml" xref="alg1.l17.m1.3.3.3.4"></times><ci id="alg1.l17.m1.3.3.3.5a.cmml" xref="alg1.l17.m1.3.3.3.5"><mtext id="alg1.l17.m1.3.3.3.5.cmml" xref="alg1.l17.m1.3.3.3.5">Reflector</mtext></ci><vector id="alg1.l17.m1.3.3.3.3.4.cmml" xref="alg1.l17.m1.3.3.3.3.3"><apply id="alg1.l17.m1.1.1.1.1.1.1.cmml" xref="alg1.l17.m1.1.1.1.1.1.1"><times id="alg1.l17.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l17.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.2">𝑔</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.5">_</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.6">𝑐</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.7">𝑜</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.8">𝑑</ci><ci id="alg1.l17.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l17.m1.1.1.1.1.1.1.9">𝑒</ci></apply><apply id="alg1.l17.m1.2.2.2.2.2.2.cmml" xref="alg1.l17.m1.2.2.2.2.2.2"><times id="alg1.l17.m1.2.2.2.2.2.2.1.cmml" xref="alg1.l17.m1.2.2.2.2.2.2.1"></times><ci id="alg1.l17.m1.2.2.2.2.2.2.2.cmml" xref="alg1.l17.m1.2.2.2.2.2.2.2">𝑒</ci><ci id="alg1.l17.m1.2.2.2.2.2.2.3.cmml" xref="alg1.l17.m1.2.2.2.2.2.2.3">𝑚</ci></apply><apply id="alg1.l17.m1.3.3.3.3.3.3.cmml" xref="alg1.l17.m1.3.3.3.3.3.3"><times id="alg1.l17.m1.3.3.3.3.3.3.1.cmml" xref="alg1.l17.m1.3.3.3.3.3.3.1"></times><ci id="alg1.l17.m1.3.3.3.3.3.3.2.cmml" xref="alg1.l17.m1.3.3.3.3.3.3.2">𝑒</ci><ci id="alg1.l17.m1.3.3.3.3.3.3.3.cmml" xref="alg1.l17.m1.3.3.3.3.3.3.3">𝑠</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l17.m1.3c">feedback\leftarrow\text{Reflector}(gen\_code,em,es)</annotation><annotation encoding="application/x-llamapun" id="alg1.l17.m1.3d">italic_f italic_e italic_e italic_d italic_b italic_a italic_c italic_k ← Reflector ( italic_g italic_e italic_n _ italic_c italic_o italic_d italic_e , italic_e italic_m , italic_e italic_s )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l18">
<span class="ltx_tag ltx_tag_listingline">18:</span>         <math alttext="cur\_input\leftarrow\text{UpdIptFdbk}(init\_input,fdbk)" class="ltx_Math" display="inline" id="alg1.l18.m1.2"><semantics id="alg1.l18.m1.2a"><mrow id="alg1.l18.m1.2.2" xref="alg1.l18.m1.2.2.cmml"><mrow id="alg1.l18.m1.2.2.4" xref="alg1.l18.m1.2.2.4.cmml"><mi id="alg1.l18.m1.2.2.4.2" xref="alg1.l18.m1.2.2.4.2.cmml">c</mi><mo id="alg1.l18.m1.2.2.4.1" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.3" xref="alg1.l18.m1.2.2.4.3.cmml">u</mi><mo id="alg1.l18.m1.2.2.4.1a" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.4" xref="alg1.l18.m1.2.2.4.4.cmml">r</mi><mo id="alg1.l18.m1.2.2.4.1b" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.5" mathvariant="normal" xref="alg1.l18.m1.2.2.4.5.cmml">_</mi><mo id="alg1.l18.m1.2.2.4.1c" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.6" xref="alg1.l18.m1.2.2.4.6.cmml">i</mi><mo id="alg1.l18.m1.2.2.4.1d" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.7" xref="alg1.l18.m1.2.2.4.7.cmml">n</mi><mo id="alg1.l18.m1.2.2.4.1e" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.8" xref="alg1.l18.m1.2.2.4.8.cmml">p</mi><mo id="alg1.l18.m1.2.2.4.1f" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.9" xref="alg1.l18.m1.2.2.4.9.cmml">u</mi><mo id="alg1.l18.m1.2.2.4.1g" xref="alg1.l18.m1.2.2.4.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.4.10" xref="alg1.l18.m1.2.2.4.10.cmml">t</mi></mrow><mo id="alg1.l18.m1.2.2.3" stretchy="false" xref="alg1.l18.m1.2.2.3.cmml">←</mo><mrow id="alg1.l18.m1.2.2.2" xref="alg1.l18.m1.2.2.2.cmml"><mtext id="alg1.l18.m1.2.2.2.4" xref="alg1.l18.m1.2.2.2.4a.cmml">UpdIptFdbk</mtext><mo id="alg1.l18.m1.2.2.2.3" xref="alg1.l18.m1.2.2.2.3.cmml">⁢</mo><mrow id="alg1.l18.m1.2.2.2.2.2" xref="alg1.l18.m1.2.2.2.2.3.cmml"><mo id="alg1.l18.m1.2.2.2.2.2.3" stretchy="false" xref="alg1.l18.m1.2.2.2.2.3.cmml">(</mo><mrow id="alg1.l18.m1.1.1.1.1.1.1" xref="alg1.l18.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l18.m1.1.1.1.1.1.1.2" xref="alg1.l18.m1.1.1.1.1.1.1.2.cmml">i</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.3" xref="alg1.l18.m1.1.1.1.1.1.1.3.cmml">n</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1a" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.4" xref="alg1.l18.m1.1.1.1.1.1.1.4.cmml">i</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1b" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.5" xref="alg1.l18.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1c" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.6" mathvariant="normal" xref="alg1.l18.m1.1.1.1.1.1.1.6.cmml">_</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1d" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.7" xref="alg1.l18.m1.1.1.1.1.1.1.7.cmml">i</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1e" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.8" xref="alg1.l18.m1.1.1.1.1.1.1.8.cmml">n</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1f" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.9" xref="alg1.l18.m1.1.1.1.1.1.1.9.cmml">p</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1g" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.10" xref="alg1.l18.m1.1.1.1.1.1.1.10.cmml">u</mi><mo id="alg1.l18.m1.1.1.1.1.1.1.1h" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l18.m1.1.1.1.1.1.1.11" xref="alg1.l18.m1.1.1.1.1.1.1.11.cmml">t</mi></mrow><mo id="alg1.l18.m1.2.2.2.2.2.4" xref="alg1.l18.m1.2.2.2.2.3.cmml">,</mo><mrow id="alg1.l18.m1.2.2.2.2.2.2" xref="alg1.l18.m1.2.2.2.2.2.2.cmml"><mi id="alg1.l18.m1.2.2.2.2.2.2.2" xref="alg1.l18.m1.2.2.2.2.2.2.2.cmml">f</mi><mo id="alg1.l18.m1.2.2.2.2.2.2.1" xref="alg1.l18.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.2.2.2.2.3" xref="alg1.l18.m1.2.2.2.2.2.2.3.cmml">d</mi><mo id="alg1.l18.m1.2.2.2.2.2.2.1a" xref="alg1.l18.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.2.2.2.2.4" xref="alg1.l18.m1.2.2.2.2.2.2.4.cmml">b</mi><mo id="alg1.l18.m1.2.2.2.2.2.2.1b" xref="alg1.l18.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg1.l18.m1.2.2.2.2.2.2.5" xref="alg1.l18.m1.2.2.2.2.2.2.5.cmml">k</mi></mrow><mo id="alg1.l18.m1.2.2.2.2.2.5" stretchy="false" xref="alg1.l18.m1.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l18.m1.2b"><apply id="alg1.l18.m1.2.2.cmml" xref="alg1.l18.m1.2.2"><ci id="alg1.l18.m1.2.2.3.cmml" xref="alg1.l18.m1.2.2.3">←</ci><apply id="alg1.l18.m1.2.2.4.cmml" xref="alg1.l18.m1.2.2.4"><times id="alg1.l18.m1.2.2.4.1.cmml" xref="alg1.l18.m1.2.2.4.1"></times><ci id="alg1.l18.m1.2.2.4.2.cmml" xref="alg1.l18.m1.2.2.4.2">𝑐</ci><ci id="alg1.l18.m1.2.2.4.3.cmml" xref="alg1.l18.m1.2.2.4.3">𝑢</ci><ci id="alg1.l18.m1.2.2.4.4.cmml" xref="alg1.l18.m1.2.2.4.4">𝑟</ci><ci id="alg1.l18.m1.2.2.4.5.cmml" xref="alg1.l18.m1.2.2.4.5">_</ci><ci id="alg1.l18.m1.2.2.4.6.cmml" xref="alg1.l18.m1.2.2.4.6">𝑖</ci><ci id="alg1.l18.m1.2.2.4.7.cmml" xref="alg1.l18.m1.2.2.4.7">𝑛</ci><ci id="alg1.l18.m1.2.2.4.8.cmml" xref="alg1.l18.m1.2.2.4.8">𝑝</ci><ci id="alg1.l18.m1.2.2.4.9.cmml" xref="alg1.l18.m1.2.2.4.9">𝑢</ci><ci id="alg1.l18.m1.2.2.4.10.cmml" xref="alg1.l18.m1.2.2.4.10">𝑡</ci></apply><apply id="alg1.l18.m1.2.2.2.cmml" xref="alg1.l18.m1.2.2.2"><times id="alg1.l18.m1.2.2.2.3.cmml" xref="alg1.l18.m1.2.2.2.3"></times><ci id="alg1.l18.m1.2.2.2.4a.cmml" xref="alg1.l18.m1.2.2.2.4"><mtext id="alg1.l18.m1.2.2.2.4.cmml" xref="alg1.l18.m1.2.2.2.4">UpdIptFdbk</mtext></ci><interval closure="open" id="alg1.l18.m1.2.2.2.2.3.cmml" xref="alg1.l18.m1.2.2.2.2.2"><apply id="alg1.l18.m1.1.1.1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1.1.1.1"><times id="alg1.l18.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l18.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.2">𝑖</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.3">𝑛</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.4">𝑖</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.6">_</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.7">𝑖</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.8">𝑛</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.9">𝑝</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.10">𝑢</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.11.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.11">𝑡</ci></apply><apply id="alg1.l18.m1.2.2.2.2.2.2.cmml" xref="alg1.l18.m1.2.2.2.2.2.2"><times id="alg1.l18.m1.2.2.2.2.2.2.1.cmml" xref="alg1.l18.m1.2.2.2.2.2.2.1"></times><ci id="alg1.l18.m1.2.2.2.2.2.2.2.cmml" xref="alg1.l18.m1.2.2.2.2.2.2.2">𝑓</ci><ci id="alg1.l18.m1.2.2.2.2.2.2.3.cmml" xref="alg1.l18.m1.2.2.2.2.2.2.3">𝑑</ci><ci id="alg1.l18.m1.2.2.2.2.2.2.4.cmml" xref="alg1.l18.m1.2.2.2.2.2.2.4">𝑏</ci><ci id="alg1.l18.m1.2.2.2.2.2.2.5.cmml" xref="alg1.l18.m1.2.2.2.2.2.2.5">𝑘</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l18.m1.2c">cur\_input\leftarrow\text{UpdIptFdbk}(init\_input,fdbk)</annotation><annotation encoding="application/x-llamapun" id="alg1.l18.m1.2d">italic_c italic_u italic_r _ italic_i italic_n italic_p italic_u italic_t ← UpdIptFdbk ( italic_i italic_n italic_i italic_t _ italic_i italic_n italic_p italic_u italic_t , italic_f italic_d italic_b italic_k )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l19">
<span class="ltx_tag ltx_tag_listingline">19:</span>         <math alttext="iter\_cnt\leftarrow iter\_cnt+1" class="ltx_Math" display="inline" id="alg1.l19.m1.1"><semantics id="alg1.l19.m1.1a"><mrow id="alg1.l19.m1.1.1" xref="alg1.l19.m1.1.1.cmml"><mrow id="alg1.l19.m1.1.1.2" xref="alg1.l19.m1.1.1.2.cmml"><mi id="alg1.l19.m1.1.1.2.2" xref="alg1.l19.m1.1.1.2.2.cmml">i</mi><mo id="alg1.l19.m1.1.1.2.1" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.3" xref="alg1.l19.m1.1.1.2.3.cmml">t</mi><mo id="alg1.l19.m1.1.1.2.1a" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.4" xref="alg1.l19.m1.1.1.2.4.cmml">e</mi><mo id="alg1.l19.m1.1.1.2.1b" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.5" xref="alg1.l19.m1.1.1.2.5.cmml">r</mi><mo id="alg1.l19.m1.1.1.2.1c" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.6" mathvariant="normal" xref="alg1.l19.m1.1.1.2.6.cmml">_</mi><mo id="alg1.l19.m1.1.1.2.1d" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.7" xref="alg1.l19.m1.1.1.2.7.cmml">c</mi><mo id="alg1.l19.m1.1.1.2.1e" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.8" xref="alg1.l19.m1.1.1.2.8.cmml">n</mi><mo id="alg1.l19.m1.1.1.2.1f" xref="alg1.l19.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.2.9" xref="alg1.l19.m1.1.1.2.9.cmml">t</mi></mrow><mo id="alg1.l19.m1.1.1.1" stretchy="false" xref="alg1.l19.m1.1.1.1.cmml">←</mo><mrow id="alg1.l19.m1.1.1.3" xref="alg1.l19.m1.1.1.3.cmml"><mrow id="alg1.l19.m1.1.1.3.2" xref="alg1.l19.m1.1.1.3.2.cmml"><mi id="alg1.l19.m1.1.1.3.2.2" xref="alg1.l19.m1.1.1.3.2.2.cmml">i</mi><mo id="alg1.l19.m1.1.1.3.2.1" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.3" xref="alg1.l19.m1.1.1.3.2.3.cmml">t</mi><mo id="alg1.l19.m1.1.1.3.2.1a" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.4" xref="alg1.l19.m1.1.1.3.2.4.cmml">e</mi><mo id="alg1.l19.m1.1.1.3.2.1b" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.5" xref="alg1.l19.m1.1.1.3.2.5.cmml">r</mi><mo id="alg1.l19.m1.1.1.3.2.1c" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.6" mathvariant="normal" xref="alg1.l19.m1.1.1.3.2.6.cmml">_</mi><mo id="alg1.l19.m1.1.1.3.2.1d" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.7" xref="alg1.l19.m1.1.1.3.2.7.cmml">c</mi><mo id="alg1.l19.m1.1.1.3.2.1e" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.8" xref="alg1.l19.m1.1.1.3.2.8.cmml">n</mi><mo id="alg1.l19.m1.1.1.3.2.1f" xref="alg1.l19.m1.1.1.3.2.1.cmml">⁢</mo><mi id="alg1.l19.m1.1.1.3.2.9" xref="alg1.l19.m1.1.1.3.2.9.cmml">t</mi></mrow><mo id="alg1.l19.m1.1.1.3.1" xref="alg1.l19.m1.1.1.3.1.cmml">+</mo><mn id="alg1.l19.m1.1.1.3.3" xref="alg1.l19.m1.1.1.3.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l19.m1.1b"><apply id="alg1.l19.m1.1.1.cmml" xref="alg1.l19.m1.1.1"><ci id="alg1.l19.m1.1.1.1.cmml" xref="alg1.l19.m1.1.1.1">←</ci><apply id="alg1.l19.m1.1.1.2.cmml" xref="alg1.l19.m1.1.1.2"><times id="alg1.l19.m1.1.1.2.1.cmml" xref="alg1.l19.m1.1.1.2.1"></times><ci id="alg1.l19.m1.1.1.2.2.cmml" xref="alg1.l19.m1.1.1.2.2">𝑖</ci><ci id="alg1.l19.m1.1.1.2.3.cmml" xref="alg1.l19.m1.1.1.2.3">𝑡</ci><ci id="alg1.l19.m1.1.1.2.4.cmml" xref="alg1.l19.m1.1.1.2.4">𝑒</ci><ci id="alg1.l19.m1.1.1.2.5.cmml" xref="alg1.l19.m1.1.1.2.5">𝑟</ci><ci id="alg1.l19.m1.1.1.2.6.cmml" xref="alg1.l19.m1.1.1.2.6">_</ci><ci id="alg1.l19.m1.1.1.2.7.cmml" xref="alg1.l19.m1.1.1.2.7">𝑐</ci><ci id="alg1.l19.m1.1.1.2.8.cmml" xref="alg1.l19.m1.1.1.2.8">𝑛</ci><ci id="alg1.l19.m1.1.1.2.9.cmml" xref="alg1.l19.m1.1.1.2.9">𝑡</ci></apply><apply id="alg1.l19.m1.1.1.3.cmml" xref="alg1.l19.m1.1.1.3"><plus id="alg1.l19.m1.1.1.3.1.cmml" xref="alg1.l19.m1.1.1.3.1"></plus><apply id="alg1.l19.m1.1.1.3.2.cmml" xref="alg1.l19.m1.1.1.3.2"><times id="alg1.l19.m1.1.1.3.2.1.cmml" xref="alg1.l19.m1.1.1.3.2.1"></times><ci id="alg1.l19.m1.1.1.3.2.2.cmml" xref="alg1.l19.m1.1.1.3.2.2">𝑖</ci><ci id="alg1.l19.m1.1.1.3.2.3.cmml" xref="alg1.l19.m1.1.1.3.2.3">𝑡</ci><ci id="alg1.l19.m1.1.1.3.2.4.cmml" xref="alg1.l19.m1.1.1.3.2.4">𝑒</ci><ci id="alg1.l19.m1.1.1.3.2.5.cmml" xref="alg1.l19.m1.1.1.3.2.5">𝑟</ci><ci id="alg1.l19.m1.1.1.3.2.6.cmml" xref="alg1.l19.m1.1.1.3.2.6">_</ci><ci id="alg1.l19.m1.1.1.3.2.7.cmml" xref="alg1.l19.m1.1.1.3.2.7">𝑐</ci><ci id="alg1.l19.m1.1.1.3.2.8.cmml" xref="alg1.l19.m1.1.1.3.2.8">𝑛</ci><ci id="alg1.l19.m1.1.1.3.2.9.cmml" xref="alg1.l19.m1.1.1.3.2.9">𝑡</ci></apply><cn id="alg1.l19.m1.1.1.3.3.cmml" type="integer" xref="alg1.l19.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l19.m1.1c">iter\_cnt\leftarrow iter\_cnt+1</annotation><annotation encoding="application/x-llamapun" id="alg1.l19.m1.1d">italic_i italic_t italic_e italic_r _ italic_c italic_n italic_t ← italic_i italic_t italic_e italic_r _ italic_c italic_n italic_t + 1</annotation></semantics></math>
     
</div>
<div class="ltx_listingline" id="alg1.l20">
<span class="ltx_tag ltx_tag_listingline">20:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l20.1">return</span> <math alttext="gen\_code" class="ltx_Math" display="inline" id="alg1.l20.m1.1"><semantics id="alg1.l20.m1.1a"><mrow id="alg1.l20.m1.1.1" xref="alg1.l20.m1.1.1.cmml"><mi id="alg1.l20.m1.1.1.2" xref="alg1.l20.m1.1.1.2.cmml">g</mi><mo id="alg1.l20.m1.1.1.1" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.3" xref="alg1.l20.m1.1.1.3.cmml">e</mi><mo id="alg1.l20.m1.1.1.1a" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.4" xref="alg1.l20.m1.1.1.4.cmml">n</mi><mo id="alg1.l20.m1.1.1.1b" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.5" mathvariant="normal" xref="alg1.l20.m1.1.1.5.cmml">_</mi><mo id="alg1.l20.m1.1.1.1c" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.6" xref="alg1.l20.m1.1.1.6.cmml">c</mi><mo id="alg1.l20.m1.1.1.1d" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.7" xref="alg1.l20.m1.1.1.7.cmml">o</mi><mo id="alg1.l20.m1.1.1.1e" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.8" xref="alg1.l20.m1.1.1.8.cmml">d</mi><mo id="alg1.l20.m1.1.1.1f" xref="alg1.l20.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l20.m1.1.1.9" xref="alg1.l20.m1.1.1.9.cmml">e</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l20.m1.1b"><apply id="alg1.l20.m1.1.1.cmml" xref="alg1.l20.m1.1.1"><times id="alg1.l20.m1.1.1.1.cmml" xref="alg1.l20.m1.1.1.1"></times><ci id="alg1.l20.m1.1.1.2.cmml" xref="alg1.l20.m1.1.1.2">𝑔</ci><ci id="alg1.l20.m1.1.1.3.cmml" xref="alg1.l20.m1.1.1.3">𝑒</ci><ci id="alg1.l20.m1.1.1.4.cmml" xref="alg1.l20.m1.1.1.4">𝑛</ci><ci id="alg1.l20.m1.1.1.5.cmml" xref="alg1.l20.m1.1.1.5">_</ci><ci id="alg1.l20.m1.1.1.6.cmml" xref="alg1.l20.m1.1.1.6">𝑐</ci><ci id="alg1.l20.m1.1.1.7.cmml" xref="alg1.l20.m1.1.1.7">𝑜</ci><ci id="alg1.l20.m1.1.1.8.cmml" xref="alg1.l20.m1.1.1.8">𝑑</ci><ci id="alg1.l20.m1.1.1.9.cmml" xref="alg1.l20.m1.1.1.9">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l20.m1.1c">gen\_code</annotation><annotation encoding="application/x-llamapun" id="alg1.l20.m1.1d">italic_g italic_e italic_n _ italic_c italic_o italic_d italic_e</annotation></semantics></math>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Benchmarks</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">While RepoEval <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib37" title="">2023</a>)</cite> has been a foundational benchmark for assessing code completion across various levels of code granularity, including line, API invocation, and function body completion, its limitations hinder its ability to fully evaluate the complexities of modern, large-scale codebases.
Since it includes repositories with a relatively low threshold for community engagement and a broad range of quality standards (e.g., 75% of the repositories for line completion in RepoEval are more than 2 years old), it may not adequately reflect the real-world complexities and nuances faced by developers.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">To overcome these limitations, we introduce RepoGenEval, a new benchmark with stricter selection criteria focusing on high-quality repositories. By significantly raising the bar for community engagement — requiring repositories to have between 700 to <math alttext="40\,000" class="ltx_Math" display="inline" id="S4.SS1.p2.1.m1.1"><semantics id="S4.SS1.p2.1.m1.1a"><mn id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml">40 000</mn><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><cn id="S4.SS1.p2.1.m1.1.1.cmml" type="integer" xref="S4.SS1.p2.1.m1.1.1">40000</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">40\,000</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.1.m1.1d">40 000</annotation></semantics></math> stars — and ensuring that over 90% of the code in each repository is Python with explicit unit tests, RepoGenEval better reflects the challenges of modern codebases. This benchmark is particularly tailored for line completion tasks, making it more relevant to practical applications of code completion.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">Through these enhancements, RepoGenEval offers a robust, comprehensive platform for validating the effectiveness of our proposed framework.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS1.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Construction of RepoGenEval</h4>
<figure class="ltx_table" id="S4.T1">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T1.15" style="width:242.8pt;height:99.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-75.7pt,31.1pt) scale(0.616002338317289,0.616002338317289) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.15.15">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T1.15.15.16.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.15.15.16.1.1"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.16.1.1.1">Repository</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.15.15.16.1.2"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.16.1.2.1">Created</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.15.15.16.1.3"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.16.1.3.1">Stars</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.15.15.16.1.4"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.16.1.4.1">Files</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.15.15.16.1.5"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.16.1.5.1">Lines</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.2.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.2.2.2.3"><cite class="ltx_cite ltx_citemacro_citep">(MetaGPT <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib18" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.2.2.2.4">2023-06-30</th>
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.1.1.1.1"><math alttext="40\,338" class="ltx_Math" display="inline" id="S4.T1.1.1.1.1.m1.1"><semantics id="S4.T1.1.1.1.1.m1.1a"><mn id="S4.T1.1.1.1.1.m1.1.1" xref="S4.T1.1.1.1.1.m1.1.1.cmml">40 338</mn><annotation-xml encoding="MathML-Content" id="S4.T1.1.1.1.1.m1.1b"><cn id="S4.T1.1.1.1.1.m1.1.1.cmml" type="integer" xref="S4.T1.1.1.1.1.m1.1.1">40338</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.1.1.1.1.m1.1c">40\,338</annotation><annotation encoding="application/x-llamapun" id="S4.T1.1.1.1.1.m1.1d">40 338</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.2.2.2.5">659</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.2.2.2.2"><math alttext="49\,659" class="ltx_Math" display="inline" id="S4.T1.2.2.2.2.m1.1"><semantics id="S4.T1.2.2.2.2.m1.1a"><mn id="S4.T1.2.2.2.2.m1.1.1" xref="S4.T1.2.2.2.2.m1.1.1.cmml">49 659</mn><annotation-xml encoding="MathML-Content" id="S4.T1.2.2.2.2.m1.1b"><cn id="S4.T1.2.2.2.2.m1.1.1.cmml" type="integer" xref="S4.T1.2.2.2.2.m1.1.1">49659</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.2.2.2.2.m1.1c">49\,659</annotation><annotation encoding="application/x-llamapun" id="S4.T1.2.2.2.2.m1.1d">49 659</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.5.5.5.4"><cite class="ltx_cite ltx_citemacro_citep">(gpt-pilot <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib6" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.5.5.5">2023-08-16</th>
<td class="ltx_td ltx_align_right" id="S4.T1.3.3.3.1"><math alttext="28\,735" class="ltx_Math" display="inline" id="S4.T1.3.3.3.1.m1.1"><semantics id="S4.T1.3.3.3.1.m1.1a"><mn id="S4.T1.3.3.3.1.m1.1.1" xref="S4.T1.3.3.3.1.m1.1.1.cmml">28 735</mn><annotation-xml encoding="MathML-Content" id="S4.T1.3.3.3.1.m1.1b"><cn id="S4.T1.3.3.3.1.m1.1.1.cmml" type="integer" xref="S4.T1.3.3.3.1.m1.1.1">28735</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.3.3.3.1.m1.1c">28\,735</annotation><annotation encoding="application/x-llamapun" id="S4.T1.3.3.3.1.m1.1d">28 735</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.4.4.4.2"><math alttext="118" class="ltx_Math" display="inline" id="S4.T1.4.4.4.2.m1.1"><semantics id="S4.T1.4.4.4.2.m1.1a"><mn id="S4.T1.4.4.4.2.m1.1.1" xref="S4.T1.4.4.4.2.m1.1.1.cmml">118</mn><annotation-xml encoding="MathML-Content" id="S4.T1.4.4.4.2.m1.1b"><cn id="S4.T1.4.4.4.2.m1.1.1.cmml" type="integer" xref="S4.T1.4.4.4.2.m1.1.1">118</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.4.4.4.2.m1.1c">118</annotation><annotation encoding="application/x-llamapun" id="S4.T1.4.4.4.2.m1.1d">118</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.5.5.5.3"><math alttext="10\,686" class="ltx_Math" display="inline" id="S4.T1.5.5.5.3.m1.1"><semantics id="S4.T1.5.5.5.3.m1.1a"><mn id="S4.T1.5.5.5.3.m1.1.1" xref="S4.T1.5.5.5.3.m1.1.1.cmml">10 686</mn><annotation-xml encoding="MathML-Content" id="S4.T1.5.5.5.3.m1.1b"><cn id="S4.T1.5.5.5.3.m1.1.1.cmml" type="integer" xref="S4.T1.5.5.5.3.m1.1.1">10686</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.5.5.5.3.m1.1c">10\,686</annotation><annotation encoding="application/x-llamapun" id="S4.T1.5.5.5.3.m1.1d">10 686</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.7.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.7.7.7.3"><cite class="ltx_cite ltx_citemacro_citep">(TaskWeaver <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib33" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.7.7.7.4">2023-09-11</th>
<td class="ltx_td ltx_align_right" id="S4.T1.6.6.6.1"><math alttext="4830" class="ltx_Math" display="inline" id="S4.T1.6.6.6.1.m1.1"><semantics id="S4.T1.6.6.6.1.m1.1a"><mn id="S4.T1.6.6.6.1.m1.1.1" xref="S4.T1.6.6.6.1.m1.1.1.cmml">4830</mn><annotation-xml encoding="MathML-Content" id="S4.T1.6.6.6.1.m1.1b"><cn id="S4.T1.6.6.6.1.m1.1.1.cmml" type="integer" xref="S4.T1.6.6.6.1.m1.1.1">4830</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.6.6.6.1.m1.1c">4830</annotation><annotation encoding="application/x-llamapun" id="S4.T1.6.6.6.1.m1.1d">4830</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.7.7.7.5">158</td>
<td class="ltx_td ltx_align_right" id="S4.T1.7.7.7.2"><math alttext="14\,905" class="ltx_Math" display="inline" id="S4.T1.7.7.7.2.m1.1"><semantics id="S4.T1.7.7.7.2.m1.1a"><mn id="S4.T1.7.7.7.2.m1.1.1" xref="S4.T1.7.7.7.2.m1.1.1.cmml">14 905</mn><annotation-xml encoding="MathML-Content" id="S4.T1.7.7.7.2.m1.1b"><cn id="S4.T1.7.7.7.2.m1.1.1.cmml" type="integer" xref="S4.T1.7.7.7.2.m1.1.1">14905</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.7.7.7.2.m1.1c">14\,905</annotation><annotation encoding="application/x-llamapun" id="S4.T1.7.7.7.2.m1.1d">14 905</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.9.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.9.9.9.3"><cite class="ltx_cite ltx_citemacro_citep">(Otter <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib22" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.9.9.9.4">2023-04-01</th>
<td class="ltx_td ltx_align_right" id="S4.T1.8.8.8.1"><math alttext="3478" class="ltx_Math" display="inline" id="S4.T1.8.8.8.1.m1.1"><semantics id="S4.T1.8.8.8.1.m1.1a"><mn id="S4.T1.8.8.8.1.m1.1.1" xref="S4.T1.8.8.8.1.m1.1.1.cmml">3478</mn><annotation-xml encoding="MathML-Content" id="S4.T1.8.8.8.1.m1.1b"><cn id="S4.T1.8.8.8.1.m1.1.1.cmml" type="integer" xref="S4.T1.8.8.8.1.m1.1.1">3478</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.8.8.8.1.m1.1c">3478</annotation><annotation encoding="application/x-llamapun" id="S4.T1.8.8.8.1.m1.1d">3478</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.9.9.9.5">176</td>
<td class="ltx_td ltx_align_right" id="S4.T1.9.9.9.2"><math alttext="27\,967" class="ltx_Math" display="inline" id="S4.T1.9.9.9.2.m1.1"><semantics id="S4.T1.9.9.9.2.m1.1a"><mn id="S4.T1.9.9.9.2.m1.1.1" xref="S4.T1.9.9.9.2.m1.1.1.cmml">27 967</mn><annotation-xml encoding="MathML-Content" id="S4.T1.9.9.9.2.m1.1b"><cn id="S4.T1.9.9.9.2.m1.1.1.cmml" type="integer" xref="S4.T1.9.9.9.2.m1.1.1">27967</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.9.9.9.2.m1.1c">27\,967</annotation><annotation encoding="application/x-llamapun" id="S4.T1.9.9.9.2.m1.1d">27 967</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.11.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.11.11.11.3"><cite class="ltx_cite ltx_citemacro_citep">(Auto-GPT-ZH <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib2" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.11.11.11.4">2023-04-18</th>
<td class="ltx_td ltx_align_right" id="S4.T1.10.10.10.1"><math alttext="2381" class="ltx_Math" display="inline" id="S4.T1.10.10.10.1.m1.1"><semantics id="S4.T1.10.10.10.1.m1.1a"><mn id="S4.T1.10.10.10.1.m1.1.1" xref="S4.T1.10.10.10.1.m1.1.1.cmml">2381</mn><annotation-xml encoding="MathML-Content" id="S4.T1.10.10.10.1.m1.1b"><cn id="S4.T1.10.10.10.1.m1.1.1.cmml" type="integer" xref="S4.T1.10.10.10.1.m1.1.1">2381</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.10.10.10.1.m1.1c">2381</annotation><annotation encoding="application/x-llamapun" id="S4.T1.10.10.10.1.m1.1d">2381</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.11.11.11.5">143</td>
<td class="ltx_td ltx_align_right" id="S4.T1.11.11.11.2"><math alttext="10\,191" class="ltx_Math" display="inline" id="S4.T1.11.11.11.2.m1.1"><semantics id="S4.T1.11.11.11.2.m1.1a"><mn id="S4.T1.11.11.11.2.m1.1.1" xref="S4.T1.11.11.11.2.m1.1.1.cmml">10 191</mn><annotation-xml encoding="MathML-Content" id="S4.T1.11.11.11.2.m1.1b"><cn id="S4.T1.11.11.11.2.m1.1.1.cmml" type="integer" xref="S4.T1.11.11.11.2.m1.1.1">10191</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.11.11.11.2.m1.1c">10\,191</annotation><annotation encoding="application/x-llamapun" id="S4.T1.11.11.11.2.m1.1d">10 191</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.13.13.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.13.13.13.3"><cite class="ltx_cite ltx_citemacro_citep">(OS-Copilot <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib21" title="">2024</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.13.13.13.4">2024-02-02</th>
<td class="ltx_td ltx_align_right" id="S4.T1.12.12.12.1"><math alttext="1326" class="ltx_Math" display="inline" id="S4.T1.12.12.12.1.m1.1"><semantics id="S4.T1.12.12.12.1.m1.1a"><mn id="S4.T1.12.12.12.1.m1.1.1" xref="S4.T1.12.12.12.1.m1.1.1.cmml">1326</mn><annotation-xml encoding="MathML-Content" id="S4.T1.12.12.12.1.m1.1b"><cn id="S4.T1.12.12.12.1.m1.1.1.cmml" type="integer" xref="S4.T1.12.12.12.1.m1.1.1">1326</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.12.12.12.1.m1.1c">1326</annotation><annotation encoding="application/x-llamapun" id="S4.T1.12.12.12.1.m1.1d">1326</annotation></semantics></math></td>
<td class="ltx_td ltx_align_right" id="S4.T1.13.13.13.5">75</td>
<td class="ltx_td ltx_align_right" id="S4.T1.13.13.13.2"><math alttext="7770" class="ltx_Math" display="inline" id="S4.T1.13.13.13.2.m1.1"><semantics id="S4.T1.13.13.13.2.m1.1a"><mn id="S4.T1.13.13.13.2.m1.1.1" xref="S4.T1.13.13.13.2.m1.1.1.cmml">7770</mn><annotation-xml encoding="MathML-Content" id="S4.T1.13.13.13.2.m1.1b"><cn id="S4.T1.13.13.13.2.m1.1.1.cmml" type="integer" xref="S4.T1.13.13.13.2.m1.1.1">7770</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.13.13.13.2.m1.1c">7770</annotation><annotation encoding="application/x-llamapun" id="S4.T1.13.13.13.2.m1.1d">7770</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.14.14.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.14.14.14.2"><cite class="ltx_cite ltx_citemacro_citep">(center-randomize <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib5" title="">2024</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.14.14.14.3">2024-04-05</th>
<td class="ltx_td ltx_align_right" id="S4.T1.14.14.14.4">748</td>
<td class="ltx_td ltx_align_right" id="S4.T1.14.14.14.5">8</td>
<td class="ltx_td ltx_align_right" id="S4.T1.14.14.14.1"><math alttext="736" class="ltx_Math" display="inline" id="S4.T1.14.14.14.1.m1.1"><semantics id="S4.T1.14.14.14.1.m1.1a"><mn id="S4.T1.14.14.14.1.m1.1.1" xref="S4.T1.14.14.14.1.m1.1.1.cmml">736</mn><annotation-xml encoding="MathML-Content" id="S4.T1.14.14.14.1.m1.1b"><cn id="S4.T1.14.14.14.1.m1.1.1.cmml" type="integer" xref="S4.T1.14.14.14.1.m1.1.1">736</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.14.14.14.1.m1.1c">736</annotation><annotation encoding="application/x-llamapun" id="S4.T1.14.14.14.1.m1.1d">736</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S4.T1.15.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.15.15.15.2"><cite class="ltx_cite ltx_citemacro_citep">(microagents <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib19" title="">2023</a>)</cite></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb" id="S4.T1.15.15.15.3">2023-12-11</th>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.15.15.15.4">706</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.15.15.15.5">45</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.15.15.15.1"><math alttext="2442" class="ltx_Math" display="inline" id="S4.T1.15.15.15.1.m1.1"><semantics id="S4.T1.15.15.15.1.m1.1a"><mn id="S4.T1.15.15.15.1.m1.1.1" xref="S4.T1.15.15.15.1.m1.1.1.cmml">2442</mn><annotation-xml encoding="MathML-Content" id="S4.T1.15.15.15.1.m1.1b"><cn id="S4.T1.15.15.15.1.m1.1.1.cmml" type="integer" xref="S4.T1.15.15.15.1.m1.1.1">2442</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.15.15.15.1.m1.1c">2442</annotation><annotation encoding="application/x-llamapun" id="S4.T1.15.15.15.1.m1.1d">2442</annotation></semantics></math></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>The repositories utilized in our RepoGenEval benchmark. Files denotes the total number of Python source files, and Lines denotes the total number of non-empty Python code lines.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS1.SSSx1.p1">
<p class="ltx_p" id="S4.SS1.SSSx1.p1.1">In the development of the new benchmark, we meticulously curated a selection of Python repositories from GitHub, adhering to a set of rigorously defined criteria aimed at enhancing the quality and relevance of the benchmark for programming model validation. Each repository included in the benchmark is required to be an original, non-forked project with an open-source license, ensuring accessibility and encouraging community engagement. A significant enhancement in our selection criteria was the establishment of a higher threshold for community interaction, with a minimum requirement of 700 stars, extending up to <math alttext="40\,000" class="ltx_Math" display="inline" id="S4.SS1.SSSx1.p1.1.m1.1"><semantics id="S4.SS1.SSSx1.p1.1.m1.1a"><mn id="S4.SS1.SSSx1.p1.1.m1.1.1" xref="S4.SS1.SSSx1.p1.1.m1.1.1.cmml">40 000</mn><annotation-xml encoding="MathML-Content" id="S4.SS1.SSSx1.p1.1.m1.1b"><cn id="S4.SS1.SSSx1.p1.1.m1.1.1.cmml" type="integer" xref="S4.SS1.SSSx1.p1.1.m1.1.1">40000</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSSx1.p1.1.m1.1c">40\,000</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSSx1.p1.1.m1.1d">40 000</annotation></semantics></math> stars (a significant increase from the 100-star minimum in the previous benchmark). This criterion ensures the inclusion of repositories that are not only widely recognized within the developer community but also demonstrate substantial and ongoing developer engagement, as evidenced by active issue interactions.</p>
</div>
<div class="ltx_para" id="S4.SS1.SSSx1.p2">
<p class="ltx_p" id="S4.SS1.SSSx1.p2.1">Moreover, to emphasize the technical quality and maintainability of the selected projects, we require that over 90% of the content in each repository be Python code, accompanied by explicit unit tests. These criteria guarantee that the benchmark is highly relevant to the Python programming community and focuses on high-quality, maintainable code. To mitigate potential selection biases and promote a diverse representation of repository characteristics, we included the most recent, relevant projects, ensuring the dataset incorporates the latest coding standards and software technologies. We randomly selected repositories that satisfied the above criteria and that were created no earlier than 2023.</p>
</div>
<div class="ltx_para" id="S4.SS1.SSSx1.p3">
<p class="ltx_p" id="S4.SS1.SSSx1.p3.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#S4.T1" title="Table 1 ‣ Construction of RepoGenEval ‣ 4.1 Benchmarks ‣ 4 Experiments ‣ RepoGenReflex: Enhancing Repository-Level Code Completion with Verbal Reinforcement and Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>, the new benchmark provides a robust, comprehensive benchmark, comprising 8 high-quality repositories that reflect diverse applications and complexities. This improved benchmark is instrumental in validating the enhanced capabilities of our programming models.</p>
</div>
<div class="ltx_para" id="S4.SS1.SSSx1.p4">
<p class="ltx_p" id="S4.SS1.SSSx1.p4.1">We utilized GitHub’s REST API and manual keyword searches to collect data on Python projects. From each repository, 200 lines of code were randomly selected for completion tasks, ensuring that these lines were unique, and not merely comments. This process resulted in a total of 1600 test samples for evaluating code completion.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Selecting Optimal Reflector Model: Code Generation Models or General-purpose Models</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">In our framework, the Actor and Reflector components are both large language models (LLMs). The Actor is responsible for completing unfinished code. The Reflector’s role is to analyze the generated code and provide feedback to improve subsequent iterations.
Given that the Actor focuses on generating code, we selected CodeGen-Mono-6B model due to its specialized design for program synthesis tasks. This model is particularly well-suited for handling complex code generation scenarios, offering robust performance and high accuracy in generating unfinished code, making it an ideal choice for our framework.</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1">The Reflector primarily analyzes the code generated by the Actor and the corresponding evaluation results. In the context of code generation tasks, specialized language models pre-trained on extensive code datasets, like CodeGen-Mono-6B  <cite class="ltx_cite ltx_citemacro_citep">(Nijkamp et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib20" title="">2022</a>)</cite>, are likely to excel in analyzing and understanding code. These models are specifically designed for code-related tasks and so are adept at providing relevant feedback for code generation improvements.</p>
</div>
<div class="ltx_para" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.1">However, the Reflector’s purpose is to provide detailed feedback that goes beyond the initial generation to enhance the overall quality of the generated code. This requires the ability to offer comprehensive and nuanced feedback, a strength of general-purpose generative models pre-trained on diverse datasets like Meta-Llama-3-8B  <cite class="ltx_cite ltx_citemacro_citep">(AI@Meta <a class="ltx_ref" href="https://arxiv.org/html/2409.13122v2#bib.bib1" title="">2024</a>)</cite>. These models can leverage their broad training to give more detailed and contextually rich feedback.</p>
</div>
<div class="ltx_para" id="S4.SS2.p4">
<p class="ltx_p" id="S4.SS2.p4.1">In this experiment, we selected two representative models from these categories to serve as our Reflector component:</p>
<ul class="ltx_itemize" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">CodeGen-Mono-6B</span>: A specialized program synthesis model optimized for code generation tasks.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">Meta-Llama-3-8B</span>: A general generative model designed for various natural language processing tasks.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S4.SS2.p5">
<p class="ltx_p" id="S4.SS2.p5.1">We integrated each model into the Reflector component and evaluated their performance on the RepoGenEval benchmark using EM and ES metrics to measure the accuracy and quality of the code completions.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS2.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Results</h4>
<div class="ltx_para" id="S4.SS2.SSSx1.p1">
<p class="ltx_p" id="S4.SS2.SSSx1.p1.1">As shown in Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:tab:reflexion_optimize</span>, the Meta-Llama-3-8B model consistently provided better feedback, leading to higher EM and ES scores across various repositories. This indicates that the general-purpose Meta-Llama-3-8B model is better suited for the Reflector component, as it enhances the framework’s ability to refine code completions iteratively.</p>
</div>
<div class="ltx_para" id="S4.SS2.SSSx1.p2">
<p class="ltx_p" id="S4.SS2.SSSx1.p2.1">Based on these findings, we conclude that while specialized code generation models are effective for the Actor component, a general-purpose model like Meta-Llama-3-8B is more appropriate for the Reflector component, as it offers more comprehensive feedback and ultimately leads to better performance in code completion tasks.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Overall Model Evaluation</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">Following our exploration of the optimal Reflector model for our framework, we proceeded to evaluate the performance of the framework on the code completion task. To comprehensively assess its effectiveness, we compared it against different state-of-the-art (SOTA) models using our custom benchmark, RepoGenEval, which consists of the latest and high-quality real-world repositories, as well as the RepoEval benchmark. We selected four models for comparison:</p>
<ul class="ltx_itemize" id="S4.I2">
<li class="ltx_item" id="S4.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i1.p1">
<p class="ltx_p" id="S4.I2.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i1.p1.1.1">CodeT5+ 2B</span>: A model optimized for code-related tasks, leveraging extensive training on large codebases to enhance its code generation capabilities.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i2.p1">
<p class="ltx_p" id="S4.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i2.p1.1.1">CodeLlama-7b-hf</span>: A variant of the Llama models designed specifically for code synthesis and understanding, making it suitable for code completion tasks.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i3.p1">
<p class="ltx_p" id="S4.I2.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i3.p1.1.1">StarCoder</span>: A large language model specifically designed for code, trained on data from GitHub covering over 80 programming languages. It has shown superior performance on popular coding benchmarks.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i4.p1">
<p class="ltx_p" id="S4.I2.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i4.p1.1.1">CodeGemma</span>: Particularly the 7B parameter variants, which have demonstrated excellent performance in code completion tasks, especially on benchmarks like HumanEval Infilling and multilingual coding benchmarks.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">We compared the performance of our framework against these models using EM+ES metrics. Unlike the SOTA models, which only utilized the JSONL file of our benchmark, our framework leveraged all elements in the benchmark and the iterative loop.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS3.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Results</h4>
<div class="ltx_para" id="S4.SS3.SSSx1.p1">
<p class="ltx_p" id="S4.SS3.SSSx1.p1.1">The results, as shown in Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:repoeval_results</span> and Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:repogeneval_results</span>, demonstrate that while all selected models perform well, the RepoGenReflex framework consistently achieves higher EM and ES scores across most repositories. Specifically, our framework outperforms specialized and general-purpose SOTA models, particularly in complex repositories where contextual understanding is crucial. This indicates that RepoGenReflex is highly effective in providing accurate and contextually relevant code completions.</p>
</div>
<div class="ltx_para" id="S4.SS3.SSSx1.p2">
<p class="ltx_p" id="S4.SS3.SSSx1.p2.1">These findings underscore the robustness and adaptability of the RepoGenReflex framework, affirming its superior practical performance in standard code completion tasks.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Ablation Study</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">To make sure each component in our framework work, we make an ablation study to figure out whether each componont make the framework effective.</p>
</div>
<div class="ltx_para" id="S4.SS4.p2">
<p class="ltx_p" id="S4.SS4.p2.1">For this ablation study, we still keep CodeGen-Mono-6B as the Actor within the RepoGenReflex framework. By integrating CodeGen-Mono-6B with our Reflector model, we aim to evaluate how well the combined approach performs in terms of EM and ES metrics.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS4.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Experimental Setup</h4>
<div class="ltx_para" id="S4.SS4.SSSx1.p1">
<p class="ltx_p" id="S4.SS4.SSSx1.p1.1">In this ablation study, we aimed to evaluate the individual contributions of the Reflector, Experience, and Evaluator components of our RepoGenReflex framework. We performed the following configurations to systematically analyze the impact of these components:</p>
</div>
<div class="ltx_para" id="S4.SS4.SSSx1.p2">
<ul class="ltx_itemize" id="S4.I3">
<li class="ltx_item" id="S4.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i1.p1">
<p class="ltx_p" id="S4.I3.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i1.p1.1.1">Full Model</span>: The full RepoGenReflex framework, incorporating Reflector, Experience, and Evaluator components, with CodeGen-Mono-6B as the actor and Meta-Llama-3-8B as the Reflector model.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i2.p1">
<p class="ltx_p" id="S4.I3.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i2.p1.1.1">Disabling Reflector and Experience</span>: This model excludes both the Reflector and Experience, relying solely on the base actor model (CodeGen-Mono-6B).</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i3.p1">
<p class="ltx_p" id="S4.I3.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i3.p1.1.1">Disabling Evaluator</span>: This model excludes the Evaluator component, utilizing CodeGen-Mono-6B as the Actor and Meta-Llama-3-8B as the Reflector model.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S4.SS4.SSSx1.p3">
<p class="ltx_p" id="S4.SS4.SSSx1.p3.1">We used standard code completion benchmark RepoEval and assessed performance using EM and ES metrics. Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:repoeval_ablation_results</span> shows the results.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSSx2">
<h4 class="ltx_title ltx_title_subsubsection">Results</h4>
<div class="ltx_para" id="S4.SS4.SSSx2.p1">
<p class="ltx_p" id="S4.SS4.SSSx2.p1.1">The ablation study results highlight the critical roles of the Reflector, Experience, and Evaluator components in enhancing code generation quality. Disabling Reflector and Experience led to a significant decline in EM and ES scores, indicating their joint importance. The Evaluator component also showed a considerable impact on performance, underscoring its value in providing detailed feedback and guiding the iterative improvement process.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">In this paper, we presented RepoGenReflex, a novel code completion framework that effectively integrates RAG with VRL to optimize the iterative retrieval and generation process. By leveraging a carefully selected combination of large language models for the Reflector components, RepoGenReflex proved to be outperforming SOTA models in higher accuracy for code completion tasks. We also validated the critical roles of the Reflector, Experience, and Evaluator components in enhancing code generation quality. These advancements provide a robust foundation for future research and development in intelligent code generation and completion. Our work demonstrates the potential of combining RAG with VRL to create a versatile and powerful code completion framework.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">AI@Meta (2024)</span>
<span class="ltx_bibblock">
AI@Meta. 2024.

</span>
<span class="ltx_bibblock">Llama 3 Model Card.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Auto-GPT-ZH (2023)</span>
<span class="ltx_bibblock">
Auto-GPT-ZH. 2023.

</span>
<span class="ltx_bibblock">Auto-GPT-ZH Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/kaqijiang/Auto-GPT-ZH</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bruch, Monperrus, and Mezini (2009)</span>
<span class="ltx_bibblock">
Bruch, M.; Monperrus, M.; and Mezini, M. 2009.

</span>
<span class="ltx_bibblock">Learning from examples to improve code completion systems.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Proceedings of the 7th joint meeting of the European software engineering conference and the ACM SIGSOFT symposium on the foundations of software engineering</em>, 213–222.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cai et al. (2022)</span>
<span class="ltx_bibblock">
Cai, D.; Wang, Y.; Liu, L.; and Shi, S. 2022.

</span>
<span class="ltx_bibblock">Recent advances in retrieval-augmented text generation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Proceedings of the 45th international ACM SIGIR conference on research and development in information retrieval</em>, 3417–3419.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">center-randomize (2024)</span>
<span class="ltx_bibblock">
center-randomize. 2024.

</span>
<span class="ltx_bibblock">center-randomize Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/moest-np/center-randomize</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">gpt-pilot (2023)</span>
<span class="ltx_bibblock">
gpt-pilot. 2023.

</span>
<span class="ltx_bibblock">gpt-pilot Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/Pythagora-io/gpt-pilot</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guo et al. (2023)</span>
<span class="ltx_bibblock">
Guo, D.; Xu, C.; Duan, N.; Yin, J.; and McAuley, J. 2023.

</span>
<span class="ltx_bibblock">Longcoder: A long-range pre-trained language model for code completion.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">International Conference on Machine Learning</em>, 12098–12107. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Izadi, Gismondi, and Gousios (2022)</span>
<span class="ltx_bibblock">
Izadi, M.; Gismondi, R.; and Gousios, G. 2022.

</span>
<span class="ltx_bibblock">Codefill: Multi-token code completion by jointly learning from structure and naming sequences.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 44th International Conference on Software Engineering</em>, 401–412.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jimenez et al. (2023)</span>
<span class="ltx_bibblock">
Jimenez, C. E.; Yang, J.; Wettig, A.; Yao, S.; Pei, K.; Press, O.; and Narasimhan, K. 2023.

</span>
<span class="ltx_bibblock">Swe-bench: Can language models resolve real-world github issues?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2310.06770</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Levenshtein et al. (1966)</span>
<span class="ltx_bibblock">
Levenshtein, V. I.; et al. 1966.

</span>
<span class="ltx_bibblock">Binary codes capable of correcting deletions, insertions, and reversals.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Soviet physics doklady</em>, volume 10, 707–710. Soviet Union.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Lewis, P.; Perez, E.; Piktus, A.; Petroni, F.; Karpukhin, V.; Goyal, N.; Küttler, H.; Lewis, M.; Yih, W.-t.; Rocktäschel, T.; et al. 2020.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Advances in Neural Information Processing Systems</em>, 33: 9459–9474.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2022)</span>
<span class="ltx_bibblock">
Li, Y.; Choi, D.; Chung, J.; Kushman, N.; Schrittwieser, J.; Leblond, R.; Eccles, T.; Keeling, J.; Gimeno, F.; Dal Lago, A.; et al. 2022.

</span>
<span class="ltx_bibblock">Competition-level code generation with alphacode.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Science</em>, 378(6624): 1092–1097.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2020)</span>
<span class="ltx_bibblock">
Liu, S.; Chen, Y.; Xie, X.; Siow, J.; and Liu, Y. 2020.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for code summarization via hybrid gnn.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">arXiv preprint arXiv:2006.05405</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2022)</span>
<span class="ltx_bibblock">
Lu, P.; Qiu, L.; Chang, K.-W.; Wu, Y. N.; Zhu, S.-C.; Rajpurohit, T.; Clark, P.; and Kalyan, A. 2022.

</span>
<span class="ltx_bibblock">Dynamic prompt learning via policy gradient for semi-structured mathematical reasoning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">arXiv preprint arXiv:2209.14610</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2021)</span>
<span class="ltx_bibblock">
Lu, S.; Guo, D.; Ren, S.; Huang, J.; Svyatkovskiy, A.; Blanco, A.; Clement, C.; Drain, D.; Jiang, D.; Tang, D.; et al. 2021.

</span>
<span class="ltx_bibblock">Codexglue: A machine learning benchmark dataset for code understanding and generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2102.04664</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mao et al. (2020)</span>
<span class="ltx_bibblock">
Mao, Y.; He, P.; Liu, X.; Shen, Y.; Gao, J.; Han, J.; and Chen, W. 2020.

</span>
<span class="ltx_bibblock">Generation-augmented retrieval for open-domain question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2009.08553</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">McCarthy (1960)</span>
<span class="ltx_bibblock">
McCarthy, J. 1960.

</span>
<span class="ltx_bibblock">Recursive functions of symbolic expressions and their computation by machine, part I.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Communications of the ACM</em>, 3(4): 184–195.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">MetaGPT (2023)</span>
<span class="ltx_bibblock">
MetaGPT. 2023.

</span>
<span class="ltx_bibblock">MetaGPT Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/geekan/MetaGPT</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">microagents (2023)</span>
<span class="ltx_bibblock">
microagents. 2023.

</span>
<span class="ltx_bibblock">microagents Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/aymenfurter/microagents</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nijkamp et al. (2022)</span>
<span class="ltx_bibblock">
Nijkamp, E.; Pang, B.; Hayashi, H.; Tu, L.; Wang, H.; Zhou, Y.; Savarese, S.; and Xiong, C. 2022.

</span>
<span class="ltx_bibblock">Codegen: An open large language model for code with multi-turn program synthesis.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2203.13474</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OS-Copilot (2024)</span>
<span class="ltx_bibblock">
OS-Copilot. 2024.

</span>
<span class="ltx_bibblock">OS-Copilot Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/OS-Copilot/OS-Copilot</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Otter (2023)</span>
<span class="ltx_bibblock">
Otter. 2023.

</span>
<span class="ltx_bibblock">Otter Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/Luodian/Otter</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Parvez et al. (2021)</span>
<span class="ltx_bibblock">
Parvez, M. R.; Ahmad, W. U.; Chakraborty, S.; Ray, B.; and Chang, K.-W. 2021.

</span>
<span class="ltx_bibblock">Retrieval augmented code generation and summarization.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2108.11601</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Petryshyn and Lukoševičius (2024)</span>
<span class="ltx_bibblock">
Petryshyn, B.; and Lukoševičius, M. 2024.

</span>
<span class="ltx_bibblock">Optimizing Large Language Models for OpenAPI Code Completion.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv preprint arXiv:2405.15729</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Phan et al. (2021)</span>
<span class="ltx_bibblock">
Phan, L.; Tran, H.; Le, D.; Nguyen, H.; Anibal, J.; Peltekian, A.; and Ye, Y. 2021.

</span>
<span class="ltx_bibblock">Cotext: Multi-task learning with code-text transformer.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2105.08645</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Proksch, Lerch, and Mezini (2015)</span>
<span class="ltx_bibblock">
Proksch, S.; Lerch, J.; and Mezini, M. 2015.

</span>
<span class="ltx_bibblock">Intelligent code completion with Bayesian networks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">ACM Transactions on Software Engineering and Methodology (TOSEM)</em>, 25(1): 1–31.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Robbes and Lanza (2008)</span>
<span class="ltx_bibblock">
Robbes, R.; and Lanza, M. 2008.

</span>
<span class="ltx_bibblock">How program history can improve code completion.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">2008 23rd IEEE/ACM International Conference on Automated Software Engineering</em>, 317–326. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shinn et al. (2024)</span>
<span class="ltx_bibblock">
Shinn, N.; Cassano, F.; Gopinath, A.; Narasimhan, K.; and Yao, S. 2024.

</span>
<span class="ltx_bibblock">Reflexion: Language agents with verbal reinforcement learning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shrivastava, Larochelle, and Tarlow (2023)</span>
<span class="ltx_bibblock">
Shrivastava, D.; Larochelle, H.; and Tarlow, D. 2023.

</span>
<span class="ltx_bibblock">Repository-level prompt generation for large language models of code.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">International Conference on Machine Learning</em>, 31693–31715. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Siriwardhana et al. (2023)</span>
<span class="ltx_bibblock">
Siriwardhana, S.; Weerasekera, R.; Wen, E.; Kaluarachchi, T.; Rana, R.; and Nanayakkara, S. 2023.

</span>
<span class="ltx_bibblock">Improving the domain adaptation of retrieval augmented generation (RAG) models for open domain question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Transactions of the Association for Computational Linguistics</em>, 11: 1–17.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sumers et al. (2023)</span>
<span class="ltx_bibblock">
Sumers, T. R.; Yao, S.; Narasimhan, K.; and Griffiths, T. L. 2023.

</span>
<span class="ltx_bibblock">Cognitive architectures for language agents.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">arXiv preprint arXiv:2309.02427</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Svyatkovskiy et al. (2019)</span>
<span class="ltx_bibblock">
Svyatkovskiy, A.; Zhao, Y.; Fu, S.; and Sundaresan, N. 2019.

</span>
<span class="ltx_bibblock">Pythia: Ai-assisted code completion system.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Proceedings of the 25th ACM SIGKDD international conference on knowledge discovery &amp; data mining</em>, 2727–2735.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">TaskWeaver (2023)</span>
<span class="ltx_bibblock">
TaskWeaver. 2023.

</span>
<span class="ltx_bibblock">TaskWeaver Repository.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_ref_self">https://github.com/microsoft/TaskWeaver</span>.

</span>
<span class="ltx_bibblock">Accessed: 2024-07-25.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Wang, Y.; Wang, Y.; Guo, D.; Chen, J.; Zhang, R.; Ma, Y.; and Zheng, Z. 2024.

</span>
<span class="ltx_bibblock">RLCoder: Reinforcement Learning for Repository-Level Code Completion.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">arXiv preprint arXiv:2407.19487</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Weimer et al. (2009)</span>
<span class="ltx_bibblock">
Weimer, W.; Nguyen, T.; Le Goues, C.; and Forrest, S. 2009.

</span>
<span class="ltx_bibblock">Automatically finding patches using genetic programming.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">2009 IEEE 31st International Conference on Software Engineering</em>, 364–374. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2024)</span>
<span class="ltx_bibblock">
Wu, D.; Ahmad, W. U.; Zhang, D.; Ramanathan, M. K.; and Ma, X. 2024.

</span>
<span class="ltx_bibblock">REPOFORMER: Selective retrieval for repository-level code completion.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2403.10059</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023)</span>
<span class="ltx_bibblock">
Zhang, F.; Chen, B.; Zhang, Y.; Liu, J.; Zan, D.; Mao, Y.; Lou, J.-G.; and Chen, W. 2023.

</span>
<span class="ltx_bibblock">RepoCoder: Repository-Level Code Completion Through Iterative Retrieval and Generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">arXiv preprint arXiv:2303.12570</em>.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Mon Sep 23 19:44:41 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
