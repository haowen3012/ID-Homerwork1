<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Adaptive Retrieval-Augmented Generation for Conversational Systems</title>
<!--Generated on Wed Jul 31 16:00:44 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2407.21712v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S1" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S2" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S3" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Methodology</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S3.SS1" title="In 3 Methodology ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Problem Formulation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S3.SS2" title="In 3 Methodology ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>RAGate Gate Mechanism</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S4" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Model Training and Evaluation Setups</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Results and Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.SS1" title="In 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Augmentation Need Classification</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.SS2" title="In 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Adaptive Augmentation Analysis</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.SS3" title="In 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>RAGate for Response Generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S6" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A1" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Prompts for RAGate-Prompt</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A2" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Impact of Retrieval Quality on Adaptive RAG</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A3" title="In Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Additional experimental results about RAGate for Response Generation</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Adaptive Retrieval-Augmented Generation for Conversational Systems</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Xi Wang<sup class="ltx_sup" id="id13.13.id1"><span class="ltx_text ltx_font_italic" id="id13.13.id1.1">1</span></sup>, Procheta Sen<sup class="ltx_sup" id="id14.14.id2"><span class="ltx_text ltx_font_italic" id="id14.14.id2.1">2</span></sup>, Ruizhe Li<sup class="ltx_sup" id="id15.15.id3"><span class="ltx_text ltx_font_italic" id="id15.15.id3.1">3</span></sup>, Emine Yilmaz<sup class="ltx_sup" id="id16.16.id4"><span class="ltx_text ltx_font_italic" id="id16.16.id4.1">4</span></sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id17.17.id5"><span class="ltx_text ltx_font_italic" id="id17.17.id5.1">1</span></sup>University of Sheffield, <sup class="ltx_sup" id="id18.18.id6"><span class="ltx_text ltx_font_italic" id="id18.18.id6.1">2</span></sup>University of Liverpool, 
<br class="ltx_break"/><sup class="ltx_sup" id="id19.19.id7"><span class="ltx_text ltx_font_italic" id="id19.19.id7.1">3</span></sup>University of Aberdeen, <sup class="ltx_sup" id="id20.20.id8"><span class="ltx_text ltx_font_italic" id="id20.20.id8.1">4</span></sup>University College London 
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id9.9.1">xi.wang@sheffield.ac.uk<sup class="ltx_sup" id="id9.9.1.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="id9.9.1.1.1">1</span></sup></span>, <span class="ltx_text ltx_font_typewriter" id="id10.10.2">procheta.sen@liverpool.ac.uk<sup class="ltx_sup" id="id10.10.2.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="id10.10.2.1.1">2</span></sup></span>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id11.11.3">ruizhe.li@abdn.ac.uk<sup class="ltx_sup" id="id11.11.3.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="id11.11.3.1.1">3</span></sup></span>, <span class="ltx_text ltx_font_typewriter" id="id12.12.4">emine.yilmaz@ucl.ac.uk<sup class="ltx_sup" id="id12.12.4.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="id12.12.4.1.1">4</span></sup></span>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id21.id1">Despite the success of integrating large language models into the development of conversational systems, many studies have shown the effectiveness of retrieving and augmenting external knowledge for informative responses. Hence, many existing studies commonly assume the <span class="ltx_text ltx_font_italic" id="id21.id1.1">always</span> need for Retrieval Augmented Generation (RAG) in a conversational system without explicit control. This raises a research question about such a necessity. In this study, we propose to investigate the need for each turn of system response to be augmented with external knowledge. In particular, by leveraging human judgements on the binary choice of adaptive augmentation, we develop <span class="ltx_text ltx_font_italic" id="id21.id1.2">RAGate</span>, a gating model, which models conversation context and relevant inputs to predict if a conversational system requires RAG for improved responses. We conduct extensive experiments on devising and applying <span class="ltx_text ltx_font_italic" id="id21.id1.3">RAGate</span> to conversational models and well-rounded analyses of different conversational scenarios. Our experimental results and analysis indicate the effective application of <span class="ltx_text ltx_font_italic" id="id21.id1.4">RAGate</span> in RAG-based conversational systems in identifying system responses for appropriate RAG with high-quality responses and a high generation confidence. This study also identifies the correlation between the generation’s confidence level and the relevance of the augmented knowledge.</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.12">
<p class="ltx_p" id="p1.12.13"><span class="ltx_text ltx_font_bold" id="p1.12.13.1">Adaptive Retrieval-Augmented Generation for Conversational Systems</span></p>
<br class="ltx_break ltx_centering"/>
<p class="ltx_p ltx_align_center" id="p1.12.12" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.12.12.12" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.12.12.12.12">
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.4.4.4.4.4">
<span class="ltx_td ltx_align_center" id="p1.4.4.4.4.4.4"><span class="ltx_text ltx_font_bold" id="p1.4.4.4.4.4.4.4">
Xi Wang<sup class="ltx_sup" id="p1.4.4.4.4.4.4.4.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="p1.4.4.4.4.4.4.4.1.1">1</span></sup>, Procheta Sen<sup class="ltx_sup" id="p1.4.4.4.4.4.4.4.2"><span class="ltx_text ltx_font_medium ltx_font_italic" id="p1.4.4.4.4.4.4.4.2.1">2</span></sup>, Ruizhe Li<sup class="ltx_sup" id="p1.4.4.4.4.4.4.4.3"><span class="ltx_text ltx_font_medium ltx_font_italic" id="p1.4.4.4.4.4.4.4.3.1">3</span></sup>, Emine Yilmaz<sup class="ltx_sup" id="p1.4.4.4.4.4.4.4.4"><span class="ltx_text ltx_font_medium ltx_font_italic" id="p1.4.4.4.4.4.4.4.4.1">4</span></sup></span></span></span>
<span class="ltx_tr" id="p1.6.6.6.6.6">
<span class="ltx_td ltx_align_center" id="p1.6.6.6.6.6.2"><sup class="ltx_sup" id="p1.6.6.6.6.6.2.1"><span class="ltx_text ltx_font_italic" id="p1.6.6.6.6.6.2.1.1">1</span></sup>University of Sheffield, <sup class="ltx_sup" id="p1.6.6.6.6.6.2.2"><span class="ltx_text ltx_font_italic" id="p1.6.6.6.6.6.2.2.1">2</span></sup>University of Liverpool,</span></span>
<span class="ltx_tr" id="p1.8.8.8.8.8">
<span class="ltx_td ltx_align_center" id="p1.8.8.8.8.8.2"><sup class="ltx_sup" id="p1.8.8.8.8.8.2.1"><span class="ltx_text ltx_font_italic" id="p1.8.8.8.8.8.2.1.1">3</span></sup>University of Aberdeen, <sup class="ltx_sup" id="p1.8.8.8.8.8.2.2"><span class="ltx_text ltx_font_italic" id="p1.8.8.8.8.8.2.2.1">4</span></sup>University College London</span></span>
<span class="ltx_tr" id="p1.10.10.10.10.10">
<span class="ltx_td ltx_align_center" id="p1.10.10.10.10.10.2"><span class="ltx_text ltx_font_typewriter" id="p1.9.9.9.9.9.1.1">xi.wang@sheffield.ac.uk<sup class="ltx_sup" id="p1.9.9.9.9.9.1.1.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="p1.9.9.9.9.9.1.1.1.1">1</span></sup></span>, <span class="ltx_text ltx_font_typewriter" id="p1.10.10.10.10.10.2.2">procheta.sen@liverpool.ac.uk<sup class="ltx_sup" id="p1.10.10.10.10.10.2.2.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="p1.10.10.10.10.10.2.2.1.1">2</span></sup></span>,</span></span>
<span class="ltx_tr" id="p1.12.12.12.12.12">
<span class="ltx_td ltx_align_center" id="p1.12.12.12.12.12.2"><span class="ltx_text ltx_font_typewriter" id="p1.11.11.11.11.11.1.1">ruizhe.li@abdn.ac.uk<sup class="ltx_sup" id="p1.11.11.11.11.11.1.1.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="p1.11.11.11.11.11.1.1.1.1">3</span></sup></span>, <span class="ltx_text ltx_font_typewriter" id="p1.12.12.12.12.12.2.2">emine.yilmaz@ucl.ac.uk<sup class="ltx_sup" id="p1.12.12.12.12.12.2.2.1"><span class="ltx_text ltx_font_serif ltx_font_italic" id="p1.12.12.12.12.12.2.2.1.1">4</span></sup></span></span></span>
</span>
</span></span></p>
<br class="ltx_break ltx_centering"/>
</div>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="787" id="S1.F1.g1" src="x1.png" width="747"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Example conversation when generating a response with or without a knowledge snippet using a language model (GPT-4 in this example). </figcaption>
</figure>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Recently, the advancement of Large Language Models (LLMs) has significantly improved conversational systems, enabling the generation of natural and high-quality responses <cite class="ltx_cite ltx_citemacro_cite">Ni et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib22" title="">2023</a>)</cite>. Despite these advancements, recent studies have identified several limitations on the simple use of LLMs to address conversational tasks <cite class="ltx_cite ltx_citemacro_cite">Onoe et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib23" title="">2022</a>); Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib10" title="">2021</a>); Ren et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib25" title="">2018</a>)</cite>. These limitations include the lack of up-to-date knowledge <cite class="ltx_cite ltx_citemacro_cite">Onoe et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib23" title="">2022</a>)</cite>, the generation of non-factual or hallucinated content <cite class="ltx_cite ltx_citemacro_cite">Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib10" title="">2021</a>)</cite>, and restricted domain adaptability <cite class="ltx_cite ltx_citemacro_cite">Ren et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib25" title="">2018</a>)</cite>. These issues can hinder the development of conversational agents with satisfactory user experience. To address these identified challenges, a common approach is to retrieve and augment LLMs with external knowledge to enhance the conversational response, making them more accurate, reliable, and adaptable to different domains <cite class="ltx_cite ltx_citemacro_cite">Zhao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib37" title="">2020</a>); Lian et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib19" title="">2019</a>); Ye et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib35" title="">2024</a>)</cite>. For example, <cite class="ltx_cite ltx_citemacro_citet">Shuster et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib30" title="">2021</a>)</cite> demonstrated that using a dense retrieval model (DPR) <cite class="ltx_cite ltx_citemacro_cite">Karpukhin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib13" title="">2020</a>)</cite> to retrieve relevant knowledge for augmentation can significantly reduce the hallucination rate, according to a corresponding human evaluation. Similarly, <cite class="ltx_cite ltx_citemacro_citet">Yang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib34" title="">2020</a>)</cite> showed that leveraging a graph-structured knowledge base can boost the reasoning ability and domain generalisability of task-oriented conversational agents. These achievements of knowledge-augmented techniques highlight a promising direction for enhancing conversational agents and address the current limitations.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">However, while implementing retrieval augmentation to a conversational system for improved response, we question the necessity of knowledge augmentation for every turn of system responses. To develop effective human-computer conversations, it is essential to provide factual and relevant responses, offer <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">appropriate</span> amount of information, and not unnaturally drive and shift the conversation to non-relevant topics <cite class="ltx_cite ltx_citemacro_cite">Kasirzadeh and Gabriel (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib14" title="">2023</a>); Miehling et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib21" title="">2024</a>)</cite>. We argue that overusing external knowledge could result in system responses against these core criteria. Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">1</span></a> presents a conversation example that shows how the system response to a generic user utterance about suggesting activities can vary with and without augmented knowledge. The knowledge-augmented system response is being information conditioned with limited diversity and assuming specific user preferences.
In contrast, without the addition of external knowledge, the system response is more diverse and natural in this early stage of a conversation. This indicates that misusing external knowledge can lead to problematic system responses and a negative user experience.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">To address this, we investigate an adaptive retrieval-augmented generation solution for effective conversational systems. In particular, motivated by the gate function in long-short term memory models <cite class="ltx_cite ltx_citemacro_cite">Graves and Graves (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib6" title="">2012</a>)</cite>, which explicitly controls the use of input and memory, we propose a binary knowledge gate mechanism, called <span class="ltx_text ltx_font_italic" id="S1.p3.1.1">RAGate</span>, to manipulate the use of external knowledge for a conversational system. To model the conversation context and accurately estimate the need for augmentation, we leverage the human labels as ground truth and develop RAGate by exploring the use of recent advanced language models or constructing attention neural gate models. To validate the effectiveness of RAGate, we conduct extensive experiments on an annotated Task-Oriented Dialogue (TOD) system dataset, KETOD, that builds upon the SGD dataset with TOD-spanning
16 domains, such as Restaurant and Weather. The experimental results show that RAGate enables conversational systems to efficiently use external knowledge at appropriate conversation turns, producing high-quality system responses. In particular, by modelling the uncertainty and confidence level of the system – which correlates with the likelihood of hallucinated output <cite class="ltx_cite ltx_citemacro_cite">Varshney et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib31" title="">2023</a>)</cite> – we show that the "always" augmentation of external knowledge can significantly increase generation uncertainty and the risk of hallucination. After applying RAGate, we can effectively control the conversation system to make confident and informative responses. In addition, by varying the use of knowledge snippets in different relevance levels, we also observe the positive correlation between the calculated confidence score and the relevance of augmented knowledge, which can be valuable for many future studies.</p>
</div>
<figure class="ltx_figure" id="S1.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="519" id="S1.F2.g1" src="x2.png" width="996"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span class="ltx_text ltx_font_italic" id="S1.F2.2.1">RAGate</span> variants for implementing the gating function. The three variants are the prediction with pre-trained language models after prompting (1), after parameter-efficient fine-tuning (2), and with a multi-head attention encoder (3).</figcaption>
</figure>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">In the pipeline of knowledge-augmented generation for a conversation system, two main components are identified: the knowledge retriever and the response generator. Existing studies have improved conversational responses to different extents by improving one or both components <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib18" title="">2022</a>); Komeili et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib16" title="">2022</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib33" title="">2024</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S2.p2">
<p class="ltx_p" id="S2.p2.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S2.p2.1.1">Knowledge Retrieval:</span> Several studies have explored the use of dense passage retrieval techniques <cite class="ltx_cite ltx_citemacro_cite">Lewis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib17" title="">2020</a>); Karpukhin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib13" title="">2020</a>)</cite> and public search service for effective retrievers <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib18" title="">2022</a>)</cite>. For example, <cite class="ltx_cite ltx_citemacro_citet">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib18" title="">2022</a>)</cite> retrieved Wikipedia passages through a database interface and then ranked them according to statistical relevance, calculated by TF-IDF, or semantic relevance as per cosine similarity. Similarly, <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib16" title="">Komeili et al.</a></cite> used a search engine API to retrieve relevant knowledge but first transformed the dialogue context into a natural search query using an encoder-decoder model before searching.</p>
</div>
<div class="ltx_para" id="S2.p3">
<p class="ltx_p" id="S2.p3.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S2.p3.1.1">Joint Optimisation of Retriever and Generator:</span> On the other hand, another thread of research studies has explored joint optimisation approaches. For instance, <cite class="ltx_cite ltx_citemacro_citet">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib29" title="">2023</a>)</cite> introduced a retriever-generator architecture that aims to improve the performance of Task-Oriented Dialogue (TOD) systems by using a dual-feedback mechanism. The retriever identifies relevant knowledge from a database, while the generator uses this information to create appropriate system responses. The feedback from the generator is further used as pseudo-labels to train the retriever to select pertinent information. <cite class="ltx_cite ltx_citemacro_citet">Shen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib28" title="">2023</a>)</cite> introduced a training method based on maximal marginal likelihood. This method jointly optimise a perceptive retriever and the response generation in a feedback loop. The proposed approach incorporates meta-knowledge, which guides the generator to improve the utilisation of knowledge and, consequently, the quality of the generated responses.  <cite class="ltx_cite ltx_citemacro_citet">Kang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib12" title="">2023</a>)</cite> further advance the retriever by proposing SUbgraph Retrieval-augmented GEneration (SURGE), which employed a graph neural network (GNN)-based context-relevant subgraph retriever. SURGE incorporates contrastive learning to optimise the latent representation space, ensuring that generated texts closely resemble the retrieved subgraphs.</p>
</div>
<div class="ltx_para" id="S2.p4">
<p class="ltx_p" id="S2.p4.1">Despite the richness of existing retrieval-augmented generation techniques for conversational systems, they commonly hypothesise that every conversation turn needs external knowledge. However, the necessity of augmenting every turn of the conversation with external knowledge remains questionable. A relevant thread of work that aims to answer this question is the introduction of the knowledge-seeking turn detection task using the DSTC-9 dataset <cite class="ltx_cite ltx_citemacro_cite">Kim et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib15" title="">2020</a>)</cite>, and the follow-up studies, such as <cite class="ltx_cite ltx_citemacro_cite">Hong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib8" title="">2023</a>); Jin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib11" title="">2021</a>)</cite>. However, this task is to identify the turns in conversations injected by human workers about knowledge enquiry instead of identifying the system responses that require knowledge augmentation for improvements. This research gap highlights the value and novelty of this study, which investigates the adaptive use of retrieval-augmented generation for advanced conversational systems.</p>
</div>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methodology</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Problem Formulation</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.15">This study addresses the challenge of effectively identifying conversation turns that require augmentation of external knowledge. In particular, we aim to develop a gate mechanism that dynamically determines when to search for external knowledge to ensure natural, relevant and contextually appropriate responses. First, we define the task of user-system conversation. Let <math alttext="D=\{d_{1},d_{2},...,d_{|D|}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.5"><semantics id="S3.SS1.p1.1.m1.5a"><mrow id="S3.SS1.p1.1.m1.5.5" xref="S3.SS1.p1.1.m1.5.5.cmml"><mi id="S3.SS1.p1.1.m1.5.5.5" xref="S3.SS1.p1.1.m1.5.5.5.cmml">D</mi><mo id="S3.SS1.p1.1.m1.5.5.4" xref="S3.SS1.p1.1.m1.5.5.4.cmml">=</mo><mrow id="S3.SS1.p1.1.m1.5.5.3.3" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml"><mo id="S3.SS1.p1.1.m1.5.5.3.3.4" stretchy="false" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml">{</mo><msub id="S3.SS1.p1.1.m1.3.3.1.1.1" xref="S3.SS1.p1.1.m1.3.3.1.1.1.cmml"><mi id="S3.SS1.p1.1.m1.3.3.1.1.1.2" xref="S3.SS1.p1.1.m1.3.3.1.1.1.2.cmml">d</mi><mn id="S3.SS1.p1.1.m1.3.3.1.1.1.3" xref="S3.SS1.p1.1.m1.3.3.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.1.m1.5.5.3.3.5" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml">,</mo><msub id="S3.SS1.p1.1.m1.4.4.2.2.2" xref="S3.SS1.p1.1.m1.4.4.2.2.2.cmml"><mi id="S3.SS1.p1.1.m1.4.4.2.2.2.2" xref="S3.SS1.p1.1.m1.4.4.2.2.2.2.cmml">d</mi><mn id="S3.SS1.p1.1.m1.4.4.2.2.2.3" xref="S3.SS1.p1.1.m1.4.4.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS1.p1.1.m1.5.5.3.3.6" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml">,</mo><mi id="S3.SS1.p1.1.m1.2.2" mathvariant="normal" xref="S3.SS1.p1.1.m1.2.2.cmml">…</mi><mo id="S3.SS1.p1.1.m1.5.5.3.3.7" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml">,</mo><msub id="S3.SS1.p1.1.m1.5.5.3.3.3" xref="S3.SS1.p1.1.m1.5.5.3.3.3.cmml"><mi id="S3.SS1.p1.1.m1.5.5.3.3.3.2" xref="S3.SS1.p1.1.m1.5.5.3.3.3.2.cmml">d</mi><mrow id="S3.SS1.p1.1.m1.1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.1.2.cmml"><mo id="S3.SS1.p1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.SS1.p1.1.m1.1.1.1.2.1.cmml">|</mo><mi id="S3.SS1.p1.1.m1.1.1.1.1" xref="S3.SS1.p1.1.m1.1.1.1.1.cmml">D</mi><mo id="S3.SS1.p1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.SS1.p1.1.m1.1.1.1.2.1.cmml">|</mo></mrow></msub><mo id="S3.SS1.p1.1.m1.5.5.3.3.8" stretchy="false" xref="S3.SS1.p1.1.m1.5.5.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.5b"><apply id="S3.SS1.p1.1.m1.5.5.cmml" xref="S3.SS1.p1.1.m1.5.5"><eq id="S3.SS1.p1.1.m1.5.5.4.cmml" xref="S3.SS1.p1.1.m1.5.5.4"></eq><ci id="S3.SS1.p1.1.m1.5.5.5.cmml" xref="S3.SS1.p1.1.m1.5.5.5">𝐷</ci><set id="S3.SS1.p1.1.m1.5.5.3.4.cmml" xref="S3.SS1.p1.1.m1.5.5.3.3"><apply id="S3.SS1.p1.1.m1.3.3.1.1.1.cmml" xref="S3.SS1.p1.1.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.3.3.1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.3.3.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.3.3.1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.3.3.1.1.1.2">𝑑</ci><cn id="S3.SS1.p1.1.m1.3.3.1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.3.3.1.1.1.3">1</cn></apply><apply id="S3.SS1.p1.1.m1.4.4.2.2.2.cmml" xref="S3.SS1.p1.1.m1.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.2.2.2.1.cmml" xref="S3.SS1.p1.1.m1.4.4.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.1.m1.4.4.2.2.2.2.cmml" xref="S3.SS1.p1.1.m1.4.4.2.2.2.2">𝑑</ci><cn id="S3.SS1.p1.1.m1.4.4.2.2.2.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.4.4.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.1.m1.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2">…</ci><apply id="S3.SS1.p1.1.m1.5.5.3.3.3.cmml" xref="S3.SS1.p1.1.m1.5.5.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.5.5.3.3.3.1.cmml" xref="S3.SS1.p1.1.m1.5.5.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.1.m1.5.5.3.3.3.2.cmml" xref="S3.SS1.p1.1.m1.5.5.3.3.3.2">𝑑</ci><apply id="S3.SS1.p1.1.m1.1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.1.3"><abs id="S3.SS1.p1.1.m1.1.1.1.2.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1.3.1"></abs><ci id="S3.SS1.p1.1.m1.1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1.1">𝐷</ci></apply></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.5c">D=\{d_{1},d_{2},...,d_{|D|}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.5d">italic_D = { italic_d start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_d start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , … , italic_d start_POSTSUBSCRIPT | italic_D | end_POSTSUBSCRIPT }</annotation></semantics></math> be a set of user-system dialogues, and each dialogue <math alttext="d" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><mi id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">italic_d</annotation></semantics></math> comprises a sequence of interactions between users and systems (i.e., <math alttext="d=\{u_{0},s_{0},u_{1},s_{1},...,u_{T},s_{T}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.7"><semantics id="S3.SS1.p1.3.m3.7a"><mrow id="S3.SS1.p1.3.m3.7.7" xref="S3.SS1.p1.3.m3.7.7.cmml"><mi id="S3.SS1.p1.3.m3.7.7.8" xref="S3.SS1.p1.3.m3.7.7.8.cmml">d</mi><mo id="S3.SS1.p1.3.m3.7.7.7" xref="S3.SS1.p1.3.m3.7.7.7.cmml">=</mo><mrow id="S3.SS1.p1.3.m3.7.7.6.6" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml"><mo id="S3.SS1.p1.3.m3.7.7.6.6.7" stretchy="false" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">{</mo><msub id="S3.SS1.p1.3.m3.2.2.1.1.1" xref="S3.SS1.p1.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.3.m3.2.2.1.1.1.2" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml">u</mi><mn id="S3.SS1.p1.3.m3.2.2.1.1.1.3" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.8" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><msub id="S3.SS1.p1.3.m3.3.3.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.3.m3.3.3.2.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml">s</mi><mn id="S3.SS1.p1.3.m3.3.3.2.2.2.3" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml">0</mn></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.9" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><msub id="S3.SS1.p1.3.m3.4.4.3.3.3" xref="S3.SS1.p1.3.m3.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.3.m3.4.4.3.3.3.2" xref="S3.SS1.p1.3.m3.4.4.3.3.3.2.cmml">u</mi><mn id="S3.SS1.p1.3.m3.4.4.3.3.3.3" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.cmml">1</mn></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.10" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><msub id="S3.SS1.p1.3.m3.5.5.4.4.4" xref="S3.SS1.p1.3.m3.5.5.4.4.4.cmml"><mi id="S3.SS1.p1.3.m3.5.5.4.4.4.2" xref="S3.SS1.p1.3.m3.5.5.4.4.4.2.cmml">s</mi><mn id="S3.SS1.p1.3.m3.5.5.4.4.4.3" xref="S3.SS1.p1.3.m3.5.5.4.4.4.3.cmml">1</mn></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.11" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><mi id="S3.SS1.p1.3.m3.1.1" mathvariant="normal" xref="S3.SS1.p1.3.m3.1.1.cmml">…</mi><mo id="S3.SS1.p1.3.m3.7.7.6.6.12" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><msub id="S3.SS1.p1.3.m3.6.6.5.5.5" xref="S3.SS1.p1.3.m3.6.6.5.5.5.cmml"><mi id="S3.SS1.p1.3.m3.6.6.5.5.5.2" xref="S3.SS1.p1.3.m3.6.6.5.5.5.2.cmml">u</mi><mi id="S3.SS1.p1.3.m3.6.6.5.5.5.3" xref="S3.SS1.p1.3.m3.6.6.5.5.5.3.cmml">T</mi></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.13" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">,</mo><msub id="S3.SS1.p1.3.m3.7.7.6.6.6" xref="S3.SS1.p1.3.m3.7.7.6.6.6.cmml"><mi id="S3.SS1.p1.3.m3.7.7.6.6.6.2" xref="S3.SS1.p1.3.m3.7.7.6.6.6.2.cmml">s</mi><mi id="S3.SS1.p1.3.m3.7.7.6.6.6.3" xref="S3.SS1.p1.3.m3.7.7.6.6.6.3.cmml">T</mi></msub><mo id="S3.SS1.p1.3.m3.7.7.6.6.14" stretchy="false" xref="S3.SS1.p1.3.m3.7.7.6.7.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.7b"><apply id="S3.SS1.p1.3.m3.7.7.cmml" xref="S3.SS1.p1.3.m3.7.7"><eq id="S3.SS1.p1.3.m3.7.7.7.cmml" xref="S3.SS1.p1.3.m3.7.7.7"></eq><ci id="S3.SS1.p1.3.m3.7.7.8.cmml" xref="S3.SS1.p1.3.m3.7.7.8">𝑑</ci><set id="S3.SS1.p1.3.m3.7.7.6.7.cmml" xref="S3.SS1.p1.3.m3.7.7.6.6"><apply id="S3.SS1.p1.3.m3.2.2.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2">𝑢</ci><cn id="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3">0</cn></apply><apply id="S3.SS1.p1.3.m3.3.3.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2">𝑠</ci><cn id="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3">0</cn></apply><apply id="S3.SS1.p1.3.m3.4.4.3.3.3.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.3.m3.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.2">𝑢</ci><cn id="S3.SS1.p1.3.m3.4.4.3.3.3.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3">1</cn></apply><apply id="S3.SS1.p1.3.m3.5.5.4.4.4.cmml" xref="S3.SS1.p1.3.m3.5.5.4.4.4"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.5.5.4.4.4.1.cmml" xref="S3.SS1.p1.3.m3.5.5.4.4.4">subscript</csymbol><ci id="S3.SS1.p1.3.m3.5.5.4.4.4.2.cmml" xref="S3.SS1.p1.3.m3.5.5.4.4.4.2">𝑠</ci><cn id="S3.SS1.p1.3.m3.5.5.4.4.4.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.5.5.4.4.4.3">1</cn></apply><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">…</ci><apply id="S3.SS1.p1.3.m3.6.6.5.5.5.cmml" xref="S3.SS1.p1.3.m3.6.6.5.5.5"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.6.6.5.5.5.1.cmml" xref="S3.SS1.p1.3.m3.6.6.5.5.5">subscript</csymbol><ci id="S3.SS1.p1.3.m3.6.6.5.5.5.2.cmml" xref="S3.SS1.p1.3.m3.6.6.5.5.5.2">𝑢</ci><ci id="S3.SS1.p1.3.m3.6.6.5.5.5.3.cmml" xref="S3.SS1.p1.3.m3.6.6.5.5.5.3">𝑇</ci></apply><apply id="S3.SS1.p1.3.m3.7.7.6.6.6.cmml" xref="S3.SS1.p1.3.m3.7.7.6.6.6"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.7.7.6.6.6.1.cmml" xref="S3.SS1.p1.3.m3.7.7.6.6.6">subscript</csymbol><ci id="S3.SS1.p1.3.m3.7.7.6.6.6.2.cmml" xref="S3.SS1.p1.3.m3.7.7.6.6.6.2">𝑠</ci><ci id="S3.SS1.p1.3.m3.7.7.6.6.6.3.cmml" xref="S3.SS1.p1.3.m3.7.7.6.6.6.3">𝑇</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.7c">d=\{u_{0},s_{0},u_{1},s_{1},...,u_{T},s_{T}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.7d">italic_d = { italic_u start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_u start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_u start_POSTSUBSCRIPT italic_T end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT italic_T end_POSTSUBSCRIPT }</annotation></semantics></math>) with varying lengths. Here, <math alttext="u_{t}" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><msub id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml"><mi id="S3.SS1.p1.4.m4.1.1.2" xref="S3.SS1.p1.4.m4.1.1.2.cmml">u</mi><mi id="S3.SS1.p1.4.m4.1.1.3" xref="S3.SS1.p1.4.m4.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><apply id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.2">𝑢</ci><ci id="S3.SS1.p1.4.m4.1.1.3.cmml" xref="S3.SS1.p1.4.m4.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">u_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">italic_u start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="s_{t}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m5.1"><semantics id="S3.SS1.p1.5.m5.1a"><msub id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><mi id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">s</mi><mi id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2">𝑠</ci><ci id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m5.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> denote the user utterance and system response at the <math alttext="t" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m6.1"><semantics id="S3.SS1.p1.6.m6.1a"><mi id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><ci id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m6.1d">italic_t</annotation></semantics></math>-th turn, respectively. The conversational context up to turn <math alttext="t" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m7.1"><semantics id="S3.SS1.p1.7.m7.1a"><mi id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><ci id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m7.1d">italic_t</annotation></semantics></math> can be formulated by aggregating the previous user-system interactions, i.e., <math alttext="c_{t}={u_{0},s_{0},..,u_{t}}" class="ltx_math_unparsed" display="inline" id="S3.SS1.p1.8.m8.1"><semantics id="S3.SS1.p1.8.m8.1a"><mrow id="S3.SS1.p1.8.m8.1b"><msub id="S3.SS1.p1.8.m8.1.1"><mi id="S3.SS1.p1.8.m8.1.1.2">c</mi><mi id="S3.SS1.p1.8.m8.1.1.3">t</mi></msub><mo id="S3.SS1.p1.8.m8.1.2">=</mo><msub id="S3.SS1.p1.8.m8.1.3"><mi id="S3.SS1.p1.8.m8.1.3.2">u</mi><mn id="S3.SS1.p1.8.m8.1.3.3">0</mn></msub><mo id="S3.SS1.p1.8.m8.1.4">,</mo><msub id="S3.SS1.p1.8.m8.1.5"><mi id="S3.SS1.p1.8.m8.1.5.2">s</mi><mn id="S3.SS1.p1.8.m8.1.5.3">0</mn></msub><mo id="S3.SS1.p1.8.m8.1.6">,</mo><mo id="S3.SS1.p1.8.m8.1.7" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS1.p1.8.m8.1.8" lspace="0.0835em" rspace="0.167em">.</mo><mo id="S3.SS1.p1.8.m8.1.9">,</mo><msub id="S3.SS1.p1.8.m8.1.10"><mi id="S3.SS1.p1.8.m8.1.10.2">u</mi><mi id="S3.SS1.p1.8.m8.1.10.3">t</mi></msub></mrow><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m8.1c">c_{t}={u_{0},s_{0},..,u_{t}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.8.m8.1d">italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = italic_u start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , . . , italic_u start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>. With this context information <math alttext="c_{t}" class="ltx_Math" display="inline" id="S3.SS1.p1.9.m9.1"><semantics id="S3.SS1.p1.9.m9.1a"><msub id="S3.SS1.p1.9.m9.1.1" xref="S3.SS1.p1.9.m9.1.1.cmml"><mi id="S3.SS1.p1.9.m9.1.1.2" xref="S3.SS1.p1.9.m9.1.1.2.cmml">c</mi><mi id="S3.SS1.p1.9.m9.1.1.3" xref="S3.SS1.p1.9.m9.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m9.1b"><apply id="S3.SS1.p1.9.m9.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.9.m9.1.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1">subscript</csymbol><ci id="S3.SS1.p1.9.m9.1.1.2.cmml" xref="S3.SS1.p1.9.m9.1.1.2">𝑐</ci><ci id="S3.SS1.p1.9.m9.1.1.3.cmml" xref="S3.SS1.p1.9.m9.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m9.1c">c_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.9.m9.1d">italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>, the conversation system can augment it with a list of retrieved external knowledge, <math alttext="e_{t,k}" class="ltx_Math" display="inline" id="S3.SS1.p1.10.m10.2"><semantics id="S3.SS1.p1.10.m10.2a"><msub id="S3.SS1.p1.10.m10.2.3" xref="S3.SS1.p1.10.m10.2.3.cmml"><mi id="S3.SS1.p1.10.m10.2.3.2" xref="S3.SS1.p1.10.m10.2.3.2.cmml">e</mi><mrow id="S3.SS1.p1.10.m10.2.2.2.4" xref="S3.SS1.p1.10.m10.2.2.2.3.cmml"><mi id="S3.SS1.p1.10.m10.1.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.1.cmml">t</mi><mo id="S3.SS1.p1.10.m10.2.2.2.4.1" xref="S3.SS1.p1.10.m10.2.2.2.3.cmml">,</mo><mi id="S3.SS1.p1.10.m10.2.2.2.2" xref="S3.SS1.p1.10.m10.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.10.m10.2b"><apply id="S3.SS1.p1.10.m10.2.3.cmml" xref="S3.SS1.p1.10.m10.2.3"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.2.3.1.cmml" xref="S3.SS1.p1.10.m10.2.3">subscript</csymbol><ci id="S3.SS1.p1.10.m10.2.3.2.cmml" xref="S3.SS1.p1.10.m10.2.3.2">𝑒</ci><list id="S3.SS1.p1.10.m10.2.2.2.3.cmml" xref="S3.SS1.p1.10.m10.2.2.2.4"><ci id="S3.SS1.p1.10.m10.1.1.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1">𝑡</ci><ci id="S3.SS1.p1.10.m10.2.2.2.2.cmml" xref="S3.SS1.p1.10.m10.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.10.m10.2c">e_{t,k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.10.m10.2d">italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT</annotation></semantics></math>, where <math alttext="k" class="ltx_Math" display="inline" id="S3.SS1.p1.11.m11.1"><semantics id="S3.SS1.p1.11.m11.1a"><mi id="S3.SS1.p1.11.m11.1.1" xref="S3.SS1.p1.11.m11.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.11.m11.1b"><ci id="S3.SS1.p1.11.m11.1.1.cmml" xref="S3.SS1.p1.11.m11.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.11.m11.1c">k</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.11.m11.1d">italic_k</annotation></semantics></math> represents the ranking cutoff for the retrieved knowledge. Hence, the binary gate mechanism proposed in this study, deciding the knowledge augmentation, can be formulated as <math alttext="f(c_{t})=\{0,1\}" class="ltx_Math" display="inline" id="S3.SS1.p1.12.m12.3"><semantics id="S3.SS1.p1.12.m12.3a"><mrow id="S3.SS1.p1.12.m12.3.3" xref="S3.SS1.p1.12.m12.3.3.cmml"><mrow id="S3.SS1.p1.12.m12.3.3.1" xref="S3.SS1.p1.12.m12.3.3.1.cmml"><mi id="S3.SS1.p1.12.m12.3.3.1.3" xref="S3.SS1.p1.12.m12.3.3.1.3.cmml">f</mi><mo id="S3.SS1.p1.12.m12.3.3.1.2" xref="S3.SS1.p1.12.m12.3.3.1.2.cmml">⁢</mo><mrow id="S3.SS1.p1.12.m12.3.3.1.1.1" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml"><mo id="S3.SS1.p1.12.m12.3.3.1.1.1.2" stretchy="false" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml">(</mo><msub id="S3.SS1.p1.12.m12.3.3.1.1.1.1" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml"><mi id="S3.SS1.p1.12.m12.3.3.1.1.1.1.2" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.2.cmml">c</mi><mi id="S3.SS1.p1.12.m12.3.3.1.1.1.1.3" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS1.p1.12.m12.3.3.1.1.1.3" stretchy="false" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p1.12.m12.3.3.2" xref="S3.SS1.p1.12.m12.3.3.2.cmml">=</mo><mrow id="S3.SS1.p1.12.m12.3.3.3.2" xref="S3.SS1.p1.12.m12.3.3.3.1.cmml"><mo id="S3.SS1.p1.12.m12.3.3.3.2.1" stretchy="false" xref="S3.SS1.p1.12.m12.3.3.3.1.cmml">{</mo><mn id="S3.SS1.p1.12.m12.1.1" xref="S3.SS1.p1.12.m12.1.1.cmml">0</mn><mo id="S3.SS1.p1.12.m12.3.3.3.2.2" xref="S3.SS1.p1.12.m12.3.3.3.1.cmml">,</mo><mn id="S3.SS1.p1.12.m12.2.2" xref="S3.SS1.p1.12.m12.2.2.cmml">1</mn><mo id="S3.SS1.p1.12.m12.3.3.3.2.3" stretchy="false" xref="S3.SS1.p1.12.m12.3.3.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.12.m12.3b"><apply id="S3.SS1.p1.12.m12.3.3.cmml" xref="S3.SS1.p1.12.m12.3.3"><eq id="S3.SS1.p1.12.m12.3.3.2.cmml" xref="S3.SS1.p1.12.m12.3.3.2"></eq><apply id="S3.SS1.p1.12.m12.3.3.1.cmml" xref="S3.SS1.p1.12.m12.3.3.1"><times id="S3.SS1.p1.12.m12.3.3.1.2.cmml" xref="S3.SS1.p1.12.m12.3.3.1.2"></times><ci id="S3.SS1.p1.12.m12.3.3.1.3.cmml" xref="S3.SS1.p1.12.m12.3.3.1.3">𝑓</ci><apply id="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.3.3.1.1.1.1.1.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.12.m12.3.3.1.1.1.1.2.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.2">𝑐</ci><ci id="S3.SS1.p1.12.m12.3.3.1.1.1.1.3.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1.1.3">𝑡</ci></apply></apply><set id="S3.SS1.p1.12.m12.3.3.3.1.cmml" xref="S3.SS1.p1.12.m12.3.3.3.2"><cn id="S3.SS1.p1.12.m12.1.1.cmml" type="integer" xref="S3.SS1.p1.12.m12.1.1">0</cn><cn id="S3.SS1.p1.12.m12.2.2.cmml" type="integer" xref="S3.SS1.p1.12.m12.2.2">1</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.12.m12.3c">f(c_{t})=\{0,1\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.12.m12.3d">italic_f ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) = { 0 , 1 }</annotation></semantics></math> or <math alttext="f(c_{t},e_{t,k})=\{0,1\}" class="ltx_Math" display="inline" id="S3.SS1.p1.13.m13.6"><semantics id="S3.SS1.p1.13.m13.6a"><mrow id="S3.SS1.p1.13.m13.6.6" xref="S3.SS1.p1.13.m13.6.6.cmml"><mrow id="S3.SS1.p1.13.m13.6.6.2" xref="S3.SS1.p1.13.m13.6.6.2.cmml"><mi id="S3.SS1.p1.13.m13.6.6.2.4" xref="S3.SS1.p1.13.m13.6.6.2.4.cmml">f</mi><mo id="S3.SS1.p1.13.m13.6.6.2.3" xref="S3.SS1.p1.13.m13.6.6.2.3.cmml">⁢</mo><mrow id="S3.SS1.p1.13.m13.6.6.2.2.2" xref="S3.SS1.p1.13.m13.6.6.2.2.3.cmml"><mo id="S3.SS1.p1.13.m13.6.6.2.2.2.3" stretchy="false" xref="S3.SS1.p1.13.m13.6.6.2.2.3.cmml">(</mo><msub id="S3.SS1.p1.13.m13.5.5.1.1.1.1" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1.cmml"><mi id="S3.SS1.p1.13.m13.5.5.1.1.1.1.2" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1.2.cmml">c</mi><mi id="S3.SS1.p1.13.m13.5.5.1.1.1.1.3" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS1.p1.13.m13.6.6.2.2.2.4" xref="S3.SS1.p1.13.m13.6.6.2.2.3.cmml">,</mo><msub id="S3.SS1.p1.13.m13.6.6.2.2.2.2" xref="S3.SS1.p1.13.m13.6.6.2.2.2.2.cmml"><mi id="S3.SS1.p1.13.m13.6.6.2.2.2.2.2" xref="S3.SS1.p1.13.m13.6.6.2.2.2.2.2.cmml">e</mi><mrow id="S3.SS1.p1.13.m13.2.2.2.4" xref="S3.SS1.p1.13.m13.2.2.2.3.cmml"><mi id="S3.SS1.p1.13.m13.1.1.1.1" xref="S3.SS1.p1.13.m13.1.1.1.1.cmml">t</mi><mo id="S3.SS1.p1.13.m13.2.2.2.4.1" xref="S3.SS1.p1.13.m13.2.2.2.3.cmml">,</mo><mi id="S3.SS1.p1.13.m13.2.2.2.2" xref="S3.SS1.p1.13.m13.2.2.2.2.cmml">k</mi></mrow></msub><mo id="S3.SS1.p1.13.m13.6.6.2.2.2.5" stretchy="false" xref="S3.SS1.p1.13.m13.6.6.2.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p1.13.m13.6.6.3" xref="S3.SS1.p1.13.m13.6.6.3.cmml">=</mo><mrow id="S3.SS1.p1.13.m13.6.6.4.2" xref="S3.SS1.p1.13.m13.6.6.4.1.cmml"><mo id="S3.SS1.p1.13.m13.6.6.4.2.1" stretchy="false" xref="S3.SS1.p1.13.m13.6.6.4.1.cmml">{</mo><mn id="S3.SS1.p1.13.m13.3.3" xref="S3.SS1.p1.13.m13.3.3.cmml">0</mn><mo id="S3.SS1.p1.13.m13.6.6.4.2.2" xref="S3.SS1.p1.13.m13.6.6.4.1.cmml">,</mo><mn id="S3.SS1.p1.13.m13.4.4" xref="S3.SS1.p1.13.m13.4.4.cmml">1</mn><mo id="S3.SS1.p1.13.m13.6.6.4.2.3" stretchy="false" xref="S3.SS1.p1.13.m13.6.6.4.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.13.m13.6b"><apply id="S3.SS1.p1.13.m13.6.6.cmml" xref="S3.SS1.p1.13.m13.6.6"><eq id="S3.SS1.p1.13.m13.6.6.3.cmml" xref="S3.SS1.p1.13.m13.6.6.3"></eq><apply id="S3.SS1.p1.13.m13.6.6.2.cmml" xref="S3.SS1.p1.13.m13.6.6.2"><times id="S3.SS1.p1.13.m13.6.6.2.3.cmml" xref="S3.SS1.p1.13.m13.6.6.2.3"></times><ci id="S3.SS1.p1.13.m13.6.6.2.4.cmml" xref="S3.SS1.p1.13.m13.6.6.2.4">𝑓</ci><interval closure="open" id="S3.SS1.p1.13.m13.6.6.2.2.3.cmml" xref="S3.SS1.p1.13.m13.6.6.2.2.2"><apply id="S3.SS1.p1.13.m13.5.5.1.1.1.1.cmml" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.13.m13.5.5.1.1.1.1.1.cmml" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.13.m13.5.5.1.1.1.1.2.cmml" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1.2">𝑐</ci><ci id="S3.SS1.p1.13.m13.5.5.1.1.1.1.3.cmml" xref="S3.SS1.p1.13.m13.5.5.1.1.1.1.3">𝑡</ci></apply><apply id="S3.SS1.p1.13.m13.6.6.2.2.2.2.cmml" xref="S3.SS1.p1.13.m13.6.6.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.13.m13.6.6.2.2.2.2.1.cmml" xref="S3.SS1.p1.13.m13.6.6.2.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.13.m13.6.6.2.2.2.2.2.cmml" xref="S3.SS1.p1.13.m13.6.6.2.2.2.2.2">𝑒</ci><list id="S3.SS1.p1.13.m13.2.2.2.3.cmml" xref="S3.SS1.p1.13.m13.2.2.2.4"><ci id="S3.SS1.p1.13.m13.1.1.1.1.cmml" xref="S3.SS1.p1.13.m13.1.1.1.1">𝑡</ci><ci id="S3.SS1.p1.13.m13.2.2.2.2.cmml" xref="S3.SS1.p1.13.m13.2.2.2.2">𝑘</ci></list></apply></interval></apply><set id="S3.SS1.p1.13.m13.6.6.4.1.cmml" xref="S3.SS1.p1.13.m13.6.6.4.2"><cn id="S3.SS1.p1.13.m13.3.3.cmml" type="integer" xref="S3.SS1.p1.13.m13.3.3">0</cn><cn id="S3.SS1.p1.13.m13.4.4.cmml" type="integer" xref="S3.SS1.p1.13.m13.4.4">1</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.13.m13.6c">f(c_{t},e_{t,k})=\{0,1\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.13.m13.6d">italic_f ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT ) = { 0 , 1 }</annotation></semantics></math> if the external knowledge <math alttext="e_{t,k}" class="ltx_Math" display="inline" id="S3.SS1.p1.14.m14.2"><semantics id="S3.SS1.p1.14.m14.2a"><msub id="S3.SS1.p1.14.m14.2.3" xref="S3.SS1.p1.14.m14.2.3.cmml"><mi id="S3.SS1.p1.14.m14.2.3.2" xref="S3.SS1.p1.14.m14.2.3.2.cmml">e</mi><mrow id="S3.SS1.p1.14.m14.2.2.2.4" xref="S3.SS1.p1.14.m14.2.2.2.3.cmml"><mi id="S3.SS1.p1.14.m14.1.1.1.1" xref="S3.SS1.p1.14.m14.1.1.1.1.cmml">t</mi><mo id="S3.SS1.p1.14.m14.2.2.2.4.1" xref="S3.SS1.p1.14.m14.2.2.2.3.cmml">,</mo><mi id="S3.SS1.p1.14.m14.2.2.2.2" xref="S3.SS1.p1.14.m14.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.14.m14.2b"><apply id="S3.SS1.p1.14.m14.2.3.cmml" xref="S3.SS1.p1.14.m14.2.3"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m14.2.3.1.cmml" xref="S3.SS1.p1.14.m14.2.3">subscript</csymbol><ci id="S3.SS1.p1.14.m14.2.3.2.cmml" xref="S3.SS1.p1.14.m14.2.3.2">𝑒</ci><list id="S3.SS1.p1.14.m14.2.2.2.3.cmml" xref="S3.SS1.p1.14.m14.2.2.2.4"><ci id="S3.SS1.p1.14.m14.1.1.1.1.cmml" xref="S3.SS1.p1.14.m14.1.1.1.1">𝑡</ci><ci id="S3.SS1.p1.14.m14.2.2.2.2.cmml" xref="S3.SS1.p1.14.m14.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.14.m14.2c">e_{t,k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.14.m14.2d">italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT</annotation></semantics></math> is considered. Then, the follow-up response generation function <math alttext="g(\cdot)" class="ltx_Math" display="inline" id="S3.SS1.p1.15.m15.1"><semantics id="S3.SS1.p1.15.m15.1a"><mrow id="S3.SS1.p1.15.m15.1.2" xref="S3.SS1.p1.15.m15.1.2.cmml"><mi id="S3.SS1.p1.15.m15.1.2.2" xref="S3.SS1.p1.15.m15.1.2.2.cmml">g</mi><mo id="S3.SS1.p1.15.m15.1.2.1" xref="S3.SS1.p1.15.m15.1.2.1.cmml">⁢</mo><mrow id="S3.SS1.p1.15.m15.1.2.3.2" xref="S3.SS1.p1.15.m15.1.2.cmml"><mo id="S3.SS1.p1.15.m15.1.2.3.2.1" stretchy="false" xref="S3.SS1.p1.15.m15.1.2.cmml">(</mo><mo id="S3.SS1.p1.15.m15.1.1" lspace="0em" rspace="0em" xref="S3.SS1.p1.15.m15.1.1.cmml">⋅</mo><mo id="S3.SS1.p1.15.m15.1.2.3.2.2" stretchy="false" xref="S3.SS1.p1.15.m15.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.15.m15.1b"><apply id="S3.SS1.p1.15.m15.1.2.cmml" xref="S3.SS1.p1.15.m15.1.2"><times id="S3.SS1.p1.15.m15.1.2.1.cmml" xref="S3.SS1.p1.15.m15.1.2.1"></times><ci id="S3.SS1.p1.15.m15.1.2.2.cmml" xref="S3.SS1.p1.15.m15.1.2.2">𝑔</ci><ci id="S3.SS1.p1.15.m15.1.1.cmml" xref="S3.SS1.p1.15.m15.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.15.m15.1c">g(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.15.m15.1d">italic_g ( ⋅ )</annotation></semantics></math> can be formulated as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="g(\cdot)=\begin{cases}g(c_{t},e_{t,k})&amp;\text{if $f(c_{t})$ or $f(c_{t},e_{t,k}%
)$}\\
g(c_{t})&amp;\text{otherwise}.\end{cases}" class="ltx_Math" display="block" id="S3.E1.m1.6"><semantics id="S3.E1.m1.6a"><mrow id="S3.E1.m1.6.7" xref="S3.E1.m1.6.7.cmml"><mrow id="S3.E1.m1.6.7.2" xref="S3.E1.m1.6.7.2.cmml"><mi id="S3.E1.m1.6.7.2.2" xref="S3.E1.m1.6.7.2.2.cmml">g</mi><mo id="S3.E1.m1.6.7.2.1" xref="S3.E1.m1.6.7.2.1.cmml">⁢</mo><mrow id="S3.E1.m1.6.7.2.3.2" xref="S3.E1.m1.6.7.2.cmml"><mo id="S3.E1.m1.6.7.2.3.2.1" stretchy="false" xref="S3.E1.m1.6.7.2.cmml">(</mo><mo id="S3.E1.m1.6.6" lspace="0em" rspace="0em" xref="S3.E1.m1.6.6.cmml">⋅</mo><mo id="S3.E1.m1.6.7.2.3.2.2" stretchy="false" xref="S3.E1.m1.6.7.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.6.7.1" xref="S3.E1.m1.6.7.1.cmml">=</mo><mrow id="S3.E1.m1.5.5" xref="S3.E1.m1.6.7.3.1.cmml"><mo id="S3.E1.m1.5.5.6" xref="S3.E1.m1.6.7.3.1.1.cmml">{</mo><mtable columnspacing="5pt" displaystyle="true" id="S3.E1.m1.5.5.5" rowspacing="0pt" xref="S3.E1.m1.6.7.3.1.cmml"><mtr id="S3.E1.m1.5.5.5a" xref="S3.E1.m1.6.7.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.5.5.5b" xref="S3.E1.m1.6.7.3.1.cmml"><mrow id="S3.E1.m1.3.3.3.3.3.1" xref="S3.E1.m1.3.3.3.3.3.1.cmml"><mi id="S3.E1.m1.3.3.3.3.3.1.6" xref="S3.E1.m1.3.3.3.3.3.1.6.cmml">g</mi><mo id="S3.E1.m1.3.3.3.3.3.1.5" xref="S3.E1.m1.3.3.3.3.3.1.5.cmml">⁢</mo><mrow id="S3.E1.m1.3.3.3.3.3.1.4.2" xref="S3.E1.m1.3.3.3.3.3.1.4.3.cmml"><mo id="S3.E1.m1.3.3.3.3.3.1.4.2.3" stretchy="false" xref="S3.E1.m1.3.3.3.3.3.1.4.3.cmml">(</mo><msub id="S3.E1.m1.3.3.3.3.3.1.3.1.1" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1.cmml"><mi id="S3.E1.m1.3.3.3.3.3.1.3.1.1.2" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1.2.cmml">c</mi><mi id="S3.E1.m1.3.3.3.3.3.1.3.1.1.3" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1.3.cmml">t</mi></msub><mo id="S3.E1.m1.3.3.3.3.3.1.4.2.4" xref="S3.E1.m1.3.3.3.3.3.1.4.3.cmml">,</mo><msub id="S3.E1.m1.3.3.3.3.3.1.4.2.2" xref="S3.E1.m1.3.3.3.3.3.1.4.2.2.cmml"><mi id="S3.E1.m1.3.3.3.3.3.1.4.2.2.2" xref="S3.E1.m1.3.3.3.3.3.1.4.2.2.2.cmml">e</mi><mrow id="S3.E1.m1.3.3.3.3.3.1.2.2.4" xref="S3.E1.m1.3.3.3.3.3.1.2.2.3.cmml"><mi id="S3.E1.m1.3.3.3.3.3.1.1.1.1" xref="S3.E1.m1.3.3.3.3.3.1.1.1.1.cmml">t</mi><mo id="S3.E1.m1.3.3.3.3.3.1.2.2.4.1" xref="S3.E1.m1.3.3.3.3.3.1.2.2.3.cmml">,</mo><mi id="S3.E1.m1.3.3.3.3.3.1.2.2.2" xref="S3.E1.m1.3.3.3.3.3.1.2.2.2.cmml">k</mi></mrow></msub><mo id="S3.E1.m1.3.3.3.3.3.1.4.2.5" stretchy="false" xref="S3.E1.m1.3.3.3.3.3.1.4.3.cmml">)</mo></mrow></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.5.5.5c" xref="S3.E1.m1.6.7.3.1.cmml"><mrow id="S3.E1.m1.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2c.cmml"><mtext id="S3.E1.m1.2.2.2.2.2.2a" xref="S3.E1.m1.2.2.2.2.2.2c.cmml">if </mtext><mrow id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml">f</mi><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.cmml"><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.cmml">(</mo><msub id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.cmml"><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.2" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.cmml">)</mo></mrow></mrow><mtext id="S3.E1.m1.2.2.2.2.2.2b" xref="S3.E1.m1.2.2.2.2.2.2c.cmml"> or </mtext><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.4" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.4.cmml">f</mi><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.3" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.3.cmml">⁢</mo><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.cmml"><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.1" stretchy="false" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.cmml">(</mo><msub id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.2.cmml">c</mi><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.3" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.3.cmml">t</mi></msub><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.cmml">,</mo><msub id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.2.cmml">e</mi><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.1.1.1.1" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.1.1.1.1.cmml">t</mi><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4.1" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4.cmml">,</mo><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.2.cmml">k</mi></mrow></msub><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.3" stretchy="false" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.cmml">)</mo></mrow></mrow></mrow></mtd></mtr><mtr id="S3.E1.m1.5.5.5d" xref="S3.E1.m1.6.7.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.5.5.5e" xref="S3.E1.m1.6.7.3.1.cmml"><mrow id="S3.E1.m1.4.4.4.4.1.1" xref="S3.E1.m1.4.4.4.4.1.1.cmml"><mi id="S3.E1.m1.4.4.4.4.1.1.3" xref="S3.E1.m1.4.4.4.4.1.1.3.cmml">g</mi><mo id="S3.E1.m1.4.4.4.4.1.1.2" xref="S3.E1.m1.4.4.4.4.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.4.4.4.4.1.1.1.1" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.cmml"><mo id="S3.E1.m1.4.4.4.4.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.cmml">(</mo><msub id="S3.E1.m1.4.4.4.4.1.1.1.1.1" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.cmml"><mi id="S3.E1.m1.4.4.4.4.1.1.1.1.1.2" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E1.m1.4.4.4.4.1.1.1.1.1.3" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.E1.m1.4.4.4.4.1.1.1.1.3" stretchy="false" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.cmml">)</mo></mrow></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.5.5.5f" xref="S3.E1.m1.6.7.3.1.cmml"><mrow id="S3.E1.m1.5.5.5.5.2.1.3" xref="S3.E1.m1.5.5.5.5.2.1.1a.cmml"><mtext id="S3.E1.m1.5.5.5.5.2.1.1" xref="S3.E1.m1.5.5.5.5.2.1.1.cmml">otherwise</mtext><mo id="S3.E1.m1.5.5.5.5.2.1.3.1" lspace="0em" xref="S3.E1.m1.5.5.5.5.2.1.1a.cmml">.</mo></mrow></mtd></mtr></mtable></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.6b"><apply id="S3.E1.m1.6.7.cmml" xref="S3.E1.m1.6.7"><eq id="S3.E1.m1.6.7.1.cmml" xref="S3.E1.m1.6.7.1"></eq><apply id="S3.E1.m1.6.7.2.cmml" xref="S3.E1.m1.6.7.2"><times id="S3.E1.m1.6.7.2.1.cmml" xref="S3.E1.m1.6.7.2.1"></times><ci id="S3.E1.m1.6.7.2.2.cmml" xref="S3.E1.m1.6.7.2.2">𝑔</ci><ci id="S3.E1.m1.6.6.cmml" xref="S3.E1.m1.6.6">⋅</ci></apply><apply id="S3.E1.m1.6.7.3.1.cmml" xref="S3.E1.m1.5.5"><csymbol cd="latexml" id="S3.E1.m1.6.7.3.1.1.cmml" xref="S3.E1.m1.5.5.6">cases</csymbol><apply id="S3.E1.m1.3.3.3.3.3.1.cmml" xref="S3.E1.m1.3.3.3.3.3.1"><times id="S3.E1.m1.3.3.3.3.3.1.5.cmml" xref="S3.E1.m1.3.3.3.3.3.1.5"></times><ci id="S3.E1.m1.3.3.3.3.3.1.6.cmml" xref="S3.E1.m1.3.3.3.3.3.1.6">𝑔</ci><interval closure="open" id="S3.E1.m1.3.3.3.3.3.1.4.3.cmml" xref="S3.E1.m1.3.3.3.3.3.1.4.2"><apply id="S3.E1.m1.3.3.3.3.3.1.3.1.1.cmml" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.3.3.3.1.3.1.1.1.cmml" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.3.3.3.1.3.1.1.2.cmml" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1.2">𝑐</ci><ci id="S3.E1.m1.3.3.3.3.3.1.3.1.1.3.cmml" xref="S3.E1.m1.3.3.3.3.3.1.3.1.1.3">𝑡</ci></apply><apply id="S3.E1.m1.3.3.3.3.3.1.4.2.2.cmml" xref="S3.E1.m1.3.3.3.3.3.1.4.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.3.3.3.1.4.2.2.1.cmml" xref="S3.E1.m1.3.3.3.3.3.1.4.2.2">subscript</csymbol><ci id="S3.E1.m1.3.3.3.3.3.1.4.2.2.2.cmml" xref="S3.E1.m1.3.3.3.3.3.1.4.2.2.2">𝑒</ci><list id="S3.E1.m1.3.3.3.3.3.1.2.2.3.cmml" xref="S3.E1.m1.3.3.3.3.3.1.2.2.4"><ci id="S3.E1.m1.3.3.3.3.3.1.1.1.1.cmml" xref="S3.E1.m1.3.3.3.3.3.1.1.1.1">𝑡</ci><ci id="S3.E1.m1.3.3.3.3.3.1.2.2.2.cmml" xref="S3.E1.m1.3.3.3.3.3.1.2.2.2">𝑘</ci></list></apply></interval></apply><ci id="S3.E1.m1.2.2.2.2.2.2c.cmml" xref="S3.E1.m1.2.2.2.2.2.2"><mrow id="S3.E1.m1.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2"><mtext id="S3.E1.m1.2.2.2.2.2.2a.cmml" xref="S3.E1.m1.2.2.2.2.2.2">if </mtext><mrow id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1"><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.3">f</mi><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.2">⁢</mo><mrow id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3"><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.1.cmml" stretchy="false" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3">(</mo><msub id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3"><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.2">c</mi><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.1.1.3">t</mi></msub><mo id="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3.2.cmml" stretchy="false" xref="S3.E1.m1.1.1.1.1.1.1.1.1.m1.1.1.1.3">)</mo></mrow></mrow><mtext id="S3.E1.m1.2.2.2.2.2.2b.cmml" xref="S3.E1.m1.2.2.2.2.2.2"> or </mtext><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.4.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.4">f</mi><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.3">⁢</mo><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4"><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.1.cmml" stretchy="false" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4">(</mo><msub id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.2">c</mi><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.3.3.1.1.1.3">t</mi></msub><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4">,</mo><msub id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.2.2.2">e</mi><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.1.1.1.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.1.1.1.1">t</mi><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.4">,</mo><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.2.2.2.2">k</mi></mrow></msub><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4.3.cmml" stretchy="false" xref="S3.E1.m1.2.2.2.2.2.2.2.2.m2.4.4.2.4">)</mo></mrow></mrow></mrow></ci><apply id="S3.E1.m1.4.4.4.4.1.1.cmml" xref="S3.E1.m1.4.4.4.4.1.1"><times id="S3.E1.m1.4.4.4.4.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.1.1.2"></times><ci id="S3.E1.m1.4.4.4.4.1.1.3.cmml" xref="S3.E1.m1.4.4.4.4.1.1.3">𝑔</ci><apply id="S3.E1.m1.4.4.4.4.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.4.4.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.4.4.4.4.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.2">𝑐</ci><ci id="S3.E1.m1.4.4.4.4.1.1.1.1.1.3.cmml" xref="S3.E1.m1.4.4.4.4.1.1.1.1.1.3">𝑡</ci></apply></apply><ci id="S3.E1.m1.5.5.5.5.2.1.1a.cmml" xref="S3.E1.m1.5.5.5.5.2.1.3"><mtext id="S3.E1.m1.5.5.5.5.2.1.1.cmml" xref="S3.E1.m1.5.5.5.5.2.1.1">otherwise</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.6c">g(\cdot)=\begin{cases}g(c_{t},e_{t,k})&amp;\text{if $f(c_{t})$ or $f(c_{t},e_{t,k}%
)$}\\
g(c_{t})&amp;\text{otherwise}.\end{cases}</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.6d">italic_g ( ⋅ ) = { start_ROW start_CELL italic_g ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT ) end_CELL start_CELL if italic_f ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) or italic_f ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT ) end_CELL end_ROW start_ROW start_CELL italic_g ( italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) end_CELL start_CELL otherwise . end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.16">Hence, by evaluating and estimating the necessity of augmenting with external knowledge, we dynamically update the conversational response generation accordingly.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>RAGate Gate Mechanism</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">To effectively estimate the need to use external knowledge and implement adaptive retrieval augmented generation for a conversation system, we introduce our proposed gate mechanism, RAGate, that uses the conversational context and, optionally, the retrieved external knowledge to predict the binary choice of using external knowledge. In particular, we explore three RAGate variants that are implemented by the use of Large Language Models (LLMs) with devised prompts, with parameter efficient fine-tuning (e.g., QLoRA <cite class="ltx_cite ltx_citemacro_cite">Dettmers et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib4" title="">2024</a>)</cite>) and the construction of an end-to-end multi-head attention encoder. This exploration is motivated by the recent advancement of transformer-structured neural models in natural language processing. In Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S1.F2" title="Figure 2 ‣ 1 Introduction ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">2</span></a>, we illustrate the application of RAGate and its three variants. We describe each of these three variants to clarify the use of RAGate:</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.5"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S3.SS2.p2.5.1">RAGate-Prompt: </span> As denoted by <cite class="ltx_cite ltx_citemacro_citet">Arora et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib1" title="">2022</a>)</cite>, a language model can effectively adapt to new tasks by using a natural language prompt that explains the process to address the tasks without extra training. Hence, we can formulate a gate function <math alttext="f(\cdot)" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mrow id="S3.SS2.p2.1.m1.1.2" xref="S3.SS2.p2.1.m1.1.2.cmml"><mi id="S3.SS2.p2.1.m1.1.2.2" xref="S3.SS2.p2.1.m1.1.2.2.cmml">f</mi><mo id="S3.SS2.p2.1.m1.1.2.1" xref="S3.SS2.p2.1.m1.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.p2.1.m1.1.2.3.2" xref="S3.SS2.p2.1.m1.1.2.cmml"><mo id="S3.SS2.p2.1.m1.1.2.3.2.1" stretchy="false" xref="S3.SS2.p2.1.m1.1.2.cmml">(</mo><mo id="S3.SS2.p2.1.m1.1.1" lspace="0em" rspace="0em" xref="S3.SS2.p2.1.m1.1.1.cmml">⋅</mo><mo id="S3.SS2.p2.1.m1.1.2.3.2.2" stretchy="false" xref="S3.SS2.p2.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.2"><times id="S3.SS2.p2.1.m1.1.2.1.cmml" xref="S3.SS2.p2.1.m1.1.2.1"></times><ci id="S3.SS2.p2.1.m1.1.2.2.cmml" xref="S3.SS2.p2.1.m1.1.2.2">𝑓</ci><ci id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">f(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_f ( ⋅ )</annotation></semantics></math> as <math alttext="f(y|c_{t})=f(y|\Theta,c_{t},p)" class="ltx_Math" display="inline" id="S3.SS2.p2.2.m2.4"><semantics id="S3.SS2.p2.2.m2.4a"><mrow id="S3.SS2.p2.2.m2.4.4" xref="S3.SS2.p2.2.m2.4.4.cmml"><mrow id="S3.SS2.p2.2.m2.3.3.1" xref="S3.SS2.p2.2.m2.3.3.1.cmml"><mi id="S3.SS2.p2.2.m2.3.3.1.3" xref="S3.SS2.p2.2.m2.3.3.1.3.cmml">f</mi><mo id="S3.SS2.p2.2.m2.3.3.1.2" xref="S3.SS2.p2.2.m2.3.3.1.2.cmml">⁢</mo><mrow id="S3.SS2.p2.2.m2.3.3.1.1.1" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.cmml"><mo id="S3.SS2.p2.2.m2.3.3.1.1.1.2" stretchy="false" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p2.2.m2.3.3.1.1.1.1" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.cmml"><mi id="S3.SS2.p2.2.m2.3.3.1.1.1.1.2" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS2.p2.2.m2.3.3.1.1.1.1.1" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.1.cmml">|</mo><msub id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.cmml"><mi id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.2" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.2.cmml">c</mi><mi id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.3" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS2.p2.2.m2.3.3.1.1.1.3" stretchy="false" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p2.2.m2.4.4.3" xref="S3.SS2.p2.2.m2.4.4.3.cmml">=</mo><mrow id="S3.SS2.p2.2.m2.4.4.2" xref="S3.SS2.p2.2.m2.4.4.2.cmml"><mi id="S3.SS2.p2.2.m2.4.4.2.3" xref="S3.SS2.p2.2.m2.4.4.2.3.cmml">f</mi><mo id="S3.SS2.p2.2.m2.4.4.2.2" xref="S3.SS2.p2.2.m2.4.4.2.2.cmml">⁢</mo><mrow id="S3.SS2.p2.2.m2.4.4.2.1.1" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.cmml"><mo id="S3.SS2.p2.2.m2.4.4.2.1.1.2" stretchy="false" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.cmml">(</mo><mrow id="S3.SS2.p2.2.m2.4.4.2.1.1.1" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.cmml"><mi id="S3.SS2.p2.2.m2.4.4.2.1.1.1.3" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.SS2.p2.2.m2.4.4.2.1.1.1.2" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.2.cmml">|</mo><mrow id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.2.cmml"><mi id="S3.SS2.p2.2.m2.1.1" mathvariant="normal" xref="S3.SS2.p2.2.m2.1.1.cmml">Θ</mi><mo id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.2" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.2.cmml">,</mo><msub id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.2" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.3" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.3" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.2.cmml">,</mo><mi id="S3.SS2.p2.2.m2.2.2" xref="S3.SS2.p2.2.m2.2.2.cmml">p</mi></mrow></mrow><mo id="S3.SS2.p2.2.m2.4.4.2.1.1.3" stretchy="false" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.4b"><apply id="S3.SS2.p2.2.m2.4.4.cmml" xref="S3.SS2.p2.2.m2.4.4"><eq id="S3.SS2.p2.2.m2.4.4.3.cmml" xref="S3.SS2.p2.2.m2.4.4.3"></eq><apply id="S3.SS2.p2.2.m2.3.3.1.cmml" xref="S3.SS2.p2.2.m2.3.3.1"><times id="S3.SS2.p2.2.m2.3.3.1.2.cmml" xref="S3.SS2.p2.2.m2.3.3.1.2"></times><ci id="S3.SS2.p2.2.m2.3.3.1.3.cmml" xref="S3.SS2.p2.2.m2.3.3.1.3">𝑓</ci><apply id="S3.SS2.p2.2.m2.3.3.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1"><csymbol cd="latexml" id="S3.SS2.p2.2.m2.3.3.1.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.1">conditional</csymbol><ci id="S3.SS2.p2.2.m2.3.3.1.1.1.1.2.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.2">𝑦</ci><apply id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.1.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3">subscript</csymbol><ci id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.2.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.2">𝑐</ci><ci id="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.3.cmml" xref="S3.SS2.p2.2.m2.3.3.1.1.1.1.3.3">𝑡</ci></apply></apply></apply><apply id="S3.SS2.p2.2.m2.4.4.2.cmml" xref="S3.SS2.p2.2.m2.4.4.2"><times id="S3.SS2.p2.2.m2.4.4.2.2.cmml" xref="S3.SS2.p2.2.m2.4.4.2.2"></times><ci id="S3.SS2.p2.2.m2.4.4.2.3.cmml" xref="S3.SS2.p2.2.m2.4.4.2.3">𝑓</ci><apply id="S3.SS2.p2.2.m2.4.4.2.1.1.1.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1"><csymbol cd="latexml" id="S3.SS2.p2.2.m2.4.4.2.1.1.1.2.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.2">conditional</csymbol><ci id="S3.SS2.p2.2.m2.4.4.2.1.1.1.3.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.3">𝑦</ci><list id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.2.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1"><ci id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">Θ</ci><apply id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p2.2.m2.4.4.2.1.1.1.1.1.1.3">𝑡</ci></apply><ci id="S3.SS2.p2.2.m2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2">𝑝</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.4c">f(y|c_{t})=f(y|\Theta,c_{t},p)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.2.m2.4d">italic_f ( italic_y | italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) = italic_f ( italic_y | roman_Θ , italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_p )</annotation></semantics></math>, where <math alttext="\Theta" class="ltx_Math" display="inline" id="S3.SS2.p2.3.m3.1"><semantics id="S3.SS2.p2.3.m3.1a"><mi id="S3.SS2.p2.3.m3.1.1" mathvariant="normal" xref="S3.SS2.p2.3.m3.1.1.cmml">Θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><ci id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1">Θ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">\Theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.3.m3.1d">roman_Θ</annotation></semantics></math> denotes the used language model with its pre-trained weights and <math alttext="p" class="ltx_Math" display="inline" id="S3.SS2.p2.4.m4.1"><semantics id="S3.SS2.p2.4.m4.1a"><mi id="S3.SS2.p2.4.m4.1.1" xref="S3.SS2.p2.4.m4.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.4.m4.1b"><ci id="S3.SS2.p2.4.m4.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.4.m4.1c">p</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.4.m4.1d">italic_p</annotation></semantics></math> is the devised natural language prompt. Alternatively, if the retrieved knowledge is also involved in prediction, we have <math alttext="f(y|c_{t})=f(y|\Theta,c_{t},e_{t,k},p)" class="ltx_Math" display="inline" id="S3.SS2.p2.5.m5.6"><semantics id="S3.SS2.p2.5.m5.6a"><mrow id="S3.SS2.p2.5.m5.6.6" xref="S3.SS2.p2.5.m5.6.6.cmml"><mrow id="S3.SS2.p2.5.m5.5.5.1" xref="S3.SS2.p2.5.m5.5.5.1.cmml"><mi id="S3.SS2.p2.5.m5.5.5.1.3" xref="S3.SS2.p2.5.m5.5.5.1.3.cmml">f</mi><mo id="S3.SS2.p2.5.m5.5.5.1.2" xref="S3.SS2.p2.5.m5.5.5.1.2.cmml">⁢</mo><mrow id="S3.SS2.p2.5.m5.5.5.1.1.1" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.cmml"><mo id="S3.SS2.p2.5.m5.5.5.1.1.1.2" stretchy="false" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p2.5.m5.5.5.1.1.1.1" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.cmml"><mi id="S3.SS2.p2.5.m5.5.5.1.1.1.1.2" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS2.p2.5.m5.5.5.1.1.1.1.1" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.1.cmml">|</mo><msub id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.cmml"><mi id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.2" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.2.cmml">c</mi><mi id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.3" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS2.p2.5.m5.5.5.1.1.1.3" stretchy="false" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p2.5.m5.6.6.3" xref="S3.SS2.p2.5.m5.6.6.3.cmml">=</mo><mrow id="S3.SS2.p2.5.m5.6.6.2" xref="S3.SS2.p2.5.m5.6.6.2.cmml"><mi id="S3.SS2.p2.5.m5.6.6.2.3" xref="S3.SS2.p2.5.m5.6.6.2.3.cmml">f</mi><mo id="S3.SS2.p2.5.m5.6.6.2.2" xref="S3.SS2.p2.5.m5.6.6.2.2.cmml">⁢</mo><mrow id="S3.SS2.p2.5.m5.6.6.2.1.1" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.cmml"><mo id="S3.SS2.p2.5.m5.6.6.2.1.1.2" stretchy="false" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.cmml">(</mo><mrow id="S3.SS2.p2.5.m5.6.6.2.1.1.1" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.cmml"><mi id="S3.SS2.p2.5.m5.6.6.2.1.1.1.4" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.4.cmml">y</mi><mo fence="false" id="S3.SS2.p2.5.m5.6.6.2.1.1.1.3" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.3.cmml">|</mo><mrow id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.3.cmml"><mi id="S3.SS2.p2.5.m5.3.3" mathvariant="normal" xref="S3.SS2.p2.5.m5.3.3.cmml">Θ</mi><mo id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.3" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.3.cmml">,</mo><msub id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.2" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.3" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.4" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.3.cmml">,</mo><msub id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.cmml"><mi id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.2" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.2.cmml">e</mi><mrow id="S3.SS2.p2.5.m5.2.2.2.4" xref="S3.SS2.p2.5.m5.2.2.2.3.cmml"><mi id="S3.SS2.p2.5.m5.1.1.1.1" xref="S3.SS2.p2.5.m5.1.1.1.1.cmml">t</mi><mo id="S3.SS2.p2.5.m5.2.2.2.4.1" xref="S3.SS2.p2.5.m5.2.2.2.3.cmml">,</mo><mi id="S3.SS2.p2.5.m5.2.2.2.2" xref="S3.SS2.p2.5.m5.2.2.2.2.cmml">k</mi></mrow></msub><mo id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.5" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.3.cmml">,</mo><mi id="S3.SS2.p2.5.m5.4.4" xref="S3.SS2.p2.5.m5.4.4.cmml">p</mi></mrow></mrow><mo id="S3.SS2.p2.5.m5.6.6.2.1.1.3" stretchy="false" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.5.m5.6b"><apply id="S3.SS2.p2.5.m5.6.6.cmml" xref="S3.SS2.p2.5.m5.6.6"><eq id="S3.SS2.p2.5.m5.6.6.3.cmml" xref="S3.SS2.p2.5.m5.6.6.3"></eq><apply id="S3.SS2.p2.5.m5.5.5.1.cmml" xref="S3.SS2.p2.5.m5.5.5.1"><times id="S3.SS2.p2.5.m5.5.5.1.2.cmml" xref="S3.SS2.p2.5.m5.5.5.1.2"></times><ci id="S3.SS2.p2.5.m5.5.5.1.3.cmml" xref="S3.SS2.p2.5.m5.5.5.1.3">𝑓</ci><apply id="S3.SS2.p2.5.m5.5.5.1.1.1.1.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1"><csymbol cd="latexml" id="S3.SS2.p2.5.m5.5.5.1.1.1.1.1.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.1">conditional</csymbol><ci id="S3.SS2.p2.5.m5.5.5.1.1.1.1.2.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.2">𝑦</ci><apply id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.1.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3">subscript</csymbol><ci id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.2.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.2">𝑐</ci><ci id="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.3.cmml" xref="S3.SS2.p2.5.m5.5.5.1.1.1.1.3.3">𝑡</ci></apply></apply></apply><apply id="S3.SS2.p2.5.m5.6.6.2.cmml" xref="S3.SS2.p2.5.m5.6.6.2"><times id="S3.SS2.p2.5.m5.6.6.2.2.cmml" xref="S3.SS2.p2.5.m5.6.6.2.2"></times><ci id="S3.SS2.p2.5.m5.6.6.2.3.cmml" xref="S3.SS2.p2.5.m5.6.6.2.3">𝑓</ci><apply id="S3.SS2.p2.5.m5.6.6.2.1.1.1.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1"><csymbol cd="latexml" id="S3.SS2.p2.5.m5.6.6.2.1.1.1.3.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.3">conditional</csymbol><ci id="S3.SS2.p2.5.m5.6.6.2.1.1.1.4.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.4">𝑦</ci><list id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.3.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2"><ci id="S3.SS2.p2.5.m5.3.3.cmml" xref="S3.SS2.p2.5.m5.3.3">Θ</ci><apply id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.1.1.1.3">𝑡</ci></apply><apply id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.1.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2">subscript</csymbol><ci id="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.2.cmml" xref="S3.SS2.p2.5.m5.6.6.2.1.1.1.2.2.2.2">𝑒</ci><list id="S3.SS2.p2.5.m5.2.2.2.3.cmml" xref="S3.SS2.p2.5.m5.2.2.2.4"><ci id="S3.SS2.p2.5.m5.1.1.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1.1.1">𝑡</ci><ci id="S3.SS2.p2.5.m5.2.2.2.2.cmml" xref="S3.SS2.p2.5.m5.2.2.2.2">𝑘</ci></list></apply><ci id="S3.SS2.p2.5.m5.4.4.cmml" xref="S3.SS2.p2.5.m5.4.4">𝑝</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.5.m5.6c">f(y|c_{t})=f(y|\Theta,c_{t},e_{t,k},p)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.5.m5.6d">italic_f ( italic_y | italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) = italic_f ( italic_y | roman_Θ , italic_c start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_e start_POSTSUBSCRIPT italic_t , italic_k end_POSTSUBSCRIPT , italic_p )</annotation></semantics></math>. Specifically, we explore two types of prompts: zero-shot and in-context learning. Zero-shot prompts describe the task that uses the conversational context and, optionally, the retrieved knowledge to generate a response with binary feedback. As for the in-context learning prompts, we augment the zero-shot prompts with illustrative examples. We show the set of prompts in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A1" title="Appendix A Prompts for RAGate-Prompt ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">A</span></a>.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.8"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S3.SS2.p3.8.1">RAGate-PEFT: </span> Despite the high adaptability of the language model with devised prompts, we further explored the use of instruction tuning on language models with a parameter-efficient fine-tuning method (i.e., QLoRA <cite class="ltx_cite ltx_citemacro_cite">Dettmers et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib4" title="">2024</a>)</cite>) to meet the goal of an effective gate function. QLoRA is built upon the known Low-rank Adapter (LoRA) <cite class="ltx_cite ltx_citemacro_cite">Hu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib9" title="">2021</a>)</cite>, which keeps the pre-trained weight matrix <math alttext="W_{0}" class="ltx_Math" display="inline" id="S3.SS2.p3.1.m1.1"><semantics id="S3.SS2.p3.1.m1.1a"><msub id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml"><mi id="S3.SS2.p3.1.m1.1.1.2" xref="S3.SS2.p3.1.m1.1.1.2.cmml">W</mi><mn id="S3.SS2.p3.1.m1.1.1.3" xref="S3.SS2.p3.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><apply id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.1.m1.1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p3.1.m1.1.1.2.cmml" xref="S3.SS2.p3.1.m1.1.1.2">𝑊</ci><cn id="S3.SS2.p3.1.m1.1.1.3.cmml" type="integer" xref="S3.SS2.p3.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">W_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.1.m1.1d">italic_W start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> frozen and addresses the gradient updates of the weight matrix <math alttext="\Delta W" class="ltx_Math" display="inline" id="S3.SS2.p3.2.m2.1"><semantics id="S3.SS2.p3.2.m2.1a"><mrow id="S3.SS2.p3.2.m2.1.1" xref="S3.SS2.p3.2.m2.1.1.cmml"><mi id="S3.SS2.p3.2.m2.1.1.2" mathvariant="normal" xref="S3.SS2.p3.2.m2.1.1.2.cmml">Δ</mi><mo id="S3.SS2.p3.2.m2.1.1.1" xref="S3.SS2.p3.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p3.2.m2.1.1.3" xref="S3.SS2.p3.2.m2.1.1.3.cmml">W</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.2.m2.1b"><apply id="S3.SS2.p3.2.m2.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1"><times id="S3.SS2.p3.2.m2.1.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1.1"></times><ci id="S3.SS2.p3.2.m2.1.1.2.cmml" xref="S3.SS2.p3.2.m2.1.1.2">Δ</ci><ci id="S3.SS2.p3.2.m2.1.1.3.cmml" xref="S3.SS2.p3.2.m2.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.2.m2.1c">\Delta W</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.2.m2.1d">roman_Δ italic_W</annotation></semantics></math> through low-rank approximation (i.e., <math alttext="\Delta W=BA" class="ltx_Math" display="inline" id="S3.SS2.p3.3.m3.1"><semantics id="S3.SS2.p3.3.m3.1a"><mrow id="S3.SS2.p3.3.m3.1.1" xref="S3.SS2.p3.3.m3.1.1.cmml"><mrow id="S3.SS2.p3.3.m3.1.1.2" xref="S3.SS2.p3.3.m3.1.1.2.cmml"><mi id="S3.SS2.p3.3.m3.1.1.2.2" mathvariant="normal" xref="S3.SS2.p3.3.m3.1.1.2.2.cmml">Δ</mi><mo id="S3.SS2.p3.3.m3.1.1.2.1" xref="S3.SS2.p3.3.m3.1.1.2.1.cmml">⁢</mo><mi id="S3.SS2.p3.3.m3.1.1.2.3" xref="S3.SS2.p3.3.m3.1.1.2.3.cmml">W</mi></mrow><mo id="S3.SS2.p3.3.m3.1.1.1" xref="S3.SS2.p3.3.m3.1.1.1.cmml">=</mo><mrow id="S3.SS2.p3.3.m3.1.1.3" xref="S3.SS2.p3.3.m3.1.1.3.cmml"><mi id="S3.SS2.p3.3.m3.1.1.3.2" xref="S3.SS2.p3.3.m3.1.1.3.2.cmml">B</mi><mo id="S3.SS2.p3.3.m3.1.1.3.1" xref="S3.SS2.p3.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.3.m3.1.1.3.3" xref="S3.SS2.p3.3.m3.1.1.3.3.cmml">A</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.3.m3.1b"><apply id="S3.SS2.p3.3.m3.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1"><eq id="S3.SS2.p3.3.m3.1.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1.1"></eq><apply id="S3.SS2.p3.3.m3.1.1.2.cmml" xref="S3.SS2.p3.3.m3.1.1.2"><times id="S3.SS2.p3.3.m3.1.1.2.1.cmml" xref="S3.SS2.p3.3.m3.1.1.2.1"></times><ci id="S3.SS2.p3.3.m3.1.1.2.2.cmml" xref="S3.SS2.p3.3.m3.1.1.2.2">Δ</ci><ci id="S3.SS2.p3.3.m3.1.1.2.3.cmml" xref="S3.SS2.p3.3.m3.1.1.2.3">𝑊</ci></apply><apply id="S3.SS2.p3.3.m3.1.1.3.cmml" xref="S3.SS2.p3.3.m3.1.1.3"><times id="S3.SS2.p3.3.m3.1.1.3.1.cmml" xref="S3.SS2.p3.3.m3.1.1.3.1"></times><ci id="S3.SS2.p3.3.m3.1.1.3.2.cmml" xref="S3.SS2.p3.3.m3.1.1.3.2">𝐵</ci><ci id="S3.SS2.p3.3.m3.1.1.3.3.cmml" xref="S3.SS2.p3.3.m3.1.1.3.3">𝐴</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.3.m3.1c">\Delta W=BA</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.3.m3.1d">roman_Δ italic_W = italic_B italic_A</annotation></semantics></math>, where <math alttext="B" class="ltx_Math" display="inline" id="S3.SS2.p3.4.m4.1"><semantics id="S3.SS2.p3.4.m4.1a"><mi id="S3.SS2.p3.4.m4.1.1" xref="S3.SS2.p3.4.m4.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.4.m4.1b"><ci id="S3.SS2.p3.4.m4.1.1.cmml" xref="S3.SS2.p3.4.m4.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.4.m4.1c">B</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.4.m4.1d">italic_B</annotation></semantics></math> and <math alttext="A" class="ltx_Math" display="inline" id="S3.SS2.p3.5.m5.1"><semantics id="S3.SS2.p3.5.m5.1a"><mi id="S3.SS2.p3.5.m5.1.1" xref="S3.SS2.p3.5.m5.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.5.m5.1b"><ci id="S3.SS2.p3.5.m5.1.1.cmml" xref="S3.SS2.p3.5.m5.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.5.m5.1c">A</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.5.m5.1d">italic_A</annotation></semantics></math> are the result of lower-rank decomposition on <math alttext="\Delta W" class="ltx_Math" display="inline" id="S3.SS2.p3.6.m6.1"><semantics id="S3.SS2.p3.6.m6.1a"><mrow id="S3.SS2.p3.6.m6.1.1" xref="S3.SS2.p3.6.m6.1.1.cmml"><mi id="S3.SS2.p3.6.m6.1.1.2" mathvariant="normal" xref="S3.SS2.p3.6.m6.1.1.2.cmml">Δ</mi><mo id="S3.SS2.p3.6.m6.1.1.1" xref="S3.SS2.p3.6.m6.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p3.6.m6.1.1.3" xref="S3.SS2.p3.6.m6.1.1.3.cmml">W</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.6.m6.1b"><apply id="S3.SS2.p3.6.m6.1.1.cmml" xref="S3.SS2.p3.6.m6.1.1"><times id="S3.SS2.p3.6.m6.1.1.1.cmml" xref="S3.SS2.p3.6.m6.1.1.1"></times><ci id="S3.SS2.p3.6.m6.1.1.2.cmml" xref="S3.SS2.p3.6.m6.1.1.2">Δ</ci><ci id="S3.SS2.p3.6.m6.1.1.3.cmml" xref="S3.SS2.p3.6.m6.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.6.m6.1c">\Delta W</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.6.m6.1d">roman_Δ italic_W</annotation></semantics></math>). Hence, the forward pass during the model training can be updated from <math alttext="h=W_{0}x+\Delta Wx" class="ltx_Math" display="inline" id="S3.SS2.p3.7.m7.1"><semantics id="S3.SS2.p3.7.m7.1a"><mrow id="S3.SS2.p3.7.m7.1.1" xref="S3.SS2.p3.7.m7.1.1.cmml"><mi id="S3.SS2.p3.7.m7.1.1.2" xref="S3.SS2.p3.7.m7.1.1.2.cmml">h</mi><mo id="S3.SS2.p3.7.m7.1.1.1" xref="S3.SS2.p3.7.m7.1.1.1.cmml">=</mo><mrow id="S3.SS2.p3.7.m7.1.1.3" xref="S3.SS2.p3.7.m7.1.1.3.cmml"><mrow id="S3.SS2.p3.7.m7.1.1.3.2" xref="S3.SS2.p3.7.m7.1.1.3.2.cmml"><msub id="S3.SS2.p3.7.m7.1.1.3.2.2" xref="S3.SS2.p3.7.m7.1.1.3.2.2.cmml"><mi id="S3.SS2.p3.7.m7.1.1.3.2.2.2" xref="S3.SS2.p3.7.m7.1.1.3.2.2.2.cmml">W</mi><mn id="S3.SS2.p3.7.m7.1.1.3.2.2.3" xref="S3.SS2.p3.7.m7.1.1.3.2.2.3.cmml">0</mn></msub><mo id="S3.SS2.p3.7.m7.1.1.3.2.1" xref="S3.SS2.p3.7.m7.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.p3.7.m7.1.1.3.2.3" xref="S3.SS2.p3.7.m7.1.1.3.2.3.cmml">x</mi></mrow><mo id="S3.SS2.p3.7.m7.1.1.3.1" xref="S3.SS2.p3.7.m7.1.1.3.1.cmml">+</mo><mrow id="S3.SS2.p3.7.m7.1.1.3.3" xref="S3.SS2.p3.7.m7.1.1.3.3.cmml"><mi id="S3.SS2.p3.7.m7.1.1.3.3.2" mathvariant="normal" xref="S3.SS2.p3.7.m7.1.1.3.3.2.cmml">Δ</mi><mo id="S3.SS2.p3.7.m7.1.1.3.3.1" xref="S3.SS2.p3.7.m7.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.7.m7.1.1.3.3.3" xref="S3.SS2.p3.7.m7.1.1.3.3.3.cmml">W</mi><mo id="S3.SS2.p3.7.m7.1.1.3.3.1a" xref="S3.SS2.p3.7.m7.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.7.m7.1.1.3.3.4" xref="S3.SS2.p3.7.m7.1.1.3.3.4.cmml">x</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.7.m7.1b"><apply id="S3.SS2.p3.7.m7.1.1.cmml" xref="S3.SS2.p3.7.m7.1.1"><eq id="S3.SS2.p3.7.m7.1.1.1.cmml" xref="S3.SS2.p3.7.m7.1.1.1"></eq><ci id="S3.SS2.p3.7.m7.1.1.2.cmml" xref="S3.SS2.p3.7.m7.1.1.2">ℎ</ci><apply id="S3.SS2.p3.7.m7.1.1.3.cmml" xref="S3.SS2.p3.7.m7.1.1.3"><plus id="S3.SS2.p3.7.m7.1.1.3.1.cmml" xref="S3.SS2.p3.7.m7.1.1.3.1"></plus><apply id="S3.SS2.p3.7.m7.1.1.3.2.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2"><times id="S3.SS2.p3.7.m7.1.1.3.2.1.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2.1"></times><apply id="S3.SS2.p3.7.m7.1.1.3.2.2.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2.2"><csymbol cd="ambiguous" id="S3.SS2.p3.7.m7.1.1.3.2.2.1.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2.2">subscript</csymbol><ci id="S3.SS2.p3.7.m7.1.1.3.2.2.2.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2.2.2">𝑊</ci><cn id="S3.SS2.p3.7.m7.1.1.3.2.2.3.cmml" type="integer" xref="S3.SS2.p3.7.m7.1.1.3.2.2.3">0</cn></apply><ci id="S3.SS2.p3.7.m7.1.1.3.2.3.cmml" xref="S3.SS2.p3.7.m7.1.1.3.2.3">𝑥</ci></apply><apply id="S3.SS2.p3.7.m7.1.1.3.3.cmml" xref="S3.SS2.p3.7.m7.1.1.3.3"><times id="S3.SS2.p3.7.m7.1.1.3.3.1.cmml" xref="S3.SS2.p3.7.m7.1.1.3.3.1"></times><ci id="S3.SS2.p3.7.m7.1.1.3.3.2.cmml" xref="S3.SS2.p3.7.m7.1.1.3.3.2">Δ</ci><ci id="S3.SS2.p3.7.m7.1.1.3.3.3.cmml" xref="S3.SS2.p3.7.m7.1.1.3.3.3">𝑊</ci><ci id="S3.SS2.p3.7.m7.1.1.3.3.4.cmml" xref="S3.SS2.p3.7.m7.1.1.3.3.4">𝑥</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.7.m7.1c">h=W_{0}x+\Delta Wx</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.7.m7.1d">italic_h = italic_W start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT italic_x + roman_Δ italic_W italic_x</annotation></semantics></math> to <math alttext="h=W_{0}x+BAx" class="ltx_Math" display="inline" id="S3.SS2.p3.8.m8.1"><semantics id="S3.SS2.p3.8.m8.1a"><mrow id="S3.SS2.p3.8.m8.1.1" xref="S3.SS2.p3.8.m8.1.1.cmml"><mi id="S3.SS2.p3.8.m8.1.1.2" xref="S3.SS2.p3.8.m8.1.1.2.cmml">h</mi><mo id="S3.SS2.p3.8.m8.1.1.1" xref="S3.SS2.p3.8.m8.1.1.1.cmml">=</mo><mrow id="S3.SS2.p3.8.m8.1.1.3" xref="S3.SS2.p3.8.m8.1.1.3.cmml"><mrow id="S3.SS2.p3.8.m8.1.1.3.2" xref="S3.SS2.p3.8.m8.1.1.3.2.cmml"><msub id="S3.SS2.p3.8.m8.1.1.3.2.2" xref="S3.SS2.p3.8.m8.1.1.3.2.2.cmml"><mi id="S3.SS2.p3.8.m8.1.1.3.2.2.2" xref="S3.SS2.p3.8.m8.1.1.3.2.2.2.cmml">W</mi><mn id="S3.SS2.p3.8.m8.1.1.3.2.2.3" xref="S3.SS2.p3.8.m8.1.1.3.2.2.3.cmml">0</mn></msub><mo id="S3.SS2.p3.8.m8.1.1.3.2.1" xref="S3.SS2.p3.8.m8.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.p3.8.m8.1.1.3.2.3" xref="S3.SS2.p3.8.m8.1.1.3.2.3.cmml">x</mi></mrow><mo id="S3.SS2.p3.8.m8.1.1.3.1" xref="S3.SS2.p3.8.m8.1.1.3.1.cmml">+</mo><mrow id="S3.SS2.p3.8.m8.1.1.3.3" xref="S3.SS2.p3.8.m8.1.1.3.3.cmml"><mi id="S3.SS2.p3.8.m8.1.1.3.3.2" xref="S3.SS2.p3.8.m8.1.1.3.3.2.cmml">B</mi><mo id="S3.SS2.p3.8.m8.1.1.3.3.1" xref="S3.SS2.p3.8.m8.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.8.m8.1.1.3.3.3" xref="S3.SS2.p3.8.m8.1.1.3.3.3.cmml">A</mi><mo id="S3.SS2.p3.8.m8.1.1.3.3.1a" xref="S3.SS2.p3.8.m8.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.8.m8.1.1.3.3.4" xref="S3.SS2.p3.8.m8.1.1.3.3.4.cmml">x</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.8.m8.1b"><apply id="S3.SS2.p3.8.m8.1.1.cmml" xref="S3.SS2.p3.8.m8.1.1"><eq id="S3.SS2.p3.8.m8.1.1.1.cmml" xref="S3.SS2.p3.8.m8.1.1.1"></eq><ci id="S3.SS2.p3.8.m8.1.1.2.cmml" xref="S3.SS2.p3.8.m8.1.1.2">ℎ</ci><apply id="S3.SS2.p3.8.m8.1.1.3.cmml" xref="S3.SS2.p3.8.m8.1.1.3"><plus id="S3.SS2.p3.8.m8.1.1.3.1.cmml" xref="S3.SS2.p3.8.m8.1.1.3.1"></plus><apply id="S3.SS2.p3.8.m8.1.1.3.2.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2"><times id="S3.SS2.p3.8.m8.1.1.3.2.1.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2.1"></times><apply id="S3.SS2.p3.8.m8.1.1.3.2.2.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2.2"><csymbol cd="ambiguous" id="S3.SS2.p3.8.m8.1.1.3.2.2.1.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2.2">subscript</csymbol><ci id="S3.SS2.p3.8.m8.1.1.3.2.2.2.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2.2.2">𝑊</ci><cn id="S3.SS2.p3.8.m8.1.1.3.2.2.3.cmml" type="integer" xref="S3.SS2.p3.8.m8.1.1.3.2.2.3">0</cn></apply><ci id="S3.SS2.p3.8.m8.1.1.3.2.3.cmml" xref="S3.SS2.p3.8.m8.1.1.3.2.3">𝑥</ci></apply><apply id="S3.SS2.p3.8.m8.1.1.3.3.cmml" xref="S3.SS2.p3.8.m8.1.1.3.3"><times id="S3.SS2.p3.8.m8.1.1.3.3.1.cmml" xref="S3.SS2.p3.8.m8.1.1.3.3.1"></times><ci id="S3.SS2.p3.8.m8.1.1.3.3.2.cmml" xref="S3.SS2.p3.8.m8.1.1.3.3.2">𝐵</ci><ci id="S3.SS2.p3.8.m8.1.1.3.3.3.cmml" xref="S3.SS2.p3.8.m8.1.1.3.3.3">𝐴</ci><ci id="S3.SS2.p3.8.m8.1.1.3.3.4.cmml" xref="S3.SS2.p3.8.m8.1.1.3.3.4">𝑥</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.8.m8.1c">h=W_{0}x+BAx</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.8.m8.1d">italic_h = italic_W start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT italic_x + italic_B italic_A italic_x</annotation></semantics></math>. QLoRA <cite class="ltx_cite ltx_citemacro_cite">Dettmers et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib4" title="">2024</a>)</cite>, which is used in this study, further quantises the language model into a 4-bit NormalFloat data type and leverages the page-to-page transfer between the CPU and GPU to further avoid memory spikes. To implement RAGate-PEFT, we format the train data with devised instructions, joined with paired inputs and outputs for developing parameter-efficient fine-tuned large language models. In particular, we provide a set of instruction-input-output triples for model training. The input can vary with the provision of a set of available features. Apart from the use of the conversational context (contx), we also include the system response (resp), synthetic responses generated by the language model (syn-resp) due to the missing responses as input in the practical scenario, the name entities within the incoming responses (ner), retrieved knowledge (know) and the description of the knowledge source, e.g., the WikiHow website (source). By using various combinations of inputs and customising the corresponding instructions, we explore the effectiveness of the resulting learned language models that implement the RAGate-PEFT.</p>
</div>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.6"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S3.SS2.p4.6.3">RAGate-MHA: </span> Apart from the use of pre-trained language models and further fine-tuned language models, we also explore the introduction of a multi-head attention neural encoder to model the context as input and estimate the augmentation necessity (i.e., RAGate-MHA). Here, we describe the model structure of RAGate-MHA. At first, as denoted by <cite class="ltx_cite ltx_citemacro_cite">Vaswani et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib32" title="">2017</a>)</cite>, the attention mechanism is formulated as the interaction between three objects, queries <math alttext="Q" class="ltx_Math" display="inline" id="S3.SS2.p4.1.m1.1"><semantics id="S3.SS2.p4.1.m1.1a"><mi id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.1b"><ci id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.1.m1.1d">italic_Q</annotation></semantics></math>, keys <math alttext="K" class="ltx_Math" display="inline" id="S3.SS2.p4.2.m2.1"><semantics id="S3.SS2.p4.2.m2.1a"><mi id="S3.SS2.p4.2.m2.1.1" xref="S3.SS2.p4.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.2.m2.1b"><ci id="S3.SS2.p4.2.m2.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.2.m2.1d">italic_K</annotation></semantics></math>, and values <math alttext="V" class="ltx_Math" display="inline" id="S3.SS2.p4.3.m3.1"><semantics id="S3.SS2.p4.3.m3.1a"><mi id="S3.SS2.p4.3.m3.1.1" xref="S3.SS2.p4.3.m3.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.3.m3.1b"><ci id="S3.SS2.p4.3.m3.1.1.cmml" xref="S3.SS2.p4.3.m3.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.3.m3.1c">V</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.3.m3.1d">italic_V</annotation></semantics></math>: <math alttext="Attention(Q,K,V)=\text{softmax}(\frac{QK^{T}}{\sqrt{d_{k}}})V" class="ltx_Math" display="inline" id="S3.SS2.p4.4.m4.4"><semantics id="S3.SS2.p4.4.m4.4a"><mrow id="S3.SS2.p4.4.m4.4.5" xref="S3.SS2.p4.4.m4.4.5.cmml"><mrow id="S3.SS2.p4.4.m4.4.5.2" xref="S3.SS2.p4.4.m4.4.5.2.cmml"><mi id="S3.SS2.p4.4.m4.4.5.2.2" xref="S3.SS2.p4.4.m4.4.5.2.2.cmml">A</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.3" xref="S3.SS2.p4.4.m4.4.5.2.3.cmml">t</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1a" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.4" xref="S3.SS2.p4.4.m4.4.5.2.4.cmml">t</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1b" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.5" xref="S3.SS2.p4.4.m4.4.5.2.5.cmml">e</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1c" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.6" xref="S3.SS2.p4.4.m4.4.5.2.6.cmml">n</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1d" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.7" xref="S3.SS2.p4.4.m4.4.5.2.7.cmml">t</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1e" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.8" xref="S3.SS2.p4.4.m4.4.5.2.8.cmml">i</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1f" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.9" xref="S3.SS2.p4.4.m4.4.5.2.9.cmml">o</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1g" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.2.10" xref="S3.SS2.p4.4.m4.4.5.2.10.cmml">n</mi><mo id="S3.SS2.p4.4.m4.4.5.2.1h" xref="S3.SS2.p4.4.m4.4.5.2.1.cmml">⁢</mo><mrow id="S3.SS2.p4.4.m4.4.5.2.11.2" xref="S3.SS2.p4.4.m4.4.5.2.11.1.cmml"><mo id="S3.SS2.p4.4.m4.4.5.2.11.2.1" stretchy="false" xref="S3.SS2.p4.4.m4.4.5.2.11.1.cmml">(</mo><mi id="S3.SS2.p4.4.m4.1.1" xref="S3.SS2.p4.4.m4.1.1.cmml">Q</mi><mo id="S3.SS2.p4.4.m4.4.5.2.11.2.2" xref="S3.SS2.p4.4.m4.4.5.2.11.1.cmml">,</mo><mi id="S3.SS2.p4.4.m4.2.2" xref="S3.SS2.p4.4.m4.2.2.cmml">K</mi><mo id="S3.SS2.p4.4.m4.4.5.2.11.2.3" xref="S3.SS2.p4.4.m4.4.5.2.11.1.cmml">,</mo><mi id="S3.SS2.p4.4.m4.3.3" xref="S3.SS2.p4.4.m4.3.3.cmml">V</mi><mo id="S3.SS2.p4.4.m4.4.5.2.11.2.4" stretchy="false" xref="S3.SS2.p4.4.m4.4.5.2.11.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p4.4.m4.4.5.1" xref="S3.SS2.p4.4.m4.4.5.1.cmml">=</mo><mrow id="S3.SS2.p4.4.m4.4.5.3" xref="S3.SS2.p4.4.m4.4.5.3.cmml"><mtext id="S3.SS2.p4.4.m4.4.5.3.2" xref="S3.SS2.p4.4.m4.4.5.3.2a.cmml">softmax</mtext><mo id="S3.SS2.p4.4.m4.4.5.3.1" xref="S3.SS2.p4.4.m4.4.5.3.1.cmml">⁢</mo><mrow id="S3.SS2.p4.4.m4.4.5.3.3.2" xref="S3.SS2.p4.4.m4.4.4.cmml"><mo id="S3.SS2.p4.4.m4.4.5.3.3.2.1" stretchy="false" xref="S3.SS2.p4.4.m4.4.4.cmml">(</mo><mfrac id="S3.SS2.p4.4.m4.4.4" xref="S3.SS2.p4.4.m4.4.4.cmml"><mrow id="S3.SS2.p4.4.m4.4.4.2" xref="S3.SS2.p4.4.m4.4.4.2.cmml"><mi id="S3.SS2.p4.4.m4.4.4.2.2" xref="S3.SS2.p4.4.m4.4.4.2.2.cmml">Q</mi><mo id="S3.SS2.p4.4.m4.4.4.2.1" xref="S3.SS2.p4.4.m4.4.4.2.1.cmml">⁢</mo><msup id="S3.SS2.p4.4.m4.4.4.2.3" xref="S3.SS2.p4.4.m4.4.4.2.3.cmml"><mi id="S3.SS2.p4.4.m4.4.4.2.3.2" xref="S3.SS2.p4.4.m4.4.4.2.3.2.cmml">K</mi><mi id="S3.SS2.p4.4.m4.4.4.2.3.3" xref="S3.SS2.p4.4.m4.4.4.2.3.3.cmml">T</mi></msup></mrow><msqrt id="S3.SS2.p4.4.m4.4.4.3" xref="S3.SS2.p4.4.m4.4.4.3.cmml"><msub id="S3.SS2.p4.4.m4.4.4.3.2" xref="S3.SS2.p4.4.m4.4.4.3.2.cmml"><mi id="S3.SS2.p4.4.m4.4.4.3.2.2" xref="S3.SS2.p4.4.m4.4.4.3.2.2.cmml">d</mi><mi id="S3.SS2.p4.4.m4.4.4.3.2.3" xref="S3.SS2.p4.4.m4.4.4.3.2.3.cmml">k</mi></msub></msqrt></mfrac><mo id="S3.SS2.p4.4.m4.4.5.3.3.2.2" stretchy="false" xref="S3.SS2.p4.4.m4.4.4.cmml">)</mo></mrow><mo id="S3.SS2.p4.4.m4.4.5.3.1a" xref="S3.SS2.p4.4.m4.4.5.3.1.cmml">⁢</mo><mi id="S3.SS2.p4.4.m4.4.5.3.4" xref="S3.SS2.p4.4.m4.4.5.3.4.cmml">V</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.4.m4.4b"><apply id="S3.SS2.p4.4.m4.4.5.cmml" xref="S3.SS2.p4.4.m4.4.5"><eq id="S3.SS2.p4.4.m4.4.5.1.cmml" xref="S3.SS2.p4.4.m4.4.5.1"></eq><apply id="S3.SS2.p4.4.m4.4.5.2.cmml" xref="S3.SS2.p4.4.m4.4.5.2"><times id="S3.SS2.p4.4.m4.4.5.2.1.cmml" xref="S3.SS2.p4.4.m4.4.5.2.1"></times><ci id="S3.SS2.p4.4.m4.4.5.2.2.cmml" xref="S3.SS2.p4.4.m4.4.5.2.2">𝐴</ci><ci id="S3.SS2.p4.4.m4.4.5.2.3.cmml" xref="S3.SS2.p4.4.m4.4.5.2.3">𝑡</ci><ci id="S3.SS2.p4.4.m4.4.5.2.4.cmml" xref="S3.SS2.p4.4.m4.4.5.2.4">𝑡</ci><ci id="S3.SS2.p4.4.m4.4.5.2.5.cmml" xref="S3.SS2.p4.4.m4.4.5.2.5">𝑒</ci><ci id="S3.SS2.p4.4.m4.4.5.2.6.cmml" xref="S3.SS2.p4.4.m4.4.5.2.6">𝑛</ci><ci id="S3.SS2.p4.4.m4.4.5.2.7.cmml" xref="S3.SS2.p4.4.m4.4.5.2.7">𝑡</ci><ci id="S3.SS2.p4.4.m4.4.5.2.8.cmml" xref="S3.SS2.p4.4.m4.4.5.2.8">𝑖</ci><ci id="S3.SS2.p4.4.m4.4.5.2.9.cmml" xref="S3.SS2.p4.4.m4.4.5.2.9">𝑜</ci><ci id="S3.SS2.p4.4.m4.4.5.2.10.cmml" xref="S3.SS2.p4.4.m4.4.5.2.10">𝑛</ci><vector id="S3.SS2.p4.4.m4.4.5.2.11.1.cmml" xref="S3.SS2.p4.4.m4.4.5.2.11.2"><ci id="S3.SS2.p4.4.m4.1.1.cmml" xref="S3.SS2.p4.4.m4.1.1">𝑄</ci><ci id="S3.SS2.p4.4.m4.2.2.cmml" xref="S3.SS2.p4.4.m4.2.2">𝐾</ci><ci id="S3.SS2.p4.4.m4.3.3.cmml" xref="S3.SS2.p4.4.m4.3.3">𝑉</ci></vector></apply><apply id="S3.SS2.p4.4.m4.4.5.3.cmml" xref="S3.SS2.p4.4.m4.4.5.3"><times id="S3.SS2.p4.4.m4.4.5.3.1.cmml" xref="S3.SS2.p4.4.m4.4.5.3.1"></times><ci id="S3.SS2.p4.4.m4.4.5.3.2a.cmml" xref="S3.SS2.p4.4.m4.4.5.3.2"><mtext id="S3.SS2.p4.4.m4.4.5.3.2.cmml" xref="S3.SS2.p4.4.m4.4.5.3.2">softmax</mtext></ci><apply id="S3.SS2.p4.4.m4.4.4.cmml" xref="S3.SS2.p4.4.m4.4.5.3.3.2"><divide id="S3.SS2.p4.4.m4.4.4.1.cmml" xref="S3.SS2.p4.4.m4.4.5.3.3.2"></divide><apply id="S3.SS2.p4.4.m4.4.4.2.cmml" xref="S3.SS2.p4.4.m4.4.4.2"><times id="S3.SS2.p4.4.m4.4.4.2.1.cmml" xref="S3.SS2.p4.4.m4.4.4.2.1"></times><ci id="S3.SS2.p4.4.m4.4.4.2.2.cmml" xref="S3.SS2.p4.4.m4.4.4.2.2">𝑄</ci><apply id="S3.SS2.p4.4.m4.4.4.2.3.cmml" xref="S3.SS2.p4.4.m4.4.4.2.3"><csymbol cd="ambiguous" id="S3.SS2.p4.4.m4.4.4.2.3.1.cmml" xref="S3.SS2.p4.4.m4.4.4.2.3">superscript</csymbol><ci id="S3.SS2.p4.4.m4.4.4.2.3.2.cmml" xref="S3.SS2.p4.4.m4.4.4.2.3.2">𝐾</ci><ci id="S3.SS2.p4.4.m4.4.4.2.3.3.cmml" xref="S3.SS2.p4.4.m4.4.4.2.3.3">𝑇</ci></apply></apply><apply id="S3.SS2.p4.4.m4.4.4.3.cmml" xref="S3.SS2.p4.4.m4.4.4.3"><root id="S3.SS2.p4.4.m4.4.4.3a.cmml" xref="S3.SS2.p4.4.m4.4.4.3"></root><apply id="S3.SS2.p4.4.m4.4.4.3.2.cmml" xref="S3.SS2.p4.4.m4.4.4.3.2"><csymbol cd="ambiguous" id="S3.SS2.p4.4.m4.4.4.3.2.1.cmml" xref="S3.SS2.p4.4.m4.4.4.3.2">subscript</csymbol><ci id="S3.SS2.p4.4.m4.4.4.3.2.2.cmml" xref="S3.SS2.p4.4.m4.4.4.3.2.2">𝑑</ci><ci id="S3.SS2.p4.4.m4.4.4.3.2.3.cmml" xref="S3.SS2.p4.4.m4.4.4.3.2.3">𝑘</ci></apply></apply></apply><ci id="S3.SS2.p4.4.m4.4.5.3.4.cmml" xref="S3.SS2.p4.4.m4.4.5.3.4">𝑉</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.4.m4.4c">Attention(Q,K,V)=\text{softmax}(\frac{QK^{T}}{\sqrt{d_{k}}})V</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.4.m4.4d">italic_A italic_t italic_t italic_e italic_n italic_t italic_i italic_o italic_n ( italic_Q , italic_K , italic_V ) = softmax ( divide start_ARG italic_Q italic_K start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT end_ARG start_ARG square-root start_ARG italic_d start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT end_ARG end_ARG ) italic_V</annotation></semantics></math>. To estimate the necessity of augmentation, we fit the context and the retrieved knowledge into the roles of these three objects. Specifically, we include the setups of (1) using context only (<span class="ltx_text ltx_font_italic" id="S3.SS2.p4.6.4">contx</span>) or (2) using the concatenated context and retrieved knowledge (<span class="ltx_text ltx_font_italic" id="S3.SS2.p4.5.1">contx <math alttext="\oplus" class="ltx_Math" display="inline" id="S3.SS2.p4.5.1.m1.1"><semantics id="S3.SS2.p4.5.1.m1.1a"><mo id="S3.SS2.p4.5.1.m1.1.1" xref="S3.SS2.p4.5.1.m1.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.5.1.m1.1b"><csymbol cd="latexml" id="S3.SS2.p4.5.1.m1.1.1.cmml" xref="S3.SS2.p4.5.1.m1.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.5.1.m1.1c">\oplus</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.5.1.m1.1d">⊕</annotation></semantics></math> know</span>) as queries, keys, and values, and (3) using the context as queries and interact with the retrieved knowledge as keys and values (<span class="ltx_text ltx_font_italic" id="S3.SS2.p4.6.2">contx <math alttext="\times" class="ltx_Math" display="inline" id="S3.SS2.p4.6.2.m1.1"><semantics id="S3.SS2.p4.6.2.m1.1a"><mo id="S3.SS2.p4.6.2.m1.1.1" xref="S3.SS2.p4.6.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.6.2.m1.1b"><times id="S3.SS2.p4.6.2.m1.1.1.cmml" xref="S3.SS2.p4.6.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.6.2.m1.1c">\times</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.6.2.m1.1d">×</annotation></semantics></math> know</span>).
Next, following <cite class="ltx_cite ltx_citemacro_cite">Vaswani et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib32" title="">2017</a>)</cite> in the encoder construction of a transformer model, we encode the inputs via an input embedding layer into latent vectors and a position encoding layer to encode the order of tokens in the sequence. After that, we leverage the multi-head attention to learn attention weights on the inputs and then followed by a feed-forward network:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="FFN(x)=\text{max}(0,xW_{1}+b_{1})W_{2}+b_{2}" class="ltx_Math" display="block" id="S3.E2.m1.3"><semantics id="S3.E2.m1.3a"><mrow id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml"><mrow id="S3.E2.m1.3.3.3" xref="S3.E2.m1.3.3.3.cmml"><mi id="S3.E2.m1.3.3.3.2" xref="S3.E2.m1.3.3.3.2.cmml">F</mi><mo id="S3.E2.m1.3.3.3.1" xref="S3.E2.m1.3.3.3.1.cmml">⁢</mo><mi id="S3.E2.m1.3.3.3.3" xref="S3.E2.m1.3.3.3.3.cmml">F</mi><mo id="S3.E2.m1.3.3.3.1a" xref="S3.E2.m1.3.3.3.1.cmml">⁢</mo><mi id="S3.E2.m1.3.3.3.4" xref="S3.E2.m1.3.3.3.4.cmml">N</mi><mo id="S3.E2.m1.3.3.3.1b" xref="S3.E2.m1.3.3.3.1.cmml">⁢</mo><mrow id="S3.E2.m1.3.3.3.5.2" xref="S3.E2.m1.3.3.3.cmml"><mo id="S3.E2.m1.3.3.3.5.2.1" stretchy="false" xref="S3.E2.m1.3.3.3.cmml">(</mo><mi id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">x</mi><mo id="S3.E2.m1.3.3.3.5.2.2" stretchy="false" xref="S3.E2.m1.3.3.3.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.3.3.2" xref="S3.E2.m1.3.3.2.cmml">=</mo><mrow id="S3.E2.m1.3.3.1" xref="S3.E2.m1.3.3.1.cmml"><mrow id="S3.E2.m1.3.3.1.1" xref="S3.E2.m1.3.3.1.1.cmml"><mtext id="S3.E2.m1.3.3.1.1.3" xref="S3.E2.m1.3.3.1.1.3a.cmml">max</mtext><mo id="S3.E2.m1.3.3.1.1.2" xref="S3.E2.m1.3.3.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.3.3.1.1.1.1" xref="S3.E2.m1.3.3.1.1.1.2.cmml"><mo id="S3.E2.m1.3.3.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.3.3.1.1.1.2.cmml">(</mo><mn id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml">0</mn><mo id="S3.E2.m1.3.3.1.1.1.1.3" xref="S3.E2.m1.3.3.1.1.1.2.cmml">,</mo><mrow id="S3.E2.m1.3.3.1.1.1.1.1" xref="S3.E2.m1.3.3.1.1.1.1.1.cmml"><mrow id="S3.E2.m1.3.3.1.1.1.1.1.2" xref="S3.E2.m1.3.3.1.1.1.1.1.2.cmml"><mi id="S3.E2.m1.3.3.1.1.1.1.1.2.2" xref="S3.E2.m1.3.3.1.1.1.1.1.2.2.cmml">x</mi><mo id="S3.E2.m1.3.3.1.1.1.1.1.2.1" xref="S3.E2.m1.3.3.1.1.1.1.1.2.1.cmml">⁢</mo><msub id="S3.E2.m1.3.3.1.1.1.1.1.2.3" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3.cmml"><mi id="S3.E2.m1.3.3.1.1.1.1.1.2.3.2" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3.2.cmml">W</mi><mn id="S3.E2.m1.3.3.1.1.1.1.1.2.3.3" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3.3.cmml">1</mn></msub></mrow><mo id="S3.E2.m1.3.3.1.1.1.1.1.1" xref="S3.E2.m1.3.3.1.1.1.1.1.1.cmml">+</mo><msub id="S3.E2.m1.3.3.1.1.1.1.1.3" xref="S3.E2.m1.3.3.1.1.1.1.1.3.cmml"><mi id="S3.E2.m1.3.3.1.1.1.1.1.3.2" xref="S3.E2.m1.3.3.1.1.1.1.1.3.2.cmml">b</mi><mn id="S3.E2.m1.3.3.1.1.1.1.1.3.3" xref="S3.E2.m1.3.3.1.1.1.1.1.3.3.cmml">1</mn></msub></mrow><mo id="S3.E2.m1.3.3.1.1.1.1.4" stretchy="false" xref="S3.E2.m1.3.3.1.1.1.2.cmml">)</mo></mrow><mo id="S3.E2.m1.3.3.1.1.2a" xref="S3.E2.m1.3.3.1.1.2.cmml">⁢</mo><msub id="S3.E2.m1.3.3.1.1.4" xref="S3.E2.m1.3.3.1.1.4.cmml"><mi id="S3.E2.m1.3.3.1.1.4.2" xref="S3.E2.m1.3.3.1.1.4.2.cmml">W</mi><mn id="S3.E2.m1.3.3.1.1.4.3" xref="S3.E2.m1.3.3.1.1.4.3.cmml">2</mn></msub></mrow><mo id="S3.E2.m1.3.3.1.2" xref="S3.E2.m1.3.3.1.2.cmml">+</mo><msub id="S3.E2.m1.3.3.1.3" xref="S3.E2.m1.3.3.1.3.cmml"><mi id="S3.E2.m1.3.3.1.3.2" xref="S3.E2.m1.3.3.1.3.2.cmml">b</mi><mn id="S3.E2.m1.3.3.1.3.3" xref="S3.E2.m1.3.3.1.3.3.cmml">2</mn></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.3b"><apply id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3"><eq id="S3.E2.m1.3.3.2.cmml" xref="S3.E2.m1.3.3.2"></eq><apply id="S3.E2.m1.3.3.3.cmml" xref="S3.E2.m1.3.3.3"><times id="S3.E2.m1.3.3.3.1.cmml" xref="S3.E2.m1.3.3.3.1"></times><ci id="S3.E2.m1.3.3.3.2.cmml" xref="S3.E2.m1.3.3.3.2">𝐹</ci><ci id="S3.E2.m1.3.3.3.3.cmml" xref="S3.E2.m1.3.3.3.3">𝐹</ci><ci id="S3.E2.m1.3.3.3.4.cmml" xref="S3.E2.m1.3.3.3.4">𝑁</ci><ci id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">𝑥</ci></apply><apply id="S3.E2.m1.3.3.1.cmml" xref="S3.E2.m1.3.3.1"><plus id="S3.E2.m1.3.3.1.2.cmml" xref="S3.E2.m1.3.3.1.2"></plus><apply id="S3.E2.m1.3.3.1.1.cmml" xref="S3.E2.m1.3.3.1.1"><times id="S3.E2.m1.3.3.1.1.2.cmml" xref="S3.E2.m1.3.3.1.1.2"></times><ci id="S3.E2.m1.3.3.1.1.3a.cmml" xref="S3.E2.m1.3.3.1.1.3"><mtext id="S3.E2.m1.3.3.1.1.3.cmml" xref="S3.E2.m1.3.3.1.1.3">max</mtext></ci><interval closure="open" id="S3.E2.m1.3.3.1.1.1.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1"><cn id="S3.E2.m1.2.2.cmml" type="integer" xref="S3.E2.m1.2.2">0</cn><apply id="S3.E2.m1.3.3.1.1.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1"><plus id="S3.E2.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.1"></plus><apply id="S3.E2.m1.3.3.1.1.1.1.1.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2"><times id="S3.E2.m1.3.3.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2.1"></times><ci id="S3.E2.m1.3.3.1.1.1.1.1.2.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2.2">𝑥</ci><apply id="S3.E2.m1.3.3.1.1.1.1.1.2.3.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.1.1.1.1.2.3.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3">subscript</csymbol><ci id="S3.E2.m1.3.3.1.1.1.1.1.2.3.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3.2">𝑊</ci><cn id="S3.E2.m1.3.3.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S3.E2.m1.3.3.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.E2.m1.3.3.1.1.1.1.1.3.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.1.1.1.1.3.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.3.3.1.1.1.1.1.3.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1.1.3.2">𝑏</ci><cn id="S3.E2.m1.3.3.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.E2.m1.3.3.1.1.1.1.1.3.3">1</cn></apply></apply></interval><apply id="S3.E2.m1.3.3.1.1.4.cmml" xref="S3.E2.m1.3.3.1.1.4"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.1.4.1.cmml" xref="S3.E2.m1.3.3.1.1.4">subscript</csymbol><ci id="S3.E2.m1.3.3.1.1.4.2.cmml" xref="S3.E2.m1.3.3.1.1.4.2">𝑊</ci><cn id="S3.E2.m1.3.3.1.1.4.3.cmml" type="integer" xref="S3.E2.m1.3.3.1.1.4.3">2</cn></apply></apply><apply id="S3.E2.m1.3.3.1.3.cmml" xref="S3.E2.m1.3.3.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.3.1.cmml" xref="S3.E2.m1.3.3.1.3">subscript</csymbol><ci id="S3.E2.m1.3.3.1.3.2.cmml" xref="S3.E2.m1.3.3.1.3.2">𝑏</ci><cn id="S3.E2.m1.3.3.1.3.3.cmml" type="integer" xref="S3.E2.m1.3.3.1.3.3">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.3c">FFN(x)=\text{max}(0,xW_{1}+b_{1})W_{2}+b_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.3d">italic_F italic_F italic_N ( italic_x ) = max ( 0 , italic_x italic_W start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT + italic_b start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ) italic_W start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT + italic_b start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.p4.10">where <math alttext="W_{1}" class="ltx_Math" display="inline" id="S3.SS2.p4.7.m1.1"><semantics id="S3.SS2.p4.7.m1.1a"><msub id="S3.SS2.p4.7.m1.1.1" xref="S3.SS2.p4.7.m1.1.1.cmml"><mi id="S3.SS2.p4.7.m1.1.1.2" xref="S3.SS2.p4.7.m1.1.1.2.cmml">W</mi><mn id="S3.SS2.p4.7.m1.1.1.3" xref="S3.SS2.p4.7.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.7.m1.1b"><apply id="S3.SS2.p4.7.m1.1.1.cmml" xref="S3.SS2.p4.7.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.7.m1.1.1.1.cmml" xref="S3.SS2.p4.7.m1.1.1">subscript</csymbol><ci id="S3.SS2.p4.7.m1.1.1.2.cmml" xref="S3.SS2.p4.7.m1.1.1.2">𝑊</ci><cn id="S3.SS2.p4.7.m1.1.1.3.cmml" type="integer" xref="S3.SS2.p4.7.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.7.m1.1c">W_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.7.m1.1d">italic_W start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="W_{2}" class="ltx_Math" display="inline" id="S3.SS2.p4.8.m2.1"><semantics id="S3.SS2.p4.8.m2.1a"><msub id="S3.SS2.p4.8.m2.1.1" xref="S3.SS2.p4.8.m2.1.1.cmml"><mi id="S3.SS2.p4.8.m2.1.1.2" xref="S3.SS2.p4.8.m2.1.1.2.cmml">W</mi><mn id="S3.SS2.p4.8.m2.1.1.3" xref="S3.SS2.p4.8.m2.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.8.m2.1b"><apply id="S3.SS2.p4.8.m2.1.1.cmml" xref="S3.SS2.p4.8.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.8.m2.1.1.1.cmml" xref="S3.SS2.p4.8.m2.1.1">subscript</csymbol><ci id="S3.SS2.p4.8.m2.1.1.2.cmml" xref="S3.SS2.p4.8.m2.1.1.2">𝑊</ci><cn id="S3.SS2.p4.8.m2.1.1.3.cmml" type="integer" xref="S3.SS2.p4.8.m2.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.8.m2.1c">W_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.8.m2.1d">italic_W start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math> are two learned parameter matrics with two bias terms (<math alttext="b_{1}" class="ltx_Math" display="inline" id="S3.SS2.p4.9.m3.1"><semantics id="S3.SS2.p4.9.m3.1a"><msub id="S3.SS2.p4.9.m3.1.1" xref="S3.SS2.p4.9.m3.1.1.cmml"><mi id="S3.SS2.p4.9.m3.1.1.2" xref="S3.SS2.p4.9.m3.1.1.2.cmml">b</mi><mn id="S3.SS2.p4.9.m3.1.1.3" xref="S3.SS2.p4.9.m3.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.9.m3.1b"><apply id="S3.SS2.p4.9.m3.1.1.cmml" xref="S3.SS2.p4.9.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.9.m3.1.1.1.cmml" xref="S3.SS2.p4.9.m3.1.1">subscript</csymbol><ci id="S3.SS2.p4.9.m3.1.1.2.cmml" xref="S3.SS2.p4.9.m3.1.1.2">𝑏</ci><cn id="S3.SS2.p4.9.m3.1.1.3.cmml" type="integer" xref="S3.SS2.p4.9.m3.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.9.m3.1c">b_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.9.m3.1d">italic_b start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="b_{2}" class="ltx_Math" display="inline" id="S3.SS2.p4.10.m4.1"><semantics id="S3.SS2.p4.10.m4.1a"><msub id="S3.SS2.p4.10.m4.1.1" xref="S3.SS2.p4.10.m4.1.1.cmml"><mi id="S3.SS2.p4.10.m4.1.1.2" xref="S3.SS2.p4.10.m4.1.1.2.cmml">b</mi><mn id="S3.SS2.p4.10.m4.1.1.3" xref="S3.SS2.p4.10.m4.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.10.m4.1b"><apply id="S3.SS2.p4.10.m4.1.1.cmml" xref="S3.SS2.p4.10.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.10.m4.1.1.1.cmml" xref="S3.SS2.p4.10.m4.1.1">subscript</csymbol><ci id="S3.SS2.p4.10.m4.1.1.2.cmml" xref="S3.SS2.p4.10.m4.1.1.2">𝑏</ci><cn id="S3.SS2.p4.10.m4.1.1.3.cmml" type="integer" xref="S3.SS2.p4.10.m4.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.10.m4.1c">b_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.10.m4.1d">italic_b start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math>). Both multi-head attention and feed-forward neural modules are followed by residual connection <cite class="ltx_cite ltx_citemacro_cite">He et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib7" title="">2016</a>)</cite> and layer normalisation <cite class="ltx_cite ltx_citemacro_cite">Ba et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib2" title="">2016</a>)</cite>. Unlike the introduction of another decoder module that addresses the sequence-to-sequence generation in <cite class="ltx_cite ltx_citemacro_cite">Vaswani et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib32" title="">2017</a>)</cite>, we followed the encoder output with a linear projection module and a softmax function for our binary classification task.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Model Training and Evaluation Setups</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">We evaluate the performance of introducing RAGate according to its binary classification performance and the effectiveness of the resulting response generation. Specifically, we use the KETOD dataset <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib3" title="">2022</a>)</cite>, which has fully annotated 5,324 dialogues and 52,063 turns of conversations. In particular, it is associated with 33,761 knowledge snippets to be retrieved and augmented. In addition, KETOD was developed with human labels on turns of conversations (around 12.1% of turns) about the need for augmenting with retrieved knowledge snippets for a natural and informative system response. Hence, we use these human labels as natural ground truths when evaluating RAGate. It is worth indicating that many current knowledge-augmented conversational datasets often ground their conversations on the knowledge snippet, such as Wizard of Wikipedia <cite class="ltx_cite ltx_citemacro_cite">Dinan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib5" title="">2018</a>)</cite> and CMU_DoG <cite class="ltx_cite ltx_citemacro_cite">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib38" title="">2018</a>)</cite>, which makes them not a natural fit to be investigated in this study.</p>
</div>
<figure class="ltx_table" id="S4.T1">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T1.1" style="width:173.4pt;height:48.7pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-9.4pt,2.7pt) scale(0.901794280342172,0.901794280342172) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T1.1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.1.1">Retrieval Models</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.2.1">Recall@1</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T1.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T1.1.1.1.1.3.1">Recall@3</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.1.1.2.1.1">TF-IDF</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.1.1.2.1.2">0.0227</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.2.1.3">0.0871</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T1.1.1.3.2.1">BERT-Ranker</th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T1.1.1.3.2.2">0.2475</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.1.1.3.2.3">0.4714</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Retrieval Performance Evaluation when using context as the query.</figcaption>
</figure>
<div class="ltx_para" id="S4.p2">
<p class="ltx_p" id="S4.p2.1">Due to the limited computational resource availability, we explore the use of Llama-v2-7B and Llama-v2-13B to implement RAGate-prompt and fine-tune Llama-v2-7B for RAGate-PEFT. We implement QLoRA using the PEFT library <cite class="ltx_cite ltx_citemacro_cite">Mangrulkar et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib20" title="">2022</a>)</cite> and set the lower rank to 16. As discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S3" title="3 Methodology ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>, we have various input features to be combined for performance optimisation. We begin with the use of context only, then concatenate the context with the real response (contx-resp), with the synthetic response and recognised entities (contx-syn-resp-ner) and further extend with the use of retrieved knowledge (contx-syn-resp-ner-know) or the source of knowledge (contx-syn-resp-ner-source). Specifically, we retrieve the relevant knowledge by exploring the use of TF-IDF and a learned BERT ranker. We evaluate their performance with the classic Recall@1 and Recall@3 on the test collection. We use a shallow cutoff because we only use top-relevant knowledge snippets for augmentation. Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S4.T1" title="Table 1 ‣ 4 Model Training and Evaluation Setups ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">1</span></a> shows their retrieval performance. According to the leading performance of BERT-Ranker, we augment knowledge with its retrieved top 3 relevant knowledge snippets (i.e., <math alttext="k=3" class="ltx_Math" display="inline" id="S4.p2.1.m1.1"><semantics id="S4.p2.1.m1.1a"><mrow id="S4.p2.1.m1.1.1" xref="S4.p2.1.m1.1.1.cmml"><mi id="S4.p2.1.m1.1.1.2" xref="S4.p2.1.m1.1.1.2.cmml">k</mi><mo id="S4.p2.1.m1.1.1.1" xref="S4.p2.1.m1.1.1.1.cmml">=</mo><mn id="S4.p2.1.m1.1.1.3" xref="S4.p2.1.m1.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p2.1.m1.1b"><apply id="S4.p2.1.m1.1.1.cmml" xref="S4.p2.1.m1.1.1"><eq id="S4.p2.1.m1.1.1.1.cmml" xref="S4.p2.1.m1.1.1.1"></eq><ci id="S4.p2.1.m1.1.1.2.cmml" xref="S4.p2.1.m1.1.1.2">𝑘</ci><cn id="S4.p2.1.m1.1.1.3.cmml" type="integer" xref="S4.p2.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p2.1.m1.1c">k=3</annotation><annotation encoding="application/x-llamapun" id="S4.p2.1.m1.1d">italic_k = 3</annotation></semantics></math>). Regarding the development of RAGate-MHA, we explore the combinations of 2 to 8 layers, 2 or 4 heads and the embedding size in [64, 128, 256] for the best classification accuracy. We report the precision, recall, F1, Area Under Curve (AUC) and the False Discovery Rate (FDR) as the main measures to show the classification effectiveness.</p>
</div>
<div class="ltx_para" id="S4.p3">
<p class="ltx_p" id="S4.p3.1">Next, we further deploy the best-performing RAGate gate function to update the KETOD dialogue system <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib3" title="">2022</a>)</cite>, which uses GPT-2 <cite class="ltx_cite ltx_citemacro_cite">Radford et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib24" title="">2019</a>)</cite> as the backbone model. To highlight the effect of various augmentation setups, we use the context with the gold action without extra prediction as input to KETOD. Then, we compare the resulting performance to the KETOD model without knowledge augmentation and augmenting every system response as baselines. To report the response generation effectiveness, we report how close the response is to the ground truth via BLEU, ROUGE-1/2/L and BERTScores and the confidence score calculated by the minimum probabilities of individual tokens that compose the response.
As argued by <cite class="ltx_cite ltx_citemacro_citet">Varshney et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib31" title="">2023</a>)</cite>, this calculated confidence score can highly correlate with a language model’s likelihood of generating hallucinated responses. We trained our models and conducted the evaluations on one machine with one NVIDIA 4090 GPU.</p>
</div>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Results and Analysis</h2>
<figure class="ltx_table" id="S5.T2">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T2.4" style="width:216.8pt;height:233pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-50.7pt,54.5pt) scale(0.68131497915637,0.68131497915637) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T2.4.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T2.4.4.5.1" style="background-color:#FFFFBF;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_tt" id="S5.T2.4.4.5.1.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.5.1.1.1" style="background-color:#FFFFBF;">Model Variants</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S5.T2.4.4.5.1.2"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.5.1.2.1" style="background-color:#FFFFBF;">Precision</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S5.T2.4.4.5.1.3"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.5.1.3.1" style="background-color:#FFFFBF;">Recall</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" id="S5.T2.4.4.5.1.4"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.5.1.4.1" style="background-color:#FFFFBF;">F1</span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.6.2" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" colspan="4" id="S5.T2.4.4.6.2.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.6.2.1.1" style="background-color:#D9D9D9;">RAGate-Prompt<span class="ltx_text ltx_font_medium" id="S5.T2.4.4.6.2.1.1.1" style="background-color:#D9D9D9;">: LLMs – Zero Shot</span></span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T2.4.4.7.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.4.4.7.1.1">Llama-2-7B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.7.1.2">0.1323</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.7.1.3">0.0278</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.4.4.7.1.4">0.0460</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.8.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.4.4.8.2.1">Llama-2-13B</th>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.8.2.2">0.1422</td>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.8.2.3">0.1083</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.4.4.8.2.4">0.1230</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.9.3" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="4" id="S5.T2.4.4.9.3.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.9.3.1.1" style="background-color:#D9D9D9;">RAGate-Prompt<span class="ltx_text ltx_font_medium" id="S5.T2.4.4.9.3.1.1.1" style="background-color:#D9D9D9;">: LLMs – In-Context Learning</span></span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.10.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.4.4.10.4.1">Llama-2-7B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.10.4.2">0.1417</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.10.4.3">0.0294</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.4.4.10.4.4">0.0487</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.11.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.4.4.11.5.1">Llama-2-13B</th>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.11.5.2">0.0989</td>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.11.5.3">0.0851</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.4.4.11.5.4">0.0915</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.12.6" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="4" id="S5.T2.4.4.12.6.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.12.6.1.1" style="background-color:#D9D9D9;">RAGate-PEFT:<span class="ltx_text ltx_font_medium" id="S5.T2.4.4.12.6.1.1.1" style="background-color:#D9D9D9;"> Parameter Efficient Fine-tuned LLMs (Llama2-7B)</span></span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.1.1.1.1">[contx<math alttext="\oplus" class="ltx_Math" display="inline" id="S5.T2.1.1.1.1.m1.1"><semantics id="S5.T2.1.1.1.1.m1.1a"><mo id="S5.T2.1.1.1.1.m1.1.1" xref="S5.T2.1.1.1.1.m1.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S5.T2.1.1.1.1.m1.1b"><csymbol cd="latexml" id="S5.T2.1.1.1.1.m1.1.1.cmml" xref="S5.T2.1.1.1.1.m1.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.1.1.1.1.m1.1c">\oplus</annotation><annotation encoding="application/x-llamapun" id="S5.T2.1.1.1.1.m1.1d">⊕</annotation></semantics></math>resp]</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.1.2">0.4926</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.1.3">0.3095</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.1.1.1.4">0.3802</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.13.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.4.4.13.7.1">contx-only</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.13.7.2">0.5203</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.13.7.3">0.3359</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.4.4.13.7.4"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.13.7.4.1">0.4082</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.14.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.4.4.14.8.1">contx-(syn-resp)-ner</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.14.8.2"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.14.8.2.1">0.6818</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.14.8.3">0.2321</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.4.4.14.8.4">0.3464</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.15.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.4.4.15.9.1">contx-(syn-resp)-ner-know</th>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.15.9.2">0.4698</td>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.15.9.3">0.0603</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.4.4.15.9.4">0.1069</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.16.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.4.4.16.10.1">contx-(syn-resp)-ner-source</th>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.16.10.2">0.4000</td>
<td class="ltx_td ltx_align_center" id="S5.T2.4.4.16.10.3">0.0185</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.4.4.16.10.4">0.0355</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.17.11" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="4" id="S5.T2.4.4.17.11.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.17.11.1.1" style="background-color:#D9D9D9;">RAGate-MHA:<span class="ltx_text ltx_font_medium" id="S5.T2.4.4.17.11.1.1.1" style="background-color:#D9D9D9;"> Context with / without Knowledge Input</span></span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.18.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S5.T2.4.4.18.12.1">MHA(contx)-h(4)-l(5)-emb(64)</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.18.12.2">0.3210</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.4.4.18.12.3">0.5541</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.4.4.18.12.4">0.4065</td>
</tr>
<tr class="ltx_tr" id="S5.T2.2.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.2.2.2.1">MHA([contx<math alttext="\oplus" class="ltx_Math" display="inline" id="S5.T2.2.2.2.1.m1.1"><semantics id="S5.T2.2.2.2.1.m1.1a"><mo id="S5.T2.2.2.2.1.m1.1.1" xref="S5.T2.2.2.2.1.m1.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S5.T2.2.2.2.1.m1.1b"><csymbol cd="latexml" id="S5.T2.2.2.2.1.m1.1.1.cmml" xref="S5.T2.2.2.2.1.m1.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.2.2.2.1.m1.1c">\oplus</annotation><annotation encoding="application/x-llamapun" id="S5.T2.2.2.2.1.m1.1d">⊕</annotation></semantics></math>know])-h(4)-l(2)-emb(64)</th>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.2.2">0.2795</td>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.2.3">0.5201</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.2.2.2.4">0.3636</td>
</tr>
<tr class="ltx_tr" id="S5.T2.3.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="S5.T2.3.3.3.1">MHA(contx<math alttext="\times" class="ltx_Math" display="inline" id="S5.T2.3.3.3.1.m1.1"><semantics id="S5.T2.3.3.3.1.m1.1a"><mo id="S5.T2.3.3.3.1.m1.1.1" xref="S5.T2.3.3.3.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S5.T2.3.3.3.1.m1.1b"><times id="S5.T2.3.3.3.1.m1.1.1.cmml" xref="S5.T2.3.3.3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.3.3.3.1.m1.1c">\times</annotation><annotation encoding="application/x-llamapun" id="S5.T2.3.3.3.1.m1.1d">×</annotation></semantics></math>know)-h(4)-l(2)-emb(64)</th>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.3.2">0.2272</td>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.3.3"><span class="ltx_text ltx_font_bold" id="S5.T2.3.3.3.3.1">0.5835</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.3.3.3.4">0.3271</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.19.13" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="4" id="S5.T2.4.4.19.13.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.19.13.1.1" style="background-color:#D9D9D9;">RAGate-MHA:<span class="ltx_text ltx_font_medium" id="S5.T2.4.4.19.13.1.1.1" style="background-color:#D9D9D9;"> Context-Response Input</span></span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_l ltx_border_t" id="S5.T2.4.4.4.1">MHA([contx<math alttext="\oplus" class="ltx_Math" display="inline" id="S5.T2.4.4.4.1.m1.1"><semantics id="S5.T2.4.4.4.1.m1.1a"><mo id="S5.T2.4.4.4.1.m1.1.1" xref="S5.T2.4.4.4.1.m1.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S5.T2.4.4.4.1.m1.1b"><csymbol cd="latexml" id="S5.T2.4.4.4.1.m1.1.1.cmml" xref="S5.T2.4.4.4.1.m1.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.4.4.4.1.m1.1c">\oplus</annotation><annotation encoding="application/x-llamapun" id="S5.T2.4.4.4.1.m1.1d">⊕</annotation></semantics></math>resp])-h(4)-l(4)-emb(64)</th>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S5.T2.4.4.4.2">0.3500</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S5.T2.4.4.4.3">0.5510</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S5.T2.4.4.4.4">0.4281</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Classification accuracy on adaptive augmentation for system response. "contx", "resp", and "know" refer to the use of context, initial system response, and retrieved knowledge snippets as input. "syn-resp" and "ner" are the additional synthetic response and name entity recognition steps in the model fine-tuning prompts. <span class="ltx_text ltx_font_italic" id="S5.T2.8.1">h</span>, <span class="ltx_text ltx_font_italic" id="S5.T2.9.2">l</span> and <span class="ltx_text ltx_font_italic" id="S5.T2.10.3">emb</span> refer to the best-performed configuration on the number of heads, layers and embedding size.</figcaption>
</figure>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Augmentation Need Classification</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">First, we evaluate the classification accuracy of our developed RAGate gate methods for addressing the adaptive RAG to system responses. Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T2" title="Table 2 ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">2</span></a> presents the classification performance of RAGate baselines while evaluated on the test collection of the KETOD dataset, which includes rich human labels on the use of RAG for response generation. As discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S3" title="3 Methodology ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>, we explore the development of RAGate with three variants: the use of LLM prompting (RAGate-Prompt), parameter-efficient fine-tuned LLMs (RAGate-PEFT), and a neural classifier with Multi-Head Attention structure (RAGate-MHA).</p>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S5.SS1.p2.1.1">RAGate performance with LLM prompting versus fine-tuning.</span> By comparing the corresponding performance reported in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T2" title="Table 2 ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">2</span></a>, we observe that, on average, fine-tuning a Llama-2-7B with QLoRA (i.e., RAGate-PEFT) can significantly outperform RAGate-Prompt. For example, by looking at the RAG-PEFT with context-only input, without using extra input features and instruction updates, it can outperform all RAG-Prompt approaches by a big margin (e.g., 0.4082 versus the highest 0.1230 F1 scores). This reflects the difficulty of this adaptive knowledge augmentation task, which can not be properly addressed by prompting a general pre-trained language model. In particular, the use of larger language models and the in-context learning setup, which often result in improved performance <cite class="ltx_cite ltx_citemacro_cite">Arora et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib1" title="">2022</a>)</cite>, can not guarantee the enhancement of models’ classification accuracy regarding this classification task.</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.1">Regarding the performance of RAGate-PEFT approaches, by first examining the effect of using synthetic response and recognised name entities, we observe significantly improved precision (0.5203 to 0.6818) but with the cost of lower recall (0.3359 to 0.2321). In addition, when we add the retrieved knowledge to the input features for prediction, we observe a significant performance drop across all evaluated aspects. This can be caused by the additional complexity introduced by the included retrieved knowledge snippets. Furthermore, we also explored the performance impact of naming the source of the knowledge snippet. We use wikiHow<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://www.wikihow.com</span></span></span> in this study, which can provide rich task instructions for offering informative task-oriented system response <cite class="ltx_cite ltx_citemacro_cite">Sen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib27" title="">2023</a>)</cite>. However, the fine-tuned model cannot reasonably connect the promised rich resource from the knowledge source and the prediction of augmentation necessity.</p>
</div>
<div class="ltx_para" id="S5.SS1.p4">
<p class="ltx_p" id="S5.SS1.p4.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S5.SS1.p4.1.1">RAGate Performance between fine-tuned LLM and MHA classifier.</span> Next, by comparing the experimental results of RAGate-MHA and RAGate-PEFT in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T2" title="Table 2 ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">2</span></a>, we observe a wide-margin recall improvement using RAGate-MHA, reaching a minimum recall of 0.52, but with significantly lower precision accuracy. In Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T2" title="Table 2 ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">2</span></a>, we also include the use of both the context and the initial system responses (i.e., MHA([contx, resp])) for additional insights. We can observe that a higher precision can be achieved but the use of response does not improve the recall performance. These results are consistent with the observed performance of RAGate-PEFT, which further encourages the use of a synthetic response due to the unavailability of a system response in a practical scenario. In addition, we also observe a similar performance drop when including the retrieved knowledge snippets for classification. Even though the RAGate-MHA model, using the interaction between context and retrieved knowledge snippets, can achieve the highest recall of 0.5835, it can not outperform the RAGate-MHA using context-only on other metrics. Hence, considering the similar F1 and AUC performance levels of RAGate-PEFT and RAGate-MHA leads to a trade-off balance between precision and recall for the two groups of approaches. To further evaluate the classification effectiveness of RAGate, in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A2" title="Appendix B Impact of Retrieval Quality on Adaptive RAG ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">B</span></a>, we provide a detailed discussion of a conducted user study that explores whether RAGate can also assess the potential contribution of retrieved snippets when predicting the decision for retrieval augmentation.</p>
</div>
<figure class="ltx_figure" id="S5.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="591" id="S5.F3.g1" src="x3.png" width="788"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Frequency analysis of adaptive augmentations about the position of a conversation.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Adaptive Augmentation Analysis</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">In addition to the classification accuracy, we also compare the choice of human workers and RAGate approaches in augmenting specific turns. Specifically, we analyse the frequency of augmentation in different positions of conversations and different domains covered in the KETOD dataset. We use the RAGate-PEFT (contx-(syn-resp)-ner) with the highest precision and RAGate-MHA (MHA(contx)) with the best overall performance in the above analysis as representatives for comparison. Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.F3" title="Figure 3 ‣ 5.1 Augmentation Need Classification ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a> presents the frequency in different positions. Due to the unequal number of conversational turns, we use the ratio to indicate the relative position. According to the reported results in Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.F3" title="Figure 3 ‣ 5.1 Augmentation Need Classification ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>, most human augmentation selections happen at the beginning of a conversation. This trend is also effectively captured by both RAGate approaches, especially RAGate-MHA. This can be caused by the reason that a conversation is semantically coherent, and once sufficient additional information is provided at the early stage, the value of knowledge augmentation to the later turns is naturally lower.</p>
</div>
<figure class="ltx_figure" id="S5.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="778" id="S5.F4.g1" src="x4.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Frequency analysis of adaptive augmentations about dialogue domains.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.1">On the other hand, Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.F4" title="Figure 4 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">4</span></a> presents the augmentation frequency over different domains. We observe that system responses about certain domains are selected more often by humans than other domains, such as travel, hotels, trains, flights, service and rental cars, which require access to additional information to assist the <span class="ltx_text ltx_font_italic" id="S5.SS2.p2.1.1">suggestion-making</span>, and the domains, like movies, music, media, events that often include entities require <span class="ltx_text ltx_font_italic" id="S5.SS2.p2.1.2">enriched description</span>. By looking into the performance of RAGate-PEFT and RAGate-MHA, RAGate-MHA can make aligned selections for humans. However, the RAGate-PEFT does not guarantee the identification of appropriate augmentation use and often presents fewer augmentations, apart from the travel domain. Hence, by considering both position and domain augmentation frequency, we conclude that RAGate-MHA can outperform RAGate-MHA and effectively capture the trend of augmentation needs.</p>
</div>
<figure class="ltx_table" id="S5.T3">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T3.4" style="width:216.8pt;height:159.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-87.5pt,64.3pt) scale(0.553281937715314,0.553281937715314) ;">
<table class="ltx_tabular ltx_align_middle" id="S5.T3.4.4">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T3.4.4.5.1" style="background-color:#FFFFBF;">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_tt" id="S5.T3.4.4.5.1.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.1.1" style="background-color:#FFFFBF;">Variants</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T3.4.4.5.1.2"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.2.1" style="background-color:#FFFFBF;"># Augs</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.4.4.5.1.3"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.3.1" style="background-color:#FFFFBF;">BLEU</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.4.4.5.1.4"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.4.1" style="background-color:#FFFFBF;">ROUGE-L</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.4.4.5.1.5"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.5.1" style="background-color:#FFFFBF;">BERTScore</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.4.4.5.1.6"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.5.1.6.1" style="background-color:#FFFFBF;">Confidence</span></td>
<td class="ltx_td ltx_border_r ltx_border_tt" id="S5.T3.4.4.5.1.7"></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.4" style="background-color:#E6FFE6;">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_tt" id="S5.T3.4.4.4.5"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.4.5.1" style="background-color:#E6FFE6;">No-Aug</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T3.4.4.4.6"><span class="ltx_text" id="S5.T3.4.4.4.6.1" style="background-color:#E6FFE6;">0</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.1.1.1.1"><span class="ltx_text" id="S5.T3.1.1.1.1.1" style="background-color:#E6FFE6;">9.38<math alttext="\bullet" class="ltx_Math" display="inline" id="S5.T3.1.1.1.1.1.m1.1" style="background-color:#E6FFE6;"><semantics id="S5.T3.1.1.1.1.1.m1.1a"><mo id="S5.T3.1.1.1.1.1.m1.1.1" mathbackground="#E6FFE6" xref="S5.T3.1.1.1.1.1.m1.1.1.cmml">∙</mo><annotation-xml encoding="MathML-Content" id="S5.T3.1.1.1.1.1.m1.1b"><ci id="S5.T3.1.1.1.1.1.m1.1.1.cmml" xref="S5.T3.1.1.1.1.1.m1.1.1">∙</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.1.1.1.1.1.m1.1c">\bullet</annotation><annotation encoding="application/x-llamapun" id="S5.T3.1.1.1.1.1.m1.1d">∙</annotation></semantics></math></span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.2.2.2.2"><span class="ltx_text" id="S5.T3.2.2.2.2.1" style="background-color:#E6FFE6;">0.3780<math alttext="\bullet" class="ltx_Math" display="inline" id="S5.T3.2.2.2.2.1.m1.1" style="background-color:#E6FFE6;"><semantics id="S5.T3.2.2.2.2.1.m1.1a"><mo id="S5.T3.2.2.2.2.1.m1.1.1" mathbackground="#E6FFE6" xref="S5.T3.2.2.2.2.1.m1.1.1.cmml">∙</mo><annotation-xml encoding="MathML-Content" id="S5.T3.2.2.2.2.1.m1.1b"><ci id="S5.T3.2.2.2.2.1.m1.1.1.cmml" xref="S5.T3.2.2.2.2.1.m1.1.1">∙</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.2.2.2.2.1.m1.1c">\bullet</annotation><annotation encoding="application/x-llamapun" id="S5.T3.2.2.2.2.1.m1.1d">∙</annotation></semantics></math></span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.3.3.3.3"><span class="ltx_text" id="S5.T3.3.3.3.3.1" style="background-color:#E6FFE6;">0.8105<math alttext="\bullet" class="ltx_Math" display="inline" id="S5.T3.3.3.3.3.1.m1.1" style="background-color:#E6FFE6;"><semantics id="S5.T3.3.3.3.3.1.m1.1a"><mo id="S5.T3.3.3.3.3.1.m1.1.1" mathbackground="#E6FFE6" xref="S5.T3.3.3.3.3.1.m1.1.1.cmml">∙</mo><annotation-xml encoding="MathML-Content" id="S5.T3.3.3.3.3.1.m1.1b"><ci id="S5.T3.3.3.3.3.1.m1.1.1.cmml" xref="S5.T3.3.3.3.3.1.m1.1.1">∙</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.3.3.3.3.1.m1.1c">\bullet</annotation><annotation encoding="application/x-llamapun" id="S5.T3.3.3.3.3.1.m1.1d">∙</annotation></semantics></math></span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.4.4.4.4"><span class="ltx_text" id="S5.T3.4.4.4.4.1" style="background-color:#E6FFE6;">9.3425<math alttext="\bullet" class="ltx_Math" display="inline" id="S5.T3.4.4.4.4.1.m1.1" style="background-color:#E6FFE6;"><semantics id="S5.T3.4.4.4.4.1.m1.1a"><mo id="S5.T3.4.4.4.4.1.m1.1.1" mathbackground="#E6FFE6" xref="S5.T3.4.4.4.4.1.m1.1.1.cmml">∙</mo><annotation-xml encoding="MathML-Content" id="S5.T3.4.4.4.4.1.m1.1b"><ci id="S5.T3.4.4.4.4.1.m1.1.1.cmml" xref="S5.T3.4.4.4.4.1.m1.1.1">∙</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.4.4.4.4.1.m1.1c">\bullet</annotation><annotation encoding="application/x-llamapun" id="S5.T3.4.4.4.4.1.m1.1d">∙</annotation></semantics></math></span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S5.T3.4.4.4.7"><span class="ltx_text" id="S5.T3.4.4.4.7.1" style="background-color:#E6FFE6;">–</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.6.2" style="background-color:#D9D9D9;">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" colspan="7" id="S5.T3.4.4.6.2.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.6.2.1.1" style="background-color:#D9D9D9;">Augment BERT Ranker Retrieved Knowledge</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.7.3">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.7.3.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.7.3.1.1">RAGate-PEFT</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.7.3.2">230</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.7.3.3">10.45</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.7.3.4">0.3825</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.7.3.5">0.8144</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.7.3.6">9.3374</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.7.3.7">-0.05%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.8.4">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.8.4.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.8.4.1.1">RAGate-MHA</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.8.4.2">787</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.8.4.3">12.14</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.8.4.4">0.3882</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.8.4.5">0.8192</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.8.4.6">9.3083</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.8.4.7">-0.36%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.9.5" style="background-color:#F2F2F2;">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.9.5.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.9.5.1.1" style="background-color:#F2F2F2;">Random-Aug</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.9.5.2"><span class="ltx_text" id="S5.T3.4.4.9.5.2.1" style="background-color:#F2F2F2;">230</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.9.5.3"><span class="ltx_text" id="S5.T3.4.4.9.5.3.1" style="background-color:#F2F2F2;">9.53</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.9.5.4"><span class="ltx_text" id="S5.T3.4.4.9.5.4.1" style="background-color:#F2F2F2;">0.3784</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.9.5.5"><span class="ltx_text" id="S5.T3.4.4.9.5.5.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.9.5.6"><span class="ltx_text" id="S5.T3.4.4.9.5.6.1" style="background-color:#F2F2F2;">9.2984</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.9.5.7"><span class="ltx_text" id="S5.T3.4.4.9.5.7.1" style="background-color:#F2F2F2;">-0.47%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.10.6" style="background-color:#F2F2F2;">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.10.6.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.10.6.1.1" style="background-color:#F2F2F2;">Random-Aug</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.10.6.2"><span class="ltx_text" id="S5.T3.4.4.10.6.2.1" style="background-color:#F2F2F2;">787</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.10.6.3"><span class="ltx_text" id="S5.T3.4.4.10.6.3.1" style="background-color:#F2F2F2;">10.01</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.10.6.4"><span class="ltx_text" id="S5.T3.4.4.10.6.4.1" style="background-color:#F2F2F2;">0.3795</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.10.6.5"><span class="ltx_text" id="S5.T3.4.4.10.6.5.1" style="background-color:#F2F2F2;">0.8126</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.10.6.6"><span class="ltx_text" id="S5.T3.4.4.10.6.6.1" style="background-color:#F2F2F2;">9.1877</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.10.6.7"><span class="ltx_text" id="S5.T3.4.4.10.6.7.1" style="background-color:#F2F2F2;">-1.65%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.11.7">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.11.7.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.11.7.1.1">Human-label</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.11.7.2">631</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.11.7.3">11.66</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.11.7.4">0.3856</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.11.7.5">0.8176</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.11.7.6">9.2550</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.11.7.7">-0.93%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.12.8" style="background-color:#F2E6F2;">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.12.8.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.12.8.1.1" style="background-color:#F2E6F2;">Aug-All</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.12.8.2"><span class="ltx_text" id="S5.T3.4.4.12.8.2.1" style="background-color:#F2E6F2;">4964</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.12.8.3"><span class="ltx_text" id="S5.T3.4.4.12.8.3.1" style="background-color:#F2E6F2;">16.08</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.12.8.4"><span class="ltx_text" id="S5.T3.4.4.12.8.4.1" style="background-color:#F2E6F2;">0.3927</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.12.8.5"><span class="ltx_text" id="S5.T3.4.4.12.8.5.1" style="background-color:#F2E6F2;">0.8258</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.12.8.6"><span class="ltx_text" id="S5.T3.4.4.12.8.6.1" style="background-color:#F2E6F2;">8.3677</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.12.8.7"><span class="ltx_text" id="S5.T3.4.4.12.8.7.1" style="background-color:#F2E6F2;">-10.43%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.13.9" style="background-color:#D9D9D9;">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" colspan="7" id="S5.T3.4.4.13.9.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.13.9.1.1" style="background-color:#D9D9D9;">Augment Rank-1 Relevant Knowledge</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.14.10">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_t" id="S5.T3.4.4.14.10.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.14.10.1.1">RAGate-Llama</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.4.14.10.2">230</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.4.4.14.10.3">10.54</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.4.4.14.10.4">0.3822</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.4.4.14.10.5">0.8142</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.4.4.14.10.6">9.3642</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T3.4.4.14.10.7">+0.23%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.15.11">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.15.11.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.15.11.1.1">RAGate-MHA</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.15.11.2">787</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.15.11.3">11.99</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.15.11.4">0.3883</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.15.11.5">0.8191</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.15.11.6"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.15.11.6.1">9.3774</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.15.11.7">+0.37%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.16.12" style="background-color:#F2F2F2;">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.16.12.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.16.12.1.1" style="background-color:#F2F2F2;">Random-Aug</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.16.12.2"><span class="ltx_text" id="S5.T3.4.4.16.12.2.1" style="background-color:#F2F2F2;">230</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.16.12.3"><span class="ltx_text" id="S5.T3.4.4.16.12.3.1" style="background-color:#F2F2F2;">9.51</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.16.12.4"><span class="ltx_text" id="S5.T3.4.4.16.12.4.1" style="background-color:#F2F2F2;">0.3784</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.16.12.5"><span class="ltx_text" id="S5.T3.4.4.16.12.5.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.16.12.6"><span class="ltx_text" id="S5.T3.4.4.16.12.6.1" style="background-color:#F2F2F2;">9.3328</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.16.12.7"><span class="ltx_text" id="S5.T3.4.4.16.12.7.1" style="background-color:#F2F2F2;">-0.10%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.17.13" style="background-color:#F2F2F2;">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.17.13.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.17.13.1.1" style="background-color:#F2F2F2;">Random-Aug</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.17.13.2"><span class="ltx_text" id="S5.T3.4.4.17.13.2.1" style="background-color:#F2F2F2;">787</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.17.13.3"><span class="ltx_text" id="S5.T3.4.4.17.13.3.1" style="background-color:#F2F2F2;">10.01</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.17.13.4"><span class="ltx_text" id="S5.T3.4.4.17.13.4.1" style="background-color:#F2F2F2;">0.3800</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.17.13.5"><span class="ltx_text" id="S5.T3.4.4.17.13.5.1" style="background-color:#F2F2F2;">0.8127</span></td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.17.13.6"><span class="ltx_text" id="S5.T3.4.4.17.13.6.1" style="background-color:#F2F2F2;">9.2982</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.17.13.7"><span class="ltx_text" id="S5.T3.4.4.17.13.7.1" style="background-color:#F2F2F2;">-0.47%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.18.14">
<td class="ltx_td ltx_align_left ltx_border_l" id="S5.T3.4.4.18.14.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.18.14.1.1">Human-label</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.18.14.2">631</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.18.14.3">11.52</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.18.14.4">0.3846</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.18.14.5">0.8170</td>
<td class="ltx_td ltx_align_left" id="S5.T3.4.4.18.14.6">9.3218</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.4.4.18.14.7">-0.22%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.19.15" style="background-color:#F2E6F2;">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_l" id="S5.T3.4.4.19.15.1"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.19.15.1.1" style="background-color:#F2E6F2;">Augment-All</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.4.4.19.15.2"><span class="ltx_text" id="S5.T3.4.4.19.15.2.1" style="background-color:#F2E6F2;">4964</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T3.4.4.19.15.3"><span class="ltx_text" id="S5.T3.4.4.19.15.3.1" style="background-color:#F2E6F2;">16.05</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T3.4.4.19.15.4"><span class="ltx_text" id="S5.T3.4.4.19.15.4.1" style="background-color:#F2E6F2;">0.3944</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T3.4.4.19.15.5"><span class="ltx_text" id="S5.T3.4.4.19.15.5.1" style="background-color:#F2E6F2;">0.8259</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T3.4.4.19.15.6"><span class="ltx_text" id="S5.T3.4.4.19.15.6.1" style="background-color:#F2E6F2;">9.0655</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S5.T3.4.4.19.15.7"><span class="ltx_text" id="S5.T3.4.4.19.15.7.1" style="background-color:#F2E6F2;">-2.9%</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Performance of applying RAGate and compared to the KETOD baseline on the KETOD dataset. Confidence is calculated by the average value over the lowest logit of each generation.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>RAGate for Response Generation</h3>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">To evaluate the effect of adaptive RAG for a conversational system, we use RAGate-PEFT (contx-(syn-resp)-ner) with the highest precision and RAGate-MHA (MHA(contx)) with the best overall performance in the above analysis, to support the adaptive retrieval augmented conversational response generation. Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T3" title="Table 3 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a> presents the results of applying RAGAte to the KETOD model for adaptive knowledge augmentation when evaluated on the KETOD dataset. We include four types of adaptive augmentation, namely the use of RAGate and comparison to the random selection with equal numbers of selections, human choice, and the commonly used "all" augmentation.
In addition, to explore the effect of varied quality of knowledge snippets, we also extend the evaluation of using the top-3 knowledge snippets ranked by different retrievers (i.e., BERT-ranker and TF-IDF) and the use of knowledge snippets at the 1st and 5th rank according to the BERT-ranker. Due to the space limit, we first present the results of using BERT-ranker retrieved and top-1 relevant knowledge and top-1 relevant in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T3" title="Table 3 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a> and show the full results in the Appendix <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A3" title="Appendix C Additional experimental results about RAGate for Response Generation ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">C</span></a>.</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">At first, without adaptive knowledge augmentation, we compare the choice of response generation without augmentation and with "always" augmentation (i.e., No-Aug versus Aug-All). In Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T3" title="Table 3 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>, we observe that by augmenting a total of 4,964 system responses in the test collection, the conversational model can generate more informative and effective responses according to the reported scores of BLEU, ROUGE and BERTscore. This aligns with the reported effectiveness of RAG in many existing studies. However, we also identify a significant drop in the model’s generation confidence level. As denoted by <cite class="ltx_cite ltx_citemacro_citet">Varshney et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib31" title="">2023</a>)</cite>, a lower confidence level can correlate with a higher chance of generating hallucinated responses, which could be caused by the unnecessary use of external knowledge. Hence, to investigate the effectiveness of adaptive knowledge augmentation, we examine the impact of using RAGate. According to the reported experimental results in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T3" title="Table 3 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>, the adaptive augmented response generation with fewer knowledge snippets can indeed result in a higher confidence level than Aug-All.</p>
</div>
<div class="ltx_para" id="S5.SS3.p3">
<p class="ltx_p" id="S5.SS3.p3.1">Moreover, comparing the performance between RAGate and random selections shows that, considering equal numbers (230 or 787 according to the classification with RAGate) of system responses for augmentation, RAGate can further result in a higher quality of generated response. RAGate-MHA even enables results that are comparable to Aug-All’s response quality, with only 787 turn augmentations instead of all 4964 turns. Specifically, the use of RAGate-PEFT, which identifies 230 turns of system responses for knowledge augmentation, can even outperform the random baseline that augments 787 system response turns with improved response quality.
Apart from the improved response quality, RAGate also enables the conversational model to maintain a high confidence level and ensure faithful responses. Indeed, using RAGate-MHA, which augments 787 system responses, only lowers the average confidence score by 0.36%, instead of the 1.65% when randomly selecting an equal number of turns to augment.</p>
</div>
<div class="ltx_para" id="S5.SS3.p4">
<p class="ltx_p" id="S5.SS3.p4.1">In addition, considering the use of different quality and amount of knowledge snippets for augmentation, we also include the use of the most relevant knowledge snippet according to BERT-ranker in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#S5.T3" title="Table 3 ‣ 5.2 Adaptive Augmentation Analysis ‣ 5 Results and Analysis ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">3</span></a>. We observe that the use of different amounts of knowledge snippets in different relevance levels has a marginal effect on this learned dialogue system. However, we observe a significant difference in the confidence level. We observe that using only the most relevant knowledge snippet enables the Aug-All to suffer less from a lower confidence level. In particular, the application of RAGate can even increase the confidence level of the conversation system in response generation. This indicates that the confidence score can also correlate with the quality of the augmented knowledge snippets. This observation is further validated using knowledge snippets with fifth-ranking positions by BERT-ranker and the use of TF-IDF ranker.
We include the full experimental results in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A1.T4" title="Table 4 ‣ Appendix A Prompts for RAGate-Prompt ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">4</span></a> and attached in the Appendix.
These observations indicate the value of adaptive system response augmentation via RAGate in generating high-quality outputs, ensuring faithful responses, and potentially saving retrieval costs. We also show the value of using confidence scores to reflect the contribution of RAG.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusions</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">Our study investigates a core research question about whether retrieval-augmented generation is always useful to a conversational system. To answer this research question, we propose adaptive retrieval-augmented generation for conversational systems and introduce corresponding gate functions, RAGate, for explicit control. A comprehensive set of experiments and results show the RAGate approaches can effectively identify augmentation needs. In addition, RAGate can capture human preference by augmenting the beginning turns of conversations, and RAGate can further identify knowledge augmentation for assisting suggestion-making and enriching description. When applying RAGate to conversational systems, we observe that it can ensure comparable quality of generated responses and enable the system to increase generation confidence for faithful outputs, especially with the appropriate use of relevant knowledge snippets.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Limitations</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">There are three limitations of this study. At first, due to the main focus of examining the adaptive retrieval-augmented generation for a conversation system. We only consider a few examples of retrieval techniques (TF-IDF and BERT-ranker), which can be further extended to recent retrieval techniques, such as dense passage retrieval for additional insights. The second limitation is the missing use of larger language models, such as GPT-4, due to the shortage of computational resources. Including larger language models for conversational systems could introduce additional experimental insights. The third limitation is the shortage of appropriate conversational data for extensive evaluations. This is mainly caused by the recent development of the retrieval augmented generation technique and its application to conversational systems. Future research is encouraged to address this limitation.</p>
</div>
</section>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Ethics Statement</h2>
<div class="ltx_para" id="Sx2.p1">
<p class="ltx_p" id="Sx2.p1.1">All experiments in this study were conducted using publicly available datasets and open-released language models, which do not contain any private information that could raise ethical concerns.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Arora et al. (2022)</span>
<span class="ltx_bibblock">
Simran Arora, Avanika Narayan, Mayee F Chen, Laurel Orr, Neel Guha, Kush
Bhatia, Ines Chami, and Christopher Re. 2022.

</span>
<span class="ltx_bibblock">Ask me anything: A simple strategy for prompting language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">The Eleventh International Conference on Learning
Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ba et al. (2016)</span>
<span class="ltx_bibblock">
Jimmy Lei Ba, Jamie Ryan Kiros, and Geoffrey E Hinton. 2016.

</span>
<span class="ltx_bibblock">Layer normalization.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:1607.06450</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2022)</span>
<span class="ltx_bibblock">
Zhiyu Chen, Bing Liu, Seungwhan Moon, Chinnadhurai Sankar, Paul A Crook, and
William Yang Wang. 2022.

</span>
<span class="ltx_bibblock">Ketod: Knowledge-enriched task-oriented dialogue.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Findings of the Association for Computational Linguistics:
NAACL 2022</em>, pages 2581–2593.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dettmers et al. (2024)</span>
<span class="ltx_bibblock">
Tim Dettmers, Artidoro Pagnoni, Ari Holtzman, and Luke Zettlemoyer. 2024.

</span>
<span class="ltx_bibblock">Qlora: Efficient finetuning of quantized llms.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dinan et al. (2018)</span>
<span class="ltx_bibblock">
Emily Dinan, Stephen Roller, Kurt Shuster, Angela Fan, Michael Auli, and Jason
Weston. 2018.

</span>
<span class="ltx_bibblock">Wizard of wikipedia: Knowledge-powered conversational agents.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Graves and Graves (2012)</span>
<span class="ltx_bibblock">
Alex Graves and Alex Graves. 2012.

</span>
<span class="ltx_bibblock">Long short-term memory.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Supervised sequence labelling with recurrent neural networks</em>,
pages 37–45.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">He et al. (2016)</span>
<span class="ltx_bibblock">
Kaiming He, Xiangyu Zhang, Shaoqing Ren, and Jian Sun. 2016.

</span>
<span class="ltx_bibblock">Deep residual learning for image recognition.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of the IEEE conference on computer vision and
pattern recognition</em>, pages 770–778.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hong et al. (2023)</span>
<span class="ltx_bibblock">
Taesuk Hong, Junhee Cho, Haeun Yu, Youngjoong Ko, and Jungyun Seo. 2023.

</span>
<span class="ltx_bibblock">Knowledge-grounded dialogue modelling with dialogue-state tracking,
domain tracking, and entity extraction.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Computer Speech &amp; Language</em>, 78:101460.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2021)</span>
<span class="ltx_bibblock">
Edward J Hu, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu Wang,
Weizhu Chen, et al. 2021.

</span>
<span class="ltx_bibblock">Lora: Low-rank adaptation of large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2021)</span>
<span class="ltx_bibblock">
Xinxian Huang, Huang He, Siqi Bao, Fan Wang, Hua Wu, and Haifeng Wang. 2021.

</span>
<span class="ltx_bibblock">Plato-kag: Unsupervised knowledge-grounded conversation via joint
modeling.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Proc. of NLP4ConvAI</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jin et al. (2021)</span>
<span class="ltx_bibblock">
Di Jin, Shuyang Gao, Seokhwan Kim, Yang Liu, and Dilek Hakkani-Tur. 2021.

</span>
<span class="ltx_bibblock">Towards zero and few-shot knowledge-seeking turn detection in
task-orientated dialogue systems.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">3rd Workshop on Natural Language Processing for
Conversational AI, NLP4ConvAI 2021</em>, pages 281–288.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kang et al. (2023)</span>
<span class="ltx_bibblock">
Minki Kang, Jin Myung Kwak, Jinheon Baek, and Sung Ju Hwang. 2023.

</span>
<span class="ltx_bibblock">Knowledge graph-augmented language models for knowledge-grounded
dialogue generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2305.18846</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karpukhin et al. (2020)</span>
<span class="ltx_bibblock">
Vladimir Karpukhin, Barlas Oguz, Sewon Min, Patrick Lewis, Ledell Wu, Sergey
Edunov, Danqi Chen, and Wen-tau Yih. 2020.

</span>
<span class="ltx_bibblock">Dense passage retrieval for open-domain question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proc. of EMNLP</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kasirzadeh and Gabriel (2023)</span>
<span class="ltx_bibblock">
Atoosa Kasirzadeh and Iason Gabriel. 2023.

</span>
<span class="ltx_bibblock">In conversation with artificial intelligence: aligning language
models with human values.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Philosophy &amp; Technology</em>, 36(2):27.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kim et al. (2020)</span>
<span class="ltx_bibblock">
Seokhwan Kim, Mihail Eric, Karthik Gopalakrishnan, Behnam Hedayatnia, Yang Liu,
and Dilek Hakkani-Tur. 2020.

</span>
<span class="ltx_bibblock">Beyond domain apis: Task-oriented conversational modeling with
unstructured knowledge access.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Proc. of SIGDIAL</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Komeili et al. (2022)</span>
<span class="ltx_bibblock">
Mojtaba Komeili, Kurt Shuster, and Jason Weston. 2022.

</span>
<span class="ltx_bibblock">Internet-augmented dialogue generation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Proceedings of the 60th Annual Meeting of the Association
for Computational Linguistics (Volume 1: Long Papers)</em>, pages 8460–8478.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim
Rocktäschel, et al. 2020.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Advances in Neural Information Processing Systems</em>,
33:9459–9474.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2022)</span>
<span class="ltx_bibblock">
Yu Li, Baolin Peng, Yelong Shen, Yi Mao, Lars Liden, Zhou Yu, and Jianfeng Gao.
2022.

</span>
<span class="ltx_bibblock">Knowledge-grounded dialogue generation with a unified knowledge
representation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Proceedings of the 2022 Conference of the North American
Chapter of the Association for Computational Linguistics: Human Language
Technologies</em>, pages 206–218.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lian et al. (2019)</span>
<span class="ltx_bibblock">
Rongzhong Lian, Min Xie, Fan Wang, Jinhua Peng, and Hua Wu. 2019.

</span>
<span class="ltx_bibblock">Learning to select knowledge for response generation in dialog
systems.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Proc. of IJCAI</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mangrulkar et al. (2022)</span>
<span class="ltx_bibblock">
Sourab Mangrulkar, Sylvain Gugger, Lysandre Debut, Younes Belkada, Sayak Paul,
and Benjamin Bossan. 2022.

</span>
<span class="ltx_bibblock">Peft: State-of-the-art parameter-efficient fine-tuning methods.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/huggingface/peft" title="">https://github.com/huggingface/peft</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Miehling et al. (2024)</span>
<span class="ltx_bibblock">
Erik Miehling, Manish Nagireddy, Prasanna Sattigeri, Elizabeth M Daly, David
Piorkowski, and John T Richards. 2024.

</span>
<span class="ltx_bibblock">Language models in dialogue: Conversational maxims for human-ai
interactions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2403.15115</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ni et al. (2023)</span>
<span class="ltx_bibblock">
Jinjie Ni, Tom Young, Vlad Pandelea, Fuzhao Xue, and Erik Cambria. 2023.

</span>
<span class="ltx_bibblock">Recent advances in deep learning based dialogue systems: A systematic
survey.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Artificial intelligence review</em>, 56(4):3055–3155.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Onoe et al. (2022)</span>
<span class="ltx_bibblock">
Yasumasa Onoe, Michael Zhang, Eunsol Choi, and Greg Durrett. 2022.

</span>
<span class="ltx_bibblock">Entity cloze by date: What lms know about unseen entities.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Proc. of NAACL</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford et al. (2019)</span>
<span class="ltx_bibblock">
Alec Radford, Jeffrey Wu, Rewon Child, David Luan, Dario Amodei, Ilya
Sutskever, et al. 2019.

</span>
<span class="ltx_bibblock">Language models are unsupervised multitask learners.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">OpenAI blog</em>, 1(8):9.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ren et al. (2018)</span>
<span class="ltx_bibblock">
Liliang Ren, Kaige Xie, Lu Chen, and Kai Yu. 2018.

</span>
<span class="ltx_bibblock">Towards universal dialogue state tracking.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Proc. of EMNLP</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Salemi and Zamani (2024)</span>
<span class="ltx_bibblock">
Alireza Salemi and Hamed Zamani. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2404.13781" title="">Evaluating retrieval
quality in retrieval-augmented generation</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">Preprint</em>, arXiv:2404.13781.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sen et al. (2023)</span>
<span class="ltx_bibblock">
Procheta Sen, Xi Wang, Ruiqing Xu, and Emine Yilmaz. 2023.

</span>
<span class="ltx_bibblock">Task2kb: A public task-oriented knowledge base.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Proceedings of the AAAI Conference on Artificial
Intelligence</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shen et al. (2023)</span>
<span class="ltx_bibblock">
Weizhou Shen, Yingqi Gao, Canbin Huang, Fanqi Wan, Xiaojun Quan, and Wei Bi.
2023.

</span>
<span class="ltx_bibblock">Retrieval-generation alignment for end-to-end task-oriented dialogue
system.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2310.08877</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Tianyuan Shi, Liangzhi Li, Zijian Lin, Tao Yang, Xiaojun Quan, and Qifan Wang.
2023.

</span>
<span class="ltx_bibblock">Dual-feedback knowledge retrieval for task-oriented dialogue systems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">arXiv preprint arXiv:2310.14528</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shuster et al. (2021)</span>
<span class="ltx_bibblock">
Kurt Shuster, Spencer Poff, Moya Chen, Douwe Kiela, and Jason Weston. 2021.

</span>
<span class="ltx_bibblock">Retrieval augmentation reduces hallucination in conversation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Proc. of EMNLP</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Varshney et al. (2023)</span>
<span class="ltx_bibblock">
Neeraj Varshney, Wenlin Yao, Hongming Zhang, Jianshu Chen, and Dong Yu. 2023.

</span>
<span class="ltx_bibblock">A stitch in time saves nine: Detecting and mitigating hallucinations
of llms by validating low-confidence generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">arXiv preprint arXiv:2307.03987</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vaswani et al. (2017)</span>
<span class="ltx_bibblock">
Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones,
Aidan N Gomez, Łukasz Kaiser, and Illia Polosukhin. 2017.

</span>
<span class="ltx_bibblock">Attention is all you need.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Advances in neural information processing systems</em>, 30.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Hongru Wang, Wenyu Huang, Yang Deng, Rui Wang, Zezhong Wang, Yufei Wang, Fei
Mi, Jeff Z Pan, and Kam-Fai Wong. 2024.

</span>
<span class="ltx_bibblock">Unims-rag: A unified multi-source retrieval-augmented generation for
personalized dialogue systems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">arXiv preprint arXiv:2401.13256</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2020)</span>
<span class="ltx_bibblock">
Shiquan Yang, Rui Zhang, and Sarah Erfani. 2020.

</span>
<span class="ltx_bibblock">Graphdialog: Integrating graph knowledge into end-to-end
task-oriented dialogue systems.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Proc. of EMNLP</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ye et al. (2024)</span>
<span class="ltx_bibblock">
Linhao Ye, Zhikai Lei, Jianghao Yin, Qin Chen, Jie Zhou, and Liang He. 2024.

</span>
<span class="ltx_bibblock">Boosting conversational question answering with fine-grained
retrieval-augmentation and self-check.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">arXiv preprint arXiv:2403.18243</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2024)</span>
<span class="ltx_bibblock">
Hao Yu, Aoran Gan, Kai Zhang, Shiwei Tong, Qi Liu, and Zhaofeng Liu. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2405.07437" title="">Evaluation of
retrieval-augmented generation: A survey</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">Preprint</em>, arXiv:2405.07437.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2020)</span>
<span class="ltx_bibblock">
Xueliang Zhao, Wei Wu, Can Xu, Chongyang Tao, Dongyan Zhao, and Rui Yan. 2020.

</span>
<span class="ltx_bibblock">Knowledge-grounded dialogue generation with pre-trained language
models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Proc. of EMNLP</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2018)</span>
<span class="ltx_bibblock">
Kangyan Zhou, Shrimai Prabhumoye, and Alan W Black. 2018.

</span>
<span class="ltx_bibblock">A dataset for document grounded conversations.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">Proceedings of the 2018 Conference on Empirical Methods in
Natural Language Processing</em>, pages 708–713.

</span>
</li>
</ul>
</section>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Prompts for RAGate-Prompt</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">In this section, we list the used prompts for the RAGate-Prompt gate mechanism.</p>
</div>
<div class="ltx_para" id="A1.p2">
<p class="ltx_p" id="A1.p2.1"><span class="ltx_text ltx_font_bold" id="A1.p2.1.1">Zero-Shot Prompt: </span></p>
</div>
<div class="ltx_para" id="A1.p3">
<p class="ltx_p" id="A1.p3.1">Below is an instruction that describes a task. Please respond with ‘True’ or ‘False’ only that appropriately completes the request.</p>
</div>
<div class="ltx_para" id="A1.p4">
<p class="ltx_p" id="A1.p4.1">### Instruction: Analyse the conversational context so far. Generate an appropriate response. Consider the invovled entites. Estimate if augmenting the response with external knowledge is helpful with an output of ‘True’ or ‘False’ only.</p>
</div>
<div class="ltx_para" id="A1.p5">
<p class="ltx_p" id="A1.p5.1">### Input: [Converstion Context Input]</p>
</div>
<div class="ltx_para" id="A1.p6">
<p class="ltx_p" id="A1.p6.1">### Response:</p>
</div>
<figure class="ltx_table" id="A1.T4">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A1.T4.1" style="width:346.9pt;height:377.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-74.4pt,81.0pt) scale(0.699839424196464,0.699839424196464) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A1.T4.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T4.1.1.1.1" style="background-color:#FFFFBF;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_tt" id="A1.T4.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.1.1" style="background-color:#FFFFBF;">Augmentation Variants</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A1.T4.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.2.1" style="background-color:#FFFFBF;"># Augs</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.3.1" style="background-color:#FFFFBF;">BLEU</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.4.1" style="background-color:#FFFFBF;">ROUGE-1</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.1.1.5"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.5.1" style="background-color:#FFFFBF;">ROUGE-2</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.1.1.6"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.6.1" style="background-color:#FFFFBF;">ROUGE-L</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.1.1.7"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.7.1" style="background-color:#FFFFBF;">BERTScore</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" id="A1.T4.1.1.1.1.8"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.1.1.8.1" style="background-color:#FFFFBF;">Confidence</span></th>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.2.2" style="background-color:#E6FFE6;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_tt" id="A1.T4.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.2.2.1.1" style="background-color:#E6FFE6;">No-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A1.T4.1.1.2.2.2"><span class="ltx_text" id="A1.T4.1.1.2.2.2.1" style="background-color:#E6FFE6;">0</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.2.2.3"><span class="ltx_text" id="A1.T4.1.1.2.2.3.1" style="background-color:#E6FFE6;">9.38</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.2.2.4"><span class="ltx_text" id="A1.T4.1.1.2.2.4.1" style="background-color:#E6FFE6;">0.4111</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.2.2.5"><span class="ltx_text" id="A1.T4.1.1.2.2.5.1" style="background-color:#E6FFE6;">0.2246</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.2.2.6"><span class="ltx_text" id="A1.T4.1.1.2.2.6.1" style="background-color:#E6FFE6;">0.3780</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T4.1.1.2.2.7"><span class="ltx_text" id="A1.T4.1.1.2.2.7.1" style="background-color:#E6FFE6;">0.8105</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" id="A1.T4.1.1.2.2.8"><span class="ltx_text" id="A1.T4.1.1.2.2.8.1" style="background-color:#E6FFE6;">9.3425</span></th>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.3.3" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="8" id="A1.T4.1.1.3.3.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.3.3.1.1" style="background-color:#D9D9D9;">Augment BERT Ranker Retrieved Knowledge</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T4.1.1.4.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.4.1.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.4.1.1.1">RAGate-Llama</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.4.1.2">230</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.4.1.3">10.45</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.4.1.4">0.4165</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.4.1.5">0.2273</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.4.1.6">0.3825</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.4.1.7">0.8144</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.4.1.8">9.3374</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.5.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.5.2.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.5.2.1.1">RAGate-MHA</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.5.2.2">787</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.5.2.3">12.14</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.5.2.4">0.4227</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.5.2.5">0.2318</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.5.2.6">0.3882</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.5.2.7">0.8192</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.5.2.8">9.3083</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.6.3" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.6.3.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.6.3.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.6.3.2"><span class="ltx_text" id="A1.T4.1.1.6.3.2.1" style="background-color:#F2F2F2;">230</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.6.3.3"><span class="ltx_text" id="A1.T4.1.1.6.3.3.1" style="background-color:#F2F2F2;">9.53</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.6.3.4"><span class="ltx_text" id="A1.T4.1.1.6.3.4.1" style="background-color:#F2F2F2;">0.4119</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.6.3.5"><span class="ltx_text" id="A1.T4.1.1.6.3.5.1" style="background-color:#F2F2F2;">0.2250</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.6.3.6"><span class="ltx_text" id="A1.T4.1.1.6.3.6.1" style="background-color:#F2F2F2;">0.3784</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.6.3.7"><span class="ltx_text" id="A1.T4.1.1.6.3.7.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.6.3.8"><span class="ltx_text" id="A1.T4.1.1.6.3.8.1" style="background-color:#F2F2F2;">9.2984</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.7.4" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.7.4.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.7.4.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.7.4.2"><span class="ltx_text" id="A1.T4.1.1.7.4.2.1" style="background-color:#F2F2F2;">787</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.7.4.3"><span class="ltx_text" id="A1.T4.1.1.7.4.3.1" style="background-color:#F2F2F2;">10.01</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.7.4.4"><span class="ltx_text" id="A1.T4.1.1.7.4.4.1" style="background-color:#F2F2F2;">0.4138</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.7.4.5"><span class="ltx_text" id="A1.T4.1.1.7.4.5.1" style="background-color:#F2F2F2;">0.2265</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.7.4.6"><span class="ltx_text" id="A1.T4.1.1.7.4.6.1" style="background-color:#F2F2F2;">0.3795</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.7.4.7"><span class="ltx_text" id="A1.T4.1.1.7.4.7.1" style="background-color:#F2F2F2;">0.8126</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.7.4.8"><span class="ltx_text" id="A1.T4.1.1.7.4.8.1" style="background-color:#F2F2F2;">9.1877</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.8.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.8.5.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.8.5.1.1">Human-label</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.8.5.2">631</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.8.5.3">11.66</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.8.5.4">0.4198</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.8.5.5">0.2297</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.8.5.6">0.3856</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.8.5.7">0.8176</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.8.5.8">9.2550</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.9.6" style="background-color:#F2E6F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.9.6.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.9.6.1.1" style="background-color:#F2E6F2;">Augment-All</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.9.6.2"><span class="ltx_text" id="A1.T4.1.1.9.6.2.1" style="background-color:#F2E6F2;">4964</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.9.6.3"><span class="ltx_text" id="A1.T4.1.1.9.6.3.1" style="background-color:#F2E6F2;">16.08</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.9.6.4"><span class="ltx_text" id="A1.T4.1.1.9.6.4.1" style="background-color:#F2E6F2;">0.4301</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.9.6.5"><span class="ltx_text" id="A1.T4.1.1.9.6.5.1" style="background-color:#F2E6F2;">0.2364</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.9.6.6"><span class="ltx_text" id="A1.T4.1.1.9.6.6.1" style="background-color:#F2E6F2;">0.3927</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.9.6.7"><span class="ltx_text" id="A1.T4.1.1.9.6.7.1" style="background-color:#F2E6F2;">0.8258</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.9.6.8"><span class="ltx_text" id="A1.T4.1.1.9.6.8.1" style="background-color:#F2E6F2;">8.3677</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.10.7" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="8" id="A1.T4.1.1.10.7.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.10.7.1.1" style="background-color:#D9D9D9;">Augment TF-IDF Ranker Retrieved Knowledge</span></th>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.11.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.11.8.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.11.8.1.1">RAGate-Llama</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.11.8.2">230</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.11.8.3">10.52</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.11.8.4">0.4165</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.11.8.5">0.2273</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.11.8.6">0.3826</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.11.8.7">0.8144</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.11.8.8">9.3418</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.12.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.12.9.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.12.9.1.1">RAGate-MHA</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.12.9.2">787</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.12.9.3">12.11</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.12.9.4">0.4233</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.12.9.5">0.2319</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.12.9.6">0.3889</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.12.9.7">0.8193</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.12.9.8">9.3058</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.13.10" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.13.10.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.13.10.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.13.10.2"><span class="ltx_text" id="A1.T4.1.1.13.10.2.1" style="background-color:#F2F2F2;">230</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.13.10.3"><span class="ltx_text" id="A1.T4.1.1.13.10.3.1" style="background-color:#F2F2F2;">9.47</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.13.10.4"><span class="ltx_text" id="A1.T4.1.1.13.10.4.1" style="background-color:#F2F2F2;">0.4118</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.13.10.5"><span class="ltx_text" id="A1.T4.1.1.13.10.5.1" style="background-color:#F2F2F2;">0.2251</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.13.10.6"><span class="ltx_text" id="A1.T4.1.1.13.10.6.1" style="background-color:#F2F2F2;">0.3783</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.13.10.7"><span class="ltx_text" id="A1.T4.1.1.13.10.7.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.13.10.8"><span class="ltx_text" id="A1.T4.1.1.13.10.8.1" style="background-color:#F2F2F2;">9.3006</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.14.11" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.14.11.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.14.11.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.14.11.2"><span class="ltx_text" id="A1.T4.1.1.14.11.2.1" style="background-color:#F2F2F2;">787</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.14.11.3"><span class="ltx_text" id="A1.T4.1.1.14.11.3.1" style="background-color:#F2F2F2;">9.93</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.14.11.4"><span class="ltx_text" id="A1.T4.1.1.14.11.4.1" style="background-color:#F2F2F2;">0.4136</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.14.11.5"><span class="ltx_text" id="A1.T4.1.1.14.11.5.1" style="background-color:#F2F2F2;">0.2259</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.14.11.6"><span class="ltx_text" id="A1.T4.1.1.14.11.6.1" style="background-color:#F2F2F2;">0.3793</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.14.11.7"><span class="ltx_text" id="A1.T4.1.1.14.11.7.1" style="background-color:#F2F2F2;">0.8125</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.14.11.8"><span class="ltx_text" id="A1.T4.1.1.14.11.8.1" style="background-color:#F2F2F2;">9.1942</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.15.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.15.12.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.15.12.1.1">Human-label</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.15.12.2">631</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.15.12.3">11.60</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.15.12.4">0.4198</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.15.12.5">0.2293</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.15.12.6">0.3854</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.15.12.7">0.8175</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.15.12.8">9.2639</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.16.13" style="background-color:#F2E6F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.16.13.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.16.13.1.1" style="background-color:#F2E6F2;">Augment-All</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.16.13.2"><span class="ltx_text" id="A1.T4.1.1.16.13.2.1" style="background-color:#F2E6F2;">4964</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.16.13.3"><span class="ltx_text" id="A1.T4.1.1.16.13.3.1" style="background-color:#F2E6F2;">15.76</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.16.13.4"><span class="ltx_text" id="A1.T4.1.1.16.13.4.1" style="background-color:#F2E6F2;">0.4289</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.16.13.5"><span class="ltx_text" id="A1.T4.1.1.16.13.5.1" style="background-color:#F2E6F2;">0.2345</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.16.13.6"><span class="ltx_text" id="A1.T4.1.1.16.13.6.1" style="background-color:#F2E6F2;">0.3914</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.16.13.7"><span class="ltx_text" id="A1.T4.1.1.16.13.7.1" style="background-color:#F2E6F2;">0.8256</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.16.13.8"><span class="ltx_text" id="A1.T4.1.1.16.13.8.1" style="background-color:#F2E6F2;">8.4188</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.17.14" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="8" id="A1.T4.1.1.17.14.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.17.14.1.1" style="background-color:#D9D9D9;">Augment Rank-1 Relevant Knowledge</span></th>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.18.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="A1.T4.1.1.18.15.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.18.15.1.1">RAGate-Llama</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="A1.T4.1.1.18.15.2">230</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.18.15.3">10.54</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.18.15.4">0.4162</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.18.15.5">0.2271</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.18.15.6">0.3822</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.18.15.7">0.8142</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A1.T4.1.1.18.15.8">9.3642</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.19.16">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.19.16.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.19.16.1.1">RAGate-MHA</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.19.16.2">787</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.19.16.3">11.99</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.19.16.4">0.4227</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.19.16.5">0.2316</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.19.16.6">0.3883</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.19.16.7">0.8191</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.19.16.8"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.19.16.8.1">9.3774</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.20.17" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.20.17.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.20.17.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.20.17.2"><span class="ltx_text" id="A1.T4.1.1.20.17.2.1" style="background-color:#F2F2F2;">230</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.20.17.3"><span class="ltx_text" id="A1.T4.1.1.20.17.3.1" style="background-color:#F2F2F2;">9.51</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.20.17.4"><span class="ltx_text" id="A1.T4.1.1.20.17.4.1" style="background-color:#F2F2F2;">0.4117</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.20.17.5"><span class="ltx_text" id="A1.T4.1.1.20.17.5.1" style="background-color:#F2F2F2;">0.2250</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.20.17.6"><span class="ltx_text" id="A1.T4.1.1.20.17.6.1" style="background-color:#F2F2F2;">0.3784</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.20.17.7"><span class="ltx_text" id="A1.T4.1.1.20.17.7.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.20.17.8"><span class="ltx_text" id="A1.T4.1.1.20.17.8.1" style="background-color:#F2F2F2;">9.3328</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.21.18" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.21.18.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.21.18.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.21.18.2"><span class="ltx_text" id="A1.T4.1.1.21.18.2.1" style="background-color:#F2F2F2;">787</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.21.18.3"><span class="ltx_text" id="A1.T4.1.1.21.18.3.1" style="background-color:#F2F2F2;">10.01</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.21.18.4"><span class="ltx_text" id="A1.T4.1.1.21.18.4.1" style="background-color:#F2F2F2;">0.4140</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.21.18.5"><span class="ltx_text" id="A1.T4.1.1.21.18.5.1" style="background-color:#F2F2F2;">0.2267</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.21.18.6"><span class="ltx_text" id="A1.T4.1.1.21.18.6.1" style="background-color:#F2F2F2;">0.3800</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.21.18.7"><span class="ltx_text" id="A1.T4.1.1.21.18.7.1" style="background-color:#F2F2F2;">0.8127</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.21.18.8"><span class="ltx_text" id="A1.T4.1.1.21.18.8.1" style="background-color:#F2F2F2;">9.2982</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.22.19">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.22.19.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.22.19.1.1">Human-label</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.22.19.2">631</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.22.19.3">11.52</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.22.19.4">0.4189</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.22.19.5">0.2289</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.22.19.6">0.3846</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.22.19.7">0.8170</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.22.19.8">9.3218</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.23.20" style="background-color:#F2E6F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.23.20.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.23.20.1.1" style="background-color:#F2E6F2;">Augment-All</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.23.20.2"><span class="ltx_text" id="A1.T4.1.1.23.20.2.1" style="background-color:#F2E6F2;">4964</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.23.20.3"><span class="ltx_text" id="A1.T4.1.1.23.20.3.1" style="background-color:#F2E6F2;">16.05</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.23.20.4"><span class="ltx_text" id="A1.T4.1.1.23.20.4.1" style="background-color:#F2E6F2;">0.4308</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.23.20.5"><span class="ltx_text" id="A1.T4.1.1.23.20.5.1" style="background-color:#F2E6F2;">0.2365</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.23.20.6"><span class="ltx_text" id="A1.T4.1.1.23.20.6.1" style="background-color:#F2E6F2;">0.3944</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.23.20.7"><span class="ltx_text" id="A1.T4.1.1.23.20.7.1" style="background-color:#F2E6F2;">0.8259</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.23.20.8"><span class="ltx_text" id="A1.T4.1.1.23.20.8.1" style="background-color:#F2E6F2;">9.0655</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.24.21" style="background-color:#D9D9D9;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="8" id="A1.T4.1.1.24.21.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.24.21.1.1" style="background-color:#D9D9D9;">Augment Rank-5 Relevant Knowledge</span></th>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.25.22">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_t" id="A1.T4.1.1.25.22.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.25.22.1.1">RAGate-Llama</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="A1.T4.1.1.25.22.2">230</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.25.22.3">10.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.25.22.4">0.4161</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.25.22.5">0.2272</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.25.22.6">0.3823</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T4.1.1.25.22.7">0.8142</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A1.T4.1.1.25.22.8">9.3592</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.26.23">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.26.23.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.26.23.1.1">RAGate-MHA</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.26.23.2">787</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.26.23.3">12.18</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.26.23.4">0.4224</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.26.23.5">0.2314</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.26.23.6">0.3883</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.26.23.7">0.8192</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.26.23.8">9.3704</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.27.24" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.27.24.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.27.24.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.27.24.2"><span class="ltx_text" id="A1.T4.1.1.27.24.2.1" style="background-color:#F2F2F2;">230</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.27.24.3"><span class="ltx_text" id="A1.T4.1.1.27.24.3.1" style="background-color:#F2F2F2;">9.52</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.27.24.4"><span class="ltx_text" id="A1.T4.1.1.27.24.4.1" style="background-color:#F2F2F2;">0.4118</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.27.24.5"><span class="ltx_text" id="A1.T4.1.1.27.24.5.1" style="background-color:#F2F2F2;">0.2252</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.27.24.6"><span class="ltx_text" id="A1.T4.1.1.27.24.6.1" style="background-color:#F2F2F2;">0.3785</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.27.24.7"><span class="ltx_text" id="A1.T4.1.1.27.24.7.1" style="background-color:#F2F2F2;">0.8110</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.27.24.8"><span class="ltx_text" id="A1.T4.1.1.27.24.8.1" style="background-color:#F2F2F2;">9.3315</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.28.25" style="background-color:#F2F2F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.28.25.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.28.25.1.1" style="background-color:#F2F2F2;">Random-Aug</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.28.25.2"><span class="ltx_text" id="A1.T4.1.1.28.25.2.1" style="background-color:#F2F2F2;">787</span></th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.28.25.3"><span class="ltx_text" id="A1.T4.1.1.28.25.3.1" style="background-color:#F2F2F2;">10.01</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.28.25.4"><span class="ltx_text" id="A1.T4.1.1.28.25.4.1" style="background-color:#F2F2F2;">0.4135</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.28.25.5"><span class="ltx_text" id="A1.T4.1.1.28.25.5.1" style="background-color:#F2F2F2;">0.2263</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.28.25.6"><span class="ltx_text" id="A1.T4.1.1.28.25.6.1" style="background-color:#F2F2F2;">0.3794</span></td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.28.25.7"><span class="ltx_text" id="A1.T4.1.1.28.25.7.1" style="background-color:#F2F2F2;">0.8127</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.28.25.8"><span class="ltx_text" id="A1.T4.1.1.28.25.8.1" style="background-color:#F2F2F2;">9.2961</span></td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.29.26">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l" id="A1.T4.1.1.29.26.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.29.26.1.1">Human-label</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="A1.T4.1.1.29.26.2">631</th>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.29.26.3">11.58</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.29.26.4">0.4186</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.29.26.5">0.2287</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.29.26.6">0.3845</td>
<td class="ltx_td ltx_align_center" id="A1.T4.1.1.29.26.7">0.8170</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A1.T4.1.1.29.26.8">9.3210</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1.30.27" style="background-color:#F2E6F2;">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_l" id="A1.T4.1.1.30.27.1"><span class="ltx_text ltx_font_bold" id="A1.T4.1.1.30.27.1.1" style="background-color:#F2E6F2;">Augment-All</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb" id="A1.T4.1.1.30.27.2"><span class="ltx_text" id="A1.T4.1.1.30.27.2.1" style="background-color:#F2E6F2;">4964</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T4.1.1.30.27.3"><span class="ltx_text" id="A1.T4.1.1.30.27.3.1" style="background-color:#F2E6F2;">15.97</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T4.1.1.30.27.4"><span class="ltx_text" id="A1.T4.1.1.30.27.4.1" style="background-color:#F2E6F2;">0.4290</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T4.1.1.30.27.5"><span class="ltx_text" id="A1.T4.1.1.30.27.5.1" style="background-color:#F2E6F2;">0.2349</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T4.1.1.30.27.6"><span class="ltx_text" id="A1.T4.1.1.30.27.6.1" style="background-color:#F2E6F2;">0.3927</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T4.1.1.30.27.7"><span class="ltx_text" id="A1.T4.1.1.30.27.7.1" style="background-color:#F2E6F2;">0.8256</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="A1.T4.1.1.30.27.8"><span class="ltx_text" id="A1.T4.1.1.30.27.8.1" style="background-color:#F2E6F2;">9.0604</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Performance of applying RAGate and compared to KETOD on the SGD dataset. Confidence is calculated by the average value over the lowest logit of each generation.</figcaption>
</figure>
<div class="ltx_para" id="A1.p7">
<p class="ltx_p" id="A1.p7.1"><span class="ltx_text ltx_font_bold" id="A1.p7.1.1">In-Context Learning Prompt: </span></p>
</div>
<div class="ltx_para" id="A1.p8">
<p class="ltx_p" id="A1.p8.1">Below is an instruction that describes a task. Please respond with ‘True’ or ‘False’ only that appropriately completes the request.</p>
</div>
<div class="ltx_para" id="A1.p9">
<p class="ltx_p" id="A1.p9.1">### Instruction: Analyse the conversational context so far. Generate an appropriate response. Consider the invovled entites. Estimate if augmenting the response with external knowledge is helpful with an output of ‘True’ or ‘False’ only.</p>
</div>
<div class="ltx_para" id="A1.p10">
<p class="ltx_p" id="A1.p10.1">### Example 1: USER: I’m planning a trip, can you help me look for a flight? SYSTEM: Which day are you planning to return and from which city? USER: I want to go from NYC the day after tomorrow and return on the 13th of this month. SYSTEM: Where would you like to go? USER: I want to go to Vancouver, BC. Can you look for a Premium Economy class ticket. SYSTEM: I found 1 flight for you. It is a Delta Airlines flight that takes off at 6 am and returns at 2:50 am. The price is $505. USER: What is the departure airport, and how many stops does the flight have?</p>
</div>
<div class="ltx_para" id="A1.p11">
<p class="ltx_p" id="A1.p11.1">### Response: True</p>
</div>
<div class="ltx_para" id="A1.p12">
<p class="ltx_p" id="A1.p12.1">### Example 2: USER: Get me bus tickets to a Cher event on March 6th. SYSTEM: How many to buy? USER: only one, please.</p>
</div>
<div class="ltx_para" id="A1.p13">
<p class="ltx_p" id="A1.p13.1">### Response: False</p>
</div>
<div class="ltx_para" id="A1.p14">
<p class="ltx_p" id="A1.p14.1">### Input: [Converstion Context Input]</p>
</div>
<div class="ltx_para" id="A1.p15">
<p class="ltx_p" id="A1.p15.1">### Response:</p>
</div>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Impact of Retrieval Quality on Adaptive RAG</h2>
<div class="ltx_para" id="A2.p1">
<p class="ltx_p" id="A2.p1.5">To have a successful conversation model with a retrieval-augmented system, two main criteria must be met. One is identifying insufficient context, and the other is the quality of retrieved information <cite class="ltx_cite ltx_citemacro_cite">Salemi and Zamani (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib26" title="">2024</a>); Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#bib.bib36" title="">2024</a>)</cite>. A conversational model performs better when both criteria are satisfied. In our proposed approach, as shown in Table 2, we have already assessed whether our adaptive retrieval method can detect insufficient context. We further explored to determine whether our model can inherently estimate the quality of the retrieved snippets to address such insufficiency and, based on that, decide on the retrieval. Although we do not explicitly provide retrieved snippets to our model, retrieval comes with a corpus that includes potentially relevant knowledge snippets. Consequently, given a query and a retrieval collection, it can be estimated whether useful information for the query exists in the corpus to address the insufficient context. To investigate by following this direction, we randomly selected <math alttext="50" class="ltx_Math" display="inline" id="A2.p1.1.m1.1"><semantics id="A2.p1.1.m1.1a"><mn id="A2.p1.1.m1.1.1" xref="A2.p1.1.m1.1.1.cmml">50</mn><annotation-xml encoding="MathML-Content" id="A2.p1.1.m1.1b"><cn id="A2.p1.1.m1.1.1.cmml" type="integer" xref="A2.p1.1.m1.1.1">50</cn></annotation-xml><annotation encoding="application/x-tex" id="A2.p1.1.m1.1c">50</annotation><annotation encoding="application/x-llamapun" id="A2.p1.1.m1.1d">50</annotation></semantics></math> samples from instances where our proposed approach (RAGate-MHA, the best-performing gate model) predicted using retrieval augmentation. We asked domain experts (co-authors) to score whether they thought the retrieved snippets in those scenarios could be useful to response generation. Users rated the snippets on a scale of <math alttext="0-4" class="ltx_Math" display="inline" id="A2.p1.2.m2.1"><semantics id="A2.p1.2.m2.1a"><mrow id="A2.p1.2.m2.1.1" xref="A2.p1.2.m2.1.1.cmml"><mn id="A2.p1.2.m2.1.1.2" xref="A2.p1.2.m2.1.1.2.cmml">0</mn><mo id="A2.p1.2.m2.1.1.1" xref="A2.p1.2.m2.1.1.1.cmml">−</mo><mn id="A2.p1.2.m2.1.1.3" xref="A2.p1.2.m2.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="A2.p1.2.m2.1b"><apply id="A2.p1.2.m2.1.1.cmml" xref="A2.p1.2.m2.1.1"><minus id="A2.p1.2.m2.1.1.1.cmml" xref="A2.p1.2.m2.1.1.1"></minus><cn id="A2.p1.2.m2.1.1.2.cmml" type="integer" xref="A2.p1.2.m2.1.1.2">0</cn><cn id="A2.p1.2.m2.1.1.3.cmml" type="integer" xref="A2.p1.2.m2.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p1.2.m2.1c">0-4</annotation><annotation encoding="application/x-llamapun" id="A2.p1.2.m2.1d">0 - 4</annotation></semantics></math>, with scores of <math alttext="3" class="ltx_Math" display="inline" id="A2.p1.3.m3.1"><semantics id="A2.p1.3.m3.1a"><mn id="A2.p1.3.m3.1.1" xref="A2.p1.3.m3.1.1.cmml">3</mn><annotation-xml encoding="MathML-Content" id="A2.p1.3.m3.1b"><cn id="A2.p1.3.m3.1.1.cmml" type="integer" xref="A2.p1.3.m3.1.1">3</cn></annotation-xml><annotation encoding="application/x-tex" id="A2.p1.3.m3.1c">3</annotation><annotation encoding="application/x-llamapun" id="A2.p1.3.m3.1d">3</annotation></semantics></math> or <math alttext="4" class="ltx_Math" display="inline" id="A2.p1.4.m4.1"><semantics id="A2.p1.4.m4.1a"><mn id="A2.p1.4.m4.1.1" xref="A2.p1.4.m4.1.1.cmml">4</mn><annotation-xml encoding="MathML-Content" id="A2.p1.4.m4.1b"><cn id="A2.p1.4.m4.1.1.cmml" type="integer" xref="A2.p1.4.m4.1.1">4</cn></annotation-xml><annotation encoding="application/x-tex" id="A2.p1.4.m4.1c">4</annotation><annotation encoding="application/x-llamapun" id="A2.p1.4.m4.1d">4</annotation></semantics></math> indicating ‘useful’ or ‘highly useful’. We found that in <math alttext="54\%" class="ltx_Math" display="inline" id="A2.p1.5.m5.1"><semantics id="A2.p1.5.m5.1a"><mrow id="A2.p1.5.m5.1.1" xref="A2.p1.5.m5.1.1.cmml"><mn id="A2.p1.5.m5.1.1.2" xref="A2.p1.5.m5.1.1.2.cmml">54</mn><mo id="A2.p1.5.m5.1.1.1" xref="A2.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="A2.p1.5.m5.1b"><apply id="A2.p1.5.m5.1.1.cmml" xref="A2.p1.5.m5.1.1"><csymbol cd="latexml" id="A2.p1.5.m5.1.1.1.cmml" xref="A2.p1.5.m5.1.1.1">percent</csymbol><cn id="A2.p1.5.m5.1.1.2.cmml" type="integer" xref="A2.p1.5.m5.1.1.2">54</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p1.5.m5.1c">54\%</annotation><annotation encoding="application/x-llamapun" id="A2.p1.5.m5.1d">54 %</annotation></semantics></math> of cases where the prediction was for augmentation, users also found the snippets useful. This indicates that our proposed approach can implicitly capture the potential for obtaining high-quality retrieval snippets.</p>
</div>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Additional experimental results about RAGate for Response Generation</h2>
<div class="ltx_para" id="A3.p1">
<p class="ltx_p" id="A3.p1.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2407.21712v1#A1.T4" title="Table 4 ‣ Appendix A Prompts for RAGate-Prompt ‣ Adaptive Retrieval-Augmented Generation for Conversational Systems"><span class="ltx_text ltx_ref_tag">4</span></a>, we include the complete experimental results of applying RAGate for adaptive retrieval-augmented system response generation. Specifically, explore the use of retrieved knowledge snippets to different extents of relevance. We include top-3 knowledge snippets retrieved by BERT-ranker and TF-IDF. In addition, we also explore the use of knowledge snippets in different ranking positions (rank 1 and 5) according to the BERT-ranker retriever. The experimental result shows that precisely using a suitable amount of relevant knowledge can generate a response with higher confidence (i.e., less is more). In addition, this observation also indicates the potential use of confidence levels to evaluate the quality of the augmented knowledge.</p>
</div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Jul 31 16:00:44 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
