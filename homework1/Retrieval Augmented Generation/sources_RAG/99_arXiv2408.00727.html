<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions</title>
<!--Generated on Fri Oct 11 00:58:02 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2408.00727v3/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S1" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S2" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S2.SS1" title="In 2 Related Work ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Retrieval-Augmented Generation for Medicine</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S2.SS2" title="In 2 Related Work ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Medical Question Answering</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Methods</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS1" title="In 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Retrieval-Augmented Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS2" title="In 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Iterative Retrieval-Augmented Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS3" title="In 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Iterative Generation of Follow-up Questions</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS1" title="In 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Evaluation settings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS2" title="In 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Main results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS3" title="In 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Scaling with iterations and queries</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS4" title="In 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Case studies</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S5" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Discussion</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S5.SS1" title="In 5 Discussion ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S5.SS2" title="In 5 Discussion ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Future work</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S6" title="In Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Acknowledgments</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Guangzhi Xiong<sup class="ltx_sup" id="id12.2.id1"><span class="ltx_text ltx_font_italic" id="id12.2.id1.1">1,∗</span></sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Qiao Jin<sup class="ltx_sup" id="id13.2.id1"><span class="ltx_text ltx_font_italic" id="id13.2.id1.1">2,∗</span></sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Xiao Wang<sup class="ltx_sup" id="id14.2.id1">3</sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Minjia Zhang<sup class="ltx_sup" id="id15.2.id1">3</sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Zhiyong Lu<sup class="ltx_sup" id="id16.2.id1"><span class="ltx_text ltx_font_italic" id="id16.2.id1.1">2,†</span></sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Aidong Zhang<sup class="ltx_sup" id="id17.7.id1"><span class="ltx_text ltx_font_italic" id="id17.7.id1.1">1,†</span></sup>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_address"><sup class="ltx_sup" id="id18.8.id1">1</sup>Department of Computer Science, University of Virginia,
VA 22904, USA
<br class="ltx_break"/><sup class="ltx_sup" id="id19.9.id2">2</sup>National Library of Medicine, National Institutes of Health, MD 20892, USA
<br class="ltx_break"/><sup class="ltx_sup" id="id20.10.id3">3</sup>Department of Computer Science, University of Illinois Urbana-Champaign, IL 61801, USA
<br class="ltx_break"/><sup class="ltx_sup" id="id21.11.id4">∗</sup>Equal contribution. <sup class="ltx_sup" id="id22.12.id5"><span class="ltx_text ltx_font_italic" id="id22.12.id5.1">†</span></sup>Co-correspondence.
<br class="ltx_break"/>E-mail: hhu4zu@virginia.edu, qiao.jin@nih.gov, xiaow4@illinois.edu, minjiaz@illinois.edu, zhiyong.lu@nih.gov, aidong@virginia.edu

</span></span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id23.id1">The emergent abilities of large language models (LLMs) have demonstrated great potential in solving medical questions. They can possess considerable medical knowledge, but may still hallucinate and are inflexible in the knowledge updates. While Retrieval-Augmented Generation (RAG) has been proposed to enhance the medical question-answering capabilities of LLMs with external knowledge bases, it may still fail in complex cases where multiple rounds of information-seeking are required. To address such an issue, we propose iterative RAG for medicine (<span class="ltx_text ltx_font_italic" id="id23.id1.1">i</span>-MedRAG), where LLMs can iteratively ask follow-up queries based on previous information-seeking attempts. In each iteration of <span class="ltx_text ltx_font_italic" id="id23.id1.2">i</span>-MedRAG, the follow-up queries will be answered by a conventional RAG system and they will be further used to guide the query generation in the next iteration. Our experiments show the improved performance of various LLMs brought by <span class="ltx_text ltx_font_italic" id="id23.id1.3">i</span>-MedRAG compared with conventional RAG on complex questions from clinical vignettes in the United States Medical Licensing Examination (USMLE), as well as various knowledge tests in the Massive Multitask Language Understanding (MMLU) dataset. Notably, our zero-shot <span class="ltx_text ltx_font_italic" id="id23.id1.4">i</span>-MedRAG outperforms all existing prompt engineering and fine-tuning methods on GPT-3.5, achieving an accuracy of 69.68% on the MedQA dataset. In addition, we characterize the scaling properties of <span class="ltx_text ltx_font_italic" id="id23.id1.5">i</span>-MedRAG with different iterations of follow-up queries and different numbers of queries per iteration. Our case studies show that <span class="ltx_text ltx_font_italic" id="id23.id1.6">i</span>-MedRAG can flexibly ask follow-up queries to form reasoning chains, providing an in-depth analysis of medical questions. To the best of our knowledge, this is the first-of-its-kind study on incorporating follow-up queries into medical RAG. The implementation of <span class="ltx_text ltx_font_italic" id="id23.id1.7">i</span>-MedRAG is available at <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://github.com/Teddy-XiongGZ/MedRAG</span>.</p>
</div>
<div class="ltx_classification">
<h6 class="ltx_title ltx_title_classification">keywords: </h6>Large Language Models; Retrieval-Augmented Generation; Medical Question Answering; AI for Healthcare.
</div>
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\copyrightinfo</span>
<p class="ltx_p" id="p1.2">© 2024 The Authors. Open Access chapter published by World Scientific Publishing Company and distributed under the terms of the Creative Commons Attribution Non-Commercial (CC BY-NC) 4.0 License.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Generative artificial intelligence (AI) technologies such as large language models (LLMs) have brought a wide variety of opportunities for biomedical applications <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib1" title="">1</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib2" title="">2</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib3" title="">3</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib4" title="">4</a>]</cite>.
For example, they have shown great potential for answering biomedical questions <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib8" title="">8</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib9" title="">9</a>]</cite>, summarizing medical documents <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib10" title="">10</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib11" title="">11</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib12" title="">12</a>]</cite>, and matching patients to clinical trials <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib13" title="">13</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib14" title="">14</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib15" title="">15</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib16" title="">16</a>]</cite>.
However, LLMs often generate plausible-sounding but inaccurate content, an issue commonly known as “hallucination” in the literature<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib17" title="">17</a>]</cite>.
They also possess outdated knowledge obtained from a fixed set of training data <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib18" title="">18</a>]</cite>.
Retrieval-augmented generation (RAG) provides a lightweight post-training solution to these issues by providing LLMs with relevant documents retrieved from up-to-date and trustworthy sources <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib19" title="">19</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib20" title="">20</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">While there have been several medical applications of RAG, such as Almanac <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib21" title="">21</a>]</cite>, Clinfo.ai <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib22" title="">22</a>]</cite>, and MedRAG <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>, their RAG component is mainly beneficial to questions that have direct answers in a single document, such as those in the PubMedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib24" title="">24</a>]</cite> and BioASQ <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib25" title="">25</a>]</cite> datasets.
However, only marginal improvements are seen with RAG for questions that require multiple rounds of clinical reasoning like MedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib26" title="">26</a>]</cite>, a dataset curated from medical license examinations.
For example, to recommend a treatment for a patient with certain symptoms, a system needs to first infer the potential diagnosis from the symptoms and then find a suitable treatment for the diagnosis.
Nevertheless, only one round of retrieval is conducted in the conventional RAG architecture, prohibiting multiple rounds of information seeking that are required in complex clinical reasoning.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">In this work, we propose <span class="ltx_text ltx_font_italic" id="S1.p3.1.1">i</span>-MedRAG, a simple and effective framework for incorporating follow-up queries into RAG.
Specifically, we prompt LLMs to iteratively generate follow-up queries to search for additional information from external medical corpora. The queries and the corresponding answers generated with RAG will be used to augment the answer generation of the original question.
Empirical results demonstrate the effectiveness of <span class="ltx_text ltx_font_italic" id="S1.p3.1.2">i</span>-MedRAG on both open- and close-source LLMs, which show improved performance on the United States Medical Licensing Examination (USMLE) subset of MedQA and medical questions from the Massive Multitask Language Understanding (MMLU) dataset.
Our further analysis of the number of iterations and number of queries per iteration used in <span class="ltx_text ltx_font_italic" id="S1.p3.1.3">i</span>-MedRAG reflects how its performance scales with different settings.
Additionally, we present several case studies of <span class="ltx_text ltx_font_italic" id="S1.p3.1.4">i</span>-MedRAG, showing how it overcomes the limitations in conventional RAG to find the correct answers.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">In summary, our contributions are three-fold:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We introduce <span class="ltx_text ltx_font_italic" id="S1.I1.i1.p1.1.1">i</span>-MedRAG, a novel RAG architecture that incorporates follow-up queries to solve complex reasoning tasks.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We have conducted comprehensive experiments on medical question answering, and the results demonstrate that <span class="ltx_text ltx_font_italic" id="S1.I1.i2.p1.1.1">i</span>-MedRAG not only outperforms conventional RAG approaches but also surpasses all other prompt engineering approaches on MedQA with GPT-3.5, setting a new state-of-the-art performance of 69.68%.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">We also provide analyses to further characterize <span class="ltx_text ltx_font_italic" id="S1.I1.i3.p1.1.1">i</span>-MedRAG, showing how its performance varies with the scaling of follow-up queries.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Retrieval-Augmented Generation for Medicine</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">Retrieval-augmented generation (RAG) has been widely adopted in medicine.
Here, we discuss several representative approaches.
Almanac <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib21" title="">21</a>]</cite> is a system that augments LLMs with curated resources for medical guidelines and treatment recommendations, which shows improvements over the standard LLMs in six manually assessed metrics.
Similarly, Low <span class="ltx_text ltx_font_italic" id="S2.SS1.p1.1.1">et al.</span> <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib27" title="">27</a>]</cite> demonstrate the improvements of RAG-based systems for real-world clinical queries with manual evaluation.
Clinfo.ai <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib22" title="">22</a>]</cite> is an open-source web application that answers clinical questions based on retrieved scientific literature from PubMed articles.
Xiong <span class="ltx_text ltx_font_italic" id="S2.SS1.p1.1.2">et al.</span> <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite> conduct a benchmarking study with the MedRAG toolkit, and show the benefits of RAG in several medical multi-choice question answering datasets.
There are also various biomedical literature search products <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib28" title="">28</a>]</cite> that use RAG to summarize the retrieved articles <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib29" title="">29</a>]</cite>, such as OpenEvidence<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.openevidence.com/</span></span></span></span> and ChatRWD<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.atroposhealth.com/chatrwd</span></span></span></span>.
However, most of the RAG studies in medicine use the conventional architecture with only one round of retrieval.
There have been several attempts to use iterative data refinement for LLM training<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib30" title="">30</a>]</cite> or RAG<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib31" title="">31</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib32" title="">32</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib33" title="">33</a>]</cite> in the general domain. Nevertheless, similar ideas have not yet been explored in the medical domain.
To the best of our knowledge, our study presents the first approach and evaluations on incorporating follow-up queries in RAG for medicine.</p>
</div>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="521" id="S2.F1.g1" src="x1.png" width="514"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Comparison of various methods proposed to improve GPT-3.5 performance on MedQA. Our zero-shot <span class="ltx_text ltx_font_italic" id="S2.F1.2.1">i</span>-MedRAG outperforms all previous prompt engineering and fine-tuning methods.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Medical Question Answering</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Question answering tasks such as MedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib26" title="">26</a>]</cite>, PubMedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib24" title="">24</a>]</cite>, MedMCQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib34" title="">34</a>]</cite>, BioASQ <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib25" title="">25</a>]</cite>, and Massive Multitask Language Understanding (MMLU) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib35" title="">35</a>]</cite> are commonly used to benchmark the medical knowledge and reasoning capabilities of LLMs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib36" title="">36</a>]</cite>.
Most of these datasets focus on single-hop questions such as “what is the most common symptom of hypertension?”, while only MedQA questions are longer patient vignettes where both medical knowledge and multi-step reasoning are required.
As such, there have been many studies working on improving the GPT-3.5 performance on MedQA with prompt engineering.
Figure <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S2.F1" title="Figure 1 ‣ 2.1 Retrieval-Augmented Generation for Medicine ‣ 2 Related Work ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">1</span></a> shows the comparison among different representative prompt engineering approaches on MedQA, including chain-of-thought (CoT) prompting <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib37" title="">37</a>]</cite>, self-consistency (SC) prompting <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib38" title="">38</a>]</cite>, multi-agent communication with MedAgents <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite>, and RAG-based approaches such as Knowledge Solver (KSL) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib40" title="">40</a>]</cite>, LLMs Augmented with Medical Textbooks (LLM-AMT) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib41" title="">41</a>]</cite>, and MedRAG <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>.
Much fewer studies focus on prompt engineering with GPT-4 on MedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib42" title="">42</a>]</cite>, probably because the raw GPT-4 error rate <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib43" title="">43</a>]</cite> is close to the noise rate in MedQA annotations <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib44" title="">44</a>]</cite>.
In this study, we focus on the zero-shot setting as it reflects realistic clinical scenarios.
While not requiring any instances for training or few-shot learning, our approach surpasses all previous methods with GPT-3.5 on the MedQA dataset.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methods</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">Figure <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.F2" title="Figure 2 ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">2</span></a> shows the overview of our <span class="ltx_text ltx_font_italic" id="S3.p1.1.1">i</span>-MedRAG and its comparison to the conventional Retrieval-Augmented Generation (RAG).
Different from RAG, our <span class="ltx_text ltx_font_italic" id="S3.p1.1.2">i</span>-MedRAG modifies its pipeline by replacing the information retrieval step (Figure 2 left) with our proposed iterative question-answering step (Figure 2 middle and right). The settings of RAG are described in Section <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS1" title="3.1 Retrieval-Augmented Generation ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3.1</span></a> and the pipeline of our new <span class="ltx_text ltx_font_italic" id="S3.p1.1.3">i</span>-MedRAG is discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS2" title="3.2 Iterative Retrieval-Augmented Generation ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3.2</span></a>. The details of the iterative question answering are described in Section <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS3" title="3.3 Iterative Generation of Follow-up Questions ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3.3</span></a>.</p>
</div>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="300" id="S3.F2.g1" src="x2.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Overview of <span class="ltx_text ltx_font_italic" id="S3.F2.3.1">i</span>-MedRAG and its comparison to RAG (MedRAG).
Left: the pipeline of Retrieval-Augmented Generation (RAG).
Middle: the pipeline of our proposed <span class="ltx_text ltx_font_italic" id="S3.F2.4.2">i</span>-MedRAG.
Right: the iterative generation of question-specific medical query-answer (QA) pairs by asking follow-up queries.</figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Retrieval-Augmented Generation</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.4">In the zero-shot setting of medical question answering, the task of LLM <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">caligraphic_M</annotation></semantics></math> is trying to find the correct answer <math alttext="\mathcal{A}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">𝒜</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">𝒜</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">\mathcal{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">caligraphic_A</annotation></semantics></math> given the question <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">caligraphic_Q</annotation></semantics></math> only. The ideal answer prediction <math alttext="\tilde{\mathcal{A}}" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><mover accent="true" id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.4.m4.1.1.2" xref="S3.SS1.p1.4.m4.1.1.2.cmml">𝒜</mi><mo id="S3.SS1.p1.4.m4.1.1.1" xref="S3.SS1.p1.4.m4.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><apply id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1"><ci id="S3.SS1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1.1">~</ci><ci id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.2">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">\tilde{\mathcal{A}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">over~ start_ARG caligraphic_A end_ARG</annotation></semantics></math> can be provided by</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\tilde{\mathcal{A}}=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal%
{M}}(\mathcal{A}\mid\mathcal{Q},\text{inst.})," class="ltx_Math" display="block" id="S3.E1.m1.3"><semantics id="S3.E1.m1.3a"><mrow id="S3.E1.m1.3.3.1" xref="S3.E1.m1.3.3.1.1.cmml"><mrow id="S3.E1.m1.3.3.1.1" xref="S3.E1.m1.3.3.1.1.cmml"><mover accent="true" id="S3.E1.m1.3.3.1.1.3" xref="S3.E1.m1.3.3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.3.1.1.3.2" xref="S3.E1.m1.3.3.1.1.3.2.cmml">𝒜</mi><mo id="S3.E1.m1.3.3.1.1.3.1" xref="S3.E1.m1.3.3.1.1.3.1.cmml">~</mo></mover><mo id="S3.E1.m1.3.3.1.1.2" xref="S3.E1.m1.3.3.1.1.2.cmml">=</mo><mrow id="S3.E1.m1.3.3.1.1.1" xref="S3.E1.m1.3.3.1.1.1.cmml"><mrow id="S3.E1.m1.3.3.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.3.cmml"><munder id="S3.E1.m1.3.3.1.1.1.3.1" xref="S3.E1.m1.3.3.1.1.1.3.1.cmml"><mrow id="S3.E1.m1.3.3.1.1.1.3.1.2" xref="S3.E1.m1.3.3.1.1.1.3.1.2.cmml"><mi id="S3.E1.m1.3.3.1.1.1.3.1.2.2" xref="S3.E1.m1.3.3.1.1.1.3.1.2.2.cmml">arg</mi><mo id="S3.E1.m1.3.3.1.1.1.3.1.2.1" lspace="0.170em" xref="S3.E1.m1.3.3.1.1.1.3.1.2.1.cmml">⁢</mo><mi id="S3.E1.m1.3.3.1.1.1.3.1.2.3" xref="S3.E1.m1.3.3.1.1.1.3.1.2.3.cmml">max</mi></mrow><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.3.1.1.1.3.1.3" xref="S3.E1.m1.3.3.1.1.1.3.1.3.cmml">𝒜</mi></munder><mo id="S3.E1.m1.3.3.1.1.1.3a" xref="S3.E1.m1.3.3.1.1.1.3.cmml">⁡</mo><msub id="S3.E1.m1.3.3.1.1.1.3.2" xref="S3.E1.m1.3.3.1.1.1.3.2.cmml"><mi id="S3.E1.m1.3.3.1.1.1.3.2.2" xref="S3.E1.m1.3.3.1.1.1.3.2.2.cmml">ℙ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.3.1.1.1.3.2.3" xref="S3.E1.m1.3.3.1.1.1.3.2.3.cmml">ℳ</mi></msub></mrow><mo id="S3.E1.m1.3.3.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.cmml"><mo id="S3.E1.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.3.1.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.cmml">𝒜</mi><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.cmml">∣</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.1.1.3.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">𝒬</mi><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.3.2.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.1.cmml">,</mo><mtext id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2a.cmml">inst.</mtext></mrow></mrow><mo id="S3.E1.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="S3.E1.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E1.m1.3.3.1.2" xref="S3.E1.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.3b"><apply id="S3.E1.m1.3.3.1.1.cmml" xref="S3.E1.m1.3.3.1"><eq id="S3.E1.m1.3.3.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.2"></eq><apply id="S3.E1.m1.3.3.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.3"><ci id="S3.E1.m1.3.3.1.1.3.1.cmml" xref="S3.E1.m1.3.3.1.1.3.1">~</ci><ci id="S3.E1.m1.3.3.1.1.3.2.cmml" xref="S3.E1.m1.3.3.1.1.3.2">𝒜</ci></apply><apply id="S3.E1.m1.3.3.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1"><times id="S3.E1.m1.3.3.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.2"></times><apply id="S3.E1.m1.3.3.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.3"><apply id="S3.E1.m1.3.3.1.1.1.3.1.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.3.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1">subscript</csymbol><apply id="S3.E1.m1.3.3.1.1.1.3.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1.2"><times id="S3.E1.m1.3.3.1.1.1.3.1.2.1.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1.2.1"></times><ci id="S3.E1.m1.3.3.1.1.1.3.1.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1.2.2">arg</ci><ci id="S3.E1.m1.3.3.1.1.1.3.1.2.3.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1.2.3">max</ci></apply><ci id="S3.E1.m1.3.3.1.1.1.3.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.3.1.3">𝒜</ci></apply><apply id="S3.E1.m1.3.3.1.1.1.3.2.cmml" xref="S3.E1.m1.3.3.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.3.2.1.cmml" xref="S3.E1.m1.3.3.1.1.1.3.2">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.3.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.3.2.2">ℙ</ci><ci id="S3.E1.m1.3.3.1.1.1.3.2.3.cmml" xref="S3.E1.m1.3.3.1.1.1.3.2.3">ℳ</ci></apply></apply><apply id="S3.E1.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1"><csymbol cd="latexml" id="S3.E1.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2">𝒜</ci><list id="S3.E1.m1.3.3.1.1.1.1.1.1.3.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.2"><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">𝒬</ci><ci id="S3.E1.m1.2.2a.cmml" xref="S3.E1.m1.2.2"><mtext id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">inst.</mtext></ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.3c">\tilde{\mathcal{A}}=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal%
{M}}(\mathcal{A}\mid\mathcal{Q},\text{inst.}),</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.3d">over~ start_ARG caligraphic_A end_ARG = start_OPERATOR roman_arg roman_max end_OPERATOR start_POSTSUBSCRIPT caligraphic_A end_POSTSUBSCRIPT blackboard_P start_POSTSUBSCRIPT caligraphic_M end_POSTSUBSCRIPT ( caligraphic_A ∣ caligraphic_Q , inst. ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.8">where the “inst.” is the task instruction the user provides that instructs the model to perform the task. As medical questions are knowledge-intensive <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib36" title="">36</a>]</cite>, it benefits from accessing large-scale external corpora to search for useful information <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib21" title="">21</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib22" title="">22</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>. A typical method to combine LLM reasoning with external corpora is RAG, which first retrieves relevant documents from the corpus for the given medical question and enters the retrieved documents along with the question into LLM to augment its answer generation. Formally, the RAG pipeline can be described as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\tilde{\mathcal{A}}=\textit{RAG}(\mathcal{Q};\mathcal{M},\mathcal{R},\mathcal{%
D})=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal{M}}(\mathcal{A}%
\mid\mathcal{Q},\text{inst.},\{d_{i}\}_{i=1}^{N})," class="ltx_Math" display="block" id="S3.E2.m1.7"><semantics id="S3.E2.m1.7a"><mrow id="S3.E2.m1.7.7.1" xref="S3.E2.m1.7.7.1.1.cmml"><mrow id="S3.E2.m1.7.7.1.1" xref="S3.E2.m1.7.7.1.1.cmml"><mover accent="true" id="S3.E2.m1.7.7.1.1.3" xref="S3.E2.m1.7.7.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.7.7.1.1.3.2" xref="S3.E2.m1.7.7.1.1.3.2.cmml">𝒜</mi><mo id="S3.E2.m1.7.7.1.1.3.1" xref="S3.E2.m1.7.7.1.1.3.1.cmml">~</mo></mover><mo id="S3.E2.m1.7.7.1.1.4" xref="S3.E2.m1.7.7.1.1.4.cmml">=</mo><mrow id="S3.E2.m1.7.7.1.1.5" xref="S3.E2.m1.7.7.1.1.5.cmml"><mtext class="ltx_mathvariant_italic" id="S3.E2.m1.7.7.1.1.5.2" xref="S3.E2.m1.7.7.1.1.5.2a.cmml">RAG</mtext><mo id="S3.E2.m1.7.7.1.1.5.1" xref="S3.E2.m1.7.7.1.1.5.1.cmml">⁢</mo><mrow id="S3.E2.m1.7.7.1.1.5.3.2" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml"><mo id="S3.E2.m1.7.7.1.1.5.3.2.1" stretchy="false" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">𝒬</mi><mo id="S3.E2.m1.7.7.1.1.5.3.2.2" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml">;</mo><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml">ℳ</mi><mo id="S3.E2.m1.7.7.1.1.5.3.2.3" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml">ℛ</mi><mo id="S3.E2.m1.7.7.1.1.5.3.2.4" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.4.4" xref="S3.E2.m1.4.4.cmml">𝒟</mi><mo id="S3.E2.m1.7.7.1.1.5.3.2.5" stretchy="false" xref="S3.E2.m1.7.7.1.1.5.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.7.7.1.1.6" xref="S3.E2.m1.7.7.1.1.6.cmml">=</mo><mrow id="S3.E2.m1.7.7.1.1.1" xref="S3.E2.m1.7.7.1.1.1.cmml"><mrow id="S3.E2.m1.7.7.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.3.cmml"><munder id="S3.E2.m1.7.7.1.1.1.3.1" xref="S3.E2.m1.7.7.1.1.1.3.1.cmml"><mrow id="S3.E2.m1.7.7.1.1.1.3.1.2" xref="S3.E2.m1.7.7.1.1.1.3.1.2.cmml"><mi id="S3.E2.m1.7.7.1.1.1.3.1.2.2" xref="S3.E2.m1.7.7.1.1.1.3.1.2.2.cmml">arg</mi><mo id="S3.E2.m1.7.7.1.1.1.3.1.2.1" lspace="0.170em" xref="S3.E2.m1.7.7.1.1.1.3.1.2.1.cmml">⁢</mo><mi id="S3.E2.m1.7.7.1.1.1.3.1.2.3" xref="S3.E2.m1.7.7.1.1.1.3.1.2.3.cmml">max</mi></mrow><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.7.7.1.1.1.3.1.3" xref="S3.E2.m1.7.7.1.1.1.3.1.3.cmml">𝒜</mi></munder><mo id="S3.E2.m1.7.7.1.1.1.3a" xref="S3.E2.m1.7.7.1.1.1.3.cmml">⁡</mo><msub id="S3.E2.m1.7.7.1.1.1.3.2" xref="S3.E2.m1.7.7.1.1.1.3.2.cmml"><mi id="S3.E2.m1.7.7.1.1.1.3.2.2" xref="S3.E2.m1.7.7.1.1.1.3.2.2.cmml">ℙ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.7.7.1.1.1.3.2.3" xref="S3.E2.m1.7.7.1.1.1.3.2.3.cmml">ℳ</mi></msub></mrow><mo id="S3.E2.m1.7.7.1.1.1.2" xref="S3.E2.m1.7.7.1.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.7.7.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.cmml"><mo id="S3.E2.m1.7.7.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.7.7.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E2.m1.7.7.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.7.7.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.3.cmml">𝒜</mi><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.2" xref="S3.E2.m1.7.7.1.1.1.1.1.1.2.cmml">∣</mo><mrow id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.5.5" xref="S3.E2.m1.5.5.cmml">𝒬</mi><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.2" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.2.cmml">,</mo><mtext id="S3.E2.m1.6.6" xref="S3.E2.m1.6.6a.cmml">inst.</mtext><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.2.cmml">,</mo><msubsup id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.cmml"><mrow id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml">{</mo><msub id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml">N</mi></msubsup></mrow></mrow><mo id="S3.E2.m1.7.7.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.7.7.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E2.m1.7.7.1.2" xref="S3.E2.m1.7.7.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.7b"><apply id="S3.E2.m1.7.7.1.1.cmml" xref="S3.E2.m1.7.7.1"><and id="S3.E2.m1.7.7.1.1a.cmml" xref="S3.E2.m1.7.7.1"></and><apply id="S3.E2.m1.7.7.1.1b.cmml" xref="S3.E2.m1.7.7.1"><eq id="S3.E2.m1.7.7.1.1.4.cmml" xref="S3.E2.m1.7.7.1.1.4"></eq><apply id="S3.E2.m1.7.7.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.3"><ci id="S3.E2.m1.7.7.1.1.3.1.cmml" xref="S3.E2.m1.7.7.1.1.3.1">~</ci><ci id="S3.E2.m1.7.7.1.1.3.2.cmml" xref="S3.E2.m1.7.7.1.1.3.2">𝒜</ci></apply><apply id="S3.E2.m1.7.7.1.1.5.cmml" xref="S3.E2.m1.7.7.1.1.5"><times id="S3.E2.m1.7.7.1.1.5.1.cmml" xref="S3.E2.m1.7.7.1.1.5.1"></times><ci id="S3.E2.m1.7.7.1.1.5.2a.cmml" xref="S3.E2.m1.7.7.1.1.5.2"><mtext class="ltx_mathvariant_italic" id="S3.E2.m1.7.7.1.1.5.2.cmml" xref="S3.E2.m1.7.7.1.1.5.2">RAG</mtext></ci><list id="S3.E2.m1.7.7.1.1.5.3.1.cmml" xref="S3.E2.m1.7.7.1.1.5.3.2"><ci id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">𝒬</ci><ci id="S3.E2.m1.2.2.cmml" xref="S3.E2.m1.2.2">ℳ</ci><ci id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3">ℛ</ci><ci id="S3.E2.m1.4.4.cmml" xref="S3.E2.m1.4.4">𝒟</ci></list></apply></apply><apply id="S3.E2.m1.7.7.1.1c.cmml" xref="S3.E2.m1.7.7.1"><eq id="S3.E2.m1.7.7.1.1.6.cmml" xref="S3.E2.m1.7.7.1.1.6"></eq><share href="https://arxiv.org/html/2408.00727v3#S3.E2.m1.7.7.1.1.5.cmml" id="S3.E2.m1.7.7.1.1d.cmml" xref="S3.E2.m1.7.7.1"></share><apply id="S3.E2.m1.7.7.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1"><times id="S3.E2.m1.7.7.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.2"></times><apply id="S3.E2.m1.7.7.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.3"><apply id="S3.E2.m1.7.7.1.1.1.3.1.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.3.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1">subscript</csymbol><apply id="S3.E2.m1.7.7.1.1.1.3.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1.2"><times id="S3.E2.m1.7.7.1.1.1.3.1.2.1.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1.2.1"></times><ci id="S3.E2.m1.7.7.1.1.1.3.1.2.2.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1.2.2">arg</ci><ci id="S3.E2.m1.7.7.1.1.1.3.1.2.3.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1.2.3">max</ci></apply><ci id="S3.E2.m1.7.7.1.1.1.3.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.3.1.3">𝒜</ci></apply><apply id="S3.E2.m1.7.7.1.1.1.3.2.cmml" xref="S3.E2.m1.7.7.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.3.2.1.cmml" xref="S3.E2.m1.7.7.1.1.1.3.2">subscript</csymbol><ci id="S3.E2.m1.7.7.1.1.1.3.2.2.cmml" xref="S3.E2.m1.7.7.1.1.1.3.2.2">ℙ</ci><ci id="S3.E2.m1.7.7.1.1.1.3.2.3.cmml" xref="S3.E2.m1.7.7.1.1.1.3.2.3">ℳ</ci></apply></apply><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1"><csymbol cd="latexml" id="S3.E2.m1.7.7.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.2">conditional</csymbol><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.3">𝒜</ci><list id="S3.E2.m1.7.7.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1"><ci id="S3.E2.m1.5.5.cmml" xref="S3.E2.m1.5.5">𝒬</ci><ci id="S3.E2.m1.6.6a.cmml" xref="S3.E2.m1.6.6"><mtext id="S3.E2.m1.6.6.cmml" xref="S3.E2.m1.6.6">inst.</mtext></ci><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1">subscript</csymbol><set id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1"><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3"><eq id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1"></eq><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2">𝑖</ci><cn id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.1.1.1.3">𝑁</ci></apply></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.7c">\tilde{\mathcal{A}}=\textit{RAG}(\mathcal{Q};\mathcal{M},\mathcal{R},\mathcal{%
D})=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal{M}}(\mathcal{A}%
\mid\mathcal{Q},\text{inst.},\{d_{i}\}_{i=1}^{N}),</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.7d">over~ start_ARG caligraphic_A end_ARG = RAG ( caligraphic_Q ; caligraphic_M , caligraphic_R , caligraphic_D ) = start_OPERATOR roman_arg roman_max end_OPERATOR start_POSTSUBSCRIPT caligraphic_A end_POSTSUBSCRIPT blackboard_P start_POSTSUBSCRIPT caligraphic_M end_POSTSUBSCRIPT ( caligraphic_A ∣ caligraphic_Q , inst. , { italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.5">where <math alttext="\{d_{i}\}_{i=1}^{N}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m1.1"><semantics id="S3.SS1.p1.5.m1.1a"><msubsup id="S3.SS1.p1.5.m1.1.1" xref="S3.SS1.p1.5.m1.1.1.cmml"><mrow id="S3.SS1.p1.5.m1.1.1.1.1.1" xref="S3.SS1.p1.5.m1.1.1.1.1.2.cmml"><mo id="S3.SS1.p1.5.m1.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p1.5.m1.1.1.1.1.2.cmml">{</mo><msub id="S3.SS1.p1.5.m1.1.1.1.1.1.1" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p1.5.m1.1.1.1.1.1.1.2" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.SS1.p1.5.m1.1.1.1.1.1.1.3" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p1.5.m1.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p1.5.m1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS1.p1.5.m1.1.1.1.3" xref="S3.SS1.p1.5.m1.1.1.1.3.cmml"><mi id="S3.SS1.p1.5.m1.1.1.1.3.2" xref="S3.SS1.p1.5.m1.1.1.1.3.2.cmml">i</mi><mo id="S3.SS1.p1.5.m1.1.1.1.3.1" xref="S3.SS1.p1.5.m1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS1.p1.5.m1.1.1.1.3.3" xref="S3.SS1.p1.5.m1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.SS1.p1.5.m1.1.1.3" xref="S3.SS1.p1.5.m1.1.1.3.cmml">N</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m1.1b"><apply id="S3.SS1.p1.5.m1.1.1.cmml" xref="S3.SS1.p1.5.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m1.1.1.2.cmml" xref="S3.SS1.p1.5.m1.1.1">superscript</csymbol><apply id="S3.SS1.p1.5.m1.1.1.1.cmml" xref="S3.SS1.p1.5.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m1.1.1">subscript</csymbol><set id="S3.SS1.p1.5.m1.1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m1.1.1.1.1.1"><apply id="S3.SS1.p1.5.m1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.SS1.p1.5.m1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p1.5.m1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.SS1.p1.5.m1.1.1.1.3.cmml" xref="S3.SS1.p1.5.m1.1.1.1.3"><eq id="S3.SS1.p1.5.m1.1.1.1.3.1.cmml" xref="S3.SS1.p1.5.m1.1.1.1.3.1"></eq><ci id="S3.SS1.p1.5.m1.1.1.1.3.2.cmml" xref="S3.SS1.p1.5.m1.1.1.1.3.2">𝑖</ci><cn id="S3.SS1.p1.5.m1.1.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.5.m1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS1.p1.5.m1.1.1.3.cmml" xref="S3.SS1.p1.5.m1.1.1.3">𝑁</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m1.1c">\{d_{i}\}_{i=1}^{N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m1.1d">{ italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> are the question-specific retrieved documents given by</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\{d_{i}\}_{i=1}^{N}=\mathcal{R}(\mathcal{Q};\mathcal{D})." class="ltx_Math" display="block" id="S3.E3.m1.3"><semantics id="S3.E3.m1.3a"><mrow id="S3.E3.m1.3.3.1" xref="S3.E3.m1.3.3.1.1.cmml"><mrow id="S3.E3.m1.3.3.1.1" xref="S3.E3.m1.3.3.1.1.cmml"><msubsup id="S3.E3.m1.3.3.1.1.1" xref="S3.E3.m1.3.3.1.1.1.cmml"><mrow id="S3.E3.m1.3.3.1.1.1.1.1.1" xref="S3.E3.m1.3.3.1.1.1.1.1.2.cmml"><mo id="S3.E3.m1.3.3.1.1.1.1.1.1.2" stretchy="false" xref="S3.E3.m1.3.3.1.1.1.1.1.2.cmml">{</mo><msub id="S3.E3.m1.3.3.1.1.1.1.1.1.1" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.3.3.1.1.1.1.1.1.1.2" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.E3.m1.3.3.1.1.1.1.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.3.3.1.1.1.1.1.1.3" stretchy="false" xref="S3.E3.m1.3.3.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.E3.m1.3.3.1.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.1.3.cmml"><mi id="S3.E3.m1.3.3.1.1.1.1.3.2" xref="S3.E3.m1.3.3.1.1.1.1.3.2.cmml">i</mi><mo id="S3.E3.m1.3.3.1.1.1.1.3.1" xref="S3.E3.m1.3.3.1.1.1.1.3.1.cmml">=</mo><mn id="S3.E3.m1.3.3.1.1.1.1.3.3" xref="S3.E3.m1.3.3.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.E3.m1.3.3.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.3.cmml">N</mi></msubsup><mo id="S3.E3.m1.3.3.1.1.2" xref="S3.E3.m1.3.3.1.1.2.cmml">=</mo><mrow id="S3.E3.m1.3.3.1.1.3" xref="S3.E3.m1.3.3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.3.3.1.1.3.2" xref="S3.E3.m1.3.3.1.1.3.2.cmml">ℛ</mi><mo id="S3.E3.m1.3.3.1.1.3.1" xref="S3.E3.m1.3.3.1.1.3.1.cmml">⁢</mo><mrow id="S3.E3.m1.3.3.1.1.3.3.2" xref="S3.E3.m1.3.3.1.1.3.3.1.cmml"><mo id="S3.E3.m1.3.3.1.1.3.3.2.1" stretchy="false" xref="S3.E3.m1.3.3.1.1.3.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.1.1" xref="S3.E3.m1.1.1.cmml">𝒬</mi><mo id="S3.E3.m1.3.3.1.1.3.3.2.2" xref="S3.E3.m1.3.3.1.1.3.3.1.cmml">;</mo><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.2.2" xref="S3.E3.m1.2.2.cmml">𝒟</mi><mo id="S3.E3.m1.3.3.1.1.3.3.2.3" stretchy="false" xref="S3.E3.m1.3.3.1.1.3.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E3.m1.3.3.1.2" lspace="0em" xref="S3.E3.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.3b"><apply id="S3.E3.m1.3.3.1.1.cmml" xref="S3.E3.m1.3.3.1"><eq id="S3.E3.m1.3.3.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.2"></eq><apply id="S3.E3.m1.3.3.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1">superscript</csymbol><apply id="S3.E3.m1.3.3.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1">subscript</csymbol><set id="S3.E3.m1.3.3.1.1.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1"><apply id="S3.E3.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.E3.m1.3.3.1.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.E3.m1.3.3.1.1.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.1.1.3"><eq id="S3.E3.m1.3.3.1.1.1.1.3.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1.3.1"></eq><ci id="S3.E3.m1.3.3.1.1.1.1.3.2.cmml" xref="S3.E3.m1.3.3.1.1.1.1.3.2">𝑖</ci><cn id="S3.E3.m1.3.3.1.1.1.1.3.3.cmml" type="integer" xref="S3.E3.m1.3.3.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.E3.m1.3.3.1.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.1.3">𝑁</ci></apply><apply id="S3.E3.m1.3.3.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.3"><times id="S3.E3.m1.3.3.1.1.3.1.cmml" xref="S3.E3.m1.3.3.1.1.3.1"></times><ci id="S3.E3.m1.3.3.1.1.3.2.cmml" xref="S3.E3.m1.3.3.1.1.3.2">ℛ</ci><list id="S3.E3.m1.3.3.1.1.3.3.1.cmml" xref="S3.E3.m1.3.3.1.1.3.3.2"><ci id="S3.E3.m1.1.1.cmml" xref="S3.E3.m1.1.1">𝒬</ci><ci id="S3.E3.m1.2.2.cmml" xref="S3.E3.m1.2.2">𝒟</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.3c">\{d_{i}\}_{i=1}^{N}=\mathcal{R}(\mathcal{Q};\mathcal{D}).</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.3d">{ italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT = caligraphic_R ( caligraphic_Q ; caligraphic_D ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.7">Here <math alttext="R" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m1.1"><semantics id="S3.SS1.p1.6.m1.1a"><mi id="S3.SS1.p1.6.m1.1.1" xref="S3.SS1.p1.6.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m1.1b"><ci id="S3.SS1.p1.6.m1.1.1.cmml" xref="S3.SS1.p1.6.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m1.1d">italic_R</annotation></semantics></math> is the text retriever and <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m2.1"><semantics id="S3.SS1.p1.7.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.7.m2.1.1" xref="S3.SS1.p1.7.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m2.1b"><ci id="S3.SS1.p1.7.m2.1.1.cmml" xref="S3.SS1.p1.7.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m2.1d">caligraphic_D</annotation></semantics></math> is the corpus with a collection of documents.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Iterative Retrieval-Augmented Generation</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">While RAG exhibits promising performance in medical question answering <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>, it may be unable to handle certain complex medical questions in real-world cases.
As text retrievers are typically trained to find relevant documents based on text similarity or lexicon overlap, they cannot break down a complex question and search for relevant information in a step-by-step manner.
Thus, the inflexible retrieval step (Formula <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.E3" title="In 3.1 Retrieval-Augmented Generation ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3</span></a>) in RAG may fail to analyze medical questions and find useful information to augment the answer generation, especially in complex clinical cases, where multiple rounds of information-seeking are required.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.2">To address the issues mentioned, we propose to incorporate flexible information retrieval by
prompting LLMs to iteratively generate follow-up queries based on the given medical question and previous information-seeking history.
Moreover, as the context lengths of LLMs are limited, it can be impractical and infeasible to include all retrieved documents in the LLM context. Therefore, we prompt LLMs to directly answer the raised queries with relevant information and use such query-answer pairs as the information-seeking history.
The pipeline of our proposed system can be formulated as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\tilde{\mathcal{A}}=\textit{{i}-MedRAG}(\mathcal{Q};\mathcal{M},\mathcal{R},%
\mathcal{D})=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal{M}}(%
\mathcal{A}\mid\mathcal{Q},\text{inst.},\{(q_{i},a_{i})\}_{i=1}^{N})," class="ltx_Math" display="block" id="S3.E4.m1.7"><semantics id="S3.E4.m1.7a"><mrow id="S3.E4.m1.7.7.1" xref="S3.E4.m1.7.7.1.1.cmml"><mrow id="S3.E4.m1.7.7.1.1" xref="S3.E4.m1.7.7.1.1.cmml"><mover accent="true" id="S3.E4.m1.7.7.1.1.3" xref="S3.E4.m1.7.7.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.7.7.1.1.3.2" xref="S3.E4.m1.7.7.1.1.3.2.cmml">𝒜</mi><mo id="S3.E4.m1.7.7.1.1.3.1" xref="S3.E4.m1.7.7.1.1.3.1.cmml">~</mo></mover><mo id="S3.E4.m1.7.7.1.1.4" xref="S3.E4.m1.7.7.1.1.4.cmml">=</mo><mrow id="S3.E4.m1.7.7.1.1.5" xref="S3.E4.m1.7.7.1.1.5.cmml"><mtext class="ltx_mathvariant_italic" id="S3.E4.m1.7.7.1.1.5.2" xref="S3.E4.m1.7.7.1.1.5.2a.cmml">i-MedRAG</mtext><mo id="S3.E4.m1.7.7.1.1.5.1" xref="S3.E4.m1.7.7.1.1.5.1.cmml">⁢</mo><mrow id="S3.E4.m1.7.7.1.1.5.3.2" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml"><mo id="S3.E4.m1.7.7.1.1.5.3.2.1" stretchy="false" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.1.1" xref="S3.E4.m1.1.1.cmml">𝒬</mi><mo id="S3.E4.m1.7.7.1.1.5.3.2.2" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml">;</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.2.2" xref="S3.E4.m1.2.2.cmml">ℳ</mi><mo id="S3.E4.m1.7.7.1.1.5.3.2.3" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.3" xref="S3.E4.m1.3.3.cmml">ℛ</mi><mo id="S3.E4.m1.7.7.1.1.5.3.2.4" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.4.4" xref="S3.E4.m1.4.4.cmml">𝒟</mi><mo id="S3.E4.m1.7.7.1.1.5.3.2.5" stretchy="false" xref="S3.E4.m1.7.7.1.1.5.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.7.7.1.1.6" xref="S3.E4.m1.7.7.1.1.6.cmml">=</mo><mrow id="S3.E4.m1.7.7.1.1.1" xref="S3.E4.m1.7.7.1.1.1.cmml"><mrow id="S3.E4.m1.7.7.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.3.cmml"><munder id="S3.E4.m1.7.7.1.1.1.3.1" xref="S3.E4.m1.7.7.1.1.1.3.1.cmml"><mrow id="S3.E4.m1.7.7.1.1.1.3.1.2" xref="S3.E4.m1.7.7.1.1.1.3.1.2.cmml"><mi id="S3.E4.m1.7.7.1.1.1.3.1.2.2" xref="S3.E4.m1.7.7.1.1.1.3.1.2.2.cmml">arg</mi><mo id="S3.E4.m1.7.7.1.1.1.3.1.2.1" lspace="0.170em" xref="S3.E4.m1.7.7.1.1.1.3.1.2.1.cmml">⁢</mo><mi id="S3.E4.m1.7.7.1.1.1.3.1.2.3" xref="S3.E4.m1.7.7.1.1.1.3.1.2.3.cmml">max</mi></mrow><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.7.7.1.1.1.3.1.3" xref="S3.E4.m1.7.7.1.1.1.3.1.3.cmml">𝒜</mi></munder><mo id="S3.E4.m1.7.7.1.1.1.3a" xref="S3.E4.m1.7.7.1.1.1.3.cmml">⁡</mo><msub id="S3.E4.m1.7.7.1.1.1.3.2" xref="S3.E4.m1.7.7.1.1.1.3.2.cmml"><mi id="S3.E4.m1.7.7.1.1.1.3.2.2" xref="S3.E4.m1.7.7.1.1.1.3.2.2.cmml">ℙ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.7.7.1.1.1.3.2.3" xref="S3.E4.m1.7.7.1.1.1.3.2.3.cmml">ℳ</mi></msub></mrow><mo id="S3.E4.m1.7.7.1.1.1.2" xref="S3.E4.m1.7.7.1.1.1.2.cmml">⁢</mo><mrow id="S3.E4.m1.7.7.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.cmml"><mo id="S3.E4.m1.7.7.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E4.m1.7.7.1.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.7.7.1.1.1.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.3.cmml">𝒜</mi><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.2.cmml">∣</mo><mrow id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.5.5" xref="S3.E4.m1.5.5.cmml">𝒬</mi><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.2.cmml">,</mo><mtext id="S3.E4.m1.6.6" xref="S3.E4.m1.6.6a.cmml">inst.</mtext><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.2.cmml">,</mo><msubsup id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.cmml"><mrow id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml">{</mo><mrow id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">(</mo><msub id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">q</mi><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.4" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">,</mo><msub id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml"><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml">a</mi><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.5" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml">N</mi></msubsup></mrow></mrow><mo id="S3.E4.m1.7.7.1.1.1.1.1.3" stretchy="false" xref="S3.E4.m1.7.7.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E4.m1.7.7.1.2" xref="S3.E4.m1.7.7.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.7b"><apply id="S3.E4.m1.7.7.1.1.cmml" xref="S3.E4.m1.7.7.1"><and id="S3.E4.m1.7.7.1.1a.cmml" xref="S3.E4.m1.7.7.1"></and><apply id="S3.E4.m1.7.7.1.1b.cmml" xref="S3.E4.m1.7.7.1"><eq id="S3.E4.m1.7.7.1.1.4.cmml" xref="S3.E4.m1.7.7.1.1.4"></eq><apply id="S3.E4.m1.7.7.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.3"><ci id="S3.E4.m1.7.7.1.1.3.1.cmml" xref="S3.E4.m1.7.7.1.1.3.1">~</ci><ci id="S3.E4.m1.7.7.1.1.3.2.cmml" xref="S3.E4.m1.7.7.1.1.3.2">𝒜</ci></apply><apply id="S3.E4.m1.7.7.1.1.5.cmml" xref="S3.E4.m1.7.7.1.1.5"><times id="S3.E4.m1.7.7.1.1.5.1.cmml" xref="S3.E4.m1.7.7.1.1.5.1"></times><ci id="S3.E4.m1.7.7.1.1.5.2a.cmml" xref="S3.E4.m1.7.7.1.1.5.2"><mtext class="ltx_mathvariant_italic" id="S3.E4.m1.7.7.1.1.5.2.cmml" xref="S3.E4.m1.7.7.1.1.5.2">i-MedRAG</mtext></ci><list id="S3.E4.m1.7.7.1.1.5.3.1.cmml" xref="S3.E4.m1.7.7.1.1.5.3.2"><ci id="S3.E4.m1.1.1.cmml" xref="S3.E4.m1.1.1">𝒬</ci><ci id="S3.E4.m1.2.2.cmml" xref="S3.E4.m1.2.2">ℳ</ci><ci id="S3.E4.m1.3.3.cmml" xref="S3.E4.m1.3.3">ℛ</ci><ci id="S3.E4.m1.4.4.cmml" xref="S3.E4.m1.4.4">𝒟</ci></list></apply></apply><apply id="S3.E4.m1.7.7.1.1c.cmml" xref="S3.E4.m1.7.7.1"><eq id="S3.E4.m1.7.7.1.1.6.cmml" xref="S3.E4.m1.7.7.1.1.6"></eq><share href="https://arxiv.org/html/2408.00727v3#S3.E4.m1.7.7.1.1.5.cmml" id="S3.E4.m1.7.7.1.1d.cmml" xref="S3.E4.m1.7.7.1"></share><apply id="S3.E4.m1.7.7.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1"><times id="S3.E4.m1.7.7.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.2"></times><apply id="S3.E4.m1.7.7.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.3"><apply id="S3.E4.m1.7.7.1.1.1.3.1.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.3.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1">subscript</csymbol><apply id="S3.E4.m1.7.7.1.1.1.3.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1.2"><times id="S3.E4.m1.7.7.1.1.1.3.1.2.1.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1.2.1"></times><ci id="S3.E4.m1.7.7.1.1.1.3.1.2.2.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1.2.2">arg</ci><ci id="S3.E4.m1.7.7.1.1.1.3.1.2.3.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1.2.3">max</ci></apply><ci id="S3.E4.m1.7.7.1.1.1.3.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.3.1.3">𝒜</ci></apply><apply id="S3.E4.m1.7.7.1.1.1.3.2.cmml" xref="S3.E4.m1.7.7.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.3.2.1.cmml" xref="S3.E4.m1.7.7.1.1.1.3.2">subscript</csymbol><ci id="S3.E4.m1.7.7.1.1.1.3.2.2.cmml" xref="S3.E4.m1.7.7.1.1.1.3.2.2">ℙ</ci><ci id="S3.E4.m1.7.7.1.1.1.3.2.3.cmml" xref="S3.E4.m1.7.7.1.1.1.3.2.3">ℳ</ci></apply></apply><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1"><csymbol cd="latexml" id="S3.E4.m1.7.7.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.2">conditional</csymbol><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.3">𝒜</ci><list id="S3.E4.m1.7.7.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1"><ci id="S3.E4.m1.5.5.cmml" xref="S3.E4.m1.5.5">𝒬</ci><ci id="S3.E4.m1.6.6a.cmml" xref="S3.E4.m1.6.6"><mtext id="S3.E4.m1.6.6.cmml" xref="S3.E4.m1.6.6">inst.</mtext></ci><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1">subscript</csymbol><set id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1"><interval closure="open" id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2"><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑞</ci><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2">𝑎</ci><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><apply id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3"><eq id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.1"></eq><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.2">𝑖</ci><cn id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.1.1.1.1.1.1.1.1.1.3">𝑁</ci></apply></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.7c">\tilde{\mathcal{A}}=\textit{{i}-MedRAG}(\mathcal{Q};\mathcal{M},\mathcal{R},%
\mathcal{D})=\operatorname*{arg\,max}_{\mathcal{A}}\mathbb{P}_{\mathcal{M}}(%
\mathcal{A}\mid\mathcal{Q},\text{inst.},\{(q_{i},a_{i})\}_{i=1}^{N}),</annotation><annotation encoding="application/x-llamapun" id="S3.E4.m1.7d">over~ start_ARG caligraphic_A end_ARG = i-MedRAG ( caligraphic_Q ; caligraphic_M , caligraphic_R , caligraphic_D ) = start_OPERATOR roman_arg roman_max end_OPERATOR start_POSTSUBSCRIPT caligraphic_A end_POSTSUBSCRIPT blackboard_P start_POSTSUBSCRIPT caligraphic_M end_POSTSUBSCRIPT ( caligraphic_A ∣ caligraphic_Q , inst. , { ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.p2.1">where <math alttext="\{(q_{i},a_{i})\}_{i=1}^{N}" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><msubsup id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mrow id="S3.SS2.p2.1.m1.1.1.1.1.1" xref="S3.SS2.p2.1.m1.1.1.1.1.2.cmml"><mo id="S3.SS2.p2.1.m1.1.1.1.1.1.2" stretchy="false" xref="S3.SS2.p2.1.m1.1.1.1.1.2.cmml">{</mo><mrow id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.3.cmml"><mo id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.3" stretchy="false" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.3.cmml">(</mo><msub id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.2.cmml">q</mi><mi id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.4" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.3.cmml">,</mo><msub id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.cmml"><mi id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.2" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.2.cmml">a</mi><mi id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.3" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.5" stretchy="false" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="S3.SS2.p2.1.m1.1.1.1.1.1.3" stretchy="false" xref="S3.SS2.p2.1.m1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS2.p2.1.m1.1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.1.3.cmml"><mi id="S3.SS2.p2.1.m1.1.1.1.3.2" xref="S3.SS2.p2.1.m1.1.1.1.3.2.cmml">i</mi><mo id="S3.SS2.p2.1.m1.1.1.1.3.1" xref="S3.SS2.p2.1.m1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS2.p2.1.m1.1.1.1.3.3" xref="S3.SS2.p2.1.m1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml">N</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1">superscript</csymbol><apply id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1">subscript</csymbol><set id="S3.SS2.p2.1.m1.1.1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1"><interval closure="open" id="S3.SS2.p2.1.m1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2"><apply id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.2">𝑞</ci><ci id="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.2">𝑎</ci><ci id="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.3.cmml" xref="S3.SS2.p2.1.m1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><apply id="S3.SS2.p2.1.m1.1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.1.3"><eq id="S3.SS2.p2.1.m1.1.1.1.3.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1.3.1"></eq><ci id="S3.SS2.p2.1.m1.1.1.1.3.2.cmml" xref="S3.SS2.p2.1.m1.1.1.1.3.2">𝑖</ci><cn id="S3.SS2.p2.1.m1.1.1.1.3.3.cmml" type="integer" xref="S3.SS2.p2.1.m1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3">𝑁</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\{(q_{i},a_{i})\}_{i=1}^{N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">{ ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> are the queries and the corresponding answers generated by LLMs with the help of RAG. The iterative process of query and answer generation will be detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS3" title="3.3 Iterative Generation of Follow-up Questions ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3.3</span></a>.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Iterative Generation of Follow-up Questions</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.4">While the retrieved documents in RAG are determined by the question and the retrieval system, we propose to incorporate the reasoning capabilities of LLMs in <span class="ltx_text ltx_font_italic" id="S3.SS3.p1.4.1">i</span>-MedRAG by prompting them to dynamically generate helpful queries in a step-by-step manner. Specifically, the LLM will be encouraged to generate <math alttext="n" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><mi id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><ci id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_n</annotation></semantics></math> different queries to help find useful additional information for <math alttext="m" class="ltx_Math" display="inline" id="S3.SS3.p1.2.m2.1"><semantics id="S3.SS3.p1.2.m2.1a"><mi id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><ci id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">m</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.2.m2.1d">italic_m</annotation></semantics></math> iterations. In all iterations except for the first one, the model will be given the information-seeking history to generate context-specific follow-up queries. The queries <math alttext="q_{i1},\cdots,q_{in}" class="ltx_Math" display="inline" id="S3.SS3.p1.3.m3.3"><semantics id="S3.SS3.p1.3.m3.3a"><mrow id="S3.SS3.p1.3.m3.3.3.2" xref="S3.SS3.p1.3.m3.3.3.3.cmml"><msub id="S3.SS3.p1.3.m3.2.2.1.1" xref="S3.SS3.p1.3.m3.2.2.1.1.cmml"><mi id="S3.SS3.p1.3.m3.2.2.1.1.2" xref="S3.SS3.p1.3.m3.2.2.1.1.2.cmml">q</mi><mrow id="S3.SS3.p1.3.m3.2.2.1.1.3" xref="S3.SS3.p1.3.m3.2.2.1.1.3.cmml"><mi id="S3.SS3.p1.3.m3.2.2.1.1.3.2" xref="S3.SS3.p1.3.m3.2.2.1.1.3.2.cmml">i</mi><mo id="S3.SS3.p1.3.m3.2.2.1.1.3.1" xref="S3.SS3.p1.3.m3.2.2.1.1.3.1.cmml">⁢</mo><mn id="S3.SS3.p1.3.m3.2.2.1.1.3.3" xref="S3.SS3.p1.3.m3.2.2.1.1.3.3.cmml">1</mn></mrow></msub><mo id="S3.SS3.p1.3.m3.3.3.2.3" xref="S3.SS3.p1.3.m3.3.3.3.cmml">,</mo><mi id="S3.SS3.p1.3.m3.1.1" mathvariant="normal" xref="S3.SS3.p1.3.m3.1.1.cmml">⋯</mi><mo id="S3.SS3.p1.3.m3.3.3.2.4" xref="S3.SS3.p1.3.m3.3.3.3.cmml">,</mo><msub id="S3.SS3.p1.3.m3.3.3.2.2" xref="S3.SS3.p1.3.m3.3.3.2.2.cmml"><mi id="S3.SS3.p1.3.m3.3.3.2.2.2" xref="S3.SS3.p1.3.m3.3.3.2.2.2.cmml">q</mi><mrow id="S3.SS3.p1.3.m3.3.3.2.2.3" xref="S3.SS3.p1.3.m3.3.3.2.2.3.cmml"><mi id="S3.SS3.p1.3.m3.3.3.2.2.3.2" xref="S3.SS3.p1.3.m3.3.3.2.2.3.2.cmml">i</mi><mo id="S3.SS3.p1.3.m3.3.3.2.2.3.1" xref="S3.SS3.p1.3.m3.3.3.2.2.3.1.cmml">⁢</mo><mi id="S3.SS3.p1.3.m3.3.3.2.2.3.3" xref="S3.SS3.p1.3.m3.3.3.2.2.3.3.cmml">n</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.3b"><list id="S3.SS3.p1.3.m3.3.3.3.cmml" xref="S3.SS3.p1.3.m3.3.3.2"><apply id="S3.SS3.p1.3.m3.2.2.1.1.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.2.2.1.1.1.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1">subscript</csymbol><ci id="S3.SS3.p1.3.m3.2.2.1.1.2.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1.2">𝑞</ci><apply id="S3.SS3.p1.3.m3.2.2.1.1.3.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1.3"><times id="S3.SS3.p1.3.m3.2.2.1.1.3.1.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1.3.1"></times><ci id="S3.SS3.p1.3.m3.2.2.1.1.3.2.cmml" xref="S3.SS3.p1.3.m3.2.2.1.1.3.2">𝑖</ci><cn id="S3.SS3.p1.3.m3.2.2.1.1.3.3.cmml" type="integer" xref="S3.SS3.p1.3.m3.2.2.1.1.3.3">1</cn></apply></apply><ci id="S3.SS3.p1.3.m3.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1">⋯</ci><apply id="S3.SS3.p1.3.m3.3.3.2.2.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.3.3.2.2.1.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2">subscript</csymbol><ci id="S3.SS3.p1.3.m3.3.3.2.2.2.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2.2">𝑞</ci><apply id="S3.SS3.p1.3.m3.3.3.2.2.3.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2.3"><times id="S3.SS3.p1.3.m3.3.3.2.2.3.1.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2.3.1"></times><ci id="S3.SS3.p1.3.m3.3.3.2.2.3.2.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2.3.2">𝑖</ci><ci id="S3.SS3.p1.3.m3.3.3.2.2.3.3.cmml" xref="S3.SS3.p1.3.m3.3.3.2.2.3.3">𝑛</ci></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.3c">q_{i1},\cdots,q_{in}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.3.m3.3d">italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT</annotation></semantics></math> generated in the <math alttext="i" class="ltx_Math" display="inline" id="S3.SS3.p1.4.m4.1"><semantics id="S3.SS3.p1.4.m4.1a"><mi id="S3.SS3.p1.4.m4.1.1" xref="S3.SS3.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.4.m4.1b"><ci id="S3.SS3.p1.4.m4.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.4.m4.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.4.m4.1d">italic_i</annotation></semantics></math>-th iteration can be formulated as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="q_{i1},\cdots,q_{in}=\left\{\begin{aligned} &amp;\operatorname*{arg\,max}_{q_{i1},%
\cdots,q_{in}}\mathbb{P}_{\mathcal{M}}(q_{i1},\cdots,q_{in}\mid\mathcal{Q},%
\text{inst.}^{\prime}),&amp;\text{if }i=1,\\
&amp;\operatorname*{arg\,max}_{q_{ic1},\cdots,q_{in}}\mathbb{P}_{\mathcal{M}}(q_{i%
1},\cdots,q_{in}\mid\mathcal{Q},\text{inst.}^{\prime},\{(q_{jk},a_{jk})\}_{j=1%
,\cdots,i-1}^{k=1,\cdots,n}),&amp;\text{if }i&gt;1.\end{aligned}\right." class="ltx_math_unparsed" display="block" id="S3.E5.m1.21"><semantics id="S3.E5.m1.21a"><mrow id="S3.E5.m1.21b"><msub id="S3.E5.m1.21.22"><mi id="S3.E5.m1.21.22.2">q</mi><mrow id="S3.E5.m1.21.22.3"><mi id="S3.E5.m1.21.22.3.2">i</mi><mo id="S3.E5.m1.21.22.3.1">⁢</mo><mn id="S3.E5.m1.21.22.3.3">1</mn></mrow></msub><mo id="S3.E5.m1.21.23">,</mo><mi id="S3.E5.m1.21.21" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.21.24">,</mo><msub id="S3.E5.m1.21.25"><mi id="S3.E5.m1.21.25.2">q</mi><mrow id="S3.E5.m1.21.25.3"><mi id="S3.E5.m1.21.25.3.2">i</mi><mo id="S3.E5.m1.21.25.3.1">⁢</mo><mi id="S3.E5.m1.21.25.3.3">n</mi></mrow></msub><mo id="S3.E5.m1.21.26">=</mo><mrow id="S3.E5.m1.21.27"><mo id="S3.E5.m1.21.27.1">{</mo><mtable columnspacing="0pt" displaystyle="true" id="S3.E5.m1.20.20" rowspacing="0pt"><mtr id="S3.E5.m1.20.20a"><mtd id="S3.E5.m1.20.20b"></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.20.20c"><mrow id="S3.E5.m1.6.6.6.6.6.6"><mrow id="S3.E5.m1.6.6.6.6.6.6.1"><mrow id="S3.E5.m1.6.6.6.6.6.6.1.4"><munder id="S3.E5.m1.6.6.6.6.6.6.1.4.1"><mrow id="S3.E5.m1.6.6.6.6.6.6.1.4.1.2"><mi id="S3.E5.m1.6.6.6.6.6.6.1.4.1.2.2">arg</mi><mo id="S3.E5.m1.6.6.6.6.6.6.1.4.1.2.1" lspace="0.170em">⁢</mo><mi id="S3.E5.m1.6.6.6.6.6.6.1.4.1.2.3">max</mi></mrow><mrow id="S3.E5.m1.3.3.3.3.3.3.3.3"><msub id="S3.E5.m1.2.2.2.2.2.2.2.2.1"><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.2">q</mi><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.3"><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.3.2">i</mi><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.3.1">⁢</mo><mn id="S3.E5.m1.2.2.2.2.2.2.2.2.1.3.3">1</mn></mrow></msub><mo id="S3.E5.m1.3.3.3.3.3.3.3.3.3">,</mo><mi id="S3.E5.m1.1.1.1.1.1.1.1.1" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.3.3.3.3.3.3.3.3.4">,</mo><msub id="S3.E5.m1.3.3.3.3.3.3.3.3.2"><mi id="S3.E5.m1.3.3.3.3.3.3.3.3.2.2">q</mi><mrow id="S3.E5.m1.3.3.3.3.3.3.3.3.2.3"><mi id="S3.E5.m1.3.3.3.3.3.3.3.3.2.3.2">i</mi><mo id="S3.E5.m1.3.3.3.3.3.3.3.3.2.3.1">⁢</mo><mi id="S3.E5.m1.3.3.3.3.3.3.3.3.2.3.3">n</mi></mrow></msub></mrow></munder><mo id="S3.E5.m1.6.6.6.6.6.6.1.4a" lspace="0.167em">⁡</mo><msub id="S3.E5.m1.6.6.6.6.6.6.1.4.2"><mi id="S3.E5.m1.6.6.6.6.6.6.1.4.2.2">ℙ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.6.6.6.6.6.6.1.4.2.3">ℳ</mi></msub></mrow><mo id="S3.E5.m1.6.6.6.6.6.6.1.3">⁢</mo><mrow id="S3.E5.m1.6.6.6.6.6.6.1.2.2"><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.3" stretchy="false">(</mo><msub id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1"><mi id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1.2">q</mi><mrow id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1.3"><mi id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1.3.2">i</mi><mo id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1.3.1">⁢</mo><mn id="S3.E5.m1.6.6.6.6.6.6.1.1.1.1.3.3">1</mn></mrow></msub><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.4">,</mo><mi id="S3.E5.m1.5.5.5.5.5.5" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.5">,</mo><mrow id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2"><msub id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3"><mi id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3.2">q</mi><mrow id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3.3"><mi id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3.3.2">i</mi><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3.3.1">⁢</mo><mi id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.3.3.3">n</mi></mrow></msub><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.2">∣</mo><mrow id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.1.1"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.4.4.4.4.4.4">𝒬</mi><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.1.1.2">,</mo><msup id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.1.1.1"><mtext id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.1.1.1.2">inst.</mtext><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.2.1.1.1.3">′</mo></msup></mrow></mrow><mo id="S3.E5.m1.6.6.6.6.6.6.1.2.2.6" stretchy="false">)</mo></mrow></mrow><mo id="S3.E5.m1.6.6.6.6.6.6.2">,</mo></mrow></mtd><mtd class="ltx_align_right" columnalign="right" id="S3.E5.m1.20.20d"><mrow id="S3.E5.m1.7.7.7.7.1.1"><mrow id="S3.E5.m1.7.7.7.7.1.1.1"><mrow id="S3.E5.m1.7.7.7.7.1.1.1.2"><mtext id="S3.E5.m1.7.7.7.7.1.1.1.2.2">if </mtext><mo id="S3.E5.m1.7.7.7.7.1.1.1.2.1">⁢</mo><mi id="S3.E5.m1.7.7.7.7.1.1.1.2.3">i</mi></mrow><mo id="S3.E5.m1.7.7.7.7.1.1.1.1">=</mo><mn id="S3.E5.m1.7.7.7.7.1.1.1.3">1</mn></mrow><mo id="S3.E5.m1.7.7.7.7.1.1.2">,</mo></mrow></mtd></mtr><mtr id="S3.E5.m1.20.20e"><mtd id="S3.E5.m1.20.20f"></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.20.20g"><mrow id="S3.E5.m1.19.19.19.12.12.12"><mrow id="S3.E5.m1.19.19.19.12.12.12.1"><mrow id="S3.E5.m1.19.19.19.12.12.12.1.4"><munder id="S3.E5.m1.19.19.19.12.12.12.1.4.1"><mrow id="S3.E5.m1.19.19.19.12.12.12.1.4.1.2"><mi id="S3.E5.m1.19.19.19.12.12.12.1.4.1.2.2">arg</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.4.1.2.1" lspace="0.170em">⁢</mo><mi id="S3.E5.m1.19.19.19.12.12.12.1.4.1.2.3">max</mi></mrow><mrow id="S3.E5.m1.10.10.10.3.3.3.3.3"><msub id="S3.E5.m1.9.9.9.2.2.2.2.2.1"><mi id="S3.E5.m1.9.9.9.2.2.2.2.2.1.2">q</mi><mrow id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3"><mi id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3.2">i</mi><mo id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3.1">⁢</mo><mi id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3.3">c</mi><mo id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3.1a">⁢</mo><mn id="S3.E5.m1.9.9.9.2.2.2.2.2.1.3.4">1</mn></mrow></msub><mo id="S3.E5.m1.10.10.10.3.3.3.3.3.3">,</mo><mi id="S3.E5.m1.8.8.8.1.1.1.1.1" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.10.10.10.3.3.3.3.3.4">,</mo><msub id="S3.E5.m1.10.10.10.3.3.3.3.3.2"><mi id="S3.E5.m1.10.10.10.3.3.3.3.3.2.2">q</mi><mrow id="S3.E5.m1.10.10.10.3.3.3.3.3.2.3"><mi id="S3.E5.m1.10.10.10.3.3.3.3.3.2.3.2">i</mi><mo id="S3.E5.m1.10.10.10.3.3.3.3.3.2.3.1">⁢</mo><mi id="S3.E5.m1.10.10.10.3.3.3.3.3.2.3.3">n</mi></mrow></msub></mrow></munder><mo id="S3.E5.m1.19.19.19.12.12.12.1.4a" lspace="0.167em">⁡</mo><msub id="S3.E5.m1.19.19.19.12.12.12.1.4.2"><mi id="S3.E5.m1.19.19.19.12.12.12.1.4.2.2">ℙ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.19.19.19.12.12.12.1.4.2.3">ℳ</mi></msub></mrow><mo id="S3.E5.m1.19.19.19.12.12.12.1.3">⁢</mo><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2"><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.3" stretchy="false">(</mo><msub id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1"><mi id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1.2">q</mi><mrow id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1.3"><mi id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1.3.2">i</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1.3.1">⁢</mo><mn id="S3.E5.m1.19.19.19.12.12.12.1.1.1.1.3.3">1</mn></mrow></msub><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.4">,</mo><mi id="S3.E5.m1.18.18.18.11.11.11" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.5">,</mo><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2"><msub id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4.2">q</mi><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4.3"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4.3.2">i</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4.3.1">⁢</mo><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.4.3.3">n</mi></mrow></msub><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.3">∣</mo><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.17.17.17.10.10.10">𝒬</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.3">,</mo><msup id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.1.1.1"><mtext id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.1.1.1.2">inst.</mtext><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.1.1.1.3">′</mo></msup><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.4">,</mo><msubsup id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2"><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1"><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.2" stretchy="false">{</mo><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2"><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.3" stretchy="false">(</mo><msub id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1.2">q</mi><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1.3"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1.3.2">j</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1.3.1">⁢</mo><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.1.1.3.3">k</mi></mrow></msub><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.4">,</mo><msub id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2.2">a</mi><mrow id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2.3"><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2.3.2">j</mi><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2.3.1">⁢</mo><mi id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.2.3.3">k</mi></mrow></msub><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.1.2.5" stretchy="false">)</mo></mrow><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.2.2.2.2.1.1.1.3" stretchy="false">}</mo></mrow><mrow id="S3.E5.m1.13.13.13.6.6.6.3"><mi id="S3.E5.m1.13.13.13.6.6.6.3.5">j</mi><mo id="S3.E5.m1.13.13.13.6.6.6.3.4">=</mo><mrow id="S3.E5.m1.13.13.13.6.6.6.3.3.1"><mn id="S3.E5.m1.11.11.11.4.4.4.1.1">1</mn><mo id="S3.E5.m1.13.13.13.6.6.6.3.3.1.2">,</mo><mi id="S3.E5.m1.12.12.12.5.5.5.2.2" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.13.13.13.6.6.6.3.3.1.3">,</mo><mrow id="S3.E5.m1.13.13.13.6.6.6.3.3.1.1"><mi id="S3.E5.m1.13.13.13.6.6.6.3.3.1.1.2">i</mi><mo id="S3.E5.m1.13.13.13.6.6.6.3.3.1.1.1">−</mo><mn id="S3.E5.m1.13.13.13.6.6.6.3.3.1.1.3">1</mn></mrow></mrow></mrow><mrow id="S3.E5.m1.16.16.16.9.9.9.3"><mi id="S3.E5.m1.16.16.16.9.9.9.3.5">k</mi><mo id="S3.E5.m1.16.16.16.9.9.9.3.4">=</mo><mrow id="S3.E5.m1.16.16.16.9.9.9.3.6.2"><mn id="S3.E5.m1.14.14.14.7.7.7.1.1">1</mn><mo id="S3.E5.m1.16.16.16.9.9.9.3.6.2.1">,</mo><mi id="S3.E5.m1.15.15.15.8.8.8.2.2" mathvariant="normal">⋯</mi><mo id="S3.E5.m1.16.16.16.9.9.9.3.6.2.2">,</mo><mi id="S3.E5.m1.16.16.16.9.9.9.3.3">n</mi></mrow></mrow></msubsup></mrow></mrow><mo id="S3.E5.m1.19.19.19.12.12.12.1.2.2.6" stretchy="false">)</mo></mrow></mrow><mo id="S3.E5.m1.19.19.19.12.12.12.2">,</mo></mrow></mtd><mtd class="ltx_align_right" columnalign="right" id="S3.E5.m1.20.20h"><mrow id="S3.E5.m1.20.20.20.13.1.1"><mrow id="S3.E5.m1.20.20.20.13.1.1.1"><mrow id="S3.E5.m1.20.20.20.13.1.1.1.2"><mtext id="S3.E5.m1.20.20.20.13.1.1.1.2.2">if </mtext><mo id="S3.E5.m1.20.20.20.13.1.1.1.2.1">⁢</mo><mi id="S3.E5.m1.20.20.20.13.1.1.1.2.3">i</mi></mrow><mo id="S3.E5.m1.20.20.20.13.1.1.1.1">&gt;</mo><mn id="S3.E5.m1.20.20.20.13.1.1.1.3">1</mn></mrow><mo id="S3.E5.m1.20.20.20.13.1.1.2" lspace="0em">.</mo></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex" id="S3.E5.m1.21c">q_{i1},\cdots,q_{in}=\left\{\begin{aligned} &amp;\operatorname*{arg\,max}_{q_{i1},%
\cdots,q_{in}}\mathbb{P}_{\mathcal{M}}(q_{i1},\cdots,q_{in}\mid\mathcal{Q},%
\text{inst.}^{\prime}),&amp;\text{if }i=1,\\
&amp;\operatorname*{arg\,max}_{q_{ic1},\cdots,q_{in}}\mathbb{P}_{\mathcal{M}}(q_{i%
1},\cdots,q_{in}\mid\mathcal{Q},\text{inst.}^{\prime},\{(q_{jk},a_{jk})\}_{j=1%
,\cdots,i-1}^{k=1,\cdots,n}),&amp;\text{if }i&gt;1.\end{aligned}\right.</annotation><annotation encoding="application/x-llamapun" id="S3.E5.m1.21d">italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT = { start_ROW start_CELL end_CELL start_CELL start_OPERATOR roman_arg roman_max end_OPERATOR start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT end_POSTSUBSCRIPT blackboard_P start_POSTSUBSCRIPT caligraphic_M end_POSTSUBSCRIPT ( italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT ∣ caligraphic_Q , inst. start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ) , end_CELL start_CELL if italic_i = 1 , end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL start_OPERATOR roman_arg roman_max end_OPERATOR start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i italic_c 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT end_POSTSUBSCRIPT blackboard_P start_POSTSUBSCRIPT caligraphic_M end_POSTSUBSCRIPT ( italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT ∣ caligraphic_Q , inst. start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT , { ( italic_q start_POSTSUBSCRIPT italic_j italic_k end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_j italic_k end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_j = 1 , ⋯ , italic_i - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_k = 1 , ⋯ , italic_n end_POSTSUPERSCRIPT ) , end_CELL start_CELL if italic_i &gt; 1 . end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">Different from the “inst.” in Formula <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.E2" title="In 3.1 Retrieval-Augmented Generation ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">2</span></a>, the “inst.<sup class="ltx_sup" id="S3.SS3.p2.1.1"><span class="ltx_text ltx_font_italic" id="S3.SS3.p2.1.1.1">′</span></sup>” here is a modified instruction which focuses on generating follow-up queries instead of answering the medical question. For each query generation step, we prompt the LLM to analyze the existing information first and then generate new queries for additional knowledge. The step-by-step “reason-then-query” pipeline helps LLMs break down complex medical questions and find useful information from the external corpus.
The answer to each generated query is given by a RAG system mentioned in Formula <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.E2" title="In 3.1 Retrieval-Augmented Generation ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">2</span></a>. This enables the system to leverage existing literature to provide grounded answers for generated queries.</p>
</div>
<div class="ltx_para" id="S3.SS3.p3">
<p class="ltx_p" id="S3.SS3.p3.1">The overall algorithm of <span class="ltx_text ltx_font_italic" id="S3.SS3.p3.1.1">i</span>-MedRAG is presented in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#alg1" title="Algorithm 1 ‣ 3.3 Iterative Generation of Follow-up Questions ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.10.1.1">Algorithm 1</span> </span> The algorithm of <span class="ltx_text ltx_font_italic" id="alg1.11.2">i</span>-MedRAG for medical question answering</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="alg1.7"><span class="ltx_text ltx_font_bold" id="alg1.7.1">Input</span> medical question <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="alg1.1.m1.1"><semantics id="alg1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.1.m1.1.1" xref="alg1.1.m1.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="alg1.1.m1.1b"><ci id="alg1.1.m1.1.1.cmml" xref="alg1.1.m1.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.1.m1.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="alg1.1.m1.1d">caligraphic_Q</annotation></semantics></math>, large language model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="alg1.2.m2.1"><semantics id="alg1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.2.m2.1.1" xref="alg1.2.m2.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="alg1.2.m2.1b"><ci id="alg1.2.m2.1.1.cmml" xref="alg1.2.m2.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.2.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="alg1.2.m2.1d">caligraphic_M</annotation></semantics></math>, text retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="alg1.3.m3.1"><semantics id="alg1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.3.m3.1.1" xref="alg1.3.m3.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="alg1.3.m3.1b"><ci id="alg1.3.m3.1.1.cmml" xref="alg1.3.m3.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.3.m3.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="alg1.3.m3.1d">caligraphic_R</annotation></semantics></math>, medical corpus <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="alg1.4.m4.1"><semantics id="alg1.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.4.m4.1.1" xref="alg1.4.m4.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="alg1.4.m4.1b"><ci id="alg1.4.m4.1.1.cmml" xref="alg1.4.m4.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.4.m4.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="alg1.4.m4.1d">caligraphic_D</annotation></semantics></math>, query instruction “inst.<sup class="ltx_sup" id="alg1.7.2"><span class="ltx_text ltx_font_italic" id="alg1.7.2.1">′</span></sup>”, answer instruction “inst.”, hyperparameters <math alttext="m,n,N" class="ltx_Math" display="inline" id="alg1.6.m6.3"><semantics id="alg1.6.m6.3a"><mrow id="alg1.6.m6.3.4.2" xref="alg1.6.m6.3.4.1.cmml"><mi id="alg1.6.m6.1.1" xref="alg1.6.m6.1.1.cmml">m</mi><mo id="alg1.6.m6.3.4.2.1" xref="alg1.6.m6.3.4.1.cmml">,</mo><mi id="alg1.6.m6.2.2" xref="alg1.6.m6.2.2.cmml">n</mi><mo id="alg1.6.m6.3.4.2.2" xref="alg1.6.m6.3.4.1.cmml">,</mo><mi id="alg1.6.m6.3.3" xref="alg1.6.m6.3.3.cmml">N</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.6.m6.3b"><list id="alg1.6.m6.3.4.1.cmml" xref="alg1.6.m6.3.4.2"><ci id="alg1.6.m6.1.1.cmml" xref="alg1.6.m6.1.1">𝑚</ci><ci id="alg1.6.m6.2.2.cmml" xref="alg1.6.m6.2.2">𝑛</ci><ci id="alg1.6.m6.3.3.cmml" xref="alg1.6.m6.3.3">𝑁</ci></list></annotation-xml><annotation encoding="application/x-tex" id="alg1.6.m6.3c">m,n,N</annotation><annotation encoding="application/x-llamapun" id="alg1.6.m6.3d">italic_m , italic_n , italic_N</annotation></semantics></math>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="alg1.7.3">Output</span> answer prediction <math alttext="\tilde{\mathcal{A}}" class="ltx_Math" display="inline" id="alg1.7.m7.1"><semantics id="alg1.7.m7.1a"><mover accent="true" id="alg1.7.m7.1.1" xref="alg1.7.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.7.m7.1.1.2" xref="alg1.7.m7.1.1.2.cmml">𝒜</mi><mo id="alg1.7.m7.1.1.1" xref="alg1.7.m7.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="alg1.7.m7.1b"><apply id="alg1.7.m7.1.1.cmml" xref="alg1.7.m7.1.1"><ci id="alg1.7.m7.1.1.1.cmml" xref="alg1.7.m7.1.1.1">~</ci><ci id="alg1.7.m7.1.1.2.cmml" xref="alg1.7.m7.1.1.2">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.7.m7.1c">\tilde{\mathcal{A}}</annotation><annotation encoding="application/x-llamapun" id="alg1.7.m7.1d">over~ start_ARG caligraphic_A end_ARG</annotation></semantics></math></p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<div class="ltx_listing ltx_figure_panel ltx_listing" id="alg1.12">
<div class="ltx_listingline" id="algx1.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l1.1.1.1" style="font-size:80%;">1:</span></span>Initialize the information-seeking history <math alttext="\mathcal{H}=" class="ltx_Math" display="inline" id="algx1.l1.m1.1"><semantics id="algx1.l1.m1.1a"><mrow id="algx1.l1.m1.1.1" xref="algx1.l1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l1.m1.1.1.2" xref="algx1.l1.m1.1.1.2.cmml">ℋ</mi><mo id="algx1.l1.m1.1.1.1" xref="algx1.l1.m1.1.1.1.cmml">=</mo><mi id="algx1.l1.m1.1.1.3" xref="algx1.l1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l1.m1.1b"><apply id="algx1.l1.m1.1.1.cmml" xref="algx1.l1.m1.1.1"><eq id="algx1.l1.m1.1.1.1.cmml" xref="algx1.l1.m1.1.1.1"></eq><ci id="algx1.l1.m1.1.1.2.cmml" xref="algx1.l1.m1.1.1.2">ℋ</ci><csymbol cd="latexml" id="algx1.l1.m1.1.1.3.cmml" xref="algx1.l1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m1.1c">\mathcal{H}=</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m1.1d">caligraphic_H =</annotation></semantics></math> emptylist()

</div>
<div class="ltx_listingline" id="algx1.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l2.1.1.1" style="font-size:80%;">2:</span></span><span class="ltx_text ltx_font_bold" id="algx1.l2.2">for</span> <math alttext="i" class="ltx_Math" display="inline" id="algx1.l2.m1.1"><semantics id="algx1.l2.m1.1a"><mi id="algx1.l2.m1.1.1" xref="algx1.l2.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="algx1.l2.m1.1b"><ci id="algx1.l2.m1.1.1.cmml" xref="algx1.l2.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.m1.1c">i</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.m1.1d">italic_i</annotation></semantics></math> in <math alttext="1,2,\cdots,m" class="ltx_Math" display="inline" id="algx1.l2.m2.4"><semantics id="algx1.l2.m2.4a"><mrow id="algx1.l2.m2.4.5.2" xref="algx1.l2.m2.4.5.1.cmml"><mn id="algx1.l2.m2.1.1" xref="algx1.l2.m2.1.1.cmml">1</mn><mo id="algx1.l2.m2.4.5.2.1" xref="algx1.l2.m2.4.5.1.cmml">,</mo><mn id="algx1.l2.m2.2.2" xref="algx1.l2.m2.2.2.cmml">2</mn><mo id="algx1.l2.m2.4.5.2.2" xref="algx1.l2.m2.4.5.1.cmml">,</mo><mi id="algx1.l2.m2.3.3" mathvariant="normal" xref="algx1.l2.m2.3.3.cmml">⋯</mi><mo id="algx1.l2.m2.4.5.2.3" xref="algx1.l2.m2.4.5.1.cmml">,</mo><mi id="algx1.l2.m2.4.4" xref="algx1.l2.m2.4.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l2.m2.4b"><list id="algx1.l2.m2.4.5.1.cmml" xref="algx1.l2.m2.4.5.2"><cn id="algx1.l2.m2.1.1.cmml" type="integer" xref="algx1.l2.m2.1.1">1</cn><cn id="algx1.l2.m2.2.2.cmml" type="integer" xref="algx1.l2.m2.2.2">2</cn><ci id="algx1.l2.m2.3.3.cmml" xref="algx1.l2.m2.3.3">⋯</ci><ci id="algx1.l2.m2.4.4.cmml" xref="algx1.l2.m2.4.4">𝑚</ci></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.m2.4c">1,2,\cdots,m</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.m2.4d">1 , 2 , ⋯ , italic_m</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l2.3">do</span>
</div>
<div class="ltx_listingline" id="algx1.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l3.1.1.1" style="font-size:80%;">3:</span></span>     <span class="ltx_text ltx_font_bold" id="algx1.l3.2">if</span> <math alttext="i=1" class="ltx_Math" display="inline" id="algx1.l3.m1.1"><semantics id="algx1.l3.m1.1a"><mrow id="algx1.l3.m1.1.1" xref="algx1.l3.m1.1.1.cmml"><mi id="algx1.l3.m1.1.1.2" xref="algx1.l3.m1.1.1.2.cmml">i</mi><mo id="algx1.l3.m1.1.1.1" xref="algx1.l3.m1.1.1.1.cmml">=</mo><mn id="algx1.l3.m1.1.1.3" xref="algx1.l3.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="algx1.l3.m1.1b"><apply id="algx1.l3.m1.1.1.cmml" xref="algx1.l3.m1.1.1"><eq id="algx1.l3.m1.1.1.1.cmml" xref="algx1.l3.m1.1.1.1"></eq><ci id="algx1.l3.m1.1.1.2.cmml" xref="algx1.l3.m1.1.1.2">𝑖</ci><cn id="algx1.l3.m1.1.1.3.cmml" type="integer" xref="algx1.l3.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m1.1c">i=1</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m1.1d">italic_i = 1</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l3.3">then</span>
</div>
<div class="ltx_listingline" id="algx1.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l4.1.1.1" style="font-size:80%;">4:</span></span>         generate <math alttext="n" class="ltx_Math" display="inline" id="algx1.l4.m1.1"><semantics id="algx1.l4.m1.1a"><mi id="algx1.l4.m1.1.1" xref="algx1.l4.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="algx1.l4.m1.1b"><ci id="algx1.l4.m1.1.1.cmml" xref="algx1.l4.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m1.1d">italic_n</annotation></semantics></math> new queries <math alttext="q_{i1},\cdots,q_{in}" class="ltx_Math" display="inline" id="algx1.l4.m2.3"><semantics id="algx1.l4.m2.3a"><mrow id="algx1.l4.m2.3.3.2" xref="algx1.l4.m2.3.3.3.cmml"><msub id="algx1.l4.m2.2.2.1.1" xref="algx1.l4.m2.2.2.1.1.cmml"><mi id="algx1.l4.m2.2.2.1.1.2" xref="algx1.l4.m2.2.2.1.1.2.cmml">q</mi><mrow id="algx1.l4.m2.2.2.1.1.3" xref="algx1.l4.m2.2.2.1.1.3.cmml"><mi id="algx1.l4.m2.2.2.1.1.3.2" xref="algx1.l4.m2.2.2.1.1.3.2.cmml">i</mi><mo id="algx1.l4.m2.2.2.1.1.3.1" xref="algx1.l4.m2.2.2.1.1.3.1.cmml">⁢</mo><mn id="algx1.l4.m2.2.2.1.1.3.3" xref="algx1.l4.m2.2.2.1.1.3.3.cmml">1</mn></mrow></msub><mo id="algx1.l4.m2.3.3.2.3" xref="algx1.l4.m2.3.3.3.cmml">,</mo><mi id="algx1.l4.m2.1.1" mathvariant="normal" xref="algx1.l4.m2.1.1.cmml">⋯</mi><mo id="algx1.l4.m2.3.3.2.4" xref="algx1.l4.m2.3.3.3.cmml">,</mo><msub id="algx1.l4.m2.3.3.2.2" xref="algx1.l4.m2.3.3.2.2.cmml"><mi id="algx1.l4.m2.3.3.2.2.2" xref="algx1.l4.m2.3.3.2.2.2.cmml">q</mi><mrow id="algx1.l4.m2.3.3.2.2.3" xref="algx1.l4.m2.3.3.2.2.3.cmml"><mi id="algx1.l4.m2.3.3.2.2.3.2" xref="algx1.l4.m2.3.3.2.2.3.2.cmml">i</mi><mo id="algx1.l4.m2.3.3.2.2.3.1" xref="algx1.l4.m2.3.3.2.2.3.1.cmml">⁢</mo><mi id="algx1.l4.m2.3.3.2.2.3.3" xref="algx1.l4.m2.3.3.2.2.3.3.cmml">n</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l4.m2.3b"><list id="algx1.l4.m2.3.3.3.cmml" xref="algx1.l4.m2.3.3.2"><apply id="algx1.l4.m2.2.2.1.1.cmml" xref="algx1.l4.m2.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l4.m2.2.2.1.1.1.cmml" xref="algx1.l4.m2.2.2.1.1">subscript</csymbol><ci id="algx1.l4.m2.2.2.1.1.2.cmml" xref="algx1.l4.m2.2.2.1.1.2">𝑞</ci><apply id="algx1.l4.m2.2.2.1.1.3.cmml" xref="algx1.l4.m2.2.2.1.1.3"><times id="algx1.l4.m2.2.2.1.1.3.1.cmml" xref="algx1.l4.m2.2.2.1.1.3.1"></times><ci id="algx1.l4.m2.2.2.1.1.3.2.cmml" xref="algx1.l4.m2.2.2.1.1.3.2">𝑖</ci><cn id="algx1.l4.m2.2.2.1.1.3.3.cmml" type="integer" xref="algx1.l4.m2.2.2.1.1.3.3">1</cn></apply></apply><ci id="algx1.l4.m2.1.1.cmml" xref="algx1.l4.m2.1.1">⋯</ci><apply id="algx1.l4.m2.3.3.2.2.cmml" xref="algx1.l4.m2.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l4.m2.3.3.2.2.1.cmml" xref="algx1.l4.m2.3.3.2.2">subscript</csymbol><ci id="algx1.l4.m2.3.3.2.2.2.cmml" xref="algx1.l4.m2.3.3.2.2.2">𝑞</ci><apply id="algx1.l4.m2.3.3.2.2.3.cmml" xref="algx1.l4.m2.3.3.2.2.3"><times id="algx1.l4.m2.3.3.2.2.3.1.cmml" xref="algx1.l4.m2.3.3.2.2.3.1"></times><ci id="algx1.l4.m2.3.3.2.2.3.2.cmml" xref="algx1.l4.m2.3.3.2.2.3.2">𝑖</ci><ci id="algx1.l4.m2.3.3.2.2.3.3.cmml" xref="algx1.l4.m2.3.3.2.2.3.3">𝑛</ci></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m2.3c">q_{i1},\cdots,q_{in}</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m2.3d">italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT</annotation></semantics></math> using <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="algx1.l4.m3.1"><semantics id="algx1.l4.m3.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l4.m3.1.1" xref="algx1.l4.m3.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="algx1.l4.m3.1b"><ci id="algx1.l4.m3.1.1.cmml" xref="algx1.l4.m3.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m3.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m3.1d">caligraphic_M</annotation></semantics></math> given <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="algx1.l4.m4.1"><semantics id="algx1.l4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l4.m4.1.1" xref="algx1.l4.m4.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="algx1.l4.m4.1b"><ci id="algx1.l4.m4.1.1.cmml" xref="algx1.l4.m4.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m4.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m4.1d">caligraphic_Q</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l5.1.1.1" style="font-size:80%;">5:</span></span>     <span class="ltx_text ltx_font_bold" id="algx1.l5.2">else</span> <span class="ltx_text ltx_font_bold" id="algx1.l5.3">if</span> <math alttext="i&gt;1" class="ltx_Math" display="inline" id="algx1.l5.m1.1"><semantics id="algx1.l5.m1.1a"><mrow id="algx1.l5.m1.1.1" xref="algx1.l5.m1.1.1.cmml"><mi id="algx1.l5.m1.1.1.2" xref="algx1.l5.m1.1.1.2.cmml">i</mi><mo id="algx1.l5.m1.1.1.1" xref="algx1.l5.m1.1.1.1.cmml">&gt;</mo><mn id="algx1.l5.m1.1.1.3" xref="algx1.l5.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="algx1.l5.m1.1b"><apply id="algx1.l5.m1.1.1.cmml" xref="algx1.l5.m1.1.1"><gt id="algx1.l5.m1.1.1.1.cmml" xref="algx1.l5.m1.1.1.1"></gt><ci id="algx1.l5.m1.1.1.2.cmml" xref="algx1.l5.m1.1.1.2">𝑖</ci><cn id="algx1.l5.m1.1.1.3.cmml" type="integer" xref="algx1.l5.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l5.m1.1c">i&gt;1</annotation><annotation encoding="application/x-llamapun" id="algx1.l5.m1.1d">italic_i &gt; 1</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l5.4">then</span>
</div>
<div class="ltx_listingline" id="algx1.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l6.1.1.1" style="font-size:80%;">6:</span></span>         generate <math alttext="n" class="ltx_Math" display="inline" id="algx1.l6.m1.1"><semantics id="algx1.l6.m1.1a"><mi id="algx1.l6.m1.1.1" xref="algx1.l6.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="algx1.l6.m1.1b"><ci id="algx1.l6.m1.1.1.cmml" xref="algx1.l6.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m1.1d">italic_n</annotation></semantics></math> new queries <math alttext="q_{i1},\cdots,q_{in}" class="ltx_Math" display="inline" id="algx1.l6.m2.3"><semantics id="algx1.l6.m2.3a"><mrow id="algx1.l6.m2.3.3.2" xref="algx1.l6.m2.3.3.3.cmml"><msub id="algx1.l6.m2.2.2.1.1" xref="algx1.l6.m2.2.2.1.1.cmml"><mi id="algx1.l6.m2.2.2.1.1.2" xref="algx1.l6.m2.2.2.1.1.2.cmml">q</mi><mrow id="algx1.l6.m2.2.2.1.1.3" xref="algx1.l6.m2.2.2.1.1.3.cmml"><mi id="algx1.l6.m2.2.2.1.1.3.2" xref="algx1.l6.m2.2.2.1.1.3.2.cmml">i</mi><mo id="algx1.l6.m2.2.2.1.1.3.1" xref="algx1.l6.m2.2.2.1.1.3.1.cmml">⁢</mo><mn id="algx1.l6.m2.2.2.1.1.3.3" xref="algx1.l6.m2.2.2.1.1.3.3.cmml">1</mn></mrow></msub><mo id="algx1.l6.m2.3.3.2.3" xref="algx1.l6.m2.3.3.3.cmml">,</mo><mi id="algx1.l6.m2.1.1" mathvariant="normal" xref="algx1.l6.m2.1.1.cmml">⋯</mi><mo id="algx1.l6.m2.3.3.2.4" xref="algx1.l6.m2.3.3.3.cmml">,</mo><msub id="algx1.l6.m2.3.3.2.2" xref="algx1.l6.m2.3.3.2.2.cmml"><mi id="algx1.l6.m2.3.3.2.2.2" xref="algx1.l6.m2.3.3.2.2.2.cmml">q</mi><mrow id="algx1.l6.m2.3.3.2.2.3" xref="algx1.l6.m2.3.3.2.2.3.cmml"><mi id="algx1.l6.m2.3.3.2.2.3.2" xref="algx1.l6.m2.3.3.2.2.3.2.cmml">i</mi><mo id="algx1.l6.m2.3.3.2.2.3.1" xref="algx1.l6.m2.3.3.2.2.3.1.cmml">⁢</mo><mi id="algx1.l6.m2.3.3.2.2.3.3" xref="algx1.l6.m2.3.3.2.2.3.3.cmml">n</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l6.m2.3b"><list id="algx1.l6.m2.3.3.3.cmml" xref="algx1.l6.m2.3.3.2"><apply id="algx1.l6.m2.2.2.1.1.cmml" xref="algx1.l6.m2.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l6.m2.2.2.1.1.1.cmml" xref="algx1.l6.m2.2.2.1.1">subscript</csymbol><ci id="algx1.l6.m2.2.2.1.1.2.cmml" xref="algx1.l6.m2.2.2.1.1.2">𝑞</ci><apply id="algx1.l6.m2.2.2.1.1.3.cmml" xref="algx1.l6.m2.2.2.1.1.3"><times id="algx1.l6.m2.2.2.1.1.3.1.cmml" xref="algx1.l6.m2.2.2.1.1.3.1"></times><ci id="algx1.l6.m2.2.2.1.1.3.2.cmml" xref="algx1.l6.m2.2.2.1.1.3.2">𝑖</ci><cn id="algx1.l6.m2.2.2.1.1.3.3.cmml" type="integer" xref="algx1.l6.m2.2.2.1.1.3.3">1</cn></apply></apply><ci id="algx1.l6.m2.1.1.cmml" xref="algx1.l6.m2.1.1">⋯</ci><apply id="algx1.l6.m2.3.3.2.2.cmml" xref="algx1.l6.m2.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l6.m2.3.3.2.2.1.cmml" xref="algx1.l6.m2.3.3.2.2">subscript</csymbol><ci id="algx1.l6.m2.3.3.2.2.2.cmml" xref="algx1.l6.m2.3.3.2.2.2">𝑞</ci><apply id="algx1.l6.m2.3.3.2.2.3.cmml" xref="algx1.l6.m2.3.3.2.2.3"><times id="algx1.l6.m2.3.3.2.2.3.1.cmml" xref="algx1.l6.m2.3.3.2.2.3.1"></times><ci id="algx1.l6.m2.3.3.2.2.3.2.cmml" xref="algx1.l6.m2.3.3.2.2.3.2">𝑖</ci><ci id="algx1.l6.m2.3.3.2.2.3.3.cmml" xref="algx1.l6.m2.3.3.2.2.3.3">𝑛</ci></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m2.3c">q_{i1},\cdots,q_{in}</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m2.3d">italic_q start_POSTSUBSCRIPT italic_i 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_i italic_n end_POSTSUBSCRIPT</annotation></semantics></math> using <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="algx1.l6.m3.1"><semantics id="algx1.l6.m3.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l6.m3.1.1" xref="algx1.l6.m3.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="algx1.l6.m3.1b"><ci id="algx1.l6.m3.1.1.cmml" xref="algx1.l6.m3.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m3.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m3.1d">caligraphic_M</annotation></semantics></math> given <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="algx1.l6.m4.1"><semantics id="algx1.l6.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l6.m4.1.1" xref="algx1.l6.m4.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="algx1.l6.m4.1b"><ci id="algx1.l6.m4.1.1.cmml" xref="algx1.l6.m4.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m4.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m4.1d">caligraphic_Q</annotation></semantics></math> and <math alttext="\mathcal{H}" class="ltx_Math" display="inline" id="algx1.l6.m5.1"><semantics id="algx1.l6.m5.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l6.m5.1.1" xref="algx1.l6.m5.1.1.cmml">ℋ</mi><annotation-xml encoding="MathML-Content" id="algx1.l6.m5.1b"><ci id="algx1.l6.m5.1.1.cmml" xref="algx1.l6.m5.1.1">ℋ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m5.1c">\mathcal{H}</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m5.1d">caligraphic_H</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l7.1.1.1" style="font-size:80%;">7:</span></span>     <span class="ltx_text ltx_font_bold" id="algx1.l7.2">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l7.3">if</span>
</div>
<div class="ltx_listingline" id="algx1.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l8.1.1.1" style="font-size:80%;">8:</span></span>     <span class="ltx_text ltx_font_bold" id="algx1.l8.2">for</span> <math alttext="j" class="ltx_Math" display="inline" id="algx1.l8.m1.1"><semantics id="algx1.l8.m1.1a"><mi id="algx1.l8.m1.1.1" xref="algx1.l8.m1.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="algx1.l8.m1.1b"><ci id="algx1.l8.m1.1.1.cmml" xref="algx1.l8.m1.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m1.1c">j</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m1.1d">italic_j</annotation></semantics></math> in <math alttext="1,2,\cdots,n" class="ltx_Math" display="inline" id="algx1.l8.m2.4"><semantics id="algx1.l8.m2.4a"><mrow id="algx1.l8.m2.4.5.2" xref="algx1.l8.m2.4.5.1.cmml"><mn id="algx1.l8.m2.1.1" xref="algx1.l8.m2.1.1.cmml">1</mn><mo id="algx1.l8.m2.4.5.2.1" xref="algx1.l8.m2.4.5.1.cmml">,</mo><mn id="algx1.l8.m2.2.2" xref="algx1.l8.m2.2.2.cmml">2</mn><mo id="algx1.l8.m2.4.5.2.2" xref="algx1.l8.m2.4.5.1.cmml">,</mo><mi id="algx1.l8.m2.3.3" mathvariant="normal" xref="algx1.l8.m2.3.3.cmml">⋯</mi><mo id="algx1.l8.m2.4.5.2.3" xref="algx1.l8.m2.4.5.1.cmml">,</mo><mi id="algx1.l8.m2.4.4" xref="algx1.l8.m2.4.4.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l8.m2.4b"><list id="algx1.l8.m2.4.5.1.cmml" xref="algx1.l8.m2.4.5.2"><cn id="algx1.l8.m2.1.1.cmml" type="integer" xref="algx1.l8.m2.1.1">1</cn><cn id="algx1.l8.m2.2.2.cmml" type="integer" xref="algx1.l8.m2.2.2">2</cn><ci id="algx1.l8.m2.3.3.cmml" xref="algx1.l8.m2.3.3">⋯</ci><ci id="algx1.l8.m2.4.4.cmml" xref="algx1.l8.m2.4.4">𝑛</ci></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m2.4c">1,2,\cdots,n</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m2.4d">1 , 2 , ⋯ , italic_n</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l8.3">do</span>
</div>
<div class="ltx_listingline" id="algx1.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l9.1.1.1" style="font-size:80%;">9:</span></span>         retrieve <math alttext="N" class="ltx_Math" display="inline" id="algx1.l9.m1.1"><semantics id="algx1.l9.m1.1a"><mi id="algx1.l9.m1.1.1" xref="algx1.l9.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="algx1.l9.m1.1b"><ci id="algx1.l9.m1.1.1.cmml" xref="algx1.l9.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m1.1c">N</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m1.1d">italic_N</annotation></semantics></math> relevant documents <math alttext="d_{ij}^{1},\cdots,d_{ij}^{N}" class="ltx_Math" display="inline" id="algx1.l9.m2.3"><semantics id="algx1.l9.m2.3a"><mrow id="algx1.l9.m2.3.3.2" xref="algx1.l9.m2.3.3.3.cmml"><msubsup id="algx1.l9.m2.2.2.1.1" xref="algx1.l9.m2.2.2.1.1.cmml"><mi id="algx1.l9.m2.2.2.1.1.2.2" xref="algx1.l9.m2.2.2.1.1.2.2.cmml">d</mi><mrow id="algx1.l9.m2.2.2.1.1.2.3" xref="algx1.l9.m2.2.2.1.1.2.3.cmml"><mi id="algx1.l9.m2.2.2.1.1.2.3.2" xref="algx1.l9.m2.2.2.1.1.2.3.2.cmml">i</mi><mo id="algx1.l9.m2.2.2.1.1.2.3.1" xref="algx1.l9.m2.2.2.1.1.2.3.1.cmml">⁢</mo><mi id="algx1.l9.m2.2.2.1.1.2.3.3" xref="algx1.l9.m2.2.2.1.1.2.3.3.cmml">j</mi></mrow><mn id="algx1.l9.m2.2.2.1.1.3" xref="algx1.l9.m2.2.2.1.1.3.cmml">1</mn></msubsup><mo id="algx1.l9.m2.3.3.2.3" xref="algx1.l9.m2.3.3.3.cmml">,</mo><mi id="algx1.l9.m2.1.1" mathvariant="normal" xref="algx1.l9.m2.1.1.cmml">⋯</mi><mo id="algx1.l9.m2.3.3.2.4" xref="algx1.l9.m2.3.3.3.cmml">,</mo><msubsup id="algx1.l9.m2.3.3.2.2" xref="algx1.l9.m2.3.3.2.2.cmml"><mi id="algx1.l9.m2.3.3.2.2.2.2" xref="algx1.l9.m2.3.3.2.2.2.2.cmml">d</mi><mrow id="algx1.l9.m2.3.3.2.2.2.3" xref="algx1.l9.m2.3.3.2.2.2.3.cmml"><mi id="algx1.l9.m2.3.3.2.2.2.3.2" xref="algx1.l9.m2.3.3.2.2.2.3.2.cmml">i</mi><mo id="algx1.l9.m2.3.3.2.2.2.3.1" xref="algx1.l9.m2.3.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l9.m2.3.3.2.2.2.3.3" xref="algx1.l9.m2.3.3.2.2.2.3.3.cmml">j</mi></mrow><mi id="algx1.l9.m2.3.3.2.2.3" xref="algx1.l9.m2.3.3.2.2.3.cmml">N</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx1.l9.m2.3b"><list id="algx1.l9.m2.3.3.3.cmml" xref="algx1.l9.m2.3.3.2"><apply id="algx1.l9.m2.2.2.1.1.cmml" xref="algx1.l9.m2.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l9.m2.2.2.1.1.1.cmml" xref="algx1.l9.m2.2.2.1.1">superscript</csymbol><apply id="algx1.l9.m2.2.2.1.1.2.cmml" xref="algx1.l9.m2.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l9.m2.2.2.1.1.2.1.cmml" xref="algx1.l9.m2.2.2.1.1">subscript</csymbol><ci id="algx1.l9.m2.2.2.1.1.2.2.cmml" xref="algx1.l9.m2.2.2.1.1.2.2">𝑑</ci><apply id="algx1.l9.m2.2.2.1.1.2.3.cmml" xref="algx1.l9.m2.2.2.1.1.2.3"><times id="algx1.l9.m2.2.2.1.1.2.3.1.cmml" xref="algx1.l9.m2.2.2.1.1.2.3.1"></times><ci id="algx1.l9.m2.2.2.1.1.2.3.2.cmml" xref="algx1.l9.m2.2.2.1.1.2.3.2">𝑖</ci><ci id="algx1.l9.m2.2.2.1.1.2.3.3.cmml" xref="algx1.l9.m2.2.2.1.1.2.3.3">𝑗</ci></apply></apply><cn id="algx1.l9.m2.2.2.1.1.3.cmml" type="integer" xref="algx1.l9.m2.2.2.1.1.3">1</cn></apply><ci id="algx1.l9.m2.1.1.cmml" xref="algx1.l9.m2.1.1">⋯</ci><apply id="algx1.l9.m2.3.3.2.2.cmml" xref="algx1.l9.m2.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l9.m2.3.3.2.2.1.cmml" xref="algx1.l9.m2.3.3.2.2">superscript</csymbol><apply id="algx1.l9.m2.3.3.2.2.2.cmml" xref="algx1.l9.m2.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l9.m2.3.3.2.2.2.1.cmml" xref="algx1.l9.m2.3.3.2.2">subscript</csymbol><ci id="algx1.l9.m2.3.3.2.2.2.2.cmml" xref="algx1.l9.m2.3.3.2.2.2.2">𝑑</ci><apply id="algx1.l9.m2.3.3.2.2.2.3.cmml" xref="algx1.l9.m2.3.3.2.2.2.3"><times id="algx1.l9.m2.3.3.2.2.2.3.1.cmml" xref="algx1.l9.m2.3.3.2.2.2.3.1"></times><ci id="algx1.l9.m2.3.3.2.2.2.3.2.cmml" xref="algx1.l9.m2.3.3.2.2.2.3.2">𝑖</ci><ci id="algx1.l9.m2.3.3.2.2.2.3.3.cmml" xref="algx1.l9.m2.3.3.2.2.2.3.3">𝑗</ci></apply></apply><ci id="algx1.l9.m2.3.3.2.2.3.cmml" xref="algx1.l9.m2.3.3.2.2.3">𝑁</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m2.3c">d_{ij}^{1},\cdots,d_{ij}^{N}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m2.3d">italic_d start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT , ⋯ , italic_d start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> using <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="algx1.l9.m3.1"><semantics id="algx1.l9.m3.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l9.m3.1.1" xref="algx1.l9.m3.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="algx1.l9.m3.1b"><ci id="algx1.l9.m3.1.1.cmml" xref="algx1.l9.m3.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m3.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m3.1d">caligraphic_R</annotation></semantics></math> and <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l9.m4.1"><semantics id="algx1.l9.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l9.m4.1.1" xref="algx1.l9.m4.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l9.m4.1b"><ci id="algx1.l9.m4.1.1.cmml" xref="algx1.l9.m4.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m4.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m4.1d">caligraphic_D</annotation></semantics></math> given <math alttext="q_{ij}" class="ltx_Math" display="inline" id="algx1.l9.m5.1"><semantics id="algx1.l9.m5.1a"><msub id="algx1.l9.m5.1.1" xref="algx1.l9.m5.1.1.cmml"><mi id="algx1.l9.m5.1.1.2" xref="algx1.l9.m5.1.1.2.cmml">q</mi><mrow id="algx1.l9.m5.1.1.3" xref="algx1.l9.m5.1.1.3.cmml"><mi id="algx1.l9.m5.1.1.3.2" xref="algx1.l9.m5.1.1.3.2.cmml">i</mi><mo id="algx1.l9.m5.1.1.3.1" xref="algx1.l9.m5.1.1.3.1.cmml">⁢</mo><mi id="algx1.l9.m5.1.1.3.3" xref="algx1.l9.m5.1.1.3.3.cmml">j</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l9.m5.1b"><apply id="algx1.l9.m5.1.1.cmml" xref="algx1.l9.m5.1.1"><csymbol cd="ambiguous" id="algx1.l9.m5.1.1.1.cmml" xref="algx1.l9.m5.1.1">subscript</csymbol><ci id="algx1.l9.m5.1.1.2.cmml" xref="algx1.l9.m5.1.1.2">𝑞</ci><apply id="algx1.l9.m5.1.1.3.cmml" xref="algx1.l9.m5.1.1.3"><times id="algx1.l9.m5.1.1.3.1.cmml" xref="algx1.l9.m5.1.1.3.1"></times><ci id="algx1.l9.m5.1.1.3.2.cmml" xref="algx1.l9.m5.1.1.3.2">𝑖</ci><ci id="algx1.l9.m5.1.1.3.3.cmml" xref="algx1.l9.m5.1.1.3.3">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m5.1c">q_{ij}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m5.1d">italic_q start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l10.1.1.1" style="font-size:80%;">10:</span></span>         generate the answer <math alttext="a_{ij}" class="ltx_Math" display="inline" id="algx1.l10.m1.1"><semantics id="algx1.l10.m1.1a"><msub id="algx1.l10.m1.1.1" xref="algx1.l10.m1.1.1.cmml"><mi id="algx1.l10.m1.1.1.2" xref="algx1.l10.m1.1.1.2.cmml">a</mi><mrow id="algx1.l10.m1.1.1.3" xref="algx1.l10.m1.1.1.3.cmml"><mi id="algx1.l10.m1.1.1.3.2" xref="algx1.l10.m1.1.1.3.2.cmml">i</mi><mo id="algx1.l10.m1.1.1.3.1" xref="algx1.l10.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l10.m1.1.1.3.3" xref="algx1.l10.m1.1.1.3.3.cmml">j</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l10.m1.1b"><apply id="algx1.l10.m1.1.1.cmml" xref="algx1.l10.m1.1.1"><csymbol cd="ambiguous" id="algx1.l10.m1.1.1.1.cmml" xref="algx1.l10.m1.1.1">subscript</csymbol><ci id="algx1.l10.m1.1.1.2.cmml" xref="algx1.l10.m1.1.1.2">𝑎</ci><apply id="algx1.l10.m1.1.1.3.cmml" xref="algx1.l10.m1.1.1.3"><times id="algx1.l10.m1.1.1.3.1.cmml" xref="algx1.l10.m1.1.1.3.1"></times><ci id="algx1.l10.m1.1.1.3.2.cmml" xref="algx1.l10.m1.1.1.3.2">𝑖</ci><ci id="algx1.l10.m1.1.1.3.3.cmml" xref="algx1.l10.m1.1.1.3.3">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m1.1c">a_{ij}</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m1.1d">italic_a start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT</annotation></semantics></math> using <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="algx1.l10.m2.1"><semantics id="algx1.l10.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l10.m2.1.1" xref="algx1.l10.m2.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="algx1.l10.m2.1b"><ci id="algx1.l10.m2.1.1.cmml" xref="algx1.l10.m2.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m2.1d">caligraphic_M</annotation></semantics></math> given <math alttext="q_{ij}" class="ltx_Math" display="inline" id="algx1.l10.m3.1"><semantics id="algx1.l10.m3.1a"><msub id="algx1.l10.m3.1.1" xref="algx1.l10.m3.1.1.cmml"><mi id="algx1.l10.m3.1.1.2" xref="algx1.l10.m3.1.1.2.cmml">q</mi><mrow id="algx1.l10.m3.1.1.3" xref="algx1.l10.m3.1.1.3.cmml"><mi id="algx1.l10.m3.1.1.3.2" xref="algx1.l10.m3.1.1.3.2.cmml">i</mi><mo id="algx1.l10.m3.1.1.3.1" xref="algx1.l10.m3.1.1.3.1.cmml">⁢</mo><mi id="algx1.l10.m3.1.1.3.3" xref="algx1.l10.m3.1.1.3.3.cmml">j</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l10.m3.1b"><apply id="algx1.l10.m3.1.1.cmml" xref="algx1.l10.m3.1.1"><csymbol cd="ambiguous" id="algx1.l10.m3.1.1.1.cmml" xref="algx1.l10.m3.1.1">subscript</csymbol><ci id="algx1.l10.m3.1.1.2.cmml" xref="algx1.l10.m3.1.1.2">𝑞</ci><apply id="algx1.l10.m3.1.1.3.cmml" xref="algx1.l10.m3.1.1.3"><times id="algx1.l10.m3.1.1.3.1.cmml" xref="algx1.l10.m3.1.1.3.1"></times><ci id="algx1.l10.m3.1.1.3.2.cmml" xref="algx1.l10.m3.1.1.3.2">𝑖</ci><ci id="algx1.l10.m3.1.1.3.3.cmml" xref="algx1.l10.m3.1.1.3.3">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m3.1c">q_{ij}</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m3.1d">italic_q start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="d_{ij}^{1},\cdots,d_{ij}^{N}" class="ltx_Math" display="inline" id="algx1.l10.m4.3"><semantics id="algx1.l10.m4.3a"><mrow id="algx1.l10.m4.3.3.2" xref="algx1.l10.m4.3.3.3.cmml"><msubsup id="algx1.l10.m4.2.2.1.1" xref="algx1.l10.m4.2.2.1.1.cmml"><mi id="algx1.l10.m4.2.2.1.1.2.2" xref="algx1.l10.m4.2.2.1.1.2.2.cmml">d</mi><mrow id="algx1.l10.m4.2.2.1.1.2.3" xref="algx1.l10.m4.2.2.1.1.2.3.cmml"><mi id="algx1.l10.m4.2.2.1.1.2.3.2" xref="algx1.l10.m4.2.2.1.1.2.3.2.cmml">i</mi><mo id="algx1.l10.m4.2.2.1.1.2.3.1" xref="algx1.l10.m4.2.2.1.1.2.3.1.cmml">⁢</mo><mi id="algx1.l10.m4.2.2.1.1.2.3.3" xref="algx1.l10.m4.2.2.1.1.2.3.3.cmml">j</mi></mrow><mn id="algx1.l10.m4.2.2.1.1.3" xref="algx1.l10.m4.2.2.1.1.3.cmml">1</mn></msubsup><mo id="algx1.l10.m4.3.3.2.3" xref="algx1.l10.m4.3.3.3.cmml">,</mo><mi id="algx1.l10.m4.1.1" mathvariant="normal" xref="algx1.l10.m4.1.1.cmml">⋯</mi><mo id="algx1.l10.m4.3.3.2.4" xref="algx1.l10.m4.3.3.3.cmml">,</mo><msubsup id="algx1.l10.m4.3.3.2.2" xref="algx1.l10.m4.3.3.2.2.cmml"><mi id="algx1.l10.m4.3.3.2.2.2.2" xref="algx1.l10.m4.3.3.2.2.2.2.cmml">d</mi><mrow id="algx1.l10.m4.3.3.2.2.2.3" xref="algx1.l10.m4.3.3.2.2.2.3.cmml"><mi id="algx1.l10.m4.3.3.2.2.2.3.2" xref="algx1.l10.m4.3.3.2.2.2.3.2.cmml">i</mi><mo id="algx1.l10.m4.3.3.2.2.2.3.1" xref="algx1.l10.m4.3.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l10.m4.3.3.2.2.2.3.3" xref="algx1.l10.m4.3.3.2.2.2.3.3.cmml">j</mi></mrow><mi id="algx1.l10.m4.3.3.2.2.3" xref="algx1.l10.m4.3.3.2.2.3.cmml">N</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx1.l10.m4.3b"><list id="algx1.l10.m4.3.3.3.cmml" xref="algx1.l10.m4.3.3.2"><apply id="algx1.l10.m4.2.2.1.1.cmml" xref="algx1.l10.m4.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l10.m4.2.2.1.1.1.cmml" xref="algx1.l10.m4.2.2.1.1">superscript</csymbol><apply id="algx1.l10.m4.2.2.1.1.2.cmml" xref="algx1.l10.m4.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l10.m4.2.2.1.1.2.1.cmml" xref="algx1.l10.m4.2.2.1.1">subscript</csymbol><ci id="algx1.l10.m4.2.2.1.1.2.2.cmml" xref="algx1.l10.m4.2.2.1.1.2.2">𝑑</ci><apply id="algx1.l10.m4.2.2.1.1.2.3.cmml" xref="algx1.l10.m4.2.2.1.1.2.3"><times id="algx1.l10.m4.2.2.1.1.2.3.1.cmml" xref="algx1.l10.m4.2.2.1.1.2.3.1"></times><ci id="algx1.l10.m4.2.2.1.1.2.3.2.cmml" xref="algx1.l10.m4.2.2.1.1.2.3.2">𝑖</ci><ci id="algx1.l10.m4.2.2.1.1.2.3.3.cmml" xref="algx1.l10.m4.2.2.1.1.2.3.3">𝑗</ci></apply></apply><cn id="algx1.l10.m4.2.2.1.1.3.cmml" type="integer" xref="algx1.l10.m4.2.2.1.1.3">1</cn></apply><ci id="algx1.l10.m4.1.1.cmml" xref="algx1.l10.m4.1.1">⋯</ci><apply id="algx1.l10.m4.3.3.2.2.cmml" xref="algx1.l10.m4.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l10.m4.3.3.2.2.1.cmml" xref="algx1.l10.m4.3.3.2.2">superscript</csymbol><apply id="algx1.l10.m4.3.3.2.2.2.cmml" xref="algx1.l10.m4.3.3.2.2"><csymbol cd="ambiguous" id="algx1.l10.m4.3.3.2.2.2.1.cmml" xref="algx1.l10.m4.3.3.2.2">subscript</csymbol><ci id="algx1.l10.m4.3.3.2.2.2.2.cmml" xref="algx1.l10.m4.3.3.2.2.2.2">𝑑</ci><apply id="algx1.l10.m4.3.3.2.2.2.3.cmml" xref="algx1.l10.m4.3.3.2.2.2.3"><times id="algx1.l10.m4.3.3.2.2.2.3.1.cmml" xref="algx1.l10.m4.3.3.2.2.2.3.1"></times><ci id="algx1.l10.m4.3.3.2.2.2.3.2.cmml" xref="algx1.l10.m4.3.3.2.2.2.3.2">𝑖</ci><ci id="algx1.l10.m4.3.3.2.2.2.3.3.cmml" xref="algx1.l10.m4.3.3.2.2.2.3.3">𝑗</ci></apply></apply><ci id="algx1.l10.m4.3.3.2.2.3.cmml" xref="algx1.l10.m4.3.3.2.2.3">𝑁</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m4.3c">d_{ij}^{1},\cdots,d_{ij}^{N}</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m4.3d">italic_d start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT , ⋯ , italic_d start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l11.1.1.1" style="font-size:80%;">11:</span></span>         add the query-answer pair <math alttext="(q_{ij},a_{ij})" class="ltx_Math" display="inline" id="algx1.l11.m1.2"><semantics id="algx1.l11.m1.2a"><mrow id="algx1.l11.m1.2.2.2" xref="algx1.l11.m1.2.2.3.cmml"><mo id="algx1.l11.m1.2.2.2.3" stretchy="false" xref="algx1.l11.m1.2.2.3.cmml">(</mo><msub id="algx1.l11.m1.1.1.1.1" xref="algx1.l11.m1.1.1.1.1.cmml"><mi id="algx1.l11.m1.1.1.1.1.2" xref="algx1.l11.m1.1.1.1.1.2.cmml">q</mi><mrow id="algx1.l11.m1.1.1.1.1.3" xref="algx1.l11.m1.1.1.1.1.3.cmml"><mi id="algx1.l11.m1.1.1.1.1.3.2" xref="algx1.l11.m1.1.1.1.1.3.2.cmml">i</mi><mo id="algx1.l11.m1.1.1.1.1.3.1" xref="algx1.l11.m1.1.1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l11.m1.1.1.1.1.3.3" xref="algx1.l11.m1.1.1.1.1.3.3.cmml">j</mi></mrow></msub><mo id="algx1.l11.m1.2.2.2.4" xref="algx1.l11.m1.2.2.3.cmml">,</mo><msub id="algx1.l11.m1.2.2.2.2" xref="algx1.l11.m1.2.2.2.2.cmml"><mi id="algx1.l11.m1.2.2.2.2.2" xref="algx1.l11.m1.2.2.2.2.2.cmml">a</mi><mrow id="algx1.l11.m1.2.2.2.2.3" xref="algx1.l11.m1.2.2.2.2.3.cmml"><mi id="algx1.l11.m1.2.2.2.2.3.2" xref="algx1.l11.m1.2.2.2.2.3.2.cmml">i</mi><mo id="algx1.l11.m1.2.2.2.2.3.1" xref="algx1.l11.m1.2.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l11.m1.2.2.2.2.3.3" xref="algx1.l11.m1.2.2.2.2.3.3.cmml">j</mi></mrow></msub><mo id="algx1.l11.m1.2.2.2.5" stretchy="false" xref="algx1.l11.m1.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="algx1.l11.m1.2b"><interval closure="open" id="algx1.l11.m1.2.2.3.cmml" xref="algx1.l11.m1.2.2.2"><apply id="algx1.l11.m1.1.1.1.1.cmml" xref="algx1.l11.m1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l11.m1.1.1.1.1.1.cmml" xref="algx1.l11.m1.1.1.1.1">subscript</csymbol><ci id="algx1.l11.m1.1.1.1.1.2.cmml" xref="algx1.l11.m1.1.1.1.1.2">𝑞</ci><apply id="algx1.l11.m1.1.1.1.1.3.cmml" xref="algx1.l11.m1.1.1.1.1.3"><times id="algx1.l11.m1.1.1.1.1.3.1.cmml" xref="algx1.l11.m1.1.1.1.1.3.1"></times><ci id="algx1.l11.m1.1.1.1.1.3.2.cmml" xref="algx1.l11.m1.1.1.1.1.3.2">𝑖</ci><ci id="algx1.l11.m1.1.1.1.1.3.3.cmml" xref="algx1.l11.m1.1.1.1.1.3.3">𝑗</ci></apply></apply><apply id="algx1.l11.m1.2.2.2.2.cmml" xref="algx1.l11.m1.2.2.2.2"><csymbol cd="ambiguous" id="algx1.l11.m1.2.2.2.2.1.cmml" xref="algx1.l11.m1.2.2.2.2">subscript</csymbol><ci id="algx1.l11.m1.2.2.2.2.2.cmml" xref="algx1.l11.m1.2.2.2.2.2">𝑎</ci><apply id="algx1.l11.m1.2.2.2.2.3.cmml" xref="algx1.l11.m1.2.2.2.2.3"><times id="algx1.l11.m1.2.2.2.2.3.1.cmml" xref="algx1.l11.m1.2.2.2.2.3.1"></times><ci id="algx1.l11.m1.2.2.2.2.3.2.cmml" xref="algx1.l11.m1.2.2.2.2.3.2">𝑖</ci><ci id="algx1.l11.m1.2.2.2.2.3.3.cmml" xref="algx1.l11.m1.2.2.2.2.3.3">𝑗</ci></apply></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="algx1.l11.m1.2c">(q_{ij},a_{ij})</annotation><annotation encoding="application/x-llamapun" id="algx1.l11.m1.2d">( italic_q start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT )</annotation></semantics></math> to the list <math alttext="\mathcal{H}" class="ltx_Math" display="inline" id="algx1.l11.m2.1"><semantics id="algx1.l11.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l11.m2.1.1" xref="algx1.l11.m2.1.1.cmml">ℋ</mi><annotation-xml encoding="MathML-Content" id="algx1.l11.m2.1b"><ci id="algx1.l11.m2.1.1.cmml" xref="algx1.l11.m2.1.1">ℋ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l11.m2.1c">\mathcal{H}</annotation><annotation encoding="application/x-llamapun" id="algx1.l11.m2.1d">caligraphic_H</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l12.1.1.1" style="font-size:80%;">12:</span></span>     <span class="ltx_text ltx_font_bold" id="algx1.l12.2">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l12.3">for</span>
</div>
<div class="ltx_listingline" id="algx1.l13">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l13.1.1.1" style="font-size:80%;">13:</span></span><span class="ltx_text ltx_font_bold" id="algx1.l13.2">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l13.3">for</span>
</div>
<div class="ltx_listingline" id="algx1.l14">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l14.1.1.1" style="font-size:80%;">14:</span></span>generate the predicted answer <math alttext="\tilde{\mathcal{A}}" class="ltx_Math" display="inline" id="algx1.l14.m1.1"><semantics id="algx1.l14.m1.1a"><mover accent="true" id="algx1.l14.m1.1.1" xref="algx1.l14.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l14.m1.1.1.2" xref="algx1.l14.m1.1.1.2.cmml">𝒜</mi><mo id="algx1.l14.m1.1.1.1" xref="algx1.l14.m1.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="algx1.l14.m1.1b"><apply id="algx1.l14.m1.1.1.cmml" xref="algx1.l14.m1.1.1"><ci id="algx1.l14.m1.1.1.1.cmml" xref="algx1.l14.m1.1.1.1">~</ci><ci id="algx1.l14.m1.1.1.2.cmml" xref="algx1.l14.m1.1.1.2">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l14.m1.1c">\tilde{\mathcal{A}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l14.m1.1d">over~ start_ARG caligraphic_A end_ARG</annotation></semantics></math> using <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="algx1.l14.m2.1"><semantics id="algx1.l14.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l14.m2.1.1" xref="algx1.l14.m2.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="algx1.l14.m2.1b"><ci id="algx1.l14.m2.1.1.cmml" xref="algx1.l14.m2.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l14.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="algx1.l14.m2.1d">caligraphic_M</annotation></semantics></math> given <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="algx1.l14.m3.1"><semantics id="algx1.l14.m3.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l14.m3.1.1" xref="algx1.l14.m3.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="algx1.l14.m3.1b"><ci id="algx1.l14.m3.1.1.cmml" xref="algx1.l14.m3.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l14.m3.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="algx1.l14.m3.1d">caligraphic_Q</annotation></semantics></math> and <math alttext="\mathcal{H}" class="ltx_Math" display="inline" id="algx1.l14.m4.1"><semantics id="algx1.l14.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l14.m4.1.1" xref="algx1.l14.m4.1.1.cmml">ℋ</mi><annotation-xml encoding="MathML-Content" id="algx1.l14.m4.1b"><ci id="algx1.l14.m4.1.1.cmml" xref="algx1.l14.m4.1.1">ℋ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l14.m4.1c">\mathcal{H}</annotation><annotation encoding="application/x-llamapun" id="algx1.l14.m4.1d">caligraphic_H</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l15">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="algx1.l15.1.1.1" style="font-size:80%;">15:</span></span><span class="ltx_text ltx_font_bold" id="algx1.l15.2">return</span> <math alttext="\tilde{\mathcal{A}}" class="ltx_Math" display="inline" id="algx1.l15.m1.1"><semantics id="algx1.l15.m1.1a"><mover accent="true" id="algx1.l15.m1.1.1" xref="algx1.l15.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l15.m1.1.1.2" xref="algx1.l15.m1.1.1.2.cmml">𝒜</mi><mo id="algx1.l15.m1.1.1.1" xref="algx1.l15.m1.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="algx1.l15.m1.1b"><apply id="algx1.l15.m1.1.1.cmml" xref="algx1.l15.m1.1.1"><ci id="algx1.l15.m1.1.1.1.cmml" xref="algx1.l15.m1.1.1.1">~</ci><ci id="algx1.l15.m1.1.1.2.cmml" xref="algx1.l15.m1.1.1.2">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l15.m1.1c">\tilde{\mathcal{A}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l15.m1.1d">over~ start_ARG caligraphic_A end_ARG</annotation></semantics></math>
</div>
</div>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Evaluation settings</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">To evaluate the performance of our proposed <span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.1">i</span>-MedRAG on knowledge-intensive medical question-answering tasks and compare it with other approaches, we select MedQA <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib26" title="">26</a>]</cite> as the testbed, which contains medical questions collected from United States Medical Licensing Examination (USMLE). With complex clinical cases in the dataset, MedQA reflects the difficulty of decision-making in real-world clinical medicine. The approaches for comparison are prompt engineering or fine-tuning methods that try to improve the performance of GPT-3.5 on MedQA, including chain-of-thought (CoT) prompting<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib43" title="">43</a>]</cite>, self consistency (SC), knowledge solver (KSL)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib40" title="">40</a>]</cite>, medical agents (MedAgents)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite>, LLMs augmented with medical textbooks (LLM-AMT)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib41" title="">41</a>]</cite>, medical retrieval-augmented generation (MedRAG)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>, and LLMs with test-time adaptations (MedAdapter)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib45" title="">45</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">Additionally, we evaluate the generalizability of our <span class="ltx_text ltx_font_italic" id="S4.SS1.p2.1.1">i</span>-MedRAG with more LLMs and medical datasets. Llama-3.1-8B is selected as the representative of open-source models, which has a context window of 128k tokens. We also include MMLU-Med, a set of six medical tasks (anatomy, clinical knowledge, professional medicine, human genetics, college medicine, college biology) from Massive Multitask Language Understanding (MMLU), following previous studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib8" title="">8</a>, <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>.
MMLU-Med serves as a testbed to show the performance of <span class="ltx_text ltx_font_italic" id="S4.SS1.p2.1.2">i</span>-MedRAG on a variety of different medical tasks.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">Both MedQA and MMLU-Med are composed of multi-choice questions, whose evaluation metric is the accuracy of predicted answers chosen from given options.
For the retrieval part in <span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.1">i</span>-MedRAG, we select the Textbooks<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib26" title="">26</a>]</cite> and Statpearls<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.statpearls.com/</span></span></span></span> corpora introduced in MedRAG<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite>, which are shown effective on medical examination questions. MedCPT<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib46" title="">46</a>]</cite> is chosen as the text retriever, which has been trained on domain-specific literature. For other baselines compared, the official settings described in their papers are used.</p>
</div>
<figure class="ltx_table" id="S4.SS1.tab1">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_1"><span class="ltx_ERROR ltx_figure_panel undefined" id="S4.SS1.tab1.1">\tbl</span></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS1.tab1.2">Performance of GPT-3.5 with different prompt engineering / fine-tuning methods on MedQA. The “External Knowledge” column denotes if the method augments LLM generation with information retrieval of external knowledge.

<span class="ltx_tabular ltx_centering ltx_align_middle" id="S4.SS1.tab1.2.1">
<span class="ltx_tr" id="S4.SS1.tab1.2.1.1">
<span class="ltx_td ltx_align_left ltx_border_tt" id="S4.SS1.tab1.2.1.1.1">Method</span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="S4.SS1.tab1.2.1.1.2">External Knowledge</span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="S4.SS1.tab1.2.1.1.3">Setting</span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="S4.SS1.tab1.2.1.1.4">Accuracy (%)</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.2">
<span class="ltx_td ltx_align_left ltx_border_t" id="S4.SS1.tab1.2.1.2.1">Chain of Thought <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib43" title="">43</a>]</cite></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.2.2">No</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.2.3">zero-shot</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.2.4">50.82</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.3">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.3.1">Knowledge Solver <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib40" title="">40</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.3.2">Yes</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.3.3">zero-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.3.4">58.40</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.4">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.4.1">Chain of Thought + Self Consistency <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.4.2">No</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.4.3">zero-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.4.4">61.30</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.5">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.5.1">MedAgents<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.5.2">No</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.5.3">zero-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.5.4">64.10</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.6">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.6.1">LLMs Augmented with Medical Textbook<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib41" title="">41</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.6.2">Yes</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.6.3">zero-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.6.4">65.00</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.7">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.7.1">MedRAG<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib23" title="">23</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.7.2">Yes</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.7.3">zero-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.7.4">66.61</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.8">
<span class="ltx_td ltx_align_left ltx_border_t" id="S4.SS1.tab1.2.1.8.1">Chain of Thought <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib43" title="">43</a>]</cite></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.8.2">No</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.8.3">five-shot</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS1.tab1.2.1.8.4">53.57</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.9">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.9.1">Chain of Thought + Self Consistency <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.9.2">No</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.9.3">five-shot</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.9.4">62.10</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.10">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.10.1">LLMs Augmented with Medical Textbook <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib41" title="">41</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.10.2">Yes</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.10.3">fine-tuned</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.10.4">67.90</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.11">
<span class="ltx_td ltx_align_left" id="S4.SS1.tab1.2.1.11.1">MedAdapter<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib45" title="">45</a>]</cite></span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.11.2">No</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.11.3">fine-tuned</span>
<span class="ltx_td ltx_align_center" id="S4.SS1.tab1.2.1.11.4">68.66</span></span>
<span class="ltx_tr" id="S4.SS1.tab1.2.1.12">
<span class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS1.tab1.2.1.12.1"><span class="ltx_text ltx_font_italic" id="S4.SS1.tab1.2.1.12.1.1">i</span><span class="ltx_text ltx_font_bold" id="S4.SS1.tab1.2.1.12.1.2">-MedRAG (ours)</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.SS1.tab1.2.1.12.2"><span class="ltx_text ltx_font_bold" id="S4.SS1.tab1.2.1.12.2.1">Yes</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.SS1.tab1.2.1.12.3"><span class="ltx_text ltx_font_bold" id="S4.SS1.tab1.2.1.12.3.1">zero-shot</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.SS1.tab1.2.1.12.4"><span class="ltx_text ltx_font_bold" id="S4.SS1.tab1.2.1.12.4.1">69.68</span></span></span>
</span></p>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Main results</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS1" title="4.1 Evaluation settings ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.1</span></a> shows the comparison results of <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.1">i</span>-MedRAG and other baseline approaches on MedQA using GPT-3.5.
Official scores reported in previous research are used for a fair comparison.
While methods with few-shot learning or model fine-tuning tend to perform better than the ones in a zero-shot setting, our <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.2">i</span>-MedRAG set a state-of-the-art performance of GPT-3.5 on MedQA without any training samples or parameter tuning. Among zero-shot approaches, <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.3">i</span>-MedRAG (69.68%) has a significant performance improvement (<math alttext="p&lt;0.05" class="ltx_Math" display="inline" id="S4.SS2.p1.1.m1.1"><semantics id="S4.SS2.p1.1.m1.1a"><mrow id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml"><mi id="S4.SS2.p1.1.m1.1.1.2" xref="S4.SS2.p1.1.m1.1.1.2.cmml">p</mi><mo id="S4.SS2.p1.1.m1.1.1.1" xref="S4.SS2.p1.1.m1.1.1.1.cmml">&lt;</mo><mn id="S4.SS2.p1.1.m1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.3.cmml">0.05</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><apply id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1"><lt id="S4.SS2.p1.1.m1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1.1"></lt><ci id="S4.SS2.p1.1.m1.1.1.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2">𝑝</ci><cn id="S4.SS2.p1.1.m1.1.1.3.cmml" type="float" xref="S4.SS2.p1.1.m1.1.1.3">0.05</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">p&lt;0.05</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.m1.1d">italic_p &lt; 0.05</annotation></semantics></math>) compared to the previous best record achieved by MedRAG (66.61%).</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1">The results of generalizing <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.1">i</span>-MedRAG to more LLMs and data are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS2" title="4.2 Main results ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.2</span></a>. We compare <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.2">i</span>-MedRAG with our implemented CoT and MedRAG to see if <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.3">i</span>-MedRAG can bring a consistent improvement of LLM performance in medical question answering.
For all experiments with <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.4">i</span>-MedRAG, we tune the hyperparameters on a validation set of 100 samples and then report its scores on the test set.
Similar to the results on GPT-3.5, the open-source Llama-3.1-8B also shows improved performance on MedQA with the help of <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.5">i</span>-MedRAG. While Llama-3.1-8B shows a close performance to GPT-3.5 in CoT and MedRAG settings, its performance is significantly improved with <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.6">i</span>-MedRAG, achieving an accuracy of 75.02%. The improved performance of GPT-3.5 and Llama-3.1-8B on MMLU-Med also demonstrates the generalizability of <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.7">i</span>-MedRAG to more medical data. As medical questions in MMLU-Med are less complex than the USMLE questions in MedQA, follow-up queries may not be necessary to find relevant information for the given question. Thus, it can be observed that the improvement by <span class="ltx_text ltx_font_italic" id="S4.SS2.p2.1.8">i</span>-MedRAG compared to MedRAG is less significant in MMLU-Med than in MedQA.</p>
</div>
<figure class="ltx_table" id="S4.SS2.4">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_1"><span class="ltx_ERROR ltx_figure_panel undefined" id="S4.SS2.4.5">\tbl</span></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.4.4"><span class="ltx_text" id="S4.SS2.4.4.4" style="font-size:90%;">Performance of <span class="ltx_text ltx_font_italic" id="S4.SS2.4.4.4.4">i</span>-MedRAG on different LLMs and datasets. “Acc.” denotes the accuracy. “<math alttext="\Delta" class="ltx_Math" display="inline" id="S4.SS2.1.1.1.m1.1"><semantics id="S4.SS2.1.1.1.m1.1a"><mi id="S4.SS2.1.1.1.m1.1.1" mathvariant="normal" xref="S4.SS2.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.1.1.1.m1.1b"><ci id="S4.SS2.1.1.1.m1.1.1.cmml" xref="S4.SS2.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.1.1.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.1.1.1.m1.1d">roman_Δ</annotation></semantics></math>” shows the relative performance improvement compared with CoT.

<span class="ltx_tabular ltx_centering ltx_align_middle" id="S4.SS2.4.4.4.3">
<span class="ltx_tr" id="S4.SS2.4.4.4.3.4">
<span class="ltx_td ltx_align_left ltx_border_tt ltx_rowspan ltx_rowspan_2" id="S4.SS2.4.4.4.3.4.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.4.1.1">Model</span></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_rowspan ltx_rowspan_2" id="S4.SS2.4.4.4.3.4.2"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.4.2.1">Method</span></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.SS2.4.4.4.3.4.3"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.4.3.1">MedQA-USMLE</span></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.SS2.4.4.4.3.4.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.4.4.1">MMLU-Med</span></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.SS2.4.4.4.3.4.5"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.4.5.1">Average</span></span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.3">
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.3.4">Acc.</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.2.2.2.1.1.1"><math alttext="\Delta" class="ltx_Math" display="inline" id="S4.SS2.2.2.2.1.1.1.m1.1"><semantics id="S4.SS2.2.2.2.1.1.1.m1.1a"><mi id="S4.SS2.2.2.2.1.1.1.m1.1.1" mathvariant="normal" xref="S4.SS2.2.2.2.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.2.2.2.1.1.1.m1.1b"><ci id="S4.SS2.2.2.2.1.1.1.m1.1.1.cmml" xref="S4.SS2.2.2.2.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.2.2.2.1.1.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.2.2.2.1.1.1.m1.1d">roman_Δ</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.3.5">Acc.</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.3.3.3.2.2.2"><math alttext="\Delta" class="ltx_Math" display="inline" id="S4.SS2.3.3.3.2.2.2.m1.1"><semantics id="S4.SS2.3.3.3.2.2.2.m1.1a"><mi id="S4.SS2.3.3.3.2.2.2.m1.1.1" mathvariant="normal" xref="S4.SS2.3.3.3.2.2.2.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.3.3.3.2.2.2.m1.1b"><ci id="S4.SS2.3.3.3.2.2.2.m1.1.1.cmml" xref="S4.SS2.3.3.3.2.2.2.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.3.3.3.2.2.2.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.3.3.3.2.2.2.m1.1d">roman_Δ</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.3.6">Acc.</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.3.3"><math alttext="\Delta" class="ltx_Math" display="inline" id="S4.SS2.4.4.4.3.3.3.m1.1"><semantics id="S4.SS2.4.4.4.3.3.3.m1.1a"><mi id="S4.SS2.4.4.4.3.3.3.m1.1.1" mathvariant="normal" xref="S4.SS2.4.4.4.3.3.3.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.4.4.4.3.3.3.m1.1b"><ci id="S4.SS2.4.4.4.3.3.3.m1.1.1.cmml" xref="S4.SS2.4.4.4.3.3.3.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.4.4.4.3.3.3.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.4.4.4.3.3.3.m1.1d">roman_Δ</annotation></semantics></math></span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.5">
<span class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.4.4.4.3.5.1">GPT-3.5-Turbo</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.2">CoT</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.3">65.04</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.4">+0.00%</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.5">72.91</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.6">+0.00%</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.7">68.98</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.5.8">+0.00%</span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.6">
<span class="ltx_td ltx_align_left" id="S4.SS2.4.4.4.3.6.1">GPT-3.5-Turbo</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.2">MedRAG</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.3">66.61</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.4">+2.41%</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.5">75.48</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.6">+3.52%</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.7">71.05</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.6.8">+3.00%</span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.7">
<span class="ltx_td ltx_align_left" id="S4.SS2.4.4.4.3.7.1">GPT-3.5-Turbo</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.2"><span class="ltx_text ltx_font_italic" id="S4.SS2.4.4.4.3.7.2.1">i</span>-MedRAG</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.3"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.3.1">69.68</span></span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.4.1">+7.13%</span></span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.5"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.5.1">75.85</span></span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.6"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.6.1">+4.03%</span></span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.7"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.7.1">72.77</span></span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.7.8"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.7.8.1">+5.49%</span></span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.8">
<span class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.4.4.4.3.8.1">Llama-3.1-8B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.2">CoT</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.3">64.73</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.4">+0.00%</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.5">77.23</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.6">+0.00%</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.7">70.98</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.4.4.4.3.8.8">+0.00%</span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.9">
<span class="ltx_td ltx_align_left" id="S4.SS2.4.4.4.3.9.1">Llama-3.1-8B</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.2">MedRAG</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.3">66.54</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.4">+2.80%</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.5">78.05</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.6">+1.06%</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.7">72.30</span>
<span class="ltx_td ltx_align_center" id="S4.SS2.4.4.4.3.9.8">+1.86%</span></span>
<span class="ltx_tr" id="S4.SS2.4.4.4.3.10">
<span class="ltx_td ltx_align_left ltx_border_bb" id="S4.SS2.4.4.4.3.10.1">Llama-3.1-8B</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.2"><span class="ltx_text ltx_font_italic" id="S4.SS2.4.4.4.3.10.2.1">i</span>-MedRAG</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.3"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.3.1">73.61</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.4.1">+13.72%</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.5"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.5.1">78.42</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.6"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.6.1">+1.54%</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.7"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.7.1">76.02</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.SS2.4.4.4.3.10.8"><span class="ltx_text ltx_font_bold" id="S4.SS2.4.4.4.3.10.8.1">+7.10%</span></span></span>
</span></span></p>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Scaling with iterations and queries</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">As we described in Section <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S3.SS3" title="3.3 Iterative Generation of Follow-up Questions ‣ 3 Methods ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3.3</span></a>, the number of iterations to ask follow-up queries and the number of queries generated in each iteration are the two critical hyperparameters in our proposed iterative generation of follow-up queries. To explore how different selections of the hyperparameter values affect the model performance, we run <span class="ltx_text ltx_font_italic" id="S4.SS3.p1.1.1">i</span>-MedRAG with different settings and compare their results. We test both GPT-3.5 and Llama-3.1-8B on MedQA and MMLU-Med to examine if there are model-specific or task-specific patterns.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">Figure <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.F3" title="Figure 3 ‣ 4.3 Scaling with iterations and queries ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3</span></a> shows the model performance with different hyperparameter settings. Generally, MedQA and MMLU-Med show distinct patterns in performance change with the increasing number of iterations. While the performance of both GPT-3.5 and Llama-3.1-8B on MedQA tends to improve with more iterations of follow-up queries, their performance on MMLU-Med converges or starts to drop with just one or two iterations, corresponding to the different complexities of these two tasks.</p>
</div>
<div class="ltx_para" id="S4.SS3.p3">
<p class="ltx_p" id="S4.SS3.p3.1">From the results on MedQA, it is also empirically shown that the number of generated queries per iteration determines the rate of performance improvement and convergence over multiple iterations. LLMs with more queries generated per iteration tend to have a larger improvement in accuracy but also converge more quickly. Such a result is intuitively reasonable as more information can be collected each iteration with more generated queries.</p>
</div>
<figure class="ltx_figure" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="491" id="S4.F3.g1" src="extracted/5918158/fig/scaling.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span><span class="ltx_text ltx_font_italic" id="S4.F3.2.1">i</span>-MedRAG performance on MedQA and MMLU-Med with different hyperparameters.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Case studies</h3>
<figure class="ltx_table" id="S4.SS4.tab1">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_1"><span class="ltx_ERROR ltx_figure_panel undefined" id="S4.SS4.tab1.1">\tbl</span></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS4.tab1.2"><span class="ltx_text" id="S4.SS4.tab1.2.1" style="font-size:90%;">An example of how <span class="ltx_text ltx_font_italic" id="S4.SS4.tab1.2.1.1">i</span>-MedRAG helps GPT-3.5 to find the correct answer. The <span class="ltx_text" id="S4.SS4.tab1.2.1.2" style="background-color:#FFCCCC;">incorrect rationale</span> and <span class="ltx_text" id="S4.SS4.tab1.2.1.3" style="background-color:#FFFF00;">useful evidence</span> are highlighted.

<span class="ltx_tabular ltx_centering ltx_align_middle" id="S4.SS4.tab1.2.1.4">
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.1">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S4.SS4.tab1.2.1.4.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.1.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.1.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.tab1.2.1.4.1.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.1.1.1.1.2"> <span class="ltx_text" id="S4.SS4.tab1.2.1.4.1.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.tab1.2.1.4.1.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.1.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.tab1.2.1.4.1.1.1.1.2.1.1.1.1">MedQA Question</span></span>
</span></span><span class="ltx_text" id="S4.SS4.tab1.2.1.4.1.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.2">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.2.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.2.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.2.1.1.1.1">0001</span>: A 67-year-old man with transitional cell carcinoma of the bladder comes to the physician because of a 2-day history of ringing sensation in his ear. He received this first course of neoadjuvant chemotherapy 1 week ago. Pure tone audiometry shows a sensorineural hearing loss of 45 dB. The expected beneficial effect of the drug that caused this patient’s symptoms is most likely due to which of the following actions? <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.2.1.1.1.2">A.</span> Inhibition of proteasome, <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.2.1.1.1.3">B.</span> Hyperstabilization of microtubules, <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.2.1.1.1.4">C.</span> Generation of free radicals, <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.2.1.1.1.5">D.</span> Cross-linking of DNA</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.3" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.3.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.3.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.tab1.2.1.4.3.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.3.1.1.1.2"> <span class="ltx_text" id="S4.SS4.tab1.2.1.4.3.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.tab1.2.1.4.3.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.3.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.tab1.2.1.4.3.1.1.1.2.1.1.1.1">CoT</span></span>
</span></span><span class="ltx_text" id="S4.SS4.tab1.2.1.4.3.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.4">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.4.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.4.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.4.1.1.1.1">Analysis</span>: The patient is experiencing a ringing sensation in his ear, which is a symptom of tinnitus.
[…]
<span class="ltx_text" id="S4.SS4.tab1.2.1.4.4.1.1.1.2" style="background-color:#FFCCCC;">Among the given options, the most likely mechanism of action that could cause sensorineural hearing loss is the generation of free radicals.</span> Free radicals can cause oxidative damage to the hair cells and auditory nerve, leading to hearing loss. Therefore, the answer choice is C. Generation of free radicals. <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.4.1.1.1.3">Answer</span>: C <span class="ltx_text" id="S4.SS4.tab1.2.1.4.4.1.1.1.4" style="color:#FF0000;">✗</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.5" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.5.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.5.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.tab1.2.1.4.5.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.5.1.1.1.2"> <span class="ltx_text" id="S4.SS4.tab1.2.1.4.5.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.tab1.2.1.4.5.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.5.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.tab1.2.1.4.5.1.1.1.2.1.1.1.1">MedRAG</span></span>
</span></span><span class="ltx_text" id="S4.SS4.tab1.2.1.4.5.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.6">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.6.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.6.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.6.1.1.1.1">Retrieved documents</span>: […]
<span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.6.1.1.1.2">Analysis</span>:
[…]
To determine the mechanism of action of the drug causing the symptoms, we need to identify the drug used for neoadjuvant chemotherapy. However, <span class="ltx_text" id="S4.SS4.tab1.2.1.4.6.1.1.1.3" style="background-color:#FFCCCC;">the drug is not mentioned in the question stem or the provided documents. Without this information, it is not possible to definitively determine the mechanism of action.</span> Therefore, the answer cannot be determined based on the given information. <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.6.1.1.1.4">Answer</span>: Cannot be determined. <span class="ltx_text" id="S4.SS4.tab1.2.1.4.6.1.1.1.5" style="color:#FF0000;">✗</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.7" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.7.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.7.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.7.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.tab1.2.1.4.7.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.7.1.1.1.2"> <span class="ltx_text" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.1.1.1.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.1.1.1.1.1">i</span>-MedRAG</span></span>
</span></span><span class="ltx_text" id="S4.SS4.tab1.2.1.4.7.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.8">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.tab1.2.1.4.8.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.8.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.8.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.8.1.1.1.1">Query (Iteration 1)</span>: What is the mechanism of action of the neoadjuvant chemotherapy drug used in transitional cell carcinoma of the bladder? <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.8.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.9">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.9.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.9.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.9.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.9.1.1.1.1">Answer</span>: Based on the provided documents, the mechanism of action of the neoadjuvant chemotherapy drug used in transitional cell carcinoma of the bladder is not explicitly mentioned […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.10">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.10.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.10.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.10.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.10.1.1.1.1">Query (Iteration 2)</span>: What are the potential side effects of neoadjuvant chemotherapy drugs used in transitional cell carcinoma of the bladder? <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.10.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.11">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.11.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.11.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.11.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.11.1.1.1.1">Answer</span>: The potential side effects […] include myelosuppression, dysuria, urinary frequency, contact dermatitis, and systemic illness associated with granulomatous infections in multiple sites.</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.12">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.12.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.12.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.12.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.12.1.1.1.1">Query (Iteration 3)</span>: What is the specific neoadjuvant chemotherapy drug
[…]
that can cause sensorineural hearing loss? <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.12.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.13">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.13.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.13.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.13.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.13.1.1.1.1">Answer</span>: <span class="ltx_text" id="S4.SS4.tab1.2.1.4.13.1.1.1.2" style="background-color:#FFFF00;">The specific neoadjuvant chemotherapy drug used in transitional cell carcinoma of the bladder that can cause sensorineural hearing loss is <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.13.1.1.1.2.1">cisplatin</span></span>.</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.14">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.14.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.14.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.14.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.14.1.1.1.1">Query (Iteration 4)</span>: What is the <span class="ltx_text" id="S4.SS4.tab1.2.1.4.14.1.1.1.2" style="background-color:#FFFF00;">mechanism of action of <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.14.1.1.1.2.1">cisplatin</span>?</span> <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.14.1.1.1.3">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.15">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.tab1.2.1.4.15.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.15.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.15.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.tab1.2.1.4.15.1.1.1.1">Answer</span>: The mechanism of action of cisplatin is achieved through the covalent binding of platinum to the purine bases guanine and adenine in DNA. This covalent binding leads to <span class="ltx_text" id="S4.SS4.tab1.2.1.4.15.1.1.1.2" style="background-color:#FFFF00;">intra-strand and inter-strand crosslinks</span> causing subsequent strand breaks […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.tab1.2.1.4.16">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S4.SS4.tab1.2.1.4.16.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.tab1.2.1.4.16.1.1">
<span class="ltx_p" id="S4.SS4.tab1.2.1.4.16.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.16.1.1.1.1">Final analysis</span>: […] The drug that is most likely responsible for the patient’s symptoms is cisplatin, which is known to cause sensorineural hearing loss. The mechanism of action of cisplatin involves cross-linking of DNA, leading to subsequent strand breaks and cell death. Therefore, the correct answer is D. <span class="ltx_text ltx_font_bold" id="S4.SS4.tab1.2.1.4.16.1.1.1.2">Answer</span>: D <span class="ltx_text" id="S4.SS4.tab1.2.1.4.16.1.1.1.3" style="color:#00FF00;">✔</span></span>
</span></span></span>
</span></span></p>
</div>
</div>
</figure>
<figure class="ltx_table" id="S4.SS4.3">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_1"><span class="ltx_ERROR ltx_figure_panel undefined" id="S4.SS4.3.4">\tbl</span></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS4.3.3"><span class="ltx_text" id="S4.SS4.3.3.3" style="font-size:90%;">An example of how <span class="ltx_text ltx_font_italic" id="S4.SS4.3.3.3.4">i</span>-MedRAG helps Llama-3.1-8B to find the correct answer. The <span class="ltx_text" id="S4.SS4.3.3.3.5" style="background-color:#FFCCCC;">incorrect rationale</span> and <span class="ltx_text" id="S4.SS4.3.3.3.6" style="background-color:#FFFF00;">useful evidence</span> are highlighted.

<span class="ltx_tabular ltx_centering ltx_align_middle" id="S4.SS4.3.3.3.3">
<span class="ltx_tr" id="S4.SS4.3.3.3.3.4">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S4.SS4.3.3.3.3.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.4.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.4.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.3.3.3.3.4.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.4.1.1.1.2"> <span class="ltx_text" id="S4.SS4.3.3.3.3.4.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.3.3.3.3.4.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.3.3.3.3.4.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.3.3.3.3.4.1.1.1.2.1.1.1.1">MMLU Question</span></span>
</span></span><span class="ltx_text" id="S4.SS4.3.3.3.3.4.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.2.2.2.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.2.2.2.2.2.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.2.2.2.2.2.2.2">
<span class="ltx_p" id="S4.SS4.2.2.2.2.2.2.2.2" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.2.2.2.2.2.2.2.2.1">professional_medicine-020</span>: A 52-year-old woman comes to the emergency department because of a 1-week history of low-grade fever and increasing abdominal cramps that are exacerbated by bowel movements […] Her temperature is 38.1<sup class="ltx_sup" id="S4.SS4.2.2.2.2.2.2.2.2.2">∘</sup>C (100.6<sup class="ltx_sup" id="S4.SS4.2.2.2.2.2.2.2.2.3">∘</sup>F), pulse is 75/min, and blood pressure is 150/80 mm Hg […] there is tenderness to palpation of the left lower quadrant with guarding but no rebound […] leukocyte count is 15,000/mm3 […] Which of the following is the most appropriate next step in diagnosis? <span class="ltx_text ltx_font_bold" id="S4.SS4.2.2.2.2.2.2.2.2.4">A.</span> Test of the stool for Clostridium difficile toxin <span class="ltx_text ltx_font_bold" id="S4.SS4.2.2.2.2.2.2.2.2.5">B.</span> Endoscopic retrograde cholangiopancreatography <span class="ltx_text ltx_font_bold" id="S4.SS4.2.2.2.2.2.2.2.2.6">C.</span> Pelvic ultrasonography <span class="ltx_text ltx_font_bold" id="S4.SS4.2.2.2.2.2.2.2.2.7">D.</span> CT scan of the abdomen with contrast</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.5" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.5.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.3.3.3.3.5.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.3.3.3.3.5.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.5.1.1.1.2"> <span class="ltx_text" id="S4.SS4.3.3.3.3.5.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.3.3.3.3.5.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.3.3.3.3.5.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.3.3.3.3.5.1.1.1.2.1.1.1.1">CoT</span></span>
</span></span><span class="ltx_text" id="S4.SS4.3.3.3.3.5.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.6">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.6.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.6.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.6.1.1.1.1">Analysis</span>: […]
the differential diagnosis includes diverticulitis, appendicitis, and bowel obstruction. However, <span class="ltx_text" id="S4.SS4.3.3.3.3.6.1.1.1.2" style="background-color:#FFCCCC;">the absence of bloody stools and the patient’s response to antibiotics makes diverticulitis less likely</span>. Therefore, the most appropriate next step in diagnosis is to test for Clostridium difficile toxin in the stool. <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.6.1.1.1.3">Answer</span>: A <span class="ltx_text" id="S4.SS4.3.3.3.3.6.1.1.1.4" style="color:#FF0000;">✗</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.7" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.7.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.7.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.3.3.3.3.7.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.3.3.3.3.7.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.7.1.1.1.2"> <span class="ltx_text" id="S4.SS4.3.3.3.3.7.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.3.3.3.3.7.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.3.3.3.3.7.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.3.3.3.3.7.1.1.1.2.1.1.1.1">MedRAG</span></span>
</span></span><span class="ltx_text" id="S4.SS4.3.3.3.3.7.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.8">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.8.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.8.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.8.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.8.1.1.1.1">Retrieved documents</span>: […] <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.8.1.1.1.2">Analysis</span>: […] Given the patient’s symptoms and history, <span class="ltx_text" id="S4.SS4.3.3.3.3.8.1.1.1.3" style="background-color:#FFCCCC;">the most likely diagnosis is a pelvic abscess or a complication related to the previous surgery</span>. The most appropriate next step in diagnosis would be to investigate the pelvic area for any potential complications or abscesses. <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.8.1.1.1.4">Answer</span>: C <span class="ltx_text" id="S4.SS4.3.3.3.3.8.1.1.1.5" style="color:#FF0000;">✗</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.9" style="background-color:#EAEEEA;">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.9.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.9.1.1" style="background-color:#EAEEEA;">
<span class="ltx_p" id="S4.SS4.3.3.3.3.9.1.1.1" style="width:469.5pt;"><span class="ltx_text" id="S4.SS4.3.3.3.3.9.1.1.1.1"></span><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.9.1.1.1.2"> <span class="ltx_text" id="S4.SS4.3.3.3.3.9.1.1.1.2.1">
<span class="ltx_tabular ltx_align_middle" id="S4.SS4.3.3.3.3.9.1.1.1.2.1.1">
<span class="ltx_tr" id="S4.SS4.3.3.3.3.9.1.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.SS4.3.3.3.3.9.1.1.1.2.1.1.1.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="S4.SS4.3.3.3.3.9.1.1.1.2.1.1.1.1.1">i</span>-MedRAG</span></span>
</span></span><span class="ltx_text" id="S4.SS4.3.3.3.3.9.1.1.1.2.2"></span></span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.10">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS4.3.3.3.3.10.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.10.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.10.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.3.3.3.3.10.1.1.1.1">Query 1 (Iteration 1)</span>: What are the common symptoms and diagnostic criteria for Clostridium difficile infection (CDI)? <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.10.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.11">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.11.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.11.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.11.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.11.1.1.1.1">Answer</span>:
[…]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.12">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.12.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.12.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.12.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.3.3.3.3.12.1.1.1.1">Query 2 (Iteration 1)</span>: What are the typical findings on physical examination and laboratory tests for diverticulitis? <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.12.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.13">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.13.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.13.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.13.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.13.1.1.1.1">Answer</span>: Based on the provided documents, the typical findings on physical examination and laboratory tests for diverticulitis are: <span class="ltx_text ltx_font_italic" id="S4.SS4.3.3.3.3.13.1.1.1.2">Physical Examination</span>: <span class="ltx_text" id="S4.SS4.3.3.3.3.13.1.1.1.3" style="background-color:#FFFF00;">Tenderness to palpation over the area of inflammation (almost always present)</span> […] <span class="ltx_text" id="S4.SS4.3.3.3.3.13.1.1.1.4" style="background-color:#FFFF00;">Fever is almost always present</span>, but hypotension and shock are uncommon. <span class="ltx_text ltx_font_italic" id="S4.SS4.3.3.3.3.13.1.1.1.5">Laboratory Tests</span>: <span class="ltx_text" id="S4.SS4.3.3.3.3.13.1.1.1.6" style="background-color:#FFFF00;">Leukocytosis</span> (elevated white blood cell count) […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.14">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.14.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.14.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.14.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.3.3.3.3.14.1.1.1.1">Query 1 (Iteration 2)</span>: What are the typical imaging findings for diverticulitis on a CT scan of the abdomen with contrast? <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.14.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.15">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.15.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.15.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.15.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.15.1.1.1.1">Answer</span>: […] These findings are consistent with the diagnosis of diverticulitis, and <span class="ltx_text" id="S4.SS4.3.3.3.3.15.1.1.1.2" style="background-color:#FFFF00;">are often used to differentiate it from other conditions that may present with similar symptoms.</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.16">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.16.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.16.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.16.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.SS4.3.3.3.3.16.1.1.1.1">Query 2 (Iteration 2)</span>: What are the indications for surgical intervention in a patient with diverticulitis? <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.16.1.1.1.2">Retrieved documents</span>: […]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.17">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S4.SS4.3.3.3.3.17.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.17.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.17.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.17.1.1.1.1">Answer</span>:
[…]</span>
</span></span></span>
<span class="ltx_tr" id="S4.SS4.3.3.3.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S4.SS4.3.3.3.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS4.3.3.3.3.3.1.1">
<span class="ltx_p" id="S4.SS4.3.3.3.3.3.1.1.1" style="width:469.5pt;"><span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.3.1.1.1.1">Final Analysis</span>:
[…]
The patient’s laboratory results show a leukocyte count of 15,000/mm<sup class="ltx_sup" id="S4.SS4.3.3.3.3.3.1.1.1.2">3</sup>, indicating leukocytosis
[…]
The patient’s symptoms of abdominal cramps, fever, and leukocytosis, combined with tenderness to palpation of the left lower quadrant, <span class="ltx_text" id="S4.SS4.3.3.3.3.3.1.1.1.3" style="background-color:#FFFF00;">are consistent with diverticulitis</span> […] the most appropriate next step in diagnosis is to perform a <span class="ltx_text" id="S4.SS4.3.3.3.3.3.1.1.1.4" style="background-color:#FFFF00;">CT scan</span> of the abdomen with contrast to evaluate for diverticulitis and rule out other causes of her symptoms. <span class="ltx_text ltx_font_bold" id="S4.SS4.3.3.3.3.3.1.1.1.5">Answer</span>: D <span class="ltx_text" id="S4.SS4.3.3.3.3.3.1.1.1.6" style="color:#00FF00;">✔</span></span>
</span></span></span>
</span></span></p>
</div>
</div>
</figure>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS4" title="4.4 Case studies ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.4</span></a> shows the predictions of GPT-3.5 on a MedQA question with different prompt engineering approaches.
The question asks about the mechanism of the drug for transitional cell carcinoma of the bladder which causes hearing loss. To solve the problem, it is important to find the exact drug and then figure out how it causes the mentioned symptoms.
However, the CoT result shows that GPT-3.5 does not inherently contain sufficient medical knowledge to solve this problem. Instead of inferring the described drug, GPT-3.5 with CoT directly hallucinates a wrong option as the answer. While free radicals are relevant to hearing loss, their connection to the disease of the patient is unclear and not discussed. Compared to CoT which solely relies on the internal knowledge of LLMs, MedRAG provides an opportunity for LLMs to augment their answer generation with external medical knowledge. Nevertheless, the model output shows that the MedRAG system fails to retrieve useful information about the drug from medical corpora. Given the complex problem description, it is difficult for text retrievers to find the asked mechanism without knowing the drug.</p>
</div>
<div class="ltx_para" id="S4.SS4.p2">
<p class="ltx_p" id="S4.SS4.p2.1">With iteratively generated follow-up queries, our <span class="ltx_text ltx_font_italic" id="S4.SS4.p2.1.1">i</span>-MedRAG manages to identify the described drug and find information about its mechanism. From Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS4" title="4.4 Case studies ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.4</span></a>, it can be observed that GPT-3.5 starts with a general query about the asked mechanism. However, similar to the case in MedRAG, the RAG system fails to provide useful information about the query. With the information-seeking history, GPT-3.5 updates its actions with follow-up queries with respect to side effects especially hearing loss. With the updated queries, it manages to identify “cisplatin” as the drug which is not explicitly mentioned in the question. A query about the mechanism of action of cisplatin is further proposed to search for information about the answer to the original question. With several iterations of adaptive question answering, GPT-3.5 successfully finds the correct answer for the given clinical medical question.</p>
</div>
<div class="ltx_para" id="S4.SS4.p3">
<p class="ltx_p" id="S4.SS4.p3.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS4" title="4.4 Case studies ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.4</span></a> shows another case from the MMLU-Med dataset by Llama-3.1-8B. The case is selected from the “professional medicine” subtask of MMLU-Med, which contains complex clinical cases similar to those in MedQA. In the question, LLMs are asked to choose the next step in diagnosis given the described symptoms, which requires the initial analysis of potential diseases. Similar to GPT-3.5, the open-source Llama-3.1-8B may hallucinate wrong answers with just CoT or MedRAG, as shown by the highlighted incorrect rationales in Table <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.SS4" title="4.4 Case studies ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">4.4</span></a>. With iterative follow-up queries, <span class="ltx_text ltx_font_italic" id="S4.SS4.p3.1.1">i</span>-MedRAG enables the LLM to find out the correct answer by making specific queries given existing information. For example, Llama-3.1-8B asks about the symptoms of <span class="ltx_text ltx_font_italic" id="S4.SS4.p3.1.2">Clostridium difficile</span> infection (CDI) and diverticulitis in its first iteration which helps it to identify diverticulitis as the potential disease for the diagnosis. In the second iteration, the model queries about the CT scan for diverticulitis, where the answer provides key information that helps it identify the correct next step.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Discussion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">Overall, our proposed <span class="ltx_text ltx_font_italic" id="S5.p1.1.1">i</span>-MedRAG effectively improves the performance of LLMs on complex medical questions by prompting them to iteratively ask follow-up queries. The experimental results show that our approach is better than previously proposed prompt engineering and fine-tuning methods, and is generalizable to various LLMs and medical question-answering datasets. Nevertheless, our approach has certain limitations which need to be discussed. It is also worthwhile to discuss the future work of this study to analyze how it can be further improved to facilitate real-world medical assistance.</p>
</div>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Limitations</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">The first limitation of <span class="ltx_text ltx_font_italic" id="S5.SS1.p1.1.1">i</span>-MedRAG is its high cost. While generating more follow-up queries tends to provide LLMs with more comprehensive and focused information about the given medical question, the cost also grows linearly with the number of queries generated. The time cost can be further increased if more documents are used to help answer the generated queries with RAG. While the cost is comparable to approaches using multiple LLM agents<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib39" title="">39</a>]</cite> or self consistency<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib47" title="">47</a>]</cite> which also prompt LLMs multiple times for each question, it is much more costly than baseline prompting methods such as CoT<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib37" title="">37</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1">Another limitation is the selection of hyperparameter values for optimal performance. As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#S4.F3" title="Figure 3 ‣ 4.3 Scaling with iterations and queries ‣ 4 Experiments ‣ Improving Retrieval-Augmented Generation in Medicine with Iterative Follow-up Questions"><span class="ltx_text ltx_ref_tag">3</span></a>, different LLMs can have different hyperparameter settings for their optimal performance. Even for the same LLM, its optimal hyperparameters can vary based on the medical questions being processed. Thus, it is non-trivial to find the optimal hyperparameters of <span class="ltx_text ltx_font_italic" id="S5.SS1.p2.1.1">i</span>-MedRAG for a new medical task, which may be inefficient for real-world deployments.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Future work</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">Given the limitations of <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.1">i</span>-MedRAG, we consider several potential future directions that could further improve the performance of retrieval-augmented generation for medicine. The first direction is the automation of hyperparameter selection in <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.2">i</span>-MedRAG. To reduce the laborious process of hyperparameter selection, one may use an LLM agent to dynamically determine how many follow-up queries should be asked each iteration. This can improve the efficiency and flexibility of the hyperparameter selection process. Another future direction is to improve the performance of <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.3">i</span>-MedRAG with few-shot demonstrations. While few-shot CoT prompting is demonstrated to perform better than the zero-shot counterpart<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2408.00727v3#bib.bib43" title="">43</a>]</cite>, it is not easy to adapt such strategies to <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.4">i</span>-MedRAG as the reasoning process can be dynamically affected by the use of external corpora and retrievers. Investigating how <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.5">i</span>-MedRAG can benefit from one or few-shot samples could be a potential direction to further enhance its performance on medical question answering. More quantitative analysis can also be performed to examine the error types of <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.6">i</span>-MedRAG compared to existing methods.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Acknowledgments</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">Guangzhi Xiong and Aidong Zhang are supported
by NIH grant 1R01LM014012 and NSF grant
2333740. Qiao Jin and Zhiyong Lu are supported by the Intramural Research Program of the National Library of Medicine, National Institutes of Health.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
A. J. Thirunavukarasu, D. S. J. Ting, K. Elangovan, L. Gutierrez, T. F. Tan and D. S. W. Ting, Large language models in medicine, <span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">Nature medicine</span> <span class="ltx_text ltx_font_bold" id="bib.bib1.2.2">29</span>, 1930 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
H. Zhou, B. Gu, X. Zou, Y. Li, S. S. Chen, P. Zhou, J. Liu, Y. Hua, C. Mao, X. Wu <span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">et al.</span>, A survey of large language models in medicine: Progress, application, and challenge, <span class="ltx_text ltx_font_italic" id="bib.bib2.2.2">arXiv preprint arXiv:2311.05112</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
J. A. Omiye, H. Gui, S. J. Rezaei, J. Zou and R. Daneshjou, Large language models in medicine: the potentials and pitfalls: a narrative review, <span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">Annals of Internal Medicine</span> <span class="ltx_text ltx_font_bold" id="bib.bib3.2.2">177</span>, 210 (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
S. Tian, Q. Jin, L. Yeganova, P.-T. Lai, Q. Zhu, X. Chen, Y. Yang, Q. Chen, W. Kim, D. C. Comeau <span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">et al.</span>, Opportunities and challenges for chatgpt and large language models in biomedicine and health, <span class="ltx_text ltx_font_italic" id="bib.bib4.2.2">Briefings in Bioinformatics</span> <span class="ltx_text ltx_font_bold" id="bib.bib4.3.3">25</span>, p. bbad493 (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
R. Luo, L. Sun, Y. Xia, T. Qin, S. Zhang, H. Poon and T.-Y. Liu, Biogpt: generative pre-trained transformer for biomedical text generation and mining, <span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">Briefings in bioinformatics</span> <span class="ltx_text ltx_font_bold" id="bib.bib5.2.2">23</span>, p. bbac409 (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
V. Liévin, C. E. Hother, A. G. Motzfeldt and O. Winther, Can large language models reason about medical questions?, <span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">Patterns</span> <span class="ltx_text ltx_font_bold" id="bib.bib6.2.2">5</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
H. Nori, Y. T. Lee, S. Zhang, D. Carignan, R. Edgar, N. Fusi, N. King, J. Larson, Y. Li, W. Liu <span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">et al.</span>, Can generalist foundation models outcompete special-purpose tuning? case study in medicine, <span class="ltx_text ltx_font_italic" id="bib.bib7.2.2">arXiv preprint arXiv:2311.16452</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
K. Singhal, S. Azizi, T. Tu, S. S. Mahdavi, J. Wei, H. W. Chung, N. Scales, A. Tanwani, H. Cole-Lewis, S. Pfohl <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">et al.</span>, Large language models encode clinical knowledge, <span class="ltx_text ltx_font_italic" id="bib.bib8.2.2">Nature</span> <span class="ltx_text ltx_font_bold" id="bib.bib8.3.3">620</span>, 172 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
E. Bolton, A. Venigalla, M. Yasunaga, D. Hall, B. Xiong, T. Lee, R. Daneshjou, J. Frankle, P. Liang, M. Carbin <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">et al.</span>, Biomedlm: A 2.7 b parameter language model trained on biomedical text, <span class="ltx_text ltx_font_italic" id="bib.bib9.2.2">arXiv preprint arXiv:2403.18421</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
C. Shaib, M. Li, S. Joseph, I. Marshall, J. J. Li and B. C. Wallace, Summarizing, simplifying, and synthesizing medical evidence using gpt-3 (with varying success), 1387 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
L. Tang, Z. Sun, B. Idnay, J. G. Nestor, A. Soroush, P. A. Elias, Z. Xu, Y. Ding, G. Durrett, J. F. Rousseau <span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">et al.</span>, Evaluating large language models on medical evidence summarization, <span class="ltx_text ltx_font_italic" id="bib.bib11.2.2">npj Digital Medicine</span> <span class="ltx_text ltx_font_bold" id="bib.bib11.3.3">6</span>, p. 158 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
D. Van Veen, C. Van Uden, L. Blankemeier, J.-B. Delbrouck, A. Aali, C. Bluethgen, A. Pareek, M. Polacin, E. P. Reis, A. Seehofnerová <span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">et al.</span>, Adapted large language models can outperform medical experts in clinical text summarization, <span class="ltx_text ltx_font_italic" id="bib.bib12.2.2">Nature Medicine</span> , 1 (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Q. Jin, Z. Wang, C. S. Floudas, F. Chen, C. Gong, D. Bracken-Clarke, E. Xue, Y. Yang, J. Sun and Z. Lu, Matching patients to clinical trials with large language models, <span class="ltx_text ltx_font_italic" id="bib.bib13.1.1">ArXiv</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
C. Wong, S. Zhang, Y. Gu, C. Moung, J. Abel, N. Usuyama, R. Weerasinghe, B. Piening, T. Naumann, C. Bifulco <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">et al.</span>, Scaling clinical trial matching using large language models: A case study in oncology, 846 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
M. Wornow, A. Lozano, D. Dash, J. Jindal, K. W. Mahaffey and N. H. Shah, Zero-shot clinical trial patient matching with llms, <span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2402.05125</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
S. Zhuang, B. Koopman and G. Zuccon, Team ielab at trec clinical trial track 2023: Enhancing clinical trial retrieval with neural rankers and large language models, <span class="ltx_text ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2401.01566</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Z. Ji, N. Lee, R. Frieske, T. Yu, D. Su, Y. Xu, E. Ishii, Y. J. Bang, A. Madotto and P. Fung, Survey of hallucination in natural language generation, <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">ACM Computing Surveys</span> <span class="ltx_text ltx_font_bold" id="bib.bib17.2.2">55</span>, 1 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
T. Wu, L. Luo, Y.-F. Li, S. Pan, T.-T. Vu and G. Haffari, Continual learning for large language models: A survey, <span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:2402.01364</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
P. Lewis, E. Perez, A. Piktus, F. Petroni, V. Karpukhin, N. Goyal, H. Küttler, M. Lewis, W.-t. Yih, T. Rocktäschel <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">et al.</span>, Retrieval-augmented generation for knowledge-intensive nlp tasks, <span class="ltx_text ltx_font_italic" id="bib.bib19.2.2">Advances in Neural Information Processing Systems</span> <span class="ltx_text ltx_font_bold" id="bib.bib19.3.3">33</span>, 9459 (2020).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Y. Gao, Y. Xiong, X. Gao, K. Jia, J. Pan, Y. Bi, Y. Dai, J. Sun and H. Wang, Retrieval-augmented generation for large language models: A survey, <span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2312.10997</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
C. Zakka, R. Shad, A. Chaurasia, A. R. Dalal, J. L. Kim, M. Moor, R. Fong, C. Phillips, K. Alexander, E. Ashley <span class="ltx_text ltx_font_italic" id="bib.bib21.1.1">et al.</span>, Almanac—retrieval-augmented language models for clinical medicine, <span class="ltx_text ltx_font_italic" id="bib.bib21.2.2">NEJM AI</span> <span class="ltx_text ltx_font_bold" id="bib.bib21.3.3">1</span>, p. AIoa2300068 (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
A. Lozano, S. L. Fleming, C.-C. Chiang and N. Shah, Clinfo. ai: An open-source retrieval-augmented large language model system for answering medical questions using scientific literature, 8 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
G. Xiong, Q. Jin, Z. Lu and A. Zhang, Benchmarking retrieval-augmented generation for medicine, <span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2402.13178</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Q. Jin, B. Dhingra, Z. Liu, W. Cohen and X. Lu, Pubmedqa: A dataset for biomedical research question answering, 2567 (2019).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
G. Tsatsaronis, G. Balikas, P. Malakasiotis, I. Partalas, M. Zschunke, M. R. Alvers, D. Weissenborn, A. Krithara, S. Petridis, D. Polychronopoulos <span class="ltx_text ltx_font_italic" id="bib.bib25.1.1">et al.</span>, An overview of the bioasq large-scale biomedical semantic indexing and question answering competition, <span class="ltx_text ltx_font_italic" id="bib.bib25.2.2">BMC bioinformatics</span> <span class="ltx_text ltx_font_bold" id="bib.bib25.3.3">16</span>, 1 (2015).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
D. Jin, E. Pan, N. Oufattole, W.-H. Weng, H. Fang and P. Szolovits, What disease does this patient have? a large-scale open domain question answering dataset from medical exams, <span class="ltx_text ltx_font_italic" id="bib.bib26.1.1">Applied Sciences</span> <span class="ltx_text ltx_font_bold" id="bib.bib26.2.2">11</span>, p. 6421 (2021).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Y. S. Low, M. L. Jackson, R. J. Hyde, R. E. Brown, N. M. Sanghavi, J. D. Baldwin, C. W. Pike, J. Muralidharan, G. Hui, N. Alexander <span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">et al.</span>, Answering real-world clinical questions using large language model based systems, <span class="ltx_text ltx_font_italic" id="bib.bib27.2.2">arXiv preprint arXiv:2407.00541</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Q. Jin, R. Leaman and Z. Lu, Pubmed and beyond: biomedical literature search in the age of artificial intelligence, <span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">EBioMedicine</span> <span class="ltx_text ltx_font_bold" id="bib.bib28.2.2">100</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Q. Jin, R. Leaman and Z. Lu, Retrieve, summarize, and verify: how will chatgpt affect information seeking from the medical literature?, <span class="ltx_text ltx_font_italic" id="bib.bib29.1.1">Journal of the American Society of Nephrology</span> <span class="ltx_text ltx_font_bold" id="bib.bib29.2.2">34</span>, 1302 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
X. Li, P. Yu, C. Zhou, T. Schick, O. Levy, L. Zettlemoyer, J. E. Weston and M. Lewis, Self-alignment with instruction backtranslation (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Z. Shao, Y. Gong, Y. Shen, M. Huang, N. Duan and W. Chen, Enhancing retrieval-augmented large language models with iterative retrieval-generation synergy, 9248 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
H. Trivedi, N. Balasubramanian, T. Khot and A. Sabharwal, Interleaving retrieval with chain-of-thought reasoning for knowledge-intensive multi-step questions, 10014 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Z. Jiang, M. Sun, L. Liang and Z. Zhang, Retrieve, summarize, plan: Advancing multi-hop question answering with an iterative approach, <span class="ltx_text ltx_font_italic" id="bib.bib33.1.1">arXiv preprint arXiv:2407.13101</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
A. Pal, L. K. Umapathi and M. Sankarasubbu, Medmcqa: A large-scale multi-subject multi-choice dataset for medical domain question answering, 248 (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
D. Hendrycks, C. Burns, S. Basart, A. Zou, M. Mazeika, D. Song and J. Steinhardt, Measuring massive multitask language understanding, <span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">arXiv preprint arXiv:2009.03300</span> (2020).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Q. Jin, Z. Yuan, G. Xiong, Q. Yu, H. Ying, C. Tan, M. Chen, S. Huang, X. Liu and S. Yu, Biomedical question answering: a survey of approaches and challenges, <span class="ltx_text ltx_font_italic" id="bib.bib36.1.1">ACM Computing Surveys (CSUR)</span> <span class="ltx_text ltx_font_bold" id="bib.bib36.2.2">55</span>, 1 (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
J. Wei, X. Wang, D. Schuurmans, M. Bosma, F. Xia, E. Chi, Q. V. Le, D. Zhou <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">et al.</span>, Chain-of-thought prompting elicits reasoning in large language models, <span class="ltx_text ltx_font_italic" id="bib.bib37.2.2">Advances in neural information processing systems</span> <span class="ltx_text ltx_font_bold" id="bib.bib37.3.3">35</span>, 24824 (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
X. Wang, J. Wei, D. Schuurmans, Q. Le, E. Chi, S. Narang, A. Chowdhery and D. Zhou, Self-consistency improves chain of thought reasoning in language models, <span class="ltx_text ltx_font_italic" id="bib.bib38.1.1">arXiv preprint arXiv:2203.11171</span> (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
X. Tang, A. Zou, Z. Zhang, Y. Zhao, X. Zhang, A. Cohan and M. Gerstein, Medagents: Large language models as collaborators for zero-shot medical reasoning, <span class="ltx_text ltx_font_italic" id="bib.bib39.1.1">arXiv preprint arXiv:2311.10537</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
C. Feng, X. Zhang and Z. Fei, Knowledge solver: Teaching llms to search for domain knowledge from knowledge graphs, <span class="ltx_text ltx_font_italic" id="bib.bib40.1.1">arXiv preprint arXiv:2309.03118</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Y. Wang, X. Ma and W. Chen, Augmenting black-box llms with medical textbooks for clinical question answering, <span class="ltx_text ltx_font_italic" id="bib.bib41.1.1">arXiv preprint arXiv:2309.02233</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
T. Savage, A. Nayak, R. Gallo, E. Rangan and J. H. Chen, Diagnostic reasoning prompts reveal the potential for large language model interpretability in medicine, <span class="ltx_text ltx_font_italic" id="bib.bib42.1.1">NPJ Digital Medicine</span> <span class="ltx_text ltx_font_bold" id="bib.bib42.2.2">7</span>, p. 20 (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
H. Nori, N. King, S. M. McKinney, D. Carignan and E. Horvitz, Capabilities of gpt-4 on medical challenge problems, <span class="ltx_text ltx_font_italic" id="bib.bib43.1.1">arXiv preprint arXiv:2303.13375</span> (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
K. Saab, T. Tu, W.-H. Weng, R. Tanno, D. Stutz, E. Wulczyn, F. Zhang, T. Strother, C. Park, E. Vedadi <span class="ltx_text ltx_font_italic" id="bib.bib44.1.1">et al.</span>, Capabilities of gemini models in medicine, <span class="ltx_text ltx_font_italic" id="bib.bib44.2.2">arXiv preprint arXiv:2404.18416</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
W. Shi, R. Xu, Y. Zhuang, Y. Yu, H. Wu, C. Yang and M. D. Wang, Medadapter: Efficient test-time adaptation of large language models towards medical reasoning, <span class="ltx_text ltx_font_italic" id="bib.bib45.1.1">arXiv preprint arXiv:2405.03000</span> (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
Q. Jin, W. Kim, Q. Chen, D. C. Comeau, L. Yeganova, W. J. Wilbur and Z. Lu, Medcpt: Contrastive pre-trained transformers with large-scale pubmed search logs for zero-shot biomedical information retrieval, <span class="ltx_text ltx_font_italic" id="bib.bib46.1.1">Bioinformatics</span> <span class="ltx_text ltx_font_bold" id="bib.bib46.2.2">39</span>, p. btad651 (2023).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
X. Wang, J. Wei, D. Schuurmans, Q. V. Le, E. H. Chi, S. Narang, A. Chowdhery and D. Zhou, Self-consistency improves chain of thought reasoning in language models.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Fri Oct 11 00:58:02 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
