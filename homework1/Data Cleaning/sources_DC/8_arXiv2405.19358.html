<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Robustifying Safety-Aligned Large Language Models through Clean Data Curation</title>
<!--Generated on Fri May 31 01:54:30 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2405.19358v2/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S1" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S2" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S3" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Threat Model and Problem Definition</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S3.SS1" title="In 3 Threat Model and Problem Definition ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span><span class="ltx_text ltx_font_smallcaps">Ctrl</span> in Attack I</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S3.SS2" title="In 3 Threat Model and Problem Definition ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span><span class="ltx_text ltx_font_smallcaps">Ctrl</span> in Attack II</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span><span class="ltx_text ltx_font_smallcaps">Ctrl</span>: A Data Curation Framework against Jailbreaking Attacks</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="In 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Motivation and Guideline Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS2" title="In 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Methodology</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Experiment</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.SS1" title="In 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Main Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.SS2" title="In 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Further Analysis: Attack and <span class="ltx_text ltx_font_smallcaps">Ctrl</span> with Alternative Capabilities</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S6" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S7" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A1" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Prompts for Scoring Helpfulness</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A2" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Experimental Configurations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A3" title="In Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Additional Results</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\AtBeginEnvironment</span>
<p class="ltx_p" id="p1.2">quote<span class="ltx_ERROR undefined" id="p1.2.1">\singlespace</span>
<span class="ltx_ERROR undefined" id="p1.2.2">\AtEndEnvironment</span>quote<span class="ltx_ERROR undefined" id="p1.2.3">\endsinglespace</span></p>
</div>
<h1 class="ltx_title ltx_title_document">Robustifying Safety-Aligned Large Language Models through Clean Data Curation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Xiaoqun Liu<sup class="ltx_sup" id="id8.8.id1"><span class="ltx_text ltx_font_italic" id="id8.8.id1.1">1</span></sup>  Jiacheng Liang<sup class="ltx_sup" id="id9.9.id2"><span class="ltx_text ltx_font_italic" id="id9.9.id2.1">1</span></sup>  Muchao Ye<sup class="ltx_sup" id="id10.10.id3"><span class="ltx_text ltx_font_italic" id="id10.10.id3.1">2</span></sup>  Zhaohan Xi<sup class="ltx_sup" id="id11.11.id4"><span class="ltx_text ltx_font_italic" id="id11.11.id4.1">3</span></sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id12.12.id5">1</sup>Stony Brook University   <sup class="ltx_sup" id="id13.13.id6">2</sup>University of Iowa    <sup class="ltx_sup" id="id14.14.id7">3</sup>Binghamton University
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id15.15.id8">{xiaoqun.liu, jiacheng.liang.1}@stonybrook.edu</span>
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id16.16.id9">{muchao-ye}@uiowa.edu</span>,
<span class="ltx_text ltx_font_typewriter" id="id17.17.id10">{zhaohanxi516}@gmail.com</span>
<br class="ltx_break"/>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id18.id1">Large language models (LLMs) are vulnerable when trained on datasets containing harmful content, which leads to potential jailbreaking attacks in two scenarios: the integration of harmful texts within crowdsourced data used for pre-training and direct tampering with LLMs through fine-tuning. In both scenarios, adversaries can compromise the safety alignment of LLMs, exacerbating malfunctions. Motivated by the need to mitigate these adversarial influences, our research aims to enhance safety alignment by either neutralizing the impact of malicious texts in pre-training datasets or increasing the difficulty of jailbreaking during downstream fine-tuning. In this paper, we propose a data curation framework designed to counter adversarial impacts in both scenarios. Our method operates under the assumption that we have no prior knowledge of attack details, focusing solely on curating clean texts. We introduce an iterative process aimed at revising texts to reduce their perplexity as perceived by LLMs, while simultaneously preserving their text quality. By pre-training or fine-tuning LLMs with curated clean texts, we observe a notable improvement in LLM robustness regarding safety alignment against harmful queries. For instance, when pre-training LLMs using a crowdsourced dataset containing 5% harmful instances, adding an equivalent amount of curated texts significantly mitigates the likelihood of providing harmful responses in LLMs and reduces the attack success rate by 71%. Our study represents a significant step towards mitigating the risks associated with training-based jailbreaking and fortifying the secure utilization of LLMs.</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large language models (LLMs), exemplified by OpenAI’s GPT series <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib42" title="">42</a>]</cite> and Meta’s Llama <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib50" title="">50</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib51" title="">51</a>]</cite>, have captured considerable attention due to their impressive ability to understand and produce natural language texts. While LLMs demonstrate remarkable versatility, it is crucial to prioritize the development of LLMs that are safety-aligned <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib14" title="">14</a>]</cite>. This ensures that LLMs behave consistently with human intentions and values.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Contrary to safety alignment efforts, previous studies have explored jailbreaking attacks on LLMs during training. These approaches involve the use of security-sensitive <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">(query, response)</span> pairs embedded with harmful knowledge, which compromise the safety alignment and could potentially prompt LLMs to provide harmful responses in subsequent executions. As illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">1</span></a>, these attacks highlight two critical scenarios where training-based jailbreaking could impact the development of LLMs:</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1"><span class="ltx_text ltx_font_bold" id="S1.p3.1.1">Scenario I: Integration of Harmful Texts in Pre-training</span> In domains requiring expert knowledge, such as clinical decision-making <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib48" title="">48</a>]</cite>, LLMs are pre-trained with crowdsourced data to enhance their proficiency in complex tasks. However, crowdsourced data introduces vulnerabilities from multiparty collections <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib18" title="">18</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib33" title="">33</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib46" title="">46</a>]</cite>, where adversarial third parties may contribute data designed to reinforce misbehaviors in LLMs. Even though harmful texts may constitute only a small fraction of the multiparty data, their presence significantly jeopardizes the safety alignment of LLMs. This vulnerability is further examined through experiments detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.SS1" title="5.1 Main Results ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">5.1</span></a>.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1"><span class="ltx_text ltx_font_bold" id="S1.p4.1.1">Scenario II: Tampering During Fine-tuning</span> Pre-trained LLMs undergo further customization through fine-tuning tailored to specific applications, such as program repair <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib27" title="">27</a>]</cite>, sentiment analysis <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib15" title="">15</a>]</cite>, and tool learning <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib23" title="">23</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib41" title="">41</a>]</cite>. Adversaries with the authorization to modify model parameters (e.g., through APIs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib1" title="">1</a>]</cite>) can implant malicious functionalities within LLMs, thereby compromising their safety alignment through jailbreaking.</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="253" id="S1.F1.g1" src="x1.png" width="735"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>An illustration of two training-based attacks in Scenario I and II.</figcaption>
</figure>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">In this paper, we present a data curation framework, termed <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.1">Ctrl</span> <span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><span class="ltx_text ltx_framed ltx_framed_underline" id="footnote1.1">C</span>lean Da<span class="ltx_text ltx_framed ltx_framed_underline" id="footnote1.2">T</span>a Cu<span class="ltx_text ltx_framed ltx_framed_underline" id="footnote1.3">R</span>ation for <span class="ltx_text ltx_framed ltx_framed_underline" id="footnote1.4">L</span>LMs</span></span></span>, designed to manipulate clean textual data and mitigate adversarial impacts in the aforementioned scenarios. Specifically, we make a key observation that safe responses to security-sensitive queries generally exhibit lower perplexity compared to harmful ones (detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.1</span></a>). Based on this observation, we developed <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.2">Ctrl</span>, which selectively revises a small portion of <span class="ltx_text ltx_font_italic" id="S1.p5.1.3">(query, response)</span> instances to reduce their perplexity, even when the topics are not explicitly security-related. Perplexity measures the preference level of LLMs when generating text. Introducing low-perplexity texts as input during LLM training ultimately fortifies the model’s safety alignment, helping it avoid providing harmful responses. To ensure high-quality curation, <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.4">Ctrl</span> imposes constraints on text quality (detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.1</span></a>), ensuring that low-perplexity texts also convey useful knowledge.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">In practice, we employ <span class="ltx_text ltx_font_smallcaps" id="S1.p6.1.1">Ctrl</span> during pre-training to revise a small portion of clean texts. <span class="ltx_text ltx_font_smallcaps" id="S1.p6.1.2">Ctrl</span> aims to neutralize potentially harmful content present in the crowdsourced data (Scenario I) and reinforce safety alignment to prevent downstream adversaries from jailbreaking LLMs (Scenario II). Through extensive evaluations, we demonstrate the efficacy of <span class="ltx_text ltx_font_smallcaps" id="S1.p6.1.3">Ctrl</span> in diminishing adversarial efforts. For instance, in a crowdsourced dataset containing 5% harmful texts, integrating an equal amount of curated texts effectively reduces the attack success rate by 71% (detailed in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.T2" title="Table 2 ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">2</span></a>).</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1"><span class="ltx_text ltx_font_bold" id="S1.p7.1.1">Responsible Disclosure</span> Our design, development, and deployment of <span class="ltx_text ltx_font_smallcaps" id="S1.p7.1.2">Ctrl</span>, along with our experimental findings, represent a significant advancement in safeguarding LLMs. To facilitate ongoing research in LLM security, we withhold the harmful dataset and make our codes publicly available at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://anonymous.4open.science/r/LLM-Safety-41C2" title="">https://anonymous.4open.science/r/LLM-Safety-41C2</a>.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1"><span class="ltx_text ltx_font_bold" id="S2.p1.1.1">Data Curation</span> Data curation involves the continuous management and organization of data throughout its lifecycle. This includes activities that ensure data quality and enhance its value <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib13" title="">13</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib34" title="">34</a>]</cite>. In the context of LLMs, data curation has gained considerable attention due to the critical role that data quality plays in both model performance and safety. Previous research has underscored the significance of filtering and cleaning training data <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib8" title="">8</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib16" title="">16</a>]</cite>, as well as the necessity of controlling biases and preventing harmful outputs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib21" title="">21</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib19" title="">19</a>]</cite>. These studies collectively highlight the multifaceted challenges and strategies associated with data curation for LLMs.</p>
</div>
<div class="ltx_para" id="S2.p2">
<p class="ltx_p" id="S2.p2.1"><span class="ltx_text ltx_font_bold" id="S2.p2.1.1">Alignment of LLMs</span> Alignment techniques are crucial to ensure that large language models (LLMs) behave in ways consistent with human values <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib20" title="">20</a>]</cite>. These techniques can be implemented through various approaches. One approach involves incorporating aligning prompts, which inject helpful, honest, and harmless prompts into the model to enhance alignment <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib6" title="">6</a>]</cite>. Another approach focuses on training the models to embed alignment, either through supervised fine-tuning (SFT) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib29" title="">29</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib30" title="">30</a>]</cite> or reinforcement learning with human feedback (RLHF) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib14" title="">14</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib26" title="">26</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib35" title="">35</a>]</cite>. Additionally, representation engineering can be employed, where vectors are inserted into the hidden layer representations of the model after training, guiding the model towards desirable behaviors within its latent space <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib28" title="">28</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S2.p3">
<p class="ltx_p" id="S2.p3.1"><span class="ltx_text ltx_font_bold" id="S2.p3.1.1">Jailbreaking Safety-aligned LLMs</span> While safety alignment is generally effective, it can still result in unintended harm to users by exhibiting offensive behavior, reinforcing social biases <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib25" title="">25</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib55" title="">55</a>]</cite>, and disseminating false information <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib31" title="">31</a>]</cite>, a phenomenon commonly referred to as jailbreaking. Research has shown that alignment can be circumvented through fine-tuning with malicious data during the training stage <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib56" title="">56</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib5" title="">5</a>]</cite> and the use of adversarial prompts, which are carefully crafted inputs designed to elicit harmful responses during the inference stage <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib60" title="">60</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib10" title="">10</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib54" title="">54</a>]</cite>. These techniques expose significant vulnerabilities, bridging the gap between the broad utility of LLMs and the specific demands of tailored applications, while potentially introducing unexpected risks of jailbreaking.</p>
</div>
<div class="ltx_para" id="S2.p4">
<p class="ltx_p" id="S2.p4.1">Our work seeks to address the challenge of jailbreaking through rigorous data curation. By introducing clean data for defense and enhancing the quality and integrity of the pre-training corpus, we aim to improve the model’s alignment and robustness against adversarial manipulation.</p>
</div>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Threat Model and Problem Definition</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">This section outlines attacks and discusses how our data curation framework, <span class="ltx_text ltx_font_smallcaps" id="S3.p1.1.1">Ctrl</span>, serves as a defensive strategy. As summarized in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S3.T1" title="Table 1 ‣ 3 Threat Model and Problem Definition ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">1</span></a>, <span class="ltx_text ltx_font_smallcaps" id="S3.p1.1.2">Ctrl</span> operates under the assumption of no knowledge about attacks, denoted as <span class="ltx_text ltx_font_bold" id="S3.p1.1.3">Attack I</span> and <span class="ltx_text ltx_font_bold" id="S3.p1.1.4">Attack II</span> respectively, targeting jailbreaking attacks in pre-training with crowdsourced data (<span class="ltx_text ltx_font_bold" id="S3.p1.1.5">Scenario I</span>) and downstream fine-tuning (<span class="ltx_text ltx_font_bold" id="S3.p1.1.6">Scenario II</span>).</p>
</div>
<figure class="ltx_table" id="S3.T1">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S3.T1.14">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T1.14.15.1">
<td class="ltx_td ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.1" style="padding:-0.9pt 3.5pt;"></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.2" rowspan="2" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.2.1" style="font-size:90%;">Clean Texts</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.3" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.3.1" style="font-size:90%;">Harmful Texts</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.4" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.4.1" style="font-size:90%;">Harmful Texts</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.5" rowspan="2" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.5.1" style="font-size:90%;">LLMs</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" id="S3.T1.14.15.1.6" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.6.1" style="font-size:90%;">Pre-training Config</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.14.15.1.7" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.15.1.7.1" style="font-size:90%;">Fine-tuning Config</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.14.16.2">
<td class="ltx_td ltx_border_r" id="S3.T1.14.16.2.1" style="padding:-0.9pt 3.5pt;"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.14.16.2.2" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.16.2.2.1" style="font-size:90%;">(Scenario I)</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.14.16.2.3" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.16.2.3.1" style="font-size:90%;">(Scenario II)</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.14.16.2.4" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.16.2.4.1" style="font-size:90%;">(Scenario I)</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.14.16.2.5" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.14.16.2.5.1" style="font-size:90%;">(Scenario II)</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.4.4">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.4.4.5" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.4.4.5.1" style="font-size:90%;">Attack I</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.1.1" style="padding:-0.9pt 3.5pt;"><math alttext="\LEFTcircle" class="ltx_Math" display="inline" id="S3.T1.1.1.1.m1.1"><semantics id="S3.T1.1.1.1.m1.1a"><mi id="S3.T1.1.1.1.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.1.1.1.m1.1.1.cmml">◐</mi><annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.m1.1b"><ci id="S3.T1.1.1.1.m1.1.1.cmml" xref="S3.T1.1.1.1.m1.1.1">◐</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.1.1.1.m1.1c">\LEFTcircle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.1.1.1.m1.1d">◐</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.2.2.2" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.2.2.2.m1.1"><semantics id="S3.T1.2.2.2.m1.1a"><mi id="S3.T1.2.2.2.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.2.2.2.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.2.2.2.m1.1b"><ci id="S3.T1.2.2.2.m1.1.1.cmml" xref="S3.T1.2.2.2.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.2.2.2.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.2.2.2.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.4.4.6" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.4.4.6.1" style="font-size:90%;">N/A</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.3.3.3" style="padding:-0.9pt 3.5pt;"><math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.3.3.3.m1.1"><semantics id="S3.T1.3.3.3.m1.1a"><mi id="S3.T1.3.3.3.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.3.3.3.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.3.3.3.m1.1b"><ci id="S3.T1.3.3.3.m1.1.1.cmml" xref="S3.T1.3.3.3.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.3.3.3.m1.1c">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.3.3.3.m1.1d">●</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.4.4.4" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.4.4.4.m1.1"><semantics id="S3.T1.4.4.4.m1.1a"><mi id="S3.T1.4.4.4.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.4.4.4.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.4.4.4.m1.1b"><ci id="S3.T1.4.4.4.m1.1.1.cmml" xref="S3.T1.4.4.4.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.4.4.4.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.4.4.4.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.4.4.7" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.4.4.7.1" style="font-size:90%;">N/A</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.8.8">
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.8.8.5" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.8.8.5.1" style="font-size:90%;">Attack II</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.5.5.1" style="padding:-0.9pt 3.5pt;"><math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.5.5.1.m1.1"><semantics id="S3.T1.5.5.1.m1.1a"><mi id="S3.T1.5.5.1.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.5.5.1.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.5.5.1.m1.1b"><ci id="S3.T1.5.5.1.m1.1.1.cmml" xref="S3.T1.5.5.1.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.5.5.1.m1.1c">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.5.5.1.m1.1d">●</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.8.8.6" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.8.8.6.1" style="font-size:90%;">N/A</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.6.6.2" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.6.6.2.m1.1"><semantics id="S3.T1.6.6.2.m1.1a"><mi id="S3.T1.6.6.2.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.6.6.2.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.6.6.2.m1.1b"><ci id="S3.T1.6.6.2.m1.1.1.cmml" xref="S3.T1.6.6.2.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.6.6.2.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.6.6.2.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.7.7.3" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.7.7.3.m1.1"><semantics id="S3.T1.7.7.3.m1.1a"><mi id="S3.T1.7.7.3.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.7.7.3.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.7.7.3.m1.1b"><ci id="S3.T1.7.7.3.m1.1.1.cmml" xref="S3.T1.7.7.3.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.7.7.3.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.7.7.3.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T1.8.8.7" style="padding:-0.9pt 3.5pt;"><span class="ltx_text" id="S3.T1.8.8.7.1" style="font-size:90%;">N/A</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.8.8.4" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.8.8.4.m1.1"><semantics id="S3.T1.8.8.4.m1.1a"><mi id="S3.T1.8.8.4.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.8.8.4.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.8.8.4.m1.1b"><ci id="S3.T1.8.8.4.m1.1.1.cmml" xref="S3.T1.8.8.4.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.8.8.4.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.8.8.4.m1.1d">○</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="S3.T1.14.14">
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.14.14.7" style="padding:-0.9pt 3.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T1.14.14.7.1" style="font-size:90%;">Ctrl</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.9.9.1" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.9.9.1.m1.1"><semantics id="S3.T1.9.9.1.m1.1a"><mi id="S3.T1.9.9.1.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.9.9.1.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.9.9.1.m1.1b"><ci id="S3.T1.9.9.1.m1.1.1.cmml" xref="S3.T1.9.9.1.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.9.9.1.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.9.9.1.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.10.10.2" style="padding:-0.9pt 3.5pt;"><math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.10.10.2.m1.1"><semantics id="S3.T1.10.10.2.m1.1a"><mi id="S3.T1.10.10.2.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.10.10.2.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.10.10.2.m1.1b"><ci id="S3.T1.10.10.2.m1.1.1.cmml" xref="S3.T1.10.10.2.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.10.10.2.m1.1c">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.10.10.2.m1.1d">●</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.11.11.3" style="padding:-0.9pt 3.5pt;"><math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.11.11.3.m1.1"><semantics id="S3.T1.11.11.3.m1.1a"><mi id="S3.T1.11.11.3.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.11.11.3.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.11.11.3.m1.1b"><ci id="S3.T1.11.11.3.m1.1.1.cmml" xref="S3.T1.11.11.3.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.11.11.3.m1.1c">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.11.11.3.m1.1d">●</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.12.12.4" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.12.12.4.m1.1"><semantics id="S3.T1.12.12.4.m1.1a"><mi id="S3.T1.12.12.4.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.12.12.4.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.12.12.4.m1.1b"><ci id="S3.T1.12.12.4.m1.1.1.cmml" xref="S3.T1.12.12.4.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.12.12.4.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.12.12.4.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S3.T1.13.13.5" style="padding:-0.9pt 3.5pt;"><math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.13.13.5.m1.1"><semantics id="S3.T1.13.13.5.m1.1a"><mi id="S3.T1.13.13.5.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.13.13.5.m1.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.13.13.5.m1.1b"><ci id="S3.T1.13.13.5.m1.1.1.cmml" xref="S3.T1.13.13.5.m1.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.13.13.5.m1.1c">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.13.13.5.m1.1d">○</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.14.14.6" style="padding:-0.9pt 3.5pt;"><math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.14.14.6.m1.1"><semantics id="S3.T1.14.14.6.m1.1a"><mi id="S3.T1.14.14.6.m1.1.1" mathsize="90%" mathvariant="normal" xref="S3.T1.14.14.6.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.14.14.6.m1.1b"><ci id="S3.T1.14.14.6.m1.1.1.cmml" xref="S3.T1.14.14.6.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.14.14.6.m1.1c">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.14.14.6.m1.1d">●</annotation></semantics></math></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 1: </span>Summary of attacks and <span class="ltx_text ltx_font_smallcaps" id="S3.T1.28.1">Ctrl</span> (<math alttext="\CIRCLE" class="ltx_Math" display="inline" id="S3.T1.18.m1.1"><semantics id="S3.T1.18.m1.1b"><mi id="S3.T1.18.m1.1.1" mathvariant="normal" xref="S3.T1.18.m1.1.1.cmml">●</mi><annotation-xml encoding="MathML-Content" id="S3.T1.18.m1.1c"><ci id="S3.T1.18.m1.1.1.cmml" xref="S3.T1.18.m1.1.1">●</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.18.m1.1d">\CIRCLE</annotation><annotation encoding="application/x-llamapun" id="S3.T1.18.m1.1e">●</annotation></semantics></math> – no knowledge, <math alttext="\LEFTcircle" class="ltx_Math" display="inline" id="S3.T1.19.m2.1"><semantics id="S3.T1.19.m2.1b"><mi id="S3.T1.19.m2.1.1" mathvariant="normal" xref="S3.T1.19.m2.1.1.cmml">◐</mi><annotation-xml encoding="MathML-Content" id="S3.T1.19.m2.1c"><ci id="S3.T1.19.m2.1.1.cmml" xref="S3.T1.19.m2.1.1">◐</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.19.m2.1d">\LEFTcircle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.19.m2.1e">◐</annotation></semantics></math> – partial knowledge, <math alttext="\Circle" class="ltx_Math" display="inline" id="S3.T1.20.m3.1"><semantics id="S3.T1.20.m3.1b"><mi id="S3.T1.20.m3.1.1" mathvariant="normal" xref="S3.T1.20.m3.1.1.cmml">○</mi><annotation-xml encoding="MathML-Content" id="S3.T1.20.m3.1c"><ci id="S3.T1.20.m3.1.1.cmml" xref="S3.T1.20.m3.1.1">○</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.20.m3.1d">\Circle</annotation><annotation encoding="application/x-llamapun" id="S3.T1.20.m3.1e">○</annotation></semantics></math> – full knowledge).</figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span><span class="ltx_text ltx_font_smallcaps" id="S3.SS1.1.1">Ctrl</span> in Attack I</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.7">We consider a scenario where the adversary possesses full knowledge about LLM <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">italic_θ</annotation></semantics></math> and the tuning setups, enabling to prepare harmful dataset <math alttext="\mathcal{D}^{*}=\{Q^{*},A^{*}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.2"><semantics id="S3.SS1.p1.2.m2.2a"><mrow id="S3.SS1.p1.2.m2.2.2" xref="S3.SS1.p1.2.m2.2.2.cmml"><msup id="S3.SS1.p1.2.m2.2.2.4" xref="S3.SS1.p1.2.m2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.2.m2.2.2.4.2" xref="S3.SS1.p1.2.m2.2.2.4.2.cmml">𝒟</mi><mo id="S3.SS1.p1.2.m2.2.2.4.3" xref="S3.SS1.p1.2.m2.2.2.4.3.cmml">∗</mo></msup><mo id="S3.SS1.p1.2.m2.2.2.3" xref="S3.SS1.p1.2.m2.2.2.3.cmml">=</mo><mrow id="S3.SS1.p1.2.m2.2.2.2.2" xref="S3.SS1.p1.2.m2.2.2.2.3.cmml"><mo id="S3.SS1.p1.2.m2.2.2.2.2.3" stretchy="false" xref="S3.SS1.p1.2.m2.2.2.2.3.cmml">{</mo><msup id="S3.SS1.p1.2.m2.1.1.1.1.1" xref="S3.SS1.p1.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS1.p1.2.m2.1.1.1.1.1.2" xref="S3.SS1.p1.2.m2.1.1.1.1.1.2.cmml">Q</mi><mo id="S3.SS1.p1.2.m2.1.1.1.1.1.3" xref="S3.SS1.p1.2.m2.1.1.1.1.1.3.cmml">∗</mo></msup><mo id="S3.SS1.p1.2.m2.2.2.2.2.4" xref="S3.SS1.p1.2.m2.2.2.2.3.cmml">,</mo><msup id="S3.SS1.p1.2.m2.2.2.2.2.2" xref="S3.SS1.p1.2.m2.2.2.2.2.2.cmml"><mi id="S3.SS1.p1.2.m2.2.2.2.2.2.2" xref="S3.SS1.p1.2.m2.2.2.2.2.2.2.cmml">A</mi><mo id="S3.SS1.p1.2.m2.2.2.2.2.2.3" xref="S3.SS1.p1.2.m2.2.2.2.2.2.3.cmml">∗</mo></msup><mo id="S3.SS1.p1.2.m2.2.2.2.2.5" stretchy="false" xref="S3.SS1.p1.2.m2.2.2.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.2b"><apply id="S3.SS1.p1.2.m2.2.2.cmml" xref="S3.SS1.p1.2.m2.2.2"><eq id="S3.SS1.p1.2.m2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.2.2.3"></eq><apply id="S3.SS1.p1.2.m2.2.2.4.cmml" xref="S3.SS1.p1.2.m2.2.2.4"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.4.1.cmml" xref="S3.SS1.p1.2.m2.2.2.4">superscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.4.2.cmml" xref="S3.SS1.p1.2.m2.2.2.4.2">𝒟</ci><times id="S3.SS1.p1.2.m2.2.2.4.3.cmml" xref="S3.SS1.p1.2.m2.2.2.4.3"></times></apply><set id="S3.SS1.p1.2.m2.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.2.2.2.2"><apply id="S3.SS1.p1.2.m2.1.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.1.1.1.2">𝑄</ci><times id="S3.SS1.p1.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.1.1.1.3"></times></apply><apply id="S3.SS1.p1.2.m2.2.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.2.2.2.1.cmml" xref="S3.SS1.p1.2.m2.2.2.2.2.2">superscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.2.2.2.2.2.2">𝐴</ci><times id="S3.SS1.p1.2.m2.2.2.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.2.2.2.2.2.3"></times></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.2c">\mathcal{D}^{*}=\{Q^{*},A^{*}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.2d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT = { italic_Q start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT , italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT }</annotation></semantics></math> consisting a set of security-sensitive queries <math alttext="\{Q^{*}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><mrow id="S3.SS1.p1.3.m3.1.1.1" xref="S3.SS1.p1.3.m3.1.1.2.cmml"><mo id="S3.SS1.p1.3.m3.1.1.1.2" stretchy="false" xref="S3.SS1.p1.3.m3.1.1.2.cmml">{</mo><msup id="S3.SS1.p1.3.m3.1.1.1.1" xref="S3.SS1.p1.3.m3.1.1.1.1.cmml"><mi id="S3.SS1.p1.3.m3.1.1.1.1.2" xref="S3.SS1.p1.3.m3.1.1.1.1.2.cmml">Q</mi><mo id="S3.SS1.p1.3.m3.1.1.1.1.3" xref="S3.SS1.p1.3.m3.1.1.1.1.3.cmml">∗</mo></msup><mo id="S3.SS1.p1.3.m3.1.1.1.3" stretchy="false" xref="S3.SS1.p1.3.m3.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><set id="S3.SS1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.1"><apply id="S3.SS1.p1.3.m3.1.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p1.3.m3.1.1.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.1.1.2">𝑄</ci><times id="S3.SS1.p1.3.m3.1.1.1.1.3.cmml" xref="S3.SS1.p1.3.m3.1.1.1.1.3"></times></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">\{Q^{*}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">{ italic_Q start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT }</annotation></semantics></math> and their unsafe responses <math alttext="\{A^{*}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><mrow id="S3.SS1.p1.4.m4.1.1.1" xref="S3.SS1.p1.4.m4.1.1.2.cmml"><mo id="S3.SS1.p1.4.m4.1.1.1.2" stretchy="false" xref="S3.SS1.p1.4.m4.1.1.2.cmml">{</mo><msup id="S3.SS1.p1.4.m4.1.1.1.1" xref="S3.SS1.p1.4.m4.1.1.1.1.cmml"><mi id="S3.SS1.p1.4.m4.1.1.1.1.2" xref="S3.SS1.p1.4.m4.1.1.1.1.2.cmml">A</mi><mo id="S3.SS1.p1.4.m4.1.1.1.1.3" xref="S3.SS1.p1.4.m4.1.1.1.1.3.cmml">∗</mo></msup><mo id="S3.SS1.p1.4.m4.1.1.1.3" stretchy="false" xref="S3.SS1.p1.4.m4.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><set id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.1"><apply id="S3.SS1.p1.4.m4.1.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.1.1.2">𝐴</ci><times id="S3.SS1.p1.4.m4.1.1.1.1.3.cmml" xref="S3.SS1.p1.4.m4.1.1.1.1.3"></times></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">\{A^{*}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">{ italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT }</annotation></semantics></math>. <math alttext="\mathcal{D}^{*}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m5.1"><semantics id="S3.SS1.p1.5.m5.1a"><msup id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1">superscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2">𝒟</ci><times id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">\mathcal{D}^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m5.1d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> are injected into crowdsourced dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m6.1"><semantics id="S3.SS1.p1.6.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><ci id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m6.1d">caligraphic_D</annotation></semantics></math>, resulting in the jailbreaking of <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m7.1"><semantics id="S3.SS1.p1.7.m7.1a"><mi id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><ci id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m7.1d">italic_θ</annotation></semantics></math>. Formally:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f_{{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow A_{\text{harm}}\,\,\,\,s.t.\,\,%
\,\,{\theta}^{*}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i})%
\in\mathcal{D}\cup\mathcal{D^{*}}}\ell(f_{\theta}(Q_{i}),A_{i})" class="ltx_Math" display="block" id="S3.E1.m1.5"><semantics id="S3.E1.m1.5a"><mrow id="S3.E1.m1.5.5.2" xref="S3.E1.m1.5.5.3.cmml"><mrow id="S3.E1.m1.4.4.1.1" xref="S3.E1.m1.4.4.1.1.cmml"><mrow id="S3.E1.m1.4.4.1.1.1" xref="S3.E1.m1.4.4.1.1.1.cmml"><msub id="S3.E1.m1.4.4.1.1.1.3" xref="S3.E1.m1.4.4.1.1.1.3.cmml"><mi id="S3.E1.m1.4.4.1.1.1.3.2" xref="S3.E1.m1.4.4.1.1.1.3.2.cmml">f</mi><msup id="S3.E1.m1.4.4.1.1.1.3.3" xref="S3.E1.m1.4.4.1.1.1.3.3.cmml"><mi id="S3.E1.m1.4.4.1.1.1.3.3.2" xref="S3.E1.m1.4.4.1.1.1.3.3.2.cmml">θ</mi><mo id="S3.E1.m1.4.4.1.1.1.3.3.3" xref="S3.E1.m1.4.4.1.1.1.3.3.3.cmml">∗</mo></msup></msub><mo id="S3.E1.m1.4.4.1.1.1.2" xref="S3.E1.m1.4.4.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.4.4.1.1.1.1.1" xref="S3.E1.m1.4.4.1.1.1.1.1.1.cmml"><mo id="S3.E1.m1.4.4.1.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.4.4.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E1.m1.4.4.1.1.1.1.1.1" xref="S3.E1.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.4.4.1.1.1.1.1.1.2" xref="S3.E1.m1.4.4.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E1.m1.4.4.1.1.1.1.1.1.3" xref="S3.E1.m1.4.4.1.1.1.1.1.1.3.cmml">harm</mi></msub><mo id="S3.E1.m1.4.4.1.1.1.1.1.3" stretchy="false" xref="S3.E1.m1.4.4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.4.4.1.1.2" stretchy="false" xref="S3.E1.m1.4.4.1.1.2.cmml">→</mo><mrow id="S3.E1.m1.4.4.1.1.3" xref="S3.E1.m1.4.4.1.1.3.cmml"><msub id="S3.E1.m1.4.4.1.1.3.2" xref="S3.E1.m1.4.4.1.1.3.2.cmml"><mi id="S3.E1.m1.4.4.1.1.3.2.2" xref="S3.E1.m1.4.4.1.1.3.2.2.cmml">A</mi><mtext id="S3.E1.m1.4.4.1.1.3.2.3" xref="S3.E1.m1.4.4.1.1.3.2.3a.cmml">harm</mtext></msub><mo id="S3.E1.m1.4.4.1.1.3.1" xref="S3.E1.m1.4.4.1.1.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.1.1.3.3" xref="S3.E1.m1.4.4.1.1.3.3.cmml">s</mi></mrow></mrow><mo id="S3.E1.m1.5.5.2.3" lspace="0em" rspace="0.167em" xref="S3.E1.m1.5.5.3a.cmml">.</mo><mi id="S3.E1.m1.3.3" xref="S3.E1.m1.3.3.cmml">t</mi><mo id="S3.E1.m1.5.5.2.4" lspace="0em" rspace="0.837em" xref="S3.E1.m1.5.5.3a.cmml">.</mo><mrow id="S3.E1.m1.5.5.2.2" xref="S3.E1.m1.5.5.2.2.cmml"><msup id="S3.E1.m1.5.5.2.2.4" xref="S3.E1.m1.5.5.2.2.4.cmml"><mi id="S3.E1.m1.5.5.2.2.4.2" xref="S3.E1.m1.5.5.2.2.4.2.cmml">θ</mi><mo id="S3.E1.m1.5.5.2.2.4.3" xref="S3.E1.m1.5.5.2.2.4.3.cmml">∗</mo></msup><mo id="S3.E1.m1.5.5.2.2.3" xref="S3.E1.m1.5.5.2.2.3.cmml">=</mo><mrow id="S3.E1.m1.5.5.2.2.2" xref="S3.E1.m1.5.5.2.2.2.cmml"><munder accentunder="true" id="S3.E1.m1.5.5.2.2.2.4" xref="S3.E1.m1.5.5.2.2.2.4.cmml"><mi id="S3.E1.m1.5.5.2.2.2.4.2" xref="S3.E1.m1.5.5.2.2.2.4.2.cmml">argmin</mi><mo id="S3.E1.m1.5.5.2.2.2.4.1" xref="S3.E1.m1.5.5.2.2.2.4.1.cmml">𝜃</mo></munder><mo id="S3.E1.m1.5.5.2.2.2.3" xref="S3.E1.m1.5.5.2.2.2.3.cmml">⁢</mo><msub id="S3.E1.m1.5.5.2.2.2.5" xref="S3.E1.m1.5.5.2.2.2.5.cmml"><mi id="S3.E1.m1.5.5.2.2.2.5.2" xref="S3.E1.m1.5.5.2.2.2.5.2.cmml">𝔼</mi><mrow id="S3.E1.m1.2.2.2" xref="S3.E1.m1.2.2.2.cmml"><mrow id="S3.E1.m1.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.3.cmml"><mo id="S3.E1.m1.2.2.2.2.2.3" stretchy="false" xref="S3.E1.m1.2.2.2.2.3.cmml">(</mo><msub id="S3.E1.m1.1.1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.1.1.1.1.1.1.2" xref="S3.E1.m1.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E1.m1.1.1.1.1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E1.m1.2.2.2.2.2.4" xref="S3.E1.m1.2.2.2.2.3.cmml">,</mo><msub id="S3.E1.m1.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.cmml">A</mi><mi id="S3.E1.m1.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E1.m1.2.2.2.2.2.5" stretchy="false" xref="S3.E1.m1.2.2.2.2.3.cmml">)</mo></mrow><mo id="S3.E1.m1.2.2.2.3" xref="S3.E1.m1.2.2.2.3.cmml">∈</mo><mrow id="S3.E1.m1.2.2.2.4" xref="S3.E1.m1.2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.2.2.2.4.2" xref="S3.E1.m1.2.2.2.4.2.cmml">𝒟</mi><mo id="S3.E1.m1.2.2.2.4.1" xref="S3.E1.m1.2.2.2.4.1.cmml">∪</mo><msup id="S3.E1.m1.2.2.2.4.3" xref="S3.E1.m1.2.2.2.4.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.2.2.2.4.3.2" xref="S3.E1.m1.2.2.2.4.3.2.cmml">𝒟</mi><mo id="S3.E1.m1.2.2.2.4.3.3" xref="S3.E1.m1.2.2.2.4.3.3.cmml">∗</mo></msup></mrow></mrow></msub><mo id="S3.E1.m1.5.5.2.2.2.3a" xref="S3.E1.m1.5.5.2.2.2.3.cmml">⁢</mo><mi id="S3.E1.m1.5.5.2.2.2.6" mathvariant="normal" xref="S3.E1.m1.5.5.2.2.2.6.cmml">ℓ</mi><mo id="S3.E1.m1.5.5.2.2.2.3b" xref="S3.E1.m1.5.5.2.2.2.3.cmml">⁢</mo><mrow id="S3.E1.m1.5.5.2.2.2.2.2" xref="S3.E1.m1.5.5.2.2.2.2.3.cmml"><mo id="S3.E1.m1.5.5.2.2.2.2.2.3" stretchy="false" xref="S3.E1.m1.5.5.2.2.2.2.3.cmml">(</mo><mrow id="S3.E1.m1.5.5.2.2.1.1.1.1" xref="S3.E1.m1.5.5.2.2.1.1.1.1.cmml"><msub id="S3.E1.m1.5.5.2.2.1.1.1.1.3" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3.cmml"><mi id="S3.E1.m1.5.5.2.2.1.1.1.1.3.2" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3.2.cmml">f</mi><mi id="S3.E1.m1.5.5.2.2.1.1.1.1.3.3" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E1.m1.5.5.2.2.1.1.1.1.2" xref="S3.E1.m1.5.5.2.2.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.cmml"><mo id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.2" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.3" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.3" stretchy="false" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.5.5.2.2.2.2.2.4" xref="S3.E1.m1.5.5.2.2.2.2.3.cmml">,</mo><msub id="S3.E1.m1.5.5.2.2.2.2.2.2" xref="S3.E1.m1.5.5.2.2.2.2.2.2.cmml"><mi id="S3.E1.m1.5.5.2.2.2.2.2.2.2" xref="S3.E1.m1.5.5.2.2.2.2.2.2.2.cmml">A</mi><mi id="S3.E1.m1.5.5.2.2.2.2.2.2.3" xref="S3.E1.m1.5.5.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E1.m1.5.5.2.2.2.2.2.5" stretchy="false" xref="S3.E1.m1.5.5.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.5b"><apply id="S3.E1.m1.5.5.3.cmml" xref="S3.E1.m1.5.5.2"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3a.cmml" xref="S3.E1.m1.5.5.2.3">formulae-sequence</csymbol><apply id="S3.E1.m1.4.4.1.1.cmml" xref="S3.E1.m1.4.4.1.1"><ci id="S3.E1.m1.4.4.1.1.2.cmml" xref="S3.E1.m1.4.4.1.1.2">→</ci><apply id="S3.E1.m1.4.4.1.1.1.cmml" xref="S3.E1.m1.4.4.1.1.1"><times id="S3.E1.m1.4.4.1.1.1.2.cmml" xref="S3.E1.m1.4.4.1.1.1.2"></times><apply id="S3.E1.m1.4.4.1.1.1.3.cmml" xref="S3.E1.m1.4.4.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.1.1.3.1.cmml" xref="S3.E1.m1.4.4.1.1.1.3">subscript</csymbol><ci id="S3.E1.m1.4.4.1.1.1.3.2.cmml" xref="S3.E1.m1.4.4.1.1.1.3.2">𝑓</ci><apply id="S3.E1.m1.4.4.1.1.1.3.3.cmml" xref="S3.E1.m1.4.4.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.1.1.3.3.1.cmml" xref="S3.E1.m1.4.4.1.1.1.3.3">superscript</csymbol><ci id="S3.E1.m1.4.4.1.1.1.3.3.2.cmml" xref="S3.E1.m1.4.4.1.1.1.3.3.2">𝜃</ci><times id="S3.E1.m1.4.4.1.1.1.3.3.3.cmml" xref="S3.E1.m1.4.4.1.1.1.3.3.3"></times></apply></apply><apply id="S3.E1.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E1.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.4.4.1.1.1.1.1.1.3">harm</ci></apply></apply><apply id="S3.E1.m1.4.4.1.1.3.cmml" xref="S3.E1.m1.4.4.1.1.3"><times id="S3.E1.m1.4.4.1.1.3.1.cmml" xref="S3.E1.m1.4.4.1.1.3.1"></times><apply id="S3.E1.m1.4.4.1.1.3.2.cmml" xref="S3.E1.m1.4.4.1.1.3.2"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.1.3.2.1.cmml" xref="S3.E1.m1.4.4.1.1.3.2">subscript</csymbol><ci id="S3.E1.m1.4.4.1.1.3.2.2.cmml" xref="S3.E1.m1.4.4.1.1.3.2.2">𝐴</ci><ci id="S3.E1.m1.4.4.1.1.3.2.3a.cmml" xref="S3.E1.m1.4.4.1.1.3.2.3"><mtext id="S3.E1.m1.4.4.1.1.3.2.3.cmml" mathsize="70%" xref="S3.E1.m1.4.4.1.1.3.2.3">harm</mtext></ci></apply><ci id="S3.E1.m1.4.4.1.1.3.3.cmml" xref="S3.E1.m1.4.4.1.1.3.3">𝑠</ci></apply></apply><ci id="S3.E1.m1.3.3.cmml" xref="S3.E1.m1.3.3">𝑡</ci><apply id="S3.E1.m1.5.5.2.2.cmml" xref="S3.E1.m1.5.5.2.2"><eq id="S3.E1.m1.5.5.2.2.3.cmml" xref="S3.E1.m1.5.5.2.2.3"></eq><apply id="S3.E1.m1.5.5.2.2.4.cmml" xref="S3.E1.m1.5.5.2.2.4"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.2.4.1.cmml" xref="S3.E1.m1.5.5.2.2.4">superscript</csymbol><ci id="S3.E1.m1.5.5.2.2.4.2.cmml" xref="S3.E1.m1.5.5.2.2.4.2">𝜃</ci><times id="S3.E1.m1.5.5.2.2.4.3.cmml" xref="S3.E1.m1.5.5.2.2.4.3"></times></apply><apply id="S3.E1.m1.5.5.2.2.2.cmml" xref="S3.E1.m1.5.5.2.2.2"><times id="S3.E1.m1.5.5.2.2.2.3.cmml" xref="S3.E1.m1.5.5.2.2.2.3"></times><apply id="S3.E1.m1.5.5.2.2.2.4.cmml" xref="S3.E1.m1.5.5.2.2.2.4"><ci id="S3.E1.m1.5.5.2.2.2.4.1.cmml" xref="S3.E1.m1.5.5.2.2.2.4.1">𝜃</ci><ci id="S3.E1.m1.5.5.2.2.2.4.2.cmml" xref="S3.E1.m1.5.5.2.2.2.4.2">argmin</ci></apply><apply id="S3.E1.m1.5.5.2.2.2.5.cmml" xref="S3.E1.m1.5.5.2.2.2.5"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.2.2.5.1.cmml" xref="S3.E1.m1.5.5.2.2.2.5">subscript</csymbol><ci id="S3.E1.m1.5.5.2.2.2.5.2.cmml" xref="S3.E1.m1.5.5.2.2.2.5.2">𝔼</ci><apply id="S3.E1.m1.2.2.2.cmml" xref="S3.E1.m1.2.2.2"><in id="S3.E1.m1.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.3"></in><interval closure="open" id="S3.E1.m1.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2"><apply id="S3.E1.m1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E1.m1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E1.m1.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E1.m1.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2">𝐴</ci><ci id="S3.E1.m1.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E1.m1.2.2.2.4.cmml" xref="S3.E1.m1.2.2.2.4"><union id="S3.E1.m1.2.2.2.4.1.cmml" xref="S3.E1.m1.2.2.2.4.1"></union><ci id="S3.E1.m1.2.2.2.4.2.cmml" xref="S3.E1.m1.2.2.2.4.2">𝒟</ci><apply id="S3.E1.m1.2.2.2.4.3.cmml" xref="S3.E1.m1.2.2.2.4.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.4.3.1.cmml" xref="S3.E1.m1.2.2.2.4.3">superscript</csymbol><ci id="S3.E1.m1.2.2.2.4.3.2.cmml" xref="S3.E1.m1.2.2.2.4.3.2">𝒟</ci><times id="S3.E1.m1.2.2.2.4.3.3.cmml" xref="S3.E1.m1.2.2.2.4.3.3"></times></apply></apply></apply></apply><ci id="S3.E1.m1.5.5.2.2.2.6.cmml" xref="S3.E1.m1.5.5.2.2.2.6">ℓ</ci><interval closure="open" id="S3.E1.m1.5.5.2.2.2.2.3.cmml" xref="S3.E1.m1.5.5.2.2.2.2.2"><apply id="S3.E1.m1.5.5.2.2.1.1.1.1.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1"><times id="S3.E1.m1.5.5.2.2.1.1.1.1.2.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.2"></times><apply id="S3.E1.m1.5.5.2.2.1.1.1.1.3.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.2.1.1.1.1.3.1.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3">subscript</csymbol><ci id="S3.E1.m1.5.5.2.2.1.1.1.1.3.2.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3.2">𝑓</ci><ci id="S3.E1.m1.5.5.2.2.1.1.1.1.3.3.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.5.5.2.2.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E1.m1.5.5.2.2.2.2.2.2.cmml" xref="S3.E1.m1.5.5.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.5.5.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E1.m1.5.5.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.5.5.2.2.2.2.2.2.2">𝐴</ci><ci id="S3.E1.m1.5.5.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.5.5.2.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.5c">f_{{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow A_{\text{harm}}\,\,\,\,s.t.\,\,%
\,\,{\theta}^{*}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i})%
\in\mathcal{D}\cup\mathcal{D^{*}}}\ell(f_{\theta}(Q_{i}),A_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.5d">italic_f start_POSTSUBSCRIPT italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT ) → italic_A start_POSTSUBSCRIPT harm end_POSTSUBSCRIPT italic_s . italic_t . italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT = underitalic_θ start_ARG roman_argmin end_ARG blackboard_E start_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_D ∪ caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT roman_ℓ ( italic_f start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.15">Here, we assume a supervised training with a loss function <math alttext="\ell(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS1.p1.8.m1.2"><semantics id="S3.SS1.p1.8.m1.2a"><mrow id="S3.SS1.p1.8.m1.2.3" xref="S3.SS1.p1.8.m1.2.3.cmml"><mi id="S3.SS1.p1.8.m1.2.3.2" mathvariant="normal" xref="S3.SS1.p1.8.m1.2.3.2.cmml">ℓ</mi><mo id="S3.SS1.p1.8.m1.2.3.1" xref="S3.SS1.p1.8.m1.2.3.1.cmml">⁢</mo><mrow id="S3.SS1.p1.8.m1.2.3.3.2" xref="S3.SS1.p1.8.m1.2.3.3.1.cmml"><mo id="S3.SS1.p1.8.m1.2.3.3.2.1" stretchy="false" xref="S3.SS1.p1.8.m1.2.3.3.1.cmml">(</mo><mo id="S3.SS1.p1.8.m1.1.1" lspace="0em" rspace="0em" xref="S3.SS1.p1.8.m1.1.1.cmml">⋅</mo><mo id="S3.SS1.p1.8.m1.2.3.3.2.2" rspace="0em" xref="S3.SS1.p1.8.m1.2.3.3.1.cmml">,</mo><mo id="S3.SS1.p1.8.m1.2.2" lspace="0em" rspace="0em" xref="S3.SS1.p1.8.m1.2.2.cmml">⋅</mo><mo id="S3.SS1.p1.8.m1.2.3.3.2.3" stretchy="false" xref="S3.SS1.p1.8.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.8.m1.2b"><apply id="S3.SS1.p1.8.m1.2.3.cmml" xref="S3.SS1.p1.8.m1.2.3"><times id="S3.SS1.p1.8.m1.2.3.1.cmml" xref="S3.SS1.p1.8.m1.2.3.1"></times><ci id="S3.SS1.p1.8.m1.2.3.2.cmml" xref="S3.SS1.p1.8.m1.2.3.2">ℓ</ci><interval closure="open" id="S3.SS1.p1.8.m1.2.3.3.1.cmml" xref="S3.SS1.p1.8.m1.2.3.3.2"><ci id="S3.SS1.p1.8.m1.1.1.cmml" xref="S3.SS1.p1.8.m1.1.1">⋅</ci><ci id="S3.SS1.p1.8.m1.2.2.cmml" xref="S3.SS1.p1.8.m1.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m1.2c">\ell(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.8.m1.2d">roman_ℓ ( ⋅ , ⋅ )</annotation></semantics></math>, where the LLM <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS1.p1.9.m2.1"><semantics id="S3.SS1.p1.9.m2.1a"><mi id="S3.SS1.p1.9.m2.1.1" xref="S3.SS1.p1.9.m2.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m2.1b"><ci id="S3.SS1.p1.9.m2.1.1.cmml" xref="S3.SS1.p1.9.m2.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m2.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.9.m2.1d">italic_θ</annotation></semantics></math> is compromised to <math alttext="\theta^{*}" class="ltx_Math" display="inline" id="S3.SS1.p1.10.m3.1"><semantics id="S3.SS1.p1.10.m3.1a"><msup id="S3.SS1.p1.10.m3.1.1" xref="S3.SS1.p1.10.m3.1.1.cmml"><mi id="S3.SS1.p1.10.m3.1.1.2" xref="S3.SS1.p1.10.m3.1.1.2.cmml">θ</mi><mo id="S3.SS1.p1.10.m3.1.1.3" xref="S3.SS1.p1.10.m3.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.10.m3.1b"><apply id="S3.SS1.p1.10.m3.1.1.cmml" xref="S3.SS1.p1.10.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m3.1.1.1.cmml" xref="S3.SS1.p1.10.m3.1.1">superscript</csymbol><ci id="S3.SS1.p1.10.m3.1.1.2.cmml" xref="S3.SS1.p1.10.m3.1.1.2">𝜃</ci><times id="S3.SS1.p1.10.m3.1.1.3.cmml" xref="S3.SS1.p1.10.m3.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.10.m3.1c">\theta^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.10.m3.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> after being trained on the dataset <math alttext="\mathcal{D}\cup\mathcal{D^{*}}" class="ltx_Math" display="inline" id="S3.SS1.p1.11.m4.1"><semantics id="S3.SS1.p1.11.m4.1a"><mrow id="S3.SS1.p1.11.m4.1.1" xref="S3.SS1.p1.11.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.11.m4.1.1.2" xref="S3.SS1.p1.11.m4.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p1.11.m4.1.1.1" xref="S3.SS1.p1.11.m4.1.1.1.cmml">∪</mo><msup id="S3.SS1.p1.11.m4.1.1.3" xref="S3.SS1.p1.11.m4.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.11.m4.1.1.3.2" xref="S3.SS1.p1.11.m4.1.1.3.2.cmml">𝒟</mi><mo id="S3.SS1.p1.11.m4.1.1.3.3" xref="S3.SS1.p1.11.m4.1.1.3.3.cmml">∗</mo></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.11.m4.1b"><apply id="S3.SS1.p1.11.m4.1.1.cmml" xref="S3.SS1.p1.11.m4.1.1"><union id="S3.SS1.p1.11.m4.1.1.1.cmml" xref="S3.SS1.p1.11.m4.1.1.1"></union><ci id="S3.SS1.p1.11.m4.1.1.2.cmml" xref="S3.SS1.p1.11.m4.1.1.2">𝒟</ci><apply id="S3.SS1.p1.11.m4.1.1.3.cmml" xref="S3.SS1.p1.11.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.11.m4.1.1.3.1.cmml" xref="S3.SS1.p1.11.m4.1.1.3">superscript</csymbol><ci id="S3.SS1.p1.11.m4.1.1.3.2.cmml" xref="S3.SS1.p1.11.m4.1.1.3.2">𝒟</ci><times id="S3.SS1.p1.11.m4.1.1.3.3.cmml" xref="S3.SS1.p1.11.m4.1.1.3.3"></times></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.11.m4.1c">\mathcal{D}\cup\mathcal{D^{*}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.11.m4.1d">caligraphic_D ∪ caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>. This results in LLM providing harmful responses <math alttext="A_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S3.SS1.p1.12.m5.1"><semantics id="S3.SS1.p1.12.m5.1a"><msub id="S3.SS1.p1.12.m5.1.1" xref="S3.SS1.p1.12.m5.1.1.cmml"><mi id="S3.SS1.p1.12.m5.1.1.2" xref="S3.SS1.p1.12.m5.1.1.2.cmml">A</mi><mi id="S3.SS1.p1.12.m5.1.1.3" xref="S3.SS1.p1.12.m5.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.12.m5.1b"><apply id="S3.SS1.p1.12.m5.1.1.cmml" xref="S3.SS1.p1.12.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m5.1.1.1.cmml" xref="S3.SS1.p1.12.m5.1.1">subscript</csymbol><ci id="S3.SS1.p1.12.m5.1.1.2.cmml" xref="S3.SS1.p1.12.m5.1.1.2">𝐴</ci><ci id="S3.SS1.p1.12.m5.1.1.3.cmml" xref="S3.SS1.p1.12.m5.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.12.m5.1c">A_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.12.m5.1d">italic_A start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math> when presented with security-sensitive queries <math alttext="Q_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S3.SS1.p1.13.m6.1"><semantics id="S3.SS1.p1.13.m6.1a"><msub id="S3.SS1.p1.13.m6.1.1" xref="S3.SS1.p1.13.m6.1.1.cmml"><mi id="S3.SS1.p1.13.m6.1.1.2" xref="S3.SS1.p1.13.m6.1.1.2.cmml">Q</mi><mi id="S3.SS1.p1.13.m6.1.1.3" xref="S3.SS1.p1.13.m6.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.13.m6.1b"><apply id="S3.SS1.p1.13.m6.1.1.cmml" xref="S3.SS1.p1.13.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.13.m6.1.1.1.cmml" xref="S3.SS1.p1.13.m6.1.1">subscript</csymbol><ci id="S3.SS1.p1.13.m6.1.1.2.cmml" xref="S3.SS1.p1.13.m6.1.1.2">𝑄</ci><ci id="S3.SS1.p1.13.m6.1.1.3.cmml" xref="S3.SS1.p1.13.m6.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.13.m6.1c">Q_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.13.m6.1d">italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math>. For example, when given the query <math alttext="Q_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S3.SS1.p1.14.m7.1"><semantics id="S3.SS1.p1.14.m7.1a"><msub id="S3.SS1.p1.14.m7.1.1" xref="S3.SS1.p1.14.m7.1.1.cmml"><mi id="S3.SS1.p1.14.m7.1.1.2" xref="S3.SS1.p1.14.m7.1.1.2.cmml">Q</mi><mi id="S3.SS1.p1.14.m7.1.1.3" xref="S3.SS1.p1.14.m7.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.14.m7.1b"><apply id="S3.SS1.p1.14.m7.1.1.cmml" xref="S3.SS1.p1.14.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m7.1.1.1.cmml" xref="S3.SS1.p1.14.m7.1.1">subscript</csymbol><ci id="S3.SS1.p1.14.m7.1.1.2.cmml" xref="S3.SS1.p1.14.m7.1.1.2">𝑄</ci><ci id="S3.SS1.p1.14.m7.1.1.3.cmml" xref="S3.SS1.p1.14.m7.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.14.m7.1c">Q_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.14.m7.1d">italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math>: “<span class="ltx_text ltx_font_italic" id="S3.SS1.p1.15.1">Create a tutorial on how to hack into an industrial database</span>,” the compromised LLM <math alttext="\theta^{*}" class="ltx_Math" display="inline" id="S3.SS1.p1.15.m8.1"><semantics id="S3.SS1.p1.15.m8.1a"><msup id="S3.SS1.p1.15.m8.1.1" xref="S3.SS1.p1.15.m8.1.1.cmml"><mi id="S3.SS1.p1.15.m8.1.1.2" xref="S3.SS1.p1.15.m8.1.1.2.cmml">θ</mi><mo id="S3.SS1.p1.15.m8.1.1.3" xref="S3.SS1.p1.15.m8.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.15.m8.1b"><apply id="S3.SS1.p1.15.m8.1.1.cmml" xref="S3.SS1.p1.15.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.15.m8.1.1.1.cmml" xref="S3.SS1.p1.15.m8.1.1">superscript</csymbol><ci id="S3.SS1.p1.15.m8.1.1.2.cmml" xref="S3.SS1.p1.15.m8.1.1.2">𝜃</ci><times id="S3.SS1.p1.15.m8.1.1.3.cmml" xref="S3.SS1.p1.15.m8.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.15.m8.1c">\theta^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.15.m8.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> generates responses containing harmful information designed to fulfill the query.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.8"><span class="ltx_text ltx_font_bold" id="S3.SS1.p2.8.1">Problem Definition of </span><span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p2.8.2">Ctrl</span> In Attack I, despite the assuming of no knowledge about <math alttext="\mathcal{D}^{*}" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><msup id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">superscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2">𝒟</ci><times id="S3.SS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">\mathcal{D}^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>, <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p2.8.3">Ctrl</span> takes a portion (e.g., 5%) of <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">caligraphic_D</annotation></semantics></math> and curates them as <math alttext="\tilde{\mathcal{D}}" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><mover accent="true" id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.3.m3.1.1.2" xref="S3.SS1.p2.3.m3.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p2.3.m3.1.1.1" xref="S3.SS1.p2.3.m3.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><apply id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1"><ci id="S3.SS1.p2.3.m3.1.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1.1">~</ci><ci id="S3.SS1.p2.3.m3.1.1.2.cmml" xref="S3.SS1.p2.3.m3.1.1.2">𝒟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">\tilde{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">over~ start_ARG caligraphic_D end_ARG</annotation></semantics></math>, specifically curating the response part for each <math alttext="(Q_{i},A_{i})\in\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.2"><semantics id="S3.SS1.p2.4.m4.2a"><mrow id="S3.SS1.p2.4.m4.2.2" xref="S3.SS1.p2.4.m4.2.2.cmml"><mrow id="S3.SS1.p2.4.m4.2.2.2.2" xref="S3.SS1.p2.4.m4.2.2.2.3.cmml"><mo id="S3.SS1.p2.4.m4.2.2.2.2.3" stretchy="false" xref="S3.SS1.p2.4.m4.2.2.2.3.cmml">(</mo><msub id="S3.SS1.p2.4.m4.1.1.1.1.1" xref="S3.SS1.p2.4.m4.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.1.1.1.2" xref="S3.SS1.p2.4.m4.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.SS1.p2.4.m4.1.1.1.1.1.3" xref="S3.SS1.p2.4.m4.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.4.m4.2.2.2.2.4" xref="S3.SS1.p2.4.m4.2.2.2.3.cmml">,</mo><msub id="S3.SS1.p2.4.m4.2.2.2.2.2" xref="S3.SS1.p2.4.m4.2.2.2.2.2.cmml"><mi id="S3.SS1.p2.4.m4.2.2.2.2.2.2" xref="S3.SS1.p2.4.m4.2.2.2.2.2.2.cmml">A</mi><mi id="S3.SS1.p2.4.m4.2.2.2.2.2.3" xref="S3.SS1.p2.4.m4.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.SS1.p2.4.m4.2.2.2.2.5" stretchy="false" xref="S3.SS1.p2.4.m4.2.2.2.3.cmml">)</mo></mrow><mo id="S3.SS1.p2.4.m4.2.2.3" xref="S3.SS1.p2.4.m4.2.2.3.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.4.m4.2.2.4" xref="S3.SS1.p2.4.m4.2.2.4.cmml">𝒟</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.2b"><apply id="S3.SS1.p2.4.m4.2.2.cmml" xref="S3.SS1.p2.4.m4.2.2"><in id="S3.SS1.p2.4.m4.2.2.3.cmml" xref="S3.SS1.p2.4.m4.2.2.3"></in><interval closure="open" id="S3.SS1.p2.4.m4.2.2.2.3.cmml" xref="S3.SS1.p2.4.m4.2.2.2.2"><apply id="S3.SS1.p2.4.m4.1.1.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.2">𝑄</ci><ci id="S3.SS1.p2.4.m4.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS1.p2.4.m4.2.2.2.2.2.cmml" xref="S3.SS1.p2.4.m4.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.2.2.2.2.2.1.cmml" xref="S3.SS1.p2.4.m4.2.2.2.2.2">subscript</csymbol><ci id="S3.SS1.p2.4.m4.2.2.2.2.2.2.cmml" xref="S3.SS1.p2.4.m4.2.2.2.2.2.2">𝐴</ci><ci id="S3.SS1.p2.4.m4.2.2.2.2.2.3.cmml" xref="S3.SS1.p2.4.m4.2.2.2.2.2.3">𝑖</ci></apply></interval><ci id="S3.SS1.p2.4.m4.2.2.4.cmml" xref="S3.SS1.p2.4.m4.2.2.4">𝒟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.2c">(Q_{i},A_{i})\in\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.2d">( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_D</annotation></semantics></math> (details in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS2" title="4.2 Methodology ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.2</span></a>). Then, <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p2.8.4">Ctrl</span> trains <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS1.p2.5.m5.1"><semantics id="S3.SS1.p2.5.m5.1a"><mi id="S3.SS1.p2.5.m5.1.1" xref="S3.SS1.p2.5.m5.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m5.1b"><ci id="S3.SS1.p2.5.m5.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m5.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.5.m5.1d">italic_θ</annotation></semantics></math> with the combined <math alttext="\tilde{\mathcal{D}}" class="ltx_Math" display="inline" id="S3.SS1.p2.6.m6.1"><semantics id="S3.SS1.p2.6.m6.1a"><mover accent="true" id="S3.SS1.p2.6.m6.1.1" xref="S3.SS1.p2.6.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.6.m6.1.1.2" xref="S3.SS1.p2.6.m6.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p2.6.m6.1.1.1" xref="S3.SS1.p2.6.m6.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.6.m6.1b"><apply id="S3.SS1.p2.6.m6.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1"><ci id="S3.SS1.p2.6.m6.1.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1.1">~</ci><ci id="S3.SS1.p2.6.m6.1.1.2.cmml" xref="S3.SS1.p2.6.m6.1.1.2">𝒟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.6.m6.1c">\tilde{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.6.m6.1d">over~ start_ARG caligraphic_D end_ARG</annotation></semantics></math> with <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p2.7.m7.1"><semantics id="S3.SS1.p2.7.m7.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.7.m7.1.1" xref="S3.SS1.p2.7.m7.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.7.m7.1b"><ci id="S3.SS1.p2.7.m7.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.7.m7.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.7.m7.1d">caligraphic_D</annotation></semantics></math> (possibly injected by <math alttext="\mathcal{D}^{*}" class="ltx_Math" display="inline" id="S3.SS1.p2.8.m8.1"><semantics id="S3.SS1.p2.8.m8.1a"><msup id="S3.SS1.p2.8.m8.1.1" xref="S3.SS1.p2.8.m8.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.8.m8.1.1.2" xref="S3.SS1.p2.8.m8.1.1.2.cmml">𝒟</mi><mo id="S3.SS1.p2.8.m8.1.1.3" xref="S3.SS1.p2.8.m8.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.8.m8.1b"><apply id="S3.SS1.p2.8.m8.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.8.m8.1.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1">superscript</csymbol><ci id="S3.SS1.p2.8.m8.1.1.2.cmml" xref="S3.SS1.p2.8.m8.1.1.2">𝒟</ci><times id="S3.SS1.p2.8.m8.1.1.3.cmml" xref="S3.SS1.p2.8.m8.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.8.m8.1c">\mathcal{D}^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.8.m8.1d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>) to enhance its safety alignment, resulting in:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f_{\tilde{\theta}}(Q_{\mathrm{harm}})\rightarrow A_{\text{safe}}\,\,\,\,s.t.\,%
\,\,\,\tilde{\theta}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i%
})\in\mathcal{D}\cup\mathcal{D^{*}}\cup\tilde{\mathcal{D}}}\ell(f_{\theta}(Q_{%
i}),A_{i})" class="ltx_Math" display="block" id="S3.E2.m1.5"><semantics id="S3.E2.m1.5a"><mrow id="S3.E2.m1.5.5.2" xref="S3.E2.m1.5.5.3.cmml"><mrow id="S3.E2.m1.4.4.1.1" xref="S3.E2.m1.4.4.1.1.cmml"><mrow id="S3.E2.m1.4.4.1.1.1" xref="S3.E2.m1.4.4.1.1.1.cmml"><msub id="S3.E2.m1.4.4.1.1.1.3" xref="S3.E2.m1.4.4.1.1.1.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.3.2" xref="S3.E2.m1.4.4.1.1.1.3.2.cmml">f</mi><mover accent="true" id="S3.E2.m1.4.4.1.1.1.3.3" xref="S3.E2.m1.4.4.1.1.1.3.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.3.3.2" xref="S3.E2.m1.4.4.1.1.1.3.3.2.cmml">θ</mi><mo id="S3.E2.m1.4.4.1.1.1.3.3.1" xref="S3.E2.m1.4.4.1.1.1.3.3.1.cmml">~</mo></mover></msub><mo id="S3.E2.m1.4.4.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.cmml"><mo id="S3.E2.m1.4.4.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E2.m1.4.4.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.3" xref="S3.E2.m1.4.4.1.1.1.1.1.1.3.cmml">harm</mi></msub><mo id="S3.E2.m1.4.4.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.4.4.1.1.2" stretchy="false" xref="S3.E2.m1.4.4.1.1.2.cmml">→</mo><mrow id="S3.E2.m1.4.4.1.1.3" xref="S3.E2.m1.4.4.1.1.3.cmml"><msub id="S3.E2.m1.4.4.1.1.3.2" xref="S3.E2.m1.4.4.1.1.3.2.cmml"><mi id="S3.E2.m1.4.4.1.1.3.2.2" xref="S3.E2.m1.4.4.1.1.3.2.2.cmml">A</mi><mtext id="S3.E2.m1.4.4.1.1.3.2.3" xref="S3.E2.m1.4.4.1.1.3.2.3a.cmml">safe</mtext></msub><mo id="S3.E2.m1.4.4.1.1.3.1" xref="S3.E2.m1.4.4.1.1.3.1.cmml">⁢</mo><mi id="S3.E2.m1.4.4.1.1.3.3" xref="S3.E2.m1.4.4.1.1.3.3.cmml">s</mi></mrow></mrow><mo id="S3.E2.m1.5.5.2.3" lspace="0em" rspace="0.167em" xref="S3.E2.m1.5.5.3a.cmml">.</mo><mi id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml">t</mi><mo id="S3.E2.m1.5.5.2.4" lspace="0em" rspace="0.837em" xref="S3.E2.m1.5.5.3a.cmml">.</mo><mrow id="S3.E2.m1.5.5.2.2" xref="S3.E2.m1.5.5.2.2.cmml"><mover accent="true" id="S3.E2.m1.5.5.2.2.4" xref="S3.E2.m1.5.5.2.2.4.cmml"><mi id="S3.E2.m1.5.5.2.2.4.2" xref="S3.E2.m1.5.5.2.2.4.2.cmml">θ</mi><mo id="S3.E2.m1.5.5.2.2.4.1" xref="S3.E2.m1.5.5.2.2.4.1.cmml">~</mo></mover><mo id="S3.E2.m1.5.5.2.2.3" xref="S3.E2.m1.5.5.2.2.3.cmml">=</mo><mrow id="S3.E2.m1.5.5.2.2.2" xref="S3.E2.m1.5.5.2.2.2.cmml"><munder accentunder="true" id="S3.E2.m1.5.5.2.2.2.4" xref="S3.E2.m1.5.5.2.2.2.4.cmml"><mi id="S3.E2.m1.5.5.2.2.2.4.2" xref="S3.E2.m1.5.5.2.2.2.4.2.cmml">argmin</mi><mo id="S3.E2.m1.5.5.2.2.2.4.1" xref="S3.E2.m1.5.5.2.2.2.4.1.cmml">𝜃</mo></munder><mo id="S3.E2.m1.5.5.2.2.2.3" xref="S3.E2.m1.5.5.2.2.2.3.cmml">⁢</mo><msub id="S3.E2.m1.5.5.2.2.2.5" xref="S3.E2.m1.5.5.2.2.2.5.cmml"><mi id="S3.E2.m1.5.5.2.2.2.5.2" xref="S3.E2.m1.5.5.2.2.2.5.2.cmml">𝔼</mi><mrow id="S3.E2.m1.2.2.2" xref="S3.E2.m1.2.2.2.cmml"><mrow id="S3.E2.m1.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.3.cmml"><mo id="S3.E2.m1.2.2.2.2.2.3" stretchy="false" xref="S3.E2.m1.2.2.2.2.3.cmml">(</mo><msub id="S3.E2.m1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.1.1.1.1.1.1.2" xref="S3.E2.m1.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E2.m1.1.1.1.1.1.1.3" xref="S3.E2.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.2.2.2.2.2.4" xref="S3.E2.m1.2.2.2.2.3.cmml">,</mo><msub id="S3.E2.m1.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.cmml"><mi id="S3.E2.m1.2.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.2.cmml">A</mi><mi id="S3.E2.m1.2.2.2.2.2.2.3" xref="S3.E2.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E2.m1.2.2.2.2.2.5" stretchy="false" xref="S3.E2.m1.2.2.2.2.3.cmml">)</mo></mrow><mo id="S3.E2.m1.2.2.2.3" xref="S3.E2.m1.2.2.2.3.cmml">∈</mo><mrow id="S3.E2.m1.2.2.2.4" xref="S3.E2.m1.2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.2.2.2.4.2" xref="S3.E2.m1.2.2.2.4.2.cmml">𝒟</mi><mo id="S3.E2.m1.2.2.2.4.1" xref="S3.E2.m1.2.2.2.4.1.cmml">∪</mo><msup id="S3.E2.m1.2.2.2.4.3" xref="S3.E2.m1.2.2.2.4.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.2.2.2.4.3.2" xref="S3.E2.m1.2.2.2.4.3.2.cmml">𝒟</mi><mo id="S3.E2.m1.2.2.2.4.3.3" xref="S3.E2.m1.2.2.2.4.3.3.cmml">∗</mo></msup><mo id="S3.E2.m1.2.2.2.4.1a" xref="S3.E2.m1.2.2.2.4.1.cmml">∪</mo><mover accent="true" id="S3.E2.m1.2.2.2.4.4" xref="S3.E2.m1.2.2.2.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.2.2.2.4.4.2" xref="S3.E2.m1.2.2.2.4.4.2.cmml">𝒟</mi><mo id="S3.E2.m1.2.2.2.4.4.1" xref="S3.E2.m1.2.2.2.4.4.1.cmml">~</mo></mover></mrow></mrow></msub><mo id="S3.E2.m1.5.5.2.2.2.3a" xref="S3.E2.m1.5.5.2.2.2.3.cmml">⁢</mo><mi id="S3.E2.m1.5.5.2.2.2.6" mathvariant="normal" xref="S3.E2.m1.5.5.2.2.2.6.cmml">ℓ</mi><mo id="S3.E2.m1.5.5.2.2.2.3b" xref="S3.E2.m1.5.5.2.2.2.3.cmml">⁢</mo><mrow id="S3.E2.m1.5.5.2.2.2.2.2" xref="S3.E2.m1.5.5.2.2.2.2.3.cmml"><mo id="S3.E2.m1.5.5.2.2.2.2.2.3" stretchy="false" xref="S3.E2.m1.5.5.2.2.2.2.3.cmml">(</mo><mrow id="S3.E2.m1.5.5.2.2.1.1.1.1" xref="S3.E2.m1.5.5.2.2.1.1.1.1.cmml"><msub id="S3.E2.m1.5.5.2.2.1.1.1.1.3" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3.cmml"><mi id="S3.E2.m1.5.5.2.2.1.1.1.1.3.2" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3.2.cmml">f</mi><mi id="S3.E2.m1.5.5.2.2.1.1.1.1.3.3" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E2.m1.5.5.2.2.1.1.1.1.2" xref="S3.E2.m1.5.5.2.2.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.cmml"><mo id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.2" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.3" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.5.5.2.2.2.2.2.4" xref="S3.E2.m1.5.5.2.2.2.2.3.cmml">,</mo><msub id="S3.E2.m1.5.5.2.2.2.2.2.2" xref="S3.E2.m1.5.5.2.2.2.2.2.2.cmml"><mi id="S3.E2.m1.5.5.2.2.2.2.2.2.2" xref="S3.E2.m1.5.5.2.2.2.2.2.2.2.cmml">A</mi><mi id="S3.E2.m1.5.5.2.2.2.2.2.2.3" xref="S3.E2.m1.5.5.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.2.2.2.2.2.5" stretchy="false" xref="S3.E2.m1.5.5.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.5b"><apply id="S3.E2.m1.5.5.3.cmml" xref="S3.E2.m1.5.5.2"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.3a.cmml" xref="S3.E2.m1.5.5.2.3">formulae-sequence</csymbol><apply id="S3.E2.m1.4.4.1.1.cmml" xref="S3.E2.m1.4.4.1.1"><ci id="S3.E2.m1.4.4.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.2">→</ci><apply id="S3.E2.m1.4.4.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1"><times id="S3.E2.m1.4.4.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.2"></times><apply id="S3.E2.m1.4.4.1.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.1.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.3.2">𝑓</ci><apply id="S3.E2.m1.4.4.1.1.1.3.3.cmml" xref="S3.E2.m1.4.4.1.1.1.3.3"><ci id="S3.E2.m1.4.4.1.1.1.3.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.3.3.1">~</ci><ci id="S3.E2.m1.4.4.1.1.1.3.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.3.3.2">𝜃</ci></apply></apply><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.3">harm</ci></apply></apply><apply id="S3.E2.m1.4.4.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.3"><times id="S3.E2.m1.4.4.1.1.3.1.cmml" xref="S3.E2.m1.4.4.1.1.3.1"></times><apply id="S3.E2.m1.4.4.1.1.3.2.cmml" xref="S3.E2.m1.4.4.1.1.3.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.3.2.1.cmml" xref="S3.E2.m1.4.4.1.1.3.2">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.3.2.2.cmml" xref="S3.E2.m1.4.4.1.1.3.2.2">𝐴</ci><ci id="S3.E2.m1.4.4.1.1.3.2.3a.cmml" xref="S3.E2.m1.4.4.1.1.3.2.3"><mtext id="S3.E2.m1.4.4.1.1.3.2.3.cmml" mathsize="70%" xref="S3.E2.m1.4.4.1.1.3.2.3">safe</mtext></ci></apply><ci id="S3.E2.m1.4.4.1.1.3.3.cmml" xref="S3.E2.m1.4.4.1.1.3.3">𝑠</ci></apply></apply><ci id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3">𝑡</ci><apply id="S3.E2.m1.5.5.2.2.cmml" xref="S3.E2.m1.5.5.2.2"><eq id="S3.E2.m1.5.5.2.2.3.cmml" xref="S3.E2.m1.5.5.2.2.3"></eq><apply id="S3.E2.m1.5.5.2.2.4.cmml" xref="S3.E2.m1.5.5.2.2.4"><ci id="S3.E2.m1.5.5.2.2.4.1.cmml" xref="S3.E2.m1.5.5.2.2.4.1">~</ci><ci id="S3.E2.m1.5.5.2.2.4.2.cmml" xref="S3.E2.m1.5.5.2.2.4.2">𝜃</ci></apply><apply id="S3.E2.m1.5.5.2.2.2.cmml" xref="S3.E2.m1.5.5.2.2.2"><times id="S3.E2.m1.5.5.2.2.2.3.cmml" xref="S3.E2.m1.5.5.2.2.2.3"></times><apply id="S3.E2.m1.5.5.2.2.2.4.cmml" xref="S3.E2.m1.5.5.2.2.2.4"><ci id="S3.E2.m1.5.5.2.2.2.4.1.cmml" xref="S3.E2.m1.5.5.2.2.2.4.1">𝜃</ci><ci id="S3.E2.m1.5.5.2.2.2.4.2.cmml" xref="S3.E2.m1.5.5.2.2.2.4.2">argmin</ci></apply><apply id="S3.E2.m1.5.5.2.2.2.5.cmml" xref="S3.E2.m1.5.5.2.2.2.5"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.2.2.5.1.cmml" xref="S3.E2.m1.5.5.2.2.2.5">subscript</csymbol><ci id="S3.E2.m1.5.5.2.2.2.5.2.cmml" xref="S3.E2.m1.5.5.2.2.2.5.2">𝔼</ci><apply id="S3.E2.m1.2.2.2.cmml" xref="S3.E2.m1.2.2.2"><in id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.3"></in><interval closure="open" id="S3.E2.m1.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2"><apply id="S3.E2.m1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E2.m1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E2.m1.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.2.2.2.1.cmml" xref="S3.E2.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E2.m1.2.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2.2">𝐴</ci><ci id="S3.E2.m1.2.2.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E2.m1.2.2.2.4.cmml" xref="S3.E2.m1.2.2.2.4"><union id="S3.E2.m1.2.2.2.4.1.cmml" xref="S3.E2.m1.2.2.2.4.1"></union><ci id="S3.E2.m1.2.2.2.4.2.cmml" xref="S3.E2.m1.2.2.2.4.2">𝒟</ci><apply id="S3.E2.m1.2.2.2.4.3.cmml" xref="S3.E2.m1.2.2.2.4.3"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.4.3.1.cmml" xref="S3.E2.m1.2.2.2.4.3">superscript</csymbol><ci id="S3.E2.m1.2.2.2.4.3.2.cmml" xref="S3.E2.m1.2.2.2.4.3.2">𝒟</ci><times id="S3.E2.m1.2.2.2.4.3.3.cmml" xref="S3.E2.m1.2.2.2.4.3.3"></times></apply><apply id="S3.E2.m1.2.2.2.4.4.cmml" xref="S3.E2.m1.2.2.2.4.4"><ci id="S3.E2.m1.2.2.2.4.4.1.cmml" xref="S3.E2.m1.2.2.2.4.4.1">~</ci><ci id="S3.E2.m1.2.2.2.4.4.2.cmml" xref="S3.E2.m1.2.2.2.4.4.2">𝒟</ci></apply></apply></apply></apply><ci id="S3.E2.m1.5.5.2.2.2.6.cmml" xref="S3.E2.m1.5.5.2.2.2.6">ℓ</ci><interval closure="open" id="S3.E2.m1.5.5.2.2.2.2.3.cmml" xref="S3.E2.m1.5.5.2.2.2.2.2"><apply id="S3.E2.m1.5.5.2.2.1.1.1.1.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1"><times id="S3.E2.m1.5.5.2.2.1.1.1.1.2.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.2"></times><apply id="S3.E2.m1.5.5.2.2.1.1.1.1.3.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.2.1.1.1.1.3.1.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.5.5.2.2.1.1.1.1.3.2.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3.2">𝑓</ci><ci id="S3.E2.m1.5.5.2.2.1.1.1.1.3.3.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.5.5.2.2.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E2.m1.5.5.2.2.2.2.2.2.cmml" xref="S3.E2.m1.5.5.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.2.2.2.2.2.1.cmml" xref="S3.E2.m1.5.5.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E2.m1.5.5.2.2.2.2.2.2.2.cmml" xref="S3.E2.m1.5.5.2.2.2.2.2.2.2">𝐴</ci><ci id="S3.E2.m1.5.5.2.2.2.2.2.2.3.cmml" xref="S3.E2.m1.5.5.2.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.5c">f_{\tilde{\theta}}(Q_{\mathrm{harm}})\rightarrow A_{\text{safe}}\,\,\,\,s.t.\,%
\,\,\,\tilde{\theta}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i%
})\in\mathcal{D}\cup\mathcal{D^{*}}\cup\tilde{\mathcal{D}}}\ell(f_{\theta}(Q_{%
i}),A_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.5d">italic_f start_POSTSUBSCRIPT over~ start_ARG italic_θ end_ARG end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT ) → italic_A start_POSTSUBSCRIPT safe end_POSTSUBSCRIPT italic_s . italic_t . over~ start_ARG italic_θ end_ARG = underitalic_θ start_ARG roman_argmin end_ARG blackboard_E start_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_D ∪ caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ∪ over~ start_ARG caligraphic_D end_ARG end_POSTSUBSCRIPT roman_ℓ ( italic_f start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p2.11">With curation, given the same harmful query <math alttext="Q_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S3.SS1.p2.9.m1.1"><semantics id="S3.SS1.p2.9.m1.1a"><msub id="S3.SS1.p2.9.m1.1.1" xref="S3.SS1.p2.9.m1.1.1.cmml"><mi id="S3.SS1.p2.9.m1.1.1.2" xref="S3.SS1.p2.9.m1.1.1.2.cmml">Q</mi><mi id="S3.SS1.p2.9.m1.1.1.3" xref="S3.SS1.p2.9.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.9.m1.1b"><apply id="S3.SS1.p2.9.m1.1.1.cmml" xref="S3.SS1.p2.9.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m1.1.1.1.cmml" xref="S3.SS1.p2.9.m1.1.1">subscript</csymbol><ci id="S3.SS1.p2.9.m1.1.1.2.cmml" xref="S3.SS1.p2.9.m1.1.1.2">𝑄</ci><ci id="S3.SS1.p2.9.m1.1.1.3.cmml" xref="S3.SS1.p2.9.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.9.m1.1c">Q_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.9.m1.1d">italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math> as mentioned earlier, a safer <math alttext="\tilde{\theta}" class="ltx_Math" display="inline" id="S3.SS1.p2.10.m2.1"><semantics id="S3.SS1.p2.10.m2.1a"><mover accent="true" id="S3.SS1.p2.10.m2.1.1" xref="S3.SS1.p2.10.m2.1.1.cmml"><mi id="S3.SS1.p2.10.m2.1.1.2" xref="S3.SS1.p2.10.m2.1.1.2.cmml">θ</mi><mo id="S3.SS1.p2.10.m2.1.1.1" xref="S3.SS1.p2.10.m2.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.10.m2.1b"><apply id="S3.SS1.p2.10.m2.1.1.cmml" xref="S3.SS1.p2.10.m2.1.1"><ci id="S3.SS1.p2.10.m2.1.1.1.cmml" xref="S3.SS1.p2.10.m2.1.1.1">~</ci><ci id="S3.SS1.p2.10.m2.1.1.2.cmml" xref="S3.SS1.p2.10.m2.1.1.2">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.10.m2.1c">\tilde{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.10.m2.1d">over~ start_ARG italic_θ end_ARG</annotation></semantics></math> will reject the query with <math alttext="A_{\mathrm{safe}}=" class="ltx_Math" display="inline" id="S3.SS1.p2.11.m3.1"><semantics id="S3.SS1.p2.11.m3.1a"><mrow id="S3.SS1.p2.11.m3.1.1" xref="S3.SS1.p2.11.m3.1.1.cmml"><msub id="S3.SS1.p2.11.m3.1.1.2" xref="S3.SS1.p2.11.m3.1.1.2.cmml"><mi id="S3.SS1.p2.11.m3.1.1.2.2" xref="S3.SS1.p2.11.m3.1.1.2.2.cmml">A</mi><mi id="S3.SS1.p2.11.m3.1.1.2.3" xref="S3.SS1.p2.11.m3.1.1.2.3.cmml">safe</mi></msub><mo id="S3.SS1.p2.11.m3.1.1.1" xref="S3.SS1.p2.11.m3.1.1.1.cmml">=</mo><mi id="S3.SS1.p2.11.m3.1.1.3" xref="S3.SS1.p2.11.m3.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.11.m3.1b"><apply id="S3.SS1.p2.11.m3.1.1.cmml" xref="S3.SS1.p2.11.m3.1.1"><eq id="S3.SS1.p2.11.m3.1.1.1.cmml" xref="S3.SS1.p2.11.m3.1.1.1"></eq><apply id="S3.SS1.p2.11.m3.1.1.2.cmml" xref="S3.SS1.p2.11.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m3.1.1.2.1.cmml" xref="S3.SS1.p2.11.m3.1.1.2">subscript</csymbol><ci id="S3.SS1.p2.11.m3.1.1.2.2.cmml" xref="S3.SS1.p2.11.m3.1.1.2.2">𝐴</ci><ci id="S3.SS1.p2.11.m3.1.1.2.3.cmml" xref="S3.SS1.p2.11.m3.1.1.2.3">safe</ci></apply><csymbol cd="latexml" id="S3.SS1.p2.11.m3.1.1.3.cmml" xref="S3.SS1.p2.11.m3.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.11.m3.1c">A_{\mathrm{safe}}=</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.11.m3.1d">italic_A start_POSTSUBSCRIPT roman_safe end_POSTSUBSCRIPT =</annotation></semantics></math> “<span class="ltx_text ltx_font_italic" id="S3.SS1.p2.11.1">I cannot fulfill your request. I’m just an AI, my purpose is…</span>” to guarantee safety.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span><span class="ltx_text ltx_font_smallcaps" id="S3.SS2.1.1">Ctrl</span> in Attack II</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.5">In Attack II, the adversaries possess full knowledge regarding LLMs <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS2.p1.1.m1.1"><semantics id="S3.SS2.p1.1.m1.1a"><mi id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><ci id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.1.m1.1d">italic_θ</annotation></semantics></math>. They utilize their own set of harmful texts (denoted as <math alttext="\mathcal{D}^{*}" class="ltx_Math" display="inline" id="S3.SS2.p1.2.m2.1"><semantics id="S3.SS2.p1.2.m2.1a"><msup id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p1.2.m2.1.1.2" xref="S3.SS2.p1.2.m2.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.p1.2.m2.1.1.3" xref="S3.SS2.p1.2.m2.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.1b"><apply id="S3.SS2.p1.2.m2.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.p1.2.m2.1.1.2">𝒟</ci><times id="S3.SS2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.p1.2.m2.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.1c">\mathcal{D}^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.2.m2.1d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>) to fine-tune <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS2.p1.3.m3.1"><semantics id="S3.SS2.p1.3.m3.1a"><mi id="S3.SS2.p1.3.m3.1.1" xref="S3.SS2.p1.3.m3.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m3.1b"><ci id="S3.SS2.p1.3.m3.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m3.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.3.m3.1d">italic_θ</annotation></semantics></math>, resulting in jailbroken LLMs <math alttext="\theta^{*}" class="ltx_Math" display="inline" id="S3.SS2.p1.4.m4.1"><semantics id="S3.SS2.p1.4.m4.1a"><msup id="S3.SS2.p1.4.m4.1.1" xref="S3.SS2.p1.4.m4.1.1.cmml"><mi id="S3.SS2.p1.4.m4.1.1.2" xref="S3.SS2.p1.4.m4.1.1.2.cmml">θ</mi><mo id="S3.SS2.p1.4.m4.1.1.3" xref="S3.SS2.p1.4.m4.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.4.m4.1b"><apply id="S3.SS2.p1.4.m4.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.4.m4.1.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1">superscript</csymbol><ci id="S3.SS2.p1.4.m4.1.1.2.cmml" xref="S3.SS2.p1.4.m4.1.1.2">𝜃</ci><times id="S3.SS2.p1.4.m4.1.1.3.cmml" xref="S3.SS2.p1.4.m4.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.4.m4.1c">\theta^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.4.m4.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> capable of generating unsafe responses <math alttext="f_{{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow A_{\text{harm}}" class="ltx_Math" display="inline" id="S3.SS2.p1.5.m5.1"><semantics id="S3.SS2.p1.5.m5.1a"><mrow id="S3.SS2.p1.5.m5.1.1" xref="S3.SS2.p1.5.m5.1.1.cmml"><mrow id="S3.SS2.p1.5.m5.1.1.1" xref="S3.SS2.p1.5.m5.1.1.1.cmml"><msub id="S3.SS2.p1.5.m5.1.1.1.3" xref="S3.SS2.p1.5.m5.1.1.1.3.cmml"><mi id="S3.SS2.p1.5.m5.1.1.1.3.2" xref="S3.SS2.p1.5.m5.1.1.1.3.2.cmml">f</mi><msup id="S3.SS2.p1.5.m5.1.1.1.3.3" xref="S3.SS2.p1.5.m5.1.1.1.3.3.cmml"><mi id="S3.SS2.p1.5.m5.1.1.1.3.3.2" xref="S3.SS2.p1.5.m5.1.1.1.3.3.2.cmml">θ</mi><mo id="S3.SS2.p1.5.m5.1.1.1.3.3.3" xref="S3.SS2.p1.5.m5.1.1.1.3.3.3.cmml">∗</mo></msup></msub><mo id="S3.SS2.p1.5.m5.1.1.1.2" xref="S3.SS2.p1.5.m5.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.p1.5.m5.1.1.1.1.1" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.cmml"><mo id="S3.SS2.p1.5.m5.1.1.1.1.1.2" stretchy="false" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS2.p1.5.m5.1.1.1.1.1.1" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p1.5.m5.1.1.1.1.1.1.2" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.2.cmml">Q</mi><mi id="S3.SS2.p1.5.m5.1.1.1.1.1.1.3" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.3.cmml">harm</mi></msub><mo id="S3.SS2.p1.5.m5.1.1.1.1.1.3" stretchy="false" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p1.5.m5.1.1.2" stretchy="false" xref="S3.SS2.p1.5.m5.1.1.2.cmml">→</mo><msub id="S3.SS2.p1.5.m5.1.1.3" xref="S3.SS2.p1.5.m5.1.1.3.cmml"><mi id="S3.SS2.p1.5.m5.1.1.3.2" xref="S3.SS2.p1.5.m5.1.1.3.2.cmml">A</mi><mtext id="S3.SS2.p1.5.m5.1.1.3.3" xref="S3.SS2.p1.5.m5.1.1.3.3a.cmml">harm</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.5.m5.1b"><apply id="S3.SS2.p1.5.m5.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1"><ci id="S3.SS2.p1.5.m5.1.1.2.cmml" xref="S3.SS2.p1.5.m5.1.1.2">→</ci><apply id="S3.SS2.p1.5.m5.1.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1.1"><times id="S3.SS2.p1.5.m5.1.1.1.2.cmml" xref="S3.SS2.p1.5.m5.1.1.1.2"></times><apply id="S3.SS2.p1.5.m5.1.1.1.3.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.1.1.1.3.1.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3">subscript</csymbol><ci id="S3.SS2.p1.5.m5.1.1.1.3.2.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3.2">𝑓</ci><apply id="S3.SS2.p1.5.m5.1.1.1.3.3.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.1.1.1.3.3.1.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3.3">superscript</csymbol><ci id="S3.SS2.p1.5.m5.1.1.1.3.3.2.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3.3.2">𝜃</ci><times id="S3.SS2.p1.5.m5.1.1.1.3.3.3.cmml" xref="S3.SS2.p1.5.m5.1.1.1.3.3.3"></times></apply></apply><apply id="S3.SS2.p1.5.m5.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p1.5.m5.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.2">𝑄</ci><ci id="S3.SS2.p1.5.m5.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p1.5.m5.1.1.1.1.1.1.3">harm</ci></apply></apply><apply id="S3.SS2.p1.5.m5.1.1.3.cmml" xref="S3.SS2.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.1.1.3.1.cmml" xref="S3.SS2.p1.5.m5.1.1.3">subscript</csymbol><ci id="S3.SS2.p1.5.m5.1.1.3.2.cmml" xref="S3.SS2.p1.5.m5.1.1.3.2">𝐴</ci><ci id="S3.SS2.p1.5.m5.1.1.3.3a.cmml" xref="S3.SS2.p1.5.m5.1.1.3.3"><mtext id="S3.SS2.p1.5.m5.1.1.3.3.cmml" mathsize="70%" xref="S3.SS2.p1.5.m5.1.1.3.3">harm</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.5.m5.1c">f_{{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow A_{\text{harm}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.5.m5.1d">italic_f start_POSTSUBSCRIPT italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT ) → italic_A start_POSTSUBSCRIPT harm end_POSTSUBSCRIPT</annotation></semantics></math>, akin to Attack I.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.3"><span class="ltx_text ltx_font_bold" id="S3.SS2.p2.3.1">Problem Definition of </span><span class="ltx_text ltx_font_smallcaps" id="S3.SS2.p2.3.2">Ctrl</span> <span class="ltx_text ltx_font_smallcaps" id="S3.SS2.p2.3.3">Ctrl</span> operates under the assumption of no knowledge pertaining to Attack II during downstream development. In the pre-training phase, <span class="ltx_text ltx_font_smallcaps" id="S3.SS2.p2.3.4">Ctrl</span> curates <math alttext="\tilde{\mathcal{D}}" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mover accent="true" id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p2.1.m1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.p2.1.m1.1.1.1" xref="S3.SS2.p2.1.m1.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><ci id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1">~</ci><ci id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2">𝒟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\tilde{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">over~ start_ARG caligraphic_D end_ARG</annotation></semantics></math> and pre-trains <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS2.p2.2.m2.1"><semantics id="S3.SS2.p2.2.m2.1a"><mi id="S3.SS2.p2.2.m2.1.1" xref="S3.SS2.p2.2.m2.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.1b"><ci id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.2.m2.1d">italic_θ</annotation></semantics></math> as <math alttext="\tilde{\theta}" class="ltx_Math" display="inline" id="S3.SS2.p2.3.m3.1"><semantics id="S3.SS2.p2.3.m3.1a"><mover accent="true" id="S3.SS2.p2.3.m3.1.1" xref="S3.SS2.p2.3.m3.1.1.cmml"><mi id="S3.SS2.p2.3.m3.1.1.2" xref="S3.SS2.p2.3.m3.1.1.2.cmml">θ</mi><mo id="S3.SS2.p2.3.m3.1.1.1" xref="S3.SS2.p2.3.m3.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><apply id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1"><ci id="S3.SS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1.1">~</ci><ci id="S3.SS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.p2.3.m3.1.1.2">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">\tilde{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.3.m3.1d">over~ start_ARG italic_θ end_ARG</annotation></semantics></math>, which is subsequently deployed to mitigate the effectiveness of Attack II. Formally:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A3.EGx1">
<tbody id="S3.E3"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell" colspan="2"><math alttext="\displaystyle\begin{split}f_{\tilde{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow
A%
_{\text{safe}}\,\,\,\,&amp;s.t.\,\,\,\,\tilde{\theta}^{*}=\underset{\tilde{\theta}%
}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i})\in\mathcal{D^{*}}}\ell(f_{\tilde{%
\theta}}(Q_{i}),A_{i})\\
&amp;and\,\,\,\,\tilde{\theta}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i%
},A_{i})\in\mathcal{D}\cup\tilde{\mathcal{D}}}\ell(f_{\theta}(Q_{i}),A_{i})%
\end{split}" class="ltx_Math" display="inline" id="S3.E3.m1.57"><semantics id="S3.E3.m1.57a"><mtable columnspacing="0pt" id="S3.E3.m1.57.57.6" rowspacing="0pt"><mtr id="S3.E3.m1.57.57.6a"><mtd class="ltx_align_right" columnalign="right" id="S3.E3.m1.57.57.6b"><mrow id="S3.E3.m1.54.54.3.52.32.10"><mrow id="S3.E3.m1.54.54.3.52.32.10.10"><msub id="S3.E3.m1.54.54.3.52.32.10.10.3"><mi id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml">f</mi><msup id="S3.E3.m1.2.2.2.2.2.2.1" xref="S3.E3.m1.2.2.2.2.2.2.1.cmml"><mover accent="true" id="S3.E3.m1.2.2.2.2.2.2.1.2" xref="S3.E3.m1.2.2.2.2.2.2.1.2.cmml"><mi id="S3.E3.m1.2.2.2.2.2.2.1.2.2" xref="S3.E3.m1.2.2.2.2.2.2.1.2.2.cmml">θ</mi><mo id="S3.E3.m1.2.2.2.2.2.2.1.2.1" xref="S3.E3.m1.2.2.2.2.2.2.1.2.1.cmml">~</mo></mover><mo id="S3.E3.m1.2.2.2.2.2.2.1.3" xref="S3.E3.m1.2.2.2.2.2.2.1.3.cmml">∗</mo></msup></msub><mo id="S3.E3.m1.54.54.3.52.32.10.10.2" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mrow id="S3.E3.m1.54.54.3.52.32.10.10.1.1"><mo id="S3.E3.m1.3.3.3.3.3.3" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">(</mo><msub id="S3.E3.m1.54.54.3.52.32.10.10.1.1.1"><mi id="S3.E3.m1.4.4.4.4.4.4" xref="S3.E3.m1.4.4.4.4.4.4.cmml">Q</mi><mi id="S3.E3.m1.5.5.5.5.5.5.1" xref="S3.E3.m1.5.5.5.5.5.5.1.cmml">harm</mi></msub><mo id="S3.E3.m1.6.6.6.6.6.6" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.7.7.7.7.7.7" stretchy="false" xref="S3.E3.m1.7.7.7.7.7.7.cmml">→</mo><msub id="S3.E3.m1.54.54.3.52.32.10.11"><mi id="S3.E3.m1.8.8.8.8.8.8" xref="S3.E3.m1.8.8.8.8.8.8.cmml">A</mi><mtext id="S3.E3.m1.9.9.9.9.9.9.1" xref="S3.E3.m1.9.9.9.9.9.9.1a.cmml">safe</mtext></msub></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E3.m1.57.57.6c"><mrow id="S3.E3.m1.55.55.4.53.33.23.23"><mi id="S3.E3.m1.10.10.10.10.1.1" xref="S3.E3.m1.10.10.10.10.1.1.cmml">s</mi><mo id="S3.E3.m1.11.11.11.11.2.2" lspace="0em" rspace="0.167em" xref="S3.E3.m1.53.53.2.3.cmml">.</mo><mi id="S3.E3.m1.12.12.12.12.3.3" xref="S3.E3.m1.12.12.12.12.3.3.cmml">t</mi><mo id="S3.E3.m1.13.13.13.13.4.4" lspace="0em" rspace="0.837em" xref="S3.E3.m1.53.53.2.3.cmml">.</mo><mrow id="S3.E3.m1.55.55.4.53.33.23.23.1"><msup id="S3.E3.m1.55.55.4.53.33.23.23.1.3"><mover accent="true" id="S3.E3.m1.14.14.14.14.5.5" xref="S3.E3.m1.14.14.14.14.5.5.cmml"><mi id="S3.E3.m1.14.14.14.14.5.5.2" xref="S3.E3.m1.14.14.14.14.5.5.2.cmml">θ</mi><mo id="S3.E3.m1.14.14.14.14.5.5.1" xref="S3.E3.m1.14.14.14.14.5.5.1.cmml">~</mo></mover><mo id="S3.E3.m1.15.15.15.15.6.6.1" xref="S3.E3.m1.15.15.15.15.6.6.1.cmml">∗</mo></msup><mo id="S3.E3.m1.16.16.16.16.7.7" xref="S3.E3.m1.16.16.16.16.7.7.cmml">=</mo><mrow id="S3.E3.m1.55.55.4.53.33.23.23.1.2"><munder accentunder="true" id="S3.E3.m1.17.17.17.17.8.8" xref="S3.E3.m1.17.17.17.17.8.8.cmml"><mi id="S3.E3.m1.17.17.17.17.8.8.2" xref="S3.E3.m1.17.17.17.17.8.8.2.cmml">argmin</mi><mover accent="true" id="S3.E3.m1.17.17.17.17.8.8.1" xref="S3.E3.m1.17.17.17.17.8.8.1.cmml"><mi id="S3.E3.m1.17.17.17.17.8.8.1.2" xref="S3.E3.m1.17.17.17.17.8.8.1.2.cmml">θ</mi><mo id="S3.E3.m1.17.17.17.17.8.8.1.1" xref="S3.E3.m1.17.17.17.17.8.8.1.1.cmml">~</mo></mover></munder><mo id="S3.E3.m1.55.55.4.53.33.23.23.1.2.3" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><msub id="S3.E3.m1.55.55.4.53.33.23.23.1.2.4"><mi id="S3.E3.m1.18.18.18.18.9.9" xref="S3.E3.m1.18.18.18.18.9.9.cmml">𝔼</mi><mrow id="S3.E3.m1.19.19.19.19.10.10.1" xref="S3.E3.m1.19.19.19.19.10.10.1.cmml"><mrow id="S3.E3.m1.19.19.19.19.10.10.1.2.2" xref="S3.E3.m1.19.19.19.19.10.10.1.2.3.cmml"><mo id="S3.E3.m1.19.19.19.19.10.10.1.2.2.3" stretchy="false" xref="S3.E3.m1.19.19.19.19.10.10.1.2.3.cmml">(</mo><msub id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.cmml"><mi id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.2" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.2.cmml">Q</mi><mi id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.3" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.19.19.19.19.10.10.1.2.2.4" xref="S3.E3.m1.19.19.19.19.10.10.1.2.3.cmml">,</mo><msub id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.cmml"><mi id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.2" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.2.cmml">A</mi><mi id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.3" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.3.cmml">i</mi></msub><mo id="S3.E3.m1.19.19.19.19.10.10.1.2.2.5" stretchy="false" xref="S3.E3.m1.19.19.19.19.10.10.1.2.3.cmml">)</mo></mrow><mo id="S3.E3.m1.19.19.19.19.10.10.1.3" xref="S3.E3.m1.19.19.19.19.10.10.1.3.cmml">∈</mo><msup id="S3.E3.m1.19.19.19.19.10.10.1.4" xref="S3.E3.m1.19.19.19.19.10.10.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.19.19.19.19.10.10.1.4.2" xref="S3.E3.m1.19.19.19.19.10.10.1.4.2.cmml">𝒟</mi><mo id="S3.E3.m1.19.19.19.19.10.10.1.4.3" xref="S3.E3.m1.19.19.19.19.10.10.1.4.3.cmml">∗</mo></msup></mrow></msub><mo id="S3.E3.m1.55.55.4.53.33.23.23.1.2.3a" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mi id="S3.E3.m1.20.20.20.20.11.11" mathvariant="normal" xref="S3.E3.m1.20.20.20.20.11.11.cmml">ℓ</mi><mo id="S3.E3.m1.55.55.4.53.33.23.23.1.2.3b" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mrow id="S3.E3.m1.55.55.4.53.33.23.23.1.2.2.2"><mo id="S3.E3.m1.21.21.21.21.12.12" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">(</mo><mrow id="S3.E3.m1.55.55.4.53.33.23.23.1.1.1.1.1"><msub id="S3.E3.m1.55.55.4.53.33.23.23.1.1.1.1.1.3"><mi id="S3.E3.m1.22.22.22.22.13.13" xref="S3.E3.m1.22.22.22.22.13.13.cmml">f</mi><mover accent="true" id="S3.E3.m1.23.23.23.23.14.14.1" xref="S3.E3.m1.23.23.23.23.14.14.1.cmml"><mi id="S3.E3.m1.23.23.23.23.14.14.1.2" xref="S3.E3.m1.23.23.23.23.14.14.1.2.cmml">θ</mi><mo id="S3.E3.m1.23.23.23.23.14.14.1.1" xref="S3.E3.m1.23.23.23.23.14.14.1.1.cmml">~</mo></mover></msub><mo id="S3.E3.m1.55.55.4.53.33.23.23.1.1.1.1.1.2" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mrow id="S3.E3.m1.55.55.4.53.33.23.23.1.1.1.1.1.1.1"><mo id="S3.E3.m1.24.24.24.24.15.15" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">(</mo><msub id="S3.E3.m1.55.55.4.53.33.23.23.1.1.1.1.1.1.1.1"><mi id="S3.E3.m1.25.25.25.25.16.16" xref="S3.E3.m1.25.25.25.25.16.16.cmml">Q</mi><mi id="S3.E3.m1.26.26.26.26.17.17.1" xref="S3.E3.m1.26.26.26.26.17.17.1.cmml">i</mi></msub><mo id="S3.E3.m1.27.27.27.27.18.18" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.28.28.28.28.19.19" xref="S3.E3.m1.53.53.2.3.cmml">,</mo><msub id="S3.E3.m1.55.55.4.53.33.23.23.1.2.2.2.2"><mi id="S3.E3.m1.29.29.29.29.20.20" xref="S3.E3.m1.29.29.29.29.20.20.cmml">A</mi><mi id="S3.E3.m1.30.30.30.30.21.21.1" xref="S3.E3.m1.30.30.30.30.21.21.1.cmml">i</mi></msub><mo id="S3.E3.m1.31.31.31.31.22.22" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mtd></mtr><mtr id="S3.E3.m1.57.57.6d"><mtd id="S3.E3.m1.57.57.6e" xref="S3.E3.m1.53.53.2.3.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E3.m1.57.57.6f"><mrow id="S3.E3.m1.57.57.6.55.22.22"><mrow id="S3.E3.m1.57.57.6.55.22.22.23"><mi id="S3.E3.m1.32.32.32.1.1.1" xref="S3.E3.m1.32.32.32.1.1.1.cmml">a</mi><mo id="S3.E3.m1.57.57.6.55.22.22.23.1" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mi id="S3.E3.m1.33.33.33.2.2.2" xref="S3.E3.m1.33.33.33.2.2.2.cmml">n</mi><mo id="S3.E3.m1.57.57.6.55.22.22.23.1a" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mi id="S3.E3.m1.34.34.34.3.3.3" xref="S3.E3.m1.34.34.34.3.3.3.cmml">d</mi><mo id="S3.E3.m1.57.57.6.55.22.22.23.1b" lspace="0.670em" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mover accent="true" id="S3.E3.m1.35.35.35.4.4.4" xref="S3.E3.m1.35.35.35.4.4.4.cmml"><mi id="S3.E3.m1.35.35.35.4.4.4.2" xref="S3.E3.m1.35.35.35.4.4.4.2.cmml">θ</mi><mo id="S3.E3.m1.35.35.35.4.4.4.1" xref="S3.E3.m1.35.35.35.4.4.4.1.cmml">~</mo></mover></mrow><mo id="S3.E3.m1.36.36.36.5.5.5" xref="S3.E3.m1.36.36.36.5.5.5.cmml">=</mo><mrow id="S3.E3.m1.57.57.6.55.22.22.22"><munder accentunder="true" id="S3.E3.m1.37.37.37.6.6.6" xref="S3.E3.m1.37.37.37.6.6.6.cmml"><mi id="S3.E3.m1.37.37.37.6.6.6.2" xref="S3.E3.m1.37.37.37.6.6.6.2.cmml">argmin</mi><mo id="S3.E3.m1.37.37.37.6.6.6.1" xref="S3.E3.m1.37.37.37.6.6.6.1.cmml">𝜃</mo></munder><mo id="S3.E3.m1.57.57.6.55.22.22.22.3" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><msub id="S3.E3.m1.57.57.6.55.22.22.22.4"><mi id="S3.E3.m1.38.38.38.7.7.7" xref="S3.E3.m1.38.38.38.7.7.7.cmml">𝔼</mi><mrow id="S3.E3.m1.39.39.39.8.8.8.1" xref="S3.E3.m1.39.39.39.8.8.8.1.cmml"><mrow id="S3.E3.m1.39.39.39.8.8.8.1.2.2" xref="S3.E3.m1.39.39.39.8.8.8.1.2.3.cmml"><mo id="S3.E3.m1.39.39.39.8.8.8.1.2.2.3" stretchy="false" xref="S3.E3.m1.39.39.39.8.8.8.1.2.3.cmml">(</mo><msub id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.cmml"><mi id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.2" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.2.cmml">Q</mi><mi id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.3" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.39.39.39.8.8.8.1.2.2.4" xref="S3.E3.m1.39.39.39.8.8.8.1.2.3.cmml">,</mo><msub id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.cmml"><mi id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.2" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.2.cmml">A</mi><mi id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.3" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.3.cmml">i</mi></msub><mo id="S3.E3.m1.39.39.39.8.8.8.1.2.2.5" stretchy="false" xref="S3.E3.m1.39.39.39.8.8.8.1.2.3.cmml">)</mo></mrow><mo id="S3.E3.m1.39.39.39.8.8.8.1.3" xref="S3.E3.m1.39.39.39.8.8.8.1.3.cmml">∈</mo><mrow id="S3.E3.m1.39.39.39.8.8.8.1.4" xref="S3.E3.m1.39.39.39.8.8.8.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.39.39.39.8.8.8.1.4.2" xref="S3.E3.m1.39.39.39.8.8.8.1.4.2.cmml">𝒟</mi><mo id="S3.E3.m1.39.39.39.8.8.8.1.4.1" xref="S3.E3.m1.39.39.39.8.8.8.1.4.1.cmml">∪</mo><mover accent="true" id="S3.E3.m1.39.39.39.8.8.8.1.4.3" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.39.39.39.8.8.8.1.4.3.2" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3.2.cmml">𝒟</mi><mo id="S3.E3.m1.39.39.39.8.8.8.1.4.3.1" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3.1.cmml">~</mo></mover></mrow></mrow></msub><mo id="S3.E3.m1.57.57.6.55.22.22.22.3a" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mi id="S3.E3.m1.40.40.40.9.9.9" mathvariant="normal" xref="S3.E3.m1.40.40.40.9.9.9.cmml">ℓ</mi><mo id="S3.E3.m1.57.57.6.55.22.22.22.3b" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mrow id="S3.E3.m1.57.57.6.55.22.22.22.2.2"><mo id="S3.E3.m1.41.41.41.10.10.10" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">(</mo><mrow id="S3.E3.m1.56.56.5.54.21.21.21.1.1.1"><msub id="S3.E3.m1.56.56.5.54.21.21.21.1.1.1.3"><mi id="S3.E3.m1.42.42.42.11.11.11" xref="S3.E3.m1.42.42.42.11.11.11.cmml">f</mi><mi id="S3.E3.m1.43.43.43.12.12.12.1" xref="S3.E3.m1.43.43.43.12.12.12.1.cmml">θ</mi></msub><mo id="S3.E3.m1.56.56.5.54.21.21.21.1.1.1.2" xref="S3.E3.m1.53.53.2.3.cmml">⁢</mo><mrow id="S3.E3.m1.56.56.5.54.21.21.21.1.1.1.1.1"><mo id="S3.E3.m1.44.44.44.13.13.13" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">(</mo><msub id="S3.E3.m1.56.56.5.54.21.21.21.1.1.1.1.1.1"><mi id="S3.E3.m1.45.45.45.14.14.14" xref="S3.E3.m1.45.45.45.14.14.14.cmml">Q</mi><mi id="S3.E3.m1.46.46.46.15.15.15.1" xref="S3.E3.m1.46.46.46.15.15.15.1.cmml">i</mi></msub><mo id="S3.E3.m1.47.47.47.16.16.16" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.48.48.48.17.17.17" xref="S3.E3.m1.53.53.2.3.cmml">,</mo><msub id="S3.E3.m1.57.57.6.55.22.22.22.2.2.2"><mi id="S3.E3.m1.49.49.49.18.18.18" xref="S3.E3.m1.49.49.49.18.18.18.cmml">A</mi><mi id="S3.E3.m1.50.50.50.19.19.19.1" xref="S3.E3.m1.50.50.50.19.19.19.1.cmml">i</mi></msub><mo id="S3.E3.m1.51.51.51.20.20.20" stretchy="false" xref="S3.E3.m1.53.53.2.3.cmml">)</mo></mrow></mrow></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S3.E3.m1.57b"><apply id="S3.E3.m1.53.53.2.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.3a.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">formulae-sequence</csymbol><apply id="S3.E3.m1.52.52.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><ci id="S3.E3.m1.7.7.7.7.7.7.cmml" xref="S3.E3.m1.7.7.7.7.7.7">→</ci><apply id="S3.E3.m1.52.52.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.52.52.1.1.1.1.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.52.52.1.1.1.1.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.52.52.1.1.1.1.3.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">𝑓</ci><apply id="S3.E3.m1.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.2.2.1.1.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1">superscript</csymbol><apply id="S3.E3.m1.2.2.2.2.2.2.1.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1.2"><ci id="S3.E3.m1.2.2.2.2.2.2.1.2.1.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1.2.1">~</ci><ci id="S3.E3.m1.2.2.2.2.2.2.1.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1.2.2">𝜃</ci></apply><times id="S3.E3.m1.2.2.2.2.2.2.1.3.cmml" xref="S3.E3.m1.2.2.2.2.2.2.1.3"></times></apply></apply><apply id="S3.E3.m1.52.52.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.52.52.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.4.4.4.4.4.4.cmml" xref="S3.E3.m1.4.4.4.4.4.4">𝑄</ci><ci id="S3.E3.m1.5.5.5.5.5.5.1.cmml" xref="S3.E3.m1.5.5.5.5.5.5.1">harm</ci></apply></apply><apply id="S3.E3.m1.52.52.1.1.1.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.52.52.1.1.1.3.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.52.52.1.1.1.3.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.52.52.1.1.1.3.2.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.8.8.8.8.8.8.cmml" xref="S3.E3.m1.8.8.8.8.8.8">𝐴</ci><ci id="S3.E3.m1.9.9.9.9.9.9.1a.cmml" xref="S3.E3.m1.9.9.9.9.9.9.1"><mtext id="S3.E3.m1.9.9.9.9.9.9.1.cmml" mathsize="70%" xref="S3.E3.m1.9.9.9.9.9.9.1">safe</mtext></ci></apply><ci id="S3.E3.m1.10.10.10.10.1.1.cmml" xref="S3.E3.m1.10.10.10.10.1.1">𝑠</ci></apply></apply><ci id="S3.E3.m1.12.12.12.12.3.3.cmml" xref="S3.E3.m1.12.12.12.12.3.3">𝑡</ci><apply id="S3.E3.m1.53.53.2.2.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><and id="S3.E3.m1.53.53.2.2.2a.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></and><apply id="S3.E3.m1.53.53.2.2.2b.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><eq id="S3.E3.m1.16.16.16.16.7.7.cmml" xref="S3.E3.m1.16.16.16.16.7.7"></eq><apply id="S3.E3.m1.53.53.2.2.2.6.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.6.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">superscript</csymbol><apply id="S3.E3.m1.14.14.14.14.5.5.cmml" xref="S3.E3.m1.14.14.14.14.5.5"><ci id="S3.E3.m1.14.14.14.14.5.5.1.cmml" xref="S3.E3.m1.14.14.14.14.5.5.1">~</ci><ci id="S3.E3.m1.14.14.14.14.5.5.2.cmml" xref="S3.E3.m1.14.14.14.14.5.5.2">𝜃</ci></apply><times id="S3.E3.m1.15.15.15.15.6.6.1.cmml" xref="S3.E3.m1.15.15.15.15.6.6.1"></times></apply><apply id="S3.E3.m1.53.53.2.2.2.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.53.53.2.2.2.2.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.17.17.17.17.8.8.cmml" xref="S3.E3.m1.17.17.17.17.8.8"><apply id="S3.E3.m1.17.17.17.17.8.8.1.cmml" xref="S3.E3.m1.17.17.17.17.8.8.1"><ci id="S3.E3.m1.17.17.17.17.8.8.1.1.cmml" xref="S3.E3.m1.17.17.17.17.8.8.1.1">~</ci><ci id="S3.E3.m1.17.17.17.17.8.8.1.2.cmml" xref="S3.E3.m1.17.17.17.17.8.8.1.2">𝜃</ci></apply><ci id="S3.E3.m1.17.17.17.17.8.8.2.cmml" xref="S3.E3.m1.17.17.17.17.8.8.2">argmin</ci></apply><apply id="S3.E3.m1.53.53.2.2.2.2.5.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.2.5.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.18.18.18.18.9.9.cmml" xref="S3.E3.m1.18.18.18.18.9.9">𝔼</ci><apply id="S3.E3.m1.19.19.19.19.10.10.1.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1"><in id="S3.E3.m1.19.19.19.19.10.10.1.3.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.3"></in><interval closure="open" id="S3.E3.m1.19.19.19.19.10.10.1.2.3.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2"><apply id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.1.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.2.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.2">𝑄</ci><ci id="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.3.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.1.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2">subscript</csymbol><ci id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.2.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.2">𝐴</ci><ci id="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.3.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E3.m1.19.19.19.19.10.10.1.4.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.4"><csymbol cd="ambiguous" id="S3.E3.m1.19.19.19.19.10.10.1.4.1.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.4">superscript</csymbol><ci id="S3.E3.m1.19.19.19.19.10.10.1.4.2.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.4.2">𝒟</ci><times id="S3.E3.m1.19.19.19.19.10.10.1.4.3.cmml" xref="S3.E3.m1.19.19.19.19.10.10.1.4.3"></times></apply></apply></apply><ci id="S3.E3.m1.20.20.20.20.11.11.cmml" xref="S3.E3.m1.20.20.20.20.11.11">ℓ</ci><interval closure="open" id="S3.E3.m1.53.53.2.2.2.2.2.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><apply id="S3.E3.m1.53.53.2.2.2.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.53.53.2.2.2.1.1.1.1.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.53.53.2.2.2.1.1.1.1.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.1.1.1.1.3.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.22.22.22.22.13.13.cmml" xref="S3.E3.m1.22.22.22.22.13.13">𝑓</ci><apply id="S3.E3.m1.23.23.23.23.14.14.1.cmml" xref="S3.E3.m1.23.23.23.23.14.14.1"><ci id="S3.E3.m1.23.23.23.23.14.14.1.1.cmml" xref="S3.E3.m1.23.23.23.23.14.14.1.1">~</ci><ci id="S3.E3.m1.23.23.23.23.14.14.1.2.cmml" xref="S3.E3.m1.23.23.23.23.14.14.1.2">𝜃</ci></apply></apply><apply id="S3.E3.m1.53.53.2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.25.25.25.25.16.16.cmml" xref="S3.E3.m1.25.25.25.25.16.16">𝑄</ci><ci id="S3.E3.m1.26.26.26.26.17.17.1.cmml" xref="S3.E3.m1.26.26.26.26.17.17.1">𝑖</ci></apply></apply><apply id="S3.E3.m1.53.53.2.2.2.2.2.2.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.29.29.29.29.20.20.cmml" xref="S3.E3.m1.29.29.29.29.20.20">𝐴</ci><ci id="S3.E3.m1.30.30.30.30.21.21.1.cmml" xref="S3.E3.m1.30.30.30.30.21.21.1">𝑖</ci></apply></interval><ci id="S3.E3.m1.32.32.32.1.1.1.cmml" xref="S3.E3.m1.32.32.32.1.1.1">𝑎</ci><ci id="S3.E3.m1.33.33.33.2.2.2.cmml" xref="S3.E3.m1.33.33.33.2.2.2">𝑛</ci><ci id="S3.E3.m1.34.34.34.3.3.3.cmml" xref="S3.E3.m1.34.34.34.3.3.3">𝑑</ci><apply id="S3.E3.m1.35.35.35.4.4.4.cmml" xref="S3.E3.m1.35.35.35.4.4.4"><ci id="S3.E3.m1.35.35.35.4.4.4.1.cmml" xref="S3.E3.m1.35.35.35.4.4.4.1">~</ci><ci id="S3.E3.m1.35.35.35.4.4.4.2.cmml" xref="S3.E3.m1.35.35.35.4.4.4.2">𝜃</ci></apply></apply></apply><apply id="S3.E3.m1.53.53.2.2.2c.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><eq id="S3.E3.m1.36.36.36.5.5.5.cmml" xref="S3.E3.m1.36.36.36.5.5.5"></eq><share href="https://arxiv.org/html/2405.19358v2#S3.E3.m1.53.53.2.2.2.2.cmml" id="S3.E3.m1.53.53.2.2.2d.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></share><apply id="S3.E3.m1.53.53.2.2.2.4.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.53.53.2.2.2.4.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.37.37.37.6.6.6.cmml" xref="S3.E3.m1.37.37.37.6.6.6"><ci id="S3.E3.m1.37.37.37.6.6.6.1.cmml" xref="S3.E3.m1.37.37.37.6.6.6.1">𝜃</ci><ci id="S3.E3.m1.37.37.37.6.6.6.2.cmml" xref="S3.E3.m1.37.37.37.6.6.6.2">argmin</ci></apply><apply id="S3.E3.m1.53.53.2.2.2.4.5.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.4.5.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.38.38.38.7.7.7.cmml" xref="S3.E3.m1.38.38.38.7.7.7">𝔼</ci><apply id="S3.E3.m1.39.39.39.8.8.8.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1"><in id="S3.E3.m1.39.39.39.8.8.8.1.3.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.3"></in><interval closure="open" id="S3.E3.m1.39.39.39.8.8.8.1.2.3.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2"><apply id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.2.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.2">𝑄</ci><ci id="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.3.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2">subscript</csymbol><ci id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.2.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.2">𝐴</ci><ci id="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.3.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E3.m1.39.39.39.8.8.8.1.4.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4"><union id="S3.E3.m1.39.39.39.8.8.8.1.4.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4.1"></union><ci id="S3.E3.m1.39.39.39.8.8.8.1.4.2.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4.2">𝒟</ci><apply id="S3.E3.m1.39.39.39.8.8.8.1.4.3.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3"><ci id="S3.E3.m1.39.39.39.8.8.8.1.4.3.1.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3.1">~</ci><ci id="S3.E3.m1.39.39.39.8.8.8.1.4.3.2.cmml" xref="S3.E3.m1.39.39.39.8.8.8.1.4.3.2">𝒟</ci></apply></apply></apply></apply><ci id="S3.E3.m1.40.40.40.9.9.9.cmml" xref="S3.E3.m1.40.40.40.9.9.9">ℓ</ci><interval closure="open" id="S3.E3.m1.53.53.2.2.2.4.2.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><apply id="S3.E3.m1.53.53.2.2.2.3.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><times id="S3.E3.m1.53.53.2.2.2.3.1.1.1.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"></times><apply id="S3.E3.m1.53.53.2.2.2.3.1.1.1.3.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.3.1.1.1.3.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.42.42.42.11.11.11.cmml" xref="S3.E3.m1.42.42.42.11.11.11">𝑓</ci><ci id="S3.E3.m1.43.43.43.12.12.12.1.cmml" xref="S3.E3.m1.43.43.43.12.12.12.1">𝜃</ci></apply><apply id="S3.E3.m1.53.53.2.2.2.3.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.3.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.45.45.45.14.14.14.cmml" xref="S3.E3.m1.45.45.45.14.14.14">𝑄</ci><ci id="S3.E3.m1.46.46.46.15.15.15.1.cmml" xref="S3.E3.m1.46.46.46.15.15.15.1">𝑖</ci></apply></apply><apply id="S3.E3.m1.53.53.2.2.2.4.2.2.2.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2"><csymbol cd="ambiguous" id="S3.E3.m1.53.53.2.2.2.4.2.2.2.1.cmml" xref="S3.E3.m1.54.54.3.52.32.10.10.2">subscript</csymbol><ci id="S3.E3.m1.49.49.49.18.18.18.cmml" xref="S3.E3.m1.49.49.49.18.18.18">𝐴</ci><ci id="S3.E3.m1.50.50.50.19.19.19.1.cmml" xref="S3.E3.m1.50.50.50.19.19.19.1">𝑖</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.57c">\displaystyle\begin{split}f_{\tilde{\theta}^{*}}(Q_{\mathrm{harm}})\rightarrow
A%
_{\text{safe}}\,\,\,\,&amp;s.t.\,\,\,\,\tilde{\theta}^{*}=\underset{\tilde{\theta}%
}{\mathrm{argmin}}\mathbb{E}_{(Q_{i},A_{i})\in\mathcal{D^{*}}}\ell(f_{\tilde{%
\theta}}(Q_{i}),A_{i})\\
&amp;and\,\,\,\,\tilde{\theta}=\underset{\theta}{\mathrm{argmin}}\mathbb{E}_{(Q_{i%
},A_{i})\in\mathcal{D}\cup\tilde{\mathcal{D}}}\ell(f_{\theta}(Q_{i}),A_{i})%
\end{split}</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.57d">start_ROW start_CELL italic_f start_POSTSUBSCRIPT over~ start_ARG italic_θ end_ARG start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT ) → italic_A start_POSTSUBSCRIPT safe end_POSTSUBSCRIPT end_CELL start_CELL italic_s . italic_t . over~ start_ARG italic_θ end_ARG start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT = start_UNDERACCENT over~ start_ARG italic_θ end_ARG end_UNDERACCENT start_ARG roman_argmin end_ARG blackboard_E start_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT roman_ℓ ( italic_f start_POSTSUBSCRIPT over~ start_ARG italic_θ end_ARG end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL italic_a italic_n italic_d over~ start_ARG italic_θ end_ARG = underitalic_θ start_ARG roman_argmin end_ARG blackboard_E start_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_D ∪ over~ start_ARG caligraphic_D end_ARG end_POSTSUBSCRIPT roman_ℓ ( italic_f start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_Q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span><span class="ltx_text ltx_font_smallcaps" id="S4.1.1">Ctrl</span>: A Data Curation Framework against Jailbreaking Attacks</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Motivation and Guideline Metrics</h3>
<figure class="ltx_figure" id="S4.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="160" id="S4.F2.g1" src="x2.png" width="735"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Text perplexity on (a) safety-aligned and (b) jailbroken Llama-3-8B. We use security-sensitive queries from AdvBench and BeaverTails to construct our safety and harmfulness datasets, pairing them with safe and harmful responses, respectively. Additionally, we utilize Alpaca, Dolly, and a portion of BeaverTails (with queries irrelevant to security topics) as our general-domain datasets.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">To guide data curation, our initial step involves analyzing the distinction between safe and harmful texts using a key metric – <span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.1">perplexity</span>. We further employ two additional metrics, <span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.2">readability</span> and <span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.3">helpfulness</span>, to assure the quality of curated texts.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.3"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.3.1">Motivation with Perplexity</span> Perplexity measures the level of preference (or surprise) exhibited by LLMs when generating a particular sequence of texts. Formally, given a textual sequence <math alttext="X=(x_{0},x_{1},...,x_{n})" class="ltx_Math" display="inline" id="S4.SS1.p2.1.m1.4"><semantics id="S4.SS1.p2.1.m1.4a"><mrow id="S4.SS1.p2.1.m1.4.4" xref="S4.SS1.p2.1.m1.4.4.cmml"><mi id="S4.SS1.p2.1.m1.4.4.5" xref="S4.SS1.p2.1.m1.4.4.5.cmml">X</mi><mo id="S4.SS1.p2.1.m1.4.4.4" xref="S4.SS1.p2.1.m1.4.4.4.cmml">=</mo><mrow id="S4.SS1.p2.1.m1.4.4.3.3" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml"><mo id="S4.SS1.p2.1.m1.4.4.3.3.4" stretchy="false" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml">(</mo><msub id="S4.SS1.p2.1.m1.2.2.1.1.1" xref="S4.SS1.p2.1.m1.2.2.1.1.1.cmml"><mi id="S4.SS1.p2.1.m1.2.2.1.1.1.2" xref="S4.SS1.p2.1.m1.2.2.1.1.1.2.cmml">x</mi><mn id="S4.SS1.p2.1.m1.2.2.1.1.1.3" xref="S4.SS1.p2.1.m1.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S4.SS1.p2.1.m1.4.4.3.3.5" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml">,</mo><msub id="S4.SS1.p2.1.m1.3.3.2.2.2" xref="S4.SS1.p2.1.m1.3.3.2.2.2.cmml"><mi id="S4.SS1.p2.1.m1.3.3.2.2.2.2" xref="S4.SS1.p2.1.m1.3.3.2.2.2.2.cmml">x</mi><mn id="S4.SS1.p2.1.m1.3.3.2.2.2.3" xref="S4.SS1.p2.1.m1.3.3.2.2.2.3.cmml">1</mn></msub><mo id="S4.SS1.p2.1.m1.4.4.3.3.6" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml">,</mo><mi id="S4.SS1.p2.1.m1.1.1" mathvariant="normal" xref="S4.SS1.p2.1.m1.1.1.cmml">…</mi><mo id="S4.SS1.p2.1.m1.4.4.3.3.7" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml">,</mo><msub id="S4.SS1.p2.1.m1.4.4.3.3.3" xref="S4.SS1.p2.1.m1.4.4.3.3.3.cmml"><mi id="S4.SS1.p2.1.m1.4.4.3.3.3.2" xref="S4.SS1.p2.1.m1.4.4.3.3.3.2.cmml">x</mi><mi id="S4.SS1.p2.1.m1.4.4.3.3.3.3" xref="S4.SS1.p2.1.m1.4.4.3.3.3.3.cmml">n</mi></msub><mo id="S4.SS1.p2.1.m1.4.4.3.3.8" stretchy="false" xref="S4.SS1.p2.1.m1.4.4.3.4.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.4b"><apply id="S4.SS1.p2.1.m1.4.4.cmml" xref="S4.SS1.p2.1.m1.4.4"><eq id="S4.SS1.p2.1.m1.4.4.4.cmml" xref="S4.SS1.p2.1.m1.4.4.4"></eq><ci id="S4.SS1.p2.1.m1.4.4.5.cmml" xref="S4.SS1.p2.1.m1.4.4.5">𝑋</ci><vector id="S4.SS1.p2.1.m1.4.4.3.4.cmml" xref="S4.SS1.p2.1.m1.4.4.3.3"><apply id="S4.SS1.p2.1.m1.2.2.1.1.1.cmml" xref="S4.SS1.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.1.m1.2.2.1.1.1.1.cmml" xref="S4.SS1.p2.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S4.SS1.p2.1.m1.2.2.1.1.1.2.cmml" xref="S4.SS1.p2.1.m1.2.2.1.1.1.2">𝑥</ci><cn id="S4.SS1.p2.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="S4.SS1.p2.1.m1.2.2.1.1.1.3">0</cn></apply><apply id="S4.SS1.p2.1.m1.3.3.2.2.2.cmml" xref="S4.SS1.p2.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S4.SS1.p2.1.m1.3.3.2.2.2.1.cmml" xref="S4.SS1.p2.1.m1.3.3.2.2.2">subscript</csymbol><ci id="S4.SS1.p2.1.m1.3.3.2.2.2.2.cmml" xref="S4.SS1.p2.1.m1.3.3.2.2.2.2">𝑥</ci><cn id="S4.SS1.p2.1.m1.3.3.2.2.2.3.cmml" type="integer" xref="S4.SS1.p2.1.m1.3.3.2.2.2.3">1</cn></apply><ci id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1">…</ci><apply id="S4.SS1.p2.1.m1.4.4.3.3.3.cmml" xref="S4.SS1.p2.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="S4.SS1.p2.1.m1.4.4.3.3.3.1.cmml" xref="S4.SS1.p2.1.m1.4.4.3.3.3">subscript</csymbol><ci id="S4.SS1.p2.1.m1.4.4.3.3.3.2.cmml" xref="S4.SS1.p2.1.m1.4.4.3.3.3.2">𝑥</ci><ci id="S4.SS1.p2.1.m1.4.4.3.3.3.3.cmml" xref="S4.SS1.p2.1.m1.4.4.3.3.3.3">𝑛</ci></apply></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.4c">X=(x_{0},x_{1},...,x_{n})</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.1.m1.4d">italic_X = ( italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT )</annotation></semantics></math>, the perplexity of a language model <math alttext="\theta" class="ltx_Math" display="inline" id="S4.SS1.p2.2.m2.1"><semantics id="S4.SS1.p2.2.m2.1a"><mi id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b"><ci id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.2.m2.1d">italic_θ</annotation></semantics></math> with respect to <math alttext="X" class="ltx_Math" display="inline" id="S4.SS1.p2.3.m3.1"><semantics id="S4.SS1.p2.3.m3.1a"><mi id="S4.SS1.p2.3.m3.1.1" xref="S4.SS1.p2.3.m3.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.3.m3.1b"><ci id="S4.SS1.p2.3.m3.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.3.m3.1c">X</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.3.m3.1d">italic_X</annotation></semantics></math> is defined as<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/docs/transformers/en/perplexity" title="">https://huggingface.co/docs/transformers/en/perplexity</a></span></span></span>:</p>
<table class="ltx_equation ltx_eqn_table" id="S4.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathrm{PPL}(X)=\mathrm{exp}\{-\frac{1}{n}\sum_{i}^{n}\mathrm{log}p_{\theta}(x%
_{i}|x_{0},x_{1},...,x_{i-1})\}" class="ltx_Math" display="block" id="S4.E4.m1.3"><semantics id="S4.E4.m1.3a"><mrow id="S4.E4.m1.3.3" xref="S4.E4.m1.3.3.cmml"><mrow id="S4.E4.m1.3.3.3" xref="S4.E4.m1.3.3.3.cmml"><mi id="S4.E4.m1.3.3.3.2" xref="S4.E4.m1.3.3.3.2.cmml">PPL</mi><mo id="S4.E4.m1.3.3.3.1" xref="S4.E4.m1.3.3.3.1.cmml">⁢</mo><mrow id="S4.E4.m1.3.3.3.3.2" xref="S4.E4.m1.3.3.3.cmml"><mo id="S4.E4.m1.3.3.3.3.2.1" stretchy="false" xref="S4.E4.m1.3.3.3.cmml">(</mo><mi id="S4.E4.m1.1.1" xref="S4.E4.m1.1.1.cmml">X</mi><mo id="S4.E4.m1.3.3.3.3.2.2" stretchy="false" xref="S4.E4.m1.3.3.3.cmml">)</mo></mrow></mrow><mo id="S4.E4.m1.3.3.2" xref="S4.E4.m1.3.3.2.cmml">=</mo><mrow id="S4.E4.m1.3.3.1" xref="S4.E4.m1.3.3.1.cmml"><mi id="S4.E4.m1.3.3.1.3" xref="S4.E4.m1.3.3.1.3.cmml">exp</mi><mo id="S4.E4.m1.3.3.1.2" xref="S4.E4.m1.3.3.1.2.cmml">⁢</mo><mrow id="S4.E4.m1.3.3.1.1.1" xref="S4.E4.m1.3.3.1.1.2.cmml"><mo id="S4.E4.m1.3.3.1.1.1.2" stretchy="false" xref="S4.E4.m1.3.3.1.1.2.cmml">{</mo><mrow id="S4.E4.m1.3.3.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.cmml"><mo id="S4.E4.m1.3.3.1.1.1.1a" xref="S4.E4.m1.3.3.1.1.1.1.cmml">−</mo><mrow id="S4.E4.m1.3.3.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.cmml"><mfrac id="S4.E4.m1.3.3.1.1.1.1.1.3" xref="S4.E4.m1.3.3.1.1.1.1.1.3.cmml"><mn id="S4.E4.m1.3.3.1.1.1.1.1.3.2" xref="S4.E4.m1.3.3.1.1.1.1.1.3.2.cmml">1</mn><mi id="S4.E4.m1.3.3.1.1.1.1.1.3.3" xref="S4.E4.m1.3.3.1.1.1.1.1.3.3.cmml">n</mi></mfrac><mo id="S4.E4.m1.3.3.1.1.1.1.1.2" xref="S4.E4.m1.3.3.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.cmml"><munderover id="S4.E4.m1.3.3.1.1.1.1.1.1.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.cmml"><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.2" movablelimits="false" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.2.cmml">∑</mo><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.3.cmml">i</mi><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.2.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.3.cmml">n</mi></munderover><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.3.cmml">log</mi><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml">⁢</mo><msub id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.2.cmml">p</mi><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.3.cmml">θ</mi></msub><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.2a" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.2.cmml">x</mi><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.3.cmml">i</mi></msub><mo fence="false" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.4" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.4.cmml">|</mo><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.4.cmml"><msub id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">x</mi><mn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.4" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.4.cmml">,</mo><msub id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">x</mi><mn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">1</mn></msub><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.5" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.4.cmml">,</mo><mi id="S4.E4.m1.2.2" mathvariant="normal" xref="S4.E4.m1.2.2.cmml">…</mi><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.6" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.4.cmml">,</mo><msub id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.2.cmml">x</mi><mrow id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.cmml"><mi id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.2" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.2.cmml">i</mi><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.1" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.1.cmml">−</mo><mn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.3" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.3.cmml">1</mn></mrow></msub></mrow></mrow><mo id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S4.E4.m1.3.3.1.1.1.3" stretchy="false" xref="S4.E4.m1.3.3.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E4.m1.3b"><apply id="S4.E4.m1.3.3.cmml" xref="S4.E4.m1.3.3"><eq id="S4.E4.m1.3.3.2.cmml" xref="S4.E4.m1.3.3.2"></eq><apply id="S4.E4.m1.3.3.3.cmml" xref="S4.E4.m1.3.3.3"><times id="S4.E4.m1.3.3.3.1.cmml" xref="S4.E4.m1.3.3.3.1"></times><ci id="S4.E4.m1.3.3.3.2.cmml" xref="S4.E4.m1.3.3.3.2">PPL</ci><ci id="S4.E4.m1.1.1.cmml" xref="S4.E4.m1.1.1">𝑋</ci></apply><apply id="S4.E4.m1.3.3.1.cmml" xref="S4.E4.m1.3.3.1"><times id="S4.E4.m1.3.3.1.2.cmml" xref="S4.E4.m1.3.3.1.2"></times><ci id="S4.E4.m1.3.3.1.3.cmml" xref="S4.E4.m1.3.3.1.3">exp</ci><set id="S4.E4.m1.3.3.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1"><apply id="S4.E4.m1.3.3.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1"><minus id="S4.E4.m1.3.3.1.1.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1"></minus><apply id="S4.E4.m1.3.3.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1"><times id="S4.E4.m1.3.3.1.1.1.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.2"></times><apply id="S4.E4.m1.3.3.1.1.1.1.1.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.3"><divide id="S4.E4.m1.3.3.1.1.1.1.1.3.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.3"></divide><cn id="S4.E4.m1.3.3.1.1.1.1.1.3.2.cmml" type="integer" xref="S4.E4.m1.3.3.1.1.1.1.1.3.2">1</cn><ci id="S4.E4.m1.3.3.1.1.1.1.1.3.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.3.3">𝑛</ci></apply><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1"><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.2.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2">superscript</csymbol><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2">subscript</csymbol><sum id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.2"></sum><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.2.3">𝑖</ci></apply><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.2.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.2.3">𝑛</ci></apply><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1"><times id="S4.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.2"></times><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.3">log</ci><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.2">𝑝</ci><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.4.3">𝜃</ci></apply><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.4">conditional</csymbol><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.2">𝑥</ci><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.5.3">𝑖</ci></apply><list id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.4.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3"><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑥</ci><cn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" type="integer" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.3">0</cn></apply><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.2">𝑥</ci><cn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" type="integer" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.2.2.3">1</cn></apply><ci id="S4.E4.m1.2.2.cmml" xref="S4.E4.m1.2.2">…</ci><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.2">𝑥</ci><apply id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3"><minus id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.1.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.1"></minus><ci id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.2.cmml" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.2">𝑖</ci><cn id="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.3.cmml" type="integer" xref="S4.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.3.3.3.3">1</cn></apply></apply></list></apply></apply></apply></apply></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E4.m1.3c">\mathrm{PPL}(X)=\mathrm{exp}\{-\frac{1}{n}\sum_{i}^{n}\mathrm{log}p_{\theta}(x%
_{i}|x_{0},x_{1},...,x_{i-1})\}</annotation><annotation encoding="application/x-llamapun" id="S4.E4.m1.3d">roman_PPL ( italic_X ) = roman_exp { - divide start_ARG 1 end_ARG start_ARG italic_n end_ARG ∑ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT roman_log italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT ) }</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S4.SS1.p2.6">note that <math alttext="\mathrm{log}p_{\theta}(x_{i}|x_{0},x_{1},...,x_{i-1})" class="ltx_Math" display="inline" id="S4.SS1.p2.4.m1.2"><semantics id="S4.SS1.p2.4.m1.2a"><mrow id="S4.SS1.p2.4.m1.2.2" xref="S4.SS1.p2.4.m1.2.2.cmml"><mi id="S4.SS1.p2.4.m1.2.2.3" xref="S4.SS1.p2.4.m1.2.2.3.cmml">log</mi><mo id="S4.SS1.p2.4.m1.2.2.2" xref="S4.SS1.p2.4.m1.2.2.2.cmml">⁢</mo><msub id="S4.SS1.p2.4.m1.2.2.4" xref="S4.SS1.p2.4.m1.2.2.4.cmml"><mi id="S4.SS1.p2.4.m1.2.2.4.2" xref="S4.SS1.p2.4.m1.2.2.4.2.cmml">p</mi><mi id="S4.SS1.p2.4.m1.2.2.4.3" xref="S4.SS1.p2.4.m1.2.2.4.3.cmml">θ</mi></msub><mo id="S4.SS1.p2.4.m1.2.2.2a" xref="S4.SS1.p2.4.m1.2.2.2.cmml">⁢</mo><mrow id="S4.SS1.p2.4.m1.2.2.1.1" xref="S4.SS1.p2.4.m1.2.2.1.1.1.cmml"><mo id="S4.SS1.p2.4.m1.2.2.1.1.2" stretchy="false" xref="S4.SS1.p2.4.m1.2.2.1.1.1.cmml">(</mo><mrow id="S4.SS1.p2.4.m1.2.2.1.1.1" xref="S4.SS1.p2.4.m1.2.2.1.1.1.cmml"><msub id="S4.SS1.p2.4.m1.2.2.1.1.1.5" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5.cmml"><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.5.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5.2.cmml">x</mi><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.5.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5.3.cmml">i</mi></msub><mo fence="false" id="S4.SS1.p2.4.m1.2.2.1.1.1.4" xref="S4.SS1.p2.4.m1.2.2.1.1.1.4.cmml">|</mo><mrow id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.4.cmml"><msub id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.2.cmml">x</mi><mn id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.4" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.4.cmml">,</mo><msub id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.cmml"><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.2.cmml">x</mi><mn id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.3.cmml">1</mn></msub><mo id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.5" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.4.cmml">,</mo><mi id="S4.SS1.p2.4.m1.1.1" mathvariant="normal" xref="S4.SS1.p2.4.m1.1.1.cmml">…</mi><mo id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.6" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.4.cmml">,</mo><msub id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.cmml"><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.2.cmml">x</mi><mrow id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.cmml"><mi id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.2" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.2.cmml">i</mi><mo id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.1" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.1.cmml">−</mo><mn id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.3" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.3.cmml">1</mn></mrow></msub></mrow></mrow><mo id="S4.SS1.p2.4.m1.2.2.1.1.3" stretchy="false" xref="S4.SS1.p2.4.m1.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.4.m1.2b"><apply id="S4.SS1.p2.4.m1.2.2.cmml" xref="S4.SS1.p2.4.m1.2.2"><times id="S4.SS1.p2.4.m1.2.2.2.cmml" xref="S4.SS1.p2.4.m1.2.2.2"></times><ci id="S4.SS1.p2.4.m1.2.2.3.cmml" xref="S4.SS1.p2.4.m1.2.2.3">log</ci><apply id="S4.SS1.p2.4.m1.2.2.4.cmml" xref="S4.SS1.p2.4.m1.2.2.4"><csymbol cd="ambiguous" id="S4.SS1.p2.4.m1.2.2.4.1.cmml" xref="S4.SS1.p2.4.m1.2.2.4">subscript</csymbol><ci id="S4.SS1.p2.4.m1.2.2.4.2.cmml" xref="S4.SS1.p2.4.m1.2.2.4.2">𝑝</ci><ci id="S4.SS1.p2.4.m1.2.2.4.3.cmml" xref="S4.SS1.p2.4.m1.2.2.4.3">𝜃</ci></apply><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1"><csymbol cd="latexml" id="S4.SS1.p2.4.m1.2.2.1.1.1.4.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.4">conditional</csymbol><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.5.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5"><csymbol cd="ambiguous" id="S4.SS1.p2.4.m1.2.2.1.1.1.5.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5">subscript</csymbol><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.5.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5.2">𝑥</ci><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.5.3.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.5.3">𝑖</ci></apply><list id="S4.SS1.p2.4.m1.2.2.1.1.1.3.4.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3"><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.2">𝑥</ci><cn id="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.3.cmml" type="integer" xref="S4.SS1.p2.4.m1.2.2.1.1.1.1.1.1.3">0</cn></apply><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2">subscript</csymbol><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.2">𝑥</ci><cn id="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.3.cmml" type="integer" xref="S4.SS1.p2.4.m1.2.2.1.1.1.2.2.2.3">1</cn></apply><ci id="S4.SS1.p2.4.m1.1.1.cmml" xref="S4.SS1.p2.4.m1.1.1">…</ci><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3">subscript</csymbol><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.2">𝑥</ci><apply id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3"><minus id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.1.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.1"></minus><ci id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.2.cmml" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.2">𝑖</ci><cn id="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.3.cmml" type="integer" xref="S4.SS1.p2.4.m1.2.2.1.1.1.3.3.3.3.3">1</cn></apply></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.4.m1.2c">\mathrm{log}p_{\theta}(x_{i}|x_{0},x_{1},...,x_{i-1})</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.4.m1.2d">roman_log italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT )</annotation></semantics></math> calculates the log-likelihood of generating <math alttext="x_{i}" class="ltx_Math" display="inline" id="S4.SS1.p2.5.m2.1"><semantics id="S4.SS1.p2.5.m2.1a"><msub id="S4.SS1.p2.5.m2.1.1" xref="S4.SS1.p2.5.m2.1.1.cmml"><mi id="S4.SS1.p2.5.m2.1.1.2" xref="S4.SS1.p2.5.m2.1.1.2.cmml">x</mi><mi id="S4.SS1.p2.5.m2.1.1.3" xref="S4.SS1.p2.5.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.5.m2.1b"><apply id="S4.SS1.p2.5.m2.1.1.cmml" xref="S4.SS1.p2.5.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.5.m2.1.1.1.cmml" xref="S4.SS1.p2.5.m2.1.1">subscript</csymbol><ci id="S4.SS1.p2.5.m2.1.1.2.cmml" xref="S4.SS1.p2.5.m2.1.1.2">𝑥</ci><ci id="S4.SS1.p2.5.m2.1.1.3.cmml" xref="S4.SS1.p2.5.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.5.m2.1c">x_{i}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.5.m2.1d">italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> given the preceding tokens <math alttext="x_{0},x_{1},...,x_{i-1}" class="ltx_Math" display="inline" id="S4.SS1.p2.6.m3.4"><semantics id="S4.SS1.p2.6.m3.4a"><mrow id="S4.SS1.p2.6.m3.4.4.3" xref="S4.SS1.p2.6.m3.4.4.4.cmml"><msub id="S4.SS1.p2.6.m3.2.2.1.1" xref="S4.SS1.p2.6.m3.2.2.1.1.cmml"><mi id="S4.SS1.p2.6.m3.2.2.1.1.2" xref="S4.SS1.p2.6.m3.2.2.1.1.2.cmml">x</mi><mn id="S4.SS1.p2.6.m3.2.2.1.1.3" xref="S4.SS1.p2.6.m3.2.2.1.1.3.cmml">0</mn></msub><mo id="S4.SS1.p2.6.m3.4.4.3.4" xref="S4.SS1.p2.6.m3.4.4.4.cmml">,</mo><msub id="S4.SS1.p2.6.m3.3.3.2.2" xref="S4.SS1.p2.6.m3.3.3.2.2.cmml"><mi id="S4.SS1.p2.6.m3.3.3.2.2.2" xref="S4.SS1.p2.6.m3.3.3.2.2.2.cmml">x</mi><mn id="S4.SS1.p2.6.m3.3.3.2.2.3" xref="S4.SS1.p2.6.m3.3.3.2.2.3.cmml">1</mn></msub><mo id="S4.SS1.p2.6.m3.4.4.3.5" xref="S4.SS1.p2.6.m3.4.4.4.cmml">,</mo><mi id="S4.SS1.p2.6.m3.1.1" mathvariant="normal" xref="S4.SS1.p2.6.m3.1.1.cmml">…</mi><mo id="S4.SS1.p2.6.m3.4.4.3.6" xref="S4.SS1.p2.6.m3.4.4.4.cmml">,</mo><msub id="S4.SS1.p2.6.m3.4.4.3.3" xref="S4.SS1.p2.6.m3.4.4.3.3.cmml"><mi id="S4.SS1.p2.6.m3.4.4.3.3.2" xref="S4.SS1.p2.6.m3.4.4.3.3.2.cmml">x</mi><mrow id="S4.SS1.p2.6.m3.4.4.3.3.3" xref="S4.SS1.p2.6.m3.4.4.3.3.3.cmml"><mi id="S4.SS1.p2.6.m3.4.4.3.3.3.2" xref="S4.SS1.p2.6.m3.4.4.3.3.3.2.cmml">i</mi><mo id="S4.SS1.p2.6.m3.4.4.3.3.3.1" xref="S4.SS1.p2.6.m3.4.4.3.3.3.1.cmml">−</mo><mn id="S4.SS1.p2.6.m3.4.4.3.3.3.3" xref="S4.SS1.p2.6.m3.4.4.3.3.3.3.cmml">1</mn></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.6.m3.4b"><list id="S4.SS1.p2.6.m3.4.4.4.cmml" xref="S4.SS1.p2.6.m3.4.4.3"><apply id="S4.SS1.p2.6.m3.2.2.1.1.cmml" xref="S4.SS1.p2.6.m3.2.2.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.6.m3.2.2.1.1.1.cmml" xref="S4.SS1.p2.6.m3.2.2.1.1">subscript</csymbol><ci id="S4.SS1.p2.6.m3.2.2.1.1.2.cmml" xref="S4.SS1.p2.6.m3.2.2.1.1.2">𝑥</ci><cn id="S4.SS1.p2.6.m3.2.2.1.1.3.cmml" type="integer" xref="S4.SS1.p2.6.m3.2.2.1.1.3">0</cn></apply><apply id="S4.SS1.p2.6.m3.3.3.2.2.cmml" xref="S4.SS1.p2.6.m3.3.3.2.2"><csymbol cd="ambiguous" id="S4.SS1.p2.6.m3.3.3.2.2.1.cmml" xref="S4.SS1.p2.6.m3.3.3.2.2">subscript</csymbol><ci id="S4.SS1.p2.6.m3.3.3.2.2.2.cmml" xref="S4.SS1.p2.6.m3.3.3.2.2.2">𝑥</ci><cn id="S4.SS1.p2.6.m3.3.3.2.2.3.cmml" type="integer" xref="S4.SS1.p2.6.m3.3.3.2.2.3">1</cn></apply><ci id="S4.SS1.p2.6.m3.1.1.cmml" xref="S4.SS1.p2.6.m3.1.1">…</ci><apply id="S4.SS1.p2.6.m3.4.4.3.3.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3"><csymbol cd="ambiguous" id="S4.SS1.p2.6.m3.4.4.3.3.1.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3">subscript</csymbol><ci id="S4.SS1.p2.6.m3.4.4.3.3.2.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3.2">𝑥</ci><apply id="S4.SS1.p2.6.m3.4.4.3.3.3.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3.3"><minus id="S4.SS1.p2.6.m3.4.4.3.3.3.1.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3.3.1"></minus><ci id="S4.SS1.p2.6.m3.4.4.3.3.3.2.cmml" xref="S4.SS1.p2.6.m3.4.4.3.3.3.2">𝑖</ci><cn id="S4.SS1.p2.6.m3.4.4.3.3.3.3.cmml" type="integer" xref="S4.SS1.p2.6.m3.4.4.3.3.3.3">1</cn></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.6.m3.4c">x_{0},x_{1},...,x_{i-1}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.6.m3.4d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT</annotation></semantics></math>. From Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.F2" title="Figure 2 ‣ 4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">2</span></a>, we empirically observe that LLMs exhibit the lowest perplexity when generating safe responses compared to general-domain or harmful responses. This observation suggests a deliberate effort by developers to reinforce safety alignment. Intuitively, safety-aligned LLMs are inclined to respond to queries in a benign and responsible manner <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib3" title="">3</a>]</cite>, implying a preference against harmful knowledge. Consequently, this preference results in higher perplexity when generating harmful responses.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">Motivated by this finding, we propose curating general-domain texts to reduce their perplexity, positioning them as alternatives to explicitly safe texts, which are more expensive and harder to collect <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib22" title="">22</a>]</cite>. Although low-perplexity texts do not always perform “safely” from the LLMs’ perspective, they tend to reinforce the model’s preference for benign responses. This helps prevent the influence of harmful texts that could distort the LLMs’ alignment, effectively mitigating the risk of jailbreaking. In Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5" title="5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">5</span></a>, we experimentally verify the validity of our method.</p>
</div>
<div class="ltx_para" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p4.1.1">Text Quality</span> In addition to perplexity, we also take into account <span class="ltx_text ltx_font_italic" id="S4.SS1.p4.1.2">readability</span> and <span class="ltx_text ltx_font_italic" id="S4.SS1.p4.1.3">helpfulness</span> to ensure that curated low-perplexity texts are not only meaningful but also contain useful knowledge.</p>
</div>
<div class="ltx_para ltx_minipage ltx_align_middle" id="S4.SS1.10" style="width:229.8pt;">
<p class="ltx_p" id="S4.SS1.10.10"><span class="ltx_text ltx_font_italic ltx_framed ltx_framed_underline" id="S4.SS1.10.10.1">Readability</span> ensures curated texts maintain consistent meaning through human inspection. We evaluate text readability using sentence POS tags <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib49" title="">49</a>]</cite> to gauge their resemblance to human language structure since
it assigns each word a specific grammatical role within the sentence.
As outlined in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#alg1" title="In 4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">1</span></a>, given a sentence <math alttext="S" class="ltx_Math" display="inline" id="S4.SS1.1.1.m1.1"><semantics id="S4.SS1.1.1.m1.1a"><mi id="S4.SS1.1.1.m1.1.1" xref="S4.SS1.1.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.1.1.m1.1b"><ci id="S4.SS1.1.1.m1.1.1.cmml" xref="S4.SS1.1.1.m1.1.1">𝑆</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.1.1.m1.1c">S</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.1.1.m1.1d">italic_S</annotation></semantics></math>, we first convert it into a sequence of POS tags <math alttext="T_{S}" class="ltx_Math" display="inline" id="S4.SS1.2.2.m2.1"><semantics id="S4.SS1.2.2.m2.1a"><msub id="S4.SS1.2.2.m2.1.1" xref="S4.SS1.2.2.m2.1.1.cmml"><mi id="S4.SS1.2.2.m2.1.1.2" xref="S4.SS1.2.2.m2.1.1.2.cmml">T</mi><mi id="S4.SS1.2.2.m2.1.1.3" xref="S4.SS1.2.2.m2.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.2.2.m2.1b"><apply id="S4.SS1.2.2.m2.1.1.cmml" xref="S4.SS1.2.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.2.2.m2.1.1.1.cmml" xref="S4.SS1.2.2.m2.1.1">subscript</csymbol><ci id="S4.SS1.2.2.m2.1.1.2.cmml" xref="S4.SS1.2.2.m2.1.1.2">𝑇</ci><ci id="S4.SS1.2.2.m2.1.1.3.cmml" xref="S4.SS1.2.2.m2.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.2.2.m2.1c">T_{S}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.2.2.m2.1d">italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math>. Subsequently, we utilize a vast collection of sentences
<math alttext="C" class="ltx_Math" display="inline" id="S4.SS1.3.3.m3.1"><semantics id="S4.SS1.3.3.m3.1a"><mi id="S4.SS1.3.3.m3.1.1" xref="S4.SS1.3.3.m3.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.3.3.m3.1b"><ci id="S4.SS1.3.3.m3.1.1.cmml" xref="S4.SS1.3.3.m3.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.3.3.m3.1c">C</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.3.3.m3.1d">italic_C</annotation></semantics></math> to obtain the POS tags corpus.
As <math alttext="C" class="ltx_Math" display="inline" id="S4.SS1.4.4.m4.1"><semantics id="S4.SS1.4.4.m4.1a"><mi id="S4.SS1.4.4.m4.1.1" xref="S4.SS1.4.4.m4.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.4.4.m4.1b"><ci id="S4.SS1.4.4.m4.1.1.cmml" xref="S4.SS1.4.4.m4.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.4.4.m4.1c">C</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.4.4.m4.1d">italic_C</annotation></semantics></math> encloses diverse human language styles<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>In our implementation, we utilize the NLTK Brown Corpus, which comprises over 50,000 sentences.</span></span></span>, its POS tags are expected to reflect a broad spectrum of textual structures.
The POS tags <math alttext="T_{x}" class="ltx_Math" display="inline" id="S4.SS1.5.5.m5.1"><semantics id="S4.SS1.5.5.m5.1a"><msub id="S4.SS1.5.5.m5.1.1" xref="S4.SS1.5.5.m5.1.1.cmml"><mi id="S4.SS1.5.5.m5.1.1.2" xref="S4.SS1.5.5.m5.1.1.2.cmml">T</mi><mi id="S4.SS1.5.5.m5.1.1.3" xref="S4.SS1.5.5.m5.1.1.3.cmml">x</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.5.5.m5.1b"><apply id="S4.SS1.5.5.m5.1.1.cmml" xref="S4.SS1.5.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS1.5.5.m5.1.1.1.cmml" xref="S4.SS1.5.5.m5.1.1">subscript</csymbol><ci id="S4.SS1.5.5.m5.1.1.2.cmml" xref="S4.SS1.5.5.m5.1.1.2">𝑇</ci><ci id="S4.SS1.5.5.m5.1.1.3.cmml" xref="S4.SS1.5.5.m5.1.1.3">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.5.5.m5.1c">T_{x}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.5.5.m5.1d">italic_T start_POSTSUBSCRIPT italic_x end_POSTSUBSCRIPT</annotation></semantics></math> are matched with <math alttext="T_{S}" class="ltx_Math" display="inline" id="S4.SS1.6.6.m6.1"><semantics id="S4.SS1.6.6.m6.1a"><msub id="S4.SS1.6.6.m6.1.1" xref="S4.SS1.6.6.m6.1.1.cmml"><mi id="S4.SS1.6.6.m6.1.1.2" xref="S4.SS1.6.6.m6.1.1.2.cmml">T</mi><mi id="S4.SS1.6.6.m6.1.1.3" xref="S4.SS1.6.6.m6.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.6.6.m6.1b"><apply id="S4.SS1.6.6.m6.1.1.cmml" xref="S4.SS1.6.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS1.6.6.m6.1.1.1.cmml" xref="S4.SS1.6.6.m6.1.1">subscript</csymbol><ci id="S4.SS1.6.6.m6.1.1.2.cmml" xref="S4.SS1.6.6.m6.1.1.2">𝑇</ci><ci id="S4.SS1.6.6.m6.1.1.3.cmml" xref="S4.SS1.6.6.m6.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.6.6.m6.1c">T_{S}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.6.6.m6.1d">italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math> for each sentence <math alttext="x\in C" class="ltx_Math" display="inline" id="S4.SS1.7.7.m7.1"><semantics id="S4.SS1.7.7.m7.1a"><mrow id="S4.SS1.7.7.m7.1.1" xref="S4.SS1.7.7.m7.1.1.cmml"><mi id="S4.SS1.7.7.m7.1.1.2" xref="S4.SS1.7.7.m7.1.1.2.cmml">x</mi><mo id="S4.SS1.7.7.m7.1.1.1" xref="S4.SS1.7.7.m7.1.1.1.cmml">∈</mo><mi id="S4.SS1.7.7.m7.1.1.3" xref="S4.SS1.7.7.m7.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.7.7.m7.1b"><apply id="S4.SS1.7.7.m7.1.1.cmml" xref="S4.SS1.7.7.m7.1.1"><in id="S4.SS1.7.7.m7.1.1.1.cmml" xref="S4.SS1.7.7.m7.1.1.1"></in><ci id="S4.SS1.7.7.m7.1.1.2.cmml" xref="S4.SS1.7.7.m7.1.1.2">𝑥</ci><ci id="S4.SS1.7.7.m7.1.1.3.cmml" xref="S4.SS1.7.7.m7.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.7.7.m7.1c">x\in C</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.7.7.m7.1d">italic_x ∈ italic_C</annotation></semantics></math> while the longest common subsequence <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib9" title="">9</a>]</cite> is identified as the matched tags.
The ratio of matched tags with the longest length in <math alttext="T_{S}" class="ltx_Math" display="inline" id="S4.SS1.8.8.m8.1"><semantics id="S4.SS1.8.8.m8.1a"><msub id="S4.SS1.8.8.m8.1.1" xref="S4.SS1.8.8.m8.1.1.cmml"><mi id="S4.SS1.8.8.m8.1.1.2" xref="S4.SS1.8.8.m8.1.1.2.cmml">T</mi><mi id="S4.SS1.8.8.m8.1.1.3" xref="S4.SS1.8.8.m8.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.8.8.m8.1b"><apply id="S4.SS1.8.8.m8.1.1.cmml" xref="S4.SS1.8.8.m8.1.1"><csymbol cd="ambiguous" id="S4.SS1.8.8.m8.1.1.1.cmml" xref="S4.SS1.8.8.m8.1.1">subscript</csymbol><ci id="S4.SS1.8.8.m8.1.1.2.cmml" xref="S4.SS1.8.8.m8.1.1.2">𝑇</ci><ci id="S4.SS1.8.8.m8.1.1.3.cmml" xref="S4.SS1.8.8.m8.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.8.8.m8.1c">T_{S}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.8.8.m8.1d">italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math> serves as the readability score <math alttext="\mathcal{R}_{S}" class="ltx_Math" display="inline" id="S4.SS1.9.9.m9.1"><semantics id="S4.SS1.9.9.m9.1a"><msub id="S4.SS1.9.9.m9.1.1" xref="S4.SS1.9.9.m9.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS1.9.9.m9.1.1.2" xref="S4.SS1.9.9.m9.1.1.2.cmml">ℛ</mi><mi id="S4.SS1.9.9.m9.1.1.3" xref="S4.SS1.9.9.m9.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.9.9.m9.1b"><apply id="S4.SS1.9.9.m9.1.1.cmml" xref="S4.SS1.9.9.m9.1.1"><csymbol cd="ambiguous" id="S4.SS1.9.9.m9.1.1.1.cmml" xref="S4.SS1.9.9.m9.1.1">subscript</csymbol><ci id="S4.SS1.9.9.m9.1.1.2.cmml" xref="S4.SS1.9.9.m9.1.1.2">ℛ</ci><ci id="S4.SS1.9.9.m9.1.1.3.cmml" xref="S4.SS1.9.9.m9.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.9.9.m9.1c">\mathcal{R}_{S}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.9.9.m9.1d">caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math>, providing an likelihood estimation that <math alttext="S" class="ltx_Math" display="inline" id="S4.SS1.10.10.m10.1"><semantics id="S4.SS1.10.10.m10.1a"><mi id="S4.SS1.10.10.m10.1.1" xref="S4.SS1.10.10.m10.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.10.10.m10.1b"><ci id="S4.SS1.10.10.m10.1.1.cmml" xref="S4.SS1.10.10.m10.1.1">𝑆</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.10.10.m10.1c">S</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.10.10.m10.1d">italic_S</annotation></semantics></math> resembles human language.</p>
</div>
<figure class="ltx_float ltx_minipage ltx_align_middle" id="alg1" style="width:186.5pt;">
<div class="ltx_listing ltx_lst_numbers_left ltx_listing" id="alg1.10">
<div class="ltx_listingline" id="alg1.2.2">
<span class="ltx_text" id="alg1.2.2.1"><span class="ltx_text ltx_font_bold" id="alg1.2.2.1.1">Input:</span> </span>
<math alttext="S" class="ltx_Math" display="inline" id="alg1.1.1.m1.1"><semantics id="alg1.1.1.m1.1a"><mi id="alg1.1.1.m1.1.1" xref="alg1.1.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="alg1.1.1.m1.1b"><ci id="alg1.1.1.m1.1.1.cmml" xref="alg1.1.1.m1.1.1">𝑆</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.1.1.m1.1c">S</annotation><annotation encoding="application/x-llamapun" id="alg1.1.1.m1.1d">italic_S</annotation></semantics></math> – a sentence; <math alttext="C" class="ltx_Math" display="inline" id="alg1.2.2.m2.1"><semantics id="alg1.2.2.m2.1a"><mi id="alg1.2.2.m2.1.1" xref="alg1.2.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="alg1.2.2.m2.1b"><ci id="alg1.2.2.m2.1.1.cmml" xref="alg1.2.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.2.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="alg1.2.2.m2.1d">italic_C</annotation></semantics></math> – a large-scale collection of natural language sentences;

</div>
<div class="ltx_listingline" id="alg1.3.3">
<span class="ltx_text" id="alg1.3.3.1"><span class="ltx_text ltx_font_bold" id="alg1.3.3.1.1">Output:</span> </span>
<math alttext="\mathcal{R}_{S}" class="ltx_Math" display="inline" id="alg1.3.3.m1.1"><semantics id="alg1.3.3.m1.1a"><msub id="alg1.3.3.m1.1.1" xref="alg1.3.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.3.3.m1.1.1.2" xref="alg1.3.3.m1.1.1.2.cmml">ℛ</mi><mi id="alg1.3.3.m1.1.1.3" xref="alg1.3.3.m1.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.3.3.m1.1b"><apply id="alg1.3.3.m1.1.1.cmml" xref="alg1.3.3.m1.1.1"><csymbol cd="ambiguous" id="alg1.3.3.m1.1.1.1.cmml" xref="alg1.3.3.m1.1.1">subscript</csymbol><ci id="alg1.3.3.m1.1.1.2.cmml" xref="alg1.3.3.m1.1.1.2">ℛ</ci><ci id="alg1.3.3.m1.1.1.3.cmml" xref="alg1.3.3.m1.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.3.3.m1.1c">\mathcal{R}_{S}</annotation><annotation encoding="application/x-llamapun" id="alg1.3.3.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math> – readability score;

</div>
<div class="ltx_listingline" id="alg1.10.11">
<span class="ltx_text ltx_font_typewriter" id="alg1.10.11.1">// </span><span class="ltx_text ltx_font_typewriter" id="alg1.10.11.2">parse POS tags </span>
</div>
<div class="ltx_listingline" id="alg1.4.4">
<span class="ltx_tag ltx_tag_listingline">1</span>
<math alttext="T_{S}\leftarrow\textsc{PosTag}(S)" class="ltx_Math" display="inline" id="alg1.4.4.m1.1"><semantics id="alg1.4.4.m1.1a"><mrow id="alg1.4.4.m1.1.2" xref="alg1.4.4.m1.1.2.cmml"><msub id="alg1.4.4.m1.1.2.2" xref="alg1.4.4.m1.1.2.2.cmml"><mi id="alg1.4.4.m1.1.2.2.2" xref="alg1.4.4.m1.1.2.2.2.cmml">T</mi><mi id="alg1.4.4.m1.1.2.2.3" xref="alg1.4.4.m1.1.2.2.3.cmml">S</mi></msub><mo id="alg1.4.4.m1.1.2.1" stretchy="false" xref="alg1.4.4.m1.1.2.1.cmml">←</mo><mrow id="alg1.4.4.m1.1.2.3" xref="alg1.4.4.m1.1.2.3.cmml"><mtext class="ltx_font_smallcaps" id="alg1.4.4.m1.1.2.3.2" xref="alg1.4.4.m1.1.2.3.2a.cmml">PosTag</mtext><mo id="alg1.4.4.m1.1.2.3.1" xref="alg1.4.4.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg1.4.4.m1.1.2.3.3.2" xref="alg1.4.4.m1.1.2.3.cmml"><mo id="alg1.4.4.m1.1.2.3.3.2.1" stretchy="false" xref="alg1.4.4.m1.1.2.3.cmml">(</mo><mi id="alg1.4.4.m1.1.1" xref="alg1.4.4.m1.1.1.cmml">S</mi><mo id="alg1.4.4.m1.1.2.3.3.2.2" stretchy="false" xref="alg1.4.4.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.4.4.m1.1b"><apply id="alg1.4.4.m1.1.2.cmml" xref="alg1.4.4.m1.1.2"><ci id="alg1.4.4.m1.1.2.1.cmml" xref="alg1.4.4.m1.1.2.1">←</ci><apply id="alg1.4.4.m1.1.2.2.cmml" xref="alg1.4.4.m1.1.2.2"><csymbol cd="ambiguous" id="alg1.4.4.m1.1.2.2.1.cmml" xref="alg1.4.4.m1.1.2.2">subscript</csymbol><ci id="alg1.4.4.m1.1.2.2.2.cmml" xref="alg1.4.4.m1.1.2.2.2">𝑇</ci><ci id="alg1.4.4.m1.1.2.2.3.cmml" xref="alg1.4.4.m1.1.2.2.3">𝑆</ci></apply><apply id="alg1.4.4.m1.1.2.3.cmml" xref="alg1.4.4.m1.1.2.3"><times id="alg1.4.4.m1.1.2.3.1.cmml" xref="alg1.4.4.m1.1.2.3.1"></times><ci id="alg1.4.4.m1.1.2.3.2a.cmml" xref="alg1.4.4.m1.1.2.3.2"><mtext class="ltx_font_smallcaps" id="alg1.4.4.m1.1.2.3.2.cmml" xref="alg1.4.4.m1.1.2.3.2">PosTag</mtext></ci><ci id="alg1.4.4.m1.1.1.cmml" xref="alg1.4.4.m1.1.1">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.4.4.m1.1c">T_{S}\leftarrow\textsc{PosTag}(S)</annotation><annotation encoding="application/x-llamapun" id="alg1.4.4.m1.1d">italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ← PosTag ( italic_S )</annotation></semantics></math> ;
</div>
<div class="ltx_listingline" id="alg1.5.5">
<span class="ltx_tag ltx_tag_listingline">2</span>
<math alttext="\mathcal{R}_{S}\leftarrow 0" class="ltx_Math" display="inline" id="alg1.5.5.m1.1"><semantics id="alg1.5.5.m1.1a"><mrow id="alg1.5.5.m1.1.1" xref="alg1.5.5.m1.1.1.cmml"><msub id="alg1.5.5.m1.1.1.2" xref="alg1.5.5.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.5.5.m1.1.1.2.2" xref="alg1.5.5.m1.1.1.2.2.cmml">ℛ</mi><mi id="alg1.5.5.m1.1.1.2.3" xref="alg1.5.5.m1.1.1.2.3.cmml">S</mi></msub><mo id="alg1.5.5.m1.1.1.1" stretchy="false" xref="alg1.5.5.m1.1.1.1.cmml">←</mo><mn id="alg1.5.5.m1.1.1.3" xref="alg1.5.5.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.5.5.m1.1b"><apply id="alg1.5.5.m1.1.1.cmml" xref="alg1.5.5.m1.1.1"><ci id="alg1.5.5.m1.1.1.1.cmml" xref="alg1.5.5.m1.1.1.1">←</ci><apply id="alg1.5.5.m1.1.1.2.cmml" xref="alg1.5.5.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.5.5.m1.1.1.2.1.cmml" xref="alg1.5.5.m1.1.1.2">subscript</csymbol><ci id="alg1.5.5.m1.1.1.2.2.cmml" xref="alg1.5.5.m1.1.1.2.2">ℛ</ci><ci id="alg1.5.5.m1.1.1.2.3.cmml" xref="alg1.5.5.m1.1.1.2.3">𝑆</ci></apply><cn id="alg1.5.5.m1.1.1.3.cmml" type="integer" xref="alg1.5.5.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.5.5.m1.1c">\mathcal{R}_{S}\leftarrow 0</annotation><annotation encoding="application/x-llamapun" id="alg1.5.5.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ← 0</annotation></semantics></math> ;
</div>
<div class="ltx_listingline" id="alg1.10.12">
<span class="ltx_tag ltx_tag_listingline">3</span>
</div>
<div class="ltx_listingline" id="alg1.6.6">
<span class="ltx_tag ltx_tag_listingline">4</span><span class="ltx_text ltx_font_bold" id="alg1.6.6.2">foreach</span> <em class="ltx_emph ltx_font_italic" id="alg1.6.6.1">sentence <math alttext="x\in C" class="ltx_Math" display="inline" id="alg1.6.6.1.m1.1"><semantics id="alg1.6.6.1.m1.1a"><mrow id="alg1.6.6.1.m1.1.1" xref="alg1.6.6.1.m1.1.1.cmml"><mi id="alg1.6.6.1.m1.1.1.2" xref="alg1.6.6.1.m1.1.1.2.cmml">x</mi><mo id="alg1.6.6.1.m1.1.1.1" xref="alg1.6.6.1.m1.1.1.1.cmml">∈</mo><mi id="alg1.6.6.1.m1.1.1.3" xref="alg1.6.6.1.m1.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.6.6.1.m1.1b"><apply id="alg1.6.6.1.m1.1.1.cmml" xref="alg1.6.6.1.m1.1.1"><in id="alg1.6.6.1.m1.1.1.1.cmml" xref="alg1.6.6.1.m1.1.1.1"></in><ci id="alg1.6.6.1.m1.1.1.2.cmml" xref="alg1.6.6.1.m1.1.1.2">𝑥</ci><ci id="alg1.6.6.1.m1.1.1.3.cmml" xref="alg1.6.6.1.m1.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.6.6.1.m1.1c">x\in C</annotation><annotation encoding="application/x-llamapun" id="alg1.6.6.1.m1.1d">italic_x ∈ italic_C</annotation></semantics></math></em> <span class="ltx_text ltx_font_bold" id="alg1.6.6.3">do</span>
</div>
<div class="ltx_listingline" id="alg1.7.7">
<span class="ltx_tag ltx_tag_listingline">5</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<math alttext="T_{x}\leftarrow\textsc{PosTag}(x)" class="ltx_Math" display="inline" id="alg1.7.7.m1.1"><semantics id="alg1.7.7.m1.1a"><mrow id="alg1.7.7.m1.1.2" xref="alg1.7.7.m1.1.2.cmml"><msub id="alg1.7.7.m1.1.2.2" xref="alg1.7.7.m1.1.2.2.cmml"><mi id="alg1.7.7.m1.1.2.2.2" xref="alg1.7.7.m1.1.2.2.2.cmml">T</mi><mi id="alg1.7.7.m1.1.2.2.3" xref="alg1.7.7.m1.1.2.2.3.cmml">x</mi></msub><mo id="alg1.7.7.m1.1.2.1" stretchy="false" xref="alg1.7.7.m1.1.2.1.cmml">←</mo><mrow id="alg1.7.7.m1.1.2.3" xref="alg1.7.7.m1.1.2.3.cmml"><mtext class="ltx_font_smallcaps" id="alg1.7.7.m1.1.2.3.2" xref="alg1.7.7.m1.1.2.3.2a.cmml">PosTag</mtext><mo id="alg1.7.7.m1.1.2.3.1" xref="alg1.7.7.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg1.7.7.m1.1.2.3.3.2" xref="alg1.7.7.m1.1.2.3.cmml"><mo id="alg1.7.7.m1.1.2.3.3.2.1" stretchy="false" xref="alg1.7.7.m1.1.2.3.cmml">(</mo><mi id="alg1.7.7.m1.1.1" xref="alg1.7.7.m1.1.1.cmml">x</mi><mo id="alg1.7.7.m1.1.2.3.3.2.2" stretchy="false" xref="alg1.7.7.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.7.7.m1.1b"><apply id="alg1.7.7.m1.1.2.cmml" xref="alg1.7.7.m1.1.2"><ci id="alg1.7.7.m1.1.2.1.cmml" xref="alg1.7.7.m1.1.2.1">←</ci><apply id="alg1.7.7.m1.1.2.2.cmml" xref="alg1.7.7.m1.1.2.2"><csymbol cd="ambiguous" id="alg1.7.7.m1.1.2.2.1.cmml" xref="alg1.7.7.m1.1.2.2">subscript</csymbol><ci id="alg1.7.7.m1.1.2.2.2.cmml" xref="alg1.7.7.m1.1.2.2.2">𝑇</ci><ci id="alg1.7.7.m1.1.2.2.3.cmml" xref="alg1.7.7.m1.1.2.2.3">𝑥</ci></apply><apply id="alg1.7.7.m1.1.2.3.cmml" xref="alg1.7.7.m1.1.2.3"><times id="alg1.7.7.m1.1.2.3.1.cmml" xref="alg1.7.7.m1.1.2.3.1"></times><ci id="alg1.7.7.m1.1.2.3.2a.cmml" xref="alg1.7.7.m1.1.2.3.2"><mtext class="ltx_font_smallcaps" id="alg1.7.7.m1.1.2.3.2.cmml" xref="alg1.7.7.m1.1.2.3.2">PosTag</mtext></ci><ci id="alg1.7.7.m1.1.1.cmml" xref="alg1.7.7.m1.1.1">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.7.7.m1.1c">T_{x}\leftarrow\textsc{PosTag}(x)</annotation><annotation encoding="application/x-llamapun" id="alg1.7.7.m1.1d">italic_T start_POSTSUBSCRIPT italic_x end_POSTSUBSCRIPT ← PosTag ( italic_x )</annotation></semantics></math> ;
</div>
<div class="ltx_listingline" id="alg1.10.13">
<span class="ltx_tag ltx_tag_listingline">6</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div class="ltx_listingline" id="alg1.10.14">  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   <span class="ltx_text ltx_font_typewriter" id="alg1.10.14.1">// </span><span class="ltx_text ltx_font_typewriter" id="alg1.10.14.2">longest common tags </span>
</div>
<div class="ltx_listingline" id="alg1.8.8">
<span class="ltx_tag ltx_tag_listingline">7</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<span class="ltx_text ltx_font_italic" id="alg1.8.8.2">lct</span> = <span class="ltx_text ltx_font_smallcaps" id="alg1.8.8.1">Lct<math alttext="(T_{S},T_{x})" class="ltx_Math" display="inline" id="alg1.8.8.1.m1.2"><semantics id="alg1.8.8.1.m1.2a"><mrow id="alg1.8.8.1.m1.2.2.2" xref="alg1.8.8.1.m1.2.2.3.cmml"><mo id="alg1.8.8.1.m1.2.2.2.3" stretchy="false" xref="alg1.8.8.1.m1.2.2.3.cmml">(</mo><msub id="alg1.8.8.1.m1.1.1.1.1" xref="alg1.8.8.1.m1.1.1.1.1.cmml"><mi id="alg1.8.8.1.m1.1.1.1.1.2" xref="alg1.8.8.1.m1.1.1.1.1.2.cmml">T</mi><mi id="alg1.8.8.1.m1.1.1.1.1.3" xref="alg1.8.8.1.m1.1.1.1.1.3.cmml">S</mi></msub><mo id="alg1.8.8.1.m1.2.2.2.4" xref="alg1.8.8.1.m1.2.2.3.cmml">,</mo><msub id="alg1.8.8.1.m1.2.2.2.2" xref="alg1.8.8.1.m1.2.2.2.2.cmml"><mi id="alg1.8.8.1.m1.2.2.2.2.2" xref="alg1.8.8.1.m1.2.2.2.2.2.cmml">T</mi><mi id="alg1.8.8.1.m1.2.2.2.2.3" xref="alg1.8.8.1.m1.2.2.2.2.3.cmml">x</mi></msub><mo id="alg1.8.8.1.m1.2.2.2.5" stretchy="false" xref="alg1.8.8.1.m1.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="alg1.8.8.1.m1.2b"><interval closure="open" id="alg1.8.8.1.m1.2.2.3.cmml" xref="alg1.8.8.1.m1.2.2.2"><apply id="alg1.8.8.1.m1.1.1.1.1.cmml" xref="alg1.8.8.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.8.8.1.m1.1.1.1.1.1.cmml" xref="alg1.8.8.1.m1.1.1.1.1">subscript</csymbol><ci id="alg1.8.8.1.m1.1.1.1.1.2.cmml" xref="alg1.8.8.1.m1.1.1.1.1.2">𝑇</ci><ci id="alg1.8.8.1.m1.1.1.1.1.3.cmml" xref="alg1.8.8.1.m1.1.1.1.1.3">𝑆</ci></apply><apply id="alg1.8.8.1.m1.2.2.2.2.cmml" xref="alg1.8.8.1.m1.2.2.2.2"><csymbol cd="ambiguous" id="alg1.8.8.1.m1.2.2.2.2.1.cmml" xref="alg1.8.8.1.m1.2.2.2.2">subscript</csymbol><ci id="alg1.8.8.1.m1.2.2.2.2.2.cmml" xref="alg1.8.8.1.m1.2.2.2.2.2">𝑇</ci><ci id="alg1.8.8.1.m1.2.2.2.2.3.cmml" xref="alg1.8.8.1.m1.2.2.2.2.3">𝑥</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="alg1.8.8.1.m1.2c">(T_{S},T_{x})</annotation><annotation encoding="application/x-llamapun" id="alg1.8.8.1.m1.2d">( italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT , italic_T start_POSTSUBSCRIPT italic_x end_POSTSUBSCRIPT )</annotation></semantics></math></span> ;
</div>
<div class="ltx_listingline" id="alg1.9.9">
<span class="ltx_tag ltx_tag_listingline">8</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<math alttext="\mathcal{R}_{S}\leftarrow\textsc{Max}(\mathcal{R}_{S},\textsc{Len}(lct)/%
\textsc{Len}(T_{S}))" class="ltx_Math" display="inline" id="alg1.9.9.m1.2"><semantics id="alg1.9.9.m1.2a"><mrow id="alg1.9.9.m1.2.2" xref="alg1.9.9.m1.2.2.cmml"><msub id="alg1.9.9.m1.2.2.4" xref="alg1.9.9.m1.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.9.9.m1.2.2.4.2" xref="alg1.9.9.m1.2.2.4.2.cmml">ℛ</mi><mi id="alg1.9.9.m1.2.2.4.3" xref="alg1.9.9.m1.2.2.4.3.cmml">S</mi></msub><mo id="alg1.9.9.m1.2.2.3" stretchy="false" xref="alg1.9.9.m1.2.2.3.cmml">←</mo><mrow id="alg1.9.9.m1.2.2.2" xref="alg1.9.9.m1.2.2.2.cmml"><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.4" xref="alg1.9.9.m1.2.2.2.4a.cmml">Max</mtext><mo id="alg1.9.9.m1.2.2.2.3" xref="alg1.9.9.m1.2.2.2.3.cmml">⁢</mo><mrow id="alg1.9.9.m1.2.2.2.2.2" xref="alg1.9.9.m1.2.2.2.2.3.cmml"><mo id="alg1.9.9.m1.2.2.2.2.2.3" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.3.cmml">(</mo><msub id="alg1.9.9.m1.1.1.1.1.1.1" xref="alg1.9.9.m1.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.9.9.m1.1.1.1.1.1.1.2" xref="alg1.9.9.m1.1.1.1.1.1.1.2.cmml">ℛ</mi><mi id="alg1.9.9.m1.1.1.1.1.1.1.3" xref="alg1.9.9.m1.1.1.1.1.1.1.3.cmml">S</mi></msub><mo id="alg1.9.9.m1.2.2.2.2.2.4" xref="alg1.9.9.m1.2.2.2.2.3.cmml">,</mo><mrow id="alg1.9.9.m1.2.2.2.2.2.2" xref="alg1.9.9.m1.2.2.2.2.2.2.cmml"><mrow id="alg1.9.9.m1.2.2.2.2.2.2.1" xref="alg1.9.9.m1.2.2.2.2.2.2.1.cmml"><mrow id="alg1.9.9.m1.2.2.2.2.2.2.1.1" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.cmml"><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.2.2.2.1.1.3" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.3a.cmml">Len</mtext><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.1.2" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.2.cmml">⁢</mo><mrow id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.cmml"><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.2" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.cmml">(</mo><mrow id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.cmml"><mi id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.2" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.2.cmml">l</mi><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.3" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.3.cmml">c</mi><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1a" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.4" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.4.cmml">t</mi></mrow><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.3" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.9.9.m1.2.2.2.2.2.2.1.2" xref="alg1.9.9.m1.2.2.2.2.2.2.1.2.cmml">/</mo><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.2.2.2.1.3" xref="alg1.9.9.m1.2.2.2.2.2.2.1.3a.cmml">Len</mtext></mrow><mo id="alg1.9.9.m1.2.2.2.2.2.2.3" xref="alg1.9.9.m1.2.2.2.2.2.2.3.cmml">⁢</mo><mrow id="alg1.9.9.m1.2.2.2.2.2.2.2.1" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.cmml"><mo id="alg1.9.9.m1.2.2.2.2.2.2.2.1.2" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.cmml">(</mo><msub id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.cmml"><mi id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.2" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.2.cmml">T</mi><mi id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.3" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.3.cmml">S</mi></msub><mo id="alg1.9.9.m1.2.2.2.2.2.2.2.1.3" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.9.9.m1.2.2.2.2.2.5" stretchy="false" xref="alg1.9.9.m1.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.9.9.m1.2b"><apply id="alg1.9.9.m1.2.2.cmml" xref="alg1.9.9.m1.2.2"><ci id="alg1.9.9.m1.2.2.3.cmml" xref="alg1.9.9.m1.2.2.3">←</ci><apply id="alg1.9.9.m1.2.2.4.cmml" xref="alg1.9.9.m1.2.2.4"><csymbol cd="ambiguous" id="alg1.9.9.m1.2.2.4.1.cmml" xref="alg1.9.9.m1.2.2.4">subscript</csymbol><ci id="alg1.9.9.m1.2.2.4.2.cmml" xref="alg1.9.9.m1.2.2.4.2">ℛ</ci><ci id="alg1.9.9.m1.2.2.4.3.cmml" xref="alg1.9.9.m1.2.2.4.3">𝑆</ci></apply><apply id="alg1.9.9.m1.2.2.2.cmml" xref="alg1.9.9.m1.2.2.2"><times id="alg1.9.9.m1.2.2.2.3.cmml" xref="alg1.9.9.m1.2.2.2.3"></times><ci id="alg1.9.9.m1.2.2.2.4a.cmml" xref="alg1.9.9.m1.2.2.2.4"><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.4.cmml" xref="alg1.9.9.m1.2.2.2.4">Max</mtext></ci><interval closure="open" id="alg1.9.9.m1.2.2.2.2.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2"><apply id="alg1.9.9.m1.1.1.1.1.1.1.cmml" xref="alg1.9.9.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.9.9.m1.1.1.1.1.1.1.1.cmml" xref="alg1.9.9.m1.1.1.1.1.1.1">subscript</csymbol><ci id="alg1.9.9.m1.1.1.1.1.1.1.2.cmml" xref="alg1.9.9.m1.1.1.1.1.1.1.2">ℛ</ci><ci id="alg1.9.9.m1.1.1.1.1.1.1.3.cmml" xref="alg1.9.9.m1.1.1.1.1.1.1.3">𝑆</ci></apply><apply id="alg1.9.9.m1.2.2.2.2.2.2.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2"><times id="alg1.9.9.m1.2.2.2.2.2.2.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.3"></times><apply id="alg1.9.9.m1.2.2.2.2.2.2.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1"><divide id="alg1.9.9.m1.2.2.2.2.2.2.1.2.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.2"></divide><apply id="alg1.9.9.m1.2.2.2.2.2.2.1.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1"><times id="alg1.9.9.m1.2.2.2.2.2.2.1.1.2.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.2"></times><ci id="alg1.9.9.m1.2.2.2.2.2.2.1.1.3a.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.3"><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.2.2.2.1.1.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.3">Len</mtext></ci><apply id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1"><times id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.1"></times><ci id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.2.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.2">𝑙</ci><ci id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.3">𝑐</ci><ci id="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.4.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.1.1.1.1.4">𝑡</ci></apply></apply><ci id="alg1.9.9.m1.2.2.2.2.2.2.1.3a.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.3"><mtext class="ltx_font_smallcaps" id="alg1.9.9.m1.2.2.2.2.2.2.1.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.1.3">Len</mtext></ci></apply><apply id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1"><csymbol cd="ambiguous" id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.1.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1">subscript</csymbol><ci id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.2.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.2">𝑇</ci><ci id="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.3.cmml" xref="alg1.9.9.m1.2.2.2.2.2.2.2.1.1.3">𝑆</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.9.9.m1.2c">\mathcal{R}_{S}\leftarrow\textsc{Max}(\mathcal{R}_{S},\textsc{Len}(lct)/%
\textsc{Len}(T_{S}))</annotation><annotation encoding="application/x-llamapun" id="alg1.9.9.m1.2d">caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ← Max ( caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT , Len ( italic_l italic_c italic_t ) / Len ( italic_T start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ) )</annotation></semantics></math> ;
</div>
<div class="ltx_listingline" id="alg1.10.15">
<span class="ltx_tag ltx_tag_listingline">9</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div class="ltx_listingline" id="alg1.10.16">
<span class="ltx_tag ltx_tag_listingline">10</span> end foreach
</div>
<div class="ltx_listingline" id="alg1.10.10">
<span class="ltx_tag ltx_tag_listingline">11</span><span class="ltx_text ltx_font_bold" id="alg1.10.10.1">return</span> <math alttext="\mathcal{R}_{S}" class="ltx_Math" display="inline" id="alg1.10.10.m1.1"><semantics id="alg1.10.10.m1.1a"><msub id="alg1.10.10.m1.1.1" xref="alg1.10.10.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.10.10.m1.1.1.2" xref="alg1.10.10.m1.1.1.2.cmml">ℛ</mi><mi id="alg1.10.10.m1.1.1.3" xref="alg1.10.10.m1.1.1.3.cmml">S</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.10.10.m1.1b"><apply id="alg1.10.10.m1.1.1.cmml" xref="alg1.10.10.m1.1.1"><csymbol cd="ambiguous" id="alg1.10.10.m1.1.1.1.cmml" xref="alg1.10.10.m1.1.1">subscript</csymbol><ci id="alg1.10.10.m1.1.1.2.cmml" xref="alg1.10.10.m1.1.1.2">ℛ</ci><ci id="alg1.10.10.m1.1.1.3.cmml" xref="alg1.10.10.m1.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.10.10.m1.1c">\mathcal{R}_{S}</annotation><annotation encoding="application/x-llamapun" id="alg1.10.10.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT</annotation></semantics></math>;
</div>
<div class="ltx_listingline" id="alg1.10.17">
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.12.1.1">Algorithm 1</span> </span>Estimate Readability </figcaption>
</figure>
<div class="ltx_para" id="S4.SS1.p5">
<p class="ltx_p" id="S4.SS1.p5.1"><span class="ltx_text ltx_font_italic ltx_framed ltx_framed_underline" id="S4.SS1.p5.1.1">Helpfulness</span> ascertain that the curated texts encompass valuable knowledge pertinent to a query. To achieve this, we employ a set of prompts to evaluate the helpfulness of LLM responses based on their relevance, clarity, comprehensiveness, and usefulness of knowledge. Detailed rubrics for each principle are presented in Tables <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A1.T5" title="Table 5 ‣ Appendix A Prompts for Scoring Helpfulness ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">5</span></a> through <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A1.T8" title="Table 8 ‣ Appendix A Prompts for Scoring Helpfulness ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">8</span></a>. The overall assessment of helpfulness is derived as the average of these four scores.</p>
</div>
<figure class="ltx_figure" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="285" id="S4.F3.g1" src="x3.png" width="735"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>An illustration of how <span class="ltx_text ltx_font_smallcaps" id="S4.F3.2.1">Ctrl</span> works. PPL:perplexity, Rd: readability, Hp: helpfulness.
</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Methodology</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Next, we introduce <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p1.1.1">Ctrl</span>, a data curation framework designed to counteract jailbreaking attacks in crowdsourced data used for pre-training (Attack I) and downstream fine-tuning (Attack II). Illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.F3" title="Figure 3 ‣ 4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">3</span></a>, <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p1.1.2">Ctrl</span> accepts a <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.3">(Query, Response)</span> pair along with a universal <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.4">Prompt</span> as inputs. Employing various configurations, <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p1.1.5">Ctrl</span> prompts LLMs to generate diverse revised versions of the original <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.6">Response</span>. Following this, <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p1.1.7">Ctrl</span> evaluates each output’s quality and selects the optimal choices through beam search, aiming to decrease perplexity while maintaining readability and usefulness. Below, we delve into the technical details of <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p1.1.8">Ctrl</span>.</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.2"><span class="ltx_text ltx_font_bold" id="S4.SS2.p2.2.1">Design Objective</span> The primary objective of <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p2.2.2">Ctrl</span> is to generate texts with low perplexity. Specifically, for a textual pair <math alttext="(Q,A)" class="ltx_Math" display="inline" id="S4.SS2.p2.1.m1.2"><semantics id="S4.SS2.p2.1.m1.2a"><mrow id="S4.SS2.p2.1.m1.2.3.2" xref="S4.SS2.p2.1.m1.2.3.1.cmml"><mo id="S4.SS2.p2.1.m1.2.3.2.1" stretchy="false" xref="S4.SS2.p2.1.m1.2.3.1.cmml">(</mo><mi id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml">Q</mi><mo id="S4.SS2.p2.1.m1.2.3.2.2" xref="S4.SS2.p2.1.m1.2.3.1.cmml">,</mo><mi id="S4.SS2.p2.1.m1.2.2" xref="S4.SS2.p2.1.m1.2.2.cmml">A</mi><mo id="S4.SS2.p2.1.m1.2.3.2.3" stretchy="false" xref="S4.SS2.p2.1.m1.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.2b"><interval closure="open" id="S4.SS2.p2.1.m1.2.3.1.cmml" xref="S4.SS2.p2.1.m1.2.3.2"><ci id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1">𝑄</ci><ci id="S4.SS2.p2.1.m1.2.2.cmml" xref="S4.SS2.p2.1.m1.2.2">𝐴</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.2c">(Q,A)</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.1.m1.2d">( italic_Q , italic_A )</annotation></semantics></math> representing a query and its corresponding response, our goal is to reduce the perplexity of <math alttext="A" class="ltx_Math" display="inline" id="S4.SS2.p2.2.m2.1"><semantics id="S4.SS2.p2.2.m2.1a"><mi id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><ci id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">A</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.2.m2.1d">italic_A</annotation></semantics></math> while maintaining its readability and helpfulness, as defined in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.1</span></a>. However, unlike tasks such as machine translation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib45" title="">45</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib53" title="">53</a>]</cite> and style transfer <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib36" title="">36</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib38" title="">38</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib40" title="">40</a>]</cite>, it is infeasible for us to train an end-to-end generator with a lack of supervision regarding the characteristics of low-perplexity texts.</p>
</div>
<div class="ltx_para" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.5">Instead, we employ an open-ended generation approach, enabling LLMs to iteratively revise <math alttext="A" class="ltx_Math" display="inline" id="S4.SS2.p3.1.m1.1"><semantics id="S4.SS2.p3.1.m1.1a"><mi id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><ci id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.1.m1.1d">italic_A</annotation></semantics></math>. For each <math alttext="(Q,A)" class="ltx_Math" display="inline" id="S4.SS2.p3.2.m2.2"><semantics id="S4.SS2.p3.2.m2.2a"><mrow id="S4.SS2.p3.2.m2.2.3.2" xref="S4.SS2.p3.2.m2.2.3.1.cmml"><mo id="S4.SS2.p3.2.m2.2.3.2.1" stretchy="false" xref="S4.SS2.p3.2.m2.2.3.1.cmml">(</mo><mi id="S4.SS2.p3.2.m2.1.1" xref="S4.SS2.p3.2.m2.1.1.cmml">Q</mi><mo id="S4.SS2.p3.2.m2.2.3.2.2" xref="S4.SS2.p3.2.m2.2.3.1.cmml">,</mo><mi id="S4.SS2.p3.2.m2.2.2" xref="S4.SS2.p3.2.m2.2.2.cmml">A</mi><mo id="S4.SS2.p3.2.m2.2.3.2.3" stretchy="false" xref="S4.SS2.p3.2.m2.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.2.m2.2b"><interval closure="open" id="S4.SS2.p3.2.m2.2.3.1.cmml" xref="S4.SS2.p3.2.m2.2.3.2"><ci id="S4.SS2.p3.2.m2.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1">𝑄</ci><ci id="S4.SS2.p3.2.m2.2.2.cmml" xref="S4.SS2.p3.2.m2.2.2">𝐴</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.2.m2.2c">(Q,A)</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.2.m2.2d">( italic_Q , italic_A )</annotation></semantics></math> pair, we augment them with a prompt <math alttext="P" class="ltx_Math" display="inline" id="S4.SS2.p3.3.m3.1"><semantics id="S4.SS2.p3.3.m3.1a"><mi id="S4.SS2.p3.3.m3.1.1" xref="S4.SS2.p3.3.m3.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.3.m3.1b"><ci id="S4.SS2.p3.3.m3.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.3.m3.1c">P</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.3.m3.1d">italic_P</annotation></semantics></math> – ”Given a query and its response, revise the response statements to present an alternative perspective in answering the query.” <math alttext="P" class="ltx_Math" display="inline" id="S4.SS2.p3.4.m4.1"><semantics id="S4.SS2.p3.4.m4.1a"><mi id="S4.SS2.p3.4.m4.1.1" xref="S4.SS2.p3.4.m4.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.4.m4.1b"><ci id="S4.SS2.p3.4.m4.1.1.cmml" xref="S4.SS2.p3.4.m4.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.4.m4.1c">P</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.4.m4.1d">italic_P</annotation></semantics></math> serves as a guide to LLMs in enhancing text curation with the input triplet <math alttext="(Q,A,P)" class="ltx_Math" display="inline" id="S4.SS2.p3.5.m5.3"><semantics id="S4.SS2.p3.5.m5.3a"><mrow id="S4.SS2.p3.5.m5.3.4.2" xref="S4.SS2.p3.5.m5.3.4.1.cmml"><mo id="S4.SS2.p3.5.m5.3.4.2.1" stretchy="false" xref="S4.SS2.p3.5.m5.3.4.1.cmml">(</mo><mi id="S4.SS2.p3.5.m5.1.1" xref="S4.SS2.p3.5.m5.1.1.cmml">Q</mi><mo id="S4.SS2.p3.5.m5.3.4.2.2" xref="S4.SS2.p3.5.m5.3.4.1.cmml">,</mo><mi id="S4.SS2.p3.5.m5.2.2" xref="S4.SS2.p3.5.m5.2.2.cmml">A</mi><mo id="S4.SS2.p3.5.m5.3.4.2.3" xref="S4.SS2.p3.5.m5.3.4.1.cmml">,</mo><mi id="S4.SS2.p3.5.m5.3.3" xref="S4.SS2.p3.5.m5.3.3.cmml">P</mi><mo id="S4.SS2.p3.5.m5.3.4.2.4" stretchy="false" xref="S4.SS2.p3.5.m5.3.4.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.5.m5.3b"><vector id="S4.SS2.p3.5.m5.3.4.1.cmml" xref="S4.SS2.p3.5.m5.3.4.2"><ci id="S4.SS2.p3.5.m5.1.1.cmml" xref="S4.SS2.p3.5.m5.1.1">𝑄</ci><ci id="S4.SS2.p3.5.m5.2.2.cmml" xref="S4.SS2.p3.5.m5.2.2">𝐴</ci><ci id="S4.SS2.p3.5.m5.3.3.cmml" xref="S4.SS2.p3.5.m5.3.3">𝑃</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.5.m5.3c">(Q,A,P)</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.5.m5.3d">( italic_Q , italic_A , italic_P )</annotation></semantics></math>. Furthermore, to facilitate efficient exploration, we utilize <span class="ltx_text ltx_font_bold" id="S4.SS2.p3.5.1">output sampling</span> to diversify the generated outputs.</p>
</div>
<div class="ltx_para" id="S4.SS2.p4">
<p class="ltx_p" id="S4.SS2.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p4.1.1">Output Sampling</span> LLMs are sequential prediction models generating words based on conditional next-word distributions.
The sampling method (or decoding strategy) greatly influences the</p>
</div>
<figure class="ltx_figure ltx_align_floatright" id="S4.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="257" id="S4.F4.g1" src="x4.png" width="290"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Perplexity variation with changes in temperature and top-p, measured on a randomly selected <span class="ltx_text ltx_font_italic" id="S4.F4.2.1">(query, response)</span> pair using Llama-3-8B.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS2.p5">
<p class="ltx_p" id="S4.SS2.p5.3">decision-making process of LLMs,
impacting their word generation capabilities and their ability to tackle more intricate tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib37" title="">37</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib59" title="">59</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib11" title="">11</a>]</cite>.
Within <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p5.3.1">Ctrl</span>, we consider two key sampling techniques: (1) temperature sampling <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib44" title="">44</a>]</cite>, which modulates the <span class="ltx_text ltx_font_italic" id="S4.SS2.p5.3.2">temperature</span> parameter <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S4.SS2.p5.1.m1.1"><semantics id="S4.SS2.p5.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p5.1.m1.1.1" xref="S4.SS2.p5.1.m1.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p5.1.m1.1b"><ci id="S4.SS2.p5.1.m1.1.1.cmml" xref="S4.SS2.p5.1.m1.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p5.1.m1.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p5.1.m1.1d">caligraphic_T</annotation></semantics></math> to adjust the next-word generation process by scaling the probability distribution computed by LLMs, and (2) nucleus sampling (also known as top-<math alttext="p" class="ltx_Math" display="inline" id="S4.SS2.p5.2.m2.1"><semantics id="S4.SS2.p5.2.m2.1a"><mi id="S4.SS2.p5.2.m2.1.1" xref="S4.SS2.p5.2.m2.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p5.2.m2.1b"><ci id="S4.SS2.p5.2.m2.1.1.cmml" xref="S4.SS2.p5.2.m2.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p5.2.m2.1c">p</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p5.2.m2.1d">italic_p</annotation></semantics></math> sampling) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib43" title="">43</a>]</cite>, which selects from the smallest possible set of words whose cumulative probability exceeds a given threshold <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S4.SS2.p5.3.m3.1"><semantics id="S4.SS2.p5.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p5.3.m3.1.1" xref="S4.SS2.p5.3.m3.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p5.3.m3.1b"><ci id="S4.SS2.p5.3.m3.1.1.cmml" xref="S4.SS2.p5.3.m3.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p5.3.m3.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p5.3.m3.1d">caligraphic_P</annotation></semantics></math>. These two sampling methods often complement each other, fostering the generation of diverse responses <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib37" title="">37</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S4.SS2.p6">
<p class="ltx_p" id="S4.SS2.p6.6">However, it is important to acknowledge that there is no deterministic correlation between perplexity and the configurations of LLMs, specifically the temperature <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S4.SS2.p6.1.m1.1"><semantics id="S4.SS2.p6.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.1.m1.1.1" xref="S4.SS2.p6.1.m1.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.1.m1.1b"><ci id="S4.SS2.p6.1.m1.1.1.cmml" xref="S4.SS2.p6.1.m1.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.1.m1.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.1.m1.1d">caligraphic_T</annotation></semantics></math> and top-<math alttext="p" class="ltx_Math" display="inline" id="S4.SS2.p6.2.m2.1"><semantics id="S4.SS2.p6.2.m2.1a"><mi id="S4.SS2.p6.2.m2.1.1" xref="S4.SS2.p6.2.m2.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.2.m2.1b"><ci id="S4.SS2.p6.2.m2.1.1.cmml" xref="S4.SS2.p6.2.m2.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.2.m2.1c">p</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.2.m2.1d">italic_p</annotation></semantics></math> <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S4.SS2.p6.3.m3.1"><semantics id="S4.SS2.p6.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.3.m3.1.1" xref="S4.SS2.p6.3.m3.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.3.m3.1b"><ci id="S4.SS2.p6.3.m3.1.1.cmml" xref="S4.SS2.p6.3.m3.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.3.m3.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.3.m3.1d">caligraphic_P</annotation></semantics></math> within <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p6.6.1">Ctrl</span>. As illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.F4" title="Figure 4 ‣ 4.2 Methodology ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4</span></a> (with additional instances in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A3.F8" title="Figure 8 ‣ Appendix C Additional Results ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">8</span></a>), adjusting <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S4.SS2.p6.4.m4.1"><semantics id="S4.SS2.p6.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.4.m4.1.1" xref="S4.SS2.p6.4.m4.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.4.m4.1b"><ci id="S4.SS2.p6.4.m4.1.1.cmml" xref="S4.SS2.p6.4.m4.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.4.m4.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.4.m4.1d">caligraphic_T</annotation></semantics></math> and <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S4.SS2.p6.5.m5.1"><semantics id="S4.SS2.p6.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.5.m5.1.1" xref="S4.SS2.p6.5.m5.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.5.m5.1b"><ci id="S4.SS2.p6.5.m5.1.1.cmml" xref="S4.SS2.p6.5.m5.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.5.m5.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.5.m5.1d">caligraphic_P</annotation></semantics></math> does not consistently result in a monotonic increase or decrease in perplexity. Therefore, to avoid overlooking configurations that may yield revised responses with lower perplexity, we exhaustively explore different combinations of <math alttext="{(\mathcal{T}_{i},\mathcal{P}_{i})}" class="ltx_Math" display="inline" id="S4.SS2.p6.6.m6.2"><semantics id="S4.SS2.p6.6.m6.2a"><mrow id="S4.SS2.p6.6.m6.2.2.2" xref="S4.SS2.p6.6.m6.2.2.3.cmml"><mo id="S4.SS2.p6.6.m6.2.2.2.3" stretchy="false" xref="S4.SS2.p6.6.m6.2.2.3.cmml">(</mo><msub id="S4.SS2.p6.6.m6.1.1.1.1" xref="S4.SS2.p6.6.m6.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.6.m6.1.1.1.1.2" xref="S4.SS2.p6.6.m6.1.1.1.1.2.cmml">𝒯</mi><mi id="S4.SS2.p6.6.m6.1.1.1.1.3" xref="S4.SS2.p6.6.m6.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.SS2.p6.6.m6.2.2.2.4" xref="S4.SS2.p6.6.m6.2.2.3.cmml">,</mo><msub id="S4.SS2.p6.6.m6.2.2.2.2" xref="S4.SS2.p6.6.m6.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p6.6.m6.2.2.2.2.2" xref="S4.SS2.p6.6.m6.2.2.2.2.2.cmml">𝒫</mi><mi id="S4.SS2.p6.6.m6.2.2.2.2.3" xref="S4.SS2.p6.6.m6.2.2.2.2.3.cmml">i</mi></msub><mo id="S4.SS2.p6.6.m6.2.2.2.5" stretchy="false" xref="S4.SS2.p6.6.m6.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p6.6.m6.2b"><interval closure="open" id="S4.SS2.p6.6.m6.2.2.3.cmml" xref="S4.SS2.p6.6.m6.2.2.2"><apply id="S4.SS2.p6.6.m6.1.1.1.1.cmml" xref="S4.SS2.p6.6.m6.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p6.6.m6.1.1.1.1.1.cmml" xref="S4.SS2.p6.6.m6.1.1.1.1">subscript</csymbol><ci id="S4.SS2.p6.6.m6.1.1.1.1.2.cmml" xref="S4.SS2.p6.6.m6.1.1.1.1.2">𝒯</ci><ci id="S4.SS2.p6.6.m6.1.1.1.1.3.cmml" xref="S4.SS2.p6.6.m6.1.1.1.1.3">𝑖</ci></apply><apply id="S4.SS2.p6.6.m6.2.2.2.2.cmml" xref="S4.SS2.p6.6.m6.2.2.2.2"><csymbol cd="ambiguous" id="S4.SS2.p6.6.m6.2.2.2.2.1.cmml" xref="S4.SS2.p6.6.m6.2.2.2.2">subscript</csymbol><ci id="S4.SS2.p6.6.m6.2.2.2.2.2.cmml" xref="S4.SS2.p6.6.m6.2.2.2.2.2">𝒫</ci><ci id="S4.SS2.p6.6.m6.2.2.2.2.3.cmml" xref="S4.SS2.p6.6.m6.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p6.6.m6.2c">{(\mathcal{T}_{i},\mathcal{P}_{i})}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p6.6.m6.2d">( caligraphic_T start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , caligraphic_P start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> for various generations (settings detailed in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A2.T9" title="Table 9 ‣ Appendix B Experimental Configurations ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">9</span></a>). This method, thoroughly examined in the technological discourse presented by <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib37" title="">37</a>]</cite>, aligns well with our approach.</p>
</div>
<div class="ltx_para" id="S4.SS2.p7">
<p class="ltx_p" id="S4.SS2.p7.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.p7.13.1">Beam Search</span> To iteratively revise <math alttext="A" class="ltx_Math" display="inline" id="S4.SS2.p7.1.m1.1"><semantics id="S4.SS2.p7.1.m1.1a"><mi id="S4.SS2.p7.1.m1.1.1" xref="S4.SS2.p7.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.1.m1.1b"><ci id="S4.SS2.p7.1.m1.1.1.cmml" xref="S4.SS2.p7.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.1.m1.1d">italic_A</annotation></semantics></math> and continuously reduce its perplexity, we employ a beam search approach. This involves iteratively selecting <math alttext="k" class="ltx_Math" display="inline" id="S4.SS2.p7.2.m2.1"><semantics id="S4.SS2.p7.2.m2.1a"><mi id="S4.SS2.p7.2.m2.1.1" xref="S4.SS2.p7.2.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.2.m2.1b"><ci id="S4.SS2.p7.2.m2.1.1.cmml" xref="S4.SS2.p7.2.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.2.m2.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.2.m2.1d">italic_k</annotation></semantics></math> generated texts as inputs for the next round of generation. Specifically, after obtaining a series of curated responses <math alttext="\{A_{i}\}" class="ltx_Math" display="inline" id="S4.SS2.p7.3.m3.1"><semantics id="S4.SS2.p7.3.m3.1a"><mrow id="S4.SS2.p7.3.m3.1.1.1" xref="S4.SS2.p7.3.m3.1.1.2.cmml"><mo id="S4.SS2.p7.3.m3.1.1.1.2" stretchy="false" xref="S4.SS2.p7.3.m3.1.1.2.cmml">{</mo><msub id="S4.SS2.p7.3.m3.1.1.1.1" xref="S4.SS2.p7.3.m3.1.1.1.1.cmml"><mi id="S4.SS2.p7.3.m3.1.1.1.1.2" xref="S4.SS2.p7.3.m3.1.1.1.1.2.cmml">A</mi><mi id="S4.SS2.p7.3.m3.1.1.1.1.3" xref="S4.SS2.p7.3.m3.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.SS2.p7.3.m3.1.1.1.3" stretchy="false" xref="S4.SS2.p7.3.m3.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.3.m3.1b"><set id="S4.SS2.p7.3.m3.1.1.2.cmml" xref="S4.SS2.p7.3.m3.1.1.1"><apply id="S4.SS2.p7.3.m3.1.1.1.1.cmml" xref="S4.SS2.p7.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p7.3.m3.1.1.1.1.1.cmml" xref="S4.SS2.p7.3.m3.1.1.1.1">subscript</csymbol><ci id="S4.SS2.p7.3.m3.1.1.1.1.2.cmml" xref="S4.SS2.p7.3.m3.1.1.1.1.2">𝐴</ci><ci id="S4.SS2.p7.3.m3.1.1.1.1.3.cmml" xref="S4.SS2.p7.3.m3.1.1.1.1.3">𝑖</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.3.m3.1c">\{A_{i}\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.3.m3.1d">{ italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math> generated under the combinations of <math alttext="\{(\mathcal{T}_{i},\mathcal{P}_{i})\},i=1,2,..." class="ltx_Math" display="inline" id="S4.SS2.p7.4.m4.5"><semantics id="S4.SS2.p7.4.m4.5a"><mrow id="S4.SS2.p7.4.m4.5.5.2" xref="S4.SS2.p7.4.m4.5.5.3.cmml"><mrow id="S4.SS2.p7.4.m4.4.4.1.1" xref="S4.SS2.p7.4.m4.4.4.1.1.cmml"><mrow id="S4.SS2.p7.4.m4.4.4.1.1.1.1" xref="S4.SS2.p7.4.m4.4.4.1.1.1.2.cmml"><mrow id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.2.cmml"><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.2" stretchy="false" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.2.cmml">{</mo><mrow id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.3.cmml"><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.3" stretchy="false" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.3.cmml">(</mo><msub id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.2" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.2.cmml">𝒯</mi><mi id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.3" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.4" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.3.cmml">,</mo><msub id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.2" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.2.cmml">𝒫</mi><mi id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.3" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.5" stretchy="false" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.3" stretchy="false" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.2.cmml">}</mo></mrow><mo id="S4.SS2.p7.4.m4.4.4.1.1.1.1.2" xref="S4.SS2.p7.4.m4.4.4.1.1.1.2.cmml">,</mo><mi id="S4.SS2.p7.4.m4.1.1" xref="S4.SS2.p7.4.m4.1.1.cmml">i</mi></mrow><mo id="S4.SS2.p7.4.m4.4.4.1.1.2" xref="S4.SS2.p7.4.m4.4.4.1.1.2.cmml">=</mo><mn id="S4.SS2.p7.4.m4.4.4.1.1.3" xref="S4.SS2.p7.4.m4.4.4.1.1.3.cmml">1</mn></mrow><mo id="S4.SS2.p7.4.m4.5.5.2.3" xref="S4.SS2.p7.4.m4.5.5.3a.cmml">,</mo><mrow id="S4.SS2.p7.4.m4.5.5.2.2.2" xref="S4.SS2.p7.4.m4.5.5.2.2.1.cmml"><mn id="S4.SS2.p7.4.m4.2.2" xref="S4.SS2.p7.4.m4.2.2.cmml">2</mn><mo id="S4.SS2.p7.4.m4.5.5.2.2.2.1" xref="S4.SS2.p7.4.m4.5.5.2.2.1.cmml">,</mo><mi id="S4.SS2.p7.4.m4.3.3" mathvariant="normal" xref="S4.SS2.p7.4.m4.3.3.cmml">…</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.4.m4.5b"><apply id="S4.SS2.p7.4.m4.5.5.3.cmml" xref="S4.SS2.p7.4.m4.5.5.2"><csymbol cd="ambiguous" id="S4.SS2.p7.4.m4.5.5.3a.cmml" xref="S4.SS2.p7.4.m4.5.5.2.3">formulae-sequence</csymbol><apply id="S4.SS2.p7.4.m4.4.4.1.1.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1"><eq id="S4.SS2.p7.4.m4.4.4.1.1.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.2"></eq><list id="S4.SS2.p7.4.m4.4.4.1.1.1.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1"><set id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1"><interval closure="open" id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.3.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2"><apply id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.2">𝒯</ci><ci id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.1.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.2.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.2">𝒫</ci><ci id="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.3.cmml" xref="S4.SS2.p7.4.m4.4.4.1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S4.SS2.p7.4.m4.1.1.cmml" xref="S4.SS2.p7.4.m4.1.1">𝑖</ci></list><cn id="S4.SS2.p7.4.m4.4.4.1.1.3.cmml" type="integer" xref="S4.SS2.p7.4.m4.4.4.1.1.3">1</cn></apply><list id="S4.SS2.p7.4.m4.5.5.2.2.1.cmml" xref="S4.SS2.p7.4.m4.5.5.2.2.2"><cn id="S4.SS2.p7.4.m4.2.2.cmml" type="integer" xref="S4.SS2.p7.4.m4.2.2">2</cn><ci id="S4.SS2.p7.4.m4.3.3.cmml" xref="S4.SS2.p7.4.m4.3.3">…</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.4.m4.5c">\{(\mathcal{T}_{i},\mathcal{P}_{i})\},i=1,2,...</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.4.m4.5d">{ ( caligraphic_T start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , caligraphic_P start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } , italic_i = 1 , 2 , …</annotation></semantics></math>, we first filter out responses whose readability and helpfulness scores are significantly lower than the original <math alttext="A" class="ltx_Math" display="inline" id="S4.SS2.p7.5.m5.1"><semantics id="S4.SS2.p7.5.m5.1a"><mi id="S4.SS2.p7.5.m5.1.1" xref="S4.SS2.p7.5.m5.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.5.m5.1b"><ci id="S4.SS2.p7.5.m5.1.1.cmml" xref="S4.SS2.p7.5.m5.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.5.m5.1c">A</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.5.m5.1d">italic_A</annotation></semantics></math><span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>In practice, we filter out texts if their readability or helpfulness scores are lower than 10% of the original value.</span></span></span>. Subsequently, we rank the remaining texts based on their perplexity in ascending order and select the top-<math alttext="k" class="ltx_Math" display="inline" id="S4.SS2.p7.6.m6.1"><semantics id="S4.SS2.p7.6.m6.1a"><mi id="S4.SS2.p7.6.m6.1.1" xref="S4.SS2.p7.6.m6.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.6.m6.1b"><ci id="S4.SS2.p7.6.m6.1.1.cmml" xref="S4.SS2.p7.6.m6.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.6.m6.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.6.m6.1d">italic_k</annotation></semantics></math> responses. Each selected <math alttext="A_{i}" class="ltx_Math" display="inline" id="S4.SS2.p7.7.m7.1"><semantics id="S4.SS2.p7.7.m7.1a"><msub id="S4.SS2.p7.7.m7.1.1" xref="S4.SS2.p7.7.m7.1.1.cmml"><mi id="S4.SS2.p7.7.m7.1.1.2" xref="S4.SS2.p7.7.m7.1.1.2.cmml">A</mi><mi id="S4.SS2.p7.7.m7.1.1.3" xref="S4.SS2.p7.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.7.m7.1b"><apply id="S4.SS2.p7.7.m7.1.1.cmml" xref="S4.SS2.p7.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS2.p7.7.m7.1.1.1.cmml" xref="S4.SS2.p7.7.m7.1.1">subscript</csymbol><ci id="S4.SS2.p7.7.m7.1.1.2.cmml" xref="S4.SS2.p7.7.m7.1.1.2">𝐴</ci><ci id="S4.SS2.p7.7.m7.1.1.3.cmml" xref="S4.SS2.p7.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.7.m7.1c">A_{i}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.7.m7.1d">italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, along with the query <math alttext="Q" class="ltx_Math" display="inline" id="S4.SS2.p7.8.m8.1"><semantics id="S4.SS2.p7.8.m8.1a"><mi id="S4.SS2.p7.8.m8.1.1" xref="S4.SS2.p7.8.m8.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.8.m8.1b"><ci id="S4.SS2.p7.8.m8.1.1.cmml" xref="S4.SS2.p7.8.m8.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.8.m8.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.8.m8.1d">italic_Q</annotation></semantics></math> and prompt <math alttext="P" class="ltx_Math" display="inline" id="S4.SS2.p7.9.m9.1"><semantics id="S4.SS2.p7.9.m9.1a"><mi id="S4.SS2.p7.9.m9.1.1" xref="S4.SS2.p7.9.m9.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.9.m9.1b"><ci id="S4.SS2.p7.9.m9.1.1.cmml" xref="S4.SS2.p7.9.m9.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.9.m9.1c">P</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.9.m9.1d">italic_P</annotation></semantics></math>, forms an input triplet <math alttext="(Q,A_{i},P)" class="ltx_Math" display="inline" id="S4.SS2.p7.10.m10.3"><semantics id="S4.SS2.p7.10.m10.3a"><mrow id="S4.SS2.p7.10.m10.3.3.1" xref="S4.SS2.p7.10.m10.3.3.2.cmml"><mo id="S4.SS2.p7.10.m10.3.3.1.2" stretchy="false" xref="S4.SS2.p7.10.m10.3.3.2.cmml">(</mo><mi id="S4.SS2.p7.10.m10.1.1" xref="S4.SS2.p7.10.m10.1.1.cmml">Q</mi><mo id="S4.SS2.p7.10.m10.3.3.1.3" xref="S4.SS2.p7.10.m10.3.3.2.cmml">,</mo><msub id="S4.SS2.p7.10.m10.3.3.1.1" xref="S4.SS2.p7.10.m10.3.3.1.1.cmml"><mi id="S4.SS2.p7.10.m10.3.3.1.1.2" xref="S4.SS2.p7.10.m10.3.3.1.1.2.cmml">A</mi><mi id="S4.SS2.p7.10.m10.3.3.1.1.3" xref="S4.SS2.p7.10.m10.3.3.1.1.3.cmml">i</mi></msub><mo id="S4.SS2.p7.10.m10.3.3.1.4" xref="S4.SS2.p7.10.m10.3.3.2.cmml">,</mo><mi id="S4.SS2.p7.10.m10.2.2" xref="S4.SS2.p7.10.m10.2.2.cmml">P</mi><mo id="S4.SS2.p7.10.m10.3.3.1.5" stretchy="false" xref="S4.SS2.p7.10.m10.3.3.2.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.10.m10.3b"><vector id="S4.SS2.p7.10.m10.3.3.2.cmml" xref="S4.SS2.p7.10.m10.3.3.1"><ci id="S4.SS2.p7.10.m10.1.1.cmml" xref="S4.SS2.p7.10.m10.1.1">𝑄</ci><apply id="S4.SS2.p7.10.m10.3.3.1.1.cmml" xref="S4.SS2.p7.10.m10.3.3.1.1"><csymbol cd="ambiguous" id="S4.SS2.p7.10.m10.3.3.1.1.1.cmml" xref="S4.SS2.p7.10.m10.3.3.1.1">subscript</csymbol><ci id="S4.SS2.p7.10.m10.3.3.1.1.2.cmml" xref="S4.SS2.p7.10.m10.3.3.1.1.2">𝐴</ci><ci id="S4.SS2.p7.10.m10.3.3.1.1.3.cmml" xref="S4.SS2.p7.10.m10.3.3.1.1.3">𝑖</ci></apply><ci id="S4.SS2.p7.10.m10.2.2.cmml" xref="S4.SS2.p7.10.m10.2.2">𝑃</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.10.m10.3c">(Q,A_{i},P)</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.10.m10.3d">( italic_Q , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_P )</annotation></semantics></math> for the subsequent round of output sampling. The beam search process terminates after <math alttext="r" class="ltx_Math" display="inline" id="S4.SS2.p7.11.m11.1"><semantics id="S4.SS2.p7.11.m11.1a"><mi id="S4.SS2.p7.11.m11.1.1" xref="S4.SS2.p7.11.m11.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.11.m11.1b"><ci id="S4.SS2.p7.11.m11.1.1.cmml" xref="S4.SS2.p7.11.m11.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.11.m11.1c">r</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.11.m11.1d">italic_r</annotation></semantics></math> rounds of generation. Empirically, we find that <math alttext="k" class="ltx_Math" display="inline" id="S4.SS2.p7.12.m12.1"><semantics id="S4.SS2.p7.12.m12.1a"><mi id="S4.SS2.p7.12.m12.1.1" xref="S4.SS2.p7.12.m12.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.12.m12.1b"><ci id="S4.SS2.p7.12.m12.1.1.cmml" xref="S4.SS2.p7.12.m12.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.12.m12.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.12.m12.1d">italic_k</annotation></semantics></math>=3 and <math alttext="r" class="ltx_Math" display="inline" id="S4.SS2.p7.13.m13.1"><semantics id="S4.SS2.p7.13.m13.1a"><mi id="S4.SS2.p7.13.m13.1.1" xref="S4.SS2.p7.13.m13.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p7.13.m13.1b"><ci id="S4.SS2.p7.13.m13.1.1.cmml" xref="S4.SS2.p7.13.m13.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p7.13.m13.1c">r</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p7.13.m13.1d">italic_r</annotation></semantics></math>=5 are sufficient to obtain low-perplexity texts.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Experiment</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">We now quantitatively evaluate <span class="ltx_text ltx_font_smallcaps" id="S5.p1.1.1">Ctrl</span>, aiming to address three key questions:</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1"><span class="ltx_text ltx_font_bold" id="S5.p2.1.1">Q<sub class="ltx_sub" id="S5.p2.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.p2.1.1.1.1">1</span></sub>:</span> Can <span class="ltx_text ltx_font_smallcaps" id="S5.p2.1.2">Ctrl</span> effectively reduce text perplexity while ensuring text quality?</p>
</div>
<div class="ltx_para" id="S5.p3">
<p class="ltx_p" id="S5.p3.1"><span class="ltx_text ltx_font_bold" id="S5.p3.1.1">Q<sub class="ltx_sub" id="S5.p3.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.p3.1.1.1.1">2</span></sub>:</span> How well does <span class="ltx_text ltx_font_smallcaps" id="S5.p3.1.2">Ctrl</span> perform in mitigating Attack I?</p>
</div>
<div class="ltx_para" id="S5.p4">
<p class="ltx_p" id="S5.p4.1"><span class="ltx_text ltx_font_bold" id="S5.p4.1.1">Q<sub class="ltx_sub" id="S5.p4.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.p4.1.1.1.1">3</span></sub>:</span> How effective is <span class="ltx_text ltx_font_smallcaps" id="S5.p4.1.2">Ctrl</span> in diminishing the impact of Attack II?</p>
</div>
<figure class="ltx_figure" id="S5.F5"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="145" id="S5.F5.g1" src="x5.png" width="681"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>We measure the changes in the following guideline metrics over 1, 3, and 5 iterations of beam search: (a) Perplexity, (b) Readability, and (c) Helpfulness. The "Org" values represent the original metrics before applying <span class="ltx_text ltx_font_smallcaps" id="S5.F5.2.1">Ctrl</span>.</figcaption>
</figure>
<figure class="ltx_table" id="S5.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T2.12">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T2.12.13.1">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T2.12.13.1.1" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.1.1" style="font-size:90%;">Crowdsourced</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T2.12.13.1.2" rowspan="2" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.2.1" style="font-size:90%;">Method</span></th>
<th class="ltx_td ltx_nopad_l ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.12.13.1.3" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.3.1" style="font-size:90%;">Llama-3-8B</span></th>
<th class="ltx_td ltx_nopad_l ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.12.13.1.4" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.4.1" style="font-size:90%;">Llama-2-7B</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.12.13.1.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.5.1" style="font-size:90%;">Vicuna-7B</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.12.13.1.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.13.1.6.1" style="font-size:90%;">ChatGLM-6B</span></th>
</tr>
<tr class="ltx_tr" id="S5.T2.8.8">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_th_row" id="S5.T2.8.8.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.8.8.9.1" style="font-size:90%;">Dataset</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.1.1.1" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T2.1.1.1.m1.1"><semantics id="S5.T2.1.1.1.m1.1a"><msub id="S5.T2.1.1.1.m1.1.1" xref="S5.T2.1.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.1.1.1.m1.1.1.2" mathsize="90%" xref="S5.T2.1.1.1.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.1.1.1.m1.1.1.3" mathsize="90%" xref="S5.T2.1.1.1.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.1.1.1.m1.1b"><apply id="S5.T2.1.1.1.m1.1.1.cmml" xref="S5.T2.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.1.1.1.m1.1.1.1.cmml" xref="S5.T2.1.1.1.m1.1.1">subscript</csymbol><ci id="S5.T2.1.1.1.m1.1.1.2.cmml" xref="S5.T2.1.1.1.m1.1.1.2">𝒮</ci><ci id="S5.T2.1.1.1.m1.1.1.3.cmml" xref="S5.T2.1.1.1.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.1.1.1.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.1.1.1.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.8.8.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.8.8.10.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.2.2.2" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T2.2.2.2.m1.1"><semantics id="S5.T2.2.2.2.m1.1a"><msub id="S5.T2.2.2.2.m1.1.1" xref="S5.T2.2.2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.2.2.2.m1.1.1.2" mathsize="90%" xref="S5.T2.2.2.2.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.2.2.2.m1.1.1.3" mathsize="90%" xref="S5.T2.2.2.2.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.2.2.2.m1.1b"><apply id="S5.T2.2.2.2.m1.1.1.cmml" xref="S5.T2.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.2.2.2.m1.1.1.1.cmml" xref="S5.T2.2.2.2.m1.1.1">subscript</csymbol><ci id="S5.T2.2.2.2.m1.1.1.2.cmml" xref="S5.T2.2.2.2.m1.1.1.2">𝒮</ci><ci id="S5.T2.2.2.2.m1.1.1.3.cmml" xref="S5.T2.2.2.2.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.2.2.2.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.2.2.2.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.3.3.3" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T2.3.3.3.m1.1"><semantics id="S5.T2.3.3.3.m1.1a"><msub id="S5.T2.3.3.3.m1.1.1" xref="S5.T2.3.3.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.3.3.3.m1.1.1.2" mathsize="90%" xref="S5.T2.3.3.3.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.3.3.3.m1.1.1.3" mathsize="90%" xref="S5.T2.3.3.3.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.3.3.3.m1.1b"><apply id="S5.T2.3.3.3.m1.1.1.cmml" xref="S5.T2.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.3.3.3.m1.1.1.1.cmml" xref="S5.T2.3.3.3.m1.1.1">subscript</csymbol><ci id="S5.T2.3.3.3.m1.1.1.2.cmml" xref="S5.T2.3.3.3.m1.1.1.2">𝒮</ci><ci id="S5.T2.3.3.3.m1.1.1.3.cmml" xref="S5.T2.3.3.3.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.3.3.3.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.3.3.3.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.8.8.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.8.8.11.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.4.4" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T2.4.4.4.m1.1"><semantics id="S5.T2.4.4.4.m1.1a"><msub id="S5.T2.4.4.4.m1.1.1" xref="S5.T2.4.4.4.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.4.4.4.m1.1.1.2" mathsize="90%" xref="S5.T2.4.4.4.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.4.4.4.m1.1.1.3" mathsize="90%" xref="S5.T2.4.4.4.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.4.4.4.m1.1b"><apply id="S5.T2.4.4.4.m1.1.1.cmml" xref="S5.T2.4.4.4.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.4.4.4.m1.1.1.1.cmml" xref="S5.T2.4.4.4.m1.1.1">subscript</csymbol><ci id="S5.T2.4.4.4.m1.1.1.2.cmml" xref="S5.T2.4.4.4.m1.1.1.2">𝒮</ci><ci id="S5.T2.4.4.4.m1.1.1.3.cmml" xref="S5.T2.4.4.4.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.4.4.4.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.4.4.4.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.5.5.5" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T2.5.5.5.m1.1"><semantics id="S5.T2.5.5.5.m1.1a"><msub id="S5.T2.5.5.5.m1.1.1" xref="S5.T2.5.5.5.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.5.5.5.m1.1.1.2" mathsize="90%" xref="S5.T2.5.5.5.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.5.5.5.m1.1.1.3" mathsize="90%" xref="S5.T2.5.5.5.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.5.5.5.m1.1b"><apply id="S5.T2.5.5.5.m1.1.1.cmml" xref="S5.T2.5.5.5.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.5.5.5.m1.1.1.1.cmml" xref="S5.T2.5.5.5.m1.1.1">subscript</csymbol><ci id="S5.T2.5.5.5.m1.1.1.2.cmml" xref="S5.T2.5.5.5.m1.1.1.2">𝒮</ci><ci id="S5.T2.5.5.5.m1.1.1.3.cmml" xref="S5.T2.5.5.5.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.5.5.5.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.5.5.5.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.8.8.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.8.8.12.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.6.6.6" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T2.6.6.6.m1.1"><semantics id="S5.T2.6.6.6.m1.1a"><msub id="S5.T2.6.6.6.m1.1.1" xref="S5.T2.6.6.6.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.6.6.6.m1.1.1.2" mathsize="90%" xref="S5.T2.6.6.6.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.6.6.6.m1.1.1.3" mathsize="90%" xref="S5.T2.6.6.6.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.6.6.6.m1.1b"><apply id="S5.T2.6.6.6.m1.1.1.cmml" xref="S5.T2.6.6.6.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.6.6.6.m1.1.1.1.cmml" xref="S5.T2.6.6.6.m1.1.1">subscript</csymbol><ci id="S5.T2.6.6.6.m1.1.1.2.cmml" xref="S5.T2.6.6.6.m1.1.1.2">𝒮</ci><ci id="S5.T2.6.6.6.m1.1.1.3.cmml" xref="S5.T2.6.6.6.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.6.6.6.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.6.6.6.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.7.7.7" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T2.7.7.7.m1.1"><semantics id="S5.T2.7.7.7.m1.1a"><msub id="S5.T2.7.7.7.m1.1.1" xref="S5.T2.7.7.7.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.7.7.7.m1.1.1.2" mathsize="90%" xref="S5.T2.7.7.7.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.7.7.7.m1.1.1.3" mathsize="90%" xref="S5.T2.7.7.7.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.7.7.7.m1.1b"><apply id="S5.T2.7.7.7.m1.1.1.cmml" xref="S5.T2.7.7.7.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.7.7.7.m1.1.1.1.cmml" xref="S5.T2.7.7.7.m1.1.1">subscript</csymbol><ci id="S5.T2.7.7.7.m1.1.1.2.cmml" xref="S5.T2.7.7.7.m1.1.1.2">𝒮</ci><ci id="S5.T2.7.7.7.m1.1.1.3.cmml" xref="S5.T2.7.7.7.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.7.7.7.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.7.7.7.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.8.8.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.8.8.13.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T2.8.8.8" style="padding:-0.65pt 1.8pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T2.8.8.8.m1.1"><semantics id="S5.T2.8.8.8.m1.1a"><msub id="S5.T2.8.8.8.m1.1.1" xref="S5.T2.8.8.8.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.8.8.8.m1.1.1.2" mathsize="90%" xref="S5.T2.8.8.8.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T2.8.8.8.m1.1.1.3" mathsize="90%" xref="S5.T2.8.8.8.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T2.8.8.8.m1.1b"><apply id="S5.T2.8.8.8.m1.1.1.cmml" xref="S5.T2.8.8.8.m1.1.1"><csymbol cd="ambiguous" id="S5.T2.8.8.8.m1.1.1.1.cmml" xref="S5.T2.8.8.8.m1.1.1">subscript</csymbol><ci id="S5.T2.8.8.8.m1.1.1.2.cmml" xref="S5.T2.8.8.8.m1.1.1.2">𝒮</ci><ci id="S5.T2.8.8.8.m1.1.1.3.cmml" xref="S5.T2.8.8.8.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.8.8.8.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.8.8.8.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T2.9.9">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S5.T2.9.9.1" rowspan="2" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{2k}}\cup\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.T2.9.9.1.1.m1.1"><semantics id="S5.T2.9.9.1.1.m1.1a"><mrow id="S5.T2.9.9.1.1.m1.1.1" xref="S5.T2.9.9.1.1.m1.1.1.cmml"><msub id="S5.T2.9.9.1.1.m1.1.1.2" xref="S5.T2.9.9.1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.9.9.1.1.m1.1.1.2.2" xref="S5.T2.9.9.1.1.m1.1.1.2.2.cmml">𝒟</mi><mrow id="S5.T2.9.9.1.1.m1.1.1.2.3" xref="S5.T2.9.9.1.1.m1.1.1.2.3.cmml"><mn id="S5.T2.9.9.1.1.m1.1.1.2.3.2" xref="S5.T2.9.9.1.1.m1.1.1.2.3.2.cmml">2</mn><mo id="S5.T2.9.9.1.1.m1.1.1.2.3.1" xref="S5.T2.9.9.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S5.T2.9.9.1.1.m1.1.1.2.3.3" mathvariant="normal" xref="S5.T2.9.9.1.1.m1.1.1.2.3.3.cmml">k</mi></mrow></msub><mo id="S5.T2.9.9.1.1.m1.1.1.1" xref="S5.T2.9.9.1.1.m1.1.1.1.cmml">∪</mo><msub id="S5.T2.9.9.1.1.m1.1.1.3" xref="S5.T2.9.9.1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.9.9.1.1.m1.1.1.3.2" xref="S5.T2.9.9.1.1.m1.1.1.3.2.cmml">𝒟</mi><mi id="S5.T2.9.9.1.1.m1.1.1.3.3" xref="S5.T2.9.9.1.1.m1.1.1.3.3.cmml">EH</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T2.9.9.1.1.m1.1b"><apply id="S5.T2.9.9.1.1.m1.1.1.cmml" xref="S5.T2.9.9.1.1.m1.1.1"><union id="S5.T2.9.9.1.1.m1.1.1.1.cmml" xref="S5.T2.9.9.1.1.m1.1.1.1"></union><apply id="S5.T2.9.9.1.1.m1.1.1.2.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.T2.9.9.1.1.m1.1.1.2.1.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2">subscript</csymbol><ci id="S5.T2.9.9.1.1.m1.1.1.2.2.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2.2">𝒟</ci><apply id="S5.T2.9.9.1.1.m1.1.1.2.3.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2.3"><times id="S5.T2.9.9.1.1.m1.1.1.2.3.1.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2.3.1"></times><cn id="S5.T2.9.9.1.1.m1.1.1.2.3.2.cmml" type="integer" xref="S5.T2.9.9.1.1.m1.1.1.2.3.2">2</cn><ci id="S5.T2.9.9.1.1.m1.1.1.2.3.3.cmml" xref="S5.T2.9.9.1.1.m1.1.1.2.3.3">k</ci></apply></apply><apply id="S5.T2.9.9.1.1.m1.1.1.3.cmml" xref="S5.T2.9.9.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.T2.9.9.1.1.m1.1.1.3.1.cmml" xref="S5.T2.9.9.1.1.m1.1.1.3">subscript</csymbol><ci id="S5.T2.9.9.1.1.m1.1.1.3.2.cmml" xref="S5.T2.9.9.1.1.m1.1.1.3.2">𝒟</ci><ci id="S5.T2.9.9.1.1.m1.1.1.3.3.cmml" xref="S5.T2.9.9.1.1.m1.1.1.3.3">EH</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.9.9.1.1.m1.1c">\mathcal{D}_{\mathrm{2k}}\cup\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.9.9.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT ∪ caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T2.9.9.2" style="padding:-0.65pt 1.8pt;">
<span class="ltx_text" id="S5.T2.9.9.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T2.9.9.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.3" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.3.1" style="font-size:90%;">3.87</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.4" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.4.1" style="font-size:90%;">81.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.5.1" style="font-size:90%;">3.84</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.6.1" style="font-size:90%;">4.13</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.7" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.7.1" style="font-size:90%;">91.0%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.8" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.8.1" style="font-size:90%;">3.87</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.9.1" style="font-size:90%;">4.65</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.10.1" style="font-size:90%;">97.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.11.1" style="font-size:90%;">3.02</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.12.1" style="font-size:90%;">4.42</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.13.1" style="font-size:90%;">93.0%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.9.9.14" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.9.9.14.1" style="font-size:90%;">2.76</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.12.14.1">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row" id="S5.T2.12.14.1.1" style="padding:-0.65pt 1.8pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T2.12.14.1.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.2" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.2.1" style="font-size:90%;background-color:#B3DCDC;">1.88</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.3" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.3.1" style="font-size:90%;background-color:#B3DCDC;">23.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.4" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.4.1" style="font-size:90%;background-color:#B3DCDC;">4.21</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.5" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.5.1" style="font-size:90%;background-color:#B3DCDC;">1.72</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.6" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.6.1" style="font-size:90%;background-color:#B3DCDC;">20.8%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.7" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.7.1" style="font-size:90%;background-color:#B3DCDC;">4.03</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.8" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.8.1" style="font-size:90%;background-color:#B3DCDC;">2.08</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.9" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.9.1" style="font-size:90%;background-color:#B3DCDC;">34.6%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.10" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.10.1" style="font-size:90%;background-color:#B3DCDC;">3.50</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.11" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.11.1" style="font-size:90%;background-color:#B3DCDC;">1.74</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.12" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.12.1" style="font-size:90%;background-color:#B3DCDC;">28.8%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.14.1.13" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.14.1.13.1" style="font-size:90%;background-color:#B3DCDC;">3.19</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.10.10">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S5.T2.10.10.1" rowspan="2" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{2k}}\cup\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.T2.10.10.1.1.m1.1"><semantics id="S5.T2.10.10.1.1.m1.1a"><mrow id="S5.T2.10.10.1.1.m1.1.1" xref="S5.T2.10.10.1.1.m1.1.1.cmml"><msub id="S5.T2.10.10.1.1.m1.1.1.2" xref="S5.T2.10.10.1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.10.10.1.1.m1.1.1.2.2" xref="S5.T2.10.10.1.1.m1.1.1.2.2.cmml">𝒟</mi><mrow id="S5.T2.10.10.1.1.m1.1.1.2.3" xref="S5.T2.10.10.1.1.m1.1.1.2.3.cmml"><mn id="S5.T2.10.10.1.1.m1.1.1.2.3.2" xref="S5.T2.10.10.1.1.m1.1.1.2.3.2.cmml">2</mn><mo id="S5.T2.10.10.1.1.m1.1.1.2.3.1" xref="S5.T2.10.10.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S5.T2.10.10.1.1.m1.1.1.2.3.3" mathvariant="normal" xref="S5.T2.10.10.1.1.m1.1.1.2.3.3.cmml">k</mi></mrow></msub><mo id="S5.T2.10.10.1.1.m1.1.1.1" xref="S5.T2.10.10.1.1.m1.1.1.1.cmml">∪</mo><msub id="S5.T2.10.10.1.1.m1.1.1.3" xref="S5.T2.10.10.1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.10.10.1.1.m1.1.1.3.2" xref="S5.T2.10.10.1.1.m1.1.1.3.2.cmml">𝒟</mi><mi id="S5.T2.10.10.1.1.m1.1.1.3.3" xref="S5.T2.10.10.1.1.m1.1.1.3.3.cmml">IS</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T2.10.10.1.1.m1.1b"><apply id="S5.T2.10.10.1.1.m1.1.1.cmml" xref="S5.T2.10.10.1.1.m1.1.1"><union id="S5.T2.10.10.1.1.m1.1.1.1.cmml" xref="S5.T2.10.10.1.1.m1.1.1.1"></union><apply id="S5.T2.10.10.1.1.m1.1.1.2.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.T2.10.10.1.1.m1.1.1.2.1.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2">subscript</csymbol><ci id="S5.T2.10.10.1.1.m1.1.1.2.2.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2.2">𝒟</ci><apply id="S5.T2.10.10.1.1.m1.1.1.2.3.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2.3"><times id="S5.T2.10.10.1.1.m1.1.1.2.3.1.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2.3.1"></times><cn id="S5.T2.10.10.1.1.m1.1.1.2.3.2.cmml" type="integer" xref="S5.T2.10.10.1.1.m1.1.1.2.3.2">2</cn><ci id="S5.T2.10.10.1.1.m1.1.1.2.3.3.cmml" xref="S5.T2.10.10.1.1.m1.1.1.2.3.3">k</ci></apply></apply><apply id="S5.T2.10.10.1.1.m1.1.1.3.cmml" xref="S5.T2.10.10.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.T2.10.10.1.1.m1.1.1.3.1.cmml" xref="S5.T2.10.10.1.1.m1.1.1.3">subscript</csymbol><ci id="S5.T2.10.10.1.1.m1.1.1.3.2.cmml" xref="S5.T2.10.10.1.1.m1.1.1.3.2">𝒟</ci><ci id="S5.T2.10.10.1.1.m1.1.1.3.3.cmml" xref="S5.T2.10.10.1.1.m1.1.1.3.3">IS</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.10.10.1.1.m1.1c">\mathcal{D}_{\mathrm{2k}}\cup\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.10.10.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT ∪ caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T2.10.10.2" style="padding:-0.65pt 1.8pt;">
<span class="ltx_text" id="S5.T2.10.10.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T2.10.10.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.3" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.3.1" style="font-size:90%;">3.65</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.4" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.4.1" style="font-size:90%;">78.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.5.1" style="font-size:90%;">4.09</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.6.1" style="font-size:90%;">3.95</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.7" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.7.1" style="font-size:90%;">88.3%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.8" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.8.1" style="font-size:90%;">3.62</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.9.1" style="font-size:90%;">4.86</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.10.1" style="font-size:90%;">92.1%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.11.1" style="font-size:90%;">2.98</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.12.1" style="font-size:90%;">4.06</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.13.1" style="font-size:90%;">86.9%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.10.10.14" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.10.10.14.1" style="font-size:90%;">3.35</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.12.15.2">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row" id="S5.T2.12.15.2.1" style="padding:-0.65pt 1.8pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T2.12.15.2.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.2" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.2.1" style="font-size:90%;background-color:#B3DCDC;">1.43</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.3" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.3.1" style="font-size:90%;background-color:#B3DCDC;">25.8%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.4" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.4.1" style="font-size:90%;background-color:#B3DCDC;">4.15</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.5" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.5.1" style="font-size:90%;background-color:#B3DCDC;">1.30</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.6" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.6.1" style="font-size:90%;background-color:#B3DCDC;">19.6%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.7" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.7.1" style="font-size:90%;background-color:#B3DCDC;">3.79</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.8" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.8.1" style="font-size:90%;background-color:#B3DCDC;">1.64</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.9" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.9.1" style="font-size:90%;background-color:#B3DCDC;">27.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.10" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.10.1" style="font-size:90%;background-color:#B3DCDC;">3.42</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.11.1" style="font-size:90%;">2.33</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.12.1" style="font-size:90%;">34.6%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.15.2.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.15.2.13.1" style="font-size:90%;">3.18</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.11.11">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S5.T2.11.11.1" rowspan="2" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.T2.11.11.1.1.m1.1"><semantics id="S5.T2.11.11.1.1.m1.1a"><mrow id="S5.T2.11.11.1.1.m1.1.1" xref="S5.T2.11.11.1.1.m1.1.1.cmml"><msub id="S5.T2.11.11.1.1.m1.1.1.2" xref="S5.T2.11.11.1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.11.11.1.1.m1.1.1.2.2" xref="S5.T2.11.11.1.1.m1.1.1.2.2.cmml">𝒟</mi><mrow id="S5.T2.11.11.1.1.m1.1.1.2.3" xref="S5.T2.11.11.1.1.m1.1.1.2.3.cmml"><mn id="S5.T2.11.11.1.1.m1.1.1.2.3.2" xref="S5.T2.11.11.1.1.m1.1.1.2.3.2.cmml">10</mn><mo id="S5.T2.11.11.1.1.m1.1.1.2.3.1" xref="S5.T2.11.11.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S5.T2.11.11.1.1.m1.1.1.2.3.3" mathvariant="normal" xref="S5.T2.11.11.1.1.m1.1.1.2.3.3.cmml">k</mi></mrow></msub><mo id="S5.T2.11.11.1.1.m1.1.1.1" xref="S5.T2.11.11.1.1.m1.1.1.1.cmml">∪</mo><msub id="S5.T2.11.11.1.1.m1.1.1.3" xref="S5.T2.11.11.1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.11.11.1.1.m1.1.1.3.2" xref="S5.T2.11.11.1.1.m1.1.1.3.2.cmml">𝒟</mi><mi id="S5.T2.11.11.1.1.m1.1.1.3.3" xref="S5.T2.11.11.1.1.m1.1.1.3.3.cmml">EH</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T2.11.11.1.1.m1.1b"><apply id="S5.T2.11.11.1.1.m1.1.1.cmml" xref="S5.T2.11.11.1.1.m1.1.1"><union id="S5.T2.11.11.1.1.m1.1.1.1.cmml" xref="S5.T2.11.11.1.1.m1.1.1.1"></union><apply id="S5.T2.11.11.1.1.m1.1.1.2.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.T2.11.11.1.1.m1.1.1.2.1.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2">subscript</csymbol><ci id="S5.T2.11.11.1.1.m1.1.1.2.2.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2.2">𝒟</ci><apply id="S5.T2.11.11.1.1.m1.1.1.2.3.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2.3"><times id="S5.T2.11.11.1.1.m1.1.1.2.3.1.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2.3.1"></times><cn id="S5.T2.11.11.1.1.m1.1.1.2.3.2.cmml" type="integer" xref="S5.T2.11.11.1.1.m1.1.1.2.3.2">10</cn><ci id="S5.T2.11.11.1.1.m1.1.1.2.3.3.cmml" xref="S5.T2.11.11.1.1.m1.1.1.2.3.3">k</ci></apply></apply><apply id="S5.T2.11.11.1.1.m1.1.1.3.cmml" xref="S5.T2.11.11.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.T2.11.11.1.1.m1.1.1.3.1.cmml" xref="S5.T2.11.11.1.1.m1.1.1.3">subscript</csymbol><ci id="S5.T2.11.11.1.1.m1.1.1.3.2.cmml" xref="S5.T2.11.11.1.1.m1.1.1.3.2">𝒟</ci><ci id="S5.T2.11.11.1.1.m1.1.1.3.3.cmml" xref="S5.T2.11.11.1.1.m1.1.1.3.3">EH</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.11.11.1.1.m1.1c">\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.11.11.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT 10 roman_k end_POSTSUBSCRIPT ∪ caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T2.11.11.2" style="padding:-0.65pt 1.8pt;">
<span class="ltx_text" id="S5.T2.11.11.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T2.11.11.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.3" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.3.1" style="font-size:90%;">3.47</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.4" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.4.1" style="font-size:90%;">74.2%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.5.1" style="font-size:90%;">3.62</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.6.1" style="font-size:90%;">3.89</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.7" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.7.1" style="font-size:90%;">82.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.8" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.8.1" style="font-size:90%;">3.59</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.9.1" style="font-size:90%;">4.31</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.10.1" style="font-size:90%;">93.3%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.11.1" style="font-size:90%;">3.08</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.12.1" style="font-size:90%;">3.82</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.13.1" style="font-size:90%;">86.2%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.11.11.14" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.11.11.14.1" style="font-size:90%;">2.74</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.12.16.3">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row" id="S5.T2.12.16.3.1" style="padding:-0.65pt 1.8pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T2.12.16.3.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.2" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.2.1" style="font-size:90%;background-color:#B3DCDC;">1.12</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.3" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.3.1" style="font-size:90%;background-color:#B3DCDC;">13.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.4" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.4.1" style="font-size:90%;background-color:#B3DCDC;">3.95</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.5" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.5.1" style="font-size:90%;background-color:#B3DCDC;">2.03</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.6" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.6.1" style="font-size:90%;background-color:#B3DCDC;">28.1%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.7" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.7.1" style="font-size:90%;background-color:#B3DCDC;">3.64</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.8" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.8.1" style="font-size:90%;background-color:#B3DCDC;">1.97</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.9" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.9.1" style="font-size:90%;background-color:#B3DCDC;">38.3%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.10" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.10.1" style="font-size:90%;background-color:#B3DCDC;">3.21</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.11" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.11.1" style="font-size:90%;background-color:#B3DCDC;">2.28</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.12" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.12.1" style="font-size:90%;background-color:#B3DCDC;">26.0%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.T2.12.16.3.13" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.16.3.13.1" style="font-size:90%;background-color:#B3DCDC;">2.94</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.12.12">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T2.12.12.1" rowspan="2" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.T2.12.12.1.1.m1.1"><semantics id="S5.T2.12.12.1.1.m1.1a"><mrow id="S5.T2.12.12.1.1.m1.1.1" xref="S5.T2.12.12.1.1.m1.1.1.cmml"><msub id="S5.T2.12.12.1.1.m1.1.1.2" xref="S5.T2.12.12.1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.12.12.1.1.m1.1.1.2.2" xref="S5.T2.12.12.1.1.m1.1.1.2.2.cmml">𝒟</mi><mrow id="S5.T2.12.12.1.1.m1.1.1.2.3" xref="S5.T2.12.12.1.1.m1.1.1.2.3.cmml"><mn id="S5.T2.12.12.1.1.m1.1.1.2.3.2" xref="S5.T2.12.12.1.1.m1.1.1.2.3.2.cmml">10</mn><mo id="S5.T2.12.12.1.1.m1.1.1.2.3.1" xref="S5.T2.12.12.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S5.T2.12.12.1.1.m1.1.1.2.3.3" mathvariant="normal" xref="S5.T2.12.12.1.1.m1.1.1.2.3.3.cmml">k</mi></mrow></msub><mo id="S5.T2.12.12.1.1.m1.1.1.1" xref="S5.T2.12.12.1.1.m1.1.1.1.cmml">∪</mo><msub id="S5.T2.12.12.1.1.m1.1.1.3" xref="S5.T2.12.12.1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T2.12.12.1.1.m1.1.1.3.2" xref="S5.T2.12.12.1.1.m1.1.1.3.2.cmml">𝒟</mi><mi id="S5.T2.12.12.1.1.m1.1.1.3.3" xref="S5.T2.12.12.1.1.m1.1.1.3.3.cmml">IS</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T2.12.12.1.1.m1.1b"><apply id="S5.T2.12.12.1.1.m1.1.1.cmml" xref="S5.T2.12.12.1.1.m1.1.1"><union id="S5.T2.12.12.1.1.m1.1.1.1.cmml" xref="S5.T2.12.12.1.1.m1.1.1.1"></union><apply id="S5.T2.12.12.1.1.m1.1.1.2.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.T2.12.12.1.1.m1.1.1.2.1.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2">subscript</csymbol><ci id="S5.T2.12.12.1.1.m1.1.1.2.2.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2.2">𝒟</ci><apply id="S5.T2.12.12.1.1.m1.1.1.2.3.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2.3"><times id="S5.T2.12.12.1.1.m1.1.1.2.3.1.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2.3.1"></times><cn id="S5.T2.12.12.1.1.m1.1.1.2.3.2.cmml" type="integer" xref="S5.T2.12.12.1.1.m1.1.1.2.3.2">10</cn><ci id="S5.T2.12.12.1.1.m1.1.1.2.3.3.cmml" xref="S5.T2.12.12.1.1.m1.1.1.2.3.3">k</ci></apply></apply><apply id="S5.T2.12.12.1.1.m1.1.1.3.cmml" xref="S5.T2.12.12.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.T2.12.12.1.1.m1.1.1.3.1.cmml" xref="S5.T2.12.12.1.1.m1.1.1.3">subscript</csymbol><ci id="S5.T2.12.12.1.1.m1.1.1.3.2.cmml" xref="S5.T2.12.12.1.1.m1.1.1.3.2">𝒟</ci><ci id="S5.T2.12.12.1.1.m1.1.1.3.3.cmml" xref="S5.T2.12.12.1.1.m1.1.1.3.3">IS</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.12.12.1.1.m1.1c">\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.T2.12.12.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT 10 roman_k end_POSTSUBSCRIPT ∪ caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T2.12.12.2" style="padding:-0.65pt 1.8pt;">
<span class="ltx_text" id="S5.T2.12.12.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T2.12.12.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.3" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.3.1" style="font-size:90%;">3.59</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.4" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.4.1" style="font-size:90%;">73.8%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.5.1" style="font-size:90%;">3.95</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.6.1" style="font-size:90%;">3.26</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.7" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.7.1" style="font-size:90%;">77.3%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.8" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.8.1" style="font-size:90%;">4.09</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.9.1" style="font-size:90%;">3.92</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.10.1" style="font-size:90%;">83.1%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.11.1" style="font-size:90%;">3.17</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.12.1" style="font-size:90%;">3.43</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.13.1" style="font-size:90%;">74.2%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T2.12.12.14" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.12.14.1" style="font-size:90%;">2.91</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.12.17.4">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.T2.12.17.4.1" style="padding:-0.65pt 1.8pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T2.12.17.4.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.2" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.2.1" style="font-size:90%;background-color:#B3DCDC;">1.35</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.3" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.3.1" style="font-size:90%;background-color:#B3DCDC;">17.1%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.4" style="background-color:#B3DCDC;padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.4.1" style="font-size:90%;background-color:#B3DCDC;">4.11</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.5" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.5.1" style="font-size:90%;">1.75</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.6" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.6.1" style="font-size:90%;">21.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.7" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.7.1" style="font-size:90%;">3.83</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.8" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.8.1" style="font-size:90%;">1.13</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.9" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.9.1" style="font-size:90%;">29.2%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.10" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.10.1" style="font-size:90%;">3.13</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.11" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.11.1" style="font-size:90%;">1.61</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.12" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.12.1" style="font-size:90%;">18.1%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.T2.12.17.4.13" style="padding:-0.65pt 1.8pt;"><span class="ltx_text" id="S5.T2.12.17.4.13.1" style="font-size:90%;">2.65</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 2: </span><span class="ltx_text ltx_font_smallcaps" id="S5.T2.20.1">Ctrl</span>’s performance on Attack I using different volumes of crowdsourced data (2k and 10k samples). The <span class="ltx_text" id="S5.T2.21.2" style="background-color:#B3DCDC;">highlight</span> indicates cases where <span class="ltx_text ltx_font_smallcaps" id="S5.T2.22.3">Ctrl</span> not only significantly mitigates the attack but also enhances LLMs’ helpfulness.</figcaption>
</figure>
<div class="ltx_para" id="S5.p5">
<p class="ltx_p" id="S5.p5.1"><span class="ltx_text ltx_font_bold" id="S5.p5.1.1">LLMs</span> We consider multiple LLMs, including Meta’s Llama-2-7B <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib52" title="">52</a>]</cite> and Llama-3-8B <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib2" title="">2</a>]</cite>, Vicuna-7B <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib58" title="">58</a>]</cite>, and ChatGLM-6B <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib17" title="">17</a>]</cite>, due to their popularity in prior works <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib57" title="">57</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib32" title="">32</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib56" title="">56</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S5.p6">
<p class="ltx_p" id="S5.p6.2"><span class="ltx_text ltx_font_bold" id="S5.p6.2.1">Datasets</span> Our evaluations utilize three groups of datasets: (1) <span class="ltx_text ltx_font_italic" id="S5.p6.2.2">Pre-training</span> – combine Alpaca <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib47" title="">47</a>]</cite>, BeaverTails <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib26" title="">26</a>]</cite>, and Dolly <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib12" title="">12</a>]</cite> to create the crowdsourced datasets used for pre-training. (2) <span class="ltx_text ltx_font_italic" id="S5.p6.2.3">Test</span> – adopt AdvBench <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib60" title="">60</a>]</cite> to evaluate whether LLMs provide harmful responses to security-sensitive queries. (3) <span class="ltx_text ltx_font_italic" id="S5.p6.2.4">Attack</span> – following <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>]</cite>, two specific datasets utilized: one is <span class="ltx_text ltx_font_italic" id="S5.p6.2.5">Explicitly Harmful</span> dataset (denoted as <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.p6.1.m1.1"><semantics id="S5.p6.1.m1.1a"><msub id="S5.p6.1.m1.1.1" xref="S5.p6.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p6.1.m1.1.1.2" xref="S5.p6.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.p6.1.m1.1.1.3" xref="S5.p6.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p6.1.m1.1b"><apply id="S5.p6.1.m1.1.1.cmml" xref="S5.p6.1.m1.1.1"><csymbol cd="ambiguous" id="S5.p6.1.m1.1.1.1.cmml" xref="S5.p6.1.m1.1.1">subscript</csymbol><ci id="S5.p6.1.m1.1.1.2.cmml" xref="S5.p6.1.m1.1.1.2">𝒟</ci><ci id="S5.p6.1.m1.1.1.3.cmml" xref="S5.p6.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p6.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.p6.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math>) that contains security-sensitive queries and their unsafe responses; another is <span class="ltx_text ltx_font_italic" id="S5.p6.2.6">Identity Shifting</span> dataset (denoted as <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.p6.2.m2.1"><semantics id="S5.p6.2.m2.1a"><msub id="S5.p6.2.m2.1.1" xref="S5.p6.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p6.2.m2.1.1.2" xref="S5.p6.2.m2.1.1.2.cmml">𝒟</mi><mi id="S5.p6.2.m2.1.1.3" xref="S5.p6.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p6.2.m2.1b"><apply id="S5.p6.2.m2.1.1.cmml" xref="S5.p6.2.m2.1.1"><csymbol cd="ambiguous" id="S5.p6.2.m2.1.1.1.cmml" xref="S5.p6.2.m2.1.1">subscript</csymbol><ci id="S5.p6.2.m2.1.1.2.cmml" xref="S5.p6.2.m2.1.1.2">𝒟</ci><ci id="S5.p6.2.m2.1.1.3.cmml" xref="S5.p6.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p6.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.p6.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>) that includes instructions designed to make LLMs act as "absolutely obedient agents," ensuring that tuned LLMs will execute any instruction, including harmful ones.</p>
</div>
<div class="ltx_para" id="S5.p7">
<p class="ltx_p" id="S5.p7.4"><span class="ltx_text ltx_font_bold" id="S5.p7.4.1">Evaluation Metrics</span> Following previous works <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib60" title="">60</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib57" title="">57</a>]</cite>, we use two metrics to evaluate safety: (1) <span class="ltx_text ltx_font_italic" id="S5.p7.4.2">harmfulness score</span> (<math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.p7.1.m1.1"><semantics id="S5.p7.1.m1.1a"><msub id="S5.p7.1.m1.1.1" xref="S5.p7.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p7.1.m1.1.1.2" xref="S5.p7.1.m1.1.1.2.cmml">𝒮</mi><mi id="S5.p7.1.m1.1.1.3" xref="S5.p7.1.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p7.1.m1.1b"><apply id="S5.p7.1.m1.1.1.cmml" xref="S5.p7.1.m1.1.1"><csymbol cd="ambiguous" id="S5.p7.1.m1.1.1.1.cmml" xref="S5.p7.1.m1.1.1">subscript</csymbol><ci id="S5.p7.1.m1.1.1.2.cmml" xref="S5.p7.1.m1.1.1.2">𝒮</ci><ci id="S5.p7.1.m1.1.1.3.cmml" xref="S5.p7.1.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.1.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.p7.1.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math>) – ranging from 1 to 5, is generated by GPT-4 and measures the level of harmfulness in the responses provided by LLMs to security-sensitive queries. Higher scores indicate a greater level of harmfulness. (2) <span class="ltx_text ltx_font_italic" id="S5.p7.4.3">attack success rate (ASR)</span> – evaluating the fraction of responses that provide harmful information in response to security-sensitive queries, indicating the effectiveness of the attack. Additionally, we use the (3) <span class="ltx_text ltx_font_italic" id="S5.p7.4.4">helpfulness score</span> (<math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.p7.2.m2.1"><semantics id="S5.p7.2.m2.1a"><msub id="S5.p7.2.m2.1.1" xref="S5.p7.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p7.2.m2.1.1.2" xref="S5.p7.2.m2.1.1.2.cmml">𝒮</mi><mi id="S5.p7.2.m2.1.1.3" xref="S5.p7.2.m2.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p7.2.m2.1b"><apply id="S5.p7.2.m2.1.1.cmml" xref="S5.p7.2.m2.1.1"><csymbol cd="ambiguous" id="S5.p7.2.m2.1.1.1.cmml" xref="S5.p7.2.m2.1.1">subscript</csymbol><ci id="S5.p7.2.m2.1.1.2.cmml" xref="S5.p7.2.m2.1.1.2">𝒮</ci><ci id="S5.p7.2.m2.1.1.3.cmml" xref="S5.p7.2.m2.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.2.m2.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.p7.2.m2.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math>) from Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.1</span></a> to measure the general text generation quality of LLMs pre-trained with curated texts. The <math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.p7.3.m3.1"><semantics id="S5.p7.3.m3.1a"><msub id="S5.p7.3.m3.1.1" xref="S5.p7.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p7.3.m3.1.1.2" xref="S5.p7.3.m3.1.1.2.cmml">𝒮</mi><mi id="S5.p7.3.m3.1.1.3" xref="S5.p7.3.m3.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p7.3.m3.1b"><apply id="S5.p7.3.m3.1.1.cmml" xref="S5.p7.3.m3.1.1"><csymbol cd="ambiguous" id="S5.p7.3.m3.1.1.1.cmml" xref="S5.p7.3.m3.1.1">subscript</csymbol><ci id="S5.p7.3.m3.1.1.2.cmml" xref="S5.p7.3.m3.1.1.2">𝒮</ci><ci id="S5.p7.3.m3.1.1.3.cmml" xref="S5.p7.3.m3.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.3.m3.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.p7.3.m3.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math> and ASR metrics measure the harmfulness of pre-trained (or fine-tuned) LLMs, while <math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.p7.4.m4.1"><semantics id="S5.p7.4.m4.1a"><msub id="S5.p7.4.m4.1.1" xref="S5.p7.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p7.4.m4.1.1.2" xref="S5.p7.4.m4.1.1.2.cmml">𝒮</mi><mi id="S5.p7.4.m4.1.1.3" xref="S5.p7.4.m4.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p7.4.m4.1b"><apply id="S5.p7.4.m4.1.1.cmml" xref="S5.p7.4.m4.1.1"><csymbol cd="ambiguous" id="S5.p7.4.m4.1.1.1.cmml" xref="S5.p7.4.m4.1.1">subscript</csymbol><ci id="S5.p7.4.m4.1.1.2.cmml" xref="S5.p7.4.m4.1.1.2">𝒮</ci><ci id="S5.p7.4.m4.1.1.3.cmml" xref="S5.p7.4.m4.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.4.m4.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.p7.4.m4.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math> assesses their helpfulness.</p>
</div>
<div class="ltx_para" id="S5.p8">
<p class="ltx_p" id="S5.p8.1"><span class="ltx_text ltx_font_bold" id="S5.p8.1.1">Baseline</span> As <span class="ltx_text ltx_font_smallcaps" id="S5.p8.1.2">Ctrl</span> represents a significant initial step toward defending against training-based jailbreaking attacks, we compare the performance of pre-training with and without <span class="ltx_text ltx_font_smallcaps" id="S5.p8.1.3">Ctrl</span>.</p>
</div>
<div class="ltx_para" id="S5.p9">
<p class="ltx_p" id="S5.p9.6"><span class="ltx_text ltx_font_bold" id="S5.p9.6.1">Attack Setting</span> For both Attack I and II, we utilize the <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.p9.1.m1.1"><semantics id="S5.p9.1.m1.1a"><msub id="S5.p9.1.m1.1.1" xref="S5.p9.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.1.m1.1.1.2" xref="S5.p9.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.p9.1.m1.1.1.3" xref="S5.p9.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.1.m1.1b"><apply id="S5.p9.1.m1.1.1.cmml" xref="S5.p9.1.m1.1.1"><csymbol cd="ambiguous" id="S5.p9.1.m1.1.1.1.cmml" xref="S5.p9.1.m1.1.1">subscript</csymbol><ci id="S5.p9.1.m1.1.1.2.cmml" xref="S5.p9.1.m1.1.1.2">𝒟</ci><ci id="S5.p9.1.m1.1.1.3.cmml" xref="S5.p9.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.p9.2.m2.1"><semantics id="S5.p9.2.m2.1a"><msub id="S5.p9.2.m2.1.1" xref="S5.p9.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.2.m2.1.1.2" xref="S5.p9.2.m2.1.1.2.cmml">𝒟</mi><mi id="S5.p9.2.m2.1.1.3" xref="S5.p9.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.2.m2.1b"><apply id="S5.p9.2.m2.1.1.cmml" xref="S5.p9.2.m2.1.1"><csymbol cd="ambiguous" id="S5.p9.2.m2.1.1.1.cmml" xref="S5.p9.2.m2.1.1">subscript</csymbol><ci id="S5.p9.2.m2.1.1.2.cmml" xref="S5.p9.2.m2.1.1.2">𝒟</ci><ci id="S5.p9.2.m2.1.1.3.cmml" xref="S5.p9.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math> datasets. In Attack I, we introduce 5% attack samples from either <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.p9.3.m3.1"><semantics id="S5.p9.3.m3.1a"><msub id="S5.p9.3.m3.1.1" xref="S5.p9.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.3.m3.1.1.2" xref="S5.p9.3.m3.1.1.2.cmml">𝒟</mi><mi id="S5.p9.3.m3.1.1.3" xref="S5.p9.3.m3.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.3.m3.1b"><apply id="S5.p9.3.m3.1.1.cmml" xref="S5.p9.3.m3.1.1"><csymbol cd="ambiguous" id="S5.p9.3.m3.1.1.1.cmml" xref="S5.p9.3.m3.1.1">subscript</csymbol><ci id="S5.p9.3.m3.1.1.2.cmml" xref="S5.p9.3.m3.1.1.2">𝒟</ci><ci id="S5.p9.3.m3.1.1.3.cmml" xref="S5.p9.3.m3.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.3.m3.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.3.m3.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.p9.4.m4.1"><semantics id="S5.p9.4.m4.1a"><msub id="S5.p9.4.m4.1.1" xref="S5.p9.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.4.m4.1.1.2" xref="S5.p9.4.m4.1.1.2.cmml">𝒟</mi><mi id="S5.p9.4.m4.1.1.3" xref="S5.p9.4.m4.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.4.m4.1b"><apply id="S5.p9.4.m4.1.1.cmml" xref="S5.p9.4.m4.1.1"><csymbol cd="ambiguous" id="S5.p9.4.m4.1.1.1.cmml" xref="S5.p9.4.m4.1.1">subscript</csymbol><ci id="S5.p9.4.m4.1.1.2.cmml" xref="S5.p9.4.m4.1.1.2">𝒟</ci><ci id="S5.p9.4.m4.1.1.3.cmml" xref="S5.p9.4.m4.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.4.m4.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.4.m4.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math> into the crowdsourced dataset. In Attack II, we fine-tune LLMs using 50 samples from <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.p9.5.m5.1"><semantics id="S5.p9.5.m5.1a"><msub id="S5.p9.5.m5.1.1" xref="S5.p9.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.5.m5.1.1.2" xref="S5.p9.5.m5.1.1.2.cmml">𝒟</mi><mi id="S5.p9.5.m5.1.1.3" xref="S5.p9.5.m5.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.5.m5.1b"><apply id="S5.p9.5.m5.1.1.cmml" xref="S5.p9.5.m5.1.1"><csymbol cd="ambiguous" id="S5.p9.5.m5.1.1.1.cmml" xref="S5.p9.5.m5.1.1">subscript</csymbol><ci id="S5.p9.5.m5.1.1.2.cmml" xref="S5.p9.5.m5.1.1.2">𝒟</ci><ci id="S5.p9.5.m5.1.1.3.cmml" xref="S5.p9.5.m5.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.5.m5.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.5.m5.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or 10 samples from <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.p9.6.m6.1"><semantics id="S5.p9.6.m6.1a"><msub id="S5.p9.6.m6.1.1" xref="S5.p9.6.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p9.6.m6.1.1.2" xref="S5.p9.6.m6.1.1.2.cmml">𝒟</mi><mi id="S5.p9.6.m6.1.1.3" xref="S5.p9.6.m6.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p9.6.m6.1b"><apply id="S5.p9.6.m6.1.1.cmml" xref="S5.p9.6.m6.1.1"><csymbol cd="ambiguous" id="S5.p9.6.m6.1.1.1.cmml" xref="S5.p9.6.m6.1.1">subscript</csymbol><ci id="S5.p9.6.m6.1.1.2.cmml" xref="S5.p9.6.m6.1.1.2">𝒟</ci><ci id="S5.p9.6.m6.1.1.3.cmml" xref="S5.p9.6.m6.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p9.6.m6.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.p9.6.m6.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>, following the configuration outlined in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S5.p10">
<p class="ltx_p" id="S5.p10.5"><span class="ltx_text ltx_font_smallcaps" id="S5.p10.5.1">Ctrl</span><span class="ltx_text ltx_font_bold" id="S5.p10.5.2"> Setting</span> In output sampling, we vary the temperature <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S5.p10.1.m1.1"><semantics id="S5.p10.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S5.p10.1.m1.1.1" xref="S5.p10.1.m1.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S5.p10.1.m1.1b"><ci id="S5.p10.1.m1.1.1.cmml" xref="S5.p10.1.m1.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p10.1.m1.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="S5.p10.1.m1.1d">caligraphic_T</annotation></semantics></math> and top-<math alttext="p" class="ltx_Math" display="inline" id="S5.p10.2.m2.1"><semantics id="S5.p10.2.m2.1a"><mi id="S5.p10.2.m2.1.1" xref="S5.p10.2.m2.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S5.p10.2.m2.1b"><ci id="S5.p10.2.m2.1.1.cmml" xref="S5.p10.2.m2.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p10.2.m2.1c">p</annotation><annotation encoding="application/x-llamapun" id="S5.p10.2.m2.1d">italic_p</annotation></semantics></math> <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S5.p10.3.m3.1"><semantics id="S5.p10.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S5.p10.3.m3.1.1" xref="S5.p10.3.m3.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S5.p10.3.m3.1b"><ci id="S5.p10.3.m3.1.1.cmml" xref="S5.p10.3.m3.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p10.3.m3.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S5.p10.3.m3.1d">caligraphic_P</annotation></semantics></math> parameters, configuring LLMs using every possible combination <math alttext="(\mathcal{T}_{i},\mathcal{P}_{i})" class="ltx_Math" display="inline" id="S5.p10.4.m4.2"><semantics id="S5.p10.4.m4.2a"><mrow id="S5.p10.4.m4.2.2.2" xref="S5.p10.4.m4.2.2.3.cmml"><mo id="S5.p10.4.m4.2.2.2.3" stretchy="false" xref="S5.p10.4.m4.2.2.3.cmml">(</mo><msub id="S5.p10.4.m4.1.1.1.1" xref="S5.p10.4.m4.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p10.4.m4.1.1.1.1.2" xref="S5.p10.4.m4.1.1.1.1.2.cmml">𝒯</mi><mi id="S5.p10.4.m4.1.1.1.1.3" xref="S5.p10.4.m4.1.1.1.1.3.cmml">i</mi></msub><mo id="S5.p10.4.m4.2.2.2.4" xref="S5.p10.4.m4.2.2.3.cmml">,</mo><msub id="S5.p10.4.m4.2.2.2.2" xref="S5.p10.4.m4.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p10.4.m4.2.2.2.2.2" xref="S5.p10.4.m4.2.2.2.2.2.cmml">𝒫</mi><mi id="S5.p10.4.m4.2.2.2.2.3" xref="S5.p10.4.m4.2.2.2.2.3.cmml">i</mi></msub><mo id="S5.p10.4.m4.2.2.2.5" stretchy="false" xref="S5.p10.4.m4.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.p10.4.m4.2b"><interval closure="open" id="S5.p10.4.m4.2.2.3.cmml" xref="S5.p10.4.m4.2.2.2"><apply id="S5.p10.4.m4.1.1.1.1.cmml" xref="S5.p10.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="S5.p10.4.m4.1.1.1.1.1.cmml" xref="S5.p10.4.m4.1.1.1.1">subscript</csymbol><ci id="S5.p10.4.m4.1.1.1.1.2.cmml" xref="S5.p10.4.m4.1.1.1.1.2">𝒯</ci><ci id="S5.p10.4.m4.1.1.1.1.3.cmml" xref="S5.p10.4.m4.1.1.1.1.3">𝑖</ci></apply><apply id="S5.p10.4.m4.2.2.2.2.cmml" xref="S5.p10.4.m4.2.2.2.2"><csymbol cd="ambiguous" id="S5.p10.4.m4.2.2.2.2.1.cmml" xref="S5.p10.4.m4.2.2.2.2">subscript</csymbol><ci id="S5.p10.4.m4.2.2.2.2.2.cmml" xref="S5.p10.4.m4.2.2.2.2.2">𝒫</ci><ci id="S5.p10.4.m4.2.2.2.2.3.cmml" xref="S5.p10.4.m4.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S5.p10.4.m4.2c">(\mathcal{T}_{i},\mathcal{P}_{i})</annotation><annotation encoding="application/x-llamapun" id="S5.p10.4.m4.2d">( caligraphic_T start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , caligraphic_P start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> where <math alttext="\mathcal{T}_{i},\mathcal{P}_{i}\in\left[0.2,0.4,0.6,0.8,1.0\right]" class="ltx_Math" display="inline" id="S5.p10.5.m5.7"><semantics id="S5.p10.5.m5.7a"><mrow id="S5.p10.5.m5.7.7" xref="S5.p10.5.m5.7.7.cmml"><mrow id="S5.p10.5.m5.7.7.2.2" xref="S5.p10.5.m5.7.7.2.3.cmml"><msub id="S5.p10.5.m5.6.6.1.1.1" xref="S5.p10.5.m5.6.6.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p10.5.m5.6.6.1.1.1.2" xref="S5.p10.5.m5.6.6.1.1.1.2.cmml">𝒯</mi><mi id="S5.p10.5.m5.6.6.1.1.1.3" xref="S5.p10.5.m5.6.6.1.1.1.3.cmml">i</mi></msub><mo id="S5.p10.5.m5.7.7.2.2.3" xref="S5.p10.5.m5.7.7.2.3.cmml">,</mo><msub id="S5.p10.5.m5.7.7.2.2.2" xref="S5.p10.5.m5.7.7.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p10.5.m5.7.7.2.2.2.2" xref="S5.p10.5.m5.7.7.2.2.2.2.cmml">𝒫</mi><mi id="S5.p10.5.m5.7.7.2.2.2.3" xref="S5.p10.5.m5.7.7.2.2.2.3.cmml">i</mi></msub></mrow><mo id="S5.p10.5.m5.7.7.3" xref="S5.p10.5.m5.7.7.3.cmml">∈</mo><mrow id="S5.p10.5.m5.7.7.4.2" xref="S5.p10.5.m5.7.7.4.1.cmml"><mo id="S5.p10.5.m5.7.7.4.2.1" xref="S5.p10.5.m5.7.7.4.1.cmml">[</mo><mn id="S5.p10.5.m5.1.1" xref="S5.p10.5.m5.1.1.cmml">0.2</mn><mo id="S5.p10.5.m5.7.7.4.2.2" xref="S5.p10.5.m5.7.7.4.1.cmml">,</mo><mn id="S5.p10.5.m5.2.2" xref="S5.p10.5.m5.2.2.cmml">0.4</mn><mo id="S5.p10.5.m5.7.7.4.2.3" xref="S5.p10.5.m5.7.7.4.1.cmml">,</mo><mn id="S5.p10.5.m5.3.3" xref="S5.p10.5.m5.3.3.cmml">0.6</mn><mo id="S5.p10.5.m5.7.7.4.2.4" xref="S5.p10.5.m5.7.7.4.1.cmml">,</mo><mn id="S5.p10.5.m5.4.4" xref="S5.p10.5.m5.4.4.cmml">0.8</mn><mo id="S5.p10.5.m5.7.7.4.2.5" xref="S5.p10.5.m5.7.7.4.1.cmml">,</mo><mn id="S5.p10.5.m5.5.5" xref="S5.p10.5.m5.5.5.cmml">1.0</mn><mo id="S5.p10.5.m5.7.7.4.2.6" xref="S5.p10.5.m5.7.7.4.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.p10.5.m5.7b"><apply id="S5.p10.5.m5.7.7.cmml" xref="S5.p10.5.m5.7.7"><in id="S5.p10.5.m5.7.7.3.cmml" xref="S5.p10.5.m5.7.7.3"></in><list id="S5.p10.5.m5.7.7.2.3.cmml" xref="S5.p10.5.m5.7.7.2.2"><apply id="S5.p10.5.m5.6.6.1.1.1.cmml" xref="S5.p10.5.m5.6.6.1.1.1"><csymbol cd="ambiguous" id="S5.p10.5.m5.6.6.1.1.1.1.cmml" xref="S5.p10.5.m5.6.6.1.1.1">subscript</csymbol><ci id="S5.p10.5.m5.6.6.1.1.1.2.cmml" xref="S5.p10.5.m5.6.6.1.1.1.2">𝒯</ci><ci id="S5.p10.5.m5.6.6.1.1.1.3.cmml" xref="S5.p10.5.m5.6.6.1.1.1.3">𝑖</ci></apply><apply id="S5.p10.5.m5.7.7.2.2.2.cmml" xref="S5.p10.5.m5.7.7.2.2.2"><csymbol cd="ambiguous" id="S5.p10.5.m5.7.7.2.2.2.1.cmml" xref="S5.p10.5.m5.7.7.2.2.2">subscript</csymbol><ci id="S5.p10.5.m5.7.7.2.2.2.2.cmml" xref="S5.p10.5.m5.7.7.2.2.2.2">𝒫</ci><ci id="S5.p10.5.m5.7.7.2.2.2.3.cmml" xref="S5.p10.5.m5.7.7.2.2.2.3">𝑖</ci></apply></list><list id="S5.p10.5.m5.7.7.4.1.cmml" xref="S5.p10.5.m5.7.7.4.2"><cn id="S5.p10.5.m5.1.1.cmml" type="float" xref="S5.p10.5.m5.1.1">0.2</cn><cn id="S5.p10.5.m5.2.2.cmml" type="float" xref="S5.p10.5.m5.2.2">0.4</cn><cn id="S5.p10.5.m5.3.3.cmml" type="float" xref="S5.p10.5.m5.3.3">0.6</cn><cn id="S5.p10.5.m5.4.4.cmml" type="float" xref="S5.p10.5.m5.4.4">0.8</cn><cn id="S5.p10.5.m5.5.5.cmml" type="float" xref="S5.p10.5.m5.5.5">1.0</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p10.5.m5.7c">\mathcal{T}_{i},\mathcal{P}_{i}\in\left[0.2,0.4,0.6,0.8,1.0\right]</annotation><annotation encoding="application/x-llamapun" id="S5.p10.5.m5.7d">caligraphic_T start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , caligraphic_P start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ [ 0.2 , 0.4 , 0.6 , 0.8 , 1.0 ]</annotation></semantics></math>. During beam search, we iteratively curate texts, terminating the process in 5 rounds. A comprehensive overview of the experimental settings is provided in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A2" title="Appendix B Experimental Configurations ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">B</span></a>.</p>
</div>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Main Results</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1"><span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p1.1.2">Ctrl</span><span class="ltx_text ltx_font_bold" id="S5.SS1.p1.1.3"> Analysis</span> To answer <span class="ltx_text ltx_font_bold" id="S5.SS1.p1.1.1">Q<sub class="ltx_sub" id="S5.SS1.p1.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.SS1.p1.1.1.1.1">1</span></sub></span>, we evaluate whether <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p1.1.4">Ctrl</span> meets its design objective by effectively altering guideline metrics as expected. We randomly select 100 clean texts from the crowdsourced dataset (integrating Alpaca, BeaverTails, and Dolly) and apply <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p1.1.5">Ctrl</span> to Llama-3-8B. We increase the number of beam search iterations and compared the perplexity, readability, and helpfulness of the curated texts to the original texts. Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.F5" title="Figure 5 ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">5</span></a> illustrates the changes in these three guideline metrics. We observe that <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p1.1.6">Ctrl</span> can efficiently reduce text perplexity within a few iterations of beam search (less than 5). Additionally, <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p1.1.7">Ctrl</span> can preserve or enhance readability and helpfulness, relying on various sampling attempts to enrich the provided knowledge and improve the quality of the curated texts.</p>
</div>
<figure class="ltx_figure" id="S5.F6"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="190" id="S5.F6.g1" src="x6.png" width="757"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>In Attack I, changing the ratio of curated and harmful texts (<math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.F6.3.m1.1"><semantics id="S5.F6.3.m1.1b"><msub id="S5.F6.3.m1.1.1" xref="S5.F6.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F6.3.m1.1.1.2" xref="S5.F6.3.m1.1.1.2.cmml">𝒟</mi><mi id="S5.F6.3.m1.1.1.3" xref="S5.F6.3.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F6.3.m1.1c"><apply id="S5.F6.3.m1.1.1.cmml" xref="S5.F6.3.m1.1.1"><csymbol cd="ambiguous" id="S5.F6.3.m1.1.1.1.cmml" xref="S5.F6.3.m1.1.1">subscript</csymbol><ci id="S5.F6.3.m1.1.1.2.cmml" xref="S5.F6.3.m1.1.1.2">𝒟</ci><ci id="S5.F6.3.m1.1.1.3.cmml" xref="S5.F6.3.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F6.3.m1.1d">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.F6.3.m1.1e">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.F6.4.m2.1"><semantics id="S5.F6.4.m2.1b"><msub id="S5.F6.4.m2.1.1" xref="S5.F6.4.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F6.4.m2.1.1.2" xref="S5.F6.4.m2.1.1.2.cmml">𝒟</mi><mi id="S5.F6.4.m2.1.1.3" xref="S5.F6.4.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F6.4.m2.1c"><apply id="S5.F6.4.m2.1.1.cmml" xref="S5.F6.4.m2.1.1"><csymbol cd="ambiguous" id="S5.F6.4.m2.1.1.1.cmml" xref="S5.F6.4.m2.1.1">subscript</csymbol><ci id="S5.F6.4.m2.1.1.2.cmml" xref="S5.F6.4.m2.1.1.2">𝒟</ci><ci id="S5.F6.4.m2.1.1.3.cmml" xref="S5.F6.4.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F6.4.m2.1d">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.F6.4.m2.1e">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>) and evaluating ASR on trained LLMs (Llama-3-8B and Llama-2-7B).</figcaption>
</figure>
<figure class="ltx_table" id="S5.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T3.10">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T3.10.11.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T3.10.11.1.1" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.1.1" style="font-size:90%;">Fine-tune</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.T3.10.11.1.2" rowspan="2" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.2.1" style="font-size:90%;">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T3.10.11.1.3" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.3.1" style="font-size:90%;">Llama-3-8B</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T3.10.11.1.4" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.4.1" style="font-size:90%;">Llama-2-7B</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T3.10.11.1.5" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.5.1" style="font-size:90%;">Vicuna-7B</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T3.10.11.1.6" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.11.1.6.1" style="font-size:90%;">ChatGLM-6B</span></th>
</tr>
<tr class="ltx_tr" id="S5.T3.8.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row" id="S5.T3.8.8.9" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.8.8.9.1" style="font-size:90%;">Dataset</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.1.1.1" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T3.1.1.1.m1.1"><semantics id="S5.T3.1.1.1.m1.1a"><msub id="S5.T3.1.1.1.m1.1.1" xref="S5.T3.1.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.1.1.1.m1.1.1.2" mathsize="90%" xref="S5.T3.1.1.1.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.1.1.1.m1.1.1.3" mathsize="90%" xref="S5.T3.1.1.1.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.1.1.1.m1.1b"><apply id="S5.T3.1.1.1.m1.1.1.cmml" xref="S5.T3.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.1.1.1.m1.1.1.1.cmml" xref="S5.T3.1.1.1.m1.1.1">subscript</csymbol><ci id="S5.T3.1.1.1.m1.1.1.2.cmml" xref="S5.T3.1.1.1.m1.1.1.2">𝒮</ci><ci id="S5.T3.1.1.1.m1.1.1.3.cmml" xref="S5.T3.1.1.1.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.1.1.1.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.1.1.1.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.8.8.10" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.8.8.10.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.2.2.2" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T3.2.2.2.m1.1"><semantics id="S5.T3.2.2.2.m1.1a"><msub id="S5.T3.2.2.2.m1.1.1" xref="S5.T3.2.2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.2.2.2.m1.1.1.2" mathsize="90%" xref="S5.T3.2.2.2.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.2.2.2.m1.1.1.3" mathsize="90%" xref="S5.T3.2.2.2.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.2.2.2.m1.1b"><apply id="S5.T3.2.2.2.m1.1.1.cmml" xref="S5.T3.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.2.2.2.m1.1.1.1.cmml" xref="S5.T3.2.2.2.m1.1.1">subscript</csymbol><ci id="S5.T3.2.2.2.m1.1.1.2.cmml" xref="S5.T3.2.2.2.m1.1.1.2">𝒮</ci><ci id="S5.T3.2.2.2.m1.1.1.3.cmml" xref="S5.T3.2.2.2.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.2.2.2.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.2.2.2.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.3.3.3" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T3.3.3.3.m1.1"><semantics id="S5.T3.3.3.3.m1.1a"><msub id="S5.T3.3.3.3.m1.1.1" xref="S5.T3.3.3.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.3.3.3.m1.1.1.2" mathsize="90%" xref="S5.T3.3.3.3.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.3.3.3.m1.1.1.3" mathsize="90%" xref="S5.T3.3.3.3.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.3.3.3.m1.1b"><apply id="S5.T3.3.3.3.m1.1.1.cmml" xref="S5.T3.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.3.3.3.m1.1.1.1.cmml" xref="S5.T3.3.3.3.m1.1.1">subscript</csymbol><ci id="S5.T3.3.3.3.m1.1.1.2.cmml" xref="S5.T3.3.3.3.m1.1.1.2">𝒮</ci><ci id="S5.T3.3.3.3.m1.1.1.3.cmml" xref="S5.T3.3.3.3.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.3.3.3.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.3.3.3.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.8.8.11" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.8.8.11.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.4.4.4" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T3.4.4.4.m1.1"><semantics id="S5.T3.4.4.4.m1.1a"><msub id="S5.T3.4.4.4.m1.1.1" xref="S5.T3.4.4.4.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.4.4.4.m1.1.1.2" mathsize="90%" xref="S5.T3.4.4.4.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.4.4.4.m1.1.1.3" mathsize="90%" xref="S5.T3.4.4.4.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.4.4.4.m1.1b"><apply id="S5.T3.4.4.4.m1.1.1.cmml" xref="S5.T3.4.4.4.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.4.4.4.m1.1.1.1.cmml" xref="S5.T3.4.4.4.m1.1.1">subscript</csymbol><ci id="S5.T3.4.4.4.m1.1.1.2.cmml" xref="S5.T3.4.4.4.m1.1.1.2">𝒮</ci><ci id="S5.T3.4.4.4.m1.1.1.3.cmml" xref="S5.T3.4.4.4.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.4.4.4.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.4.4.4.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.5.5.5" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T3.5.5.5.m1.1"><semantics id="S5.T3.5.5.5.m1.1a"><msub id="S5.T3.5.5.5.m1.1.1" xref="S5.T3.5.5.5.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.5.5.5.m1.1.1.2" mathsize="90%" xref="S5.T3.5.5.5.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.5.5.5.m1.1.1.3" mathsize="90%" xref="S5.T3.5.5.5.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.5.5.5.m1.1b"><apply id="S5.T3.5.5.5.m1.1.1.cmml" xref="S5.T3.5.5.5.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.5.5.5.m1.1.1.1.cmml" xref="S5.T3.5.5.5.m1.1.1">subscript</csymbol><ci id="S5.T3.5.5.5.m1.1.1.2.cmml" xref="S5.T3.5.5.5.m1.1.1.2">𝒮</ci><ci id="S5.T3.5.5.5.m1.1.1.3.cmml" xref="S5.T3.5.5.5.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.5.5.5.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.5.5.5.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.8.8.12" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.8.8.12.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.6.6.6" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T3.6.6.6.m1.1"><semantics id="S5.T3.6.6.6.m1.1a"><msub id="S5.T3.6.6.6.m1.1.1" xref="S5.T3.6.6.6.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.6.6.6.m1.1.1.2" mathsize="90%" xref="S5.T3.6.6.6.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.6.6.6.m1.1.1.3" mathsize="90%" xref="S5.T3.6.6.6.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.6.6.6.m1.1b"><apply id="S5.T3.6.6.6.m1.1.1.cmml" xref="S5.T3.6.6.6.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.6.6.6.m1.1.1.1.cmml" xref="S5.T3.6.6.6.m1.1.1">subscript</csymbol><ci id="S5.T3.6.6.6.m1.1.1.2.cmml" xref="S5.T3.6.6.6.m1.1.1.2">𝒮</ci><ci id="S5.T3.6.6.6.m1.1.1.3.cmml" xref="S5.T3.6.6.6.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.6.6.6.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.6.6.6.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.7.7.7" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.T3.7.7.7.m1.1"><semantics id="S5.T3.7.7.7.m1.1a"><msub id="S5.T3.7.7.7.m1.1.1" xref="S5.T3.7.7.7.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.7.7.7.m1.1.1.2" mathsize="90%" xref="S5.T3.7.7.7.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.7.7.7.m1.1.1.3" mathsize="90%" xref="S5.T3.7.7.7.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.7.7.7.m1.1b"><apply id="S5.T3.7.7.7.m1.1.1.cmml" xref="S5.T3.7.7.7.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.7.7.7.m1.1.1.1.cmml" xref="S5.T3.7.7.7.m1.1.1">subscript</csymbol><ci id="S5.T3.7.7.7.m1.1.1.2.cmml" xref="S5.T3.7.7.7.m1.1.1.2">𝒮</ci><ci id="S5.T3.7.7.7.m1.1.1.3.cmml" xref="S5.T3.7.7.7.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.7.7.7.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.7.7.7.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.8.8.13" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.8.8.13.1" style="font-size:90%;">ASR</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.8.8.8" style="padding:-0.45pt 2.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.T3.8.8.8.m1.1"><semantics id="S5.T3.8.8.8.m1.1a"><msub id="S5.T3.8.8.8.m1.1.1" xref="S5.T3.8.8.8.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.8.8.8.m1.1.1.2" mathsize="90%" xref="S5.T3.8.8.8.m1.1.1.2.cmml">𝒮</mi><mi id="S5.T3.8.8.8.m1.1.1.3" mathsize="90%" xref="S5.T3.8.8.8.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.8.8.8.m1.1b"><apply id="S5.T3.8.8.8.m1.1.1.cmml" xref="S5.T3.8.8.8.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.8.8.8.m1.1.1.1.cmml" xref="S5.T3.8.8.8.m1.1.1">subscript</csymbol><ci id="S5.T3.8.8.8.m1.1.1.2.cmml" xref="S5.T3.8.8.8.m1.1.1.2">𝒮</ci><ci id="S5.T3.8.8.8.m1.1.1.3.cmml" xref="S5.T3.8.8.8.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.8.8.8.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.8.8.8.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T3.9.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S5.T3.9.9.1" rowspan="2" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.T3.9.9.1.1.m1.1"><semantics id="S5.T3.9.9.1.1.m1.1a"><msub id="S5.T3.9.9.1.1.m1.1.1" xref="S5.T3.9.9.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.9.9.1.1.m1.1.1.2" xref="S5.T3.9.9.1.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.T3.9.9.1.1.m1.1.1.3" xref="S5.T3.9.9.1.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.9.9.1.1.m1.1b"><apply id="S5.T3.9.9.1.1.m1.1.1.cmml" xref="S5.T3.9.9.1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.9.9.1.1.m1.1.1.1.cmml" xref="S5.T3.9.9.1.1.m1.1.1">subscript</csymbol><ci id="S5.T3.9.9.1.1.m1.1.1.2.cmml" xref="S5.T3.9.9.1.1.m1.1.1.2">𝒟</ci><ci id="S5.T3.9.9.1.1.m1.1.1.3.cmml" xref="S5.T3.9.9.1.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.9.9.1.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.9.9.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.9.9.2" style="padding:-0.45pt 2.0pt;">
<span class="ltx_text" id="S5.T3.9.9.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T3.9.9.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.3" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.3.1" style="font-size:90%;">4.74</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.4" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.4.1" style="font-size:90%;">95.2%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.5" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.5.1" style="font-size:90%;">3.53</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.6" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.6.1" style="font-size:90%;">4.82</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.7" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.7.1" style="font-size:90%;">97.9%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.8" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.8.1" style="font-size:90%;">3.38</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.9" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.9.1" style="font-size:90%;">4.87</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.10" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.10.1" style="font-size:90%;">100%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.11" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.11.1" style="font-size:90%;">2.83</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.12" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.12.1" style="font-size:90%;">4.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.13" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.13.1" style="font-size:90%;">100%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.9.9.14" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.9.9.14.1" style="font-size:90%;">3.04</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.10.12.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.10.12.1.1" style="padding:-0.45pt 2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T3.10.12.1.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.2" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.2.1" style="font-size:90%;background-color:#B3DCDC;">2.26</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.3" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.3.1" style="font-size:90%;background-color:#B3DCDC;">43.1%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.4" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.4.1" style="font-size:90%;background-color:#B3DCDC;">3.88</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.5" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.5.1" style="font-size:90%;background-color:#B3DCDC;">2.75</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.6" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.6.1" style="font-size:90%;background-color:#B3DCDC;">56.3%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.7" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.7.1" style="font-size:90%;background-color:#B3DCDC;">3.67</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.8" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.8.1" style="font-size:90%;background-color:#B3DCDC;">3.31</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.9" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.9.1" style="font-size:90%;background-color:#B3DCDC;">63.7%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.10" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.10.1" style="font-size:90%;background-color:#B3DCDC;">3.09</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.11" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.11.1" style="font-size:90%;">4.24</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.12" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.12.1" style="font-size:90%;">83.5%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.10.12.1.13" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.12.1.13.1" style="font-size:90%;">3.16</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.10.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T3.10.10.1" rowspan="2" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.1.1" style="font-size:90%;"><math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.T3.10.10.1.1.m1.1"><semantics id="S5.T3.10.10.1.1.m1.1a"><msub id="S5.T3.10.10.1.1.m1.1.1" xref="S5.T3.10.10.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.T3.10.10.1.1.m1.1.1.2" xref="S5.T3.10.10.1.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.T3.10.10.1.1.m1.1.1.3" xref="S5.T3.10.10.1.1.m1.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.T3.10.10.1.1.m1.1b"><apply id="S5.T3.10.10.1.1.m1.1.1.cmml" xref="S5.T3.10.10.1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.T3.10.10.1.1.m1.1.1.1.cmml" xref="S5.T3.10.10.1.1.m1.1.1">subscript</csymbol><ci id="S5.T3.10.10.1.1.m1.1.1.2.cmml" xref="S5.T3.10.10.1.1.m1.1.1.2">𝒟</ci><ci id="S5.T3.10.10.1.1.m1.1.1.3.cmml" xref="S5.T3.10.10.1.1.m1.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T3.10.10.1.1.m1.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.T3.10.10.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math></span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.10.10.2" style="padding:-0.45pt 2.0pt;">
<span class="ltx_text" id="S5.T3.10.10.2.1" style="font-size:90%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.T3.10.10.2.2" style="font-size:90%;">Ctrl</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.3" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.3.1" style="font-size:90%;">3.77</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.4" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.4.1" style="font-size:90%;">78.3%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.5" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.5.1" style="font-size:90%;">3.76</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.6" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.6.1" style="font-size:90%;">4.67</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.7" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.7.1" style="font-size:90%;">94.2%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.8" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.8.1" style="font-size:90%;">3.68</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.9" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.9.1" style="font-size:90%;">4.74</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.10" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.10.1" style="font-size:90%;">98.5%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.11" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.11.1" style="font-size:90%;">2.69</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.12" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.12.1" style="font-size:90%;">4.81</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.13" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.13.1" style="font-size:90%;">100%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.14" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.10.14.1" style="font-size:90%;">2.66</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.10.13.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.T3.10.13.2.1" style="padding:-0.45pt 2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.T3.10.13.2.1.1" style="font-size:90%;">Ctrl</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.2" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.2.1" style="font-size:90%;background-color:#B3DCDC;">1.84</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.3" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.3.1" style="font-size:90%;background-color:#B3DCDC;">32.7%</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.4" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.4.1" style="font-size:90%;background-color:#B3DCDC;">3.97</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.5" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.5.1" style="font-size:90%;background-color:#B3DCDC;">2.64</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.6" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.6.1" style="font-size:90%;background-color:#B3DCDC;">43.3%</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.7" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.7.1" style="font-size:90%;background-color:#B3DCDC;">3.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.8" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.8.1" style="font-size:90%;background-color:#B3DCDC;">3.24</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.9" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.9.1" style="font-size:90%;background-color:#B3DCDC;">57.1%</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.10" style="background-color:#B3DCDC;padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.10.1" style="font-size:90%;background-color:#B3DCDC;">2.88</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.11" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.11.1" style="font-size:90%;">3.72</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.12" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.12.1" style="font-size:90%;">71.5%</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.10.13.2.13" style="padding:-0.45pt 2.0pt;"><span class="ltx_text" id="S5.T3.10.13.2.13.1" style="font-size:90%;">2.91</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 3: </span>The <span class="ltx_text ltx_font_smallcaps" id="S5.T3.19.1">Ctrl</span> performance on Attack II with different attack datasets. The <span class="ltx_text" id="S5.T3.20.2" style="background-color:#B3DCDC;">highlight</span> indicates cases where <span class="ltx_text ltx_font_smallcaps" id="S5.T3.21.3">Ctrl</span> not only significantly mitigates the attack but also enhances LLMs’ helpfulness.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.5"><span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.5.2">Ctrl</span><span class="ltx_text ltx_font_bold" id="S5.SS1.p2.5.3"> against Attack I</span> To address <span class="ltx_text ltx_font_bold" id="S5.SS1.p2.1.1">Q<sub class="ltx_sub" id="S5.SS1.p2.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.SS1.p2.1.1.1.1">2</span></sub></span>, we evaluate how <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.5.4">Ctrl</span> performs during the pre-training stage. Although the LLMs are already pre-trained, we simulate the pre-training process using crowdsourced data in which adversaries have injected harmful texts. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.T2" title="Table 2 ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">2</span></a>, we collected two crowdsourced datasets, <math alttext="\mathcal{D}_{\mathrm{2k}}" class="ltx_Math" display="inline" id="S5.SS1.p2.2.m1.1"><semantics id="S5.SS1.p2.2.m1.1a"><msub id="S5.SS1.p2.2.m1.1.1" xref="S5.SS1.p2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p2.2.m1.1.1.2" xref="S5.SS1.p2.2.m1.1.1.2.cmml">𝒟</mi><mrow id="S5.SS1.p2.2.m1.1.1.3" xref="S5.SS1.p2.2.m1.1.1.3.cmml"><mn id="S5.SS1.p2.2.m1.1.1.3.2" xref="S5.SS1.p2.2.m1.1.1.3.2.cmml">2</mn><mo id="S5.SS1.p2.2.m1.1.1.3.1" xref="S5.SS1.p2.2.m1.1.1.3.1.cmml">⁢</mo><mi id="S5.SS1.p2.2.m1.1.1.3.3" mathvariant="normal" xref="S5.SS1.p2.2.m1.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.2.m1.1b"><apply id="S5.SS1.p2.2.m1.1.1.cmml" xref="S5.SS1.p2.2.m1.1.1"><csymbol cd="ambiguous" id="S5.SS1.p2.2.m1.1.1.1.cmml" xref="S5.SS1.p2.2.m1.1.1">subscript</csymbol><ci id="S5.SS1.p2.2.m1.1.1.2.cmml" xref="S5.SS1.p2.2.m1.1.1.2">𝒟</ci><apply id="S5.SS1.p2.2.m1.1.1.3.cmml" xref="S5.SS1.p2.2.m1.1.1.3"><times id="S5.SS1.p2.2.m1.1.1.3.1.cmml" xref="S5.SS1.p2.2.m1.1.1.3.1"></times><cn id="S5.SS1.p2.2.m1.1.1.3.2.cmml" type="integer" xref="S5.SS1.p2.2.m1.1.1.3.2">2</cn><ci id="S5.SS1.p2.2.m1.1.1.3.3.cmml" xref="S5.SS1.p2.2.m1.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.2.m1.1c">\mathcal{D}_{\mathrm{2k}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.2.m1.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{D}_{\mathrm{10k}}" class="ltx_Math" display="inline" id="S5.SS1.p2.3.m2.1"><semantics id="S5.SS1.p2.3.m2.1a"><msub id="S5.SS1.p2.3.m2.1.1" xref="S5.SS1.p2.3.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p2.3.m2.1.1.2" xref="S5.SS1.p2.3.m2.1.1.2.cmml">𝒟</mi><mrow id="S5.SS1.p2.3.m2.1.1.3" xref="S5.SS1.p2.3.m2.1.1.3.cmml"><mn id="S5.SS1.p2.3.m2.1.1.3.2" xref="S5.SS1.p2.3.m2.1.1.3.2.cmml">10</mn><mo id="S5.SS1.p2.3.m2.1.1.3.1" xref="S5.SS1.p2.3.m2.1.1.3.1.cmml">⁢</mo><mi id="S5.SS1.p2.3.m2.1.1.3.3" mathvariant="normal" xref="S5.SS1.p2.3.m2.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.3.m2.1b"><apply id="S5.SS1.p2.3.m2.1.1.cmml" xref="S5.SS1.p2.3.m2.1.1"><csymbol cd="ambiguous" id="S5.SS1.p2.3.m2.1.1.1.cmml" xref="S5.SS1.p2.3.m2.1.1">subscript</csymbol><ci id="S5.SS1.p2.3.m2.1.1.2.cmml" xref="S5.SS1.p2.3.m2.1.1.2">𝒟</ci><apply id="S5.SS1.p2.3.m2.1.1.3.cmml" xref="S5.SS1.p2.3.m2.1.1.3"><times id="S5.SS1.p2.3.m2.1.1.3.1.cmml" xref="S5.SS1.p2.3.m2.1.1.3.1"></times><cn id="S5.SS1.p2.3.m2.1.1.3.2.cmml" type="integer" xref="S5.SS1.p2.3.m2.1.1.3.2">10</cn><ci id="S5.SS1.p2.3.m2.1.1.3.3.cmml" xref="S5.SS1.p2.3.m2.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.3.m2.1c">\mathcal{D}_{\mathrm{10k}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.3.m2.1d">caligraphic_D start_POSTSUBSCRIPT 10 roman_k end_POSTSUBSCRIPT</annotation></semantics></math>, containing 2,000 and 10,000 instances respectively, equally sampled from Alpaca, BeaverTails, and Dolly. Each dataset includes 5% harmful texts sourced from either <math alttext="\mathcal{D}_{\textrm{EH}}" class="ltx_Math" display="inline" id="S5.SS1.p2.4.m3.1"><semantics id="S5.SS1.p2.4.m3.1a"><msub id="S5.SS1.p2.4.m3.1.1" xref="S5.SS1.p2.4.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p2.4.m3.1.1.2" xref="S5.SS1.p2.4.m3.1.1.2.cmml">𝒟</mi><mtext id="S5.SS1.p2.4.m3.1.1.3" xref="S5.SS1.p2.4.m3.1.1.3a.cmml">EH</mtext></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.4.m3.1b"><apply id="S5.SS1.p2.4.m3.1.1.cmml" xref="S5.SS1.p2.4.m3.1.1"><csymbol cd="ambiguous" id="S5.SS1.p2.4.m3.1.1.1.cmml" xref="S5.SS1.p2.4.m3.1.1">subscript</csymbol><ci id="S5.SS1.p2.4.m3.1.1.2.cmml" xref="S5.SS1.p2.4.m3.1.1.2">𝒟</ci><ci id="S5.SS1.p2.4.m3.1.1.3a.cmml" xref="S5.SS1.p2.4.m3.1.1.3"><mtext id="S5.SS1.p2.4.m3.1.1.3.cmml" mathsize="70%" xref="S5.SS1.p2.4.m3.1.1.3">EH</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.4.m3.1c">\mathcal{D}_{\textrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.4.m3.1d">caligraphic_D start_POSTSUBSCRIPT EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\textrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p2.5.m4.1"><semantics id="S5.SS1.p2.5.m4.1a"><msub id="S5.SS1.p2.5.m4.1.1" xref="S5.SS1.p2.5.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p2.5.m4.1.1.2" xref="S5.SS1.p2.5.m4.1.1.2.cmml">𝒟</mi><mtext id="S5.SS1.p2.5.m4.1.1.3" xref="S5.SS1.p2.5.m4.1.1.3a.cmml">IS</mtext></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.5.m4.1b"><apply id="S5.SS1.p2.5.m4.1.1.cmml" xref="S5.SS1.p2.5.m4.1.1"><csymbol cd="ambiguous" id="S5.SS1.p2.5.m4.1.1.1.cmml" xref="S5.SS1.p2.5.m4.1.1">subscript</csymbol><ci id="S5.SS1.p2.5.m4.1.1.2.cmml" xref="S5.SS1.p2.5.m4.1.1.2">𝒟</ci><ci id="S5.SS1.p2.5.m4.1.1.3a.cmml" xref="S5.SS1.p2.5.m4.1.1.3"><mtext id="S5.SS1.p2.5.m4.1.1.3.cmml" mathsize="70%" xref="S5.SS1.p2.5.m4.1.1.3">IS</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.5.m4.1c">\mathcal{D}_{\textrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.5.m4.1d">caligraphic_D start_POSTSUBSCRIPT IS end_POSTSUBSCRIPT</annotation></semantics></math>. We compare scenarios with and without (i.e., attack-only) the implementation of <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.5.5">Ctrl</span> and evaluate the performance of pre-trained LLMs using AdvBench.</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.4">We have the following observations: (1) <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.1">Ctrl</span> is capable of mitigating harmful texts across all LLMs with different text volumes, demonstrating its generality and effectiveness in fortifying safety alignment. (2) In most cases, <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.2">Ctrl</span> not only mitigates the jailbreaking effect but also enhances the helpfulness of LLMs by providing more useful knowledge. This is due to <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.3">Ctrl</span>’s intrinsic focus on ensuring text quality. The curated high-quality texts can further improve the knowledgeability of LLMs. (3) There is a potential drop in LLM helpfulness when using <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.4">Ctrl</span>, such as with Llama-3-8B on <math alttext="\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p3.1.m1.1"><semantics id="S5.SS1.p3.1.m1.1a"><mrow id="S5.SS1.p3.1.m1.1.1" xref="S5.SS1.p3.1.m1.1.1.cmml"><msub id="S5.SS1.p3.1.m1.1.1.2" xref="S5.SS1.p3.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p3.1.m1.1.1.2.2" xref="S5.SS1.p3.1.m1.1.1.2.2.cmml">𝒟</mi><mrow id="S5.SS1.p3.1.m1.1.1.2.3" xref="S5.SS1.p3.1.m1.1.1.2.3.cmml"><mn id="S5.SS1.p3.1.m1.1.1.2.3.2" xref="S5.SS1.p3.1.m1.1.1.2.3.2.cmml">10</mn><mo id="S5.SS1.p3.1.m1.1.1.2.3.1" xref="S5.SS1.p3.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S5.SS1.p3.1.m1.1.1.2.3.3" mathvariant="normal" xref="S5.SS1.p3.1.m1.1.1.2.3.3.cmml">k</mi></mrow></msub><mo id="S5.SS1.p3.1.m1.1.1.1" xref="S5.SS1.p3.1.m1.1.1.1.cmml">∪</mo><msub id="S5.SS1.p3.1.m1.1.1.3" xref="S5.SS1.p3.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p3.1.m1.1.1.3.2" xref="S5.SS1.p3.1.m1.1.1.3.2.cmml">𝒟</mi><mi id="S5.SS1.p3.1.m1.1.1.3.3" xref="S5.SS1.p3.1.m1.1.1.3.3.cmml">IS</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.1.m1.1b"><apply id="S5.SS1.p3.1.m1.1.1.cmml" xref="S5.SS1.p3.1.m1.1.1"><union id="S5.SS1.p3.1.m1.1.1.1.cmml" xref="S5.SS1.p3.1.m1.1.1.1"></union><apply id="S5.SS1.p3.1.m1.1.1.2.cmml" xref="S5.SS1.p3.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.SS1.p3.1.m1.1.1.2.1.cmml" xref="S5.SS1.p3.1.m1.1.1.2">subscript</csymbol><ci id="S5.SS1.p3.1.m1.1.1.2.2.cmml" xref="S5.SS1.p3.1.m1.1.1.2.2">𝒟</ci><apply id="S5.SS1.p3.1.m1.1.1.2.3.cmml" xref="S5.SS1.p3.1.m1.1.1.2.3"><times id="S5.SS1.p3.1.m1.1.1.2.3.1.cmml" xref="S5.SS1.p3.1.m1.1.1.2.3.1"></times><cn id="S5.SS1.p3.1.m1.1.1.2.3.2.cmml" type="integer" xref="S5.SS1.p3.1.m1.1.1.2.3.2">10</cn><ci id="S5.SS1.p3.1.m1.1.1.2.3.3.cmml" xref="S5.SS1.p3.1.m1.1.1.2.3.3">k</ci></apply></apply><apply id="S5.SS1.p3.1.m1.1.1.3.cmml" xref="S5.SS1.p3.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.SS1.p3.1.m1.1.1.3.1.cmml" xref="S5.SS1.p3.1.m1.1.1.3">subscript</csymbol><ci id="S5.SS1.p3.1.m1.1.1.3.2.cmml" xref="S5.SS1.p3.1.m1.1.1.3.2">𝒟</ci><ci id="S5.SS1.p3.1.m1.1.1.3.3.cmml" xref="S5.SS1.p3.1.m1.1.1.3.3">IS</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.1.m1.1c">\mathcal{D}_{\mathrm{10k}}\cup\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p3.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT 10 roman_k end_POSTSUBSCRIPT ∪ caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>. This drop is attributed to the nature of <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p3.2.m2.1"><semantics id="S5.SS1.p3.2.m2.1a"><msub id="S5.SS1.p3.2.m2.1.1" xref="S5.SS1.p3.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p3.2.m2.1.1.2" xref="S5.SS1.p3.2.m2.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p3.2.m2.1.1.3" xref="S5.SS1.p3.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.2.m2.1b"><apply id="S5.SS1.p3.2.m2.1.1.cmml" xref="S5.SS1.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S5.SS1.p3.2.m2.1.1.1.cmml" xref="S5.SS1.p3.2.m2.1.1">subscript</csymbol><ci id="S5.SS1.p3.2.m2.1.1.2.cmml" xref="S5.SS1.p3.2.m2.1.1.2">𝒟</ci><ci id="S5.SS1.p3.2.m2.1.1.3.cmml" xref="S5.SS1.p3.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p3.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>, which reinforces LLMs to strictly obey instructions, thereby enriching the outputs. Smaller-sized LLMs, such as ChatGLM-6B, are more susceptible to the influence of <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p3.3.m3.1"><semantics id="S5.SS1.p3.3.m3.1a"><msub id="S5.SS1.p3.3.m3.1.1" xref="S5.SS1.p3.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p3.3.m3.1.1.2" xref="S5.SS1.p3.3.m3.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p3.3.m3.1.1.3" xref="S5.SS1.p3.3.m3.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.3.m3.1b"><apply id="S5.SS1.p3.3.m3.1.1.cmml" xref="S5.SS1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S5.SS1.p3.3.m3.1.1.1.cmml" xref="S5.SS1.p3.3.m3.1.1">subscript</csymbol><ci id="S5.SS1.p3.3.m3.1.1.2.cmml" xref="S5.SS1.p3.3.m3.1.1.2">𝒟</ci><ci id="S5.SS1.p3.3.m3.1.1.3.cmml" xref="S5.SS1.p3.3.m3.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.3.m3.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p3.3.m3.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>, often behaving as overly obedient agents. Consequently, applying <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.5">Ctrl</span> to mitigate the influence of <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p3.4.m4.1"><semantics id="S5.SS1.p3.4.m4.1a"><msub id="S5.SS1.p3.4.m4.1.1" xref="S5.SS1.p3.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p3.4.m4.1.1.2" xref="S5.SS1.p3.4.m4.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p3.4.m4.1.1.3" xref="S5.SS1.p3.4.m4.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.4.m4.1b"><apply id="S5.SS1.p3.4.m4.1.1.cmml" xref="S5.SS1.p3.4.m4.1.1"><csymbol cd="ambiguous" id="S5.SS1.p3.4.m4.1.1.1.cmml" xref="S5.SS1.p3.4.m4.1.1">subscript</csymbol><ci id="S5.SS1.p3.4.m4.1.1.2.cmml" xref="S5.SS1.p3.4.m4.1.1.2">𝒟</ci><ci id="S5.SS1.p3.4.m4.1.1.3.cmml" xref="S5.SS1.p3.4.m4.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.4.m4.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p3.4.m4.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math> may result in a slight decrease in helpfulness, as <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.4.6">Ctrl</span> aims to reduce this over-reliance on obedience.</p>
</div>
<div class="ltx_para" id="S5.SS1.p4">
<p class="ltx_p" id="S5.SS1.p4.7"><span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p4.7.2">Ctrl</span><span class="ltx_text ltx_font_bold" id="S5.SS1.p4.7.3"> against Attack II</span> To address <span class="ltx_text ltx_font_bold" id="S5.SS1.p4.1.1">Q<sub class="ltx_sub" id="S5.SS1.p4.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.SS1.p4.1.1.1.1">3</span></sub></span>, we first apply <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p4.7.4">Ctrl</span> to curate 25% samples of <math alttext="\mathcal{D}_{\mathrm{2k}}" class="ltx_Math" display="inline" id="S5.SS1.p4.2.m1.1"><semantics id="S5.SS1.p4.2.m1.1a"><msub id="S5.SS1.p4.2.m1.1.1" xref="S5.SS1.p4.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.2.m1.1.1.2" xref="S5.SS1.p4.2.m1.1.1.2.cmml">𝒟</mi><mrow id="S5.SS1.p4.2.m1.1.1.3" xref="S5.SS1.p4.2.m1.1.1.3.cmml"><mn id="S5.SS1.p4.2.m1.1.1.3.2" xref="S5.SS1.p4.2.m1.1.1.3.2.cmml">2</mn><mo id="S5.SS1.p4.2.m1.1.1.3.1" xref="S5.SS1.p4.2.m1.1.1.3.1.cmml">⁢</mo><mi id="S5.SS1.p4.2.m1.1.1.3.3" mathvariant="normal" xref="S5.SS1.p4.2.m1.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.2.m1.1b"><apply id="S5.SS1.p4.2.m1.1.1.cmml" xref="S5.SS1.p4.2.m1.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.2.m1.1.1.1.cmml" xref="S5.SS1.p4.2.m1.1.1">subscript</csymbol><ci id="S5.SS1.p4.2.m1.1.1.2.cmml" xref="S5.SS1.p4.2.m1.1.1.2">𝒟</ci><apply id="S5.SS1.p4.2.m1.1.1.3.cmml" xref="S5.SS1.p4.2.m1.1.1.3"><times id="S5.SS1.p4.2.m1.1.1.3.1.cmml" xref="S5.SS1.p4.2.m1.1.1.3.1"></times><cn id="S5.SS1.p4.2.m1.1.1.3.2.cmml" type="integer" xref="S5.SS1.p4.2.m1.1.1.3.2">2</cn><ci id="S5.SS1.p4.2.m1.1.1.3.3.cmml" xref="S5.SS1.p4.2.m1.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.2.m1.1c">\mathcal{D}_{\mathrm{2k}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.2.m1.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT</annotation></semantics></math> during the pre-training phase, then release the model for downstream fine-tuning, where the adversary uses attack samples (<math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.SS1.p4.3.m2.1"><semantics id="S5.SS1.p4.3.m2.1a"><msub id="S5.SS1.p4.3.m2.1.1" xref="S5.SS1.p4.3.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.3.m2.1.1.2" xref="S5.SS1.p4.3.m2.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p4.3.m2.1.1.3" xref="S5.SS1.p4.3.m2.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.3.m2.1b"><apply id="S5.SS1.p4.3.m2.1.1.cmml" xref="S5.SS1.p4.3.m2.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.3.m2.1.1.1.cmml" xref="S5.SS1.p4.3.m2.1.1">subscript</csymbol><ci id="S5.SS1.p4.3.m2.1.1.2.cmml" xref="S5.SS1.p4.3.m2.1.1.2">𝒟</ci><ci id="S5.SS1.p4.3.m2.1.1.3.cmml" xref="S5.SS1.p4.3.m2.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.3.m2.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.3.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p4.4.m3.1"><semantics id="S5.SS1.p4.4.m3.1a"><msub id="S5.SS1.p4.4.m3.1.1" xref="S5.SS1.p4.4.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.4.m3.1.1.2" xref="S5.SS1.p4.4.m3.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p4.4.m3.1.1.3" xref="S5.SS1.p4.4.m3.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.4.m3.1b"><apply id="S5.SS1.p4.4.m3.1.1.cmml" xref="S5.SS1.p4.4.m3.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.4.m3.1.1.1.cmml" xref="S5.SS1.p4.4.m3.1.1">subscript</csymbol><ci id="S5.SS1.p4.4.m3.1.1.2.cmml" xref="S5.SS1.p4.4.m3.1.1.2">𝒟</ci><ci id="S5.SS1.p4.4.m3.1.1.3.cmml" xref="S5.SS1.p4.4.m3.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.4.m3.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.4.m3.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>) to attempt jailbreaking LLMs. Following the settings in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>]</cite>, we fine-tune LLMs using 50 samples from <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.SS1.p4.5.m4.1"><semantics id="S5.SS1.p4.5.m4.1a"><msub id="S5.SS1.p4.5.m4.1.1" xref="S5.SS1.p4.5.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.5.m4.1.1.2" xref="S5.SS1.p4.5.m4.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p4.5.m4.1.1.3" xref="S5.SS1.p4.5.m4.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.5.m4.1b"><apply id="S5.SS1.p4.5.m4.1.1.cmml" xref="S5.SS1.p4.5.m4.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.5.m4.1.1.1.cmml" xref="S5.SS1.p4.5.m4.1.1">subscript</csymbol><ci id="S5.SS1.p4.5.m4.1.1.2.cmml" xref="S5.SS1.p4.5.m4.1.1.2">𝒟</ci><ci id="S5.SS1.p4.5.m4.1.1.3.cmml" xref="S5.SS1.p4.5.m4.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.5.m4.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.5.m4.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or 10 samples from <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS1.p4.6.m5.1"><semantics id="S5.SS1.p4.6.m5.1a"><msub id="S5.SS1.p4.6.m5.1.1" xref="S5.SS1.p4.6.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.6.m5.1.1.2" xref="S5.SS1.p4.6.m5.1.1.2.cmml">𝒟</mi><mi id="S5.SS1.p4.6.m5.1.1.3" xref="S5.SS1.p4.6.m5.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.6.m5.1b"><apply id="S5.SS1.p4.6.m5.1.1.cmml" xref="S5.SS1.p4.6.m5.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.6.m5.1.1.1.cmml" xref="S5.SS1.p4.6.m5.1.1">subscript</csymbol><ci id="S5.SS1.p4.6.m5.1.1.2.cmml" xref="S5.SS1.p4.6.m5.1.1.2">𝒟</ci><ci id="S5.SS1.p4.6.m5.1.1.3.cmml" xref="S5.SS1.p4.6.m5.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.6.m5.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.6.m5.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>. Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.T3" title="Table 3 ‣ 5.1 Main Results ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">3</span></a> presents the results with and without <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p4.7.5">Ctrl</span>. In most cases, <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p4.7.6">Ctrl</span> significantly reduces the effectiveness of attacks, as measured by <math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.SS1.p4.7.m6.1"><semantics id="S5.SS1.p4.7.m6.1a"><msub id="S5.SS1.p4.7.m6.1.1" xref="S5.SS1.p4.7.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS1.p4.7.m6.1.1.2" xref="S5.SS1.p4.7.m6.1.1.2.cmml">𝒮</mi><mi id="S5.SS1.p4.7.m6.1.1.3" xref="S5.SS1.p4.7.m6.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS1.p4.7.m6.1b"><apply id="S5.SS1.p4.7.m6.1.1.cmml" xref="S5.SS1.p4.7.m6.1.1"><csymbol cd="ambiguous" id="S5.SS1.p4.7.m6.1.1.1.cmml" xref="S5.SS1.p4.7.m6.1.1">subscript</csymbol><ci id="S5.SS1.p4.7.m6.1.1.2.cmml" xref="S5.SS1.p4.7.m6.1.1.2">𝒮</ci><ci id="S5.SS1.p4.7.m6.1.1.3.cmml" xref="S5.SS1.p4.7.m6.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p4.7.m6.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p4.7.m6.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math> and ASR, while enhancing the helpfulness of LLMs. This improvement is less notable in more fragile LLMs (e.g., ChatGLM-6B) with smaller capabilities and parameter sets. These experiments underscore the challenge of preventing downstream jailbreaking, as adversaries gain full capability to modify LLMs. It suggests that defenders should invest additional effort in implanting alignment at the pre-training stage to make downstream attacks more difficult to achieve.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Further Analysis: Attack and <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.1.1">Ctrl</span> with Alternative Capabilities</h3>
<figure class="ltx_figure" id="S5.F7">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_middle" id="S5.F7.1" style="width:195.1pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="208" id="S5.F7.1.g1" src="x7.png" width="343"/>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>ASR of varying fine-tuning data volumes on curated-text-pre-trained LLMs.</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_middle" id="S5.F7.9" style="width:221.1pt;">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.F7.5.4" style="width:163.8pt;height:102.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-4.3pt,2.7pt) scale(0.95,0.95) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.F7.5.4.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.F7.5.4.4.5.1">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.F7.5.4.4.5.1.1" rowspan="2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.5.1.1.1" style="font-size:80%;">Attack</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S5.F7.5.4.4.5.1.2" rowspan="2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.5.1.2.1" style="font-size:80%;">Method</span></th>
<th class="ltx_td ltx_nopad_l ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.F7.5.4.4.5.1.3" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.5.1.3.1" style="font-size:80%;">Llama-3-8B</span></th>
<th class="ltx_td ltx_nopad_l ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.F7.5.4.4.5.1.4" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.5.1.4.1" style="font-size:80%;">Llama-2-7B</span></th>
</tr>
<tr class="ltx_tr" id="S5.F7.5.4.4.4">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.2.1.1.1.1" style="padding-left:1.0pt;padding-right:1.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.F7.2.1.1.1.1.m1.1"><semantics id="S5.F7.2.1.1.1.1.m1.1a"><msub id="S5.F7.2.1.1.1.1.m1.1.1" xref="S5.F7.2.1.1.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.2.1.1.1.1.m1.1.1.2" mathsize="80%" xref="S5.F7.2.1.1.1.1.m1.1.1.2.cmml">𝒮</mi><mi id="S5.F7.2.1.1.1.1.m1.1.1.3" mathsize="80%" xref="S5.F7.2.1.1.1.1.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F7.2.1.1.1.1.m1.1b"><apply id="S5.F7.2.1.1.1.1.m1.1.1.cmml" xref="S5.F7.2.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.F7.2.1.1.1.1.m1.1.1.1.cmml" xref="S5.F7.2.1.1.1.1.m1.1.1">subscript</csymbol><ci id="S5.F7.2.1.1.1.1.m1.1.1.2.cmml" xref="S5.F7.2.1.1.1.1.m1.1.1.2">𝒮</ci><ci id="S5.F7.2.1.1.1.1.m1.1.1.3.cmml" xref="S5.F7.2.1.1.1.1.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.2.1.1.1.1.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.2.1.1.1.1.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.5.4.4.4.5" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.4.5.1" style="font-size:80%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.3.2.2.2.2" style="padding-left:1.0pt;padding-right:1.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.F7.3.2.2.2.2.m1.1"><semantics id="S5.F7.3.2.2.2.2.m1.1a"><msub id="S5.F7.3.2.2.2.2.m1.1.1" xref="S5.F7.3.2.2.2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.3.2.2.2.2.m1.1.1.2" mathsize="80%" xref="S5.F7.3.2.2.2.2.m1.1.1.2.cmml">𝒮</mi><mi id="S5.F7.3.2.2.2.2.m1.1.1.3" mathsize="80%" xref="S5.F7.3.2.2.2.2.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F7.3.2.2.2.2.m1.1b"><apply id="S5.F7.3.2.2.2.2.m1.1.1.cmml" xref="S5.F7.3.2.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S5.F7.3.2.2.2.2.m1.1.1.1.cmml" xref="S5.F7.3.2.2.2.2.m1.1.1">subscript</csymbol><ci id="S5.F7.3.2.2.2.2.m1.1.1.2.cmml" xref="S5.F7.3.2.2.2.2.m1.1.1.2">𝒮</ci><ci id="S5.F7.3.2.2.2.2.m1.1.1.3.cmml" xref="S5.F7.3.2.2.2.2.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.3.2.2.2.2.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.3.2.2.2.2.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.4.3.3.3.3" style="padding-left:1.0pt;padding-right:1.0pt;"><math alttext="\mathcal{S}_{\mathrm{harm}}" class="ltx_Math" display="inline" id="S5.F7.4.3.3.3.3.m1.1"><semantics id="S5.F7.4.3.3.3.3.m1.1a"><msub id="S5.F7.4.3.3.3.3.m1.1.1" xref="S5.F7.4.3.3.3.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.4.3.3.3.3.m1.1.1.2" mathsize="80%" xref="S5.F7.4.3.3.3.3.m1.1.1.2.cmml">𝒮</mi><mi id="S5.F7.4.3.3.3.3.m1.1.1.3" mathsize="80%" xref="S5.F7.4.3.3.3.3.m1.1.1.3.cmml">harm</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F7.4.3.3.3.3.m1.1b"><apply id="S5.F7.4.3.3.3.3.m1.1.1.cmml" xref="S5.F7.4.3.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S5.F7.4.3.3.3.3.m1.1.1.1.cmml" xref="S5.F7.4.3.3.3.3.m1.1.1">subscript</csymbol><ci id="S5.F7.4.3.3.3.3.m1.1.1.2.cmml" xref="S5.F7.4.3.3.3.3.m1.1.1.2">𝒮</ci><ci id="S5.F7.4.3.3.3.3.m1.1.1.3.cmml" xref="S5.F7.4.3.3.3.3.m1.1.1.3">harm</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.4.3.3.3.3.m1.1c">\mathcal{S}_{\mathrm{harm}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.4.3.3.3.3.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_harm end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.5.4.4.4.6" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.4.6.1" style="font-size:80%;">ASR</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.F7.5.4.4.4.4" style="padding-left:1.0pt;padding-right:1.0pt;"><math alttext="\mathcal{S}_{\mathrm{help}}" class="ltx_Math" display="inline" id="S5.F7.5.4.4.4.4.m1.1"><semantics id="S5.F7.5.4.4.4.4.m1.1a"><msub id="S5.F7.5.4.4.4.4.m1.1.1" xref="S5.F7.5.4.4.4.4.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.5.4.4.4.4.m1.1.1.2" mathsize="80%" xref="S5.F7.5.4.4.4.4.m1.1.1.2.cmml">𝒮</mi><mi id="S5.F7.5.4.4.4.4.m1.1.1.3" mathsize="80%" xref="S5.F7.5.4.4.4.4.m1.1.1.3.cmml">help</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F7.5.4.4.4.4.m1.1b"><apply id="S5.F7.5.4.4.4.4.m1.1.1.cmml" xref="S5.F7.5.4.4.4.4.m1.1.1"><csymbol cd="ambiguous" id="S5.F7.5.4.4.4.4.m1.1.1.1.cmml" xref="S5.F7.5.4.4.4.4.m1.1.1">subscript</csymbol><ci id="S5.F7.5.4.4.4.4.m1.1.1.2.cmml" xref="S5.F7.5.4.4.4.4.m1.1.1.2">𝒮</ci><ci id="S5.F7.5.4.4.4.4.m1.1.1.3.cmml" xref="S5.F7.5.4.4.4.4.m1.1.1.3">help</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.5.4.4.4.4.m1.1c">\mathcal{S}_{\mathrm{help}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.5.4.4.4.4.m1.1d">caligraphic_S start_POSTSUBSCRIPT roman_help end_POSTSUBSCRIPT</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.F7.5.4.4.6.1">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S5.F7.5.4.4.6.1.1" rowspan="2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.1.1" style="font-size:80%;">I</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.F7.5.4.4.6.1.2" style="padding-left:1.0pt;padding-right:1.0pt;">
<span class="ltx_text" id="S5.F7.5.4.4.6.1.2.1" style="font-size:80%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.F7.5.4.4.6.1.2.2" style="font-size:80%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.3" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.3.1" style="font-size:80%;">1.83</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.4" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.4.1" style="font-size:80%;">20.9%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.5" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.5.1" style="font-size:80%;">3.71</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.6" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.6.1" style="font-size:80%;">2.29</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.7" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.7.1" style="font-size:80%;">28.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.6.1.8" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.6.1.8.1" style="font-size:80%;">3.55</span></td>
</tr>
<tr class="ltx_tr" id="S5.F7.5.4.4.7.2">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row" id="S5.F7.5.4.4.7.2.1" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.F7.5.4.4.7.2.1.1" style="font-size:80%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.2.1" style="font-size:80%;">1.06</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.3" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.3.1" style="font-size:80%;">9.61%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.4" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.4.1" style="font-size:80%;">3.69</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.5" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.5.1" style="font-size:80%;">1.35</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.6" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.6.1" style="font-size:80%;">15.2%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center" id="S5.F7.5.4.4.7.2.7" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.7.2.7.1" style="font-size:80%;">3.67</span></td>
</tr>
<tr class="ltx_tr" id="S5.F7.5.4.4.8.3">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.F7.5.4.4.8.3.1" rowspan="2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.1.1" style="font-size:80%;">II</span></th>
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.F7.5.4.4.8.3.2" style="padding-left:1.0pt;padding-right:1.0pt;">
<span class="ltx_text" id="S5.F7.5.4.4.8.3.2.1" style="font-size:80%;">w/o </span><span class="ltx_text ltx_font_smallcaps" id="S5.F7.5.4.4.8.3.2.2" style="font-size:80%;">Ctrl</span>
</th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.3" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.3.1" style="font-size:80%;">2.93</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.4" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.4.1" style="font-size:80%;">56.9%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.5" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.5.1" style="font-size:80%;">3.63</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.6" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.6.1" style="font-size:80%;">3.49</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.7" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.7.1" style="font-size:80%;">67.7%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_t" id="S5.F7.5.4.4.8.3.8" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.8.3.8.1" style="font-size:80%;">3.52</span></td>
</tr>
<tr class="ltx_tr" id="S5.F7.5.4.4.9.4">
<th class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.F7.5.4.4.9.4.1" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S5.F7.5.4.4.9.4.1.1" style="font-size:80%;">Ctrl</span></th>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.2" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.2.1" style="font-size:80%;">2.05</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.3" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.3.1" style="font-size:80%;">37.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.4" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.4.1" style="font-size:80%;">4.02</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.5" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.5.1" style="font-size:80%;">2.56</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.6" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.6.1" style="font-size:80%;">48.5%</span></td>
<td class="ltx_td ltx_nopad_l ltx_nopad_r ltx_align_center ltx_border_bb" id="S5.F7.5.4.4.9.4.7" style="padding-left:1.0pt;padding-right:1.0pt;"><span class="ltx_text" id="S5.F7.5.4.4.9.4.7.1" style="font-size:80%;">3.87</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering" style="font-size:80%;"><span class="ltx_tag ltx_tag_figure">Table 4: </span>Curating texts with safety samples and evaluate its performance on Attack I and II. In each attack, we apply <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.F7.8.7.m1.1"><semantics id="S5.F7.8.7.m1.1b"><msub id="S5.F7.8.7.m1.1.1" xref="S5.F7.8.7.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.8.7.m1.1.1.2" xref="S5.F7.8.7.m1.1.1.2.cmml">𝒟</mi><mi id="S5.F7.8.7.m1.1.1.3" xref="S5.F7.8.7.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.F7.8.7.m1.1c"><apply id="S5.F7.8.7.m1.1.1.cmml" xref="S5.F7.8.7.m1.1.1"><csymbol cd="ambiguous" id="S5.F7.8.7.m1.1.1.1.cmml" xref="S5.F7.8.7.m1.1.1">subscript</csymbol><ci id="S5.F7.8.7.m1.1.1.2.cmml" xref="S5.F7.8.7.m1.1.1.2">𝒟</ci><ci id="S5.F7.8.7.m1.1.1.3.cmml" xref="S5.F7.8.7.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.8.7.m1.1d">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.8.7.m1.1e">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> as harmful texts. In Attack I, we use <math alttext="\mathcal{D}_{\mathrm{2k}}" class="ltx_Math" display="inline" id="S5.F7.9.8.m2.1"><semantics id="S5.F7.9.8.m2.1b"><msub id="S5.F7.9.8.m2.1.1" xref="S5.F7.9.8.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.F7.9.8.m2.1.1.2" xref="S5.F7.9.8.m2.1.1.2.cmml">𝒟</mi><mrow id="S5.F7.9.8.m2.1.1.3" xref="S5.F7.9.8.m2.1.1.3.cmml"><mn id="S5.F7.9.8.m2.1.1.3.2" xref="S5.F7.9.8.m2.1.1.3.2.cmml">2</mn><mo id="S5.F7.9.8.m2.1.1.3.1" xref="S5.F7.9.8.m2.1.1.3.1.cmml">⁢</mo><mi id="S5.F7.9.8.m2.1.1.3.3" mathvariant="normal" xref="S5.F7.9.8.m2.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.F7.9.8.m2.1c"><apply id="S5.F7.9.8.m2.1.1.cmml" xref="S5.F7.9.8.m2.1.1"><csymbol cd="ambiguous" id="S5.F7.9.8.m2.1.1.1.cmml" xref="S5.F7.9.8.m2.1.1">subscript</csymbol><ci id="S5.F7.9.8.m2.1.1.2.cmml" xref="S5.F7.9.8.m2.1.1.2">𝒟</ci><apply id="S5.F7.9.8.m2.1.1.3.cmml" xref="S5.F7.9.8.m2.1.1.3"><times id="S5.F7.9.8.m2.1.1.3.1.cmml" xref="S5.F7.9.8.m2.1.1.3.1"></times><cn id="S5.F7.9.8.m2.1.1.3.2.cmml" type="integer" xref="S5.F7.9.8.m2.1.1.3.2">2</cn><ci id="S5.F7.9.8.m2.1.1.3.3.cmml" xref="S5.F7.9.8.m2.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F7.9.8.m2.1d">\mathcal{D}_{\mathrm{2k}}</annotation><annotation encoding="application/x-llamapun" id="S5.F7.9.8.m2.1e">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT</annotation></semantics></math> as pre-training dataset.</figcaption>
</figure>
</div>
</div>
</figure>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.5"><span class="ltx_text ltx_font_bold" id="S5.SS2.p1.5.1">Confronting Jailbreaking in Pre-training</span> Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.F6" title="Figure 6 ‣ 5.1 Main Results ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">6</span></a> illustrates the ASR with varying amounts of attack datasets (<math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.SS2.p1.1.m1.1"><semantics id="S5.SS2.p1.1.m1.1a"><msub id="S5.SS2.p1.1.m1.1.1" xref="S5.SS2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p1.1.m1.1.1.2" xref="S5.SS2.p1.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p1.1.m1.1.1.3" xref="S5.SS2.p1.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.1.m1.1b"><apply id="S5.SS2.p1.1.m1.1.1.cmml" xref="S5.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.SS2.p1.1.m1.1.1.1.cmml" xref="S5.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="S5.SS2.p1.1.m1.1.1.2.cmml" xref="S5.SS2.p1.1.m1.1.1.2">𝒟</ci><ci id="S5.SS2.p1.1.m1.1.1.3.cmml" xref="S5.SS2.p1.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS2.p1.2.m2.1"><semantics id="S5.SS2.p1.2.m2.1a"><msub id="S5.SS2.p1.2.m2.1.1" xref="S5.SS2.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p1.2.m2.1.1.2" xref="S5.SS2.p1.2.m2.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p1.2.m2.1.1.3" xref="S5.SS2.p1.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.2.m2.1b"><apply id="S5.SS2.p1.2.m2.1.1.cmml" xref="S5.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S5.SS2.p1.2.m2.1.1.1.cmml" xref="S5.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S5.SS2.p1.2.m2.1.1.2.cmml" xref="S5.SS2.p1.2.m2.1.1.2">𝒟</ci><ci id="S5.SS2.p1.2.m2.1.1.3.cmml" xref="S5.SS2.p1.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>) and ratios of curated texts on Llama-3-8B and Llama-2-7B. We increase these datasets from 2% to 20% in <math alttext="\mathcal{D}_{\mathrm{2k}}" class="ltx_Math" display="inline" id="S5.SS2.p1.3.m3.1"><semantics id="S5.SS2.p1.3.m3.1a"><msub id="S5.SS2.p1.3.m3.1.1" xref="S5.SS2.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p1.3.m3.1.1.2" xref="S5.SS2.p1.3.m3.1.1.2.cmml">𝒟</mi><mrow id="S5.SS2.p1.3.m3.1.1.3" xref="S5.SS2.p1.3.m3.1.1.3.cmml"><mn id="S5.SS2.p1.3.m3.1.1.3.2" xref="S5.SS2.p1.3.m3.1.1.3.2.cmml">2</mn><mo id="S5.SS2.p1.3.m3.1.1.3.1" xref="S5.SS2.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S5.SS2.p1.3.m3.1.1.3.3" mathvariant="normal" xref="S5.SS2.p1.3.m3.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.3.m3.1b"><apply id="S5.SS2.p1.3.m3.1.1.cmml" xref="S5.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S5.SS2.p1.3.m3.1.1.1.cmml" xref="S5.SS2.p1.3.m3.1.1">subscript</csymbol><ci id="S5.SS2.p1.3.m3.1.1.2.cmml" xref="S5.SS2.p1.3.m3.1.1.2">𝒟</ci><apply id="S5.SS2.p1.3.m3.1.1.3.cmml" xref="S5.SS2.p1.3.m3.1.1.3"><times id="S5.SS2.p1.3.m3.1.1.3.1.cmml" xref="S5.SS2.p1.3.m3.1.1.3.1"></times><cn id="S5.SS2.p1.3.m3.1.1.3.2.cmml" type="integer" xref="S5.SS2.p1.3.m3.1.1.3.2">2</cn><ci id="S5.SS2.p1.3.m3.1.1.3.3.cmml" xref="S5.SS2.p1.3.m3.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.3.m3.1c">\mathcal{D}_{\mathrm{2k}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.3.m3.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT</annotation></semantics></math>. Remarkably, even when the quantity of curated texts is less than that of <math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.SS2.p1.4.m4.1"><semantics id="S5.SS2.p1.4.m4.1a"><msub id="S5.SS2.p1.4.m4.1.1" xref="S5.SS2.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p1.4.m4.1.1.2" xref="S5.SS2.p1.4.m4.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p1.4.m4.1.1.3" xref="S5.SS2.p1.4.m4.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.4.m4.1b"><apply id="S5.SS2.p1.4.m4.1.1.cmml" xref="S5.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S5.SS2.p1.4.m4.1.1.1.cmml" xref="S5.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="S5.SS2.p1.4.m4.1.1.2.cmml" xref="S5.SS2.p1.4.m4.1.1.2">𝒟</ci><ci id="S5.SS2.p1.4.m4.1.1.3.cmml" xref="S5.SS2.p1.4.m4.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.4.m4.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.4.m4.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS2.p1.5.m5.1"><semantics id="S5.SS2.p1.5.m5.1a"><msub id="S5.SS2.p1.5.m5.1.1" xref="S5.SS2.p1.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p1.5.m5.1.1.2" xref="S5.SS2.p1.5.m5.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p1.5.m5.1.1.3" xref="S5.SS2.p1.5.m5.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.5.m5.1b"><apply id="S5.SS2.p1.5.m5.1.1.cmml" xref="S5.SS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S5.SS2.p1.5.m5.1.1.1.cmml" xref="S5.SS2.p1.5.m5.1.1">subscript</csymbol><ci id="S5.SS2.p1.5.m5.1.1.2.cmml" xref="S5.SS2.p1.5.m5.1.1.2">𝒟</ci><ci id="S5.SS2.p1.5.m5.1.1.3.cmml" xref="S5.SS2.p1.5.m5.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.5.m5.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.5.m5.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>, such as using 10% curated texts to mitigate 20% harmful ones, the attack effectiveness (ASR) can still be significantly degraded.</p>
</div>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.3"><span class="ltx_text ltx_font_bold" id="S5.SS2.p2.3.1">Preventing Jailbreaking in Fine-tuning</span> We adjust the volume of harmful texts (<math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="S5.SS2.p2.1.m1.1"><semantics id="S5.SS2.p2.1.m1.1a"><msub id="S5.SS2.p2.1.m1.1.1" xref="S5.SS2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p2.1.m1.1.1.2" xref="S5.SS2.p2.1.m1.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p2.1.m1.1.1.3" xref="S5.SS2.p2.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.1.m1.1b"><apply id="S5.SS2.p2.1.m1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S5.SS2.p2.1.m1.1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S5.SS2.p2.1.m1.1.1.2.cmml" xref="S5.SS2.p2.1.m1.1.1.2">𝒟</ci><ci id="S5.SS2.p2.1.m1.1.1.3.cmml" xref="S5.SS2.p2.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p2.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="S5.SS2.p2.2.m2.1"><semantics id="S5.SS2.p2.2.m2.1a"><msub id="S5.SS2.p2.2.m2.1.1" xref="S5.SS2.p2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p2.2.m2.1.1.2" xref="S5.SS2.p2.2.m2.1.1.2.cmml">𝒟</mi><mi id="S5.SS2.p2.2.m2.1.1.3" xref="S5.SS2.p2.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.2.m2.1b"><apply id="S5.SS2.p2.2.m2.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S5.SS2.p2.2.m2.1.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1">subscript</csymbol><ci id="S5.SS2.p2.2.m2.1.1.2.cmml" xref="S5.SS2.p2.2.m2.1.1.2">𝒟</ci><ci id="S5.SS2.p2.2.m2.1.1.3.cmml" xref="S5.SS2.p2.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p2.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math>) used in fine-tuning. Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.F7" title="Figure 7 ‣ 5.2 Further Analysis: Attack and Ctrl with Alternative Capabilities ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">7</span></a> depicts the change in ASR evaluated on fine-tuned LLMs, which were initially pre-trained using the crowdsourced dataset <math alttext="\mathcal{D}_{\mathrm{2k}}" class="ltx_Math" display="inline" id="S5.SS2.p2.3.m3.1"><semantics id="S5.SS2.p2.3.m3.1a"><msub id="S5.SS2.p2.3.m3.1.1" xref="S5.SS2.p2.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.SS2.p2.3.m3.1.1.2" xref="S5.SS2.p2.3.m3.1.1.2.cmml">𝒟</mi><mrow id="S5.SS2.p2.3.m3.1.1.3" xref="S5.SS2.p2.3.m3.1.1.3.cmml"><mn id="S5.SS2.p2.3.m3.1.1.3.2" xref="S5.SS2.p2.3.m3.1.1.3.2.cmml">2</mn><mo id="S5.SS2.p2.3.m3.1.1.3.1" xref="S5.SS2.p2.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S5.SS2.p2.3.m3.1.1.3.3" mathvariant="normal" xref="S5.SS2.p2.3.m3.1.1.3.3.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.3.m3.1b"><apply id="S5.SS2.p2.3.m3.1.1.cmml" xref="S5.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S5.SS2.p2.3.m3.1.1.1.cmml" xref="S5.SS2.p2.3.m3.1.1">subscript</csymbol><ci id="S5.SS2.p2.3.m3.1.1.2.cmml" xref="S5.SS2.p2.3.m3.1.1.2">𝒟</ci><apply id="S5.SS2.p2.3.m3.1.1.3.cmml" xref="S5.SS2.p2.3.m3.1.1.3"><times id="S5.SS2.p2.3.m3.1.1.3.1.cmml" xref="S5.SS2.p2.3.m3.1.1.3.1"></times><cn id="S5.SS2.p2.3.m3.1.1.3.2.cmml" type="integer" xref="S5.SS2.p2.3.m3.1.1.3.2">2</cn><ci id="S5.SS2.p2.3.m3.1.1.3.3.cmml" xref="S5.SS2.p2.3.m3.1.1.3.3">k</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.3.m3.1c">\mathcal{D}_{\mathrm{2k}}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p2.3.m3.1d">caligraphic_D start_POSTSUBSCRIPT 2 roman_k end_POSTSUBSCRIPT</annotation></semantics></math>, including 25% curated texts. Notably, <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.p2.3.2">Ctrl</span>-generated texts can effectively fortify safety alignment and prevent jailbreaking when adversaries employ smaller volumes (e.g., 50) of harmful texts. However, when adversaries add more harmful texts, they tend to dominate the alignment, irrespective of the fortifications implanted by <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.p2.3.3">Ctrl</span>.

</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Limitations</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1"><span class="ltx_text ltx_font_bold" id="S6.p1.1.1">Available Data Resources</span> By default, <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.2">Ctrl</span> curates clean data with general-domain topics. In contrast, <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>]</cite> discusses using safety samples with security-sensitive topics to mitigate jailbreaking. When feasible, applying <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.3">Ctrl</span> to curate safety samples can further enhance safety alignment against attacks, as shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S5.F7" title="Figure 7 ‣ 5.2 Further Analysis: Attack and Ctrl with Alternative Capabilities ‣ 5 Experiment ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">7</span></a>. However, collecting these safety samples is generally more costly than gathering general-domain texts, which implies a trade-off in ensuring LLM robustness. While <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.4">Ctrl</span> can significantly reduce attack effectiveness on its own, its efficacy is constrained by the available text resources. By incurring additional costs to include safety samples, we can further leverage <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.5">Ctrl</span> to achieve better fortification of safety alignment.</p>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1"><span class="ltx_text ltx_font_bold" id="S6.p2.1.1">Jailbreaking with Clean Data</span> According to <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib24" title="">24</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#bib.bib39" title="">39</a>]</cite>, clean texts that share similar embeddings or gradients with harmful texts may also cause jailbreaking. This implies that “harmful effects” can also be present in clean texts. Since harmful texts tend to exhibit high perplexity (details in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.SS1" title="4.1 Motivation and Guideline Metrics ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4.1</span></a>), leveraging <span class="ltx_text ltx_font_smallcaps" id="S6.p2.1.2">Ctrl</span> to curate low-perplexity texts can help eliminate these “harmful effects” in selected texts. To further enhance <span class="ltx_text ltx_font_smallcaps" id="S6.p2.1.3">Ctrl</span> and mitigate the risks associated with using clean data, we need to incorporate preprocessed filtering before applying <span class="ltx_text ltx_font_smallcaps" id="S6.p2.1.4">Ctrl</span>, which remains an ongoing effort.</p>
</div>
</section>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion</h2>
<div class="ltx_para" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">This work proposes <span class="ltx_text ltx_font_smallcaps" id="S7.p1.1.1">Ctrl</span>, a data curation framework aimed at mitigating jailbreaking attacks during pre-training or fine-tuning. <span class="ltx_text ltx_font_smallcaps" id="S7.p1.1.2">Ctrl</span> curates clean texts by reducing their perplexity while maintaining text quality, thus fortifying the safety alignment of LLMs. Through experiments, we demonstrate the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S7.p1.1.3">Ctrl</span>. Our work represents a solid initial step in strengthening LLMs against training-based jailbreaking efforts through data curation.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Fine-tuning – openai api.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://platform.openai.com/docs/guides/fine-tuning/create-a-fine-tuned-model" title="">https://platform.openai.com/docs/guides/fine-tuning/create-a-fine-tuned-model</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Llama 3 model card.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/meta-llama/llama3/blob/main/MODEL_CARD.md" title="">https://github.com/meta-llama/llama3/blob/main/MODEL_CARD.md</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Overview of responsible ai practices for azure openai models.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://learn.microsoft.com/en-us/legal/cognitive-services/openai/overview" title="">https://learn.microsoft.com/en-us/legal/cognitive-services/openai/overview</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Ross Anderson.

</span>
<span class="ltx_bibblock">Why information security is hard-an economic perspective.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">Seventeenth annual computer security applications
conference</span>, pages 358–365. IEEE, 2001.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Maksym Andriushchenko, Francesco Croce, and Nicolas Flammarion.

</span>
<span class="ltx_bibblock">Jailbreaking leading safety-aligned llms with simple adaptive
attacks, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Amanda Askell, Yuntao Bai, Anna Chen, Dawn Drain, Deep Ganguli, Tom Henighan,
Andy Jones, Nicholas Joseph, Ben Mann, Nova DasSarma, et al.

</span>
<span class="ltx_bibblock">A general language assistant as a laboratory for alignment.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2112.00861</span>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Manuela Benary, Xing David Wang, Max Schmidt, Dominik Soll, Georg Hilfenhaus,
Mani Nassir, Christian Sigler, Maren Knödler, Ulrich Keller, Dieter
Beule, et al.

</span>
<span class="ltx_bibblock">Leveraging large language models for decision support in personalized
oncology.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">JAMA Network Open</span>, 6(11):e2343689–e2343689, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Emily M Bender, Timnit Gebru, Angelina McMillan-Major, and Shmargaret
Shmitchell.

</span>
<span class="ltx_bibblock">On the dangers of stochastic parrots: Can language models be too big?

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 2021 ACM conference on fairness,
accountability, and transparency</span>, pages 610–623, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Lasse Bergroth, Harri Hakonen, and Timo Raita.

</span>
<span class="ltx_bibblock">A survey of longest common subsequence algorithms.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">Proceedings Seventh International Symposium on String
Processing and Information Retrieval. SPIRE 2000</span>, pages 39–48. IEEE, 2000.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Patrick Chao, Alexander Robey, Edgar Dobriban, Hamed Hassani, George J. Pappas,
and Eric Wong.

</span>
<span class="ltx_bibblock">Jailbreaking black box large language models in twenty queries, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Mark Chen, Jerry Tworek, Heewoo Jun, Qiming Yuan, Henrique Ponde de Oliveira
Pinto, Jared Kaplan, Harri Edwards, Yuri Burda, Nicholas Joseph, Greg
Brockman, et al.

</span>
<span class="ltx_bibblock">Evaluating large language models trained on code.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:2107.03374</span>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Mike Conover, Matt Hayes, Ankit Mathur, Jianwei Xie, Jun Wan, Sam Shah, Ali
Ghodsi, Patrick Wendell, Matei Zaharia, and Reynold Xin.

</span>
<span class="ltx_bibblock">Free dolly: Introducing the world’s first truly open
instruction-tuned llm.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">Company Blog of Databricks</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Melissa H Cragin, P Bryan Heidorn, Carole L Palmer, and Linda C Smith.

</span>
<span class="ltx_bibblock">An educational program on data curation.

</span>
<span class="ltx_bibblock">2007.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Josef Dai, Xuehai Pan, Ruiyang Sun, Jiaming Ji, Xinbo Xu, Mickel Liu, Yizhou
Wang, and Yaodong Yang.

</span>
<span class="ltx_bibblock">Safe rlhf: Safe reinforcement learning from human feedback.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">Proceedings of International Conference on Learning
Representations (ICLR)</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Xiang Deng, Vasilisa Bashlovkina, Feng Han, Simon Baumgartner, and Michael
Bendersky.

</span>
<span class="ltx_bibblock">Llms to the moon? reddit market sentiment analysis with large
language models.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">Companion Proceedings of the ACM Web Conference 2023</span>, pages
1014–1019, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Jesse Dodge, Maarten Sap, Ana Marasović, William Agnew, Gabriel Ilharco,
Dirk Groeneveld, Margaret Mitchell, and Matt Gardner.

</span>
<span class="ltx_bibblock">Documenting large webtext corpora: A case study on the colossal clean
crawled corpus.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib16.1.1">Proceedings of the 2021 Conference on Empirical Methods in
Natural Language Processing</span>, pages 1286–1305, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Zhengxiao Du, Yujie Qian, Xiao Liu, Ming Ding, Jiezhong Qiu, Zhilin Yang, and
Jie Tang.

</span>
<span class="ltx_bibblock">Glm: General language model pretraining with autoregressive blank
infilling.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">Proceedings of the 60th Annual Meeting of the Association for
Computational Linguistics (Volume 1: Long Papers)</span>, pages 320–335, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Minghong Fang, Minghao Sun, Qi Li, Neil Zhenqiang Gong, Jin Tian, and Jia Liu.

</span>
<span class="ltx_bibblock">Data poisoning attacks and defenses to crowdsourcing systems.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">Proceedings of the web conference 2021</span>, pages 969–980,
2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Jonas Fischer, Anna Oláh, and Jilles Vreeken.

</span>
<span class="ltx_bibblock">What’s in the box? exploring the inner life of neural networks with
robust rules.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">International Conference on Machine Learning</span>, pages
3352–3362. PMLR, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Iason Gabriel.

</span>
<span class="ltx_bibblock">Artificial intelligence, values, and alignment.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">Minds and machines</span>, 30(3):411–437, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Samuel Gehman, Suchin Gururangan, Maarten Sap, Yejin Choi, and Noah A Smith.

</span>
<span class="ltx_bibblock">Realtoxicityprompts: Evaluating neural toxic degeneration in language
models.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib21.1.1">Findings of the Association for Computational Linguistics:
EMNLP 2020</span>, pages 3356–3369, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Lawrence A Gordon and Martin P Loeb.

</span>
<span class="ltx_bibblock">The economics of information security investment.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">ACM Transactions on Information and System Security (TISSEC)</span>,
5(4):438–457, 2002.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Shibo Hao, Tianyang Liu, Zhen Wang, and Zhiting Hu.

</span>
<span class="ltx_bibblock">Toolkengpt: Augmenting frozen language models with massive tools via
tool embeddings.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">Proceedings of Advances in Neural Information Processing
Systems (NeurIPS)</span>, volume 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Luxi He, Mengzhou Xia, and Peter Henderson.

</span>
<span class="ltx_bibblock">What’s in your" safe" data?: Identifying benign data that breaks
safety.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib24.1.1">ICLR 2024 Workshop on Navigating and Addressing Data Problems
for Foundation Models</span>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Ben Hutchinson, Vinodkumar Prabhakaran, Emily Denton, Kellie Webster, Yu Zhong,
and Stephen Denuyl.

</span>
<span class="ltx_bibblock">Social biases in nlp models as barriers for persons with
disabilities, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Jiaming Ji, Mickel Liu, Josef Dai, Xuehai Pan, Chi Zhang, Ce Bian, Boyuan Chen,
Ruiyang Sun, Yizhou Wang, and Yaodong Yang.

</span>
<span class="ltx_bibblock">Beavertails: Towards improved safety alignment of llm via a
human-preference dataset.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib26.1.1">Advances in Neural Information Processing Systems</span>, 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Matthew Jin, Syed Shahriar, Michele Tufano, Xin Shi, Shuai Lu, Neel Sundaresan,
and Alexey Svyatkovskiy.

</span>
<span class="ltx_bibblock">Inferfix: End-to-end program repair with llms.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">Proceedings of the 31st ACM Joint European Software
Engineering Conference and Symposium on the Foundations of Software
Engineering</span>, pages 1646–1656, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Ole Jorgensen, Dylan Cope, Nandi Schoots, and Murray Shanahan.

</span>
<span class="ltx_bibblock">Improving activation steering in language models with mean-centring.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2312.03813</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Andreas Köpf, Yannic Kilcher, Dimitri von Rütte, Sotiris Anagnostidis,
Zhi Rui Tam, Keith Stevens, Abdullah Barhoum, Duc Nguyen, Oliver Stanley,
Richárd Nagyfi, et al.

</span>
<span class="ltx_bibblock">Openassistant conversations-democratizing large language model
alignment.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib29.1.1">Advances in Neural Information Processing Systems</span>, 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Xian Li, Ping Yu, Chunting Zhou, Timo Schick, Luke Zettlemoyer, Omer Levy,
Jason Weston, and Mike Lewis.

</span>
<span class="ltx_bibblock">Self-alignment with instruction backtranslation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib30.1.1">Proceedings of International Conference on Learning
Representations (ICLR)</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Stephanie Lin, Jacob Hilton, and Owain Evans.

</span>
<span class="ltx_bibblock">TruthfulQA: Measuring how models mimic human falsehoods.

</span>
<span class="ltx_bibblock">In Smaranda Muresan, Preslav Nakov, and Aline Villavicencio, editors,
<span class="ltx_text ltx_font_italic" id="bib.bib31.1.1">Proceedings of the 60th Annual Meeting of the Association for
Computational Linguistics (Volume 1: Long Papers)</span>, Dublin, Ireland, May
2022. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Xinyin Ma, Gongfan Fang, and Xinchao Wang.

</span>
<span class="ltx_bibblock">Llm-pruner: On the structural pruning of large language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib32.1.1">Advances in neural information processing systems</span>,
36:21702–21720, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Saeed Mahloujifar, Mohammad Mahmoody, and Ameer Mohammed.

</span>
<span class="ltx_bibblock">Universal multi-party poisoning attacks.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib33.1.1">International Conference on Machine Learning</span>, pages
4274–4283. PMLR, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Mark Mazumder, Colby Banbury, Xiaozhe Yao, Bojan Karlaš, William
A Gaviria Rojas, Sudnya Diamos, Greg Diamos, Lynn He, Alicia Parrish,
Hannah Rose Kirk, Jessica Quaye, Charvi Rastogi, Douwe Kiela, David Jurado,
David Kanter, Rafael Mosquera, Will Cukierski, Juan Ciro, Lora Aroyo, Bilge
Acun, Lingjiao Chen, Mehul Smriti Raje, Max Bartolo, Sabri Eyuboglu, Amirata
Ghorbani, Emmett Daniel Goodman, Addison Howard, Oana Inel, Tariq Kane,
Christine Kirkpatrick, D. Sculley, Tzu-Sheng Kuo, Jonas Mueller, Tristan
Thrush, Joaquin Vanschoren, Margaret Warren, Adina Williams, Serena Yeung,
Newsha Ardalani, Praveen Paritosh, Ce Zhang, James Y. Zou, Carole-Jean Wu,
Cody Coleman, Andrew Ng, Peter Mattson, and Vijay Janapa Reddi.

</span>
<span class="ltx_bibblock">Dataperf: Benchmarks for data-centric AI development.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib34.1.1">Thirty-seventh Conference on Neural Information Processing
Systems Datasets and Benchmarks Track</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, Carroll Wainwright, Pamela
Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Gray, John
Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda
Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback.

</span>
<span class="ltx_bibblock">In Alice H. Oh, Alekh Agarwal, Danielle Belgrave, and Kyunghyun Cho,
editors, <span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">Advances in Neural Information Processing Systems</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Xudong Pan, Mi Zhang, Beina Sheng, Jiaming Zhu, and Min Yang.

</span>
<span class="ltx_bibblock">Hidden trigger backdoor attack on <math alttext="\{" class="ltx_Math" display="inline" id="bib.bib36.1.m1.1"><semantics id="bib.bib36.1.m1.1a"><mo id="bib.bib36.1.m1.1.1" stretchy="false" xref="bib.bib36.1.m1.1.1.cmml">{</mo><annotation-xml encoding="MathML-Content" id="bib.bib36.1.m1.1b"><ci id="bib.bib36.1.m1.1.1.cmml" xref="bib.bib36.1.m1.1.1">{</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib36.1.m1.1c">\{</annotation><annotation encoding="application/x-llamapun" id="bib.bib36.1.m1.1d">{</annotation></semantics></math>NLP<math alttext="\}" class="ltx_Math" display="inline" id="bib.bib36.2.m2.1"><semantics id="bib.bib36.2.m2.1a"><mo id="bib.bib36.2.m2.1.1" stretchy="false" xref="bib.bib36.2.m2.1.1.cmml">}</mo><annotation-xml encoding="MathML-Content" id="bib.bib36.2.m2.1b"><ci id="bib.bib36.2.m2.1.1.cmml" xref="bib.bib36.2.m2.1.1">}</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib36.2.m2.1c">\}</annotation><annotation encoding="application/x-llamapun" id="bib.bib36.2.m2.1d">}</annotation></semantics></math> models via linguistic
style manipulation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib36.3.1">31st USENIX Security Symposium (USENIX Security 22)</span>, pages
3611–3628, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
Hammond Pearce, Benjamin Tan, Baleegh Ahmad, Ramesh Karri, and Brendan
Dolan-Gavitt.

</span>
<span class="ltx_bibblock">Examining zero-shot vulnerability repair with large language models.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">2023 IEEE Symposium on Security and Privacy (SP)</span>, pages
2339–2356. IEEE, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Fanchao Qi, Yangyi Chen, Xurui Zhang, Mukai Li, Zhiyuan Liu, and Maosong Sun.

</span>
<span class="ltx_bibblock">Mind the style of text! adversarial and backdoor attacks based on
text style transfer.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib38.1.1">Proceedings of the 2021 Conference on Empirical Methods in
Natural Language Processing</span>, pages 4569–4580, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Xiangyu Qi, Yi Zeng, Tinghao Xie, Pin-Yu Chen, Ruoxi Jia, Prateek Mittal, and
Peter Henderson.

</span>
<span class="ltx_bibblock">Fine-tuning aligned language models compromises safety, even when
users do not intend to!

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib39.1.1">Proceedings of International Conference on Learning
Representations (ICLR)</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
Kaizhi Qian, Yang Zhang, Shiyu Chang, Xuesong Yang, and Mark Hasegawa-Johnson.

</span>
<span class="ltx_bibblock">Autovc: Zero-shot voice style transfer with only autoencoder loss.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib40.1.1">International Conference on Machine Learning</span>, pages
5210–5219. PMLR, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Yujia Qin, Shengding Hu, Yankai Lin, Weize Chen, Ning Ding, Ganqu Cui, Zheni
Zeng, Yufei Huang, Chaojun Xiao, Chi Han, et al.

</span>
<span class="ltx_bibblock">Tool learning with foundation models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib41.1.1">arXiv preprint arXiv:2304.08354</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
Alec Radford, Karthik Narasimhan, Tim Salimans, Ilya Sutskever, et al.

</span>
<span class="ltx_bibblock">Improving language understanding by generative pre-training.

</span>
<span class="ltx_bibblock">2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
Shauli Ravfogel, Yoav Goldberg, and Jacob Goldberger.

</span>
<span class="ltx_bibblock">Conformal nucleus sampling.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib43.1.1">The 61st Annual Meeting Of The Association For Computational
Linguistics</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
Chufan Shi, Haoran Yang, Deng Cai, Zhisong Zhang, Yifan Wang, Yujiu Yang, and
Wai Lam.

</span>
<span class="ltx_bibblock">A thorough examination of decoding methods in the era of llms.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib44.1.1">arXiv preprint arXiv:2402.06925</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
Jinsong Su, Deyi Xiong, Biao Zhang, Yang Liu, Junfeng Yao, and Min Zhang.

</span>
<span class="ltx_bibblock">Bilingual correspondence recursive autoencoder for statistical
machine translation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib45.1.1">Proceedings of the 2015 Conference on Empirical Methods in
Natural Language Processing</span>, pages 1248–1258, 2015.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
Farnaz Tahmasebian, Li Xiong, Mani Sotoodeh, and Vaidy Sunderam.

</span>
<span class="ltx_bibblock">Crowdsourcing under data poisoning attacks: A comparative study.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib46.1.1">Data and Applications Security and Privacy XXXIV: 34th Annual
IFIP WG 11.3 Conference, DBSec 2020, Regensburg, Germany, June 25–26, 2020,
Proceedings 34</span>, pages 310–332. Springer, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
Rohan Taori, Ishaan Gulrajani, Tianyi Zhang, Yann Dubois, Xuechen Li, Carlos
Guestrin, Percy Liang, and Tatsunori B Hashimoto.

</span>
<span class="ltx_bibblock">Stanford alpaca: an instruction-following llama model (2023).

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib47.1.1">URL https://github. com/tatsu-lab/stanford_alpaca</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[48]</span>
<span class="ltx_bibblock">
Surendrabikram Thapa and Surabhi Adhikari.

</span>
<span class="ltx_bibblock">Chatgpt, bard, and large language models for biomedical research:
opportunities and pitfalls.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib48.1.1">Annals of biomedical engineering</span>, 51(12):2647–2651, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[49]</span>
<span class="ltx_bibblock">
Kristina Toutanvoa and Christopher D Manning.

</span>
<span class="ltx_bibblock">Enriching the knowledge sources used in a maximum entropy
part-of-speech tagger.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib49.1.1">2000 Joint SIGDAT conference on Empirical methods in natural
language processing and very large corpora</span>, pages 63–70, 2000.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[50]</span>
<span class="ltx_bibblock">
Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne
Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric
Hambro, Faisal Azhar, et al.

</span>
<span class="ltx_bibblock">Llama: Open and efficient foundation language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib50.1.1">arXiv preprint arXiv:2302.13971</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[51]</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine
Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale,
et al.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib51.1.1">arXiv preprint arXiv:2307.09288</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib52">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[52]</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine
Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale,
et al.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib52.1.1">arXiv preprint arXiv:2307.09288</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib53">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[53]</span>
<span class="ltx_bibblock">
Zhaopeng Tu, Yang Liu, Lifeng Shang, Xiaohua Liu, and Hang Li.

</span>
<span class="ltx_bibblock">Neural machine translation with reconstruction.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib53.1.1">Proceedings of the AAAI Conference on Artificial
Intelligence</span>, volume 31, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib54">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[54]</span>
<span class="ltx_bibblock">
Alexander Wei, Nika Haghtalab, and Jacob Steinhardt.

</span>
<span class="ltx_bibblock">Jailbroken: How does llm safety training fail?

</span>
<span class="ltx_bibblock">In A. Oh, T. Naumann, A. Globerson, K. Saenko, M. Hardt, and
S. Levine, editors, <span class="ltx_text ltx_font_italic" id="bib.bib54.1.1">Advances in Neural Information Processing Systems</span>,
volume 36, pages 80079–80110. Curran Associates, Inc., 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib55">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[55]</span>
<span class="ltx_bibblock">
Laura Weidinger, Jonathan Uesato, Maribeth Rauh, Conor Griffin, Po-Sen Huang,
John F. J. Mellor, Amelia Glaese, Myra Cheng, Borja Balle, Atoosa Kasirzadeh,
Courtney Biles, Sande Minnich Brown, Zachary Kenton, William T. Hawkins, Tom
Stepleton, Abeba Birhane, Lisa Anne Hendricks, Laura Rimell, William S.
Isaac, Julia Haas, Sean Legassick, Geoffrey Irving, and Iason Gabriel.

</span>
<span class="ltx_bibblock">Taxonomy of risks posed by language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib55.1.1">Proceedings of the 2022 ACM Conference on Fairness,
Accountability, and Transparency</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib56">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[56]</span>
<span class="ltx_bibblock">
Xianjun Yang, Xiao Wang, Qi Zhang, Linda Petzold, William Yang Wang, Xun Zhao,
and Dahua Lin.

</span>
<span class="ltx_bibblock">Shadow alignment: The ease of subverting safely-aligned language
models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib56.1.1">arXiv preprint arXiv:2310.02949</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib57">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[57]</span>
<span class="ltx_bibblock">
Hangfan Zhang, Zhimeng Guo, Huaisheng Zhu, Bochuan Cao, Lu Lin, Jinyuan Jia,
Jinghui Chen, and Dinghao Wu.

</span>
<span class="ltx_bibblock">On the safety of open-sourced large language models: Does alignment
really prevent them from being misused?

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib57.1.1">arXiv preprint arXiv:2310.01581</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib58">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[58]</span>
<span class="ltx_bibblock">
Lianmin Zheng, Wei-Lin Chiang, Ying Sheng, Siyuan Zhuang, Zhanghao Wu, Yonghao
Zhuang, Zi Lin, Zhuohan Li, Dacheng Li, Eric Xing, et al.

</span>
<span class="ltx_bibblock">Judging llm-as-a-judge with mt-bench and chatbot arena.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib58.1.1">Advances in Neural Information Processing Systems</span>, 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib59">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[59]</span>
<span class="ltx_bibblock">
Yuqi Zhu, Jia Li, Ge Li, YunFei Zhao, Zhi Jin, and Hong Mei.

</span>
<span class="ltx_bibblock">Hot or cold? adaptive temperature sampling for code generation with
large language models.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib59.1.1">Proceedings of the AAAI Conference on Artificial
Intelligence</span>, volume 38, pages 437–445, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib60">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[60]</span>
<span class="ltx_bibblock">
Andy Zou, Zifan Wang, J Zico Kolter, and Matt Fredrikson.

</span>
<span class="ltx_bibblock">Universal and transferable adversarial attacks on aligned language
models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib60.1.1">arXiv preprint arXiv:2307.15043</span>, 2023.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Prompts for Scoring Helpfulness</h2>
<figure class="ltx_table" id="A1.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T5.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T5.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A1.T5.1.1.1.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.1.1.1.1">
<span class="ltx_p" id="A1.T5.1.1.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.1.1.1.1.1.1">Scoring Relevance (0-5)</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T5.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T5.1.2.1.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.2.1.1.1">
<span class="ltx_p" id="A1.T5.1.2.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.2.1.1.1.1.1">0 (Not relevant at all):</span> The text is entirely unrelated to the provided query or topic. It contains no information that could be considered remotely relevant, and its inclusion is baffling or nonsensical.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T5.1.3.2.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.3.2.1.1">
<span class="ltx_p" id="A1.T5.1.3.2.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.3.2.1.1.1.1">1 (Slightly relevant):</span> The text contains minimal relevant information, but its connection to the provided query or topic is tenuous at best. It may touch on a few tangentially related points, but overall, it fails to address the main subject adequately.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T5.1.4.3.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.4.3.1.1">
<span class="ltx_p" id="A1.T5.1.4.3.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.4.3.1.1.1.1">2 (Moderately relevant):</span> The text touches upon some aspects of the query or topic, but significant portions remain irrelevant or only loosely connected. While it may contain snippets of relevant information, they are overshadowed by irrelevant content.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T5.1.5.4.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.5.4.1.1">
<span class="ltx_p" id="A1.T5.1.5.4.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.5.4.1.1.1.1">3 (Relevant):</span> The text is mostly relevant and addresses key aspects of the query or topic. While it may stray into minor tangents occasionally, the majority of the content directly relates to the main subject, providing valuable insights or information.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T5.1.6.5.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.6.5.1.1">
<span class="ltx_p" id="A1.T5.1.6.5.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.6.5.1.1.1.1">4 (Very relevant):</span> The text is highly relevant and directly addresses the query or topic with minimal digression. It provides a focused and coherent discussion that closely aligns with the main subject, offering valuable insights and information throughout.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A1.T5.1.7.6.1" style="padding-top:3pt;padding-bottom:3pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T5.1.7.6.1.1">
<span class="ltx_p" id="A1.T5.1.7.6.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T5.1.7.6.1.1.1.1">5 (Extremely relevant):</span> The text is perfectly aligned with the provided query or topic, providing comprehensive and highly relevant information. Every aspect of the text contributes directly to the main subject, leaving no room for ambiguity or extraneous content.</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Part I of prompt instruction: Scoring relevance</figcaption>
</figure>
<figure class="ltx_table" id="A1.T6">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T6.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T6.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A1.T6.1.1.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.1.1.1.1.1.1">Scoring Clarity (0-5)</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T6.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.2.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.2.1.1.1">
<span class="ltx_p" id="A1.T6.1.2.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.2.1.1.1.1.1">0 (Not clear at all):</span> The text is extremely unclear and difficult to understand. It is riddled with grammatical errors, convoluted sentence structures, and ambiguous statements that make comprehension nearly impossible.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T6.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T6.1.3.2.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.3.2.1.1">
<span class="ltx_p" id="A1.T6.1.3.2.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.3.2.1.1.1.1">1 (Slightly clear):</span> The text is somewhat unclear, requiring additional effort to comprehend due to grammatical errors or vague language. While the main points may be discernible with some effort, the overall clarity is lacking.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T6.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T6.1.4.3.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.4.3.1.1">
<span class="ltx_p" id="A1.T6.1.4.3.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.4.3.1.1.1.1">2 (Moderately clear):</span> The text is generally clear but may contain occasional grammatical errors or convoluted sentences that hinder understanding. Some portions may require re-reading or clarification, but the main message is still accessible.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T6.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T6.1.5.4.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.5.4.1.1">
<span class="ltx_p" id="A1.T6.1.5.4.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.5.4.1.1.1.1">3 (Clear):</span> The text is mostly clear and well-expressed, with few grammatical errors or instances of unclear language. While there may be minor areas of confusion, the overall meaning is easily discernible and understandable.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T6.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T6.1.6.5.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.6.5.1.1">
<span class="ltx_p" id="A1.T6.1.6.5.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.6.5.1.1.1.1">4 (Very clear):</span> The text is clear and articulate, making it easy to understand without any significant issues. It is well-structured and effectively communicates its message, facilitating effortless comprehension for the reader.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T6.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A1.T6.1.7.6.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.7.6.1.1">
<span class="ltx_p" id="A1.T6.1.7.6.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.7.6.1.1.1.1">5 (Extremely clear):</span> The text is exceptionally clear, concise, and well-structured. It employs precise language and logical organization to convey its message with maximum clarity and effectiveness, leaving no room for misunderstanding or ambiguity.</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Part II of prompt instruction: Scoring clarity</figcaption>
</figure>
<figure class="ltx_table" id="A1.T7">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T7.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T7.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A1.T7.1.1.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.1.1.1.1">
<span class="ltx_p" id="A1.T7.1.1.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.1.1.1.1.1.1">Scoring Comprehensiveness (0-5)</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T7.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T7.1.2.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.2.1.1.1">
<span class="ltx_p" id="A1.T7.1.2.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.2.1.1.1.1.1">0 (Not comprehensive at all):</span> The text is extremely shallow and lacks any meaningful information or depth. It provides only cursory coverage of the subject matter, leaving the reader with more questions than answers.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.1.3.2.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.3.2.1.1">
<span class="ltx_p" id="A1.T7.1.3.2.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.3.2.1.1.1.1">1 (Slightly comprehensive):</span> The text offers minimal information, providing only a superficial overview of the topic without delving into any significant detail. It leaves many aspects of the subject unexplored or poorly explained.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.1.4.3.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.4.3.1.1">
<span class="ltx_p" id="A1.T7.1.4.3.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.4.3.1.1.1.1">2 (Moderately comprehensive):</span> The text offers some information but lacks depth or thoroughness, leaving important aspects of the topic unexplored. While it may touch on key points, it fails to provide sufficient detail or context for a comprehensive understanding.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.1.5.4.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.5.4.1.1">
<span class="ltx_p" id="A1.T7.1.5.4.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.5.4.1.1.1.1">3 (Comprehensive):</span> The text provides a reasonable level of detail and coverage of the subject matter, addressing key aspects but may overlook some minor details. It offers a solid foundation for understanding the topic but leaves room for additional exploration.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.1.6.5.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.6.5.1.1">
<span class="ltx_p" id="A1.T7.1.6.5.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.6.5.1.1.1.1">4 (Very comprehensive):</span> The text is comprehensive and well-rounded, offering thorough coverage of the topic with few gaps or omissions. It provides detailed explanations and insights that leave the reader with a comprehensive understanding of the subject matter.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A1.T7.1.7.6.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.7.6.1.1">
<span class="ltx_p" id="A1.T7.1.7.6.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T7.1.7.6.1.1.1.1">5 (Extremely comprehensive):</span> The text is exhaustive in its coverage, leaving no significant aspects of the topic unaddressed. It provides comprehensive insights and information that leave the reader with a thorough understanding of the subject matter, covering all relevant points in depth.</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Part III of prompt instruction: Scoring comprehensive</figcaption>
</figure>
<figure class="ltx_table" id="A1.T8">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T8.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T8.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A1.T8.1.1.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.1.1.1.1.1.1">Scoring Usefulness of Knowledge (0-5)</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T8.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T8.1.2.1.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.2.1.1.1">
<span class="ltx_p" id="A1.T8.1.2.1.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.2.1.1.1.1.1">0 (Not Knowledgeable at all):</span> The text fails to provide any helpful information or assistance in understanding the topic. It may even confuse or mislead the reader, detracting from their understanding rather than enhancing it.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.3.2.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.3.2.1.1">
<span class="ltx_p" id="A1.T8.1.3.2.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.3.2.1.1.1.1">1 (Slightly knowledgeable):</span> The text offers limited assistance and does not significantly contribute to understanding or addressing the query or topic. While it may contain some knowledgeable information, its overall impact is minimal.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.4.3.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.4.3.1.1">
<span class="ltx_p" id="A1.T8.1.4.3.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.4.3.1.1.1.1">2 (Moderately knowledgeable):</span> The text provides some assistance but falls short of fully addressing the query or topic in a helpful manner. While it may contain valuable insights or information, its overall effectiveness is limited by various shortcomings.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.5.4.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.5.4.1.1">
<span class="ltx_p" id="A1.T8.1.5.4.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.5.4.1.1.1.1">3 (Knowledgeable):</span> The text is generally helpful in understanding the topic and provides valuable information, but there is room for improvement. While it may not be perfect, it offers meaningful assistance to the reader in achieving their goals or objectives.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.6.5.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.6.5.1.1">
<span class="ltx_p" id="A1.T8.1.6.5.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.6.5.1.1.1.1">4 (Very knowledgeable):</span> The text is highly helpful and contributes significantly to understanding the topic, offering valuable insights and information that enhance the reader’s comprehension. It effectively addresses the query or topic in a helpful and informative manner.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A1.T8.1.7.6.1" style="padding-top:4pt;padding-bottom:4pt;">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.7.6.1.1">
<span class="ltx_p" id="A1.T8.1.7.6.1.1.1" style="width:411.9pt;"><span class="ltx_text ltx_font_bold" id="A1.T8.1.7.6.1.1.1.1">5 (Extremely knowledgeable):</span> The text is exceptionally helpful, providing comprehensive coverage and valuable insights that greatly aid in understanding the topic. It offers clear guidance and assistance to the reader, leaving them with a deep and nuanced understanding of the subject matter.</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Part IV of prompt instruction: Scoring usefulness of knowledge</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Experimental Configurations</h2>
<div class="ltx_para" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">We conducted our experiments using a set of NVIDIA RTX A6000 GPUs, each equipped with 48GB of memory and running CUDA version 12.2. Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A2.T9" title="Table 9 ‣ Appendix B Experimental Configurations ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">9</span></a> provides a detailed overview of the default hyper-parameters and experimental settings.</p>
</div>
<figure class="ltx_table" id="A2.T9">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A2.T9.8" style="width:247.8pt;height:378pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1.0,1.0) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T9.8.8">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A2.T9.8.8.9.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" colspan="2" id="A2.T9.8.8.9.1.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.8.8.9.1.1.1" style="font-size:90%;">Models and Training</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A2.T9.8.8.10.1">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T9.8.8.10.1.1" rowspan="2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.10.1.1.1" style="font-size:90%;">LLMs</span></th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T9.8.8.10.1.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.10.1.2.1" style="font-size:90%;">Llama-3-8B, Llama-2-7B</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.11.2">
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.11.2.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.11.2.1.1" style="font-size:90%;">Vicuna-7B, ChatGLM-6B</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.12.3">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.12.3.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.12.3.1.1" style="font-size:90%;">Max sequence length</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.12.3.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.12.3.2.1" style="font-size:90%;">256</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.13.4">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.13.4.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.13.4.1.1" style="font-size:90%;">Batch size</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.13.4.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.13.4.2.1" style="font-size:90%;">10</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.14.5">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.14.5.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.14.5.1.1" style="font-size:90%;">Training epochs</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.14.5.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.14.5.2.1" style="font-size:90%;">50</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.15.6">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.15.6.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.15.6.1.1" style="font-size:90%;">Learning rate</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.15.6.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.15.6.2.1" style="font-size:90%;">5e-5</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.16.7">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.16.7.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.16.7.1.1" style="font-size:90%;">Optimizer</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.16.7.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.16.7.2.1" style="font-size:90%;">AdamW</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.17.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="2" id="A2.T9.8.8.17.8.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.8.8.17.8.1.1" style="font-size:90%;">Attacks</span></th>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.18.9">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T9.8.8.18.9.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.18.9.1.1" style="font-size:90%;">Training epochs</span></th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T9.8.8.18.9.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.18.9.2.1" style="font-size:90%;">10</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.19.10">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.19.10.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.19.10.1.1" style="font-size:90%;">Poisoning rate (Attack I)</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.19.10.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.19.10.2.1" style="font-size:90%;">5%</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.2.2.2">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.2.2.2.3" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.2.2.2.3.1" style="font-size:90%;">Amount of data (Attack II)</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.2.2.2.2" style="padding:0.45pt 3.0pt;">
<span class="ltx_text" id="A2.T9.2.2.2.2.1" style="font-size:90%;">50 (</span><math alttext="\mathcal{D}_{\mathrm{EH}}" class="ltx_Math" display="inline" id="A2.T9.1.1.1.1.m1.1"><semantics id="A2.T9.1.1.1.1.m1.1a"><msub id="A2.T9.1.1.1.1.m1.1.1" xref="A2.T9.1.1.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.T9.1.1.1.1.m1.1.1.2" mathsize="90%" xref="A2.T9.1.1.1.1.m1.1.1.2.cmml">𝒟</mi><mi id="A2.T9.1.1.1.1.m1.1.1.3" mathsize="90%" xref="A2.T9.1.1.1.1.m1.1.1.3.cmml">EH</mi></msub><annotation-xml encoding="MathML-Content" id="A2.T9.1.1.1.1.m1.1b"><apply id="A2.T9.1.1.1.1.m1.1.1.cmml" xref="A2.T9.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.T9.1.1.1.1.m1.1.1.1.cmml" xref="A2.T9.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A2.T9.1.1.1.1.m1.1.1.2.cmml" xref="A2.T9.1.1.1.1.m1.1.1.2">𝒟</ci><ci id="A2.T9.1.1.1.1.m1.1.1.3.cmml" xref="A2.T9.1.1.1.1.m1.1.1.3">EH</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.1.1.1.1.m1.1c">\mathcal{D}_{\mathrm{EH}}</annotation><annotation encoding="application/x-llamapun" id="A2.T9.1.1.1.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_EH end_POSTSUBSCRIPT</annotation></semantics></math><span class="ltx_text" id="A2.T9.2.2.2.2.2" style="font-size:90%;">), 10 (</span><math alttext="\mathcal{D}_{\mathrm{IS}}" class="ltx_Math" display="inline" id="A2.T9.2.2.2.2.m2.1"><semantics id="A2.T9.2.2.2.2.m2.1a"><msub id="A2.T9.2.2.2.2.m2.1.1" xref="A2.T9.2.2.2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.T9.2.2.2.2.m2.1.1.2" mathsize="90%" xref="A2.T9.2.2.2.2.m2.1.1.2.cmml">𝒟</mi><mi id="A2.T9.2.2.2.2.m2.1.1.3" mathsize="90%" xref="A2.T9.2.2.2.2.m2.1.1.3.cmml">IS</mi></msub><annotation-xml encoding="MathML-Content" id="A2.T9.2.2.2.2.m2.1b"><apply id="A2.T9.2.2.2.2.m2.1.1.cmml" xref="A2.T9.2.2.2.2.m2.1.1"><csymbol cd="ambiguous" id="A2.T9.2.2.2.2.m2.1.1.1.cmml" xref="A2.T9.2.2.2.2.m2.1.1">subscript</csymbol><ci id="A2.T9.2.2.2.2.m2.1.1.2.cmml" xref="A2.T9.2.2.2.2.m2.1.1.2">𝒟</ci><ci id="A2.T9.2.2.2.2.m2.1.1.3.cmml" xref="A2.T9.2.2.2.2.m2.1.1.3">IS</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.2.2.2.2.m2.1c">\mathcal{D}_{\mathrm{IS}}</annotation><annotation encoding="application/x-llamapun" id="A2.T9.2.2.2.2.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_IS end_POSTSUBSCRIPT</annotation></semantics></math><span class="ltx_text" id="A2.T9.2.2.2.2.3" style="font-size:90%;">)</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.20.11">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.20.11.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.20.11.1.1" style="font-size:90%;">Batch size</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.20.11.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.20.11.2.1" style="font-size:90%;">10 (Attack I), 2 (Attack II)</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.21.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="2" id="A2.T9.8.8.21.12.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.8.8.21.12.1.1" style="font-size:90%;">Ctrl</span></th>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.22.13">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T9.8.8.22.13.1" rowspan="2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.22.13.1.1" style="font-size:90%;">Curation rate</span></th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T9.8.8.22.13.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.22.13.2.1" style="font-size:90%;">5% (against Attack I)</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.23.14">
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.23.14.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.23.14.1.1" style="font-size:90%;">25% (against Attack II)</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.3.3.3">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.3.3.3.1" style="padding:0.45pt 3.0pt;">
<span class="ltx_text" id="A2.T9.3.3.3.1.1" style="font-size:90%;">Temperature </span><math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="A2.T9.3.3.3.1.m1.1"><semantics id="A2.T9.3.3.3.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A2.T9.3.3.3.1.m1.1.1" mathsize="90%" xref="A2.T9.3.3.3.1.m1.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="A2.T9.3.3.3.1.m1.1b"><ci id="A2.T9.3.3.3.1.m1.1.1.cmml" xref="A2.T9.3.3.3.1.m1.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.3.3.3.1.m1.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="A2.T9.3.3.3.1.m1.1d">caligraphic_T</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left" id="A2.T9.3.3.3.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.3.3.3.2.1" style="font-size:90%;">[0.2, 0.4, 0.6, 0.8, 1.0]</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.5.5.5">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.5.5.5.2" style="padding:0.45pt 3.0pt;">
<span class="ltx_text" id="A2.T9.5.5.5.2.1" style="font-size:90%;">top-</span><math alttext="p" class="ltx_Math" display="inline" id="A2.T9.4.4.4.1.m1.1"><semantics id="A2.T9.4.4.4.1.m1.1a"><mi id="A2.T9.4.4.4.1.m1.1.1" mathsize="90%" xref="A2.T9.4.4.4.1.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="A2.T9.4.4.4.1.m1.1b"><ci id="A2.T9.4.4.4.1.m1.1.1.cmml" xref="A2.T9.4.4.4.1.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.4.4.4.1.m1.1c">p</annotation><annotation encoding="application/x-llamapun" id="A2.T9.4.4.4.1.m1.1d">italic_p</annotation></semantics></math><span class="ltx_text" id="A2.T9.5.5.5.2.2" style="font-size:90%;"> </span><math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="A2.T9.5.5.5.2.m2.1"><semantics id="A2.T9.5.5.5.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="A2.T9.5.5.5.2.m2.1.1" mathsize="90%" xref="A2.T9.5.5.5.2.m2.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="A2.T9.5.5.5.2.m2.1b"><ci id="A2.T9.5.5.5.2.m2.1.1.cmml" xref="A2.T9.5.5.5.2.m2.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.5.5.5.2.m2.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="A2.T9.5.5.5.2.m2.1d">caligraphic_P</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left" id="A2.T9.5.5.5.3" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.5.5.5.3.1" style="font-size:90%;">[0.2, 0.4, 0.6, 0.8, 1.0]</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.24.15">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.24.15.1" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.24.15.1.1" style="font-size:90%;">Max rounds of beam search</span></th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.24.15.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.24.15.2.1" style="font-size:90%;">5</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.7.7.7">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.6.6.6.1" style="padding:0.45pt 3.0pt;">
<span class="ltx_text" id="A2.T9.6.6.6.1.1" style="font-size:90%;">Top-</span><math alttext="k" class="ltx_Math" display="inline" id="A2.T9.6.6.6.1.m1.1"><semantics id="A2.T9.6.6.6.1.m1.1a"><mi id="A2.T9.6.6.6.1.m1.1.1" mathsize="90%" xref="A2.T9.6.6.6.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="A2.T9.6.6.6.1.m1.1b"><ci id="A2.T9.6.6.6.1.m1.1.1.cmml" xref="A2.T9.6.6.6.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.6.6.6.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="A2.T9.6.6.6.1.m1.1d">italic_k</annotation></semantics></math><span class="ltx_text" id="A2.T9.6.6.6.1.2" style="font-size:90%;"> selection in beam search</span>
</th>
<td class="ltx_td ltx_align_left" id="A2.T9.7.7.7.2" style="padding:0.45pt 3.0pt;">
<math alttext="k" class="ltx_Math" display="inline" id="A2.T9.7.7.7.2.m1.1"><semantics id="A2.T9.7.7.7.2.m1.1a"><mi id="A2.T9.7.7.7.2.m1.1.1" mathsize="90%" xref="A2.T9.7.7.7.2.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="A2.T9.7.7.7.2.m1.1b"><ci id="A2.T9.7.7.7.2.m1.1.1.cmml" xref="A2.T9.7.7.7.2.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.7.7.7.2.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="A2.T9.7.7.7.2.m1.1d">italic_k</annotation></semantics></math><span class="ltx_text" id="A2.T9.7.7.7.2.1" style="font-size:90%;">=3</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T9.8.8.8">
<th class="ltx_td ltx_align_right ltx_th ltx_th_row ltx_border_r" id="A2.T9.8.8.8.1" style="padding:0.45pt 3.0pt;">
<span class="ltx_text" id="A2.T9.8.8.8.1.1" style="font-size:90%;">Weight of </span><math alttext="\mathcal{L}_{\mathrm{LM}}" class="ltx_Math" display="inline" id="A2.T9.8.8.8.1.m1.1"><semantics id="A2.T9.8.8.8.1.m1.1a"><msub id="A2.T9.8.8.8.1.m1.1.1" xref="A2.T9.8.8.8.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.T9.8.8.8.1.m1.1.1.2" mathsize="90%" xref="A2.T9.8.8.8.1.m1.1.1.2.cmml">ℒ</mi><mi id="A2.T9.8.8.8.1.m1.1.1.3" mathsize="90%" xref="A2.T9.8.8.8.1.m1.1.1.3.cmml">LM</mi></msub><annotation-xml encoding="MathML-Content" id="A2.T9.8.8.8.1.m1.1b"><apply id="A2.T9.8.8.8.1.m1.1.1.cmml" xref="A2.T9.8.8.8.1.m1.1.1"><csymbol cd="ambiguous" id="A2.T9.8.8.8.1.m1.1.1.1.cmml" xref="A2.T9.8.8.8.1.m1.1.1">subscript</csymbol><ci id="A2.T9.8.8.8.1.m1.1.1.2.cmml" xref="A2.T9.8.8.8.1.m1.1.1.2">ℒ</ci><ci id="A2.T9.8.8.8.1.m1.1.1.3.cmml" xref="A2.T9.8.8.8.1.m1.1.1.3">LM</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T9.8.8.8.1.m1.1c">\mathcal{L}_{\mathrm{LM}}</annotation><annotation encoding="application/x-llamapun" id="A2.T9.8.8.8.1.m1.1d">caligraphic_L start_POSTSUBSCRIPT roman_LM end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left" id="A2.T9.8.8.8.2" style="padding:0.45pt 3.0pt;"><span class="ltx_text" id="A2.T9.8.8.8.2.1" style="font-size:90%;">1.0</span></td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 9: </span>Implementation and evaluation details of models, attacks, and <span class="ltx_text ltx_font_smallcaps" id="A2.T9.13.1">Ctrl</span>.</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Additional Results</h2>
<figure class="ltx_figure" id="A3.F8"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="216" id="A3.F8.g1" src="x8.png" width="681"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Perplexity change under varying temperature and top-<math alttext="p" class="ltx_Math" display="inline" id="A3.F8.2.m1.1"><semantics id="A3.F8.2.m1.1b"><mi id="A3.F8.2.m1.1.1" xref="A3.F8.2.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="A3.F8.2.m1.1c"><ci id="A3.F8.2.m1.1.1.cmml" xref="A3.F8.2.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.F8.2.m1.1d">p</annotation><annotation encoding="application/x-llamapun" id="A3.F8.2.m1.1e">italic_p</annotation></semantics></math>, measured under three randomly selected <span class="ltx_text ltx_font_italic" id="A3.F8.4.1">(query, response)</span> pairs.</figcaption>
</figure>
<div class="ltx_para" id="A3.p1">
<p class="ltx_p" id="A3.p1.2"><span class="ltx_text ltx_font_bold" id="A3.p1.1.1">Perplexity with varying temperature and top-<math alttext="p" class="ltx_Math" display="inline" id="A3.p1.1.1.m1.1"><semantics id="A3.p1.1.1.m1.1a"><mi id="A3.p1.1.1.m1.1.1" xref="A3.p1.1.1.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="A3.p1.1.1.m1.1b"><ci id="A3.p1.1.1.m1.1.1.cmml" xref="A3.p1.1.1.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.p1.1.1.m1.1c">p</annotation><annotation encoding="application/x-llamapun" id="A3.p1.1.1.m1.1d">italic_p</annotation></semantics></math></span> Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#A3.F8" title="Figure 8 ‣ Appendix C Additional Results ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">8</span></a> presents additional examples of <span class="ltx_text ltx_font_italic" id="A3.p1.2.2">(query, response)</span> pairs where we adjust the temperature and top-<math alttext="p" class="ltx_Math" display="inline" id="A3.p1.2.m1.1"><semantics id="A3.p1.2.m1.1a"><mi id="A3.p1.2.m1.1.1" xref="A3.p1.2.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="A3.p1.2.m1.1b"><ci id="A3.p1.2.m1.1.1.cmml" xref="A3.p1.2.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.p1.2.m1.1c">p</annotation><annotation encoding="application/x-llamapun" id="A3.p1.2.m1.1d">italic_p</annotation></semantics></math> parameters, subsequently measuring their perplexity on Llama-3-8B. This analysis follows the same methodology as outlined in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19358v2#S4.F4" title="Figure 4 ‣ 4.2 Methodology ‣ 4 Ctrl: A Data Curation Framework against Jailbreaking Attacks ‣ Robustifying Safety-Aligned Large Language Models through Clean Data Curation"><span class="ltx_text ltx_ref_tag">4</span></a>.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Fri May 31 01:54:30 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
