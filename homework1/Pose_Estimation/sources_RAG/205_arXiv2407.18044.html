<!DOCTYPE html>
<html lang="en" prefix="dcterms: http://purl.org/dc/terms/">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation</title>
<!--Generated on Thu Jul 25 13:47:56 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2407.18044v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S1" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S1.SS1" title="In 1 Introduction ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1.1 </span>Contributions</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Application and Dataset</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS1" title="In 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Description</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2" title="In 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Offline Question Generation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2.SSS1" title="In 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2.1 </span>Base prompt</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2.SSS2" title="In 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2.2 </span>Answerability model</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2.SSS3" title="In 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2.3 </span>Analysis of Generated Question Similarity</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Mathematical Formulation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS1" title="In 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Notation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS2" title="In 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Ideal Retrieval Objective</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS3" title="In 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Misalignment</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS4" title="In 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>QB-RAG</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS4.SSS1" title="In 3.4 QB-RAG ‣ 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4.1 </span>Vanilla QB-RAG</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3.SS4.SSS2" title="In 3.4 QB-RAG ‣ 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4.2 </span>Oracle and Approximate QB-RAG</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Benchmark</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS1" title="In 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Methods</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS2" title="In 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Answer Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS3" title="In 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Test Data Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS4" title="In 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Metrics</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS4.SSS1" title="In 4.4 Metrics ‣ 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.1 </span>Retrieval Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS4.SSS2" title="In 4.4 Metrics ‣ 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.2 </span>Answer Evaluation</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Experimental Results</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.SS1" title="In 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Effect of QB-RAG on Retrieval Efficacy</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.SS2" title="In 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Effect of QB-RAG on Generated Answer Quality</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.SS3" title="In 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>Effect of Coverage of Generated Questions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.SS4" title="In 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.4 </span>Case Study</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S6" title="In The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Discussion</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname"><span class="ltx_ERROR undefined" id="id3.3.id1">\name</span>Eric Yang <sup class="ltx_sup" id="id1.1.1"><math alttext="\dagger" class="ltx_Math" display="inline" id="id1.1.1.m1.1"><semantics id="id1.1.1.m1.1a"><mo id="id1.1.1.m1.1.1" xref="id1.1.1.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="id1.1.1.m1.1b"><ci id="id1.1.1.m1.1.1.cmml" xref="id1.1.1.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="id1.1.1.m1.1c">\dagger</annotation><annotation encoding="application/x-llamapun" id="id1.1.1.m1.1d">†</annotation></semantics></math></sup> <span class="ltx_ERROR undefined" id="id4.4.id2">\email</span>eryang@verily.com 
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id5.5.id3">\addr</span>Verily
<span class="ltx_ERROR undefined" id="id6.6.id4">\AND</span><span class="ltx_ERROR undefined" id="id7.7.id5">\name</span>Jonathan Amar <sup class="ltx_sup" id="id2.2.2"><math alttext="\dagger" class="ltx_Math" display="inline" id="id2.2.2.m1.1"><semantics id="id2.2.2.m1.1a"><mo id="id2.2.2.m1.1.1" xref="id2.2.2.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="id2.2.2.m1.1b"><ci id="id2.2.2.m1.1.1.cmml" xref="id2.2.2.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="id2.2.2.m1.1c">\dagger</annotation><annotation encoding="application/x-llamapun" id="id2.2.2.m1.1d">†</annotation></semantics></math></sup> <span class="ltx_ERROR undefined" id="id8.8.id6">\email</span>jonathanamar@verily.com 
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id9.9.id7">\addr</span>Verily
<span class="ltx_ERROR undefined" id="id10.10.id8">\AND</span><span class="ltx_ERROR undefined" id="id11.11.id9">\name</span>Jong Ha Lee <span class="ltx_ERROR undefined" id="id12.12.id10">\email</span>jonghalee@verily.com  
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id13.13.id11">\addr</span>Verily
<span class="ltx_ERROR undefined" id="id14.14.id12">\AND</span><span class="ltx_ERROR undefined" id="id15.15.id13">\name</span>Bhawesh Kumar <span class="ltx_ERROR undefined" id="id16.16.id14">\email</span>bhaweshk@verily.com 
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id17.17.id15">\addr</span>Verily
<span class="ltx_ERROR undefined" id="id18.18.id16">\AND</span><span class="ltx_ERROR undefined" id="id19.19.id17">\name</span>Yugang Jia <span class="ltx_ERROR undefined" id="id20.20.id18">\email</span>yugang@verily.com
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id21.21.id19">\addr</span>Verily
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id22.id1">Digital health chatbots powered by Large Language Models (LLMs) have the potential to significantly improve personal health management for chronic conditions by providing accessible and on-demand health coaching and question-answering. However, these chatbots risk providing unverified and inaccurate information because LLMs generate responses based on patterns learned from diverse internet data. Retrieval Augmented Generation (RAG) can help mitigate hallucinations and inaccuracies in LLM responses by grounding it on reliable content. However, efficiently and accurately retrieving most relevant set of content for real-time user questions remains a challenge.</p>
<p class="ltx_p" id="id23.id2">In this work, we introduce Query-Based Retrieval Augmented Generation (QB-RAG), a novel approach that pre-computes a database of potential queries from a content base using LLMs. For an incoming patient question, QB-RAG efficiently matches it against this pre-generated query database using vector search, improving alignment between user questions and the content. We establish a theoretical foundation for QB-RAG and provide a comparative analysis of existing retrieval enhancement techniques for RAG systems. Finally, our empirical evaluation demonstrates that QB-RAG significantly improves the accuracy of healthcare question answering, paving the way for robust and trustworthy LLM applications in digital health.</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<p class="ltx_p" id="p1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1" style="font-size:90%;">Keywords:</span><span class="ltx_text" id="p1.1.2" style="font-size:90%;"> 
RAG, LLM, Healthcare, Digital Health.</span></p>
</div>
<span class="ltx_note ltx_role_footnotetext" id="footnotex1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">footnotetext: </span><math alttext="\dagger" class="ltx_Math" display="inline" id="footnotex1.m1.1"><semantics id="footnotex1.m1.1b"><mo id="footnotex1.m1.1.1" xref="footnotex1.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="footnotex1.m1.1c"><ci id="footnotex1.m1.1.1.cmml" xref="footnotex1.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="footnotex1.m1.1d">\dagger</annotation><annotation encoding="application/x-llamapun" id="footnotex1.m1.1e">†</annotation></semantics></math> Equal contribution.</span></span></span>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large Language Models (LLMs), such as OpenAI’s GPT <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib17" title="">2024</a>)</cite>, Meta’s Llama <cite class="ltx_cite ltx_citemacro_citep">(Touvron et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib27" title="">2023</a>)</cite> and Google’s Palm <cite class="ltx_cite ltx_citemacro_citep">(Anil et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib2" title="">2023</a>)</cite> and Gemini <cite class="ltx_cite ltx_citemacro_citep">(Team et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib25" title="">2023</a>)</cite> suite, have demonstrated remarkable capabilities across a diverse set of natural language understanding and generation tasks. This has led to several novel applications of language models across different domains. In healthcare, LLMs hold immense promise for developing conversational AI systems that can answer patient questions, offer personalized health advice, and potentially improve access to care, particularly for underserved populations <cite class="ltx_cite ltx_citemacro_citep">(Clusmann et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib4" title="">2023</a>; Peng et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib20" title="">2023</a>; Thirunavukarasu et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib26" title="">2023</a>; Alowais et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib1" title="">2023</a>; Nori et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib16" title="">2023</a>; Singhal et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib23" title="">2022</a>, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib24" title="">2023</a>; Tu et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib28" title="">2024</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">However, applying LLMs in healthcare presents significant challenges in ensuring the accuracy, reliability, safety, and adherence to the latest healthcare practices in the information they provide. The probabilistic nature of LLMs, combined with limitations and potential biases in their training data, can lead to the generation of fabricated or nonsensical information, known as hallucinations. This poses significant risks in a healthcare context where accurate information is paramount. Additionally, the knowledge embedded within an LLM is limited to the data it was trained on and may not reflect the most current medical guidelines and best practices. To address these challenges, further fine-tuning, instruction tuning <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib30" title="">2022</a>)</cite> and additional reinforcement learning <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib18" title="">2022</a>)</cite> approaches can be considered. Common approaches involve training the models on specific datasets containing the most up-to-date information and/or preferred responses. However, fine-tuning has its limitations: datasets can be difficult and expensive to acquire, especially in healthcare and the computation cost may be prohibitive.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Retrieval Augmented Generation (RAG) <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib11" title="">2020</a>)</cite> offers a promising alternative by grounding LLM responses in a curated and reliable knowledge base of vetted information. Unlike relying solely on the LLM’s internal knowledge, RAG systems retrieve relevant information for a specific user query from this external knowledge base to inform the LLM’s answer generation process. This grounding helps to mitigate hallucinations, promotes factual accuracy, and allows developers to incorporate the latest knowledge.
Applications using RAG systems have been shown to be quite compelling compare to traditional LLM fine tuning <cite class="ltx_cite ltx_citemacro_citep">(Gupta et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib6" title="">2024</a>; Ovadia et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib19" title="">2024</a>)</cite>.
However, the effectiveness of RAG hinges critically on its ability to accurately retrieve the most pertinent information from the knowledge base, a task complicated by the inherent semantic gap between natural language user queries and the way information is structured and stored within a knowledge base <cite class="ltx_cite ltx_citemacro_citep">(Ma et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib13" title="">2023</a>)</cite>. This “retrieval challenge” is a significant bottleneck for building effective RAG systems.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">Several approaches have attempted to overcome this retrieval challenge by improving the alignment between user queries and the knowledge base. Some methods leverage the generative capabilities of LLMs themselves. For instance, Query2Doc <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib29" title="">2023</a>)</cite> and HyDE <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib5" title="">2022</a>)</cite> propose generating a hypothetical document that would ideally answer the user’s query. This synthetic document, more semantically aligned with the knowledge base content, is then used as the retrieval key. Similarly, QA-RAG <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite> takes a two-pronged approach: first generating a candidate answer using a fine-tuned LLM, and then leveraging both the initial query and this candidate answer to retrieve relevant information from the knowledge base. <cite class="ltx_cite ltx_citemacro_citep">(Ma et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib13" title="">2023</a>)</cite> proposes duplicating and/or splitting user queries and then retrieving content similar to either rewritten query. Alternatively, some methods focus on fine-tuning embedding models to create semantically aligned representations of queries and documents <cite class="ltx_cite ltx_citemacro_citep">(Karpukhin et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib7" title="">2020</a>)</cite>. Despite these efforts, efficiently bridging the semantic gap between user queries and knowledge bases for accurate and reliable information retrieval in RAG systems remains an active area of research.</p>
</div>
<section class="ltx_subsection" id="S1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">1.1 </span>Contributions</h3>
<div class="ltx_para" id="S1.SS1.p1">
<p class="ltx_p" id="S1.SS1.p1.1">This paper introduces a novel framework for analyzing and enhancing the retrieval phase of RAG systems. We propose that effective retrieval hinges on aligning user queries with the knowledge base across distinct semantic representations: query, answer, and content. To the best of our knowledge, we are the first to explicitly recognize these distinct “semantic spaces” for improving retrieval. While prior methods have explored alignment based on answer or content representations, our work proposes direct alignment within the query space itself. Existing approaches often implicitly combine these distinct representations, leading to sub-optimal retrieval. In contrast, we systematically disentangle these semantic spaces and demonstrate the advantages of our query based alignment strategy. Specifically, we make the following contributions:</p>
</div>
<div class="ltx_para" id="S1.SS1.p2">
<ol class="ltx_enumerate" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S1.I1.i1.p1.1.1">QB-RAG: Query-Based Retrieval Augmented Generation:</span> We propose QB-RAG, a novel retrieval method for RAG systems that addresses the misalignment between user queries and content bases by pre-generating a comprehensive set of questions from the knowledge base. Distinct from the methods that rely on generate hypothetical documents or candidate answers, QB-RAG directly maps incoming queries to this offline-generated question set using efficient vector search, enabling efficient, direct query-to-query comparison for enhanced retrieval.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S1.I1.i2.p1.1.1">Theoretical Foundation for Query-Space Alignment:</span> We develop a theoretical framework that formalizes the retrieval challenge in RAG systems and elucidates the advantages of query-space alignment. Our analysis underscores the inherent semantic gap between user queries and content embeddings, demonstrating how QB-RAG effectively bridges this gap by operating directly within the query space.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S1.I1.i3.p1.1.1">Survey and Comparative Analysis of Retrieval Strategies: </span>We present a comprehensive survey of prominent retrieval strategies for RAG systems, including naive RAG, QA-RAG, HyDE, and our proposed QB-RAG method. We analyze how each approach addresses the semantic gap between user queries and the knowledge base, comparing their effectiveness through quantitative evaluation on our healthcare dataset. This analysis provides insights into the trade-offs involved in selecting a particular retrieval method for a specific application.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para" id="S1.I1.i4.p1">
<p class="ltx_p" id="S1.I1.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S1.I1.i4.p1.1.1">Comprehensive Benchmark and Empirical Validation: </span>To evaluate the performance of various retrieval methods, we conduct rigorous experiments on a healthcare question-answering dataset generated from our proprietary healthcare content database. Our evaluation encompasses both retrieval accuracy (using metrics like exact recovery rate and relevance scores) and the quality of the downstream generated answers (assessed using faithfulness, relevancy, and accuracy metrics). This comprehensive benchmark provides valuable insights into the strengths and limitations of each retrieval strategy, showcasing QB-RAG’s superiority on our question-answering dataset. While our evaluation focuses on healthcare question-answering, QB-RAG’s underlying principles and advantages may be broadly applicable to various domains and RAG applications.</p>
</div>
</li>
</ol>
</div>
<div class="ltx_para" id="S1.SS1.p3">
<p class="ltx_p" id="S1.SS1.p3.1">The remainder of this paper is structured as follows. Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a> introduces our healthcare-focused content base and details our methodology for extracting a comprehensive set of questions from these materials. In Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S3" title="3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, we formalize the RAG objective, highlighting the challenges of retrieval alignment. We then present QB-RAG as a solution, theoretically motivating its effectiveness in bridging the semantic gap between queries and content. Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4" title="4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4</span></a> outlines our benchmark setup, encompassing a range of prominent retrieval methods and evaluation metrics. Finally, Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5" title="5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">5</span></a> presents the results of our empirical evaluation, demonstrating QB-RAG’s superiority in retrieval accuracy and downstream answer quality.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Application and Dataset</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Description</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">Digital health programs represent a paradigm shift in managing chronic conditions such as Type 2 diabetes (T2D) and Hypertension (HTN). They can improve health markers associated with chronic conditions by delivering personalized care and support directly to patients (<cite class="ltx_cite ltx_citemacro_cite">Majithia et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib14" title="">2020</a>)</cite>). These programs often utilize a variety of digital tools, including mobile apps, messaging, wearable devices, and telehealth services, to facilitate remote monitoring, provide educational content, and offer guidance on lifestyle modifications. The overarching goal is to equip patients with the knowledge and tools necessary to effectively self-manage their condition, enhance their overall quality of life, and potentially reduce the need for frequent traditional healthcare visits.</p>
</div>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.1">An integral component of these digital health programs is the messaging platform they incorporate. This platform is not merely a channel for communication; it is an integrated system designed to provide timely, personalized, and interactive support to patients. The effectiveness of these platforms hinges on their ability to engage patients and provide relevant, timely information in response to their queries. However, the increasing demand for immediate healthcare information often strains the capacity of human healthcare providers to deliver timely support through messaging.</p>
</div>
<div class="ltx_para" id="S2.SS1.p3">
<p class="ltx_p" id="S2.SS1.p3.1">To overcome this scalability challenge, digital health platforms are increasingly turning to meticulously curated content repositories designed to provide readily available answers to common patient questions. This study utilizes such a content repository, referred to as “Content Cards,” developed to address frequently asked questions (FAQs) from patients with T2D and HTN participating in our proprietary digital health programs. This dataset, encompassing 630 English-language content cards, covers a comprehensive range of topics pertinent to managing T2D and HTN. This includes general health information, detailed guidance on using platform-specific features and connected devices (e.g., blood glucose monitors), and personalized dietary recommendations. Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.F1" title="Figure 1 ‣ 2.1 Description ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a> illustrates how these Content Cards are presented within our mobile application, while the excerpt below provides a representative sample of the content:</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.p4">
<p class="ltx_p" id="S2.SS1.p4.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S2.SS1.p4.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S2.SS1.p4.1.1.1">If there is not enough blood on the test strip, you may not get an
accurate blood glucose reading. Some meters won’t even give you a
reading at all. So here are some tips to help you get a big enough drop of blood: Rub your hands in warm water to get the blood to your
fingertips. Shake your hand to help force blood to your fingertips.
Hold your hand down by your side for 30 seconds to help blood run to
your fingertips. Set your lancing device to puncture just deep enough
to get the size drop you need. (This may take some trial and error.)
Take blood from the side of your finger. There are fewer nerves there,
so it doesn’t hurt as much. If your lancet isn’t going deep enough,
dial the number up higher on the lancing device. Once you’ve lanced,
squeeze your finger where it meets your palm and move toward the tip
of your finger.</span>
</span></p>
</div>
<figure class="ltx_figure" id="S2.F1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Illustration of Content Cards in Verily’s Onduo mobile application, these cover broad range of topics, from operational health management, nutrition and physical advice, etc.</figcaption><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="311" id="S2.F1.g1" src="extracted/5754034/images/cc-summary.png" width="472"/>
</figure>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Offline Question Generation</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">The core premise of our work is to improve content retrieval in RAG systems by directly aligning incoming user queries with a pre-computed set of questions derived from our content base. This requires generating a comprehensive set of questions that are answerable by our content, which we achieve through a two-step process. First, we employ a base prompt to generate a preliminary set of questions for each content card. Subsequently, we leverage an LLM-based answerability model (detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2.SSS2" title="2.2.2 Answerability model ‣ 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2.2.2</span></a>) to filter out irrelevant or nonsensical questions, ensuring the quality and relevance of our question set.</p>
</div>
<section class="ltx_subsubsection" id="S2.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.1 </span>Base prompt</h4>
<div class="ltx_para" id="S2.SS2.SSS1.p1">
<p class="ltx_p" id="S2.SS2.SSS1.p1.1">To generate an initial set of questions, we design a prompt (shown in listing <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#LST1" title="Listing 1 ‣ 2.2.1 Base prompt ‣ 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>) with clear instructions for question generation and few-shot examples to illustrate the desired style and format. This prompt incorporates a <span class="ltx_text ltx_font_typewriter" id="S2.SS2.SSS1.p1.1.1">num_questions</span> parameter to specify the target number of questions per content card. While we set this parameter to 20, the actual number of questions generated by the LLM may vary. Applying this prompt to our content base of 630 cards resulted in over 8,000 potential questions.</p>
</div>
<figure class="ltx_float ltx_lstlisting" id="LST1">
<div class="ltx_listing ltx_lst_numbers_left ltx_lstlisting ltx_listing" id="LST1.1" style="background-color:#F2F2EB;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,KioqU1lTVEVNOioqKgpZb3UgYXJlIGEgVGVhY2hlciAvIFByb2Zlc3Nvci4gWW91ciB0YXNrIGlzIHRvIHNldHVwIHtudW1fcXVlc3Rpb25zfSBxdWVzdGlvbnMgZm9yIGFuIHVwY29taW5nIHF1aXovZXhhbWluYXRpb24uIFRoZSBxdWVzdGlvbnMgc2hvdWxkIGJlIGJvdGggZGl2ZXJzZSBhbmQgZXhoYXVzdGl2ZSBpbiBuYXR1cmUgYWNyb3NzIHRoZSBkb2N1bWVudC4gUmVzdHJpY3QgdGhlIHF1ZXN0aW9ucyB0byB0aGUgY29udGV4dCBpbmZvcm1hdGlvbiBwcm92aWRlZC4KCioqKklOU1RSVUNUSU9OUzoqKioKWW91IGFyZSBwcmVzZW50ZWQgd2l0aCBhIHRleHQgYXV0aG9yZWQgYnkgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWxzLCBvZmZlcmluZyBhZHZpY2UgYW5kIHN0cmF0ZWdpZXMgZm9yIG1hbmFnaW5nIGNvbmRpdGlvbnMgc3VjaCBhcyBkaWFiZXRlcyBhbmQgaGlnaCBibG9vZCBwcmVzc3VyZS4gWW91ciB0YXNrIGlzIHRvIGZvcm11bGF0ZSByZWxldmFudCBxdWVzdGlvbnMgdGhhdCB0aGUgdGV4dCBpcyB3cml0dGVuIHRvIGFkZHJlc3MuIENsb3NlbHkgZm9sbG93IHRoZSBleGFtcGxlIHF1ZXN0aW9ucyBmb3Igc3R5bGUgYW5kIHN0cnVjdHVyZSB3aGVuIGZvcm11bGF0aW5nIHlvdXIgb3duIHF1ZXN0aW9uIGZvciB0aGUgcHJvdmlkZWQgdGV4dC4gWW91ciBnZW5lcmF0ZWQgcXVlc3Rpb25zIHNob3VsZCBiZSBpbiBmaXJzdCBwZXJzb24gd2l0aCBkZXRhaWxzLCBidXQgb25seSBhdCBhIGhpZ2ggc2Nob29sIHJlYWRpbmcgbGV2ZWwuIFlvdXIgcXVlc3Rpb25zIHNob3VsZCBiZSBhbnN3ZXJhYmxlIGZyb20gdGhlIHRleHQsIGJ1dCBkbyBub3QgY29weSB0aGUgdGV4dCB2ZXJiYXRpbS4gTUFLRSBTVVJFIHRvIGdlbmVyYXRlIGF0IGxlYXN0IHtudW1fcXVlc3Rpb25zfSBxdWVzdGlvbnMuIEZvcm1hdCB0aGUgZ2VuZXJhdGVkIHF1ZXN0aW9ucyBzZXBhcmF0ZWQgYnkgY29tbWEgaW4gdGhlIGZvbGxvd2luZyBKU09OIGZvcm1hdCB3aXRoICJxdWVzdGlvbnMiIGFzIGl0cyBrZXk6IHt7InF1ZXN0aW9ucyI6IFsiLi4uIiwiLi4uIiwiLi4uIiwiLi4uIl19fQoKKioqRVhBTVBMRSBPVVRQVVRTOioqKgpTYW1wbGUgVGV4dDoge2V4YW1wbGUgY29udGVudH0KR2VuZXJhdGVkIFF1ZXN0aW9uczoge2V4YW1wbGUgSlNPTiB3aXRoIGxpc3Qgb2YgbnVtX3F1ZXN0aW9uIHF1ZXN0aW9uc30KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCkdpdmVuIHRoZSBjb250ZXh0IGluZm9ybWF0aW9uIGFuZCBubyBwcmlvciBrbm93bGVkZ2UsIGdlbmVyYXRlIHRoZSByZWxldmFudCBxdWVzdGlvbnMuClRleHQ6CntjY190ZXh0fQpHZW5lcmF0ZWQgUXVlc3Rpb25zOg==">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx1">
<span class="ltx_tag ltx_tag_listingline">1</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.2" style="font-size:80%;">SYSTEM</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.3" style="font-size:80%;">:***</span>
</div>
<div class="ltx_listingline" id="lstnumberx2">
<span class="ltx_tag ltx_tag_listingline">2</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.1" style="font-size:80%;">You</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.3" style="font-size:80%;">are</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.5" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.7" style="font-size:80%;">Teacher</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.8" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.9" style="font-size:80%;">/</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.11" style="font-size:80%;">Professor</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.12" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.13" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.14" style="font-size:80%;">Your</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.15" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.16" style="font-size:80%;">task</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.17" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.18" style="font-size:80%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.19" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.20" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.21" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.22" style="font-size:80%;">setup</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.23" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.24" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.25" style="font-size:80%;">num_questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.26" style="font-size:80%;">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.27" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.28" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.30" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.31" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.32" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.33" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.34" style="font-size:80%;">upcoming</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.35" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.36" style="font-size:80%;">quiz</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.37" style="font-size:80%;">/</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.38" style="font-size:80%;">examination</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.39" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.40" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.41" style="font-size:80%;">The</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.42" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.43" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.44" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.45" style="font-size:80%;">should</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.46" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.47" style="font-size:80%;">be</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.48" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.49" style="font-size:80%;">both</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.50" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.51" style="font-size:80%;">diverse</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.52" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.53" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.54" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.55" style="font-size:80%;">exhaustive</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.56" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.57" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.58" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.59" style="font-size:80%;">nature</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.60" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.61" style="font-size:80%;">across</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.62" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.63" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.64" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.65" style="font-size:80%;">document</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.66" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.67" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.68" style="font-size:80%;">Restrict</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.69" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.70" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.71" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.72" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.73" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.74" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.75" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.76" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.77" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.78" style="font-size:80%;">context</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.79" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.80" style="font-size:80%;">information</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.81" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.82" style="font-size:80%;">provided</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.83" style="font-size:80%;">.</span>
</div>
<div class="ltx_listingline" id="lstnumberx3">
<span class="ltx_tag ltx_tag_listingline">3</span>
</div>
<div class="ltx_listingline" id="lstnumberx4">
<span class="ltx_tag ltx_tag_listingline">4</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.2" style="font-size:80%;">INSTRUCTIONS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.3" style="font-size:80%;">:***</span>
</div>
<div class="ltx_listingline" id="lstnumberx5">
<span class="ltx_tag ltx_tag_listingline">5</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.1" style="font-size:80%;">You</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.3" style="font-size:80%;">are</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.5" style="font-size:80%;">presented</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.7" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.9" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.11" style="font-size:80%;">text</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.13" style="font-size:80%;">authored</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.15" style="font-size:80%;">by</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.17" style="font-size:80%;">healthcare</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.19" style="font-size:80%;">professionals</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.20" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.21" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.22" style="font-size:80%;">offering</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.23" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.24" style="font-size:80%;">advice</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.25" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.26" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.27" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.28" style="font-size:80%;">strategies</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.30" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.31" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.32" style="font-size:80%;">managing</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.33" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.34" style="font-size:80%;">conditions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.35" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.36" style="font-size:80%;">such</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.37" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.38" style="font-size:80%;">as</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.39" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.40" style="font-size:80%;">diabetes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.41" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.42" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.43" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.44" style="font-size:80%;">high</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.45" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.46" style="font-size:80%;">blood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.47" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.48" style="font-size:80%;">pressure</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.49" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.50" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.51" style="font-size:80%;">Your</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.52" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.53" style="font-size:80%;">task</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.54" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.55" style="font-size:80%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.56" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.57" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.58" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.59" style="font-size:80%;">formulate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.60" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.61" style="font-size:80%;">relevant</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.62" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.63" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.64" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.65" style="font-size:80%;">that</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.66" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.67" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.68" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.69" style="font-size:80%;">text</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.70" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.71" style="font-size:80%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.72" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.73" style="font-size:80%;">written</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.74" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.75" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.76" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.77" style="font-size:80%;">address</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.78" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.79" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.80" style="font-size:80%;">Closely</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.81" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.82" style="font-size:80%;">follow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.83" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.84" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.85" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.86" style="font-size:80%;">example</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.87" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.88" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.89" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.90" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.91" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.92" style="font-size:80%;">style</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.93" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.94" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.95" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.96" style="font-size:80%;">structure</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.97" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.98" style="font-size:80%;">when</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.99" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.100" style="font-size:80%;">formulating</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.101" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.102" style="font-size:80%;">your</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.103" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.104" style="font-size:80%;">own</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.105" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.106" style="font-size:80%;">question</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.107" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.108" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.109" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.110" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.111" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.112" style="font-size:80%;">provided</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.113" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.114" style="font-size:80%;">text</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.115" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.116" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.117" style="font-size:80%;">Your</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.118" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.119" style="font-size:80%;">generated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.120" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.121" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.122" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.123" style="font-size:80%;">should</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.124" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.125" style="font-size:80%;">be</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.126" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.127" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.128" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.129" style="font-size:80%;">first</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.130" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.131" style="font-size:80%;">person</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.132" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.133" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.134" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.135" style="font-size:80%;">details</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.136" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.137" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.138" style="font-size:80%;">but</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.139" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.140" style="font-size:80%;">only</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.141" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.142" style="font-size:80%;">at</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.143" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.144" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.145" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.146" style="font-size:80%;">high</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.147" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.148" style="font-size:80%;">school</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.149" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.150" style="font-size:80%;">reading</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.151" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.152" style="font-size:80%;">level</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.153" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.154" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.155" style="font-size:80%;">Your</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.156" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.157" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.158" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.159" style="font-size:80%;">should</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.160" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.161" style="font-size:80%;">be</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.162" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.163" style="font-size:80%;">answerable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.164" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.165" style="font-size:80%;">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.166" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.167" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.168" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.169" style="font-size:80%;">text</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.170" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.171" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.172" style="font-size:80%;">but</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.173" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.174" style="font-size:80%;">do</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.175" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.176" style="font-size:80%;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.177" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.178" style="font-size:80%;">copy</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.179" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.180" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.181" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.182" style="font-size:80%;">text</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.183" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.184" style="font-size:80%;">verbatim</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.185" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.186" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.187" style="font-size:80%;">MAKE</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.188" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.189" style="font-size:80%;">SURE</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.190" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.191" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.192" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.193" style="font-size:80%;">generate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.194" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.195" style="font-size:80%;">at</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.196" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.197" style="font-size:80%;">least</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.198" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.199" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.200" style="font-size:80%;">num_questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.201" style="font-size:80%;">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.202" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.203" style="font-size:80%;">questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.204" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.205" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.206" style="font-size:80%;">Format</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.207" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.208" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.209" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.210" style="font-size:80%;">generated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.211" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.212" style="font-size:80%;">questions</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.213" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.214" style="font-size:80%;">separated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.215" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.216" style="font-size:80%;">by</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.217" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.218" style="font-size:80%;">comma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.219" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.220" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.221" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.222" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.223" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.224" style="font-size:80%;">following</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.225" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.226" style="font-size:80%;">JSON</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.227" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.228" style="font-size:80%;">format</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.229" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.230" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.231" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.232" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.233" style="font-size:80%;">questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.234" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.235" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.236" style="font-size:80%;">as</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.237" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.238" style="font-size:80%;">its</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.239" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.240" style="font-size:80%;">key</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.241" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.242" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.243" style="font-size:80%;">{{"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.244" style="font-size:80%;">questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.245" style="font-size:80%;">":</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.246" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.247" style="font-size:80%;">["...","...","...","..."]}}</span>
</div>
<div class="ltx_listingline" id="lstnumberx6">
<span class="ltx_tag ltx_tag_listingline">6</span>
</div>
<div class="ltx_listingline" id="lstnumberx7">
<span class="ltx_tag ltx_tag_listingline">7</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.2" style="font-size:80%;">EXAMPLE</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.3" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.4" style="font-size:80%;">OUTPUTS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.5" style="font-size:80%;">:***</span>
</div>
<div class="ltx_listingline" id="lstnumberx8">
<span class="ltx_tag ltx_tag_listingline">8</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.1" style="font-size:80%;">Sample</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.3" style="font-size:80%;">Text</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.4" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.5" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.6" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.7" style="font-size:80%;">example</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.9" style="font-size:80%;">content</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.10" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx9">
<span class="ltx_tag ltx_tag_listingline">9</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.1" style="font-size:80%;">Generated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.3" style="font-size:80%;">Questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.4" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.5" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.6" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.7" style="font-size:80%;">example</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.9" style="font-size:80%;">JSON</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.11" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.13" style="font-size:80%;">list</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.15" style="font-size:80%;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.17" style="font-size:80%;">num_question</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.19" style="font-size:80%;">questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.20" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx10">
<span class="ltx_tag ltx_tag_listingline">10</span>
</div>
<div class="ltx_listingline" id="lstnumberx11">
<span class="ltx_tag ltx_tag_listingline">11</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.1" style="font-size:80%;">--------------------------------------------</span>
</div>
<div class="ltx_listingline" id="lstnumberx12">
<span class="ltx_tag ltx_tag_listingline">12</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.1" style="font-size:80%;">Given</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.3" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.5" style="font-size:80%;">context</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.7" style="font-size:80%;">information</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.9" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.11" style="font-size:80%;">no</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.13" style="font-size:80%;">prior</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.15" style="font-size:80%;">knowledge</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx12.16" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.17" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.18" style="font-size:80%;">generate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.19" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.20" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.21" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.22" style="font-size:80%;">relevant</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.23" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.24" style="font-size:80%;">questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx12.25" style="font-size:80%;">.</span>
</div>
<div class="ltx_listingline" id="lstnumberx13">
<span class="ltx_tag ltx_tag_listingline">13</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.1" style="font-size:80%;">Text</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.2" style="font-size:80%;">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx14">
<span class="ltx_tag ltx_tag_listingline">14</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.1" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.2" style="font-size:80%;">cc_text</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.3" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx15">
<span class="ltx_tag ltx_tag_listingline">15</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.1" style="font-size:80%;">Generated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.3" style="font-size:80%;">Questions</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.4" style="font-size:80%;">:</span>
</div>
</div>
<figcaption class="ltx_caption" style="background-color:#F2F2EB;"><span class="ltx_tag ltx_tag_float">Listing 1: </span>Base prompt for question generation</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S2.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.2 </span>Answerability model</h4>
<div class="ltx_para" id="S2.SS2.SSS2.p1">
<p class="ltx_p" id="S2.SS2.SSS2.p1.1">After generating questions using an LLM for our content cards, we noticed that our output questions were sometimes not relevant to the content, or were formatted inappropriately. To mitigate this issue and filter out irrelevant questions, we developed an LLM-based answerability model. Specifically, for each content card and generated question pair, we prompt the LLM to assess whether or not the content contains relevant information to answer the question. Leveraging the LLM’s reasoning abilities, we structure the prompt to elicit a step-by-step explanation of the answerability judgment. The LLM is instructed to first identify the key information required to answer the question and then determine if that information is present within the content. The LLM also outputs a “Yes” or “No” label which we use to filter out questions that are deemed irrelevant to the corresponding content card.</p>
</div>
<div class="ltx_para" id="S2.SS2.SSS2.p2">
<p class="ltx_p" id="S2.SS2.SSS2.p2.1">Applying this answerability model effectively filters out irrelevant or nonsensical questions generated in the initial phase. This filtering process resulted in a refined set of approximately 4,800 answerable questions derived from our 630 content cards. Each question in this curated set is directly mapped back to its source content card, which serves as the “golden” source for a correct answer.</p>
</div>
<div class="ltx_para" id="S2.SS2.SSS2.p3">
<p class="ltx_p" id="S2.SS2.SSS2.p3.1">To validate the effectiveness and reliability of our answerability model, we randomly selected 100 question and content card pairs and evaluated them using both our automated model and three clinical experts. The clinical experts rated the answerability of each pair on a three-point scale: “Content answers completely,” “Content answers partially,” or “Content does not answer.” The results demonstrated strong agreement between our model’s assessments and the clinical expert’s judgments. Specifically, 90% of the pairs received the same answerability rating, with an additional 9% categorized as “partially answerable,” indicating some degree of inherent subjectivity in the evaluation task.</p>
</div>
<div class="ltx_para" id="S2.SS2.SSS2.p4">
<p class="ltx_p" id="S2.SS2.SSS2.p4.1">This high level of agreement, coupled with the increasing recognition of LLMs as reliable auto-evaluation tools <cite class="ltx_cite ltx_citemacro_cite">Lee et al. (<a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib10" title="">2023</a>)</cite>, supports the validity of our answerability model for filtering irrelevant questions. We provide the prompt used for our answerability model in Listing <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#LST2" title="Listing 2 ‣ 2.2.2 Answerability model ‣ 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<figure class="ltx_float ltx_lstlisting" id="LST2">
<div class="ltx_listing ltx_lst_numbers_left ltx_lstlisting ltx_listing" id="LST2.1" style="background-color:#F2F2EB;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,KioqU1lTVEVNKioqCllvdSBhcmUgYSBoZWFsdGggY29hY2ggcHJvdmlkaW5nIHN1cHBvcnQgZm9yIG1lbWJlcnMgbGl2aW5nIHdpdGggZGlhYmV0ZXMuIFlvdSBoYXZlIHNvbWUgYmFzaWMgaGVhbHRoY2FyZSBhbmQgbnV0cml0aW9uIGtub3dsZWRnZS4KCioqKklOU1RSVUNUSU9OUyoqKgpHaXZlbiBhIHBhaXIgb2YgdXNlciBxdWVyeSBhbmQgYSBwYXJhZ3JhcGggb2YgY29udGVudCwgZGV0ZXJtaW5lIGlmIHRoZSBjb250ZW50IGNvbnRhaW5zIHJlbGV2YW50IGluZm9ybWF0aW9uIHRvIGluZmVyIGFuIGFuc3dlciB0byB0aGUgcXVlcnkuIFRoaW5rIHN0ZXAgYnkgc3RlcC4gRmlyc3QgcHJvdmlkZSBhbiBleHBsYW5hdGlvbiwgdGhlbiBnZW5lcmF0ZSBhICJZZXMiIG9yICJObyIgbGFiZWwuIFB1dCB0aGUgcmVzdWx0cyBpbiBhIFB5dGhvbiBkaWN0aW9uYXJ5IGZvcm1hdCB3aXRoIGtleXMgIkV4cGxhbmF0aW9uIiBhbmQgIlNvdXJjZSByZWxldmFudCIuCgoqKipFWEFNUExFUyoqKgpGb3IgZXhhbXBsZSwgZ2l2ZW4gdGhlIGZvbGxvd2luZyBxdWVyeSBhbmQgY29udGVudCBhcyBpbnB1dHM6IHtwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgZXhhbXBsZXMsIHdpdGggZXhwbGFuYXRpb25zfQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KUHJvdmlkZSB0aGUgb3V0cHV0IGZvciB0aGUgZm9sbG93aW5nIHF1ZXJ5IGFuZCBjb250ZW50OgpRdWVzdGlvbjoge3F1ZXN0aW9ufQpDb250ZW50OiB7Y29udGVudH0=">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx16">
<span class="ltx_tag ltx_tag_listingline">1</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.2" style="font-size:80%;">SYSTEM</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.3" style="font-size:80%;">***</span>
</div>
<div class="ltx_listingline" id="lstnumberx17">
<span class="ltx_tag ltx_tag_listingline">2</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.1" style="font-size:80%;">You</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.3" style="font-size:80%;">are</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.5" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.7" style="font-size:80%;">health</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.9" style="font-size:80%;">coach</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.11" style="font-size:80%;">providing</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.13" style="font-size:80%;">support</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.15" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.17" style="font-size:80%;">members</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.19" style="font-size:80%;">living</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.20" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.21" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.22" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.23" style="font-size:80%;">diabetes</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.24" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.25" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.26" style="font-size:80%;">You</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.27" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.28" style="font-size:80%;">have</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.30" style="font-size:80%;">some</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.31" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.32" style="font-size:80%;">basic</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.33" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.34" style="font-size:80%;">healthcare</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.35" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.36" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.37" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.38" style="font-size:80%;">nutrition</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.39" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.40" style="font-size:80%;">knowledge</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.41" style="font-size:80%;">.</span>
</div>
<div class="ltx_listingline" id="lstnumberx18">
<span class="ltx_tag ltx_tag_listingline">3</span>
</div>
<div class="ltx_listingline" id="lstnumberx19">
<span class="ltx_tag ltx_tag_listingline">4</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.2" style="font-size:80%;">INSTRUCTIONS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.3" style="font-size:80%;">***</span>
</div>
<div class="ltx_listingline" id="lstnumberx20">
<span class="ltx_tag ltx_tag_listingline">5</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.1" style="font-size:80%;">Given</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.3" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.5" style="font-size:80%;">pair</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.7" style="font-size:80%;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.9" style="font-size:80%;">user</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.11" style="font-size:80%;">query</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.13" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.15" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.17" style="font-size:80%;">paragraph</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.19" style="font-size:80%;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.20" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.21" style="font-size:80%;">content</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.22" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.23" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.24" style="font-size:80%;">determine</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.25" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.26" style="font-size:80%;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.27" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.28" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.30" style="font-size:80%;">content</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.31" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.32" style="font-size:80%;">contains</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.33" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.34" style="font-size:80%;">relevant</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.35" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.36" style="font-size:80%;">information</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.37" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.38" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.39" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.40" style="font-size:80%;">infer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.41" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.42" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.43" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.44" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.45" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.46" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.47" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.48" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.49" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.50" style="font-size:80%;">query</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.51" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.52" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.53" style="font-size:80%;">Think</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.54" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.55" style="font-size:80%;">step</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.56" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.57" style="font-size:80%;">by</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.58" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.59" style="font-size:80%;">step</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.60" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.61" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.62" style="font-size:80%;">First</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.63" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.64" style="font-size:80%;">provide</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.65" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.66" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.67" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.68" style="font-size:80%;">explanation</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.69" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.70" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.71" style="font-size:80%;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.72" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.73" style="font-size:80%;">generate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.74" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.75" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.76" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.77" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.78" style="font-size:80%;">Yes</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.79" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.80" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.81" style="font-size:80%;">or</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.82" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.83" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.84" style="font-size:80%;">No</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.85" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.86" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.87" style="font-size:80%;">label</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.88" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.89" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.90" style="font-size:80%;">Put</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.91" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.92" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.93" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.94" style="font-size:80%;">results</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.95" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.96" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.97" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.98" style="font-size:80%;">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.99" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.100" style="font-size:80%;">Python</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.101" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.102" style="font-size:80%;">dictionary</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.103" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.104" style="font-size:80%;">format</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.105" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.106" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.107" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.108" style="font-size:80%;">keys</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.109" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.110" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.111" style="font-size:80%;">Explanation</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.112" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.113" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.114" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.115" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.116" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.117" style="font-size:80%;">Source</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.118" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.119" style="font-size:80%;">relevant</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.120" style="font-size:80%;">".</span>
</div>
<div class="ltx_listingline" id="lstnumberx21">
<span class="ltx_tag ltx_tag_listingline">6</span>
</div>
<div class="ltx_listingline" id="lstnumberx22">
<span class="ltx_tag ltx_tag_listingline">7</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.1" style="font-size:80%;">***</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx22.2" style="font-size:80%;">EXAMPLES</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.3" style="font-size:80%;">***</span>
</div>
<div class="ltx_listingline" id="lstnumberx23">
<span class="ltx_tag ltx_tag_listingline">8</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.1" style="font-size:80%;">For</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.3" style="font-size:80%;">example</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.4" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.5" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.6" style="font-size:80%;">given</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.7" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.8" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.9" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.10" style="font-size:80%;">following</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.11" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.12" style="font-size:80%;">query</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.13" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.14" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.15" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.16" style="font-size:80%;">content</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.17" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.18" style="font-size:80%;">as</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.19" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.20" style="font-size:80%;">inputs</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.21" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.22" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.23" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.24" style="font-size:80%;">positive</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.25" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.26" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.27" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.28" style="font-size:80%;">negative</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.30" style="font-size:80%;">examples</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.31" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.32" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.33" style="font-size:80%;">with</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.34" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.35" style="font-size:80%;">explanations</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.36" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx24">
<span class="ltx_tag ltx_tag_listingline">9</span>
</div>
<div class="ltx_listingline" id="lstnumberx25">
<span class="ltx_tag ltx_tag_listingline">10</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx25.1" style="font-size:80%;">--------------------------------------------</span>
</div>
<div class="ltx_listingline" id="lstnumberx26">
<span class="ltx_tag ltx_tag_listingline">11</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.1" style="font-size:80%;">Provide</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.3" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.5" style="font-size:80%;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.7" style="font-size:80%;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.9" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.11" style="font-size:80%;">following</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.13" style="font-size:80%;">query</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.15" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.17" style="font-size:80%;">content</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx26.18" style="font-size:80%;">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx27">
<span class="ltx_tag ltx_tag_listingline">12</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx27.1" style="font-size:80%;">Question</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx27.2" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx27.3" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx27.4" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx27.5" style="font-size:80%;">question</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx27.6" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx28">
<span class="ltx_tag ltx_tag_listingline">13</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx28.1" style="font-size:80%;">Content</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx28.2" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx28.3" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx28.4" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx28.5" style="font-size:80%;">content</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx28.6" style="font-size:80%;">}</span>
</div>
</div>
<figcaption class="ltx_caption" style="background-color:#F2F2EB;"><span class="ltx_tag ltx_tag_float">Listing 2: </span>Prompt for Answerability Auto-Evaluator</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S2.SS2.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.3 </span>Analysis of Generated Question Similarity</h4>
<div class="ltx_para" id="S2.SS2.SSS3.p1">
<p class="ltx_p" id="S2.SS2.SSS3.p1.1">To assess the potential of our question-based retrieval approach, we analyzed the semantic similarity among the questions generated using the prompt in Listing <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#LST1" title="Listing 1 ‣ 2.2.1 Base prompt ‣ 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>. Our goal was to determine if questions derived from the same content card (intra-content similarity) exhibit higher similarity than questions generated from different cards (inter-content similarity).</p>
</div>
<div class="ltx_para" id="S2.SS2.SSS3.p2">
<p class="ltx_p" id="S2.SS2.SSS3.p2.1">We calculated pairwise cosine similarity between question embeddings generated using Google’s <span class="ltx_text ltx_font_typewriter" id="S2.SS2.SSS3.p2.1.1">textembedding-gecko</span> model. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.T1" title="Table 1 ‣ 2.2.3 Analysis of Generated Question Similarity ‣ 2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>, mean intra-content similarity (0.871) is indeed higher than mean inter-content similarity (0.827). Similarly, questions are, on average, more similar to their source content card (0.837) than to other content cards (0.762). We note that the relatively high similarity between questions and content from different cards likely stems from the inherent thematic overlap within our dataset, as all content and questions focus on T2D and HTN management.</p>
</div>
<div class="ltx_para" id="S2.SS2.SSS3.p3">
<p class="ltx_p" id="S2.SS2.SSS3.p3.1">These results provide initial evidence supporting the premise of our question-based retrieval strategy. While the specific similarity values are influenced by our dataset and embedding model, the consistent trend of higher intra-content similarity suggests that aligning incoming user queries with this question set can improve retrieval accuracy in RAG systems.</p>
</div>
<figure class="ltx_table" id="S2.T1">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T1.1">
<tr class="ltx_tr" id="S2.T1.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S2.T1.1.1.1"><span class="ltx_text ltx_font_bold" id="S2.T1.1.1.1.1">Average Cosine Similarity b/w</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt" id="S2.T1.1.1.2"><span class="ltx_text ltx_font_bold" id="S2.T1.1.1.2.1">Value</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T1.1.2.1">Questions generated from the same content</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T1.1.2.2">.871</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.3">
<td class="ltx_td ltx_align_left" id="S2.T1.1.3.1">Questions generated from a different content</td>
<td class="ltx_td ltx_align_left" id="S2.T1.1.3.2">.827</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.4">
<td class="ltx_td ltx_align_left" id="S2.T1.1.4.1">Questions and their associated content</td>
<td class="ltx_td ltx_align_left" id="S2.T1.1.4.2">.837</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.5">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S2.T1.1.5.1">Questions and other contents</td>
<td class="ltx_td ltx_align_left ltx_border_bb" id="S2.T1.1.5.2">.762</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Cosine similarities between questions and contents combination</figcaption>
</figure>
</section>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Mathematical Formulation</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">This section presents a mathematical framework for analyzing retrieval within RAG systems, highlighting the limitations of conventional approaches and motivating our proposed QB-RAG method. We formalize the retrieval objective, elucidating the misalignment between user queries and content representations. Subsequently, we introduce QB-RAG and provide a theoretical rationale for its efficacy in addressing this misalignment.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Notation</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.6">Consider the set of <math alttext="M" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">M</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">italic_M</annotation></semantics></math> content documents <math alttext="\mathcal{C}=\{c_{1},\cdots,c_{M}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.3"><semantics id="S3.SS1.p1.2.m2.3a"><mrow id="S3.SS1.p1.2.m2.3.3" xref="S3.SS1.p1.2.m2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.2.m2.3.3.4" xref="S3.SS1.p1.2.m2.3.3.4.cmml">𝒞</mi><mo id="S3.SS1.p1.2.m2.3.3.3" xref="S3.SS1.p1.2.m2.3.3.3.cmml">=</mo><mrow id="S3.SS1.p1.2.m2.3.3.2.2" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml"><mo id="S3.SS1.p1.2.m2.3.3.2.2.3" stretchy="false" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">{</mo><msub id="S3.SS1.p1.2.m2.2.2.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.2.m2.2.2.1.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml">c</mi><mn id="S3.SS1.p1.2.m2.2.2.1.1.1.3" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.2.m2.3.3.2.2.4" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">,</mo><mi id="S3.SS1.p1.2.m2.1.1" mathvariant="normal" xref="S3.SS1.p1.2.m2.1.1.cmml">⋯</mi><mo id="S3.SS1.p1.2.m2.3.3.2.2.5" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">,</mo><msub id="S3.SS1.p1.2.m2.3.3.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.cmml">c</mi><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml">M</mi></msub><mo id="S3.SS1.p1.2.m2.3.3.2.2.6" stretchy="false" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.3b"><apply id="S3.SS1.p1.2.m2.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3"><eq id="S3.SS1.p1.2.m2.3.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3.3"></eq><ci id="S3.SS1.p1.2.m2.3.3.4.cmml" xref="S3.SS1.p1.2.m2.3.3.4">𝒞</ci><set id="S3.SS1.p1.2.m2.3.3.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><apply id="S3.SS1.p1.2.m2.2.2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2">𝑐</ci><cn id="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3">1</cn></apply><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">⋯</ci><apply id="S3.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2">𝑐</ci><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3">𝑀</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.3c">\mathcal{C}=\{c_{1},\cdots,c_{M}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.3d">caligraphic_C = { italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_c start_POSTSUBSCRIPT italic_M end_POSTSUBSCRIPT }</annotation></semantics></math> appropriately chunked for embedding. Similarly, let <math alttext="\mathcal{Q}=\{q_{1},\cdots,q_{N}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.3"><semantics id="S3.SS1.p1.3.m3.3a"><mrow id="S3.SS1.p1.3.m3.3.3" xref="S3.SS1.p1.3.m3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.3.m3.3.3.4" xref="S3.SS1.p1.3.m3.3.3.4.cmml">𝒬</mi><mo id="S3.SS1.p1.3.m3.3.3.3" xref="S3.SS1.p1.3.m3.3.3.3.cmml">=</mo><mrow id="S3.SS1.p1.3.m3.3.3.2.2" xref="S3.SS1.p1.3.m3.3.3.2.3.cmml"><mo id="S3.SS1.p1.3.m3.3.3.2.2.3" stretchy="false" xref="S3.SS1.p1.3.m3.3.3.2.3.cmml">{</mo><msub id="S3.SS1.p1.3.m3.2.2.1.1.1" xref="S3.SS1.p1.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.3.m3.2.2.1.1.1.2" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml">q</mi><mn id="S3.SS1.p1.3.m3.2.2.1.1.1.3" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.3.m3.3.3.2.2.4" xref="S3.SS1.p1.3.m3.3.3.2.3.cmml">,</mo><mi id="S3.SS1.p1.3.m3.1.1" mathvariant="normal" xref="S3.SS1.p1.3.m3.1.1.cmml">⋯</mi><mo id="S3.SS1.p1.3.m3.3.3.2.2.5" xref="S3.SS1.p1.3.m3.3.3.2.3.cmml">,</mo><msub id="S3.SS1.p1.3.m3.3.3.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.3.m3.3.3.2.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml">q</mi><mi id="S3.SS1.p1.3.m3.3.3.2.2.2.3" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml">N</mi></msub><mo id="S3.SS1.p1.3.m3.3.3.2.2.6" stretchy="false" xref="S3.SS1.p1.3.m3.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.3b"><apply id="S3.SS1.p1.3.m3.3.3.cmml" xref="S3.SS1.p1.3.m3.3.3"><eq id="S3.SS1.p1.3.m3.3.3.3.cmml" xref="S3.SS1.p1.3.m3.3.3.3"></eq><ci id="S3.SS1.p1.3.m3.3.3.4.cmml" xref="S3.SS1.p1.3.m3.3.3.4">𝒬</ci><set id="S3.SS1.p1.3.m3.3.3.2.3.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2"><apply id="S3.SS1.p1.3.m3.2.2.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2">𝑞</ci><cn id="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3">1</cn></apply><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">⋯</ci><apply id="S3.SS1.p1.3.m3.3.3.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2">𝑞</ci><ci id="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3">𝑁</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.3c">\mathcal{Q}=\{q_{1},\cdots,q_{N}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.3d">caligraphic_Q = { italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_q start_POSTSUBSCRIPT italic_N end_POSTSUBSCRIPT }</annotation></semantics></math> represent the set of <math alttext="N" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><mi id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><ci id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">N</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">italic_N</annotation></semantics></math> questions generated from the content documents as described in section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2" title="2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2.2</span></a>. Unless otherwise specified, <math alttext="c\in\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m5.1"><semantics id="S3.SS1.p1.5.m5.1a"><mrow id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><mi id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">c</mi><mo id="S3.SS1.p1.5.m5.1.1.1" xref="S3.SS1.p1.5.m5.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><in id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1"></in><ci id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2">𝑐</ci><ci id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">c\in\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m5.1d">italic_c ∈ caligraphic_C</annotation></semantics></math> and <math alttext="q\in\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m6.1"><semantics id="S3.SS1.p1.6.m6.1a"><mrow id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml"><mi id="S3.SS1.p1.6.m6.1.1.2" xref="S3.SS1.p1.6.m6.1.1.2.cmml">q</mi><mo id="S3.SS1.p1.6.m6.1.1.1" xref="S3.SS1.p1.6.m6.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.6.m6.1.1.3" xref="S3.SS1.p1.6.m6.1.1.3.cmml">𝒬</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><apply id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1"><in id="S3.SS1.p1.6.m6.1.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1.1"></in><ci id="S3.SS1.p1.6.m6.1.1.2.cmml" xref="S3.SS1.p1.6.m6.1.1.2">𝑞</ci><ci id="S3.SS1.p1.6.m6.1.1.3.cmml" xref="S3.SS1.p1.6.m6.1.1.3">𝒬</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">q\in\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m6.1d">italic_q ∈ caligraphic_Q</annotation></semantics></math> will refer to their respective embedding representations.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.2">We note that in much of the RAG related literature, the embedder for the query and content base are often the same. As mentioned, this typically leads to misaligned retrieval when comparing query embeddings to content embeddings through cosine similarity. Given cosine similarity as the metric used in our retrieval experiments, we will assume without loss of generality that all embeddings are normalized, i.e. <math alttext="\forall c\in\mathcal{C},\forall q\in\mathcal{Q}:\&gt;\lVert c\rVert_{2}=\lVert q%
\rVert_{2}=1" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.4"><semantics id="S3.SS1.p2.1.m1.4a"><mrow id="S3.SS1.p2.1.m1.4.4" xref="S3.SS1.p2.1.m1.4.4.cmml"><mrow id="S3.SS1.p2.1.m1.4.4.2.2" xref="S3.SS1.p2.1.m1.4.4.2.3.cmml"><mrow id="S3.SS1.p2.1.m1.3.3.1.1.1" xref="S3.SS1.p2.1.m1.3.3.1.1.1.cmml"><mrow id="S3.SS1.p2.1.m1.3.3.1.1.1.2" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2.cmml"><mo id="S3.SS1.p2.1.m1.3.3.1.1.1.2.1" rspace="0.167em" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2.1.cmml">∀</mo><mi id="S3.SS1.p2.1.m1.3.3.1.1.1.2.2" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2.2.cmml">c</mi></mrow><mo id="S3.SS1.p2.1.m1.3.3.1.1.1.1" xref="S3.SS1.p2.1.m1.3.3.1.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.1.m1.3.3.1.1.1.3" xref="S3.SS1.p2.1.m1.3.3.1.1.1.3.cmml">𝒞</mi></mrow><mo id="S3.SS1.p2.1.m1.4.4.2.2.3" xref="S3.SS1.p2.1.m1.4.4.2.3a.cmml">,</mo><mrow id="S3.SS1.p2.1.m1.4.4.2.2.2" xref="S3.SS1.p2.1.m1.4.4.2.2.2.cmml"><mrow id="S3.SS1.p2.1.m1.4.4.2.2.2.2" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2.cmml"><mo id="S3.SS1.p2.1.m1.4.4.2.2.2.2.1" rspace="0.167em" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2.1.cmml">∀</mo><mi id="S3.SS1.p2.1.m1.4.4.2.2.2.2.2" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2.2.cmml">q</mi></mrow><mo id="S3.SS1.p2.1.m1.4.4.2.2.2.1" xref="S3.SS1.p2.1.m1.4.4.2.2.2.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.1.m1.4.4.2.2.2.3" xref="S3.SS1.p2.1.m1.4.4.2.2.2.3.cmml">𝒬</mi></mrow></mrow><mo id="S3.SS1.p2.1.m1.4.4.3" lspace="0.278em" rspace="0.220em" xref="S3.SS1.p2.1.m1.4.4.3.cmml">:</mo><mrow id="S3.SS1.p2.1.m1.4.4.4" xref="S3.SS1.p2.1.m1.4.4.4.cmml"><msub id="S3.SS1.p2.1.m1.4.4.4.2" xref="S3.SS1.p2.1.m1.4.4.4.2.cmml"><mrow id="S3.SS1.p2.1.m1.4.4.4.2.2.2" xref="S3.SS1.p2.1.m1.4.4.4.2.2.1.cmml"><mo fence="true" id="S3.SS1.p2.1.m1.4.4.4.2.2.2.1" rspace="0em" xref="S3.SS1.p2.1.m1.4.4.4.2.2.1.1.cmml">∥</mo><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">c</mi><mo fence="true" id="S3.SS1.p2.1.m1.4.4.4.2.2.2.2" lspace="0em" rspace="0.1389em" xref="S3.SS1.p2.1.m1.4.4.4.2.2.1.1.cmml">∥</mo></mrow><mn id="S3.SS1.p2.1.m1.4.4.4.2.3" xref="S3.SS1.p2.1.m1.4.4.4.2.3.cmml">2</mn></msub><mo id="S3.SS1.p2.1.m1.4.4.4.3" lspace="0.1389em" rspace="0.1389em" xref="S3.SS1.p2.1.m1.4.4.4.3.cmml">=</mo><msub id="S3.SS1.p2.1.m1.4.4.4.4" xref="S3.SS1.p2.1.m1.4.4.4.4.cmml"><mrow id="S3.SS1.p2.1.m1.4.4.4.4.2.2" xref="S3.SS1.p2.1.m1.4.4.4.4.2.1.cmml"><mo fence="true" id="S3.SS1.p2.1.m1.4.4.4.4.2.2.1" lspace="0.1389em" rspace="0em" xref="S3.SS1.p2.1.m1.4.4.4.4.2.1.1.cmml">∥</mo><mi id="S3.SS1.p2.1.m1.2.2" xref="S3.SS1.p2.1.m1.2.2.cmml">q</mi><mo fence="true" id="S3.SS1.p2.1.m1.4.4.4.4.2.2.2" lspace="0em" rspace="0.1389em" xref="S3.SS1.p2.1.m1.4.4.4.4.2.1.1.cmml">∥</mo></mrow><mn id="S3.SS1.p2.1.m1.4.4.4.4.3" xref="S3.SS1.p2.1.m1.4.4.4.4.3.cmml">2</mn></msub><mo id="S3.SS1.p2.1.m1.4.4.4.5" lspace="0.1389em" xref="S3.SS1.p2.1.m1.4.4.4.5.cmml">=</mo><mn id="S3.SS1.p2.1.m1.4.4.4.6" xref="S3.SS1.p2.1.m1.4.4.4.6.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.4b"><apply id="S3.SS1.p2.1.m1.4.4.cmml" xref="S3.SS1.p2.1.m1.4.4"><ci id="S3.SS1.p2.1.m1.4.4.3.cmml" xref="S3.SS1.p2.1.m1.4.4.3">:</ci><apply id="S3.SS1.p2.1.m1.4.4.2.3.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.4.4.2.3a.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.3">formulae-sequence</csymbol><apply id="S3.SS1.p2.1.m1.3.3.1.1.1.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1"><in id="S3.SS1.p2.1.m1.3.3.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1.1"></in><apply id="S3.SS1.p2.1.m1.3.3.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2"><csymbol cd="latexml" id="S3.SS1.p2.1.m1.3.3.1.1.1.2.1.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2.1">for-all</csymbol><ci id="S3.SS1.p2.1.m1.3.3.1.1.1.2.2.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1.2.2">𝑐</ci></apply><ci id="S3.SS1.p2.1.m1.3.3.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.3.3.1.1.1.3">𝒞</ci></apply><apply id="S3.SS1.p2.1.m1.4.4.2.2.2.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2"><in id="S3.SS1.p2.1.m1.4.4.2.2.2.1.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2.1"></in><apply id="S3.SS1.p2.1.m1.4.4.2.2.2.2.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2"><csymbol cd="latexml" id="S3.SS1.p2.1.m1.4.4.2.2.2.2.1.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2.1">for-all</csymbol><ci id="S3.SS1.p2.1.m1.4.4.2.2.2.2.2.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2.2.2">𝑞</ci></apply><ci id="S3.SS1.p2.1.m1.4.4.2.2.2.3.cmml" xref="S3.SS1.p2.1.m1.4.4.2.2.2.3">𝒬</ci></apply></apply><apply id="S3.SS1.p2.1.m1.4.4.4.cmml" xref="S3.SS1.p2.1.m1.4.4.4"><and id="S3.SS1.p2.1.m1.4.4.4a.cmml" xref="S3.SS1.p2.1.m1.4.4.4"></and><apply id="S3.SS1.p2.1.m1.4.4.4b.cmml" xref="S3.SS1.p2.1.m1.4.4.4"><eq id="S3.SS1.p2.1.m1.4.4.4.3.cmml" xref="S3.SS1.p2.1.m1.4.4.4.3"></eq><apply id="S3.SS1.p2.1.m1.4.4.4.2.cmml" xref="S3.SS1.p2.1.m1.4.4.4.2"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.4.4.4.2.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.2">subscript</csymbol><apply id="S3.SS1.p2.1.m1.4.4.4.2.2.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.2.2.2"><csymbol cd="latexml" id="S3.SS1.p2.1.m1.4.4.4.2.2.1.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.2.2.2.1">delimited-∥∥</csymbol><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝑐</ci></apply><cn id="S3.SS1.p2.1.m1.4.4.4.2.3.cmml" type="integer" xref="S3.SS1.p2.1.m1.4.4.4.2.3">2</cn></apply><apply id="S3.SS1.p2.1.m1.4.4.4.4.cmml" xref="S3.SS1.p2.1.m1.4.4.4.4"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.4.4.4.4.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.4">subscript</csymbol><apply id="S3.SS1.p2.1.m1.4.4.4.4.2.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.4.2.2"><csymbol cd="latexml" id="S3.SS1.p2.1.m1.4.4.4.4.2.1.1.cmml" xref="S3.SS1.p2.1.m1.4.4.4.4.2.2.1">delimited-∥∥</csymbol><ci id="S3.SS1.p2.1.m1.2.2.cmml" xref="S3.SS1.p2.1.m1.2.2">𝑞</ci></apply><cn id="S3.SS1.p2.1.m1.4.4.4.4.3.cmml" type="integer" xref="S3.SS1.p2.1.m1.4.4.4.4.3">2</cn></apply></apply><apply id="S3.SS1.p2.1.m1.4.4.4c.cmml" xref="S3.SS1.p2.1.m1.4.4.4"><eq id="S3.SS1.p2.1.m1.4.4.4.5.cmml" xref="S3.SS1.p2.1.m1.4.4.4.5"></eq><share href="https://arxiv.org/html/2407.18044v1#S3.SS1.p2.1.m1.4.4.4.4.cmml" id="S3.SS1.p2.1.m1.4.4.4d.cmml" xref="S3.SS1.p2.1.m1.4.4.4"></share><cn id="S3.SS1.p2.1.m1.4.4.4.6.cmml" type="integer" xref="S3.SS1.p2.1.m1.4.4.4.6">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.4c">\forall c\in\mathcal{C},\forall q\in\mathcal{Q}:\&gt;\lVert c\rVert_{2}=\lVert q%
\rVert_{2}=1</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.4d">∀ italic_c ∈ caligraphic_C , ∀ italic_q ∈ caligraphic_Q : ∥ italic_c ∥ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT = ∥ italic_q ∥ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT = 1</annotation></semantics></math>. We also define the distance function as the cosine distance <math alttext="d(x,y)=1-\frac{x^{t}y}{\lVert x\rVert\lVert y\rVert}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.4"><semantics id="S3.SS1.p2.2.m2.4a"><mrow id="S3.SS1.p2.2.m2.4.5" xref="S3.SS1.p2.2.m2.4.5.cmml"><mrow id="S3.SS1.p2.2.m2.4.5.2" xref="S3.SS1.p2.2.m2.4.5.2.cmml"><mi id="S3.SS1.p2.2.m2.4.5.2.2" xref="S3.SS1.p2.2.m2.4.5.2.2.cmml">d</mi><mo id="S3.SS1.p2.2.m2.4.5.2.1" xref="S3.SS1.p2.2.m2.4.5.2.1.cmml">⁢</mo><mrow id="S3.SS1.p2.2.m2.4.5.2.3.2" xref="S3.SS1.p2.2.m2.4.5.2.3.1.cmml"><mo id="S3.SS1.p2.2.m2.4.5.2.3.2.1" stretchy="false" xref="S3.SS1.p2.2.m2.4.5.2.3.1.cmml">(</mo><mi id="S3.SS1.p2.2.m2.3.3" xref="S3.SS1.p2.2.m2.3.3.cmml">x</mi><mo id="S3.SS1.p2.2.m2.4.5.2.3.2.2" xref="S3.SS1.p2.2.m2.4.5.2.3.1.cmml">,</mo><mi id="S3.SS1.p2.2.m2.4.4" xref="S3.SS1.p2.2.m2.4.4.cmml">y</mi><mo id="S3.SS1.p2.2.m2.4.5.2.3.2.3" stretchy="false" xref="S3.SS1.p2.2.m2.4.5.2.3.1.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p2.2.m2.4.5.1" xref="S3.SS1.p2.2.m2.4.5.1.cmml">=</mo><mrow id="S3.SS1.p2.2.m2.4.5.3" xref="S3.SS1.p2.2.m2.4.5.3.cmml"><mn id="S3.SS1.p2.2.m2.4.5.3.2" xref="S3.SS1.p2.2.m2.4.5.3.2.cmml">1</mn><mo id="S3.SS1.p2.2.m2.4.5.3.1" xref="S3.SS1.p2.2.m2.4.5.3.1.cmml">−</mo><mfrac id="S3.SS1.p2.2.m2.2.2" xref="S3.SS1.p2.2.m2.2.2.cmml"><mrow id="S3.SS1.p2.2.m2.2.2.4" xref="S3.SS1.p2.2.m2.2.2.4.cmml"><msup id="S3.SS1.p2.2.m2.2.2.4.2" xref="S3.SS1.p2.2.m2.2.2.4.2.cmml"><mi id="S3.SS1.p2.2.m2.2.2.4.2.2" xref="S3.SS1.p2.2.m2.2.2.4.2.2.cmml">x</mi><mi id="S3.SS1.p2.2.m2.2.2.4.2.3" xref="S3.SS1.p2.2.m2.2.2.4.2.3.cmml">t</mi></msup><mo id="S3.SS1.p2.2.m2.2.2.4.1" xref="S3.SS1.p2.2.m2.2.2.4.1.cmml">⁢</mo><mi id="S3.SS1.p2.2.m2.2.2.4.3" xref="S3.SS1.p2.2.m2.2.2.4.3.cmml">y</mi></mrow><mrow id="S3.SS1.p2.2.m2.2.2.2" xref="S3.SS1.p2.2.m2.2.2.2.cmml"><mrow id="S3.SS1.p2.2.m2.2.2.2.4.2" xref="S3.SS1.p2.2.m2.2.2.2.4.1.cmml"><mo fence="true" id="S3.SS1.p2.2.m2.2.2.2.4.2.1" rspace="0em" xref="S3.SS1.p2.2.m2.2.2.2.4.1.1.cmml">∥</mo><mi id="S3.SS1.p2.2.m2.1.1.1.1" xref="S3.SS1.p2.2.m2.1.1.1.1.cmml">x</mi><mo fence="true" id="S3.SS1.p2.2.m2.2.2.2.4.2.2" lspace="0em" xref="S3.SS1.p2.2.m2.2.2.2.4.1.1.cmml">∥</mo></mrow><mo id="S3.SS1.p2.2.m2.2.2.2.3" lspace="0em" xref="S3.SS1.p2.2.m2.2.2.2.3.cmml">⁢</mo><mrow id="S3.SS1.p2.2.m2.2.2.2.5.2" xref="S3.SS1.p2.2.m2.2.2.2.5.1.cmml"><mo fence="true" id="S3.SS1.p2.2.m2.2.2.2.5.2.1" rspace="0em" xref="S3.SS1.p2.2.m2.2.2.2.5.1.1.cmml">∥</mo><mi id="S3.SS1.p2.2.m2.2.2.2.2" xref="S3.SS1.p2.2.m2.2.2.2.2.cmml">y</mi><mo fence="true" id="S3.SS1.p2.2.m2.2.2.2.5.2.2" lspace="0em" xref="S3.SS1.p2.2.m2.2.2.2.5.1.1.cmml">∥</mo></mrow></mrow></mfrac></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.4b"><apply id="S3.SS1.p2.2.m2.4.5.cmml" xref="S3.SS1.p2.2.m2.4.5"><eq id="S3.SS1.p2.2.m2.4.5.1.cmml" xref="S3.SS1.p2.2.m2.4.5.1"></eq><apply id="S3.SS1.p2.2.m2.4.5.2.cmml" xref="S3.SS1.p2.2.m2.4.5.2"><times id="S3.SS1.p2.2.m2.4.5.2.1.cmml" xref="S3.SS1.p2.2.m2.4.5.2.1"></times><ci id="S3.SS1.p2.2.m2.4.5.2.2.cmml" xref="S3.SS1.p2.2.m2.4.5.2.2">𝑑</ci><interval closure="open" id="S3.SS1.p2.2.m2.4.5.2.3.1.cmml" xref="S3.SS1.p2.2.m2.4.5.2.3.2"><ci id="S3.SS1.p2.2.m2.3.3.cmml" xref="S3.SS1.p2.2.m2.3.3">𝑥</ci><ci id="S3.SS1.p2.2.m2.4.4.cmml" xref="S3.SS1.p2.2.m2.4.4">𝑦</ci></interval></apply><apply id="S3.SS1.p2.2.m2.4.5.3.cmml" xref="S3.SS1.p2.2.m2.4.5.3"><minus id="S3.SS1.p2.2.m2.4.5.3.1.cmml" xref="S3.SS1.p2.2.m2.4.5.3.1"></minus><cn id="S3.SS1.p2.2.m2.4.5.3.2.cmml" type="integer" xref="S3.SS1.p2.2.m2.4.5.3.2">1</cn><apply id="S3.SS1.p2.2.m2.2.2.cmml" xref="S3.SS1.p2.2.m2.2.2"><divide id="S3.SS1.p2.2.m2.2.2.3.cmml" xref="S3.SS1.p2.2.m2.2.2"></divide><apply id="S3.SS1.p2.2.m2.2.2.4.cmml" xref="S3.SS1.p2.2.m2.2.2.4"><times id="S3.SS1.p2.2.m2.2.2.4.1.cmml" xref="S3.SS1.p2.2.m2.2.2.4.1"></times><apply id="S3.SS1.p2.2.m2.2.2.4.2.cmml" xref="S3.SS1.p2.2.m2.2.2.4.2"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.2.2.4.2.1.cmml" xref="S3.SS1.p2.2.m2.2.2.4.2">superscript</csymbol><ci id="S3.SS1.p2.2.m2.2.2.4.2.2.cmml" xref="S3.SS1.p2.2.m2.2.2.4.2.2">𝑥</ci><ci id="S3.SS1.p2.2.m2.2.2.4.2.3.cmml" xref="S3.SS1.p2.2.m2.2.2.4.2.3">𝑡</ci></apply><ci id="S3.SS1.p2.2.m2.2.2.4.3.cmml" xref="S3.SS1.p2.2.m2.2.2.4.3">𝑦</ci></apply><apply id="S3.SS1.p2.2.m2.2.2.2.cmml" xref="S3.SS1.p2.2.m2.2.2.2"><times id="S3.SS1.p2.2.m2.2.2.2.3.cmml" xref="S3.SS1.p2.2.m2.2.2.2.3"></times><apply id="S3.SS1.p2.2.m2.2.2.2.4.1.cmml" xref="S3.SS1.p2.2.m2.2.2.2.4.2"><csymbol cd="latexml" id="S3.SS1.p2.2.m2.2.2.2.4.1.1.cmml" xref="S3.SS1.p2.2.m2.2.2.2.4.2.1">delimited-∥∥</csymbol><ci id="S3.SS1.p2.2.m2.1.1.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1.1.1">𝑥</ci></apply><apply id="S3.SS1.p2.2.m2.2.2.2.5.1.cmml" xref="S3.SS1.p2.2.m2.2.2.2.5.2"><csymbol cd="latexml" id="S3.SS1.p2.2.m2.2.2.2.5.1.1.cmml" xref="S3.SS1.p2.2.m2.2.2.2.5.2.1">delimited-∥∥</csymbol><ci id="S3.SS1.p2.2.m2.2.2.2.2.cmml" xref="S3.SS1.p2.2.m2.2.2.2.2">𝑦</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.4c">d(x,y)=1-\frac{x^{t}y}{\lVert x\rVert\lVert y\rVert}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.4d">italic_d ( italic_x , italic_y ) = 1 - divide start_ARG italic_x start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_y end_ARG start_ARG ∥ italic_x ∥ ∥ italic_y ∥ end_ARG</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.9">The question generation process in section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2" title="2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2.2</span></a> is a one to many process, that is from one content we generate multiple questions. To encode this relationship, we denote the matrix <math alttext="A\in\{0,1\}^{M\times N}" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.2"><semantics id="S3.SS1.p3.1.m1.2a"><mrow id="S3.SS1.p3.1.m1.2.3" xref="S3.SS1.p3.1.m1.2.3.cmml"><mi id="S3.SS1.p3.1.m1.2.3.2" xref="S3.SS1.p3.1.m1.2.3.2.cmml">A</mi><mo id="S3.SS1.p3.1.m1.2.3.1" xref="S3.SS1.p3.1.m1.2.3.1.cmml">∈</mo><msup id="S3.SS1.p3.1.m1.2.3.3" xref="S3.SS1.p3.1.m1.2.3.3.cmml"><mrow id="S3.SS1.p3.1.m1.2.3.3.2.2" xref="S3.SS1.p3.1.m1.2.3.3.2.1.cmml"><mo id="S3.SS1.p3.1.m1.2.3.3.2.2.1" stretchy="false" xref="S3.SS1.p3.1.m1.2.3.3.2.1.cmml">{</mo><mn id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml">0</mn><mo id="S3.SS1.p3.1.m1.2.3.3.2.2.2" xref="S3.SS1.p3.1.m1.2.3.3.2.1.cmml">,</mo><mn id="S3.SS1.p3.1.m1.2.2" xref="S3.SS1.p3.1.m1.2.2.cmml">1</mn><mo id="S3.SS1.p3.1.m1.2.3.3.2.2.3" stretchy="false" xref="S3.SS1.p3.1.m1.2.3.3.2.1.cmml">}</mo></mrow><mrow id="S3.SS1.p3.1.m1.2.3.3.3" xref="S3.SS1.p3.1.m1.2.3.3.3.cmml"><mi id="S3.SS1.p3.1.m1.2.3.3.3.2" xref="S3.SS1.p3.1.m1.2.3.3.3.2.cmml">M</mi><mo id="S3.SS1.p3.1.m1.2.3.3.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p3.1.m1.2.3.3.3.1.cmml">×</mo><mi id="S3.SS1.p3.1.m1.2.3.3.3.3" xref="S3.SS1.p3.1.m1.2.3.3.3.3.cmml">N</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.2b"><apply id="S3.SS1.p3.1.m1.2.3.cmml" xref="S3.SS1.p3.1.m1.2.3"><in id="S3.SS1.p3.1.m1.2.3.1.cmml" xref="S3.SS1.p3.1.m1.2.3.1"></in><ci id="S3.SS1.p3.1.m1.2.3.2.cmml" xref="S3.SS1.p3.1.m1.2.3.2">𝐴</ci><apply id="S3.SS1.p3.1.m1.2.3.3.cmml" xref="S3.SS1.p3.1.m1.2.3.3"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.2.3.3.1.cmml" xref="S3.SS1.p3.1.m1.2.3.3">superscript</csymbol><set id="S3.SS1.p3.1.m1.2.3.3.2.1.cmml" xref="S3.SS1.p3.1.m1.2.3.3.2.2"><cn id="S3.SS1.p3.1.m1.1.1.cmml" type="integer" xref="S3.SS1.p3.1.m1.1.1">0</cn><cn id="S3.SS1.p3.1.m1.2.2.cmml" type="integer" xref="S3.SS1.p3.1.m1.2.2">1</cn></set><apply id="S3.SS1.p3.1.m1.2.3.3.3.cmml" xref="S3.SS1.p3.1.m1.2.3.3.3"><times id="S3.SS1.p3.1.m1.2.3.3.3.1.cmml" xref="S3.SS1.p3.1.m1.2.3.3.3.1"></times><ci id="S3.SS1.p3.1.m1.2.3.3.3.2.cmml" xref="S3.SS1.p3.1.m1.2.3.3.3.2">𝑀</ci><ci id="S3.SS1.p3.1.m1.2.3.3.3.3.cmml" xref="S3.SS1.p3.1.m1.2.3.3.3.3">𝑁</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.2c">A\in\{0,1\}^{M\times N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.2d">italic_A ∈ { 0 , 1 } start_POSTSUPERSCRIPT italic_M × italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> where <math alttext="A_{ij}=\mathds{1}[c_{i}\text{ generated }q_{j}]" class="ltx_Math" display="inline" id="S3.SS1.p3.2.m2.1"><semantics id="S3.SS1.p3.2.m2.1a"><mrow id="S3.SS1.p3.2.m2.1.1" xref="S3.SS1.p3.2.m2.1.1.cmml"><msub id="S3.SS1.p3.2.m2.1.1.3" xref="S3.SS1.p3.2.m2.1.1.3.cmml"><mi id="S3.SS1.p3.2.m2.1.1.3.2" xref="S3.SS1.p3.2.m2.1.1.3.2.cmml">A</mi><mrow id="S3.SS1.p3.2.m2.1.1.3.3" xref="S3.SS1.p3.2.m2.1.1.3.3.cmml"><mi id="S3.SS1.p3.2.m2.1.1.3.3.2" xref="S3.SS1.p3.2.m2.1.1.3.3.2.cmml">i</mi><mo id="S3.SS1.p3.2.m2.1.1.3.3.1" xref="S3.SS1.p3.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS1.p3.2.m2.1.1.3.3.3" xref="S3.SS1.p3.2.m2.1.1.3.3.3.cmml">j</mi></mrow></msub><mo id="S3.SS1.p3.2.m2.1.1.2" xref="S3.SS1.p3.2.m2.1.1.2.cmml">=</mo><mrow id="S3.SS1.p3.2.m2.1.1.1" xref="S3.SS1.p3.2.m2.1.1.1.cmml"><mn id="S3.SS1.p3.2.m2.1.1.1.3" xref="S3.SS1.p3.2.m2.1.1.1.3.cmml">𝟙</mn><mo id="S3.SS1.p3.2.m2.1.1.1.2" xref="S3.SS1.p3.2.m2.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p3.2.m2.1.1.1.1.1" xref="S3.SS1.p3.2.m2.1.1.1.1.2.cmml"><mo id="S3.SS1.p3.2.m2.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p3.2.m2.1.1.1.1.2.1.cmml">[</mo><mrow id="S3.SS1.p3.2.m2.1.1.1.1.1.1" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.cmml"><msub id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.cmml"><mi id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.2" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.3" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS1.p3.2.m2.1.1.1.1.1.1.1" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.1.cmml">⁢</mo><mtext id="S3.SS1.p3.2.m2.1.1.1.1.1.1.3" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.3a.cmml"> generated </mtext><mo id="S3.SS1.p3.2.m2.1.1.1.1.1.1.1a" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.cmml"><mi id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.2" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.2.cmml">q</mi><mi id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.3" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.3.cmml">j</mi></msub></mrow><mo id="S3.SS1.p3.2.m2.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p3.2.m2.1.1.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m2.1b"><apply id="S3.SS1.p3.2.m2.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1"><eq id="S3.SS1.p3.2.m2.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.2"></eq><apply id="S3.SS1.p3.2.m2.1.1.3.cmml" xref="S3.SS1.p3.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.2.m2.1.1.3.1.cmml" xref="S3.SS1.p3.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS1.p3.2.m2.1.1.3.2.cmml" xref="S3.SS1.p3.2.m2.1.1.3.2">𝐴</ci><apply id="S3.SS1.p3.2.m2.1.1.3.3.cmml" xref="S3.SS1.p3.2.m2.1.1.3.3"><times id="S3.SS1.p3.2.m2.1.1.3.3.1.cmml" xref="S3.SS1.p3.2.m2.1.1.3.3.1"></times><ci id="S3.SS1.p3.2.m2.1.1.3.3.2.cmml" xref="S3.SS1.p3.2.m2.1.1.3.3.2">𝑖</ci><ci id="S3.SS1.p3.2.m2.1.1.3.3.3.cmml" xref="S3.SS1.p3.2.m2.1.1.3.3.3">𝑗</ci></apply></apply><apply id="S3.SS1.p3.2.m2.1.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1"><times id="S3.SS1.p3.2.m2.1.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.1.2"></times><cn id="S3.SS1.p3.2.m2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p3.2.m2.1.1.1.3">1</cn><apply id="S3.SS1.p3.2.m2.1.1.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p3.2.m2.1.1.1.1.2.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.SS1.p3.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1"><times id="S3.SS1.p3.2.m2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.1"></times><apply id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p3.2.m2.1.1.1.1.1.1.3a.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.3"><mtext id="S3.SS1.p3.2.m2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.3"> generated </mtext></ci><apply id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.2.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.2">𝑞</ci><ci id="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.3.cmml" xref="S3.SS1.p3.2.m2.1.1.1.1.1.1.4.3">𝑗</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1c">A_{ij}=\mathds{1}[c_{i}\text{ generated }q_{j}]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.2.m2.1d">italic_A start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT = blackboard_1 [ italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT generated italic_q start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ]</annotation></semantics></math>, where <math alttext="\mathds{1}" class="ltx_Math" display="inline" id="S3.SS1.p3.3.m3.1"><semantics id="S3.SS1.p3.3.m3.1a"><mn id="S3.SS1.p3.3.m3.1.1" xref="S3.SS1.p3.3.m3.1.1.cmml">𝟙</mn><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.3.m3.1b"><cn id="S3.SS1.p3.3.m3.1.1.cmml" type="integer" xref="S3.SS1.p3.3.m3.1.1">1</cn></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m3.1c">\mathds{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.3.m3.1d">blackboard_1</annotation></semantics></math> denotes the indicator function. Per our generation process and the relevance evaluation, it is understood that <math alttext="A_{ij}=1\Rightarrow q_{j}\text{ can be answered using }c_{i}" class="ltx_Math" display="inline" id="S3.SS1.p3.4.m4.1"><semantics id="S3.SS1.p3.4.m4.1a"><mrow id="S3.SS1.p3.4.m4.1.1" xref="S3.SS1.p3.4.m4.1.1.cmml"><msub id="S3.SS1.p3.4.m4.1.1.2" xref="S3.SS1.p3.4.m4.1.1.2.cmml"><mi id="S3.SS1.p3.4.m4.1.1.2.2" xref="S3.SS1.p3.4.m4.1.1.2.2.cmml">A</mi><mrow id="S3.SS1.p3.4.m4.1.1.2.3" xref="S3.SS1.p3.4.m4.1.1.2.3.cmml"><mi id="S3.SS1.p3.4.m4.1.1.2.3.2" xref="S3.SS1.p3.4.m4.1.1.2.3.2.cmml">i</mi><mo id="S3.SS1.p3.4.m4.1.1.2.3.1" xref="S3.SS1.p3.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p3.4.m4.1.1.2.3.3" xref="S3.SS1.p3.4.m4.1.1.2.3.3.cmml">j</mi></mrow></msub><mo id="S3.SS1.p3.4.m4.1.1.3" xref="S3.SS1.p3.4.m4.1.1.3.cmml">=</mo><mn id="S3.SS1.p3.4.m4.1.1.4" xref="S3.SS1.p3.4.m4.1.1.4.cmml">1</mn><mo id="S3.SS1.p3.4.m4.1.1.5" stretchy="false" xref="S3.SS1.p3.4.m4.1.1.5.cmml">⇒</mo><mrow id="S3.SS1.p3.4.m4.1.1.6" xref="S3.SS1.p3.4.m4.1.1.6.cmml"><msub id="S3.SS1.p3.4.m4.1.1.6.2" xref="S3.SS1.p3.4.m4.1.1.6.2.cmml"><mi id="S3.SS1.p3.4.m4.1.1.6.2.2" xref="S3.SS1.p3.4.m4.1.1.6.2.2.cmml">q</mi><mi id="S3.SS1.p3.4.m4.1.1.6.2.3" xref="S3.SS1.p3.4.m4.1.1.6.2.3.cmml">j</mi></msub><mo id="S3.SS1.p3.4.m4.1.1.6.1" xref="S3.SS1.p3.4.m4.1.1.6.1.cmml">⁢</mo><mtext id="S3.SS1.p3.4.m4.1.1.6.3" xref="S3.SS1.p3.4.m4.1.1.6.3a.cmml"> can be answered using </mtext><mo id="S3.SS1.p3.4.m4.1.1.6.1a" xref="S3.SS1.p3.4.m4.1.1.6.1.cmml">⁢</mo><msub id="S3.SS1.p3.4.m4.1.1.6.4" xref="S3.SS1.p3.4.m4.1.1.6.4.cmml"><mi id="S3.SS1.p3.4.m4.1.1.6.4.2" xref="S3.SS1.p3.4.m4.1.1.6.4.2.cmml">c</mi><mi id="S3.SS1.p3.4.m4.1.1.6.4.3" xref="S3.SS1.p3.4.m4.1.1.6.4.3.cmml">i</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.4.m4.1b"><apply id="S3.SS1.p3.4.m4.1.1.cmml" xref="S3.SS1.p3.4.m4.1.1"><and id="S3.SS1.p3.4.m4.1.1a.cmml" xref="S3.SS1.p3.4.m4.1.1"></and><apply id="S3.SS1.p3.4.m4.1.1b.cmml" xref="S3.SS1.p3.4.m4.1.1"><eq id="S3.SS1.p3.4.m4.1.1.3.cmml" xref="S3.SS1.p3.4.m4.1.1.3"></eq><apply id="S3.SS1.p3.4.m4.1.1.2.cmml" xref="S3.SS1.p3.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p3.4.m4.1.1.2.1.cmml" xref="S3.SS1.p3.4.m4.1.1.2">subscript</csymbol><ci id="S3.SS1.p3.4.m4.1.1.2.2.cmml" xref="S3.SS1.p3.4.m4.1.1.2.2">𝐴</ci><apply id="S3.SS1.p3.4.m4.1.1.2.3.cmml" xref="S3.SS1.p3.4.m4.1.1.2.3"><times id="S3.SS1.p3.4.m4.1.1.2.3.1.cmml" xref="S3.SS1.p3.4.m4.1.1.2.3.1"></times><ci id="S3.SS1.p3.4.m4.1.1.2.3.2.cmml" xref="S3.SS1.p3.4.m4.1.1.2.3.2">𝑖</ci><ci id="S3.SS1.p3.4.m4.1.1.2.3.3.cmml" xref="S3.SS1.p3.4.m4.1.1.2.3.3">𝑗</ci></apply></apply><cn id="S3.SS1.p3.4.m4.1.1.4.cmml" type="integer" xref="S3.SS1.p3.4.m4.1.1.4">1</cn></apply><apply id="S3.SS1.p3.4.m4.1.1c.cmml" xref="S3.SS1.p3.4.m4.1.1"><ci id="S3.SS1.p3.4.m4.1.1.5.cmml" xref="S3.SS1.p3.4.m4.1.1.5">⇒</ci><share href="https://arxiv.org/html/2407.18044v1#S3.SS1.p3.4.m4.1.1.4.cmml" id="S3.SS1.p3.4.m4.1.1d.cmml" xref="S3.SS1.p3.4.m4.1.1"></share><apply id="S3.SS1.p3.4.m4.1.1.6.cmml" xref="S3.SS1.p3.4.m4.1.1.6"><times id="S3.SS1.p3.4.m4.1.1.6.1.cmml" xref="S3.SS1.p3.4.m4.1.1.6.1"></times><apply id="S3.SS1.p3.4.m4.1.1.6.2.cmml" xref="S3.SS1.p3.4.m4.1.1.6.2"><csymbol cd="ambiguous" id="S3.SS1.p3.4.m4.1.1.6.2.1.cmml" xref="S3.SS1.p3.4.m4.1.1.6.2">subscript</csymbol><ci id="S3.SS1.p3.4.m4.1.1.6.2.2.cmml" xref="S3.SS1.p3.4.m4.1.1.6.2.2">𝑞</ci><ci id="S3.SS1.p3.4.m4.1.1.6.2.3.cmml" xref="S3.SS1.p3.4.m4.1.1.6.2.3">𝑗</ci></apply><ci id="S3.SS1.p3.4.m4.1.1.6.3a.cmml" xref="S3.SS1.p3.4.m4.1.1.6.3"><mtext id="S3.SS1.p3.4.m4.1.1.6.3.cmml" xref="S3.SS1.p3.4.m4.1.1.6.3"> can be answered using </mtext></ci><apply id="S3.SS1.p3.4.m4.1.1.6.4.cmml" xref="S3.SS1.p3.4.m4.1.1.6.4"><csymbol cd="ambiguous" id="S3.SS1.p3.4.m4.1.1.6.4.1.cmml" xref="S3.SS1.p3.4.m4.1.1.6.4">subscript</csymbol><ci id="S3.SS1.p3.4.m4.1.1.6.4.2.cmml" xref="S3.SS1.p3.4.m4.1.1.6.4.2">𝑐</ci><ci id="S3.SS1.p3.4.m4.1.1.6.4.3.cmml" xref="S3.SS1.p3.4.m4.1.1.6.4.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.4.m4.1c">A_{ij}=1\Rightarrow q_{j}\text{ can be answered using }c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.4.m4.1d">italic_A start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT = 1 ⇒ italic_q start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT can be answered using italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. However the converse is not necessarily true as potentially different contents may be able to answer the same question. Thus we define <math alttext="A^{*}\in\{0,1\}^{M\times N}" class="ltx_Math" display="inline" id="S3.SS1.p3.5.m5.2"><semantics id="S3.SS1.p3.5.m5.2a"><mrow id="S3.SS1.p3.5.m5.2.3" xref="S3.SS1.p3.5.m5.2.3.cmml"><msup id="S3.SS1.p3.5.m5.2.3.2" xref="S3.SS1.p3.5.m5.2.3.2.cmml"><mi id="S3.SS1.p3.5.m5.2.3.2.2" xref="S3.SS1.p3.5.m5.2.3.2.2.cmml">A</mi><mo id="S3.SS1.p3.5.m5.2.3.2.3" xref="S3.SS1.p3.5.m5.2.3.2.3.cmml">∗</mo></msup><mo id="S3.SS1.p3.5.m5.2.3.1" xref="S3.SS1.p3.5.m5.2.3.1.cmml">∈</mo><msup id="S3.SS1.p3.5.m5.2.3.3" xref="S3.SS1.p3.5.m5.2.3.3.cmml"><mrow id="S3.SS1.p3.5.m5.2.3.3.2.2" xref="S3.SS1.p3.5.m5.2.3.3.2.1.cmml"><mo id="S3.SS1.p3.5.m5.2.3.3.2.2.1" stretchy="false" xref="S3.SS1.p3.5.m5.2.3.3.2.1.cmml">{</mo><mn id="S3.SS1.p3.5.m5.1.1" xref="S3.SS1.p3.5.m5.1.1.cmml">0</mn><mo id="S3.SS1.p3.5.m5.2.3.3.2.2.2" xref="S3.SS1.p3.5.m5.2.3.3.2.1.cmml">,</mo><mn id="S3.SS1.p3.5.m5.2.2" xref="S3.SS1.p3.5.m5.2.2.cmml">1</mn><mo id="S3.SS1.p3.5.m5.2.3.3.2.2.3" stretchy="false" xref="S3.SS1.p3.5.m5.2.3.3.2.1.cmml">}</mo></mrow><mrow id="S3.SS1.p3.5.m5.2.3.3.3" xref="S3.SS1.p3.5.m5.2.3.3.3.cmml"><mi id="S3.SS1.p3.5.m5.2.3.3.3.2" xref="S3.SS1.p3.5.m5.2.3.3.3.2.cmml">M</mi><mo id="S3.SS1.p3.5.m5.2.3.3.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p3.5.m5.2.3.3.3.1.cmml">×</mo><mi id="S3.SS1.p3.5.m5.2.3.3.3.3" xref="S3.SS1.p3.5.m5.2.3.3.3.3.cmml">N</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.5.m5.2b"><apply id="S3.SS1.p3.5.m5.2.3.cmml" xref="S3.SS1.p3.5.m5.2.3"><in id="S3.SS1.p3.5.m5.2.3.1.cmml" xref="S3.SS1.p3.5.m5.2.3.1"></in><apply id="S3.SS1.p3.5.m5.2.3.2.cmml" xref="S3.SS1.p3.5.m5.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p3.5.m5.2.3.2.1.cmml" xref="S3.SS1.p3.5.m5.2.3.2">superscript</csymbol><ci id="S3.SS1.p3.5.m5.2.3.2.2.cmml" xref="S3.SS1.p3.5.m5.2.3.2.2">𝐴</ci><times id="S3.SS1.p3.5.m5.2.3.2.3.cmml" xref="S3.SS1.p3.5.m5.2.3.2.3"></times></apply><apply id="S3.SS1.p3.5.m5.2.3.3.cmml" xref="S3.SS1.p3.5.m5.2.3.3"><csymbol cd="ambiguous" id="S3.SS1.p3.5.m5.2.3.3.1.cmml" xref="S3.SS1.p3.5.m5.2.3.3">superscript</csymbol><set id="S3.SS1.p3.5.m5.2.3.3.2.1.cmml" xref="S3.SS1.p3.5.m5.2.3.3.2.2"><cn id="S3.SS1.p3.5.m5.1.1.cmml" type="integer" xref="S3.SS1.p3.5.m5.1.1">0</cn><cn id="S3.SS1.p3.5.m5.2.2.cmml" type="integer" xref="S3.SS1.p3.5.m5.2.2">1</cn></set><apply id="S3.SS1.p3.5.m5.2.3.3.3.cmml" xref="S3.SS1.p3.5.m5.2.3.3.3"><times id="S3.SS1.p3.5.m5.2.3.3.3.1.cmml" xref="S3.SS1.p3.5.m5.2.3.3.3.1"></times><ci id="S3.SS1.p3.5.m5.2.3.3.3.2.cmml" xref="S3.SS1.p3.5.m5.2.3.3.3.2">𝑀</ci><ci id="S3.SS1.p3.5.m5.2.3.3.3.3.cmml" xref="S3.SS1.p3.5.m5.2.3.3.3.3">𝑁</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.5.m5.2c">A^{*}\in\{0,1\}^{M\times N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.5.m5.2d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ∈ { 0 , 1 } start_POSTSUPERSCRIPT italic_M × italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> which is the dense unobserved matrix such that <math alttext="A^{*}_{ij}=\mathds{1}[q_{j}\text{ can be answered using }c_{i}]" class="ltx_Math" display="inline" id="S3.SS1.p3.6.m6.1"><semantics id="S3.SS1.p3.6.m6.1a"><mrow id="S3.SS1.p3.6.m6.1.1" xref="S3.SS1.p3.6.m6.1.1.cmml"><msubsup id="S3.SS1.p3.6.m6.1.1.3" xref="S3.SS1.p3.6.m6.1.1.3.cmml"><mi id="S3.SS1.p3.6.m6.1.1.3.2.2" xref="S3.SS1.p3.6.m6.1.1.3.2.2.cmml">A</mi><mrow id="S3.SS1.p3.6.m6.1.1.3.3" xref="S3.SS1.p3.6.m6.1.1.3.3.cmml"><mi id="S3.SS1.p3.6.m6.1.1.3.3.2" xref="S3.SS1.p3.6.m6.1.1.3.3.2.cmml">i</mi><mo id="S3.SS1.p3.6.m6.1.1.3.3.1" xref="S3.SS1.p3.6.m6.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS1.p3.6.m6.1.1.3.3.3" xref="S3.SS1.p3.6.m6.1.1.3.3.3.cmml">j</mi></mrow><mo id="S3.SS1.p3.6.m6.1.1.3.2.3" xref="S3.SS1.p3.6.m6.1.1.3.2.3.cmml">∗</mo></msubsup><mo id="S3.SS1.p3.6.m6.1.1.2" xref="S3.SS1.p3.6.m6.1.1.2.cmml">=</mo><mrow id="S3.SS1.p3.6.m6.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.cmml"><mn id="S3.SS1.p3.6.m6.1.1.1.3" xref="S3.SS1.p3.6.m6.1.1.1.3.cmml">𝟙</mn><mo id="S3.SS1.p3.6.m6.1.1.1.2" xref="S3.SS1.p3.6.m6.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p3.6.m6.1.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.2.cmml"><mo id="S3.SS1.p3.6.m6.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p3.6.m6.1.1.1.1.2.1.cmml">[</mo><mrow id="S3.SS1.p3.6.m6.1.1.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.cmml"><msub id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.cmml"><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.2" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.2.cmml">q</mi><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.3" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.3.cmml">j</mi></msub><mo id="S3.SS1.p3.6.m6.1.1.1.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.1.cmml">⁢</mo><mtext id="S3.SS1.p3.6.m6.1.1.1.1.1.1.3" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.3a.cmml"> can be answered using </mtext><mo id="S3.SS1.p3.6.m6.1.1.1.1.1.1.1a" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.cmml"><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.2" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.2.cmml">c</mi><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.3" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.3.cmml">i</mi></msub></mrow><mo id="S3.SS1.p3.6.m6.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p3.6.m6.1.1.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.6.m6.1b"><apply id="S3.SS1.p3.6.m6.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1"><eq id="S3.SS1.p3.6.m6.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.2"></eq><apply id="S3.SS1.p3.6.m6.1.1.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m6.1.1.3.1.cmml" xref="S3.SS1.p3.6.m6.1.1.3">subscript</csymbol><apply id="S3.SS1.p3.6.m6.1.1.3.2.cmml" xref="S3.SS1.p3.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m6.1.1.3.2.1.cmml" xref="S3.SS1.p3.6.m6.1.1.3">superscript</csymbol><ci id="S3.SS1.p3.6.m6.1.1.3.2.2.cmml" xref="S3.SS1.p3.6.m6.1.1.3.2.2">𝐴</ci><times id="S3.SS1.p3.6.m6.1.1.3.2.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3.2.3"></times></apply><apply id="S3.SS1.p3.6.m6.1.1.3.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3.3"><times id="S3.SS1.p3.6.m6.1.1.3.3.1.cmml" xref="S3.SS1.p3.6.m6.1.1.3.3.1"></times><ci id="S3.SS1.p3.6.m6.1.1.3.3.2.cmml" xref="S3.SS1.p3.6.m6.1.1.3.3.2">𝑖</ci><ci id="S3.SS1.p3.6.m6.1.1.3.3.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3.3.3">𝑗</ci></apply></apply><apply id="S3.SS1.p3.6.m6.1.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1"><times id="S3.SS1.p3.6.m6.1.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.2"></times><cn id="S3.SS1.p3.6.m6.1.1.1.3.cmml" type="integer" xref="S3.SS1.p3.6.m6.1.1.1.3">1</cn><apply id="S3.SS1.p3.6.m6.1.1.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p3.6.m6.1.1.1.1.2.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.SS1.p3.6.m6.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1"><times id="S3.SS1.p3.6.m6.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.1"></times><apply id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.2">𝑞</ci><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.2.3">𝑗</ci></apply><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.1.3a.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.3"><mtext id="S3.SS1.p3.6.m6.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.3"> can be answered using </mtext></ci><apply id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.2">𝑐</ci><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.3.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.4.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.6.m6.1c">A^{*}_{ij}=\mathds{1}[q_{j}\text{ can be answered using }c_{i}]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.6.m6.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT = blackboard_1 [ italic_q start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT can be answered using italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ]</annotation></semantics></math>. This implies that <math alttext="A" class="ltx_Math" display="inline" id="S3.SS1.p3.7.m7.1"><semantics id="S3.SS1.p3.7.m7.1a"><mi id="S3.SS1.p3.7.m7.1.1" xref="S3.SS1.p3.7.m7.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.7.m7.1b"><ci id="S3.SS1.p3.7.m7.1.1.cmml" xref="S3.SS1.p3.7.m7.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.7.m7.1c">A</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.7.m7.1d">italic_A</annotation></semantics></math> is a partial observation of <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS1.p3.8.m8.1"><semantics id="S3.SS1.p3.8.m8.1a"><msup id="S3.SS1.p3.8.m8.1.1" xref="S3.SS1.p3.8.m8.1.1.cmml"><mi id="S3.SS1.p3.8.m8.1.1.2" xref="S3.SS1.p3.8.m8.1.1.2.cmml">A</mi><mo id="S3.SS1.p3.8.m8.1.1.3" xref="S3.SS1.p3.8.m8.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.8.m8.1b"><apply id="S3.SS1.p3.8.m8.1.1.cmml" xref="S3.SS1.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.8.m8.1.1.1.cmml" xref="S3.SS1.p3.8.m8.1.1">superscript</csymbol><ci id="S3.SS1.p3.8.m8.1.1.2.cmml" xref="S3.SS1.p3.8.m8.1.1.2">𝐴</ci><times id="S3.SS1.p3.8.m8.1.1.3.cmml" xref="S3.SS1.p3.8.m8.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.8.m8.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.8.m8.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>, which we call the oracle matrix.
We point out that following our question generation process described in section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>, we have <math alttext="\forall c_{j}\in\mathcal{C}:\&gt;\exists q_{i}\in\mathcal{Q}\text{ s.t. }A_{ij}=1" class="ltx_Math" display="inline" id="S3.SS1.p3.9.m9.1"><semantics id="S3.SS1.p3.9.m9.1a"><mrow id="S3.SS1.p3.9.m9.1.1" xref="S3.SS1.p3.9.m9.1.1.cmml"><mrow id="S3.SS1.p3.9.m9.1.1.2" xref="S3.SS1.p3.9.m9.1.1.2.cmml"><mrow id="S3.SS1.p3.9.m9.1.1.2.2" xref="S3.SS1.p3.9.m9.1.1.2.2.cmml"><mo id="S3.SS1.p3.9.m9.1.1.2.2.1" rspace="0.167em" xref="S3.SS1.p3.9.m9.1.1.2.2.1.cmml">∀</mo><msub id="S3.SS1.p3.9.m9.1.1.2.2.2" xref="S3.SS1.p3.9.m9.1.1.2.2.2.cmml"><mi id="S3.SS1.p3.9.m9.1.1.2.2.2.2" xref="S3.SS1.p3.9.m9.1.1.2.2.2.2.cmml">c</mi><mi id="S3.SS1.p3.9.m9.1.1.2.2.2.3" xref="S3.SS1.p3.9.m9.1.1.2.2.2.3.cmml">j</mi></msub></mrow><mo id="S3.SS1.p3.9.m9.1.1.2.1" xref="S3.SS1.p3.9.m9.1.1.2.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p3.9.m9.1.1.2.3" xref="S3.SS1.p3.9.m9.1.1.2.3.cmml">𝒞</mi></mrow><mo id="S3.SS1.p3.9.m9.1.1.1" lspace="0.278em" rspace="0.498em" xref="S3.SS1.p3.9.m9.1.1.1.cmml">:</mo><mrow id="S3.SS1.p3.9.m9.1.1.3" xref="S3.SS1.p3.9.m9.1.1.3.cmml"><mrow id="S3.SS1.p3.9.m9.1.1.3.2" xref="S3.SS1.p3.9.m9.1.1.3.2.cmml"><mo id="S3.SS1.p3.9.m9.1.1.3.2.1" rspace="0.167em" xref="S3.SS1.p3.9.m9.1.1.3.2.1.cmml">∃</mo><msub id="S3.SS1.p3.9.m9.1.1.3.2.2" xref="S3.SS1.p3.9.m9.1.1.3.2.2.cmml"><mi id="S3.SS1.p3.9.m9.1.1.3.2.2.2" xref="S3.SS1.p3.9.m9.1.1.3.2.2.2.cmml">q</mi><mi id="S3.SS1.p3.9.m9.1.1.3.2.2.3" xref="S3.SS1.p3.9.m9.1.1.3.2.2.3.cmml">i</mi></msub></mrow><mo id="S3.SS1.p3.9.m9.1.1.3.3" xref="S3.SS1.p3.9.m9.1.1.3.3.cmml">∈</mo><mrow id="S3.SS1.p3.9.m9.1.1.3.4" xref="S3.SS1.p3.9.m9.1.1.3.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p3.9.m9.1.1.3.4.2" xref="S3.SS1.p3.9.m9.1.1.3.4.2.cmml">𝒬</mi><mo id="S3.SS1.p3.9.m9.1.1.3.4.1" xref="S3.SS1.p3.9.m9.1.1.3.4.1.cmml">⁢</mo><mtext id="S3.SS1.p3.9.m9.1.1.3.4.3" xref="S3.SS1.p3.9.m9.1.1.3.4.3a.cmml"> s.t. </mtext><mo id="S3.SS1.p3.9.m9.1.1.3.4.1a" xref="S3.SS1.p3.9.m9.1.1.3.4.1.cmml">⁢</mo><msub id="S3.SS1.p3.9.m9.1.1.3.4.4" xref="S3.SS1.p3.9.m9.1.1.3.4.4.cmml"><mi id="S3.SS1.p3.9.m9.1.1.3.4.4.2" xref="S3.SS1.p3.9.m9.1.1.3.4.4.2.cmml">A</mi><mrow id="S3.SS1.p3.9.m9.1.1.3.4.4.3" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.cmml"><mi id="S3.SS1.p3.9.m9.1.1.3.4.4.3.2" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.2.cmml">i</mi><mo id="S3.SS1.p3.9.m9.1.1.3.4.4.3.1" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.1.cmml">⁢</mo><mi id="S3.SS1.p3.9.m9.1.1.3.4.4.3.3" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.3.cmml">j</mi></mrow></msub></mrow><mo id="S3.SS1.p3.9.m9.1.1.3.5" xref="S3.SS1.p3.9.m9.1.1.3.5.cmml">=</mo><mn id="S3.SS1.p3.9.m9.1.1.3.6" xref="S3.SS1.p3.9.m9.1.1.3.6.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.9.m9.1b"><apply id="S3.SS1.p3.9.m9.1.1.cmml" xref="S3.SS1.p3.9.m9.1.1"><ci id="S3.SS1.p3.9.m9.1.1.1.cmml" xref="S3.SS1.p3.9.m9.1.1.1">:</ci><apply id="S3.SS1.p3.9.m9.1.1.2.cmml" xref="S3.SS1.p3.9.m9.1.1.2"><in id="S3.SS1.p3.9.m9.1.1.2.1.cmml" xref="S3.SS1.p3.9.m9.1.1.2.1"></in><apply id="S3.SS1.p3.9.m9.1.1.2.2.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2"><csymbol cd="latexml" id="S3.SS1.p3.9.m9.1.1.2.2.1.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2.1">for-all</csymbol><apply id="S3.SS1.p3.9.m9.1.1.2.2.2.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p3.9.m9.1.1.2.2.2.1.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2.2">subscript</csymbol><ci id="S3.SS1.p3.9.m9.1.1.2.2.2.2.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2.2.2">𝑐</ci><ci id="S3.SS1.p3.9.m9.1.1.2.2.2.3.cmml" xref="S3.SS1.p3.9.m9.1.1.2.2.2.3">𝑗</ci></apply></apply><ci id="S3.SS1.p3.9.m9.1.1.2.3.cmml" xref="S3.SS1.p3.9.m9.1.1.2.3">𝒞</ci></apply><apply id="S3.SS1.p3.9.m9.1.1.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3"><and id="S3.SS1.p3.9.m9.1.1.3a.cmml" xref="S3.SS1.p3.9.m9.1.1.3"></and><apply id="S3.SS1.p3.9.m9.1.1.3b.cmml" xref="S3.SS1.p3.9.m9.1.1.3"><in id="S3.SS1.p3.9.m9.1.1.3.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3.3"></in><apply id="S3.SS1.p3.9.m9.1.1.3.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2"><exists id="S3.SS1.p3.9.m9.1.1.3.2.1.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2.1"></exists><apply id="S3.SS1.p3.9.m9.1.1.3.2.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2.2"><csymbol cd="ambiguous" id="S3.SS1.p3.9.m9.1.1.3.2.2.1.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2.2">subscript</csymbol><ci id="S3.SS1.p3.9.m9.1.1.3.2.2.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2.2.2">𝑞</ci><ci id="S3.SS1.p3.9.m9.1.1.3.2.2.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3.2.2.3">𝑖</ci></apply></apply><apply id="S3.SS1.p3.9.m9.1.1.3.4.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4"><times id="S3.SS1.p3.9.m9.1.1.3.4.1.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.1"></times><ci id="S3.SS1.p3.9.m9.1.1.3.4.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.2">𝒬</ci><ci id="S3.SS1.p3.9.m9.1.1.3.4.3a.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.3"><mtext id="S3.SS1.p3.9.m9.1.1.3.4.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.3"> s.t. </mtext></ci><apply id="S3.SS1.p3.9.m9.1.1.3.4.4.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4"><csymbol cd="ambiguous" id="S3.SS1.p3.9.m9.1.1.3.4.4.1.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4">subscript</csymbol><ci id="S3.SS1.p3.9.m9.1.1.3.4.4.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4.2">𝐴</ci><apply id="S3.SS1.p3.9.m9.1.1.3.4.4.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3"><times id="S3.SS1.p3.9.m9.1.1.3.4.4.3.1.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.1"></times><ci id="S3.SS1.p3.9.m9.1.1.3.4.4.3.2.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.2">𝑖</ci><ci id="S3.SS1.p3.9.m9.1.1.3.4.4.3.3.cmml" xref="S3.SS1.p3.9.m9.1.1.3.4.4.3.3">𝑗</ci></apply></apply></apply></apply><apply id="S3.SS1.p3.9.m9.1.1.3c.cmml" xref="S3.SS1.p3.9.m9.1.1.3"><eq id="S3.SS1.p3.9.m9.1.1.3.5.cmml" xref="S3.SS1.p3.9.m9.1.1.3.5"></eq><share href="https://arxiv.org/html/2407.18044v1#S3.SS1.p3.9.m9.1.1.3.4.cmml" id="S3.SS1.p3.9.m9.1.1.3d.cmml" xref="S3.SS1.p3.9.m9.1.1.3"></share><cn id="S3.SS1.p3.9.m9.1.1.3.6.cmml" type="integer" xref="S3.SS1.p3.9.m9.1.1.3.6">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.9.m9.1c">\forall c_{j}\in\mathcal{C}:\&gt;\exists q_{i}\in\mathcal{Q}\text{ s.t. }A_{ij}=1</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.9.m9.1d">∀ italic_c start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ∈ caligraphic_C : ∃ italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ caligraphic_Q s.t. italic_A start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT = 1</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p4">
<p class="ltx_p" id="S3.SS1.p4.8">For a new user question <math alttext="q_{0}" class="ltx_Math" display="inline" id="S3.SS1.p4.1.m1.1"><semantics id="S3.SS1.p4.1.m1.1a"><msub id="S3.SS1.p4.1.m1.1.1" xref="S3.SS1.p4.1.m1.1.1.cmml"><mi id="S3.SS1.p4.1.m1.1.1.2" xref="S3.SS1.p4.1.m1.1.1.2.cmml">q</mi><mn id="S3.SS1.p4.1.m1.1.1.3" xref="S3.SS1.p4.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.1.m1.1b"><apply id="S3.SS1.p4.1.m1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.1.m1.1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p4.1.m1.1.1.2.cmml" xref="S3.SS1.p4.1.m1.1.1.2">𝑞</ci><cn id="S3.SS1.p4.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.p4.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.1.m1.1c">q_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.1.m1.1d">italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, traditional RAG systems retrieve content that maximize some measure of similarity <math alttext="\arg\max_{c\in\mathcal{C}}{c^{t}q_{0}}" class="ltx_Math" display="inline" id="S3.SS1.p4.2.m2.1"><semantics id="S3.SS1.p4.2.m2.1a"><mrow id="S3.SS1.p4.2.m2.1.1" xref="S3.SS1.p4.2.m2.1.1.cmml"><mi id="S3.SS1.p4.2.m2.1.1.1" xref="S3.SS1.p4.2.m2.1.1.1.cmml">arg</mi><mo id="S3.SS1.p4.2.m2.1.1a" lspace="0.167em" xref="S3.SS1.p4.2.m2.1.1.cmml">⁡</mo><mrow id="S3.SS1.p4.2.m2.1.1.2" xref="S3.SS1.p4.2.m2.1.1.2.cmml"><msub id="S3.SS1.p4.2.m2.1.1.2.1" xref="S3.SS1.p4.2.m2.1.1.2.1.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2.1.2" xref="S3.SS1.p4.2.m2.1.1.2.1.2.cmml">max</mi><mrow id="S3.SS1.p4.2.m2.1.1.2.1.3" xref="S3.SS1.p4.2.m2.1.1.2.1.3.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2.1.3.2" xref="S3.SS1.p4.2.m2.1.1.2.1.3.2.cmml">c</mi><mo id="S3.SS1.p4.2.m2.1.1.2.1.3.1" xref="S3.SS1.p4.2.m2.1.1.2.1.3.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.2.m2.1.1.2.1.3.3" xref="S3.SS1.p4.2.m2.1.1.2.1.3.3.cmml">𝒞</mi></mrow></msub><mo id="S3.SS1.p4.2.m2.1.1.2a" lspace="0.167em" xref="S3.SS1.p4.2.m2.1.1.2.cmml">⁡</mo><mrow id="S3.SS1.p4.2.m2.1.1.2.2" xref="S3.SS1.p4.2.m2.1.1.2.2.cmml"><msup id="S3.SS1.p4.2.m2.1.1.2.2.2" xref="S3.SS1.p4.2.m2.1.1.2.2.2.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2.2.2.2" xref="S3.SS1.p4.2.m2.1.1.2.2.2.2.cmml">c</mi><mi id="S3.SS1.p4.2.m2.1.1.2.2.2.3" xref="S3.SS1.p4.2.m2.1.1.2.2.2.3.cmml">t</mi></msup><mo id="S3.SS1.p4.2.m2.1.1.2.2.1" xref="S3.SS1.p4.2.m2.1.1.2.2.1.cmml">⁢</mo><msub id="S3.SS1.p4.2.m2.1.1.2.2.3" xref="S3.SS1.p4.2.m2.1.1.2.2.3.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2.2.3.2" xref="S3.SS1.p4.2.m2.1.1.2.2.3.2.cmml">q</mi><mn id="S3.SS1.p4.2.m2.1.1.2.2.3.3" xref="S3.SS1.p4.2.m2.1.1.2.2.3.3.cmml">0</mn></msub></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.2.m2.1b"><apply id="S3.SS1.p4.2.m2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1"><arg id="S3.SS1.p4.2.m2.1.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1.1"></arg><apply id="S3.SS1.p4.2.m2.1.1.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2"><apply id="S3.SS1.p4.2.m2.1.1.2.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.1.1.2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1">subscript</csymbol><max id="S3.SS1.p4.2.m2.1.1.2.1.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1.2"></max><apply id="S3.SS1.p4.2.m2.1.1.2.1.3.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1.3"><in id="S3.SS1.p4.2.m2.1.1.2.1.3.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1.3.1"></in><ci id="S3.SS1.p4.2.m2.1.1.2.1.3.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1.3.2">𝑐</ci><ci id="S3.SS1.p4.2.m2.1.1.2.1.3.3.cmml" xref="S3.SS1.p4.2.m2.1.1.2.1.3.3">𝒞</ci></apply></apply><apply id="S3.SS1.p4.2.m2.1.1.2.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2"><times id="S3.SS1.p4.2.m2.1.1.2.2.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.1"></times><apply id="S3.SS1.p4.2.m2.1.1.2.2.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.1.1.2.2.2.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.2">superscript</csymbol><ci id="S3.SS1.p4.2.m2.1.1.2.2.2.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.2.2">𝑐</ci><ci id="S3.SS1.p4.2.m2.1.1.2.2.2.3.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.2.3">𝑡</ci></apply><apply id="S3.SS1.p4.2.m2.1.1.2.2.3.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.3"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.1.1.2.2.3.1.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.3">subscript</csymbol><ci id="S3.SS1.p4.2.m2.1.1.2.2.3.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2.2.3.2">𝑞</ci><cn id="S3.SS1.p4.2.m2.1.1.2.2.3.3.cmml" type="integer" xref="S3.SS1.p4.2.m2.1.1.2.2.3.3">0</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.2.m2.1c">\arg\max_{c\in\mathcal{C}}{c^{t}q_{0}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.2.m2.1d">roman_arg roman_max start_POSTSUBSCRIPT italic_c ∈ caligraphic_C end_POSTSUBSCRIPT italic_c start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> (or equivalently <math alttext="\arg\min_{c\in\mathcal{C}}d(c,q_{0})" class="ltx_Math" display="inline" id="S3.SS1.p4.3.m3.2"><semantics id="S3.SS1.p4.3.m3.2a"><mrow id="S3.SS1.p4.3.m3.2.2" xref="S3.SS1.p4.3.m3.2.2.cmml"><mrow id="S3.SS1.p4.3.m3.2.2.3" xref="S3.SS1.p4.3.m3.2.2.3.cmml"><mi id="S3.SS1.p4.3.m3.2.2.3.1" xref="S3.SS1.p4.3.m3.2.2.3.1.cmml">arg</mi><mo id="S3.SS1.p4.3.m3.2.2.3a" lspace="0.167em" xref="S3.SS1.p4.3.m3.2.2.3.cmml">⁡</mo><mrow id="S3.SS1.p4.3.m3.2.2.3.2" xref="S3.SS1.p4.3.m3.2.2.3.2.cmml"><msub id="S3.SS1.p4.3.m3.2.2.3.2.1" xref="S3.SS1.p4.3.m3.2.2.3.2.1.cmml"><mi id="S3.SS1.p4.3.m3.2.2.3.2.1.2" xref="S3.SS1.p4.3.m3.2.2.3.2.1.2.cmml">min</mi><mrow id="S3.SS1.p4.3.m3.2.2.3.2.1.3" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.cmml"><mi id="S3.SS1.p4.3.m3.2.2.3.2.1.3.2" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.2.cmml">c</mi><mo id="S3.SS1.p4.3.m3.2.2.3.2.1.3.1" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.3.m3.2.2.3.2.1.3.3" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.3.cmml">𝒞</mi></mrow></msub><mo id="S3.SS1.p4.3.m3.2.2.3.2a" lspace="0.167em" xref="S3.SS1.p4.3.m3.2.2.3.2.cmml">⁡</mo><mi id="S3.SS1.p4.3.m3.2.2.3.2.2" xref="S3.SS1.p4.3.m3.2.2.3.2.2.cmml">d</mi></mrow></mrow><mo id="S3.SS1.p4.3.m3.2.2.2" xref="S3.SS1.p4.3.m3.2.2.2.cmml">⁢</mo><mrow id="S3.SS1.p4.3.m3.2.2.1.1" xref="S3.SS1.p4.3.m3.2.2.1.2.cmml"><mo id="S3.SS1.p4.3.m3.2.2.1.1.2" stretchy="false" xref="S3.SS1.p4.3.m3.2.2.1.2.cmml">(</mo><mi id="S3.SS1.p4.3.m3.1.1" xref="S3.SS1.p4.3.m3.1.1.cmml">c</mi><mo id="S3.SS1.p4.3.m3.2.2.1.1.3" xref="S3.SS1.p4.3.m3.2.2.1.2.cmml">,</mo><msub id="S3.SS1.p4.3.m3.2.2.1.1.1" xref="S3.SS1.p4.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS1.p4.3.m3.2.2.1.1.1.2" xref="S3.SS1.p4.3.m3.2.2.1.1.1.2.cmml">q</mi><mn id="S3.SS1.p4.3.m3.2.2.1.1.1.3" xref="S3.SS1.p4.3.m3.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS1.p4.3.m3.2.2.1.1.4" stretchy="false" xref="S3.SS1.p4.3.m3.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.3.m3.2b"><apply id="S3.SS1.p4.3.m3.2.2.cmml" xref="S3.SS1.p4.3.m3.2.2"><times id="S3.SS1.p4.3.m3.2.2.2.cmml" xref="S3.SS1.p4.3.m3.2.2.2"></times><apply id="S3.SS1.p4.3.m3.2.2.3.cmml" xref="S3.SS1.p4.3.m3.2.2.3"><arg id="S3.SS1.p4.3.m3.2.2.3.1.cmml" xref="S3.SS1.p4.3.m3.2.2.3.1"></arg><apply id="S3.SS1.p4.3.m3.2.2.3.2.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2"><apply id="S3.SS1.p4.3.m3.2.2.3.2.1.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1"><csymbol cd="ambiguous" id="S3.SS1.p4.3.m3.2.2.3.2.1.1.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1">subscript</csymbol><min id="S3.SS1.p4.3.m3.2.2.3.2.1.2.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1.2"></min><apply id="S3.SS1.p4.3.m3.2.2.3.2.1.3.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3"><in id="S3.SS1.p4.3.m3.2.2.3.2.1.3.1.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.1"></in><ci id="S3.SS1.p4.3.m3.2.2.3.2.1.3.2.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.2">𝑐</ci><ci id="S3.SS1.p4.3.m3.2.2.3.2.1.3.3.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.1.3.3">𝒞</ci></apply></apply><ci id="S3.SS1.p4.3.m3.2.2.3.2.2.cmml" xref="S3.SS1.p4.3.m3.2.2.3.2.2">𝑑</ci></apply></apply><interval closure="open" id="S3.SS1.p4.3.m3.2.2.1.2.cmml" xref="S3.SS1.p4.3.m3.2.2.1.1"><ci id="S3.SS1.p4.3.m3.1.1.cmml" xref="S3.SS1.p4.3.m3.1.1">𝑐</ci><apply id="S3.SS1.p4.3.m3.2.2.1.1.1.cmml" xref="S3.SS1.p4.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS1.p4.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p4.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS1.p4.3.m3.2.2.1.1.1.2">𝑞</ci><cn id="S3.SS1.p4.3.m3.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p4.3.m3.2.2.1.1.1.3">0</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.3.m3.2c">\arg\min_{c\in\mathcal{C}}d(c,q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.3.m3.2d">roman_arg roman_min start_POSTSUBSCRIPT italic_c ∈ caligraphic_C end_POSTSUBSCRIPT italic_d ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>). More advanced RAG systems rely on a specific functional form <math alttext="f" class="ltx_Math" display="inline" id="S3.SS1.p4.4.m4.1"><semantics id="S3.SS1.p4.4.m4.1a"><mi id="S3.SS1.p4.4.m4.1.1" xref="S3.SS1.p4.4.m4.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.4.m4.1b"><ci id="S3.SS1.p4.4.m4.1.1.cmml" xref="S3.SS1.p4.4.m4.1.1">𝑓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.4.m4.1c">f</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.4.m4.1d">italic_f</annotation></semantics></math>, ideally aligned with the objective of downstream generation and retrieves content maximizing <math alttext="\arg\max_{c\in\mathcal{C}}f({c^{t},q_{0}})" class="ltx_Math" display="inline" id="S3.SS1.p4.5.m5.2"><semantics id="S3.SS1.p4.5.m5.2a"><mrow id="S3.SS1.p4.5.m5.2.2" xref="S3.SS1.p4.5.m5.2.2.cmml"><mrow id="S3.SS1.p4.5.m5.2.2.4" xref="S3.SS1.p4.5.m5.2.2.4.cmml"><mi id="S3.SS1.p4.5.m5.2.2.4.1" xref="S3.SS1.p4.5.m5.2.2.4.1.cmml">arg</mi><mo id="S3.SS1.p4.5.m5.2.2.4a" lspace="0.167em" xref="S3.SS1.p4.5.m5.2.2.4.cmml">⁡</mo><mrow id="S3.SS1.p4.5.m5.2.2.4.2" xref="S3.SS1.p4.5.m5.2.2.4.2.cmml"><msub id="S3.SS1.p4.5.m5.2.2.4.2.1" xref="S3.SS1.p4.5.m5.2.2.4.2.1.cmml"><mi id="S3.SS1.p4.5.m5.2.2.4.2.1.2" xref="S3.SS1.p4.5.m5.2.2.4.2.1.2.cmml">max</mi><mrow id="S3.SS1.p4.5.m5.2.2.4.2.1.3" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.cmml"><mi id="S3.SS1.p4.5.m5.2.2.4.2.1.3.2" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.2.cmml">c</mi><mo id="S3.SS1.p4.5.m5.2.2.4.2.1.3.1" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.5.m5.2.2.4.2.1.3.3" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.3.cmml">𝒞</mi></mrow></msub><mo id="S3.SS1.p4.5.m5.2.2.4.2a" lspace="0.167em" xref="S3.SS1.p4.5.m5.2.2.4.2.cmml">⁡</mo><mi id="S3.SS1.p4.5.m5.2.2.4.2.2" xref="S3.SS1.p4.5.m5.2.2.4.2.2.cmml">f</mi></mrow></mrow><mo id="S3.SS1.p4.5.m5.2.2.3" xref="S3.SS1.p4.5.m5.2.2.3.cmml">⁢</mo><mrow id="S3.SS1.p4.5.m5.2.2.2.2" xref="S3.SS1.p4.5.m5.2.2.2.3.cmml"><mo id="S3.SS1.p4.5.m5.2.2.2.2.3" stretchy="false" xref="S3.SS1.p4.5.m5.2.2.2.3.cmml">(</mo><msup id="S3.SS1.p4.5.m5.1.1.1.1.1" xref="S3.SS1.p4.5.m5.1.1.1.1.1.cmml"><mi id="S3.SS1.p4.5.m5.1.1.1.1.1.2" xref="S3.SS1.p4.5.m5.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS1.p4.5.m5.1.1.1.1.1.3" xref="S3.SS1.p4.5.m5.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p4.5.m5.2.2.2.2.4" xref="S3.SS1.p4.5.m5.2.2.2.3.cmml">,</mo><msub id="S3.SS1.p4.5.m5.2.2.2.2.2" xref="S3.SS1.p4.5.m5.2.2.2.2.2.cmml"><mi id="S3.SS1.p4.5.m5.2.2.2.2.2.2" xref="S3.SS1.p4.5.m5.2.2.2.2.2.2.cmml">q</mi><mn id="S3.SS1.p4.5.m5.2.2.2.2.2.3" xref="S3.SS1.p4.5.m5.2.2.2.2.2.3.cmml">0</mn></msub><mo id="S3.SS1.p4.5.m5.2.2.2.2.5" stretchy="false" xref="S3.SS1.p4.5.m5.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.5.m5.2b"><apply id="S3.SS1.p4.5.m5.2.2.cmml" xref="S3.SS1.p4.5.m5.2.2"><times id="S3.SS1.p4.5.m5.2.2.3.cmml" xref="S3.SS1.p4.5.m5.2.2.3"></times><apply id="S3.SS1.p4.5.m5.2.2.4.cmml" xref="S3.SS1.p4.5.m5.2.2.4"><arg id="S3.SS1.p4.5.m5.2.2.4.1.cmml" xref="S3.SS1.p4.5.m5.2.2.4.1"></arg><apply id="S3.SS1.p4.5.m5.2.2.4.2.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2"><apply id="S3.SS1.p4.5.m5.2.2.4.2.1.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1"><csymbol cd="ambiguous" id="S3.SS1.p4.5.m5.2.2.4.2.1.1.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1">subscript</csymbol><max id="S3.SS1.p4.5.m5.2.2.4.2.1.2.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1.2"></max><apply id="S3.SS1.p4.5.m5.2.2.4.2.1.3.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3"><in id="S3.SS1.p4.5.m5.2.2.4.2.1.3.1.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.1"></in><ci id="S3.SS1.p4.5.m5.2.2.4.2.1.3.2.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.2">𝑐</ci><ci id="S3.SS1.p4.5.m5.2.2.4.2.1.3.3.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.1.3.3">𝒞</ci></apply></apply><ci id="S3.SS1.p4.5.m5.2.2.4.2.2.cmml" xref="S3.SS1.p4.5.m5.2.2.4.2.2">𝑓</ci></apply></apply><interval closure="open" id="S3.SS1.p4.5.m5.2.2.2.3.cmml" xref="S3.SS1.p4.5.m5.2.2.2.2"><apply id="S3.SS1.p4.5.m5.1.1.1.1.1.cmml" xref="S3.SS1.p4.5.m5.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.5.m5.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.5.m5.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p4.5.m5.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.5.m5.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS1.p4.5.m5.1.1.1.1.1.3.cmml" xref="S3.SS1.p4.5.m5.1.1.1.1.1.3">𝑡</ci></apply><apply id="S3.SS1.p4.5.m5.2.2.2.2.2.cmml" xref="S3.SS1.p4.5.m5.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p4.5.m5.2.2.2.2.2.1.cmml" xref="S3.SS1.p4.5.m5.2.2.2.2.2">subscript</csymbol><ci id="S3.SS1.p4.5.m5.2.2.2.2.2.2.cmml" xref="S3.SS1.p4.5.m5.2.2.2.2.2.2">𝑞</ci><cn id="S3.SS1.p4.5.m5.2.2.2.2.2.3.cmml" type="integer" xref="S3.SS1.p4.5.m5.2.2.2.2.2.3">0</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.5.m5.2c">\arg\max_{c\in\mathcal{C}}f({c^{t},q_{0}})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.5.m5.2d">roman_arg roman_max start_POSTSUBSCRIPT italic_c ∈ caligraphic_C end_POSTSUBSCRIPT italic_f ( italic_c start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>.
We acknowledge that in general, even for traditional RAGs, retrieving such a content may be challenging especially for very large content bases. This has led to various key highly efficient retrieval algorithms (e.g. ScaNN<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>
<a class="ltx_ref ltx_url ltx_font_typewriter" href="https://blog.research.google/2020/07/announcing-scann-efficient-vector.html" title="">https://blog.research.google/2020/07/announcing-scann-efficient-vector.html</a>
</span></span></span>), and our work takes the above as a solved problem. Further in RAG systems, we usually retrieve a subset <math alttext="\mathcal{S}\subset\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS1.p4.6.m6.1"><semantics id="S3.SS1.p4.6.m6.1a"><mrow id="S3.SS1.p4.6.m6.1.1" xref="S3.SS1.p4.6.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.6.m6.1.1.2" xref="S3.SS1.p4.6.m6.1.1.2.cmml">𝒮</mi><mo id="S3.SS1.p4.6.m6.1.1.1" xref="S3.SS1.p4.6.m6.1.1.1.cmml">⊂</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.6.m6.1.1.3" xref="S3.SS1.p4.6.m6.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.6.m6.1b"><apply id="S3.SS1.p4.6.m6.1.1.cmml" xref="S3.SS1.p4.6.m6.1.1"><subset id="S3.SS1.p4.6.m6.1.1.1.cmml" xref="S3.SS1.p4.6.m6.1.1.1"></subset><ci id="S3.SS1.p4.6.m6.1.1.2.cmml" xref="S3.SS1.p4.6.m6.1.1.2">𝒮</ci><ci id="S3.SS1.p4.6.m6.1.1.3.cmml" xref="S3.SS1.p4.6.m6.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.6.m6.1c">\mathcal{S}\subset\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.6.m6.1d">caligraphic_S ⊂ caligraphic_C</annotation></semantics></math> content pieces of size <math alttext="\lvert\mathcal{S}\rvert=k" class="ltx_Math" display="inline" id="S3.SS1.p4.7.m7.1"><semantics id="S3.SS1.p4.7.m7.1a"><mrow id="S3.SS1.p4.7.m7.1.2" xref="S3.SS1.p4.7.m7.1.2.cmml"><mrow id="S3.SS1.p4.7.m7.1.2.2.2" xref="S3.SS1.p4.7.m7.1.2.2.1.cmml"><mo id="S3.SS1.p4.7.m7.1.2.2.2.1" stretchy="false" xref="S3.SS1.p4.7.m7.1.2.2.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.7.m7.1.1" xref="S3.SS1.p4.7.m7.1.1.cmml">𝒮</mi><mo id="S3.SS1.p4.7.m7.1.2.2.2.2" stretchy="false" xref="S3.SS1.p4.7.m7.1.2.2.1.1.cmml">|</mo></mrow><mo id="S3.SS1.p4.7.m7.1.2.1" xref="S3.SS1.p4.7.m7.1.2.1.cmml">=</mo><mi id="S3.SS1.p4.7.m7.1.2.3" xref="S3.SS1.p4.7.m7.1.2.3.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.7.m7.1b"><apply id="S3.SS1.p4.7.m7.1.2.cmml" xref="S3.SS1.p4.7.m7.1.2"><eq id="S3.SS1.p4.7.m7.1.2.1.cmml" xref="S3.SS1.p4.7.m7.1.2.1"></eq><apply id="S3.SS1.p4.7.m7.1.2.2.1.cmml" xref="S3.SS1.p4.7.m7.1.2.2.2"><abs id="S3.SS1.p4.7.m7.1.2.2.1.1.cmml" xref="S3.SS1.p4.7.m7.1.2.2.2.1"></abs><ci id="S3.SS1.p4.7.m7.1.1.cmml" xref="S3.SS1.p4.7.m7.1.1">𝒮</ci></apply><ci id="S3.SS1.p4.7.m7.1.2.3.cmml" xref="S3.SS1.p4.7.m7.1.2.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.7.m7.1c">\lvert\mathcal{S}\rvert=k</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.7.m7.1d">| caligraphic_S | = italic_k</annotation></semantics></math> solving
<math alttext="\arg\min_{\mathcal{S}}\sum_{c\in\mathcal{S}}{d(c,q_{0})}" class="ltx_Math" display="inline" id="S3.SS1.p4.8.m8.2"><semantics id="S3.SS1.p4.8.m8.2a"><mrow id="S3.SS1.p4.8.m8.2.2" xref="S3.SS1.p4.8.m8.2.2.cmml"><mrow id="S3.SS1.p4.8.m8.2.2.3" xref="S3.SS1.p4.8.m8.2.2.3.cmml"><mi id="S3.SS1.p4.8.m8.2.2.3.1" xref="S3.SS1.p4.8.m8.2.2.3.1.cmml">arg</mi><mo id="S3.SS1.p4.8.m8.2.2.3a" lspace="0.167em" xref="S3.SS1.p4.8.m8.2.2.3.cmml">⁡</mo><msub id="S3.SS1.p4.8.m8.2.2.3.2" xref="S3.SS1.p4.8.m8.2.2.3.2.cmml"><mi id="S3.SS1.p4.8.m8.2.2.3.2.2" xref="S3.SS1.p4.8.m8.2.2.3.2.2.cmml">min</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.8.m8.2.2.3.2.3" xref="S3.SS1.p4.8.m8.2.2.3.2.3.cmml">𝒮</mi></msub></mrow><mo id="S3.SS1.p4.8.m8.2.2.2" xref="S3.SS1.p4.8.m8.2.2.2.cmml">⁢</mo><mrow id="S3.SS1.p4.8.m8.2.2.1" xref="S3.SS1.p4.8.m8.2.2.1.cmml"><msub id="S3.SS1.p4.8.m8.2.2.1.2" xref="S3.SS1.p4.8.m8.2.2.1.2.cmml"><mo id="S3.SS1.p4.8.m8.2.2.1.2.2" xref="S3.SS1.p4.8.m8.2.2.1.2.2.cmml">∑</mo><mrow id="S3.SS1.p4.8.m8.2.2.1.2.3" xref="S3.SS1.p4.8.m8.2.2.1.2.3.cmml"><mi id="S3.SS1.p4.8.m8.2.2.1.2.3.2" xref="S3.SS1.p4.8.m8.2.2.1.2.3.2.cmml">c</mi><mo id="S3.SS1.p4.8.m8.2.2.1.2.3.1" xref="S3.SS1.p4.8.m8.2.2.1.2.3.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p4.8.m8.2.2.1.2.3.3" xref="S3.SS1.p4.8.m8.2.2.1.2.3.3.cmml">𝒮</mi></mrow></msub><mrow id="S3.SS1.p4.8.m8.2.2.1.1" xref="S3.SS1.p4.8.m8.2.2.1.1.cmml"><mi id="S3.SS1.p4.8.m8.2.2.1.1.3" xref="S3.SS1.p4.8.m8.2.2.1.1.3.cmml">d</mi><mo id="S3.SS1.p4.8.m8.2.2.1.1.2" xref="S3.SS1.p4.8.m8.2.2.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p4.8.m8.2.2.1.1.1.1" xref="S3.SS1.p4.8.m8.2.2.1.1.1.2.cmml"><mo id="S3.SS1.p4.8.m8.2.2.1.1.1.1.2" stretchy="false" xref="S3.SS1.p4.8.m8.2.2.1.1.1.2.cmml">(</mo><mi id="S3.SS1.p4.8.m8.1.1" xref="S3.SS1.p4.8.m8.1.1.cmml">c</mi><mo id="S3.SS1.p4.8.m8.2.2.1.1.1.1.3" xref="S3.SS1.p4.8.m8.2.2.1.1.1.2.cmml">,</mo><msub id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.cmml"><mi id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.2" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.2.cmml">q</mi><mn id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.3" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS1.p4.8.m8.2.2.1.1.1.1.4" stretchy="false" xref="S3.SS1.p4.8.m8.2.2.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.8.m8.2b"><apply id="S3.SS1.p4.8.m8.2.2.cmml" xref="S3.SS1.p4.8.m8.2.2"><times id="S3.SS1.p4.8.m8.2.2.2.cmml" xref="S3.SS1.p4.8.m8.2.2.2"></times><apply id="S3.SS1.p4.8.m8.2.2.3.cmml" xref="S3.SS1.p4.8.m8.2.2.3"><arg id="S3.SS1.p4.8.m8.2.2.3.1.cmml" xref="S3.SS1.p4.8.m8.2.2.3.1"></arg><apply id="S3.SS1.p4.8.m8.2.2.3.2.cmml" xref="S3.SS1.p4.8.m8.2.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p4.8.m8.2.2.3.2.1.cmml" xref="S3.SS1.p4.8.m8.2.2.3.2">subscript</csymbol><min id="S3.SS1.p4.8.m8.2.2.3.2.2.cmml" xref="S3.SS1.p4.8.m8.2.2.3.2.2"></min><ci id="S3.SS1.p4.8.m8.2.2.3.2.3.cmml" xref="S3.SS1.p4.8.m8.2.2.3.2.3">𝒮</ci></apply></apply><apply id="S3.SS1.p4.8.m8.2.2.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1"><apply id="S3.SS1.p4.8.m8.2.2.1.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2"><csymbol cd="ambiguous" id="S3.SS1.p4.8.m8.2.2.1.2.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2">subscript</csymbol><sum id="S3.SS1.p4.8.m8.2.2.1.2.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2.2"></sum><apply id="S3.SS1.p4.8.m8.2.2.1.2.3.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2.3"><in id="S3.SS1.p4.8.m8.2.2.1.2.3.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2.3.1"></in><ci id="S3.SS1.p4.8.m8.2.2.1.2.3.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2.3.2">𝑐</ci><ci id="S3.SS1.p4.8.m8.2.2.1.2.3.3.cmml" xref="S3.SS1.p4.8.m8.2.2.1.2.3.3">𝒮</ci></apply></apply><apply id="S3.SS1.p4.8.m8.2.2.1.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1"><times id="S3.SS1.p4.8.m8.2.2.1.1.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.2"></times><ci id="S3.SS1.p4.8.m8.2.2.1.1.3.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.3">𝑑</ci><interval closure="open" id="S3.SS1.p4.8.m8.2.2.1.1.1.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1"><ci id="S3.SS1.p4.8.m8.1.1.cmml" xref="S3.SS1.p4.8.m8.1.1">𝑐</ci><apply id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.2">𝑞</ci><cn id="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS1.p4.8.m8.2.2.1.1.1.1.1.3">0</cn></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.8.m8.2c">\arg\min_{\mathcal{S}}\sum_{c\in\mathcal{S}}{d(c,q_{0})}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.8.m8.2d">roman_arg roman_min start_POSTSUBSCRIPT caligraphic_S end_POSTSUBSCRIPT ∑ start_POSTSUBSCRIPT italic_c ∈ caligraphic_S end_POSTSUBSCRIPT italic_d ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>. Oftentimes, different retrieval methods encourage the retrieved set to be diverse to improve the downstream retrieval; these ad-hoc methods are not the focus of our work.</p>
</div>
<div class="ltx_para" id="S3.SS1.p5">
<p class="ltx_p" id="S3.SS1.p5.3">For simplicity in our mathematical formulation, we will assume the retrieval to mean a single piece of content in this section, where RAG retrieves the most similar content to the incoming user query.
We use Google’s <span class="ltx_text ltx_font_typewriter" id="S3.SS1.p5.3.1">textembedding-gecko</span> in the current work for generating embeddings. We denote the embedding matrices for content base and questions, respectively, with capital letters <math alttext="C\in\mathbb{R}^{d\times M}" class="ltx_Math" display="inline" id="S3.SS1.p5.1.m1.1"><semantics id="S3.SS1.p5.1.m1.1a"><mrow id="S3.SS1.p5.1.m1.1.1" xref="S3.SS1.p5.1.m1.1.1.cmml"><mi id="S3.SS1.p5.1.m1.1.1.2" xref="S3.SS1.p5.1.m1.1.1.2.cmml">C</mi><mo id="S3.SS1.p5.1.m1.1.1.1" xref="S3.SS1.p5.1.m1.1.1.1.cmml">∈</mo><msup id="S3.SS1.p5.1.m1.1.1.3" xref="S3.SS1.p5.1.m1.1.1.3.cmml"><mi id="S3.SS1.p5.1.m1.1.1.3.2" xref="S3.SS1.p5.1.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS1.p5.1.m1.1.1.3.3" xref="S3.SS1.p5.1.m1.1.1.3.3.cmml"><mi id="S3.SS1.p5.1.m1.1.1.3.3.2" xref="S3.SS1.p5.1.m1.1.1.3.3.2.cmml">d</mi><mo id="S3.SS1.p5.1.m1.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p5.1.m1.1.1.3.3.1.cmml">×</mo><mi id="S3.SS1.p5.1.m1.1.1.3.3.3" xref="S3.SS1.p5.1.m1.1.1.3.3.3.cmml">M</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.1.m1.1b"><apply id="S3.SS1.p5.1.m1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1"><in id="S3.SS1.p5.1.m1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1.1"></in><ci id="S3.SS1.p5.1.m1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.1.1.2">𝐶</ci><apply id="S3.SS1.p5.1.m1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.1.1.3.1.cmml" xref="S3.SS1.p5.1.m1.1.1.3">superscript</csymbol><ci id="S3.SS1.p5.1.m1.1.1.3.2.cmml" xref="S3.SS1.p5.1.m1.1.1.3.2">ℝ</ci><apply id="S3.SS1.p5.1.m1.1.1.3.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3"><times id="S3.SS1.p5.1.m1.1.1.3.3.1.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3.1"></times><ci id="S3.SS1.p5.1.m1.1.1.3.3.2.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3.2">𝑑</ci><ci id="S3.SS1.p5.1.m1.1.1.3.3.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3.3">𝑀</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.1.m1.1c">C\in\mathbb{R}^{d\times M}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.1.m1.1d">italic_C ∈ blackboard_R start_POSTSUPERSCRIPT italic_d × italic_M end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="Q\in\mathbb{R}^{d\times N}" class="ltx_Math" display="inline" id="S3.SS1.p5.2.m2.1"><semantics id="S3.SS1.p5.2.m2.1a"><mrow id="S3.SS1.p5.2.m2.1.1" xref="S3.SS1.p5.2.m2.1.1.cmml"><mi id="S3.SS1.p5.2.m2.1.1.2" xref="S3.SS1.p5.2.m2.1.1.2.cmml">Q</mi><mo id="S3.SS1.p5.2.m2.1.1.1" xref="S3.SS1.p5.2.m2.1.1.1.cmml">∈</mo><msup id="S3.SS1.p5.2.m2.1.1.3" xref="S3.SS1.p5.2.m2.1.1.3.cmml"><mi id="S3.SS1.p5.2.m2.1.1.3.2" xref="S3.SS1.p5.2.m2.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS1.p5.2.m2.1.1.3.3" xref="S3.SS1.p5.2.m2.1.1.3.3.cmml"><mi id="S3.SS1.p5.2.m2.1.1.3.3.2" xref="S3.SS1.p5.2.m2.1.1.3.3.2.cmml">d</mi><mo id="S3.SS1.p5.2.m2.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p5.2.m2.1.1.3.3.1.cmml">×</mo><mi id="S3.SS1.p5.2.m2.1.1.3.3.3" xref="S3.SS1.p5.2.m2.1.1.3.3.3.cmml">N</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.2.m2.1b"><apply id="S3.SS1.p5.2.m2.1.1.cmml" xref="S3.SS1.p5.2.m2.1.1"><in id="S3.SS1.p5.2.m2.1.1.1.cmml" xref="S3.SS1.p5.2.m2.1.1.1"></in><ci id="S3.SS1.p5.2.m2.1.1.2.cmml" xref="S3.SS1.p5.2.m2.1.1.2">𝑄</ci><apply id="S3.SS1.p5.2.m2.1.1.3.cmml" xref="S3.SS1.p5.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p5.2.m2.1.1.3.1.cmml" xref="S3.SS1.p5.2.m2.1.1.3">superscript</csymbol><ci id="S3.SS1.p5.2.m2.1.1.3.2.cmml" xref="S3.SS1.p5.2.m2.1.1.3.2">ℝ</ci><apply id="S3.SS1.p5.2.m2.1.1.3.3.cmml" xref="S3.SS1.p5.2.m2.1.1.3.3"><times id="S3.SS1.p5.2.m2.1.1.3.3.1.cmml" xref="S3.SS1.p5.2.m2.1.1.3.3.1"></times><ci id="S3.SS1.p5.2.m2.1.1.3.3.2.cmml" xref="S3.SS1.p5.2.m2.1.1.3.3.2">𝑑</ci><ci id="S3.SS1.p5.2.m2.1.1.3.3.3.cmml" xref="S3.SS1.p5.2.m2.1.1.3.3.3">𝑁</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.2.m2.1c">Q\in\mathbb{R}^{d\times N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.2.m2.1d">italic_Q ∈ blackboard_R start_POSTSUPERSCRIPT italic_d × italic_N end_POSTSUPERSCRIPT</annotation></semantics></math> where <math alttext="d" class="ltx_Math" display="inline" id="S3.SS1.p5.3.m3.1"><semantics id="S3.SS1.p5.3.m3.1a"><mi id="S3.SS1.p5.3.m3.1.1" xref="S3.SS1.p5.3.m3.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.3.m3.1b"><ci id="S3.SS1.p5.3.m3.1.1.cmml" xref="S3.SS1.p5.3.m3.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.3.m3.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.3.m3.1d">italic_d</annotation></semantics></math> is the dimension of the chosen embedder, in our case 768.</p>
</div>
<div class="ltx_para" id="S3.SS1.p6">
<p class="ltx_p" id="S3.SS1.p6.1">As a general note, we usually denote sets as calligraphic, vectors as lower case, matrices as upper case, and numbers/indices lower or upper case.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Ideal Retrieval Objective</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.7">Ideally during the retrieval phase, for a new user query <math alttext="q_{0}" class="ltx_Math" display="inline" id="S3.SS2.p1.1.m1.1"><semantics id="S3.SS2.p1.1.m1.1a"><msub id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml"><mi id="S3.SS2.p1.1.m1.1.1.2" xref="S3.SS2.p1.1.m1.1.1.2.cmml">q</mi><mn id="S3.SS2.p1.1.m1.1.1.3" xref="S3.SS2.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><apply id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2">𝑞</ci><cn id="S3.SS2.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS2.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">q_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.1.m1.1d">italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, one would evaluate all documents <math alttext="c\in\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS2.p1.2.m2.1"><semantics id="S3.SS2.p1.2.m2.1a"><mrow id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml"><mi id="S3.SS2.p1.2.m2.1.1.2" xref="S3.SS2.p1.2.m2.1.1.2.cmml">c</mi><mo id="S3.SS2.p1.2.m2.1.1.1" xref="S3.SS2.p1.2.m2.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p1.2.m2.1.1.3" xref="S3.SS2.p1.2.m2.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.1b"><apply id="S3.SS2.p1.2.m2.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1"><in id="S3.SS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1.1"></in><ci id="S3.SS2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.p1.2.m2.1.1.2">𝑐</ci><ci id="S3.SS2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.p1.2.m2.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.1c">c\in\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.2.m2.1d">italic_c ∈ caligraphic_C</annotation></semantics></math> by asking the retrieval question “Can the query <math alttext="q_{0}" class="ltx_Math" display="inline" id="S3.SS2.p1.3.m3.1"><semantics id="S3.SS2.p1.3.m3.1a"><msub id="S3.SS2.p1.3.m3.1.1" xref="S3.SS2.p1.3.m3.1.1.cmml"><mi id="S3.SS2.p1.3.m3.1.1.2" xref="S3.SS2.p1.3.m3.1.1.2.cmml">q</mi><mn id="S3.SS2.p1.3.m3.1.1.3" xref="S3.SS2.p1.3.m3.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m3.1b"><apply id="S3.SS2.p1.3.m3.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.p1.3.m3.1.1.2.cmml" xref="S3.SS2.p1.3.m3.1.1.2">𝑞</ci><cn id="S3.SS2.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS2.p1.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m3.1c">q_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.3.m3.1d">italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> be answered using the content <math alttext="c" class="ltx_Math" display="inline" id="S3.SS2.p1.4.m4.1"><semantics id="S3.SS2.p1.4.m4.1a"><mi id="S3.SS2.p1.4.m4.1.1" xref="S3.SS2.p1.4.m4.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.4.m4.1b"><ci id="S3.SS2.p1.4.m4.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.4.m4.1c">c</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.4.m4.1d">italic_c</annotation></semantics></math>?”. We call this the <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.7.1">retrieval task</span> and define the <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.7.2">retrieval function</span> <math alttext="f^{*}(c,q_{0})\in\{0,1\}" class="ltx_Math" display="inline" id="S3.SS2.p1.5.m5.4"><semantics id="S3.SS2.p1.5.m5.4a"><mrow id="S3.SS2.p1.5.m5.4.4" xref="S3.SS2.p1.5.m5.4.4.cmml"><mrow id="S3.SS2.p1.5.m5.4.4.1" xref="S3.SS2.p1.5.m5.4.4.1.cmml"><msup id="S3.SS2.p1.5.m5.4.4.1.3" xref="S3.SS2.p1.5.m5.4.4.1.3.cmml"><mi id="S3.SS2.p1.5.m5.4.4.1.3.2" xref="S3.SS2.p1.5.m5.4.4.1.3.2.cmml">f</mi><mo id="S3.SS2.p1.5.m5.4.4.1.3.3" xref="S3.SS2.p1.5.m5.4.4.1.3.3.cmml">∗</mo></msup><mo id="S3.SS2.p1.5.m5.4.4.1.2" xref="S3.SS2.p1.5.m5.4.4.1.2.cmml">⁢</mo><mrow id="S3.SS2.p1.5.m5.4.4.1.1.1" xref="S3.SS2.p1.5.m5.4.4.1.1.2.cmml"><mo id="S3.SS2.p1.5.m5.4.4.1.1.1.2" stretchy="false" xref="S3.SS2.p1.5.m5.4.4.1.1.2.cmml">(</mo><mi id="S3.SS2.p1.5.m5.1.1" xref="S3.SS2.p1.5.m5.1.1.cmml">c</mi><mo id="S3.SS2.p1.5.m5.4.4.1.1.1.3" xref="S3.SS2.p1.5.m5.4.4.1.1.2.cmml">,</mo><msub id="S3.SS2.p1.5.m5.4.4.1.1.1.1" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1.cmml"><mi id="S3.SS2.p1.5.m5.4.4.1.1.1.1.2" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1.2.cmml">q</mi><mn id="S3.SS2.p1.5.m5.4.4.1.1.1.1.3" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS2.p1.5.m5.4.4.1.1.1.4" stretchy="false" xref="S3.SS2.p1.5.m5.4.4.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p1.5.m5.4.4.2" xref="S3.SS2.p1.5.m5.4.4.2.cmml">∈</mo><mrow id="S3.SS2.p1.5.m5.4.4.3.2" xref="S3.SS2.p1.5.m5.4.4.3.1.cmml"><mo id="S3.SS2.p1.5.m5.4.4.3.2.1" stretchy="false" xref="S3.SS2.p1.5.m5.4.4.3.1.cmml">{</mo><mn id="S3.SS2.p1.5.m5.2.2" xref="S3.SS2.p1.5.m5.2.2.cmml">0</mn><mo id="S3.SS2.p1.5.m5.4.4.3.2.2" xref="S3.SS2.p1.5.m5.4.4.3.1.cmml">,</mo><mn id="S3.SS2.p1.5.m5.3.3" xref="S3.SS2.p1.5.m5.3.3.cmml">1</mn><mo id="S3.SS2.p1.5.m5.4.4.3.2.3" stretchy="false" xref="S3.SS2.p1.5.m5.4.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.5.m5.4b"><apply id="S3.SS2.p1.5.m5.4.4.cmml" xref="S3.SS2.p1.5.m5.4.4"><in id="S3.SS2.p1.5.m5.4.4.2.cmml" xref="S3.SS2.p1.5.m5.4.4.2"></in><apply id="S3.SS2.p1.5.m5.4.4.1.cmml" xref="S3.SS2.p1.5.m5.4.4.1"><times id="S3.SS2.p1.5.m5.4.4.1.2.cmml" xref="S3.SS2.p1.5.m5.4.4.1.2"></times><apply id="S3.SS2.p1.5.m5.4.4.1.3.cmml" xref="S3.SS2.p1.5.m5.4.4.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.4.4.1.3.1.cmml" xref="S3.SS2.p1.5.m5.4.4.1.3">superscript</csymbol><ci id="S3.SS2.p1.5.m5.4.4.1.3.2.cmml" xref="S3.SS2.p1.5.m5.4.4.1.3.2">𝑓</ci><times id="S3.SS2.p1.5.m5.4.4.1.3.3.cmml" xref="S3.SS2.p1.5.m5.4.4.1.3.3"></times></apply><interval closure="open" id="S3.SS2.p1.5.m5.4.4.1.1.2.cmml" xref="S3.SS2.p1.5.m5.4.4.1.1.1"><ci id="S3.SS2.p1.5.m5.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1">𝑐</ci><apply id="S3.SS2.p1.5.m5.4.4.1.1.1.1.cmml" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.5.m5.4.4.1.1.1.1.1.cmml" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p1.5.m5.4.4.1.1.1.1.2.cmml" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1.2">𝑞</ci><cn id="S3.SS2.p1.5.m5.4.4.1.1.1.1.3.cmml" type="integer" xref="S3.SS2.p1.5.m5.4.4.1.1.1.1.3">0</cn></apply></interval></apply><set id="S3.SS2.p1.5.m5.4.4.3.1.cmml" xref="S3.SS2.p1.5.m5.4.4.3.2"><cn id="S3.SS2.p1.5.m5.2.2.cmml" type="integer" xref="S3.SS2.p1.5.m5.2.2">0</cn><cn id="S3.SS2.p1.5.m5.3.3.cmml" type="integer" xref="S3.SS2.p1.5.m5.3.3">1</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.5.m5.4c">f^{*}(c,q_{0})\in\{0,1\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.5.m5.4d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ) ∈ { 0 , 1 }</annotation></semantics></math>. Note this is the exact formulation of the matrix <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS2.p1.6.m6.1"><semantics id="S3.SS2.p1.6.m6.1a"><msup id="S3.SS2.p1.6.m6.1.1" xref="S3.SS2.p1.6.m6.1.1.cmml"><mi id="S3.SS2.p1.6.m6.1.1.2" xref="S3.SS2.p1.6.m6.1.1.2.cmml">A</mi><mo id="S3.SS2.p1.6.m6.1.1.3" xref="S3.SS2.p1.6.m6.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.6.m6.1b"><apply id="S3.SS2.p1.6.m6.1.1.cmml" xref="S3.SS2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.6.m6.1.1.1.cmml" xref="S3.SS2.p1.6.m6.1.1">superscript</csymbol><ci id="S3.SS2.p1.6.m6.1.1.2.cmml" xref="S3.SS2.p1.6.m6.1.1.2">𝐴</ci><times id="S3.SS2.p1.6.m6.1.1.3.cmml" xref="S3.SS2.p1.6.m6.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.6.m6.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.6.m6.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> for the generated questions, i.e. <math alttext="A^{*}=(f^{*}(c_{i},q_{j}))_{ij}" class="ltx_Math" display="inline" id="S3.SS2.p1.7.m7.1"><semantics id="S3.SS2.p1.7.m7.1a"><mrow id="S3.SS2.p1.7.m7.1.1" xref="S3.SS2.p1.7.m7.1.1.cmml"><msup id="S3.SS2.p1.7.m7.1.1.3" xref="S3.SS2.p1.7.m7.1.1.3.cmml"><mi id="S3.SS2.p1.7.m7.1.1.3.2" xref="S3.SS2.p1.7.m7.1.1.3.2.cmml">A</mi><mo id="S3.SS2.p1.7.m7.1.1.3.3" xref="S3.SS2.p1.7.m7.1.1.3.3.cmml">∗</mo></msup><mo id="S3.SS2.p1.7.m7.1.1.2" xref="S3.SS2.p1.7.m7.1.1.2.cmml">=</mo><msub id="S3.SS2.p1.7.m7.1.1.1" xref="S3.SS2.p1.7.m7.1.1.1.cmml"><mrow id="S3.SS2.p1.7.m7.1.1.1.1.1" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.cmml"><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.2" stretchy="false" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p1.7.m7.1.1.1.1.1.1" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.cmml"><msup id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.cmml"><mi id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.2" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.2.cmml">f</mi><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.3" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.3.cmml">∗</mo></msup><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.1.3" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.3.cmml">⁢</mo><mrow id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.3.cmml"><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.3" stretchy="false" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.3.cmml">(</mo><msub id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.2" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.3" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.4" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.3.cmml">,</mo><msub id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.cmml"><mi id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.2" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.2.cmml">q</mi><mi id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.3" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.3.cmml">j</mi></msub><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.5" stretchy="false" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p1.7.m7.1.1.1.1.1.3" stretchy="false" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.cmml">)</mo></mrow><mrow id="S3.SS2.p1.7.m7.1.1.1.3" xref="S3.SS2.p1.7.m7.1.1.1.3.cmml"><mi id="S3.SS2.p1.7.m7.1.1.1.3.2" xref="S3.SS2.p1.7.m7.1.1.1.3.2.cmml">i</mi><mo id="S3.SS2.p1.7.m7.1.1.1.3.1" xref="S3.SS2.p1.7.m7.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p1.7.m7.1.1.1.3.3" xref="S3.SS2.p1.7.m7.1.1.1.3.3.cmml">j</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.7.m7.1b"><apply id="S3.SS2.p1.7.m7.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1"><eq id="S3.SS2.p1.7.m7.1.1.2.cmml" xref="S3.SS2.p1.7.m7.1.1.2"></eq><apply id="S3.SS2.p1.7.m7.1.1.3.cmml" xref="S3.SS2.p1.7.m7.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.p1.7.m7.1.1.3">superscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.p1.7.m7.1.1.3.2">𝐴</ci><times id="S3.SS2.p1.7.m7.1.1.3.3.cmml" xref="S3.SS2.p1.7.m7.1.1.3.3"></times></apply><apply id="S3.SS2.p1.7.m7.1.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.1.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1">subscript</csymbol><apply id="S3.SS2.p1.7.m7.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1"><times id="S3.SS2.p1.7.m7.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.3"></times><apply id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4">superscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.2">𝑓</ci><times id="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.4.3"></times></apply><interval closure="open" id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2"><apply id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.2">𝑞</ci><ci id="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.1.1.1.2.2.2.3">𝑗</ci></apply></interval></apply><apply id="S3.SS2.p1.7.m7.1.1.1.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.3"><times id="S3.SS2.p1.7.m7.1.1.1.3.1.cmml" xref="S3.SS2.p1.7.m7.1.1.1.3.1"></times><ci id="S3.SS2.p1.7.m7.1.1.1.3.2.cmml" xref="S3.SS2.p1.7.m7.1.1.1.3.2">𝑖</ci><ci id="S3.SS2.p1.7.m7.1.1.1.3.3.cmml" xref="S3.SS2.p1.7.m7.1.1.1.3.3">𝑗</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.7.m7.1c">A^{*}=(f^{*}(c_{i},q_{j}))_{ij}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.7.m7.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT = ( italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ) ) start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">State-of-the-art LLMs have shown their ability to accurately approximate the retrieval function (which we validate in our experimental section), which means that we can in-principle solve the retrieval task above at scale for any incoming query. However, in most practical application, using LLMs for approximating the retrieval function is both time and cost prohibitive, as it would involves <math alttext="M" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mi id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><ci id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">M</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_M</annotation></semantics></math> LLM predictions for an online user. This necessitates exploring alternate schemes.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.1">Rather than pursuing this exact operation for every entry, RAG systems typically approximate the retrieval task with some proxy. Below we list a few of the most common attempts at approximating the retrieval task at scale. The underlying challenge is how should one best approximate the retrieval function using practically <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.1">scalable</span> operations, for instance, using embedding similarities.</p>
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.2">The vanilla version of RAG approximates <math alttext="f^{*}(c,q_{0})" class="ltx_Math" display="inline" id="S3.I1.i1.p1.1.m1.2"><semantics id="S3.I1.i1.p1.1.m1.2a"><mrow id="S3.I1.i1.p1.1.m1.2.2" xref="S3.I1.i1.p1.1.m1.2.2.cmml"><msup id="S3.I1.i1.p1.1.m1.2.2.3" xref="S3.I1.i1.p1.1.m1.2.2.3.cmml"><mi id="S3.I1.i1.p1.1.m1.2.2.3.2" xref="S3.I1.i1.p1.1.m1.2.2.3.2.cmml">f</mi><mo id="S3.I1.i1.p1.1.m1.2.2.3.3" xref="S3.I1.i1.p1.1.m1.2.2.3.3.cmml">∗</mo></msup><mo id="S3.I1.i1.p1.1.m1.2.2.2" xref="S3.I1.i1.p1.1.m1.2.2.2.cmml">⁢</mo><mrow id="S3.I1.i1.p1.1.m1.2.2.1.1" xref="S3.I1.i1.p1.1.m1.2.2.1.2.cmml"><mo id="S3.I1.i1.p1.1.m1.2.2.1.1.2" stretchy="false" xref="S3.I1.i1.p1.1.m1.2.2.1.2.cmml">(</mo><mi id="S3.I1.i1.p1.1.m1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.cmml">c</mi><mo id="S3.I1.i1.p1.1.m1.2.2.1.1.3" xref="S3.I1.i1.p1.1.m1.2.2.1.2.cmml">,</mo><msub id="S3.I1.i1.p1.1.m1.2.2.1.1.1" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1.cmml"><mi id="S3.I1.i1.p1.1.m1.2.2.1.1.1.2" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1.2.cmml">q</mi><mn id="S3.I1.i1.p1.1.m1.2.2.1.1.1.3" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i1.p1.1.m1.2.2.1.1.4" stretchy="false" xref="S3.I1.i1.p1.1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.1.m1.2b"><apply id="S3.I1.i1.p1.1.m1.2.2.cmml" xref="S3.I1.i1.p1.1.m1.2.2"><times id="S3.I1.i1.p1.1.m1.2.2.2.cmml" xref="S3.I1.i1.p1.1.m1.2.2.2"></times><apply id="S3.I1.i1.p1.1.m1.2.2.3.cmml" xref="S3.I1.i1.p1.1.m1.2.2.3"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.2.2.3.1.cmml" xref="S3.I1.i1.p1.1.m1.2.2.3">superscript</csymbol><ci id="S3.I1.i1.p1.1.m1.2.2.3.2.cmml" xref="S3.I1.i1.p1.1.m1.2.2.3.2">𝑓</ci><times id="S3.I1.i1.p1.1.m1.2.2.3.3.cmml" xref="S3.I1.i1.p1.1.m1.2.2.3.3"></times></apply><interval closure="open" id="S3.I1.i1.p1.1.m1.2.2.1.2.cmml" xref="S3.I1.i1.p1.1.m1.2.2.1.1"><ci id="S3.I1.i1.p1.1.m1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1">𝑐</ci><apply id="S3.I1.i1.p1.1.m1.2.2.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.2.2.1.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S3.I1.i1.p1.1.m1.2.2.1.1.1.2.cmml" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1.2">𝑞</ci><cn id="S3.I1.i1.p1.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="S3.I1.i1.p1.1.m1.2.2.1.1.1.3">0</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.1.m1.2c">f^{*}(c,q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.1.m1.2d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math> (and in particular its induced ranking) by <math alttext="c^{t}q" class="ltx_Math" display="inline" id="S3.I1.i1.p1.2.m2.1"><semantics id="S3.I1.i1.p1.2.m2.1a"><mrow id="S3.I1.i1.p1.2.m2.1.1" xref="S3.I1.i1.p1.2.m2.1.1.cmml"><msup id="S3.I1.i1.p1.2.m2.1.1.2" xref="S3.I1.i1.p1.2.m2.1.1.2.cmml"><mi id="S3.I1.i1.p1.2.m2.1.1.2.2" xref="S3.I1.i1.p1.2.m2.1.1.2.2.cmml">c</mi><mi id="S3.I1.i1.p1.2.m2.1.1.2.3" xref="S3.I1.i1.p1.2.m2.1.1.2.3.cmml">t</mi></msup><mo id="S3.I1.i1.p1.2.m2.1.1.1" xref="S3.I1.i1.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.I1.i1.p1.2.m2.1.1.3" xref="S3.I1.i1.p1.2.m2.1.1.3.cmml">q</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.2.m2.1b"><apply id="S3.I1.i1.p1.2.m2.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1"><times id="S3.I1.i1.p1.2.m2.1.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1"></times><apply id="S3.I1.i1.p1.2.m2.1.1.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.I1.i1.p1.2.m2.1.1.2.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.2">superscript</csymbol><ci id="S3.I1.i1.p1.2.m2.1.1.2.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.2.2">𝑐</ci><ci id="S3.I1.i1.p1.2.m2.1.1.2.3.cmml" xref="S3.I1.i1.p1.2.m2.1.1.2.3">𝑡</ci></apply><ci id="S3.I1.i1.p1.2.m2.1.1.3.cmml" xref="S3.I1.i1.p1.2.m2.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.2.m2.1c">c^{t}q</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.2.m2.1d">italic_c start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_q</annotation></semantics></math>. We will show below that this approximation, albeit very wide spread, is typically misaligned and can lead to retrieval failures.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.3">Methods like HyDE <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib5" title="">2022</a>)</cite>, Query2Doc <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib29" title="">2023</a>)</cite>, and QA-RAG <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite> try to address the alignment issue by leveraging LLMs to rewrite the user query into a form more aligned with the content space. These approaches implicitly approximate the retrieval function as <math alttext="f^{*}(c,q_{0})\approx c^{t}p_{LLM}(q_{0})" class="ltx_Math" display="inline" id="S3.I1.i2.p1.1.m1.3"><semantics id="S3.I1.i2.p1.1.m1.3a"><mrow id="S3.I1.i2.p1.1.m1.3.3" xref="S3.I1.i2.p1.1.m1.3.3.cmml"><mrow id="S3.I1.i2.p1.1.m1.2.2.1" xref="S3.I1.i2.p1.1.m1.2.2.1.cmml"><msup id="S3.I1.i2.p1.1.m1.2.2.1.3" xref="S3.I1.i2.p1.1.m1.2.2.1.3.cmml"><mi id="S3.I1.i2.p1.1.m1.2.2.1.3.2" xref="S3.I1.i2.p1.1.m1.2.2.1.3.2.cmml">f</mi><mo id="S3.I1.i2.p1.1.m1.2.2.1.3.3" xref="S3.I1.i2.p1.1.m1.2.2.1.3.3.cmml">∗</mo></msup><mo id="S3.I1.i2.p1.1.m1.2.2.1.2" xref="S3.I1.i2.p1.1.m1.2.2.1.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.1.m1.2.2.1.1.1" xref="S3.I1.i2.p1.1.m1.2.2.1.1.2.cmml"><mo id="S3.I1.i2.p1.1.m1.2.2.1.1.1.2" stretchy="false" xref="S3.I1.i2.p1.1.m1.2.2.1.1.2.cmml">(</mo><mi id="S3.I1.i2.p1.1.m1.1.1" xref="S3.I1.i2.p1.1.m1.1.1.cmml">c</mi><mo id="S3.I1.i2.p1.1.m1.2.2.1.1.1.3" xref="S3.I1.i2.p1.1.m1.2.2.1.1.2.cmml">,</mo><msub id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.2" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.2.cmml">q</mi><mn id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.3" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i2.p1.1.m1.2.2.1.1.1.4" stretchy="false" xref="S3.I1.i2.p1.1.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.I1.i2.p1.1.m1.3.3.3" xref="S3.I1.i2.p1.1.m1.3.3.3.cmml">≈</mo><mrow id="S3.I1.i2.p1.1.m1.3.3.2" xref="S3.I1.i2.p1.1.m1.3.3.2.cmml"><msup id="S3.I1.i2.p1.1.m1.3.3.2.3" xref="S3.I1.i2.p1.1.m1.3.3.2.3.cmml"><mi id="S3.I1.i2.p1.1.m1.3.3.2.3.2" xref="S3.I1.i2.p1.1.m1.3.3.2.3.2.cmml">c</mi><mi id="S3.I1.i2.p1.1.m1.3.3.2.3.3" xref="S3.I1.i2.p1.1.m1.3.3.2.3.3.cmml">t</mi></msup><mo id="S3.I1.i2.p1.1.m1.3.3.2.2" xref="S3.I1.i2.p1.1.m1.3.3.2.2.cmml">⁢</mo><msub id="S3.I1.i2.p1.1.m1.3.3.2.4" xref="S3.I1.i2.p1.1.m1.3.3.2.4.cmml"><mi id="S3.I1.i2.p1.1.m1.3.3.2.4.2" xref="S3.I1.i2.p1.1.m1.3.3.2.4.2.cmml">p</mi><mrow id="S3.I1.i2.p1.1.m1.3.3.2.4.3" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.cmml"><mi id="S3.I1.i2.p1.1.m1.3.3.2.4.3.2" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.2.cmml">L</mi><mo id="S3.I1.i2.p1.1.m1.3.3.2.4.3.1" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.1.cmml">⁢</mo><mi id="S3.I1.i2.p1.1.m1.3.3.2.4.3.3" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.3.cmml">L</mi><mo id="S3.I1.i2.p1.1.m1.3.3.2.4.3.1a" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.1.cmml">⁢</mo><mi id="S3.I1.i2.p1.1.m1.3.3.2.4.3.4" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.4.cmml">M</mi></mrow></msub><mo id="S3.I1.i2.p1.1.m1.3.3.2.2a" xref="S3.I1.i2.p1.1.m1.3.3.2.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.1.m1.3.3.2.1.1" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.cmml"><mo id="S3.I1.i2.p1.1.m1.3.3.2.1.1.2" stretchy="false" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.cmml"><mi id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.2" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.2.cmml">q</mi><mn id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.3" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i2.p1.1.m1.3.3.2.1.1.3" stretchy="false" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.1.m1.3b"><apply id="S3.I1.i2.p1.1.m1.3.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3"><approx id="S3.I1.i2.p1.1.m1.3.3.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3.3"></approx><apply id="S3.I1.i2.p1.1.m1.2.2.1.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1"><times id="S3.I1.i2.p1.1.m1.2.2.1.2.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.2"></times><apply id="S3.I1.i2.p1.1.m1.2.2.1.3.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.2.2.1.3.1.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.3">superscript</csymbol><ci id="S3.I1.i2.p1.1.m1.2.2.1.3.2.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.3.2">𝑓</ci><times id="S3.I1.i2.p1.1.m1.2.2.1.3.3.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.3.3"></times></apply><interval closure="open" id="S3.I1.i2.p1.1.m1.2.2.1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1"><ci id="S3.I1.i2.p1.1.m1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1">𝑐</ci><apply id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.2">𝑞</ci><cn id="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.3.cmml" type="integer" xref="S3.I1.i2.p1.1.m1.2.2.1.1.1.1.3">0</cn></apply></interval></apply><apply id="S3.I1.i2.p1.1.m1.3.3.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2"><times id="S3.I1.i2.p1.1.m1.3.3.2.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.2"></times><apply id="S3.I1.i2.p1.1.m1.3.3.2.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.3.3.2.3.1.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.3">superscript</csymbol><ci id="S3.I1.i2.p1.1.m1.3.3.2.3.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.3.2">𝑐</ci><ci id="S3.I1.i2.p1.1.m1.3.3.2.3.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.3.3">𝑡</ci></apply><apply id="S3.I1.i2.p1.1.m1.3.3.2.4.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.3.3.2.4.1.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4">subscript</csymbol><ci id="S3.I1.i2.p1.1.m1.3.3.2.4.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.2">𝑝</ci><apply id="S3.I1.i2.p1.1.m1.3.3.2.4.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3"><times id="S3.I1.i2.p1.1.m1.3.3.2.4.3.1.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.1"></times><ci id="S3.I1.i2.p1.1.m1.3.3.2.4.3.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.2">𝐿</ci><ci id="S3.I1.i2.p1.1.m1.3.3.2.4.3.3.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.3">𝐿</ci><ci id="S3.I1.i2.p1.1.m1.3.3.2.4.3.4.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.4.3.4">𝑀</ci></apply></apply><apply id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.2">𝑞</ci><cn id="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.3.cmml" type="integer" xref="S3.I1.i2.p1.1.m1.3.3.2.1.1.1.3">0</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.1.m1.3c">f^{*}(c,q_{0})\approx c^{t}p_{LLM}(q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.1.m1.3d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ) ≈ italic_c start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_p start_POSTSUBSCRIPT italic_L italic_L italic_M end_POSTSUBSCRIPT ( italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="p_{LLM}(q_{0})" class="ltx_Math" display="inline" id="S3.I1.i2.p1.2.m2.1"><semantics id="S3.I1.i2.p1.2.m2.1a"><mrow id="S3.I1.i2.p1.2.m2.1.1" xref="S3.I1.i2.p1.2.m2.1.1.cmml"><msub id="S3.I1.i2.p1.2.m2.1.1.3" xref="S3.I1.i2.p1.2.m2.1.1.3.cmml"><mi id="S3.I1.i2.p1.2.m2.1.1.3.2" xref="S3.I1.i2.p1.2.m2.1.1.3.2.cmml">p</mi><mrow id="S3.I1.i2.p1.2.m2.1.1.3.3" xref="S3.I1.i2.p1.2.m2.1.1.3.3.cmml"><mi id="S3.I1.i2.p1.2.m2.1.1.3.3.2" xref="S3.I1.i2.p1.2.m2.1.1.3.3.2.cmml">L</mi><mo id="S3.I1.i2.p1.2.m2.1.1.3.3.1" xref="S3.I1.i2.p1.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.I1.i2.p1.2.m2.1.1.3.3.3" xref="S3.I1.i2.p1.2.m2.1.1.3.3.3.cmml">L</mi><mo id="S3.I1.i2.p1.2.m2.1.1.3.3.1a" xref="S3.I1.i2.p1.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.I1.i2.p1.2.m2.1.1.3.3.4" xref="S3.I1.i2.p1.2.m2.1.1.3.3.4.cmml">M</mi></mrow></msub><mo id="S3.I1.i2.p1.2.m2.1.1.2" xref="S3.I1.i2.p1.2.m2.1.1.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.2.m2.1.1.1.1" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.cmml"><mo id="S3.I1.i2.p1.2.m2.1.1.1.1.2" stretchy="false" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.2.m2.1.1.1.1.1" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.2.m2.1.1.1.1.1.2" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.2.cmml">q</mi><mn id="S3.I1.i2.p1.2.m2.1.1.1.1.1.3" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i2.p1.2.m2.1.1.1.1.3" stretchy="false" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.2.m2.1b"><apply id="S3.I1.i2.p1.2.m2.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1"><times id="S3.I1.i2.p1.2.m2.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.1.1.2"></times><apply id="S3.I1.i2.p1.2.m2.1.1.3.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.1.1.3.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3">subscript</csymbol><ci id="S3.I1.i2.p1.2.m2.1.1.3.2.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.2">𝑝</ci><apply id="S3.I1.i2.p1.2.m2.1.1.3.3.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.3"><times id="S3.I1.i2.p1.2.m2.1.1.3.3.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.3.1"></times><ci id="S3.I1.i2.p1.2.m2.1.1.3.3.2.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.3.2">𝐿</ci><ci id="S3.I1.i2.p1.2.m2.1.1.3.3.3.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.3.3">𝐿</ci><ci id="S3.I1.i2.p1.2.m2.1.1.3.3.4.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3.3.4">𝑀</ci></apply></apply><apply id="S3.I1.i2.p1.2.m2.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.2.m2.1.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.2">𝑞</ci><cn id="S3.I1.i2.p1.2.m2.1.1.1.1.1.3.cmml" type="integer" xref="S3.I1.i2.p1.2.m2.1.1.1.1.1.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.2.m2.1c">p_{LLM}(q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.2.m2.1d">italic_p start_POSTSUBSCRIPT italic_L italic_L italic_M end_POSTSUBSCRIPT ( italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math> represents the LLM’s output conditioned on the original query <math alttext="q_{0}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.3.m3.1"><semantics id="S3.I1.i2.p1.3.m3.1a"><msub id="S3.I1.i2.p1.3.m3.1.1" xref="S3.I1.i2.p1.3.m3.1.1.cmml"><mi id="S3.I1.i2.p1.3.m3.1.1.2" xref="S3.I1.i2.p1.3.m3.1.1.2.cmml">q</mi><mn id="S3.I1.i2.p1.3.m3.1.1.3" xref="S3.I1.i2.p1.3.m3.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.3.m3.1b"><apply id="S3.I1.i2.p1.3.m3.1.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.3.m3.1.1.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.3.m3.1.1.2.cmml" xref="S3.I1.i2.p1.3.m3.1.1.2">𝑞</ci><cn id="S3.I1.i2.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.I1.i2.p1.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.3.m3.1c">q_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.3.m3.1d">italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>.The effectiveness of these methods to indirectly align query and content space hinges on the LLM’s ability to generate representations that are both semantically rich and well-aligned with the content embeddings, which can be inconsistent and resource-intensive.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.2">Adapter based methods (e.g. LlamaIndex<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span> <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://docs.llamaindex.ai/en/stable/examples/finetuning/embeddings/finetune_embedding_adapter.html" title="">https://docs.llamaindex.ai/en/stable/examples/finetuning/embeddings/finetune_embedding_adapter.html</a></span></span></span>) approximates the retrieval function by <math alttext="c^{t}U(q)" class="ltx_Math" display="inline" id="S3.I1.i3.p1.1.m1.1"><semantics id="S3.I1.i3.p1.1.m1.1a"><mrow id="S3.I1.i3.p1.1.m1.1.2" xref="S3.I1.i3.p1.1.m1.1.2.cmml"><msup id="S3.I1.i3.p1.1.m1.1.2.2" xref="S3.I1.i3.p1.1.m1.1.2.2.cmml"><mi id="S3.I1.i3.p1.1.m1.1.2.2.2" xref="S3.I1.i3.p1.1.m1.1.2.2.2.cmml">c</mi><mi id="S3.I1.i3.p1.1.m1.1.2.2.3" xref="S3.I1.i3.p1.1.m1.1.2.2.3.cmml">t</mi></msup><mo id="S3.I1.i3.p1.1.m1.1.2.1" xref="S3.I1.i3.p1.1.m1.1.2.1.cmml">⁢</mo><mi id="S3.I1.i3.p1.1.m1.1.2.3" xref="S3.I1.i3.p1.1.m1.1.2.3.cmml">U</mi><mo id="S3.I1.i3.p1.1.m1.1.2.1a" xref="S3.I1.i3.p1.1.m1.1.2.1.cmml">⁢</mo><mrow id="S3.I1.i3.p1.1.m1.1.2.4.2" xref="S3.I1.i3.p1.1.m1.1.2.cmml"><mo id="S3.I1.i3.p1.1.m1.1.2.4.2.1" stretchy="false" xref="S3.I1.i3.p1.1.m1.1.2.cmml">(</mo><mi id="S3.I1.i3.p1.1.m1.1.1" xref="S3.I1.i3.p1.1.m1.1.1.cmml">q</mi><mo id="S3.I1.i3.p1.1.m1.1.2.4.2.2" stretchy="false" xref="S3.I1.i3.p1.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i3.p1.1.m1.1b"><apply id="S3.I1.i3.p1.1.m1.1.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2"><times id="S3.I1.i3.p1.1.m1.1.2.1.cmml" xref="S3.I1.i3.p1.1.m1.1.2.1"></times><apply id="S3.I1.i3.p1.1.m1.1.2.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.1.m1.1.2.2.1.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2">superscript</csymbol><ci id="S3.I1.i3.p1.1.m1.1.2.2.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.2">𝑐</ci><ci id="S3.I1.i3.p1.1.m1.1.2.2.3.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.3">𝑡</ci></apply><ci id="S3.I1.i3.p1.1.m1.1.2.3.cmml" xref="S3.I1.i3.p1.1.m1.1.2.3">𝑈</ci><ci id="S3.I1.i3.p1.1.m1.1.1.cmml" xref="S3.I1.i3.p1.1.m1.1.1">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i3.p1.1.m1.1c">c^{t}U(q)</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.1.m1.1d">italic_c start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_U ( italic_q )</annotation></semantics></math> where <math alttext="U" class="ltx_Math" display="inline" id="S3.I1.i3.p1.2.m2.1"><semantics id="S3.I1.i3.p1.2.m2.1a"><mi id="S3.I1.i3.p1.2.m2.1.1" xref="S3.I1.i3.p1.2.m2.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="S3.I1.i3.p1.2.m2.1b"><ci id="S3.I1.i3.p1.2.m2.1.1.cmml" xref="S3.I1.i3.p1.2.m2.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i3.p1.2.m2.1c">U</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.2.m2.1d">italic_U</annotation></semantics></math> is an adapter function which must be learnt online, for example, with a single layer linear layer or even a deep neural net. However, acquiring sufficient training data for optimal adapter performance can be challenging. An alternative approach involves training separate, specialized embedders for queries and content <cite class="ltx_cite ltx_citemacro_citep">(Karpukhin et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib7" title="">2020</a>)</cite>, aiming to learn inherently aligned representations.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i4.p1">
<p class="ltx_p" id="S3.I1.i4.p1.2">Similar to adapter-based methods, this approach involves training or fine-tuning embedding models to generate representations specifically optimized for the retrieval task. Given a dataset of query-content pairs, these methods learn an embedding function <math alttext="e(.)" class="ltx_math_unparsed" display="inline" id="S3.I1.i4.p1.1.m1.1"><semantics id="S3.I1.i4.p1.1.m1.1a"><mrow id="S3.I1.i4.p1.1.m1.1b"><mi id="S3.I1.i4.p1.1.m1.1.1">e</mi><mrow id="S3.I1.i4.p1.1.m1.1.2"><mo id="S3.I1.i4.p1.1.m1.1.2.1" stretchy="false">(</mo><mo id="S3.I1.i4.p1.1.m1.1.2.2" lspace="0em" rspace="0.167em">.</mo><mo id="S3.I1.i4.p1.1.m1.1.2.3" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S3.I1.i4.p1.1.m1.1c">e(.)</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i4.p1.1.m1.1d">italic_e ( . )</annotation></semantics></math> that maximizes the similarity between relevant queries and content. The retrieval function is then approximated as <math alttext="f^{*}(c,q_{0})\approx e(c)^{t}e(q_{0})" class="ltx_Math" display="inline" id="S3.I1.i4.p1.2.m2.4"><semantics id="S3.I1.i4.p1.2.m2.4a"><mrow id="S3.I1.i4.p1.2.m2.4.4" xref="S3.I1.i4.p1.2.m2.4.4.cmml"><mrow id="S3.I1.i4.p1.2.m2.3.3.1" xref="S3.I1.i4.p1.2.m2.3.3.1.cmml"><msup id="S3.I1.i4.p1.2.m2.3.3.1.3" xref="S3.I1.i4.p1.2.m2.3.3.1.3.cmml"><mi id="S3.I1.i4.p1.2.m2.3.3.1.3.2" xref="S3.I1.i4.p1.2.m2.3.3.1.3.2.cmml">f</mi><mo id="S3.I1.i4.p1.2.m2.3.3.1.3.3" xref="S3.I1.i4.p1.2.m2.3.3.1.3.3.cmml">∗</mo></msup><mo id="S3.I1.i4.p1.2.m2.3.3.1.2" xref="S3.I1.i4.p1.2.m2.3.3.1.2.cmml">⁢</mo><mrow id="S3.I1.i4.p1.2.m2.3.3.1.1.1" xref="S3.I1.i4.p1.2.m2.3.3.1.1.2.cmml"><mo id="S3.I1.i4.p1.2.m2.3.3.1.1.1.2" stretchy="false" xref="S3.I1.i4.p1.2.m2.3.3.1.1.2.cmml">(</mo><mi id="S3.I1.i4.p1.2.m2.1.1" xref="S3.I1.i4.p1.2.m2.1.1.cmml">c</mi><mo id="S3.I1.i4.p1.2.m2.3.3.1.1.1.3" xref="S3.I1.i4.p1.2.m2.3.3.1.1.2.cmml">,</mo><msub id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.cmml"><mi id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.2" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.2.cmml">q</mi><mn id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.3" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i4.p1.2.m2.3.3.1.1.1.4" stretchy="false" xref="S3.I1.i4.p1.2.m2.3.3.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.I1.i4.p1.2.m2.4.4.3" xref="S3.I1.i4.p1.2.m2.4.4.3.cmml">≈</mo><mrow id="S3.I1.i4.p1.2.m2.4.4.2" xref="S3.I1.i4.p1.2.m2.4.4.2.cmml"><mi id="S3.I1.i4.p1.2.m2.4.4.2.3" xref="S3.I1.i4.p1.2.m2.4.4.2.3.cmml">e</mi><mo id="S3.I1.i4.p1.2.m2.4.4.2.2" xref="S3.I1.i4.p1.2.m2.4.4.2.2.cmml">⁢</mo><msup id="S3.I1.i4.p1.2.m2.4.4.2.4" xref="S3.I1.i4.p1.2.m2.4.4.2.4.cmml"><mrow id="S3.I1.i4.p1.2.m2.4.4.2.4.2.2" xref="S3.I1.i4.p1.2.m2.4.4.2.4.cmml"><mo id="S3.I1.i4.p1.2.m2.4.4.2.4.2.2.1" stretchy="false" xref="S3.I1.i4.p1.2.m2.4.4.2.4.cmml">(</mo><mi id="S3.I1.i4.p1.2.m2.2.2" xref="S3.I1.i4.p1.2.m2.2.2.cmml">c</mi><mo id="S3.I1.i4.p1.2.m2.4.4.2.4.2.2.2" stretchy="false" xref="S3.I1.i4.p1.2.m2.4.4.2.4.cmml">)</mo></mrow><mi id="S3.I1.i4.p1.2.m2.4.4.2.4.3" xref="S3.I1.i4.p1.2.m2.4.4.2.4.3.cmml">t</mi></msup><mo id="S3.I1.i4.p1.2.m2.4.4.2.2a" xref="S3.I1.i4.p1.2.m2.4.4.2.2.cmml">⁢</mo><mi id="S3.I1.i4.p1.2.m2.4.4.2.5" xref="S3.I1.i4.p1.2.m2.4.4.2.5.cmml">e</mi><mo id="S3.I1.i4.p1.2.m2.4.4.2.2b" xref="S3.I1.i4.p1.2.m2.4.4.2.2.cmml">⁢</mo><mrow id="S3.I1.i4.p1.2.m2.4.4.2.1.1" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.cmml"><mo id="S3.I1.i4.p1.2.m2.4.4.2.1.1.2" stretchy="false" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.cmml">(</mo><msub id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.cmml"><mi id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.2" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.2.cmml">q</mi><mn id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.3" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.I1.i4.p1.2.m2.4.4.2.1.1.3" stretchy="false" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i4.p1.2.m2.4b"><apply id="S3.I1.i4.p1.2.m2.4.4.cmml" xref="S3.I1.i4.p1.2.m2.4.4"><approx id="S3.I1.i4.p1.2.m2.4.4.3.cmml" xref="S3.I1.i4.p1.2.m2.4.4.3"></approx><apply id="S3.I1.i4.p1.2.m2.3.3.1.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1"><times id="S3.I1.i4.p1.2.m2.3.3.1.2.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.2"></times><apply id="S3.I1.i4.p1.2.m2.3.3.1.3.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.3"><csymbol cd="ambiguous" id="S3.I1.i4.p1.2.m2.3.3.1.3.1.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.3">superscript</csymbol><ci id="S3.I1.i4.p1.2.m2.3.3.1.3.2.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.3.2">𝑓</ci><times id="S3.I1.i4.p1.2.m2.3.3.1.3.3.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.3.3"></times></apply><interval closure="open" id="S3.I1.i4.p1.2.m2.3.3.1.1.2.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1"><ci id="S3.I1.i4.p1.2.m2.1.1.cmml" xref="S3.I1.i4.p1.2.m2.1.1">𝑐</ci><apply id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.1.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1">subscript</csymbol><ci id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.2.cmml" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.2">𝑞</ci><cn id="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.3.cmml" type="integer" xref="S3.I1.i4.p1.2.m2.3.3.1.1.1.1.3">0</cn></apply></interval></apply><apply id="S3.I1.i4.p1.2.m2.4.4.2.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2"><times id="S3.I1.i4.p1.2.m2.4.4.2.2.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.2"></times><ci id="S3.I1.i4.p1.2.m2.4.4.2.3.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.3">𝑒</ci><apply id="S3.I1.i4.p1.2.m2.4.4.2.4.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.4"><csymbol cd="ambiguous" id="S3.I1.i4.p1.2.m2.4.4.2.4.1.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.4">superscript</csymbol><ci id="S3.I1.i4.p1.2.m2.2.2.cmml" xref="S3.I1.i4.p1.2.m2.2.2">𝑐</ci><ci id="S3.I1.i4.p1.2.m2.4.4.2.4.3.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.4.3">𝑡</ci></apply><ci id="S3.I1.i4.p1.2.m2.4.4.2.5.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.5">𝑒</ci><apply id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1"><csymbol cd="ambiguous" id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.1.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1">subscript</csymbol><ci id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.2.cmml" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.2">𝑞</ci><cn id="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.3.cmml" type="integer" xref="S3.I1.i4.p1.2.m2.4.4.2.1.1.1.3">0</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i4.p1.2.m2.4c">f^{*}(c,q_{0})\approx e(c)^{t}e(q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i4.p1.2.m2.4d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ) ≈ italic_e ( italic_c ) start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_e ( italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>. Commercially available tools, such as those on VertexAI<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cloud.google.com/vertex-ai/generative-ai/docs/models/tune-embeddings" title="">https://cloud.google.com/vertex-ai/generative-ai/docs/models/tune-embeddings</a></span></span></span>, offer pre-trained or fine-tuned embedding models for specific domains and tasks. This method essentially tries to handle alignment in a supervised way. However, this approach requires a substantial amount of labeled data for training, which can be costly and time-consuming to acquire, especially in specialized domains like healthcare.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.3">We have intentionally excluded methods like re-ranking from this analysis. While re-ranking techniques can be applied subsequent to any of the aforementioned retrieval strategies, they don’t fundamentally alter the initial embedding-based retrieval process. Re-rankers typically leverage LLMs to evaluate the retrieval function <math alttext="f^{*}(c,q_{0})" class="ltx_Math" display="inline" id="S3.SS2.p4.1.m1.2"><semantics id="S3.SS2.p4.1.m1.2a"><mrow id="S3.SS2.p4.1.m1.2.2" xref="S3.SS2.p4.1.m1.2.2.cmml"><msup id="S3.SS2.p4.1.m1.2.2.3" xref="S3.SS2.p4.1.m1.2.2.3.cmml"><mi id="S3.SS2.p4.1.m1.2.2.3.2" xref="S3.SS2.p4.1.m1.2.2.3.2.cmml">f</mi><mo id="S3.SS2.p4.1.m1.2.2.3.3" xref="S3.SS2.p4.1.m1.2.2.3.3.cmml">∗</mo></msup><mo id="S3.SS2.p4.1.m1.2.2.2" xref="S3.SS2.p4.1.m1.2.2.2.cmml">⁢</mo><mrow id="S3.SS2.p4.1.m1.2.2.1.1" xref="S3.SS2.p4.1.m1.2.2.1.2.cmml"><mo id="S3.SS2.p4.1.m1.2.2.1.1.2" stretchy="false" xref="S3.SS2.p4.1.m1.2.2.1.2.cmml">(</mo><mi id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml">c</mi><mo id="S3.SS2.p4.1.m1.2.2.1.1.3" xref="S3.SS2.p4.1.m1.2.2.1.2.cmml">,</mo><msub id="S3.SS2.p4.1.m1.2.2.1.1.1" xref="S3.SS2.p4.1.m1.2.2.1.1.1.cmml"><mi id="S3.SS2.p4.1.m1.2.2.1.1.1.2" xref="S3.SS2.p4.1.m1.2.2.1.1.1.2.cmml">q</mi><mn id="S3.SS2.p4.1.m1.2.2.1.1.1.3" xref="S3.SS2.p4.1.m1.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS2.p4.1.m1.2.2.1.1.4" stretchy="false" xref="S3.SS2.p4.1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.2b"><apply id="S3.SS2.p4.1.m1.2.2.cmml" xref="S3.SS2.p4.1.m1.2.2"><times id="S3.SS2.p4.1.m1.2.2.2.cmml" xref="S3.SS2.p4.1.m1.2.2.2"></times><apply id="S3.SS2.p4.1.m1.2.2.3.cmml" xref="S3.SS2.p4.1.m1.2.2.3"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.2.2.3.1.cmml" xref="S3.SS2.p4.1.m1.2.2.3">superscript</csymbol><ci id="S3.SS2.p4.1.m1.2.2.3.2.cmml" xref="S3.SS2.p4.1.m1.2.2.3.2">𝑓</ci><times id="S3.SS2.p4.1.m1.2.2.3.3.cmml" xref="S3.SS2.p4.1.m1.2.2.3.3"></times></apply><interval closure="open" id="S3.SS2.p4.1.m1.2.2.1.2.cmml" xref="S3.SS2.p4.1.m1.2.2.1.1"><ci id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1">𝑐</ci><apply id="S3.SS2.p4.1.m1.2.2.1.1.1.cmml" xref="S3.SS2.p4.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.2.2.1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S3.SS2.p4.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.2.2.1.1.1.2">𝑞</ci><cn id="S3.SS2.p4.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS2.p4.1.m1.2.2.1.1.1.3">0</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.2c">f^{*}(c,q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.1.m1.2d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math> on a smaller subset of documents <math alttext="\mathcal{\tilde{C}}\subset\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS2.p4.2.m2.1"><semantics id="S3.SS2.p4.2.m2.1a"><mrow id="S3.SS2.p4.2.m2.1.1" xref="S3.SS2.p4.2.m2.1.1.cmml"><mover accent="true" id="S3.SS2.p4.2.m2.1.1.2" xref="S3.SS2.p4.2.m2.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.2.m2.1.1.2.2" xref="S3.SS2.p4.2.m2.1.1.2.2.cmml">𝒞</mi><mo id="S3.SS2.p4.2.m2.1.1.2.1" xref="S3.SS2.p4.2.m2.1.1.2.1.cmml">~</mo></mover><mo id="S3.SS2.p4.2.m2.1.1.1" xref="S3.SS2.p4.2.m2.1.1.1.cmml">⊂</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.2.m2.1.1.3" xref="S3.SS2.p4.2.m2.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.2.m2.1b"><apply id="S3.SS2.p4.2.m2.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1"><subset id="S3.SS2.p4.2.m2.1.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1.1"></subset><apply id="S3.SS2.p4.2.m2.1.1.2.cmml" xref="S3.SS2.p4.2.m2.1.1.2"><ci id="S3.SS2.p4.2.m2.1.1.2.1.cmml" xref="S3.SS2.p4.2.m2.1.1.2.1">~</ci><ci id="S3.SS2.p4.2.m2.1.1.2.2.cmml" xref="S3.SS2.p4.2.m2.1.1.2.2">𝒞</ci></apply><ci id="S3.SS2.p4.2.m2.1.1.3.cmml" xref="S3.SS2.p4.2.m2.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.2.m2.1c">\mathcal{\tilde{C}}\subset\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.2.m2.1d">over~ start_ARG caligraphic_C end_ARG ⊂ caligraphic_C</annotation></semantics></math> that have been pre-selected using embedding similarity. This allows for a more precise approximation of <math alttext="f^{*}(c,q_{0})" class="ltx_Math" display="inline" id="S3.SS2.p4.3.m3.2"><semantics id="S3.SS2.p4.3.m3.2a"><mrow id="S3.SS2.p4.3.m3.2.2" xref="S3.SS2.p4.3.m3.2.2.cmml"><msup id="S3.SS2.p4.3.m3.2.2.3" xref="S3.SS2.p4.3.m3.2.2.3.cmml"><mi id="S3.SS2.p4.3.m3.2.2.3.2" xref="S3.SS2.p4.3.m3.2.2.3.2.cmml">f</mi><mo id="S3.SS2.p4.3.m3.2.2.3.3" xref="S3.SS2.p4.3.m3.2.2.3.3.cmml">∗</mo></msup><mo id="S3.SS2.p4.3.m3.2.2.2" xref="S3.SS2.p4.3.m3.2.2.2.cmml">⁢</mo><mrow id="S3.SS2.p4.3.m3.2.2.1.1" xref="S3.SS2.p4.3.m3.2.2.1.2.cmml"><mo id="S3.SS2.p4.3.m3.2.2.1.1.2" stretchy="false" xref="S3.SS2.p4.3.m3.2.2.1.2.cmml">(</mo><mi id="S3.SS2.p4.3.m3.1.1" xref="S3.SS2.p4.3.m3.1.1.cmml">c</mi><mo id="S3.SS2.p4.3.m3.2.2.1.1.3" xref="S3.SS2.p4.3.m3.2.2.1.2.cmml">,</mo><msub id="S3.SS2.p4.3.m3.2.2.1.1.1" xref="S3.SS2.p4.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS2.p4.3.m3.2.2.1.1.1.2" xref="S3.SS2.p4.3.m3.2.2.1.1.1.2.cmml">q</mi><mn id="S3.SS2.p4.3.m3.2.2.1.1.1.3" xref="S3.SS2.p4.3.m3.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS2.p4.3.m3.2.2.1.1.4" stretchy="false" xref="S3.SS2.p4.3.m3.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.3.m3.2b"><apply id="S3.SS2.p4.3.m3.2.2.cmml" xref="S3.SS2.p4.3.m3.2.2"><times id="S3.SS2.p4.3.m3.2.2.2.cmml" xref="S3.SS2.p4.3.m3.2.2.2"></times><apply id="S3.SS2.p4.3.m3.2.2.3.cmml" xref="S3.SS2.p4.3.m3.2.2.3"><csymbol cd="ambiguous" id="S3.SS2.p4.3.m3.2.2.3.1.cmml" xref="S3.SS2.p4.3.m3.2.2.3">superscript</csymbol><ci id="S3.SS2.p4.3.m3.2.2.3.2.cmml" xref="S3.SS2.p4.3.m3.2.2.3.2">𝑓</ci><times id="S3.SS2.p4.3.m3.2.2.3.3.cmml" xref="S3.SS2.p4.3.m3.2.2.3.3"></times></apply><interval closure="open" id="S3.SS2.p4.3.m3.2.2.1.2.cmml" xref="S3.SS2.p4.3.m3.2.2.1.1"><ci id="S3.SS2.p4.3.m3.1.1.cmml" xref="S3.SS2.p4.3.m3.1.1">𝑐</ci><apply id="S3.SS2.p4.3.m3.2.2.1.1.1.cmml" xref="S3.SS2.p4.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS2.p4.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS2.p4.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS2.p4.3.m3.2.2.1.1.1.2">𝑞</ci><cn id="S3.SS2.p4.3.m3.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS2.p4.3.m3.2.2.1.1.1.3">0</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.3.m3.2c">f^{*}(c,q_{0})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.3.m3.2d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math> but only within the confines of the initially retrieved subset. Determining the optimal subset for re-ranking remains an open challenge. Various frameworks, such as those offered by cohereAI<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cohere.com/rerank/" title="">https://cohere.com/rerank/</a></span></span></span>, implement re-ranking mechanisms.</p>
</div>
<div class="ltx_para" id="S3.SS2.p5">
<p class="ltx_p" id="S3.SS2.p5.2">Finally, in the context of RAG – i.e. identifying relevant content for a downstream generation –
we need only worry about finding some <math alttext="c" class="ltx_Math" display="inline" id="S3.SS2.p5.1.m1.1"><semantics id="S3.SS2.p5.1.m1.1a"><mi id="S3.SS2.p5.1.m1.1.1" xref="S3.SS2.p5.1.m1.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p5.1.m1.1b"><ci id="S3.SS2.p5.1.m1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p5.1.m1.1c">c</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p5.1.m1.1d">italic_c</annotation></semantics></math> s.t. <math alttext="f^{*}(c,q_{0})=1" class="ltx_Math" display="inline" id="S3.SS2.p5.2.m2.2"><semantics id="S3.SS2.p5.2.m2.2a"><mrow id="S3.SS2.p5.2.m2.2.2" xref="S3.SS2.p5.2.m2.2.2.cmml"><mrow id="S3.SS2.p5.2.m2.2.2.1" xref="S3.SS2.p5.2.m2.2.2.1.cmml"><msup id="S3.SS2.p5.2.m2.2.2.1.3" xref="S3.SS2.p5.2.m2.2.2.1.3.cmml"><mi id="S3.SS2.p5.2.m2.2.2.1.3.2" xref="S3.SS2.p5.2.m2.2.2.1.3.2.cmml">f</mi><mo id="S3.SS2.p5.2.m2.2.2.1.3.3" xref="S3.SS2.p5.2.m2.2.2.1.3.3.cmml">∗</mo></msup><mo id="S3.SS2.p5.2.m2.2.2.1.2" xref="S3.SS2.p5.2.m2.2.2.1.2.cmml">⁢</mo><mrow id="S3.SS2.p5.2.m2.2.2.1.1.1" xref="S3.SS2.p5.2.m2.2.2.1.1.2.cmml"><mo id="S3.SS2.p5.2.m2.2.2.1.1.1.2" stretchy="false" xref="S3.SS2.p5.2.m2.2.2.1.1.2.cmml">(</mo><mi id="S3.SS2.p5.2.m2.1.1" xref="S3.SS2.p5.2.m2.1.1.cmml">c</mi><mo id="S3.SS2.p5.2.m2.2.2.1.1.1.3" xref="S3.SS2.p5.2.m2.2.2.1.1.2.cmml">,</mo><msub id="S3.SS2.p5.2.m2.2.2.1.1.1.1" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1.cmml"><mi id="S3.SS2.p5.2.m2.2.2.1.1.1.1.2" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1.2.cmml">q</mi><mn id="S3.SS2.p5.2.m2.2.2.1.1.1.1.3" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS2.p5.2.m2.2.2.1.1.1.4" stretchy="false" xref="S3.SS2.p5.2.m2.2.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p5.2.m2.2.2.2" xref="S3.SS2.p5.2.m2.2.2.2.cmml">=</mo><mn id="S3.SS2.p5.2.m2.2.2.3" xref="S3.SS2.p5.2.m2.2.2.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p5.2.m2.2b"><apply id="S3.SS2.p5.2.m2.2.2.cmml" xref="S3.SS2.p5.2.m2.2.2"><eq id="S3.SS2.p5.2.m2.2.2.2.cmml" xref="S3.SS2.p5.2.m2.2.2.2"></eq><apply id="S3.SS2.p5.2.m2.2.2.1.cmml" xref="S3.SS2.p5.2.m2.2.2.1"><times id="S3.SS2.p5.2.m2.2.2.1.2.cmml" xref="S3.SS2.p5.2.m2.2.2.1.2"></times><apply id="S3.SS2.p5.2.m2.2.2.1.3.cmml" xref="S3.SS2.p5.2.m2.2.2.1.3"><csymbol cd="ambiguous" id="S3.SS2.p5.2.m2.2.2.1.3.1.cmml" xref="S3.SS2.p5.2.m2.2.2.1.3">superscript</csymbol><ci id="S3.SS2.p5.2.m2.2.2.1.3.2.cmml" xref="S3.SS2.p5.2.m2.2.2.1.3.2">𝑓</ci><times id="S3.SS2.p5.2.m2.2.2.1.3.3.cmml" xref="S3.SS2.p5.2.m2.2.2.1.3.3"></times></apply><interval closure="open" id="S3.SS2.p5.2.m2.2.2.1.1.2.cmml" xref="S3.SS2.p5.2.m2.2.2.1.1.1"><ci id="S3.SS2.p5.2.m2.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1">𝑐</ci><apply id="S3.SS2.p5.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p5.2.m2.2.2.1.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p5.2.m2.2.2.1.1.1.1.2.cmml" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1.2">𝑞</ci><cn id="S3.SS2.p5.2.m2.2.2.1.1.1.1.3.cmml" type="integer" xref="S3.SS2.p5.2.m2.2.2.1.1.1.1.3">0</cn></apply></interval></apply><cn id="S3.SS2.p5.2.m2.2.2.3.cmml" type="integer" xref="S3.SS2.p5.2.m2.2.2.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p5.2.m2.2c">f^{*}(c,q_{0})=1</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p5.2.m2.2d">italic_f start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( italic_c , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ) = 1</annotation></semantics></math>. This simplifies the problem as we need to find contents that score high values following the chosen approximation function, rather than accurately estimating the entire function.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Misalignment</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.13">As many have previously noted <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib5" title="">2022</a>; Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib29" title="">2023</a>; Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite>, directly using cosine similarity for retrieval within RAG systems can be problematic since these representations often reside in different semantic spaces, leading to misaligned retrieval. To clearly illustrate this, consider the following sentences and their corresponding embeddings:</p>
<ul class="ltx_itemize" id="S3.I2">
<li class="ltx_item" id="S3.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i1.p1">
<p class="ltx_p" id="S3.I2.i1.p1.1"><math alttext="q_{1}=" class="ltx_Math" display="inline" id="S3.I2.i1.p1.1.m1.1"><semantics id="S3.I2.i1.p1.1.m1.1a"><mrow id="S3.I2.i1.p1.1.m1.1.1" xref="S3.I2.i1.p1.1.m1.1.1.cmml"><msub id="S3.I2.i1.p1.1.m1.1.1.2" xref="S3.I2.i1.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i1.p1.1.m1.1.1.2.2" xref="S3.I2.i1.p1.1.m1.1.1.2.2.cmml">q</mi><mn id="S3.I2.i1.p1.1.m1.1.1.2.3" xref="S3.I2.i1.p1.1.m1.1.1.2.3.cmml">1</mn></msub><mo id="S3.I2.i1.p1.1.m1.1.1.1" xref="S3.I2.i1.p1.1.m1.1.1.1.cmml">=</mo><mi id="S3.I2.i1.p1.1.m1.1.1.3" xref="S3.I2.i1.p1.1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i1.p1.1.m1.1b"><apply id="S3.I2.i1.p1.1.m1.1.1.cmml" xref="S3.I2.i1.p1.1.m1.1.1"><eq id="S3.I2.i1.p1.1.m1.1.1.1.cmml" xref="S3.I2.i1.p1.1.m1.1.1.1"></eq><apply id="S3.I2.i1.p1.1.m1.1.1.2.cmml" xref="S3.I2.i1.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i1.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i1.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i1.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i1.p1.1.m1.1.1.2.2">𝑞</ci><cn id="S3.I2.i1.p1.1.m1.1.1.2.3.cmml" type="integer" xref="S3.I2.i1.p1.1.m1.1.1.2.3">1</cn></apply><csymbol cd="latexml" id="S3.I2.i1.p1.1.m1.1.1.3.cmml" xref="S3.I2.i1.p1.1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i1.p1.1.m1.1c">q_{1}=</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i1.p1.1.m1.1d">italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT =</annotation></semantics></math> “Where was Queen Elizabeth born?”</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i2.p1">
<p class="ltx_p" id="S3.I2.i2.p1.1"><math alttext="q_{2}=" class="ltx_Math" display="inline" id="S3.I2.i2.p1.1.m1.1"><semantics id="S3.I2.i2.p1.1.m1.1a"><mrow id="S3.I2.i2.p1.1.m1.1.1" xref="S3.I2.i2.p1.1.m1.1.1.cmml"><msub id="S3.I2.i2.p1.1.m1.1.1.2" xref="S3.I2.i2.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i2.p1.1.m1.1.1.2.2" xref="S3.I2.i2.p1.1.m1.1.1.2.2.cmml">q</mi><mn id="S3.I2.i2.p1.1.m1.1.1.2.3" xref="S3.I2.i2.p1.1.m1.1.1.2.3.cmml">2</mn></msub><mo id="S3.I2.i2.p1.1.m1.1.1.1" xref="S3.I2.i2.p1.1.m1.1.1.1.cmml">=</mo><mi id="S3.I2.i2.p1.1.m1.1.1.3" xref="S3.I2.i2.p1.1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i2.p1.1.m1.1b"><apply id="S3.I2.i2.p1.1.m1.1.1.cmml" xref="S3.I2.i2.p1.1.m1.1.1"><eq id="S3.I2.i2.p1.1.m1.1.1.1.cmml" xref="S3.I2.i2.p1.1.m1.1.1.1"></eq><apply id="S3.I2.i2.p1.1.m1.1.1.2.cmml" xref="S3.I2.i2.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i2.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i2.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i2.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i2.p1.1.m1.1.1.2.2">𝑞</ci><cn id="S3.I2.i2.p1.1.m1.1.1.2.3.cmml" type="integer" xref="S3.I2.i2.p1.1.m1.1.1.2.3">2</cn></apply><csymbol cd="latexml" id="S3.I2.i2.p1.1.m1.1.1.3.cmml" xref="S3.I2.i2.p1.1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i2.p1.1.m1.1c">q_{2}=</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i2.p1.1.m1.1d">italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT =</annotation></semantics></math> “Where was the Queen of Spain born?”</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i3.p1">
<p class="ltx_p" id="S3.I2.i3.p1.1"><math alttext="c_{1}=" class="ltx_Math" display="inline" id="S3.I2.i3.p1.1.m1.1"><semantics id="S3.I2.i3.p1.1.m1.1a"><mrow id="S3.I2.i3.p1.1.m1.1.1" xref="S3.I2.i3.p1.1.m1.1.1.cmml"><msub id="S3.I2.i3.p1.1.m1.1.1.2" xref="S3.I2.i3.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i3.p1.1.m1.1.1.2.2" xref="S3.I2.i3.p1.1.m1.1.1.2.2.cmml">c</mi><mn id="S3.I2.i3.p1.1.m1.1.1.2.3" xref="S3.I2.i3.p1.1.m1.1.1.2.3.cmml">1</mn></msub><mo id="S3.I2.i3.p1.1.m1.1.1.1" xref="S3.I2.i3.p1.1.m1.1.1.1.cmml">=</mo><mi id="S3.I2.i3.p1.1.m1.1.1.3" xref="S3.I2.i3.p1.1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i3.p1.1.m1.1b"><apply id="S3.I2.i3.p1.1.m1.1.1.cmml" xref="S3.I2.i3.p1.1.m1.1.1"><eq id="S3.I2.i3.p1.1.m1.1.1.1.cmml" xref="S3.I2.i3.p1.1.m1.1.1.1"></eq><apply id="S3.I2.i3.p1.1.m1.1.1.2.cmml" xref="S3.I2.i3.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i3.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i3.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i3.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i3.p1.1.m1.1.1.2.2">𝑐</ci><cn id="S3.I2.i3.p1.1.m1.1.1.2.3.cmml" type="integer" xref="S3.I2.i3.p1.1.m1.1.1.2.3">1</cn></apply><csymbol cd="latexml" id="S3.I2.i3.p1.1.m1.1.1.3.cmml" xref="S3.I2.i3.p1.1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i3.p1.1.m1.1c">c_{1}=</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i3.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT =</annotation></semantics></math> “The former monarch of the British empire was born in London. Corgis are amazing fun dogs.”</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i4.p1">
<p class="ltx_p" id="S3.I2.i4.p1.1"><math alttext="c_{2}=" class="ltx_Math" display="inline" id="S3.I2.i4.p1.1.m1.1"><semantics id="S3.I2.i4.p1.1.m1.1a"><mrow id="S3.I2.i4.p1.1.m1.1.1" xref="S3.I2.i4.p1.1.m1.1.1.cmml"><msub id="S3.I2.i4.p1.1.m1.1.1.2" xref="S3.I2.i4.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i4.p1.1.m1.1.1.2.2" xref="S3.I2.i4.p1.1.m1.1.1.2.2.cmml">c</mi><mn id="S3.I2.i4.p1.1.m1.1.1.2.3" xref="S3.I2.i4.p1.1.m1.1.1.2.3.cmml">2</mn></msub><mo id="S3.I2.i4.p1.1.m1.1.1.1" xref="S3.I2.i4.p1.1.m1.1.1.1.cmml">=</mo><mi id="S3.I2.i4.p1.1.m1.1.1.3" xref="S3.I2.i4.p1.1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i4.p1.1.m1.1b"><apply id="S3.I2.i4.p1.1.m1.1.1.cmml" xref="S3.I2.i4.p1.1.m1.1.1"><eq id="S3.I2.i4.p1.1.m1.1.1.1.cmml" xref="S3.I2.i4.p1.1.m1.1.1.1"></eq><apply id="S3.I2.i4.p1.1.m1.1.1.2.cmml" xref="S3.I2.i4.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i4.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i4.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i4.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i4.p1.1.m1.1.1.2.2">𝑐</ci><cn id="S3.I2.i4.p1.1.m1.1.1.2.3.cmml" type="integer" xref="S3.I2.i4.p1.1.m1.1.1.2.3">2</cn></apply><csymbol cd="latexml" id="S3.I2.i4.p1.1.m1.1.1.3.cmml" xref="S3.I2.i4.p1.1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i4.p1.1.m1.1c">c_{2}=</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i4.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT =</annotation></semantics></math> “The Spanish monarch was born in Madrid.”</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I2.i5.p1">
<p class="ltx_p" id="S3.I2.i5.p1.1"><math alttext="c_{3}=" class="ltx_Math" display="inline" id="S3.I2.i5.p1.1.m1.1"><semantics id="S3.I2.i5.p1.1.m1.1a"><mrow id="S3.I2.i5.p1.1.m1.1.1" xref="S3.I2.i5.p1.1.m1.1.1.cmml"><msub id="S3.I2.i5.p1.1.m1.1.1.2" xref="S3.I2.i5.p1.1.m1.1.1.2.cmml"><mi id="S3.I2.i5.p1.1.m1.1.1.2.2" xref="S3.I2.i5.p1.1.m1.1.1.2.2.cmml">c</mi><mn id="S3.I2.i5.p1.1.m1.1.1.2.3" xref="S3.I2.i5.p1.1.m1.1.1.2.3.cmml">3</mn></msub><mo id="S3.I2.i5.p1.1.m1.1.1.1" xref="S3.I2.i5.p1.1.m1.1.1.1.cmml">=</mo><mi id="S3.I2.i5.p1.1.m1.1.1.3" xref="S3.I2.i5.p1.1.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I2.i5.p1.1.m1.1b"><apply id="S3.I2.i5.p1.1.m1.1.1.cmml" xref="S3.I2.i5.p1.1.m1.1.1"><eq id="S3.I2.i5.p1.1.m1.1.1.1.cmml" xref="S3.I2.i5.p1.1.m1.1.1.1"></eq><apply id="S3.I2.i5.p1.1.m1.1.1.2.cmml" xref="S3.I2.i5.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.I2.i5.p1.1.m1.1.1.2.1.cmml" xref="S3.I2.i5.p1.1.m1.1.1.2">subscript</csymbol><ci id="S3.I2.i5.p1.1.m1.1.1.2.2.cmml" xref="S3.I2.i5.p1.1.m1.1.1.2.2">𝑐</ci><cn id="S3.I2.i5.p1.1.m1.1.1.2.3.cmml" type="integer" xref="S3.I2.i5.p1.1.m1.1.1.2.3">3</cn></apply><csymbol cd="latexml" id="S3.I2.i5.p1.1.m1.1.1.3.cmml" xref="S3.I2.i5.p1.1.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I2.i5.p1.1.m1.1c">c_{3}=</annotation><annotation encoding="application/x-llamapun" id="S3.I2.i5.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT =</annotation></semantics></math> “The Queen of Spain was born in May.”</p>
</div>
</li>
</ul>
<p class="ltx_p" id="S3.SS3.p1.12">In this example clearly <math alttext="c_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><msub id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mi id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml">c</mi><mn id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2">𝑐</ci><cn id="S3.SS3.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">c_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> answers <math alttext="q_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.2.m2.1"><semantics id="S3.SS3.p1.2.m2.1a"><msub id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml"><mi id="S3.SS3.p1.2.m2.1.1.2" xref="S3.SS3.p1.2.m2.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.2.m2.1.1.3" xref="S3.SS3.p1.2.m2.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><apply id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.2.m2.1.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p1.2.m2.1.1.2.cmml" xref="S3.SS3.p1.2.m2.1.1.2">𝑞</ci><cn id="S3.SS3.p1.2.m2.1.1.3.cmml" type="integer" xref="S3.SS3.p1.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">q_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.2.m2.1d">italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="c_{2}" class="ltx_Math" display="inline" id="S3.SS3.p1.3.m3.1"><semantics id="S3.SS3.p1.3.m3.1a"><msub id="S3.SS3.p1.3.m3.1.1" xref="S3.SS3.p1.3.m3.1.1.cmml"><mi id="S3.SS3.p1.3.m3.1.1.2" xref="S3.SS3.p1.3.m3.1.1.2.cmml">c</mi><mn id="S3.SS3.p1.3.m3.1.1.3" xref="S3.SS3.p1.3.m3.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.1b"><apply id="S3.SS3.p1.3.m3.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.1.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.p1.3.m3.1.1.2.cmml" xref="S3.SS3.p1.3.m3.1.1.2">𝑐</ci><cn id="S3.SS3.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS3.p1.3.m3.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.1c">c_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.3.m3.1d">italic_c start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math> answers <math alttext="q_{2}" class="ltx_Math" display="inline" id="S3.SS3.p1.4.m4.1"><semantics id="S3.SS3.p1.4.m4.1a"><msub id="S3.SS3.p1.4.m4.1.1" xref="S3.SS3.p1.4.m4.1.1.cmml"><mi id="S3.SS3.p1.4.m4.1.1.2" xref="S3.SS3.p1.4.m4.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.4.m4.1.1.3" xref="S3.SS3.p1.4.m4.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.4.m4.1b"><apply id="S3.SS3.p1.4.m4.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m4.1.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.p1.4.m4.1.1.2.cmml" xref="S3.SS3.p1.4.m4.1.1.2">𝑞</ci><cn id="S3.SS3.p1.4.m4.1.1.3.cmml" type="integer" xref="S3.SS3.p1.4.m4.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.4.m4.1c">q_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.4.m4.1d">italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math>.
Yet after calculating embeddings similarities using our text embedder, <math alttext="d(q_{1},q_{2})=.12&lt;d(q_{1},c_{2})=.28&lt;d(q_{1},c_{1})=.32" class="ltx_Math" display="inline" id="S3.SS3.p1.5.m5.6"><semantics id="S3.SS3.p1.5.m5.6a"><mrow id="S3.SS3.p1.5.m5.6.6" xref="S3.SS3.p1.5.m5.6.6.cmml"><mrow id="S3.SS3.p1.5.m5.2.2.2" xref="S3.SS3.p1.5.m5.2.2.2.cmml"><mi id="S3.SS3.p1.5.m5.2.2.2.4" xref="S3.SS3.p1.5.m5.2.2.2.4.cmml">d</mi><mo id="S3.SS3.p1.5.m5.2.2.2.3" xref="S3.SS3.p1.5.m5.2.2.2.3.cmml">⁢</mo><mrow id="S3.SS3.p1.5.m5.2.2.2.2.2" xref="S3.SS3.p1.5.m5.2.2.2.2.3.cmml"><mo id="S3.SS3.p1.5.m5.2.2.2.2.2.3" stretchy="false" xref="S3.SS3.p1.5.m5.2.2.2.2.3.cmml">(</mo><msub id="S3.SS3.p1.5.m5.1.1.1.1.1.1" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1.cmml"><mi id="S3.SS3.p1.5.m5.1.1.1.1.1.1.2" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.5.m5.1.1.1.1.1.1.3" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS3.p1.5.m5.2.2.2.2.2.4" xref="S3.SS3.p1.5.m5.2.2.2.2.3.cmml">,</mo><msub id="S3.SS3.p1.5.m5.2.2.2.2.2.2" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2.cmml"><mi id="S3.SS3.p1.5.m5.2.2.2.2.2.2.2" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2.2.cmml">q</mi><mn id="S3.SS3.p1.5.m5.2.2.2.2.2.2.3" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS3.p1.5.m5.2.2.2.2.2.5" stretchy="false" xref="S3.SS3.p1.5.m5.2.2.2.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.5.m5.6.6.8" xref="S3.SS3.p1.5.m5.6.6.8.cmml">=</mo><mn id="S3.SS3.p1.5.m5.6.6.9" xref="S3.SS3.p1.5.m5.6.6.9.cmml">.12</mn><mo id="S3.SS3.p1.5.m5.6.6.10" xref="S3.SS3.p1.5.m5.6.6.10.cmml">&lt;</mo><mrow id="S3.SS3.p1.5.m5.4.4.4" xref="S3.SS3.p1.5.m5.4.4.4.cmml"><mi id="S3.SS3.p1.5.m5.4.4.4.4" xref="S3.SS3.p1.5.m5.4.4.4.4.cmml">d</mi><mo id="S3.SS3.p1.5.m5.4.4.4.3" xref="S3.SS3.p1.5.m5.4.4.4.3.cmml">⁢</mo><mrow id="S3.SS3.p1.5.m5.4.4.4.2.2" xref="S3.SS3.p1.5.m5.4.4.4.2.3.cmml"><mo id="S3.SS3.p1.5.m5.4.4.4.2.2.3" stretchy="false" xref="S3.SS3.p1.5.m5.4.4.4.2.3.cmml">(</mo><msub id="S3.SS3.p1.5.m5.3.3.3.1.1.1" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1.cmml"><mi id="S3.SS3.p1.5.m5.3.3.3.1.1.1.2" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.5.m5.3.3.3.1.1.1.3" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS3.p1.5.m5.4.4.4.2.2.4" xref="S3.SS3.p1.5.m5.4.4.4.2.3.cmml">,</mo><msub id="S3.SS3.p1.5.m5.4.4.4.2.2.2" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2.cmml"><mi id="S3.SS3.p1.5.m5.4.4.4.2.2.2.2" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2.2.cmml">c</mi><mn id="S3.SS3.p1.5.m5.4.4.4.2.2.2.3" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS3.p1.5.m5.4.4.4.2.2.5" stretchy="false" xref="S3.SS3.p1.5.m5.4.4.4.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.5.m5.6.6.11" xref="S3.SS3.p1.5.m5.6.6.11.cmml">=</mo><mn id="S3.SS3.p1.5.m5.6.6.12" xref="S3.SS3.p1.5.m5.6.6.12.cmml">.28</mn><mo id="S3.SS3.p1.5.m5.6.6.13" xref="S3.SS3.p1.5.m5.6.6.13.cmml">&lt;</mo><mrow id="S3.SS3.p1.5.m5.6.6.6" xref="S3.SS3.p1.5.m5.6.6.6.cmml"><mi id="S3.SS3.p1.5.m5.6.6.6.4" xref="S3.SS3.p1.5.m5.6.6.6.4.cmml">d</mi><mo id="S3.SS3.p1.5.m5.6.6.6.3" xref="S3.SS3.p1.5.m5.6.6.6.3.cmml">⁢</mo><mrow id="S3.SS3.p1.5.m5.6.6.6.2.2" xref="S3.SS3.p1.5.m5.6.6.6.2.3.cmml"><mo id="S3.SS3.p1.5.m5.6.6.6.2.2.3" stretchy="false" xref="S3.SS3.p1.5.m5.6.6.6.2.3.cmml">(</mo><msub id="S3.SS3.p1.5.m5.5.5.5.1.1.1" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1.cmml"><mi id="S3.SS3.p1.5.m5.5.5.5.1.1.1.2" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.5.m5.5.5.5.1.1.1.3" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS3.p1.5.m5.6.6.6.2.2.4" xref="S3.SS3.p1.5.m5.6.6.6.2.3.cmml">,</mo><msub id="S3.SS3.p1.5.m5.6.6.6.2.2.2" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2.cmml"><mi id="S3.SS3.p1.5.m5.6.6.6.2.2.2.2" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2.2.cmml">c</mi><mn id="S3.SS3.p1.5.m5.6.6.6.2.2.2.3" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2.3.cmml">1</mn></msub><mo id="S3.SS3.p1.5.m5.6.6.6.2.2.5" stretchy="false" xref="S3.SS3.p1.5.m5.6.6.6.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.5.m5.6.6.14" xref="S3.SS3.p1.5.m5.6.6.14.cmml">=</mo><mn id="S3.SS3.p1.5.m5.6.6.15" xref="S3.SS3.p1.5.m5.6.6.15.cmml">.32</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.5.m5.6b"><apply id="S3.SS3.p1.5.m5.6.6.cmml" xref="S3.SS3.p1.5.m5.6.6"><and id="S3.SS3.p1.5.m5.6.6a.cmml" xref="S3.SS3.p1.5.m5.6.6"></and><apply id="S3.SS3.p1.5.m5.6.6b.cmml" xref="S3.SS3.p1.5.m5.6.6"><eq id="S3.SS3.p1.5.m5.6.6.8.cmml" xref="S3.SS3.p1.5.m5.6.6.8"></eq><apply id="S3.SS3.p1.5.m5.2.2.2.cmml" xref="S3.SS3.p1.5.m5.2.2.2"><times id="S3.SS3.p1.5.m5.2.2.2.3.cmml" xref="S3.SS3.p1.5.m5.2.2.2.3"></times><ci id="S3.SS3.p1.5.m5.2.2.2.4.cmml" xref="S3.SS3.p1.5.m5.2.2.2.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.5.m5.2.2.2.2.3.cmml" xref="S3.SS3.p1.5.m5.2.2.2.2.2"><apply id="S3.SS3.p1.5.m5.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.5.m5.1.1.1.1.1.1.2.cmml" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.5.m5.1.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.1.1.1.1.1.1.3">1</cn></apply><apply id="S3.SS3.p1.5.m5.2.2.2.2.2.2.cmml" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.2.2.2.2.2.2.1.cmml" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.5.m5.2.2.2.2.2.2.2.cmml" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2.2">𝑞</ci><cn id="S3.SS3.p1.5.m5.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.2.2.2.2.2.2.3">2</cn></apply></interval></apply><cn id="S3.SS3.p1.5.m5.6.6.9.cmml" type="float" xref="S3.SS3.p1.5.m5.6.6.9">.12</cn></apply><apply id="S3.SS3.p1.5.m5.6.6c.cmml" xref="S3.SS3.p1.5.m5.6.6"><lt id="S3.SS3.p1.5.m5.6.6.10.cmml" xref="S3.SS3.p1.5.m5.6.6.10"></lt><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.5.m5.6.6.9.cmml" id="S3.SS3.p1.5.m5.6.6d.cmml" xref="S3.SS3.p1.5.m5.6.6"></share><apply id="S3.SS3.p1.5.m5.4.4.4.cmml" xref="S3.SS3.p1.5.m5.4.4.4"><times id="S3.SS3.p1.5.m5.4.4.4.3.cmml" xref="S3.SS3.p1.5.m5.4.4.4.3"></times><ci id="S3.SS3.p1.5.m5.4.4.4.4.cmml" xref="S3.SS3.p1.5.m5.4.4.4.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.5.m5.4.4.4.2.3.cmml" xref="S3.SS3.p1.5.m5.4.4.4.2.2"><apply id="S3.SS3.p1.5.m5.3.3.3.1.1.1.cmml" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.3.3.3.1.1.1.1.cmml" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.5.m5.3.3.3.1.1.1.2.cmml" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.5.m5.3.3.3.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.3.3.3.1.1.1.3">1</cn></apply><apply id="S3.SS3.p1.5.m5.4.4.4.2.2.2.cmml" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.4.4.4.2.2.2.1.cmml" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.5.m5.4.4.4.2.2.2.2.cmml" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2.2">𝑐</ci><cn id="S3.SS3.p1.5.m5.4.4.4.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.4.4.4.2.2.2.3">2</cn></apply></interval></apply></apply><apply id="S3.SS3.p1.5.m5.6.6e.cmml" xref="S3.SS3.p1.5.m5.6.6"><eq id="S3.SS3.p1.5.m5.6.6.11.cmml" xref="S3.SS3.p1.5.m5.6.6.11"></eq><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.5.m5.4.4.4.cmml" id="S3.SS3.p1.5.m5.6.6f.cmml" xref="S3.SS3.p1.5.m5.6.6"></share><cn id="S3.SS3.p1.5.m5.6.6.12.cmml" type="float" xref="S3.SS3.p1.5.m5.6.6.12">.28</cn></apply><apply id="S3.SS3.p1.5.m5.6.6g.cmml" xref="S3.SS3.p1.5.m5.6.6"><lt id="S3.SS3.p1.5.m5.6.6.13.cmml" xref="S3.SS3.p1.5.m5.6.6.13"></lt><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.5.m5.6.6.12.cmml" id="S3.SS3.p1.5.m5.6.6h.cmml" xref="S3.SS3.p1.5.m5.6.6"></share><apply id="S3.SS3.p1.5.m5.6.6.6.cmml" xref="S3.SS3.p1.5.m5.6.6.6"><times id="S3.SS3.p1.5.m5.6.6.6.3.cmml" xref="S3.SS3.p1.5.m5.6.6.6.3"></times><ci id="S3.SS3.p1.5.m5.6.6.6.4.cmml" xref="S3.SS3.p1.5.m5.6.6.6.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.5.m5.6.6.6.2.3.cmml" xref="S3.SS3.p1.5.m5.6.6.6.2.2"><apply id="S3.SS3.p1.5.m5.5.5.5.1.1.1.cmml" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.5.5.5.1.1.1.1.cmml" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.5.m5.5.5.5.1.1.1.2.cmml" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.5.m5.5.5.5.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.5.5.5.1.1.1.3">1</cn></apply><apply id="S3.SS3.p1.5.m5.6.6.6.2.2.2.cmml" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m5.6.6.6.2.2.2.1.cmml" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.5.m5.6.6.6.2.2.2.2.cmml" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2.2">𝑐</ci><cn id="S3.SS3.p1.5.m5.6.6.6.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.5.m5.6.6.6.2.2.2.3">1</cn></apply></interval></apply></apply><apply id="S3.SS3.p1.5.m5.6.6i.cmml" xref="S3.SS3.p1.5.m5.6.6"><eq id="S3.SS3.p1.5.m5.6.6.14.cmml" xref="S3.SS3.p1.5.m5.6.6.14"></eq><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.5.m5.6.6.6.cmml" id="S3.SS3.p1.5.m5.6.6j.cmml" xref="S3.SS3.p1.5.m5.6.6"></share><cn id="S3.SS3.p1.5.m5.6.6.15.cmml" type="float" xref="S3.SS3.p1.5.m5.6.6.15">.32</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.5.m5.6c">d(q_{1},q_{2})=.12&lt;d(q_{1},c_{2})=.28&lt;d(q_{1},c_{1})=.32</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.5.m5.6d">italic_d ( italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) = .12 &lt; italic_d ( italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_c start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) = .28 &lt; italic_d ( italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ) = .32</annotation></semantics></math>. This implies that the query <math alttext="q_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.6.m6.1"><semantics id="S3.SS3.p1.6.m6.1a"><msub id="S3.SS3.p1.6.m6.1.1" xref="S3.SS3.p1.6.m6.1.1.cmml"><mi id="S3.SS3.p1.6.m6.1.1.2" xref="S3.SS3.p1.6.m6.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.6.m6.1.1.3" xref="S3.SS3.p1.6.m6.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.6.m6.1b"><apply id="S3.SS3.p1.6.m6.1.1.cmml" xref="S3.SS3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.6.m6.1.1.1.cmml" xref="S3.SS3.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.p1.6.m6.1.1.2.cmml" xref="S3.SS3.p1.6.m6.1.1.2">𝑞</ci><cn id="S3.SS3.p1.6.m6.1.1.3.cmml" type="integer" xref="S3.SS3.p1.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.6.m6.1c">q_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.6.m6.1d">italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> is geometrically closer to the semantically similar query <math alttext="q_{2}" class="ltx_Math" display="inline" id="S3.SS3.p1.7.m7.1"><semantics id="S3.SS3.p1.7.m7.1a"><msub id="S3.SS3.p1.7.m7.1.1" xref="S3.SS3.p1.7.m7.1.1.cmml"><mi id="S3.SS3.p1.7.m7.1.1.2" xref="S3.SS3.p1.7.m7.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.7.m7.1.1.3" xref="S3.SS3.p1.7.m7.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.7.m7.1b"><apply id="S3.SS3.p1.7.m7.1.1.cmml" xref="S3.SS3.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.7.m7.1.1.1.cmml" xref="S3.SS3.p1.7.m7.1.1">subscript</csymbol><ci id="S3.SS3.p1.7.m7.1.1.2.cmml" xref="S3.SS3.p1.7.m7.1.1.2">𝑞</ci><cn id="S3.SS3.p1.7.m7.1.1.3.cmml" type="integer" xref="S3.SS3.p1.7.m7.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.7.m7.1c">q_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.7.m7.1d">italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math> than it is to the content <math alttext="c_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.8.m8.1"><semantics id="S3.SS3.p1.8.m8.1a"><msub id="S3.SS3.p1.8.m8.1.1" xref="S3.SS3.p1.8.m8.1.1.cmml"><mi id="S3.SS3.p1.8.m8.1.1.2" xref="S3.SS3.p1.8.m8.1.1.2.cmml">c</mi><mn id="S3.SS3.p1.8.m8.1.1.3" xref="S3.SS3.p1.8.m8.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.8.m8.1b"><apply id="S3.SS3.p1.8.m8.1.1.cmml" xref="S3.SS3.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.8.m8.1.1.1.cmml" xref="S3.SS3.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS3.p1.8.m8.1.1.2.cmml" xref="S3.SS3.p1.8.m8.1.1.2">𝑐</ci><cn id="S3.SS3.p1.8.m8.1.1.3.cmml" type="integer" xref="S3.SS3.p1.8.m8.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.8.m8.1c">c_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.8.m8.1d">italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> that actually contains the answer.mplying that the query <math alttext="q_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.9.m9.1"><semantics id="S3.SS3.p1.9.m9.1a"><msub id="S3.SS3.p1.9.m9.1.1" xref="S3.SS3.p1.9.m9.1.1.cmml"><mi id="S3.SS3.p1.9.m9.1.1.2" xref="S3.SS3.p1.9.m9.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.9.m9.1.1.3" xref="S3.SS3.p1.9.m9.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.9.m9.1b"><apply id="S3.SS3.p1.9.m9.1.1.cmml" xref="S3.SS3.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.9.m9.1.1.1.cmml" xref="S3.SS3.p1.9.m9.1.1">subscript</csymbol><ci id="S3.SS3.p1.9.m9.1.1.2.cmml" xref="S3.SS3.p1.9.m9.1.1.2">𝑞</ci><cn id="S3.SS3.p1.9.m9.1.1.3.cmml" type="integer" xref="S3.SS3.p1.9.m9.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.9.m9.1c">q_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.9.m9.1d">italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> is geometrically closer to the semantically similar query <math alttext="q_{2}" class="ltx_Math" display="inline" id="S3.SS3.p1.10.m10.1"><semantics id="S3.SS3.p1.10.m10.1a"><msub id="S3.SS3.p1.10.m10.1.1" xref="S3.SS3.p1.10.m10.1.1.cmml"><mi id="S3.SS3.p1.10.m10.1.1.2" xref="S3.SS3.p1.10.m10.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.10.m10.1.1.3" xref="S3.SS3.p1.10.m10.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.10.m10.1b"><apply id="S3.SS3.p1.10.m10.1.1.cmml" xref="S3.SS3.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.10.m10.1.1.1.cmml" xref="S3.SS3.p1.10.m10.1.1">subscript</csymbol><ci id="S3.SS3.p1.10.m10.1.1.2.cmml" xref="S3.SS3.p1.10.m10.1.1.2">𝑞</ci><cn id="S3.SS3.p1.10.m10.1.1.3.cmml" type="integer" xref="S3.SS3.p1.10.m10.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.10.m10.1c">q_{2}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.10.m10.1d">italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math> than it is to the content <math alttext="c_{1}" class="ltx_Math" display="inline" id="S3.SS3.p1.11.m11.1"><semantics id="S3.SS3.p1.11.m11.1a"><msub id="S3.SS3.p1.11.m11.1.1" xref="S3.SS3.p1.11.m11.1.1.cmml"><mi id="S3.SS3.p1.11.m11.1.1.2" xref="S3.SS3.p1.11.m11.1.1.2.cmml">c</mi><mn id="S3.SS3.p1.11.m11.1.1.3" xref="S3.SS3.p1.11.m11.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.11.m11.1b"><apply id="S3.SS3.p1.11.m11.1.1.cmml" xref="S3.SS3.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.11.m11.1.1.1.cmml" xref="S3.SS3.p1.11.m11.1.1">subscript</csymbol><ci id="S3.SS3.p1.11.m11.1.1.2.cmml" xref="S3.SS3.p1.11.m11.1.1.2">𝑐</ci><cn id="S3.SS3.p1.11.m11.1.1.3.cmml" type="integer" xref="S3.SS3.p1.11.m11.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.11.m11.1c">c_{1}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.11.m11.1d">italic_c start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> that actually contains the answer. A similar issue arises with <math alttext="d(q_{1},q_{2})=.12&lt;d(q_{2},c_{3})=.30&lt;d(q_{2},c_{2})" class="ltx_Math" display="inline" id="S3.SS3.p1.12.m12.6"><semantics id="S3.SS3.p1.12.m12.6a"><mrow id="S3.SS3.p1.12.m12.6.6" xref="S3.SS3.p1.12.m12.6.6.cmml"><mrow id="S3.SS3.p1.12.m12.2.2.2" xref="S3.SS3.p1.12.m12.2.2.2.cmml"><mi id="S3.SS3.p1.12.m12.2.2.2.4" xref="S3.SS3.p1.12.m12.2.2.2.4.cmml">d</mi><mo id="S3.SS3.p1.12.m12.2.2.2.3" xref="S3.SS3.p1.12.m12.2.2.2.3.cmml">⁢</mo><mrow id="S3.SS3.p1.12.m12.2.2.2.2.2" xref="S3.SS3.p1.12.m12.2.2.2.2.3.cmml"><mo id="S3.SS3.p1.12.m12.2.2.2.2.2.3" stretchy="false" xref="S3.SS3.p1.12.m12.2.2.2.2.3.cmml">(</mo><msub id="S3.SS3.p1.12.m12.1.1.1.1.1.1" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1.cmml"><mi id="S3.SS3.p1.12.m12.1.1.1.1.1.1.2" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.12.m12.1.1.1.1.1.1.3" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS3.p1.12.m12.2.2.2.2.2.4" xref="S3.SS3.p1.12.m12.2.2.2.2.3.cmml">,</mo><msub id="S3.SS3.p1.12.m12.2.2.2.2.2.2" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2.cmml"><mi id="S3.SS3.p1.12.m12.2.2.2.2.2.2.2" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2.2.cmml">q</mi><mn id="S3.SS3.p1.12.m12.2.2.2.2.2.2.3" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS3.p1.12.m12.2.2.2.2.2.5" stretchy="false" xref="S3.SS3.p1.12.m12.2.2.2.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.12.m12.6.6.8" xref="S3.SS3.p1.12.m12.6.6.8.cmml">=</mo><mn id="S3.SS3.p1.12.m12.6.6.9" xref="S3.SS3.p1.12.m12.6.6.9.cmml">.12</mn><mo id="S3.SS3.p1.12.m12.6.6.10" xref="S3.SS3.p1.12.m12.6.6.10.cmml">&lt;</mo><mrow id="S3.SS3.p1.12.m12.4.4.4" xref="S3.SS3.p1.12.m12.4.4.4.cmml"><mi id="S3.SS3.p1.12.m12.4.4.4.4" xref="S3.SS3.p1.12.m12.4.4.4.4.cmml">d</mi><mo id="S3.SS3.p1.12.m12.4.4.4.3" xref="S3.SS3.p1.12.m12.4.4.4.3.cmml">⁢</mo><mrow id="S3.SS3.p1.12.m12.4.4.4.2.2" xref="S3.SS3.p1.12.m12.4.4.4.2.3.cmml"><mo id="S3.SS3.p1.12.m12.4.4.4.2.2.3" stretchy="false" xref="S3.SS3.p1.12.m12.4.4.4.2.3.cmml">(</mo><msub id="S3.SS3.p1.12.m12.3.3.3.1.1.1" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1.cmml"><mi id="S3.SS3.p1.12.m12.3.3.3.1.1.1.2" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.12.m12.3.3.3.1.1.1.3" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1.3.cmml">2</mn></msub><mo id="S3.SS3.p1.12.m12.4.4.4.2.2.4" xref="S3.SS3.p1.12.m12.4.4.4.2.3.cmml">,</mo><msub id="S3.SS3.p1.12.m12.4.4.4.2.2.2" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2.cmml"><mi id="S3.SS3.p1.12.m12.4.4.4.2.2.2.2" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2.2.cmml">c</mi><mn id="S3.SS3.p1.12.m12.4.4.4.2.2.2.3" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2.3.cmml">3</mn></msub><mo id="S3.SS3.p1.12.m12.4.4.4.2.2.5" stretchy="false" xref="S3.SS3.p1.12.m12.4.4.4.2.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.12.m12.6.6.11" xref="S3.SS3.p1.12.m12.6.6.11.cmml">=</mo><mn id="S3.SS3.p1.12.m12.6.6.12" xref="S3.SS3.p1.12.m12.6.6.12.cmml">.30</mn><mo id="S3.SS3.p1.12.m12.6.6.13" xref="S3.SS3.p1.12.m12.6.6.13.cmml">&lt;</mo><mrow id="S3.SS3.p1.12.m12.6.6.6" xref="S3.SS3.p1.12.m12.6.6.6.cmml"><mi id="S3.SS3.p1.12.m12.6.6.6.4" xref="S3.SS3.p1.12.m12.6.6.6.4.cmml">d</mi><mo id="S3.SS3.p1.12.m12.6.6.6.3" xref="S3.SS3.p1.12.m12.6.6.6.3.cmml">⁢</mo><mrow id="S3.SS3.p1.12.m12.6.6.6.2.2" xref="S3.SS3.p1.12.m12.6.6.6.2.3.cmml"><mo id="S3.SS3.p1.12.m12.6.6.6.2.2.3" stretchy="false" xref="S3.SS3.p1.12.m12.6.6.6.2.3.cmml">(</mo><msub id="S3.SS3.p1.12.m12.5.5.5.1.1.1" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1.cmml"><mi id="S3.SS3.p1.12.m12.5.5.5.1.1.1.2" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1.2.cmml">q</mi><mn id="S3.SS3.p1.12.m12.5.5.5.1.1.1.3" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1.3.cmml">2</mn></msub><mo id="S3.SS3.p1.12.m12.6.6.6.2.2.4" xref="S3.SS3.p1.12.m12.6.6.6.2.3.cmml">,</mo><msub id="S3.SS3.p1.12.m12.6.6.6.2.2.2" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2.cmml"><mi id="S3.SS3.p1.12.m12.6.6.6.2.2.2.2" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2.2.cmml">c</mi><mn id="S3.SS3.p1.12.m12.6.6.6.2.2.2.3" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS3.p1.12.m12.6.6.6.2.2.5" stretchy="false" xref="S3.SS3.p1.12.m12.6.6.6.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.12.m12.6b"><apply id="S3.SS3.p1.12.m12.6.6.cmml" xref="S3.SS3.p1.12.m12.6.6"><and id="S3.SS3.p1.12.m12.6.6a.cmml" xref="S3.SS3.p1.12.m12.6.6"></and><apply id="S3.SS3.p1.12.m12.6.6b.cmml" xref="S3.SS3.p1.12.m12.6.6"><eq id="S3.SS3.p1.12.m12.6.6.8.cmml" xref="S3.SS3.p1.12.m12.6.6.8"></eq><apply id="S3.SS3.p1.12.m12.2.2.2.cmml" xref="S3.SS3.p1.12.m12.2.2.2"><times id="S3.SS3.p1.12.m12.2.2.2.3.cmml" xref="S3.SS3.p1.12.m12.2.2.2.3"></times><ci id="S3.SS3.p1.12.m12.2.2.2.4.cmml" xref="S3.SS3.p1.12.m12.2.2.2.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.12.m12.2.2.2.2.3.cmml" xref="S3.SS3.p1.12.m12.2.2.2.2.2"><apply id="S3.SS3.p1.12.m12.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.1.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.12.m12.1.1.1.1.1.1.2.cmml" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.12.m12.1.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.1.1.1.1.1.1.3">1</cn></apply><apply id="S3.SS3.p1.12.m12.2.2.2.2.2.2.cmml" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.2.2.2.2.2.2.1.cmml" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.12.m12.2.2.2.2.2.2.2.cmml" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2.2">𝑞</ci><cn id="S3.SS3.p1.12.m12.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.2.2.2.2.2.2.3">2</cn></apply></interval></apply><cn id="S3.SS3.p1.12.m12.6.6.9.cmml" type="float" xref="S3.SS3.p1.12.m12.6.6.9">.12</cn></apply><apply id="S3.SS3.p1.12.m12.6.6c.cmml" xref="S3.SS3.p1.12.m12.6.6"><lt id="S3.SS3.p1.12.m12.6.6.10.cmml" xref="S3.SS3.p1.12.m12.6.6.10"></lt><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.12.m12.6.6.9.cmml" id="S3.SS3.p1.12.m12.6.6d.cmml" xref="S3.SS3.p1.12.m12.6.6"></share><apply id="S3.SS3.p1.12.m12.4.4.4.cmml" xref="S3.SS3.p1.12.m12.4.4.4"><times id="S3.SS3.p1.12.m12.4.4.4.3.cmml" xref="S3.SS3.p1.12.m12.4.4.4.3"></times><ci id="S3.SS3.p1.12.m12.4.4.4.4.cmml" xref="S3.SS3.p1.12.m12.4.4.4.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.12.m12.4.4.4.2.3.cmml" xref="S3.SS3.p1.12.m12.4.4.4.2.2"><apply id="S3.SS3.p1.12.m12.3.3.3.1.1.1.cmml" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.3.3.3.1.1.1.1.cmml" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.12.m12.3.3.3.1.1.1.2.cmml" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.12.m12.3.3.3.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.3.3.3.1.1.1.3">2</cn></apply><apply id="S3.SS3.p1.12.m12.4.4.4.2.2.2.cmml" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.4.4.4.2.2.2.1.cmml" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.12.m12.4.4.4.2.2.2.2.cmml" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2.2">𝑐</ci><cn id="S3.SS3.p1.12.m12.4.4.4.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.4.4.4.2.2.2.3">3</cn></apply></interval></apply></apply><apply id="S3.SS3.p1.12.m12.6.6e.cmml" xref="S3.SS3.p1.12.m12.6.6"><eq id="S3.SS3.p1.12.m12.6.6.11.cmml" xref="S3.SS3.p1.12.m12.6.6.11"></eq><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.12.m12.4.4.4.cmml" id="S3.SS3.p1.12.m12.6.6f.cmml" xref="S3.SS3.p1.12.m12.6.6"></share><cn id="S3.SS3.p1.12.m12.6.6.12.cmml" type="float" xref="S3.SS3.p1.12.m12.6.6.12">.30</cn></apply><apply id="S3.SS3.p1.12.m12.6.6g.cmml" xref="S3.SS3.p1.12.m12.6.6"><lt id="S3.SS3.p1.12.m12.6.6.13.cmml" xref="S3.SS3.p1.12.m12.6.6.13"></lt><share href="https://arxiv.org/html/2407.18044v1#S3.SS3.p1.12.m12.6.6.12.cmml" id="S3.SS3.p1.12.m12.6.6h.cmml" xref="S3.SS3.p1.12.m12.6.6"></share><apply id="S3.SS3.p1.12.m12.6.6.6.cmml" xref="S3.SS3.p1.12.m12.6.6.6"><times id="S3.SS3.p1.12.m12.6.6.6.3.cmml" xref="S3.SS3.p1.12.m12.6.6.6.3"></times><ci id="S3.SS3.p1.12.m12.6.6.6.4.cmml" xref="S3.SS3.p1.12.m12.6.6.6.4">𝑑</ci><interval closure="open" id="S3.SS3.p1.12.m12.6.6.6.2.3.cmml" xref="S3.SS3.p1.12.m12.6.6.6.2.2"><apply id="S3.SS3.p1.12.m12.5.5.5.1.1.1.cmml" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.5.5.5.1.1.1.1.cmml" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1">subscript</csymbol><ci id="S3.SS3.p1.12.m12.5.5.5.1.1.1.2.cmml" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1.2">𝑞</ci><cn id="S3.SS3.p1.12.m12.5.5.5.1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.5.5.5.1.1.1.3">2</cn></apply><apply id="S3.SS3.p1.12.m12.6.6.6.2.2.2.cmml" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p1.12.m12.6.6.6.2.2.2.1.cmml" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2">subscript</csymbol><ci id="S3.SS3.p1.12.m12.6.6.6.2.2.2.2.cmml" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2.2">𝑐</ci><cn id="S3.SS3.p1.12.m12.6.6.6.2.2.2.3.cmml" type="integer" xref="S3.SS3.p1.12.m12.6.6.6.2.2.2.3">2</cn></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.12.m12.6c">d(q_{1},q_{2})=.12&lt;d(q_{2},c_{3})=.30&lt;d(q_{2},c_{2})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.12.m12.6d">italic_d ( italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) = .12 &lt; italic_d ( italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , italic_c start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT ) = .30 &lt; italic_d ( italic_q start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , italic_c start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT )</annotation></semantics></math>. This simple toy illustration underscores the limitations of traditional retrieval based solely on embedding similarity.</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">To overcome this alignment issue, some methods propose leveraging an LLM to draft a fake document or a candidate answer from the LLM’s implicit knowledge – see HyDE <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib5" title="">2022</a>)</cite>, Query2Doc <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib29" title="">2023</a>)</cite>, see QA-RAG <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite> – with a hope that these transformations and their embeddings would better align with those in <math alttext="\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS3.p2.1.m1.1"><semantics id="S3.SS3.p2.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.1.m1.1.1" xref="S3.SS3.p2.1.m1.1.1.cmml">𝒞</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p2.1.m1.1b"><ci id="S3.SS3.p2.1.m1.1.1.cmml" xref="S3.SS3.p2.1.m1.1.1">𝒞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p2.1.m1.1c">\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p2.1.m1.1d">caligraphic_C</annotation></semantics></math> given we are now comparing documents to documents (or similarly answers to documents).
These approaches are valuable as they recognize the misalignment, but are challenging to evaluate in an offline setting in a principled way. Their success depends not only on the LLM’s ability to comprehend the query and generate a relevant response (which may be challenging in specialized applications) but also on its capacity to produce answers that are semantically aligned with the specific content within the RAG system’s knowledge base.</p>
</div>
<div class="ltx_para" id="S3.SS3.p3">
<p class="ltx_p" id="S3.SS3.p3.1">We now connect this back with the ideal retrieval objective defined above. As we illustrated, when the inherent similarity between query and content embeddings fails to reflect their true relevance, the retrieval process is fundamentally hindered, often resulting in the retrieval of irrelevant content. This underscores the need for a more robust alignment strategy within RAG systems, one that can accurately capture the semantic relationship between queries and content, regardless of their inherent embedding representations. In the following section, we introduce QB-RAG, a novel approach that directly addresses this challenge by aligning incoming queries with a pre-computed set of questions derived from the content base and performing retrieval within a shared query space.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>QB-RAG</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.3">To address the semantic misalignment inherent in traditional RAG retrieval, we propose Query-Based Retrieval Augmented Generation (QB-RAG). Our approach leverages a pre-computed set of questions, <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS4.p1.1.m1.1"><semantics id="S3.SS4.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.1.m1.1.1" xref="S3.SS4.p1.1.m1.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><ci id="S3.SS4.p1.1.m1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.1.m1.1d">caligraphic_Q</annotation></semantics></math>, derived from the content base <math alttext="\mathcal{C}" class="ltx_Math" display="inline" id="S3.SS4.p1.2.m2.1"><semantics id="S3.SS4.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.2.m2.1.1" xref="S3.SS4.p1.2.m2.1.1.cmml">𝒞</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.2.m2.1b"><ci id="S3.SS4.p1.2.m2.1.1.cmml" xref="S3.SS4.p1.2.m2.1.1">𝒞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.2.m2.1c">\mathcal{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.2.m2.1d">caligraphic_C</annotation></semantics></math>. These questions are generated offline as described in Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2.SS2" title="2.2 Offline Question Generation ‣ 2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2.2</span></a>, mitigating concerns about online computational overhead. We not that efficient retrieval algorithms render the increased knowledge base size introduced by incorporating <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS4.p1.3.m3.1"><semantics id="S3.SS4.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.3.m3.1.1" xref="S3.SS4.p1.3.m3.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.3.m3.1b"><ci id="S3.SS4.p1.3.m3.1.1.cmml" xref="S3.SS4.p1.3.m3.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.3.m3.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.3.m3.1d">caligraphic_Q</annotation></semantics></math> negligible.
In contrast to methods relying on online LLM calls for query rewriting, QB-RAG shifts this computational burden offline. This distinction is significant, as online rewriting necessitates serial LLM invocation, potentially introducing latency detrimental to user experience. Furthermore, QB-RAG’s direct alignment within the query space offers a more transparent and interpretable retrieval process compared to the implicit alignment strategies of LLM-based rewriting techniques.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS4.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.1 </span>Vanilla QB-RAG</h4>
<div class="ltx_para" id="S3.SS4.SSS1.p1">
<p class="ltx_p" id="S3.SS4.SSS1.p1.5">Our vanilla approach of QB-RAG first generates an extensive set of questions that are known to be answered by the content by initializing <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS4.SSS1.p1.1.m1.1"><semantics id="S3.SS4.SSS1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.1.m1.1.1" xref="S3.SS4.SSS1.p1.1.m1.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.1.m1.1b"><ci id="S3.SS4.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.1.m1.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS1.p1.1.m1.1d">caligraphic_Q</annotation></semantics></math> and <math alttext="A" class="ltx_Math" display="inline" id="S3.SS4.SSS1.p1.2.m2.1"><semantics id="S3.SS4.SSS1.p1.2.m2.1a"><mi id="S3.SS4.SSS1.p1.2.m2.1.1" xref="S3.SS4.SSS1.p1.2.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.2.m2.1b"><ci id="S3.SS4.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS4.SSS1.p1.2.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.2.m2.1c">A</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS1.p1.2.m2.1d">italic_A</annotation></semantics></math>. This operation can happen offline and upon uploading new documents to our content base.
Second, for an online query, QB-RAG searches for similar question (resp. questions) within <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS4.SSS1.p1.3.m3.1"><semantics id="S3.SS4.SSS1.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.3.m3.1.1" xref="S3.SS4.SSS1.p1.3.m3.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.3.m3.1b"><ci id="S3.SS4.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS4.SSS1.p1.3.m3.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.3.m3.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS1.p1.3.m3.1d">caligraphic_Q</annotation></semantics></math> by finding <math alttext="\arg\min_{\mathcal{Q}}d(q_{0},q)" class="ltx_Math" display="inline" id="S3.SS4.SSS1.p1.4.m4.2"><semantics id="S3.SS4.SSS1.p1.4.m4.2a"><mrow id="S3.SS4.SSS1.p1.4.m4.2.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.cmml"><mrow id="S3.SS4.SSS1.p1.4.m4.2.2.3" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.cmml"><mi id="S3.SS4.SSS1.p1.4.m4.2.2.3.1" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.1.cmml">arg</mi><mo id="S3.SS4.SSS1.p1.4.m4.2.2.3a" lspace="0.167em" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.cmml">⁡</mo><mrow id="S3.SS4.SSS1.p1.4.m4.2.2.3.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.cmml"><msub id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.cmml"><mi id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.2.cmml">min</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.3" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.3.cmml">𝒬</mi></msub><mo id="S3.SS4.SSS1.p1.4.m4.2.2.3.2a" lspace="0.167em" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.cmml">⁡</mo><mi id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.2.cmml">d</mi></mrow></mrow><mo id="S3.SS4.SSS1.p1.4.m4.2.2.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.2.cmml">⁢</mo><mrow id="S3.SS4.SSS1.p1.4.m4.2.2.1.1" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.2.cmml"><mo id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.2" stretchy="false" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.2.cmml">(</mo><msub id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.cmml"><mi id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.2" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.2.cmml">q</mi><mn id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.3" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.3" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.2.cmml">,</mo><mi id="S3.SS4.SSS1.p1.4.m4.1.1" xref="S3.SS4.SSS1.p1.4.m4.1.1.cmml">q</mi><mo id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.4" stretchy="false" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.4.m4.2b"><apply id="S3.SS4.SSS1.p1.4.m4.2.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2"><times id="S3.SS4.SSS1.p1.4.m4.2.2.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.2"></times><apply id="S3.SS4.SSS1.p1.4.m4.2.2.3.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3"><arg id="S3.SS4.SSS1.p1.4.m4.2.2.3.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.1"></arg><apply id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2"><apply id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1">subscript</csymbol><min id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.2"></min><ci id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.3.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.1.3">𝒬</ci></apply><ci id="S3.SS4.SSS1.p1.4.m4.2.2.3.2.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.3.2.2">𝑑</ci></apply></apply><interval closure="open" id="S3.SS4.SSS1.p1.4.m4.2.2.1.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1"><apply id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.2.cmml" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.2">𝑞</ci><cn id="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS4.SSS1.p1.4.m4.2.2.1.1.1.3">0</cn></apply><ci id="S3.SS4.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS4.SSS1.p1.4.m4.1.1">𝑞</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.4.m4.2c">\arg\min_{\mathcal{Q}}d(q_{0},q)</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS1.p1.4.m4.2d">roman_arg roman_min start_POSTSUBSCRIPT caligraphic_Q end_POSTSUBSCRIPT italic_d ( italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_q )</annotation></semantics></math> (resp. <math alttext="\arg\min_{\mathcal{S}\subset\mathcal{Q}}\sum_{q\in\mathcal{S}}{d(q,q_{0})}" class="ltx_Math" display="inline" id="S3.SS4.SSS1.p1.5.m5.2"><semantics id="S3.SS4.SSS1.p1.5.m5.2a"><mrow id="S3.SS4.SSS1.p1.5.m5.2.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.cmml"><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.cmml"><mi id="S3.SS4.SSS1.p1.5.m5.2.2.3.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.1.cmml">arg</mi><mo id="S3.SS4.SSS1.p1.5.m5.2.2.3a" lspace="0.167em" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.cmml">⁡</mo><msub id="S3.SS4.SSS1.p1.5.m5.2.2.3.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.cmml"><mi id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.2.cmml">min</mi><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.2.cmml">𝒮</mi><mo id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.1.cmml">⊂</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.3.cmml">𝒬</mi></mrow></msub></mrow><mo id="S3.SS4.SSS1.p1.5.m5.2.2.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.2.cmml">⁢</mo><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.cmml"><msub id="S3.SS4.SSS1.p1.5.m5.2.2.1.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.cmml"><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.2.cmml">∑</mo><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.cmml"><mi id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.2.cmml">q</mi><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.3.cmml">𝒮</mi></mrow></msub><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.1.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.cmml"><mi id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.3.cmml">d</mi><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.2.cmml">⁢</mo><mrow id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.2.cmml"><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.2" stretchy="false" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.2.cmml">(</mo><mi id="S3.SS4.SSS1.p1.5.m5.1.1" xref="S3.SS4.SSS1.p1.5.m5.1.1.cmml">q</mi><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.2.cmml">,</mo><msub id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.cmml"><mi id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.2" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.2.cmml">q</mi><mn id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.3" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.4" stretchy="false" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.5.m5.2b"><apply id="S3.SS4.SSS1.p1.5.m5.2.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2"><times id="S3.SS4.SSS1.p1.5.m5.2.2.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.2"></times><apply id="S3.SS4.SSS1.p1.5.m5.2.2.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3"><arg id="S3.SS4.SSS1.p1.5.m5.2.2.3.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.1"></arg><apply id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2">subscript</csymbol><min id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.2"></min><apply id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3"><subset id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.1"></subset><ci id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.2">𝒮</ci><ci id="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.3.2.3.3">𝒬</ci></apply></apply></apply><apply id="S3.SS4.SSS1.p1.5.m5.2.2.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1"><apply id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2">subscript</csymbol><sum id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.2"></sum><apply id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3"><in id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.1"></in><ci id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.2">𝑞</ci><ci id="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.2.3.3">𝒮</ci></apply></apply><apply id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1"><times id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.2"></times><ci id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.3.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.3">𝑑</ci><interval closure="open" id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1"><ci id="S3.SS4.SSS1.p1.5.m5.1.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.1.1">𝑞</ci><apply id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.1.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.2.cmml" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.2">𝑞</ci><cn id="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS4.SSS1.p1.5.m5.2.2.1.1.1.1.1.3">0</cn></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.5.m5.2c">\arg\min_{\mathcal{S}\subset\mathcal{Q}}\sum_{q\in\mathcal{S}}{d(q,q_{0})}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS1.p1.5.m5.2d">roman_arg roman_min start_POSTSUBSCRIPT caligraphic_S ⊂ caligraphic_Q end_POSTSUBSCRIPT ∑ start_POSTSUBSCRIPT italic_q ∈ caligraphic_S end_POSTSUBSCRIPT italic_d ( italic_q , italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>).
Given we are now comparing questions to questions, we expect the distance measure to be calibrated given the comparison is also aligned.
Third upon retrieving similar questions, the associated contents are fetched, and fed to the generative LLM like other RAG systems (after dropping duplicate contents if necessary). We provide the full details in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#alg1" title="Algorithm 1 ‣ 3.4.1 Vanilla QB-RAG ‣ 3.4 QB-RAG ‣ 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Vanilla QB-RAG</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l1">
<math alttext="\mathcal{C},\mathcal{Q},A" class="ltx_Math" display="inline" id="alg1.l1.m1.3"><semantics id="alg1.l1.m1.3a"><mrow id="alg1.l1.m1.3.4.2" xref="alg1.l1.m1.3.4.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">𝒞</mi><mo id="alg1.l1.m1.3.4.2.1" xref="alg1.l1.m1.3.4.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m1.2.2" xref="alg1.l1.m1.2.2.cmml">𝒬</mi><mo id="alg1.l1.m1.3.4.2.2" xref="alg1.l1.m1.3.4.1.cmml">,</mo><mi id="alg1.l1.m1.3.3" xref="alg1.l1.m1.3.3.cmml">A</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.3b"><list id="alg1.l1.m1.3.4.1.cmml" xref="alg1.l1.m1.3.4.2"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">𝒞</ci><ci id="alg1.l1.m1.2.2.cmml" xref="alg1.l1.m1.2.2">𝒬</ci><ci id="alg1.l1.m1.3.3.cmml" xref="alg1.l1.m1.3.3">𝐴</ci></list></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.3c">\mathcal{C},\mathcal{Q},A</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.3d">caligraphic_C , caligraphic_Q , italic_A</annotation></semantics></math> (or <math alttext="A^{*},\hat{A}" class="ltx_Math" display="inline" id="alg1.l1.m2.2"><semantics id="alg1.l1.m2.2a"><mrow id="alg1.l1.m2.2.2.1" xref="alg1.l1.m2.2.2.2.cmml"><msup id="alg1.l1.m2.2.2.1.1" xref="alg1.l1.m2.2.2.1.1.cmml"><mi id="alg1.l1.m2.2.2.1.1.2" xref="alg1.l1.m2.2.2.1.1.2.cmml">A</mi><mo id="alg1.l1.m2.2.2.1.1.3" xref="alg1.l1.m2.2.2.1.1.3.cmml">∗</mo></msup><mo id="alg1.l1.m2.2.2.1.2" xref="alg1.l1.m2.2.2.2.cmml">,</mo><mover accent="true" id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml"><mi id="alg1.l1.m2.1.1.2" xref="alg1.l1.m2.1.1.2.cmml">A</mi><mo id="alg1.l1.m2.1.1.1" xref="alg1.l1.m2.1.1.1.cmml">^</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.2b"><list id="alg1.l1.m2.2.2.2.cmml" xref="alg1.l1.m2.2.2.1"><apply id="alg1.l1.m2.2.2.1.1.cmml" xref="alg1.l1.m2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.2.2.1.1.1.cmml" xref="alg1.l1.m2.2.2.1.1">superscript</csymbol><ci id="alg1.l1.m2.2.2.1.1.2.cmml" xref="alg1.l1.m2.2.2.1.1.2">𝐴</ci><times id="alg1.l1.m2.2.2.1.1.3.cmml" xref="alg1.l1.m2.2.2.1.1.3"></times></apply><apply id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1"><ci id="alg1.l1.m2.1.1.1.cmml" xref="alg1.l1.m2.1.1.1">^</ci><ci id="alg1.l1.m2.1.1.2.cmml" xref="alg1.l1.m2.1.1.2">𝐴</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.2c">A^{*},\hat{A}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.2d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT , over^ start_ARG italic_A end_ARG</annotation></semantics></math>), new query <math alttext="q_{0}" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><msub id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml"><mi id="alg1.l1.m3.1.1.2" xref="alg1.l1.m3.1.1.2.cmml">q</mi><mn id="alg1.l1.m3.1.1.3" xref="alg1.l1.m3.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><apply id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1"><csymbol cd="ambiguous" id="alg1.l1.m3.1.1.1.cmml" xref="alg1.l1.m3.1.1">subscript</csymbol><ci id="alg1.l1.m3.1.1.2.cmml" xref="alg1.l1.m3.1.1.2">𝑞</ci><cn id="alg1.l1.m3.1.1.3.cmml" type="integer" xref="alg1.l1.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">q_{0}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, target number of retrievals <math alttext="k\leq M" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mrow id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml"><mi id="alg1.l1.m4.1.1.2" xref="alg1.l1.m4.1.1.2.cmml">k</mi><mo id="alg1.l1.m4.1.1.1" xref="alg1.l1.m4.1.1.1.cmml">≤</mo><mi id="alg1.l1.m4.1.1.3" xref="alg1.l1.m4.1.1.3.cmml">M</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><apply id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1"><leq id="alg1.l1.m4.1.1.1.cmml" xref="alg1.l1.m4.1.1.1"></leq><ci id="alg1.l1.m4.1.1.2.cmml" xref="alg1.l1.m4.1.1.2">𝑘</ci><ci id="alg1.l1.m4.1.1.3.cmml" xref="alg1.l1.m4.1.1.3">𝑀</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">k\leq M</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">italic_k ≤ italic_M</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l2">Similarities <math alttext="z\leftarrow Q^{t}q_{0}\in\mathbb{R}^{N}" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mrow id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml"><mi id="alg1.l2.m1.1.1.2" xref="alg1.l2.m1.1.1.2.cmml">z</mi><mo id="alg1.l2.m1.1.1.3" stretchy="false" xref="alg1.l2.m1.1.1.3.cmml">←</mo><mrow id="alg1.l2.m1.1.1.4" xref="alg1.l2.m1.1.1.4.cmml"><msup id="alg1.l2.m1.1.1.4.2" xref="alg1.l2.m1.1.1.4.2.cmml"><mi id="alg1.l2.m1.1.1.4.2.2" xref="alg1.l2.m1.1.1.4.2.2.cmml">Q</mi><mi id="alg1.l2.m1.1.1.4.2.3" xref="alg1.l2.m1.1.1.4.2.3.cmml">t</mi></msup><mo id="alg1.l2.m1.1.1.4.1" xref="alg1.l2.m1.1.1.4.1.cmml">⁢</mo><msub id="alg1.l2.m1.1.1.4.3" xref="alg1.l2.m1.1.1.4.3.cmml"><mi id="alg1.l2.m1.1.1.4.3.2" xref="alg1.l2.m1.1.1.4.3.2.cmml">q</mi><mn id="alg1.l2.m1.1.1.4.3.3" xref="alg1.l2.m1.1.1.4.3.3.cmml">0</mn></msub></mrow><mo id="alg1.l2.m1.1.1.5" xref="alg1.l2.m1.1.1.5.cmml">∈</mo><msup id="alg1.l2.m1.1.1.6" xref="alg1.l2.m1.1.1.6.cmml"><mi id="alg1.l2.m1.1.1.6.2" xref="alg1.l2.m1.1.1.6.2.cmml">ℝ</mi><mi id="alg1.l2.m1.1.1.6.3" xref="alg1.l2.m1.1.1.6.3.cmml">N</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><apply id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1"><and id="alg1.l2.m1.1.1a.cmml" xref="alg1.l2.m1.1.1"></and><apply id="alg1.l2.m1.1.1b.cmml" xref="alg1.l2.m1.1.1"><ci id="alg1.l2.m1.1.1.3.cmml" xref="alg1.l2.m1.1.1.3">←</ci><ci id="alg1.l2.m1.1.1.2.cmml" xref="alg1.l2.m1.1.1.2">𝑧</ci><apply id="alg1.l2.m1.1.1.4.cmml" xref="alg1.l2.m1.1.1.4"><times id="alg1.l2.m1.1.1.4.1.cmml" xref="alg1.l2.m1.1.1.4.1"></times><apply id="alg1.l2.m1.1.1.4.2.cmml" xref="alg1.l2.m1.1.1.4.2"><csymbol cd="ambiguous" id="alg1.l2.m1.1.1.4.2.1.cmml" xref="alg1.l2.m1.1.1.4.2">superscript</csymbol><ci id="alg1.l2.m1.1.1.4.2.2.cmml" xref="alg1.l2.m1.1.1.4.2.2">𝑄</ci><ci id="alg1.l2.m1.1.1.4.2.3.cmml" xref="alg1.l2.m1.1.1.4.2.3">𝑡</ci></apply><apply id="alg1.l2.m1.1.1.4.3.cmml" xref="alg1.l2.m1.1.1.4.3"><csymbol cd="ambiguous" id="alg1.l2.m1.1.1.4.3.1.cmml" xref="alg1.l2.m1.1.1.4.3">subscript</csymbol><ci id="alg1.l2.m1.1.1.4.3.2.cmml" xref="alg1.l2.m1.1.1.4.3.2">𝑞</ci><cn id="alg1.l2.m1.1.1.4.3.3.cmml" type="integer" xref="alg1.l2.m1.1.1.4.3.3">0</cn></apply></apply></apply><apply id="alg1.l2.m1.1.1c.cmml" xref="alg1.l2.m1.1.1"><in id="alg1.l2.m1.1.1.5.cmml" xref="alg1.l2.m1.1.1.5"></in><share href="https://arxiv.org/html/2407.18044v1#alg1.l2.m1.1.1.4.cmml" id="alg1.l2.m1.1.1d.cmml" xref="alg1.l2.m1.1.1"></share><apply id="alg1.l2.m1.1.1.6.cmml" xref="alg1.l2.m1.1.1.6"><csymbol cd="ambiguous" id="alg1.l2.m1.1.1.6.1.cmml" xref="alg1.l2.m1.1.1.6">superscript</csymbol><ci id="alg1.l2.m1.1.1.6.2.cmml" xref="alg1.l2.m1.1.1.6.2">ℝ</ci><ci id="alg1.l2.m1.1.1.6.3.cmml" xref="alg1.l2.m1.1.1.6.3">𝑁</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">z\leftarrow Q^{t}q_{0}\in\mathbb{R}^{N}</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_z ← italic_Q start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_q start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ∈ blackboard_R start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">Sort <math alttext="z" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mi id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml">z</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><ci id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">𝑧</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">z</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_z</annotation></semantics></math> by descending values and sort <math alttext="\mathcal{Q}\&amp;A" class="ltx_Math" display="inline" id="alg1.l3.m2.1"><semantics id="alg1.l3.m2.1a"><mrow id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l3.m2.1.1.2" xref="alg1.l3.m2.1.1.2.cmml">𝒬</mi><mo id="alg1.l3.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="alg1.l3.m2.1.1.1.cmml">&amp;</mo><mi id="alg1.l3.m2.1.1.3" xref="alg1.l3.m2.1.1.3.cmml">A</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b"><apply id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1"><and id="alg1.l3.m2.1.1.1.cmml" xref="alg1.l3.m2.1.1.1"></and><ci id="alg1.l3.m2.1.1.2.cmml" xref="alg1.l3.m2.1.1.2">𝒬</ci><ci id="alg1.l3.m2.1.1.3.cmml" xref="alg1.l3.m2.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m2.1c">\mathcal{Q}\&amp;A</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m2.1d">caligraphic_Q &amp; italic_A</annotation></semantics></math>’s columns accordingly.

</div>
<div class="ltx_listingline" id="alg1.l4">
<math alttext="\mathcal{S}\leftarrow\{\}" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">𝒮</mi><mo id="alg1.l4.m1.1.1.1" stretchy="false" xref="alg1.l4.m1.1.1.1.cmml">←</mo><mrow id="alg1.l4.m1.1.1.3.2" xref="alg1.l4.m1.1.1.cmml"><mo id="alg1.l4.m1.1.1.3.2.1" stretchy="false" xref="alg1.l4.m1.1.1.3.1.cmml">{</mo><mo id="alg1.l4.m1.1.1.3.2.2" stretchy="false" xref="alg1.l4.m1.1.1.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><ci id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">←</ci><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">𝒮</ci><list id="alg1.l4.m1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.3.2.1"></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">\mathcal{S}\leftarrow\{\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">caligraphic_S ← { }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_text ltx_font_bold" id="alg1.l5.1">for</span> <math alttext="j\in[1..N]" class="ltx_math_unparsed" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1b"><mi id="alg1.l5.m1.1.1">j</mi><mo id="alg1.l5.m1.1.2">∈</mo><mrow id="alg1.l5.m1.1.3"><mo id="alg1.l5.m1.1.3.1" stretchy="false">[</mo><mn id="alg1.l5.m1.1.3.2">1</mn><mo id="alg1.l5.m1.1.3.3" lspace="0em" rspace="0.0835em">.</mo><mo id="alg1.l5.m1.1.3.4" lspace="0.0835em" rspace="0.167em">.</mo><mi id="alg1.l5.m1.1.3.5">N</mi><mo id="alg1.l5.m1.1.3.6" stretchy="false">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">j\in[1..N]</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_j ∈ [ 1 . . italic_N ]</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l5.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l6">     <math alttext="i\leftarrow i" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml"><mi id="alg1.l6.m1.1.1.2" xref="alg1.l6.m1.1.1.2.cmml">i</mi><mo id="alg1.l6.m1.1.1.1" stretchy="false" xref="alg1.l6.m1.1.1.1.cmml">←</mo><mi id="alg1.l6.m1.1.1.3" xref="alg1.l6.m1.1.1.3.cmml">i</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1"><ci id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1">←</ci><ci id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2">𝑖</ci><ci id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">i\leftarrow i</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_i ← italic_i</annotation></semantics></math> s.t. <math alttext="A_{ij}=1" class="ltx_Math" display="inline" id="alg1.l6.m2.1"><semantics id="alg1.l6.m2.1a"><mrow id="alg1.l6.m2.1.1" xref="alg1.l6.m2.1.1.cmml"><msub id="alg1.l6.m2.1.1.2" xref="alg1.l6.m2.1.1.2.cmml"><mi id="alg1.l6.m2.1.1.2.2" xref="alg1.l6.m2.1.1.2.2.cmml">A</mi><mrow id="alg1.l6.m2.1.1.2.3" xref="alg1.l6.m2.1.1.2.3.cmml"><mi id="alg1.l6.m2.1.1.2.3.2" xref="alg1.l6.m2.1.1.2.3.2.cmml">i</mi><mo id="alg1.l6.m2.1.1.2.3.1" xref="alg1.l6.m2.1.1.2.3.1.cmml">⁢</mo><mi id="alg1.l6.m2.1.1.2.3.3" xref="alg1.l6.m2.1.1.2.3.3.cmml">j</mi></mrow></msub><mo id="alg1.l6.m2.1.1.1" xref="alg1.l6.m2.1.1.1.cmml">=</mo><mn id="alg1.l6.m2.1.1.3" xref="alg1.l6.m2.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m2.1b"><apply id="alg1.l6.m2.1.1.cmml" xref="alg1.l6.m2.1.1"><eq id="alg1.l6.m2.1.1.1.cmml" xref="alg1.l6.m2.1.1.1"></eq><apply id="alg1.l6.m2.1.1.2.cmml" xref="alg1.l6.m2.1.1.2"><csymbol cd="ambiguous" id="alg1.l6.m2.1.1.2.1.cmml" xref="alg1.l6.m2.1.1.2">subscript</csymbol><ci id="alg1.l6.m2.1.1.2.2.cmml" xref="alg1.l6.m2.1.1.2.2">𝐴</ci><apply id="alg1.l6.m2.1.1.2.3.cmml" xref="alg1.l6.m2.1.1.2.3"><times id="alg1.l6.m2.1.1.2.3.1.cmml" xref="alg1.l6.m2.1.1.2.3.1"></times><ci id="alg1.l6.m2.1.1.2.3.2.cmml" xref="alg1.l6.m2.1.1.2.3.2">𝑖</ci><ci id="alg1.l6.m2.1.1.2.3.3.cmml" xref="alg1.l6.m2.1.1.2.3.3">𝑗</ci></apply></apply><cn id="alg1.l6.m2.1.1.3.cmml" type="integer" xref="alg1.l6.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m2.1c">A_{ij}=1</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m2.1d">italic_A start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT = 1</annotation></semantics></math> identify the content associated associated to the <math alttext="j" class="ltx_Math" display="inline" id="alg1.l6.m3.1"><semantics id="alg1.l6.m3.1a"><mi id="alg1.l6.m3.1.1" xref="alg1.l6.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="alg1.l6.m3.1b"><ci id="alg1.l6.m3.1.1.cmml" xref="alg1.l6.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m3.1c">j</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m3.1d">italic_j</annotation></semantics></math>-th question.

</div>
<div class="ltx_listingline" id="alg1.l7">     <span class="ltx_text ltx_font_italic" id="alg1.l7.1">Note, if <math alttext="A" class="ltx_Math" display="inline" id="alg1.l7.1.m1.1"><semantics id="alg1.l7.1.m1.1a"><mi id="alg1.l7.1.m1.1.1" xref="alg1.l7.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="alg1.l7.1.m1.1b"><ci id="alg1.l7.1.m1.1.1.cmml" xref="alg1.l7.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.1.m1.1d">italic_A</annotation></semantics></math> is non-sparse, we break ties by favoring new content, then by number of associated questions, then at random.</span>
</div>
<div class="ltx_listingline" id="alg1.l8">     <math alttext="\mathcal{S}\leftarrow\mathcal{S}\cup\{c_{i}\}" class="ltx_Math" display="inline" id="alg1.l8.m1.1"><semantics id="alg1.l8.m1.1a"><mrow id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l8.m1.1.1.3" xref="alg1.l8.m1.1.1.3.cmml">𝒮</mi><mo id="alg1.l8.m1.1.1.2" stretchy="false" xref="alg1.l8.m1.1.1.2.cmml">←</mo><mrow id="alg1.l8.m1.1.1.1" xref="alg1.l8.m1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l8.m1.1.1.1.3" xref="alg1.l8.m1.1.1.1.3.cmml">𝒮</mi><mo id="alg1.l8.m1.1.1.1.2" xref="alg1.l8.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l8.m1.1.1.1.1.1" xref="alg1.l8.m1.1.1.1.1.2.cmml"><mo id="alg1.l8.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l8.m1.1.1.1.1.2.cmml">{</mo><msub id="alg1.l8.m1.1.1.1.1.1.1" xref="alg1.l8.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l8.m1.1.1.1.1.1.1.2" xref="alg1.l8.m1.1.1.1.1.1.1.2.cmml">c</mi><mi id="alg1.l8.m1.1.1.1.1.1.1.3" xref="alg1.l8.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l8.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l8.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b"><apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1"><ci id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2">←</ci><ci id="alg1.l8.m1.1.1.3.cmml" xref="alg1.l8.m1.1.1.3">𝒮</ci><apply id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1"><union id="alg1.l8.m1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.2"></union><ci id="alg1.l8.m1.1.1.1.3.cmml" xref="alg1.l8.m1.1.1.1.3">𝒮</ci><set id="alg1.l8.m1.1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.1.1"><apply id="alg1.l8.m1.1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l8.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1.1">subscript</csymbol><ci id="alg1.l8.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l8.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l8.m1.1.1.1.1.1.1.3">𝑖</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">\mathcal{S}\leftarrow\mathcal{S}\cup\{c_{i}\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.1d">caligraphic_S ← caligraphic_S ∪ { italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l8.1">if</span> <math alttext="c_{i}\notin\mathcal{S}" class="ltx_Math" display="inline" id="alg1.l8.m2.1"><semantics id="alg1.l8.m2.1a"><mrow id="alg1.l8.m2.1.1" xref="alg1.l8.m2.1.1.cmml"><msub id="alg1.l8.m2.1.1.2" xref="alg1.l8.m2.1.1.2.cmml"><mi id="alg1.l8.m2.1.1.2.2" xref="alg1.l8.m2.1.1.2.2.cmml">c</mi><mi id="alg1.l8.m2.1.1.2.3" xref="alg1.l8.m2.1.1.2.3.cmml">i</mi></msub><mo id="alg1.l8.m2.1.1.1" xref="alg1.l8.m2.1.1.1.cmml">∉</mo><mi class="ltx_font_mathcaligraphic" id="alg1.l8.m2.1.1.3" xref="alg1.l8.m2.1.1.3.cmml">𝒮</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m2.1b"><apply id="alg1.l8.m2.1.1.cmml" xref="alg1.l8.m2.1.1"><notin id="alg1.l8.m2.1.1.1.cmml" xref="alg1.l8.m2.1.1.1"></notin><apply id="alg1.l8.m2.1.1.2.cmml" xref="alg1.l8.m2.1.1.2"><csymbol cd="ambiguous" id="alg1.l8.m2.1.1.2.1.cmml" xref="alg1.l8.m2.1.1.2">subscript</csymbol><ci id="alg1.l8.m2.1.1.2.2.cmml" xref="alg1.l8.m2.1.1.2.2">𝑐</ci><ci id="alg1.l8.m2.1.1.2.3.cmml" xref="alg1.l8.m2.1.1.2.3">𝑖</ci></apply><ci id="alg1.l8.m2.1.1.3.cmml" xref="alg1.l8.m2.1.1.3">𝒮</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m2.1c">c_{i}\notin\mathcal{S}</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m2.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∉ caligraphic_S</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l9">     <span class="ltx_text ltx_font_bold" id="alg1.l9.1">If</span> <math alttext="\lvert\mathcal{S}\rvert=k" class="ltx_Math" display="inline" id="alg1.l9.m1.1"><semantics id="alg1.l9.m1.1a"><mrow id="alg1.l9.m1.1.2" xref="alg1.l9.m1.1.2.cmml"><mrow id="alg1.l9.m1.1.2.2.2" xref="alg1.l9.m1.1.2.2.1.cmml"><mo id="alg1.l9.m1.1.2.2.2.1" stretchy="false" xref="alg1.l9.m1.1.2.2.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml">𝒮</mi><mo id="alg1.l9.m1.1.2.2.2.2" stretchy="false" xref="alg1.l9.m1.1.2.2.1.1.cmml">|</mo></mrow><mo id="alg1.l9.m1.1.2.1" xref="alg1.l9.m1.1.2.1.cmml">=</mo><mi id="alg1.l9.m1.1.2.3" xref="alg1.l9.m1.1.2.3.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.1b"><apply id="alg1.l9.m1.1.2.cmml" xref="alg1.l9.m1.1.2"><eq id="alg1.l9.m1.1.2.1.cmml" xref="alg1.l9.m1.1.2.1"></eq><apply id="alg1.l9.m1.1.2.2.1.cmml" xref="alg1.l9.m1.1.2.2.2"><abs id="alg1.l9.m1.1.2.2.1.1.cmml" xref="alg1.l9.m1.1.2.2.2.1"></abs><ci id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1">𝒮</ci></apply><ci id="alg1.l9.m1.1.2.3.cmml" xref="alg1.l9.m1.1.2.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.1c">\lvert\mathcal{S}\rvert=k</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.m1.1d">| caligraphic_S | = italic_k</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l9.2">then break</span>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_text ltx_font_bold" id="alg1.l10.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l10.2">for</span>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_text ltx_font_bold" id="alg1.l11.1">Return</span> <math alttext="\mathcal{S}" class="ltx_Math" display="inline" id="alg1.l11.m1.1"><semantics id="alg1.l11.m1.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml">𝒮</mi><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><ci id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">𝒮</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">\mathcal{S}</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.1d">caligraphic_S</annotation></semantics></math>
</div>
</div>
</figure>
</section>
<section class="ltx_subsubsection" id="S3.SS4.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.2 </span>Oracle and Approximate QB-RAG</h4>
<div class="ltx_para" id="S3.SS4.SSS2.p1">
<p class="ltx_p" id="S3.SS4.SSS2.p1.6">We now turn our attention to the best possible retrieval system using a query based alignment and retriever. We previously noted that the matrix <math alttext="A" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.1.m1.1"><semantics id="S3.SS4.SSS2.p1.1.m1.1a"><mi id="S3.SS4.SSS2.p1.1.m1.1.1" xref="S3.SS4.SSS2.p1.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.1.m1.1b"><ci id="S3.SS4.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p1.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.1.m1.1d">italic_A</annotation></semantics></math> indicating which content generated which question, is actually a <span class="ltx_text ltx_font_bold" id="S3.SS4.SSS2.p1.6.1">sparse partial observation</span> of <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.2.m2.1"><semantics id="S3.SS4.SSS2.p1.2.m2.1a"><msup id="S3.SS4.SSS2.p1.2.m2.1.1" xref="S3.SS4.SSS2.p1.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p1.2.m2.1.1.2" xref="S3.SS4.SSS2.p1.2.m2.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p1.2.m2.1.1.3" xref="S3.SS4.SSS2.p1.2.m2.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.2.m2.1b"><apply id="S3.SS4.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p1.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p1.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p1.2.m2.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p1.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p1.2.m2.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.2.m2.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.2.m2.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> indicating which content is relevant to a question. For this section we will assume that we have access to the oracle matrix <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.3.m3.1"><semantics id="S3.SS4.SSS2.p1.3.m3.1a"><msup id="S3.SS4.SSS2.p1.3.m3.1.1" xref="S3.SS4.SSS2.p1.3.m3.1.1.cmml"><mi id="S3.SS4.SSS2.p1.3.m3.1.1.2" xref="S3.SS4.SSS2.p1.3.m3.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p1.3.m3.1.1.3" xref="S3.SS4.SSS2.p1.3.m3.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.3.m3.1b"><apply id="S3.SS4.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p1.3.m3.1.1.1.cmml" xref="S3.SS4.SSS2.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p1.3.m3.1.1.2.cmml" xref="S3.SS4.SSS2.p1.3.m3.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p1.3.m3.1.1.3.cmml" xref="S3.SS4.SSS2.p1.3.m3.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.3.m3.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.3.m3.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> or some approximation of it denoted <math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.4.m4.1"><semantics id="S3.SS4.SSS2.p1.4.m4.1a"><mover accent="true" id="S3.SS4.SSS2.p1.4.m4.1.1" xref="S3.SS4.SSS2.p1.4.m4.1.1.cmml"><mi id="S3.SS4.SSS2.p1.4.m4.1.1.2" xref="S3.SS4.SSS2.p1.4.m4.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p1.4.m4.1.1.1" xref="S3.SS4.SSS2.p1.4.m4.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.4.m4.1b"><apply id="S3.SS4.SSS2.p1.4.m4.1.1.cmml" xref="S3.SS4.SSS2.p1.4.m4.1.1"><ci id="S3.SS4.SSS2.p1.4.m4.1.1.1.cmml" xref="S3.SS4.SSS2.p1.4.m4.1.1.1">^</ci><ci id="S3.SS4.SSS2.p1.4.m4.1.1.2.cmml" xref="S3.SS4.SSS2.p1.4.m4.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.4.m4.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.4.m4.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math>. For simplicity, we describe the algorithms with <math alttext="{A}^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.5.m5.1"><semantics id="S3.SS4.SSS2.p1.5.m5.1a"><msup id="S3.SS4.SSS2.p1.5.m5.1.1" xref="S3.SS4.SSS2.p1.5.m5.1.1.cmml"><mi id="S3.SS4.SSS2.p1.5.m5.1.1.2" xref="S3.SS4.SSS2.p1.5.m5.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p1.5.m5.1.1.3" xref="S3.SS4.SSS2.p1.5.m5.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.5.m5.1b"><apply id="S3.SS4.SSS2.p1.5.m5.1.1.cmml" xref="S3.SS4.SSS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p1.5.m5.1.1.1.cmml" xref="S3.SS4.SSS2.p1.5.m5.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p1.5.m5.1.1.2.cmml" xref="S3.SS4.SSS2.p1.5.m5.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p1.5.m5.1.1.3.cmml" xref="S3.SS4.SSS2.p1.5.m5.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.5.m5.1c">{A}^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.5.m5.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>, but is also applicable to <math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p1.6.m6.1"><semantics id="S3.SS4.SSS2.p1.6.m6.1a"><mover accent="true" id="S3.SS4.SSS2.p1.6.m6.1.1" xref="S3.SS4.SSS2.p1.6.m6.1.1.cmml"><mi id="S3.SS4.SSS2.p1.6.m6.1.1.2" xref="S3.SS4.SSS2.p1.6.m6.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p1.6.m6.1.1.1" xref="S3.SS4.SSS2.p1.6.m6.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.6.m6.1b"><apply id="S3.SS4.SSS2.p1.6.m6.1.1.cmml" xref="S3.SS4.SSS2.p1.6.m6.1.1"><ci id="S3.SS4.SSS2.p1.6.m6.1.1.1.cmml" xref="S3.SS4.SSS2.p1.6.m6.1.1.1">^</ci><ci id="S3.SS4.SSS2.p1.6.m6.1.1.2.cmml" xref="S3.SS4.SSS2.p1.6.m6.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.6.m6.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p1.6.m6.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS4.SSS2.p2">
<p class="ltx_p" id="S3.SS4.SSS2.p2.4">Before getting into the algorithmic details, let us first motivate the use of this matrix <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p2.1.m1.1"><semantics id="S3.SS4.SSS2.p2.1.m1.1a"><msup id="S3.SS4.SSS2.p2.1.m1.1.1" xref="S3.SS4.SSS2.p2.1.m1.1.1.cmml"><mi id="S3.SS4.SSS2.p2.1.m1.1.1.2" xref="S3.SS4.SSS2.p2.1.m1.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p2.1.m1.1.1.3" xref="S3.SS4.SSS2.p2.1.m1.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.1.m1.1b"><apply id="S3.SS4.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.1.m1.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p2.1.m1.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>. We note that while computing the matrix completely would involve <math alttext="N\times M" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p2.2.m2.1"><semantics id="S3.SS4.SSS2.p2.2.m2.1a"><mrow id="S3.SS4.SSS2.p2.2.m2.1.1" xref="S3.SS4.SSS2.p2.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p2.2.m2.1.1.2" xref="S3.SS4.SSS2.p2.2.m2.1.1.2.cmml">N</mi><mo id="S3.SS4.SSS2.p2.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS4.SSS2.p2.2.m2.1.1.1.cmml">×</mo><mi id="S3.SS4.SSS2.p2.2.m2.1.1.3" xref="S3.SS4.SSS2.p2.2.m2.1.1.3.cmml">M</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.2.m2.1b"><apply id="S3.SS4.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1"><times id="S3.SS4.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1.1"></times><ci id="S3.SS4.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1.2">𝑁</ci><ci id="S3.SS4.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1.3">𝑀</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.2.m2.1c">N\times M</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p2.2.m2.1d">italic_N × italic_M</annotation></semantics></math> LLM calls, these can all happen offline. Further depending on the dataset at hand, this may not even prohibitive in cost. E.g. in our dataset, this would lead to more than 5000 offline calls. Let us point out though that exactly computing <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p2.3.m3.1"><semantics id="S3.SS4.SSS2.p2.3.m3.1a"><msup id="S3.SS4.SSS2.p2.3.m3.1.1" xref="S3.SS4.SSS2.p2.3.m3.1.1.cmml"><mi id="S3.SS4.SSS2.p2.3.m3.1.1.2" xref="S3.SS4.SSS2.p2.3.m3.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p2.3.m3.1.1.3" xref="S3.SS4.SSS2.p2.3.m3.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.3.m3.1b"><apply id="S3.SS4.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p2.3.m3.1.1.1.cmml" xref="S3.SS4.SSS2.p2.3.m3.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p2.3.m3.1.1.2.cmml" xref="S3.SS4.SSS2.p2.3.m3.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p2.3.m3.1.1.3.cmml" xref="S3.SS4.SSS2.p2.3.m3.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.3.m3.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p2.3.m3.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> is not necessary, and some approximation of it could also lead to improved retrieval. In fact, we propose two ways of computing the estimate <math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p2.4.m4.1"><semantics id="S3.SS4.SSS2.p2.4.m4.1a"><mover accent="true" id="S3.SS4.SSS2.p2.4.m4.1.1" xref="S3.SS4.SSS2.p2.4.m4.1.1.cmml"><mi id="S3.SS4.SSS2.p2.4.m4.1.1.2" xref="S3.SS4.SSS2.p2.4.m4.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p2.4.m4.1.1.1" xref="S3.SS4.SSS2.p2.4.m4.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.4.m4.1b"><apply id="S3.SS4.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS4.SSS2.p2.4.m4.1.1"><ci id="S3.SS4.SSS2.p2.4.m4.1.1.1.cmml" xref="S3.SS4.SSS2.p2.4.m4.1.1.1">^</ci><ci id="S3.SS4.SSS2.p2.4.m4.1.1.2.cmml" xref="S3.SS4.SSS2.p2.4.m4.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.4.m4.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p2.4.m4.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math>:</p>
<ol class="ltx_enumerate" id="S3.I3">
<li class="ltx_item" id="S3.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S3.I3.i1.p1">
<p class="ltx_p" id="S3.I3.i1.p1.2">Only compute matrix entries <math alttext="A^{*}_{ij}" class="ltx_Math" display="inline" id="S3.I3.i1.p1.1.m1.1"><semantics id="S3.I3.i1.p1.1.m1.1a"><msubsup id="S3.I3.i1.p1.1.m1.1.1" xref="S3.I3.i1.p1.1.m1.1.1.cmml"><mi id="S3.I3.i1.p1.1.m1.1.1.2.2" xref="S3.I3.i1.p1.1.m1.1.1.2.2.cmml">A</mi><mrow id="S3.I3.i1.p1.1.m1.1.1.3" xref="S3.I3.i1.p1.1.m1.1.1.3.cmml"><mi id="S3.I3.i1.p1.1.m1.1.1.3.2" xref="S3.I3.i1.p1.1.m1.1.1.3.2.cmml">i</mi><mo id="S3.I3.i1.p1.1.m1.1.1.3.1" xref="S3.I3.i1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.I3.i1.p1.1.m1.1.1.3.3" xref="S3.I3.i1.p1.1.m1.1.1.3.3.cmml">j</mi></mrow><mo id="S3.I3.i1.p1.1.m1.1.1.2.3" xref="S3.I3.i1.p1.1.m1.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S3.I3.i1.p1.1.m1.1b"><apply id="S3.I3.i1.p1.1.m1.1.1.cmml" xref="S3.I3.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I3.i1.p1.1.m1.1.1.1.cmml" xref="S3.I3.i1.p1.1.m1.1.1">subscript</csymbol><apply id="S3.I3.i1.p1.1.m1.1.1.2.cmml" xref="S3.I3.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I3.i1.p1.1.m1.1.1.2.1.cmml" xref="S3.I3.i1.p1.1.m1.1.1">superscript</csymbol><ci id="S3.I3.i1.p1.1.m1.1.1.2.2.cmml" xref="S3.I3.i1.p1.1.m1.1.1.2.2">𝐴</ci><times id="S3.I3.i1.p1.1.m1.1.1.2.3.cmml" xref="S3.I3.i1.p1.1.m1.1.1.2.3"></times></apply><apply id="S3.I3.i1.p1.1.m1.1.1.3.cmml" xref="S3.I3.i1.p1.1.m1.1.1.3"><times id="S3.I3.i1.p1.1.m1.1.1.3.1.cmml" xref="S3.I3.i1.p1.1.m1.1.1.3.1"></times><ci id="S3.I3.i1.p1.1.m1.1.1.3.2.cmml" xref="S3.I3.i1.p1.1.m1.1.1.3.2">𝑖</ci><ci id="S3.I3.i1.p1.1.m1.1.1.3.3.cmml" xref="S3.I3.i1.p1.1.m1.1.1.3.3">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I3.i1.p1.1.m1.1c">A^{*}_{ij}</annotation><annotation encoding="application/x-llamapun" id="S3.I3.i1.p1.1.m1.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i italic_j end_POSTSUBSCRIPT</annotation></semantics></math> such that <math alttext="c_{i}^{t}q_{j}\geq\lambda" class="ltx_Math" display="inline" id="S3.I3.i1.p1.2.m2.1"><semantics id="S3.I3.i1.p1.2.m2.1a"><mrow id="S3.I3.i1.p1.2.m2.1.1" xref="S3.I3.i1.p1.2.m2.1.1.cmml"><mrow id="S3.I3.i1.p1.2.m2.1.1.2" xref="S3.I3.i1.p1.2.m2.1.1.2.cmml"><msubsup id="S3.I3.i1.p1.2.m2.1.1.2.2" xref="S3.I3.i1.p1.2.m2.1.1.2.2.cmml"><mi id="S3.I3.i1.p1.2.m2.1.1.2.2.2.2" xref="S3.I3.i1.p1.2.m2.1.1.2.2.2.2.cmml">c</mi><mi id="S3.I3.i1.p1.2.m2.1.1.2.2.2.3" xref="S3.I3.i1.p1.2.m2.1.1.2.2.2.3.cmml">i</mi><mi id="S3.I3.i1.p1.2.m2.1.1.2.2.3" xref="S3.I3.i1.p1.2.m2.1.1.2.2.3.cmml">t</mi></msubsup><mo id="S3.I3.i1.p1.2.m2.1.1.2.1" xref="S3.I3.i1.p1.2.m2.1.1.2.1.cmml">⁢</mo><msub id="S3.I3.i1.p1.2.m2.1.1.2.3" xref="S3.I3.i1.p1.2.m2.1.1.2.3.cmml"><mi id="S3.I3.i1.p1.2.m2.1.1.2.3.2" xref="S3.I3.i1.p1.2.m2.1.1.2.3.2.cmml">q</mi><mi id="S3.I3.i1.p1.2.m2.1.1.2.3.3" xref="S3.I3.i1.p1.2.m2.1.1.2.3.3.cmml">j</mi></msub></mrow><mo id="S3.I3.i1.p1.2.m2.1.1.1" xref="S3.I3.i1.p1.2.m2.1.1.1.cmml">≥</mo><mi id="S3.I3.i1.p1.2.m2.1.1.3" xref="S3.I3.i1.p1.2.m2.1.1.3.cmml">λ</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.I3.i1.p1.2.m2.1b"><apply id="S3.I3.i1.p1.2.m2.1.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1"><geq id="S3.I3.i1.p1.2.m2.1.1.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1.1"></geq><apply id="S3.I3.i1.p1.2.m2.1.1.2.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2"><times id="S3.I3.i1.p1.2.m2.1.1.2.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.1"></times><apply id="S3.I3.i1.p1.2.m2.1.1.2.2.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2"><csymbol cd="ambiguous" id="S3.I3.i1.p1.2.m2.1.1.2.2.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2">superscript</csymbol><apply id="S3.I3.i1.p1.2.m2.1.1.2.2.2.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2"><csymbol cd="ambiguous" id="S3.I3.i1.p1.2.m2.1.1.2.2.2.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2">subscript</csymbol><ci id="S3.I3.i1.p1.2.m2.1.1.2.2.2.2.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2.2.2">𝑐</ci><ci id="S3.I3.i1.p1.2.m2.1.1.2.2.2.3.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2.2.3">𝑖</ci></apply><ci id="S3.I3.i1.p1.2.m2.1.1.2.2.3.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.2.3">𝑡</ci></apply><apply id="S3.I3.i1.p1.2.m2.1.1.2.3.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.3"><csymbol cd="ambiguous" id="S3.I3.i1.p1.2.m2.1.1.2.3.1.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.3">subscript</csymbol><ci id="S3.I3.i1.p1.2.m2.1.1.2.3.2.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.3.2">𝑞</ci><ci id="S3.I3.i1.p1.2.m2.1.1.2.3.3.cmml" xref="S3.I3.i1.p1.2.m2.1.1.2.3.3">𝑗</ci></apply></apply><ci id="S3.I3.i1.p1.2.m2.1.1.3.cmml" xref="S3.I3.i1.p1.2.m2.1.1.3">𝜆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I3.i1.p1.2.m2.1c">c_{i}^{t}q_{j}\geq\lambda</annotation><annotation encoding="application/x-llamapun" id="S3.I3.i1.p1.2.m2.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT italic_q start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ≥ italic_λ</annotation></semantics></math> where lambda is some threshold, which can be chosen in order to compute only some percentile of entries. This typically filters out combinations of contents and queries that are likely not relevant to each other.</p>
</div>
</li>
<li class="ltx_item" id="S3.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S3.I3.i2.p1">
<p class="ltx_p" id="S3.I3.i2.p1.1">After computing a set of entries (whether chosen at random or according to the above rule), we can rely on matrix completion techniques to infer and approximate the remainder of the matrix. Matrix completion is highly efficient on moderate to large matrix sizes.</p>
</div>
</li>
</ol>
</div>
<div class="ltx_para" id="S3.SS4.SSS2.p3">
<p class="ltx_p" id="S3.SS4.SSS2.p3.5">Given the oracle <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p3.1.m1.1"><semantics id="S3.SS4.SSS2.p3.1.m1.1a"><msup id="S3.SS4.SSS2.p3.1.m1.1.1" xref="S3.SS4.SSS2.p3.1.m1.1.1.cmml"><mi id="S3.SS4.SSS2.p3.1.m1.1.1.2" xref="S3.SS4.SSS2.p3.1.m1.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p3.1.m1.1.1.3" xref="S3.SS4.SSS2.p3.1.m1.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.1.m1.1b"><apply id="S3.SS4.SSS2.p3.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p3.1.m1.1.1.1.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p3.1.m1.1.1.2.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p3.1.m1.1.1.3.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.1.m1.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p3.1.m1.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> or some estimate <math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p3.2.m2.1"><semantics id="S3.SS4.SSS2.p3.2.m2.1a"><mover accent="true" id="S3.SS4.SSS2.p3.2.m2.1.1" xref="S3.SS4.SSS2.p3.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p3.2.m2.1.1.2" xref="S3.SS4.SSS2.p3.2.m2.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p3.2.m2.1.1.1" xref="S3.SS4.SSS2.p3.2.m2.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.2.m2.1b"><apply id="S3.SS4.SSS2.p3.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1"><ci id="S3.SS4.SSS2.p3.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1.1">^</ci><ci id="S3.SS4.SSS2.p3.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.2.m2.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p3.2.m2.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math> thereof, we can adapt Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#alg1" title="Algorithm 1 ‣ 3.4.1 Vanilla QB-RAG ‣ 3.4 QB-RAG ‣ 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a> to incorporate the non-sparse nature of <math alttext="A^{*}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p3.3.m3.1"><semantics id="S3.SS4.SSS2.p3.3.m3.1a"><msup id="S3.SS4.SSS2.p3.3.m3.1.1" xref="S3.SS4.SSS2.p3.3.m3.1.1.cmml"><mi id="S3.SS4.SSS2.p3.3.m3.1.1.2" xref="S3.SS4.SSS2.p3.3.m3.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p3.3.m3.1.1.3" xref="S3.SS4.SSS2.p3.3.m3.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.3.m3.1b"><apply id="S3.SS4.SSS2.p3.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p3.3.m3.1.1.1.cmml" xref="S3.SS4.SSS2.p3.3.m3.1.1">superscript</csymbol><ci id="S3.SS4.SSS2.p3.3.m3.1.1.2.cmml" xref="S3.SS4.SSS2.p3.3.m3.1.1.2">𝐴</ci><times id="S3.SS4.SSS2.p3.3.m3.1.1.3.cmml" xref="S3.SS4.SSS2.p3.3.m3.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.3.m3.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p3.3.m3.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> or <math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p3.4.m4.1"><semantics id="S3.SS4.SSS2.p3.4.m4.1a"><mover accent="true" id="S3.SS4.SSS2.p3.4.m4.1.1" xref="S3.SS4.SSS2.p3.4.m4.1.1.cmml"><mi id="S3.SS4.SSS2.p3.4.m4.1.1.2" xref="S3.SS4.SSS2.p3.4.m4.1.1.2.cmml">A</mi><mo id="S3.SS4.SSS2.p3.4.m4.1.1.1" xref="S3.SS4.SSS2.p3.4.m4.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.4.m4.1b"><apply id="S3.SS4.SSS2.p3.4.m4.1.1.cmml" xref="S3.SS4.SSS2.p3.4.m4.1.1"><ci id="S3.SS4.SSS2.p3.4.m4.1.1.1.cmml" xref="S3.SS4.SSS2.p3.4.m4.1.1.1">^</ci><ci id="S3.SS4.SSS2.p3.4.m4.1.1.2.cmml" xref="S3.SS4.SSS2.p3.4.m4.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.4.m4.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p3.4.m4.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math>. Specifically, since multiple content pieces may be associated with a single question, we introduce tie-breaking rules within the algorithm that first prioritize newer content (especially relevant to healthcare). We then prioritizes contents capable of answering a diverse range of questions within <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS4.SSS2.p3.5.m5.1"><semantics id="S3.SS4.SSS2.p3.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS2.p3.5.m5.1.1" xref="S3.SS4.SSS2.p3.5.m5.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.5.m5.1b"><ci id="S3.SS4.SSS2.p3.5.m5.1.1.cmml" xref="S3.SS4.SSS2.p3.5.m5.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.5.m5.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.SSS2.p3.5.m5.1d">caligraphic_Q</annotation></semantics></math>. This reflects our intuition that a such content is likely to be more broadly relevant.</p>
</div>
<div class="ltx_para" id="S3.SS4.SSS2.p4">
<p class="ltx_p" id="S3.SS4.SSS2.p4.1">One could also explore incorporating the many-to-many relationship by leveraging a weighted majority vote into the retrieval step, rather than simple tie breaking rules. We defer this to future research as well.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Benchmark</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Methods</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.2">This section outlines the retrieval methods evaluated in our benchmark. To ensure a fair comparison, each method retrieves the same number of documents, denoted by <math alttext="k" class="ltx_Math" display="inline" id="S4.SS1.p1.1.m1.1"><semantics id="S4.SS1.p1.1.m1.1a"><mi id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><ci id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.1.m1.1d">italic_k</annotation></semantics></math>, for a given query (the value of <math alttext="k" class="ltx_Math" display="inline" id="S4.SS1.p1.2.m2.1"><semantics id="S4.SS1.p1.2.m2.1a"><mi id="S4.SS1.p1.2.m2.1.1" xref="S4.SS1.p1.2.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.2.m2.1b"><ci id="S4.SS1.p1.2.m2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.2.m2.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.2.m2.1d">italic_k</annotation></semantics></math> is varied across experiments). All LLM generations utilize <span class="ltx_text ltx_font_typewriter" id="S4.SS1.p1.2.1">Gemini-Pro</span> and text embeddings are generated using <span class="ltx_text ltx_font_typewriter" id="S4.SS1.p1.2.2">textembedding-gecko</span> – both are commercially available tools.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<ol class="ltx_enumerate" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">Naive RAG</span> <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib11" title="">2020</a>)</cite>.
This baseline approach retrieves content based on the cosine similarity between the embedded query and candidate content using identical embedder, a standard practice in RAG systems
Finally the query and retrieved contents are fed into an answer generator LLM and the LLM generates a response.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">HyDE</span> <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib5" title="">2022</a>)</cite>. HyDE addresses query-content misalignment by first generating a hypothetical document that answers the query. Specifically, an instruction tuned LLM is prompted to generate a hypothetical pseudo-document by setting the instruction “Write a paragraph that answers the question …” – this pseudo-document is not real. Second this pseudo-document and its embeddings are used for retrieval by searching for similar <span class="ltx_text ltx_font_italic" id="S4.I1.i2.p1.1.2">real</span> contents, offloading the relevance modeling to the LLM’s generation.

<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.3">Query2Doc</span> <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib29" title="">2023</a>)</cite>. Similarly to HyDE, Query2Doc employs few-shot prompting to generate a hypothetical pseudo-document that would answer the query. It concatenates the initial query with the synthetic document (generated similar to HyDE) and then performs dense retrieval using the embeddings of this concatenated text. Given the similarity with HyDE, we only implement HyDE in our benchmark.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para" id="S4.I1.i3.p1">
<p class="ltx_p" id="S4.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i3.p1.1.1">QA-RAG</span> <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite>. In their methodology, they fine tune a foundation LLM offline using a golden set of Q&amp;A. Upon receiving a new query online, they generate a pseudo-answer using the fine tuned LLM. They then retrieve contents using the query embeddings only, and other contents using the pseudo-answer’s embeddings only. A Reranker is then deployed to select only the most relevant contents among this dual set. In our implementation of QA-RAG, we use <span class="ltx_text ltx_font_typewriter" id="S4.I1.i3.p1.1.2">Gemini-Pro</span> out of the box to generate a pseudo-answer, and retrieve <math alttext="k" class="ltx_Math" display="inline" id="S4.I1.i3.p1.1.m1.1"><semantics id="S4.I1.i3.p1.1.m1.1a"><mi id="S4.I1.i3.p1.1.m1.1.1" xref="S4.I1.i3.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.I1.i3.p1.1.m1.1b"><ci id="S4.I1.i3.p1.1.m1.1.1.cmml" xref="S4.I1.i3.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i3.p1.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i3.p1.1.m1.1d">italic_k</annotation></semantics></math> documents using the pseudo-answer only, without a downstream reranker.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para" id="S4.I1.i4.p1">
<p class="ltx_p" id="S4.I1.i4.p1.7"><span class="ltx_text ltx_font_bold" id="S4.I1.i4.p1.7.1">Vanilla QB-RAG</span>: We run the simplest version of our method (see Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#alg1" title="Algorithm 1 ‣ 3.4.1 Vanilla QB-RAG ‣ 3.4 QB-RAG ‣ 3 Mathematical Formulation ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">1</span></a>) using the matrix <math alttext="A" class="ltx_Math" display="inline" id="S4.I1.i4.p1.1.m1.1"><semantics id="S4.I1.i4.p1.1.m1.1a"><mi id="S4.I1.i4.p1.1.m1.1.1" xref="S4.I1.i4.p1.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.1.m1.1b"><ci id="S4.I1.i4.p1.1.m1.1.1.cmml" xref="S4.I1.i4.p1.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.1.m1.1d">italic_A</annotation></semantics></math> which directly encodes “which content generated which question”. We believe that having access to the oracle matrix <math alttext="A^{*}" class="ltx_Math" display="inline" id="S4.I1.i4.p1.2.m2.1"><semantics id="S4.I1.i4.p1.2.m2.1a"><msup id="S4.I1.i4.p1.2.m2.1.1" xref="S4.I1.i4.p1.2.m2.1.1.cmml"><mi id="S4.I1.i4.p1.2.m2.1.1.2" xref="S4.I1.i4.p1.2.m2.1.1.2.cmml">A</mi><mo id="S4.I1.i4.p1.2.m2.1.1.3" xref="S4.I1.i4.p1.2.m2.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.2.m2.1b"><apply id="S4.I1.i4.p1.2.m2.1.1.cmml" xref="S4.I1.i4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.I1.i4.p1.2.m2.1.1.1.cmml" xref="S4.I1.i4.p1.2.m2.1.1">superscript</csymbol><ci id="S4.I1.i4.p1.2.m2.1.1.2.cmml" xref="S4.I1.i4.p1.2.m2.1.1.2">𝐴</ci><times id="S4.I1.i4.p1.2.m2.1.1.3.cmml" xref="S4.I1.i4.p1.2.m2.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.2.m2.1c">A^{*}</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.2.m2.1d">italic_A start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> or some approximation of it would be even more promising.
Furthermore, given this method is strongly dependent on the questions generated offline (in section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>), we parameterize QB-RAG-<math alttext="{\bar{m}}" class="ltx_Math" display="inline" id="S4.I1.i4.p1.3.m3.1"><semantics id="S4.I1.i4.p1.3.m3.1a"><mover accent="true" id="S4.I1.i4.p1.3.m3.1.1" xref="S4.I1.i4.p1.3.m3.1.1.cmml"><mi id="S4.I1.i4.p1.3.m3.1.1.2" xref="S4.I1.i4.p1.3.m3.1.1.2.cmml">m</mi><mo id="S4.I1.i4.p1.3.m3.1.1.1" xref="S4.I1.i4.p1.3.m3.1.1.1.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.3.m3.1b"><apply id="S4.I1.i4.p1.3.m3.1.1.cmml" xref="S4.I1.i4.p1.3.m3.1.1"><ci id="S4.I1.i4.p1.3.m3.1.1.1.cmml" xref="S4.I1.i4.p1.3.m3.1.1.1">¯</ci><ci id="S4.I1.i4.p1.3.m3.1.1.2.cmml" xref="S4.I1.i4.p1.3.m3.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.3.m3.1c">{\bar{m}}</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.3.m3.1d">over¯ start_ARG italic_m end_ARG</annotation></semantics></math> where <math alttext="\bar{m}" class="ltx_Math" display="inline" id="S4.I1.i4.p1.4.m4.1"><semantics id="S4.I1.i4.p1.4.m4.1a"><mover accent="true" id="S4.I1.i4.p1.4.m4.1.1" xref="S4.I1.i4.p1.4.m4.1.1.cmml"><mi id="S4.I1.i4.p1.4.m4.1.1.2" xref="S4.I1.i4.p1.4.m4.1.1.2.cmml">m</mi><mo id="S4.I1.i4.p1.4.m4.1.1.1" xref="S4.I1.i4.p1.4.m4.1.1.1.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.4.m4.1b"><apply id="S4.I1.i4.p1.4.m4.1.1.cmml" xref="S4.I1.i4.p1.4.m4.1.1"><ci id="S4.I1.i4.p1.4.m4.1.1.1.cmml" xref="S4.I1.i4.p1.4.m4.1.1.1">¯</ci><ci id="S4.I1.i4.p1.4.m4.1.1.2.cmml" xref="S4.I1.i4.p1.4.m4.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.4.m4.1c">\bar{m}</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.4.m4.1d">over¯ start_ARG italic_m end_ARG</annotation></semantics></math> measures the average number of questions generated per content. Notably, <math alttext="\bar{m}" class="ltx_Math" display="inline" id="S4.I1.i4.p1.5.m5.1"><semantics id="S4.I1.i4.p1.5.m5.1a"><mover accent="true" id="S4.I1.i4.p1.5.m5.1.1" xref="S4.I1.i4.p1.5.m5.1.1.cmml"><mi id="S4.I1.i4.p1.5.m5.1.1.2" xref="S4.I1.i4.p1.5.m5.1.1.2.cmml">m</mi><mo id="S4.I1.i4.p1.5.m5.1.1.1" xref="S4.I1.i4.p1.5.m5.1.1.1.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.5.m5.1b"><apply id="S4.I1.i4.p1.5.m5.1.1.cmml" xref="S4.I1.i4.p1.5.m5.1.1"><ci id="S4.I1.i4.p1.5.m5.1.1.1.cmml" xref="S4.I1.i4.p1.5.m5.1.1.1">¯</ci><ci id="S4.I1.i4.p1.5.m5.1.1.2.cmml" xref="S4.I1.i4.p1.5.m5.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.5.m5.1c">\bar{m}</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.5.m5.1d">over¯ start_ARG italic_m end_ARG</annotation></semantics></math>
indicates the “coverage” extracted from each content, implying that higher coverage should lead to improved retrieval quality and, consequently, better-generated answers. We decrease <math alttext="\bar{m}" class="ltx_Math" display="inline" id="S4.I1.i4.p1.6.m6.1"><semantics id="S4.I1.i4.p1.6.m6.1a"><mover accent="true" id="S4.I1.i4.p1.6.m6.1.1" xref="S4.I1.i4.p1.6.m6.1.1.cmml"><mi id="S4.I1.i4.p1.6.m6.1.1.2" xref="S4.I1.i4.p1.6.m6.1.1.2.cmml">m</mi><mo id="S4.I1.i4.p1.6.m6.1.1.1" xref="S4.I1.i4.p1.6.m6.1.1.1.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.6.m6.1b"><apply id="S4.I1.i4.p1.6.m6.1.1.cmml" xref="S4.I1.i4.p1.6.m6.1.1"><ci id="S4.I1.i4.p1.6.m6.1.1.1.cmml" xref="S4.I1.i4.p1.6.m6.1.1.1">¯</ci><ci id="S4.I1.i4.p1.6.m6.1.1.2.cmml" xref="S4.I1.i4.p1.6.m6.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.6.m6.1c">\bar{m}</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.6.m6.1d">over¯ start_ARG italic_m end_ARG</annotation></semantics></math> by down-sampling the set of questions in our experiments, to effectively reduce the coverage of our question base. The maximum value from our generation is <math alttext="\bar{m}=8" class="ltx_Math" display="inline" id="S4.I1.i4.p1.7.m7.1"><semantics id="S4.I1.i4.p1.7.m7.1a"><mrow id="S4.I1.i4.p1.7.m7.1.1" xref="S4.I1.i4.p1.7.m7.1.1.cmml"><mover accent="true" id="S4.I1.i4.p1.7.m7.1.1.2" xref="S4.I1.i4.p1.7.m7.1.1.2.cmml"><mi id="S4.I1.i4.p1.7.m7.1.1.2.2" xref="S4.I1.i4.p1.7.m7.1.1.2.2.cmml">m</mi><mo id="S4.I1.i4.p1.7.m7.1.1.2.1" xref="S4.I1.i4.p1.7.m7.1.1.2.1.cmml">¯</mo></mover><mo id="S4.I1.i4.p1.7.m7.1.1.1" xref="S4.I1.i4.p1.7.m7.1.1.1.cmml">=</mo><mn id="S4.I1.i4.p1.7.m7.1.1.3" xref="S4.I1.i4.p1.7.m7.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.I1.i4.p1.7.m7.1b"><apply id="S4.I1.i4.p1.7.m7.1.1.cmml" xref="S4.I1.i4.p1.7.m7.1.1"><eq id="S4.I1.i4.p1.7.m7.1.1.1.cmml" xref="S4.I1.i4.p1.7.m7.1.1.1"></eq><apply id="S4.I1.i4.p1.7.m7.1.1.2.cmml" xref="S4.I1.i4.p1.7.m7.1.1.2"><ci id="S4.I1.i4.p1.7.m7.1.1.2.1.cmml" xref="S4.I1.i4.p1.7.m7.1.1.2.1">¯</ci><ci id="S4.I1.i4.p1.7.m7.1.1.2.2.cmml" xref="S4.I1.i4.p1.7.m7.1.1.2.2">𝑚</ci></apply><cn id="S4.I1.i4.p1.7.m7.1.1.3.cmml" type="integer" xref="S4.I1.i4.p1.7.m7.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i4.p1.7.m7.1c">\bar{m}=8</annotation><annotation encoding="application/x-llamapun" id="S4.I1.i4.p1.7.m7.1d">over¯ start_ARG italic_m end_ARG = 8</annotation></semantics></math> which includes our entire question set.</p>
</div>
</li>
</ol>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">We point out that the methods presented above are not mutually exclusive and can be combined to potentially achieve improved performance, as illustrated by QA-RAG <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite>. Specifically, we could retrieve contents using a combination of above methods and/or associated approached for generating embeddings, and subsequently leverage a re-ranker to select the most relevant documents. However, our experiments focus on isolating and evaluating the efficacy of each method in isolation.</p>
</div>
<div class="ltx_para" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1">Finally, we also highlight several other advancement introduced in RAG:

<span class="ltx_inline-enumerate" id="S4.I2">
<span class="ltx_inline-item" id="S4.I2.i1"><span class="ltx_tag ltx_tag_inline-item">1.</span> <span class="ltx_text" id="S4.I2.i1.1">Modifications prior to retrieval by rewriting or breaking down the query (e.g. ITER-RETGEN <cite class="ltx_cite ltx_citemacro_citep">(Shao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib21" title="">2023</a>)</cite>) in order to incorporate contextual information;
</span></span>
<span class="ltx_inline-item" id="S4.I2.i2"><span class="ltx_tag ltx_tag_inline-item">2.</span> <span class="ltx_text" id="S4.I2.i2.1">enhancements during retrieval by fine tuning the embedder <cite class="ltx_cite ltx_citemacro_citep">(Karpukhin et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib7" title="">2020</a>)</cite>, training an adapter, retrieving diverse documents using MMR;
</span></span>
<span class="ltx_inline-item" id="S4.I2.i3"><span class="ltx_tag ltx_tag_inline-item">3.</span> <span class="ltx_text" id="S4.I2.i3.1">post retrieval refinements by reranking (or filtering, see <cite class="ltx_cite ltx_citemacro_citep">(Nogueira et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib15" title="">2019</a>)</cite>) the contents retrieved using an evaluator LLM, alternatively building a mixture LLM distributions (see REPLUG <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib22" title="">2023</a>)</cite>), or even fine tuning the generator LLM to better utilize the retrieved contents (see RA-DIT <cite class="ltx_cite ltx_citemacro_citep">(Lin et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib12" title="">2023</a>)</cite>).
</span></span>
</span>
While these techniques hold potential for enhancing retrieval and answer generation across all evaluated methods, we omit them from our analysis to maintain a focused comparison. This approach ensures an independent evaluation of the core retrieval mechanisms, as these enhancements can be incorporated without fundamentally altering the underlying methods.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Answer Generation</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">After retrieving relevant content using the methods described above, we employ an LLM (<span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.1">Gemini-Pro</span>) for answer generation. For each question, the retrieved content is provided as context to the LLM along with the following prompt to generate the answer:</p>
</div>
<figure class="ltx_float ltx_lstlisting" id="LST3">
<div class="ltx_listing ltx_lst_numbers_left ltx_lstlisting ltx_listing" id="LST3.1" style="background-color:#F2F2EB;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,VXNlIG9ubHkgdGhlIHByb3ZpZGVkIHBpZWNlcyBvZiBjb250ZXh0IHRvIGFuc3dlciB0aGUgIHF1ZXN0aW9uIGF0IHRoZSBlbmQuIFRoaW5rIHN0ZXAtYnktc3RlcCBhbmQgdGhlbiBhbnN3ZXIuIFJlc3BvbmQgaW4gMyB0byA2IHNob3J0IHNlbnRlbmNlcy4KCkRvIG5vdCB0cnkgdG8gbWFrZSB1cCBhbiBhbnN3ZXI6Ci0gSWYgdGhlIGNvbnRleHQgZG9lcyBub3QgY29udGFpbiBlbm91Z2ggcmVsZXZhbnQgaW5mb3JtYXRpb24gdG8gZGV0ZXJtaW5lIGFuIGFuc3dlciB0byB0aGUgcXVlcnksIHNheSAiSSBjYW5ub3QgZGV0ZXJtaW5lIHRoZSBhbnN3ZXIgdG8gdGhhdC4iCi0gSWYgdGhlIGNvbnRleHQgaXMgZW1wdHksIGp1c3Qgc2F5ICJJIGRvIG5vdCBrbm93IHRoZSBhbnN3ZXIgdG8gdGhhdC4iCgpBbnN3ZXIgaW4gYW4gZW1wYXRoZXRpYyBhbmQgcG9zaXRpdmUgdG9uZS4gRG8gbm90IHVzZSBwaHJhc2VzIHN1Y2ggYXMgIkFjY29yZGluZyB0byB0aGUgY29udGV4dCIsIGFuZCBkaXJlY3RseSBhbnN3ZXIgdGhlIHF1ZXN0aW9uLgoKQ29udGV4dHM6IHtjb250ZXh0c30KUXVlc3Rpb246IHtxdWVzdGlvbn0KQW5zd2VyOg==">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx29">
<span class="ltx_tag ltx_tag_listingline">1</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.1" style="font-size:80%;">Use</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.3" style="font-size:80%;">only</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.5" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.7" style="font-size:80%;">provided</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.9" style="font-size:80%;">pieces</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.11" style="font-size:80%;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.13" style="font-size:80%;">context</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.15" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.17" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.19" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.20" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.21" style="font-size:80%;">question</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.22" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.23" style="font-size:80%;">at</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.24" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.25" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.26" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.27" style="font-size:80%;">end</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.28" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.29" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.30" style="font-size:80%;">Think</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.31" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.32" style="font-size:80%;">step</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.33" style="font-size:80%;">-</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.34" style="font-size:80%;">by</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.35" style="font-size:80%;">-</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.36" style="font-size:80%;">step</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.37" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.38" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.39" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.40" style="font-size:80%;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.41" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.42" style="font-size:80%;">answer</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.43" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.44" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.45" style="font-size:80%;">Respond</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.46" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.47" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.48" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.49" style="font-size:80%;">3</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.50" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.51" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.52" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.53" style="font-size:80%;">6</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.54" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.55" style="font-size:80%;">short</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.56" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.57" style="font-size:80%;">sentences</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.58" style="font-size:80%;">.</span>
</div>
<div class="ltx_listingline" id="lstnumberx30">
<span class="ltx_tag ltx_tag_listingline">2</span>
</div>
<div class="ltx_listingline" id="lstnumberx31">
<span class="ltx_tag ltx_tag_listingline">3</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.1" style="font-size:80%;">Do</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.3" style="font-size:80%;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.5" style="font-size:80%;">try</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.7" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.9" style="font-size:80%;">make</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.11" style="font-size:80%;">up</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.13" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx31.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx31.15" style="font-size:80%;">answer</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx31.16" style="font-size:80%;">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx32">
<span class="ltx_tag ltx_tag_listingline">4</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.1" style="font-size:80%;">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.3" style="font-size:80%;">If</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.5" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.7" style="font-size:80%;">context</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.9" style="font-size:80%;">does</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.11" style="font-size:80%;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.13" style="font-size:80%;">contain</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.14" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.15" style="font-size:80%;">enough</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.16" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.17" style="font-size:80%;">relevant</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.18" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.19" style="font-size:80%;">information</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.20" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.21" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.22" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.23" style="font-size:80%;">determine</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.24" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.25" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.26" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.27" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.28" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.29" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.30" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.31" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.32" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.33" style="font-size:80%;">query</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.34" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.35" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.36" style="font-size:80%;">say</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.37" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.38" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.39" style="font-size:80%;">I</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.40" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.41" style="font-size:80%;">cannot</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.42" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.43" style="font-size:80%;">determine</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.44" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.45" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.46" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.47" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.48" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.49" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.50" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.51" style="font-size:80%;">that</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.52" style="font-size:80%;">."</span>
</div>
<div class="ltx_listingline" id="lstnumberx33">
<span class="ltx_tag ltx_tag_listingline">5</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.1" style="font-size:80%;">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.3" style="font-size:80%;">If</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.5" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.7" style="font-size:80%;">context</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.9" style="font-size:80%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.11" style="font-size:80%;">empty</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.12" style="font-size:80%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.13" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.14" style="font-size:80%;">just</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.15" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.16" style="font-size:80%;">say</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.17" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.18" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.19" style="font-size:80%;">I</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.20" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.21" style="font-size:80%;">do</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.22" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.23" style="font-size:80%;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.24" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.25" style="font-size:80%;">know</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.26" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.27" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.28" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.29" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.30" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.31" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.32" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.33" style="font-size:80%;">that</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.34" style="font-size:80%;">."</span>
</div>
<div class="ltx_listingline" id="lstnumberx34">
<span class="ltx_tag ltx_tag_listingline">6</span>
</div>
<div class="ltx_listingline" id="lstnumberx35">
<span class="ltx_tag ltx_tag_listingline">7</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.1" style="font-size:80%;">Answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.2" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.3" style="font-size:80%;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.4" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.5" style="font-size:80%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.6" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.7" style="font-size:80%;">empathetic</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.8" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.9" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.10" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.11" style="font-size:80%;">positive</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.12" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.13" style="font-size:80%;">tone</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.14" style="font-size:80%;">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.15" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.16" style="font-size:80%;">Do</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.17" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.18" style="font-size:80%;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.19" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.20" style="font-size:80%;">use</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.21" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.22" style="font-size:80%;">phrases</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.23" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.24" style="font-size:80%;">such</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.25" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.26" style="font-size:80%;">as</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.27" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.28" style="font-size:80%;">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.29" style="font-size:80%;">According</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.30" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.31" style="font-size:80%;">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.32" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.33" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.34" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.35" style="font-size:80%;">context</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.36" style="font-size:80%;">",</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.37" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.38" style="font-size:80%;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.39" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.40" style="font-size:80%;">directly</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.41" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.42" style="font-size:80%;">answer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.43" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.44" style="font-size:80%;">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.45" style="font-size:80%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.46" style="font-size:80%;">question</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.47" style="font-size:80%;">.</span>
</div>
<div class="ltx_listingline" id="lstnumberx36">
<span class="ltx_tag ltx_tag_listingline">8</span>
</div>
<div class="ltx_listingline" id="lstnumberx37">
<span class="ltx_tag ltx_tag_listingline">9</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.1" style="font-size:80%;">Contexts</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.2" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.3" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.4" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.5" style="font-size:80%;">contexts</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.6" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx38">
<span class="ltx_tag ltx_tag_listingline">10</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx38.1" style="font-size:80%;">Question</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx38.2" style="font-size:80%;">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx38.3" style="font-size:80%;"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx38.4" style="font-size:80%;">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx38.5" style="font-size:80%;">question</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx38.6" style="font-size:80%;">}</span>
</div>
<div class="ltx_listingline" id="lstnumberx39">
<span class="ltx_tag ltx_tag_listingline">11</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx39.1" style="font-size:80%;">Answer</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx39.2" style="font-size:80%;">:</span>
</div>
</div>
<figcaption class="ltx_caption" style="background-color:#F2F2EB;"><span class="ltx_tag ltx_tag_float">Listing 3: </span>Base prompt for answer generation</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Test Data Generation</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">We construct two distinct test sets designed to assess the performance of the various retrieval methods under different conditions. Each test set consists of questions answerable by our content base, ensuring relevance to the task. Crucially, no test question appears verbatim within the pre-generated question set used for retrieval. All test questions are generated using <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p1.1.1">Gemini-Pro</span>..</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<ol class="ltx_enumerate" id="S4.I3">
<li class="ltx_item" id="S4.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S4.I3.i1.p1">
<p class="ltx_p" id="S4.I3.i1.p1.1"><span class="ltx_text ltx_font_typewriter" id="S4.I3.i1.p1.1.1">Rephrase</span>: To generate this test set, we prompted an LLM to rephrase each of the 4.8k questions in the knowledge base. Then, 500 of those were randomly sampled to yield the first test set. This approach was done to simulate scenarios where the knowledge base contains a comprehensive set of questions. In such scenarios, the intents of new incoming questions are more likely to be represented in the knowledge base.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S4.I3.i2.p1">
<p class="ltx_p" id="S4.I3.i2.p1.1"><span class="ltx_text ltx_font_typewriter" id="S4.I3.i2.p1.1.1">Out-of-Distribution</span>: To generate the second test set, we prompted an LLM to generate a new question for each of the 630 contents. The LLM was instructed to not generate a question that already exists in the question knowledge base for that content. Then, the 630 newly generated questions were filtered via the answerability model from Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a> to ensure the new questions were indeed answerable by the corresponding content. After filtering, 305 newly generated questions made up the second test set.</p>
</div>
</li>
</ol>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Metrics</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">To rigorously assess the performance of our proposed QB-RAG method, we employ two distinct sets of metrics: those evaluating the quality of content retrieval and those assessing the quality of the generated answers. While QB-RAG’s primary objective is to enhance retrieval, we hypothesize that this improvement will translate to better-generated answers.
Given the emphasis on reliability and safety in healthcare applications, we carefully selected answer quality metrics tailored to this domain. Since our content base represents a vetted source of trusted information, we prioritize answer faithfulness, penalizing any unwarranted extrapolation or information not grounded in the provided content. Additionally, we recognize the critical importance of a model’s ability to decline answering when the content lacks clarity, a crucial aspect of mitigating potential risks in healthcare settings.</p>
</div>
<section class="ltx_subsubsection" id="S4.SS4.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.1 </span>Retrieval Evaluation</h4>
<div class="ltx_para" id="S4.SS4.SSS1.p1">
<ul class="ltx_itemize" id="S4.I4">
<li class="ltx_item" id="S4.I4.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I4.i1.p1">
<p class="ltx_p" id="S4.I4.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I4.i1.p1.1.1">Exact Recovery Rate</span>: This metric measures the percentage of test questions for which the retrieved set of <math alttext="k" class="ltx_Math" display="inline" id="S4.I4.i1.p1.1.m1.1"><semantics id="S4.I4.i1.p1.1.m1.1a"><mi id="S4.I4.i1.p1.1.m1.1.1" xref="S4.I4.i1.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.I4.i1.p1.1.m1.1b"><ci id="S4.I4.i1.p1.1.m1.1.1.cmml" xref="S4.I4.i1.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I4.i1.p1.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.I4.i1.p1.1.m1.1d">italic_k</annotation></semantics></math> documents includes the exact content piece used to generate the original question. We acknowledge that while exact recovery represents retrieval of “golden content”, multiple contents might offer relevant information for a single question. Therefore, we incorporate additional relevance measures described below.</p>
</div>
</li>
<li class="ltx_item" id="S4.I4.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I4.i2.p1">
<p class="ltx_p" id="S4.I4.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I4.i2.p1.1.1">Auto-evaluator Relevancy Rate</span>: This metric addresses the limitations of relying solely on exact matches by leveraging the answerability model (Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>) to gauge content relevance. Specifically, it calculates the percentage of test questions for which at least one retrieved document is deemed relevant by the answerability model. This automated assessment has demonstrated strong correlation with human judgments as as described in section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S2" title="2 Application and Dataset ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
</li>
<li class="ltx_item" id="S4.I4.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I4.i3.p1">
<p class="ltx_p" id="S4.I4.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I4.i3.p1.1.1">Average Re-ranker Relevancy Score</span>: To evaluate the relevance of each retrieved document individually, we employ the BGE re-ranker <cite class="ltx_cite ltx_citemacro_citep">(Xiao et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib31" title="">2023</a>)</cite>. This method assigns a relevance score (higher indicating greater relevance) between each retrieved document and its corresponding test question. For each test question, we take the maximum relevance score among the <math alttext="k" class="ltx_Math" display="inline" id="S4.I4.i3.p1.1.m1.1"><semantics id="S4.I4.i3.p1.1.m1.1a"><mi id="S4.I4.i3.p1.1.m1.1.1" xref="S4.I4.i3.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S4.I4.i3.p1.1.m1.1b"><ci id="S4.I4.i3.p1.1.m1.1.1.cmml" xref="S4.I4.i3.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I4.i3.p1.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S4.I4.i3.p1.1.m1.1d">italic_k</annotation></semantics></math> retrieved documents and average these maximum scores across all test questions. The effectiveness of the BGE re-ranker in relevance scoring has been previously established in RAG research <cite class="ltx_cite ltx_citemacro_citep">(Kim and Min, <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib8" title="">2024</a>)</cite>.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.2 </span>Answer Evaluation</h4>
<div class="ltx_para" id="S4.SS4.SSS2.p1">
<ul class="ltx_itemize" id="S4.I5">
<li class="ltx_item" id="S4.I5.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I5.i1.p1">
<p class="ltx_p" id="S4.I5.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I5.i1.p1.1.1">Answer Guideline Adherence Rate:</span> This metric measures how well a generated answer aligns with a predefined guideline derived from a “golden answer.” The assessment involves a three-step process. Initially, an LLM generates a “golden answer” for each test question using the associated content. Subsequently, another LLM analyzes this golden answer to create a guideline outlining the key elements an accurate response should contain. Finally, a third LLM evaluates the candidate answer against this extracted guideline, assigning a score from 0 to 1 based on the extent to which the answer covers the guideline’s key points. While this guideline-based approach aims to capture the nuances of answer quality, it relies heavily on the accuracy of both the golden answer and the extracted rubric. To provide a more robust and multifaceted evaluation, we introduce additional metrics that directly assess distinct aspects of answer quality below.</p>
</div>
</li>
<li class="ltx_item" id="S4.I5.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I5.i2.p1">
<p class="ltx_p" id="S4.I5.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I5.i2.p1.1.1">Answer Relevancy Rate</span>: This metric evaluates whether a generated answer directly address the user’s question and provides a self-contained response. An LLM classifies each answer as either relevant (YES) or not relevant (NO) to the corresponding test question, focusing solely on the relevance, not the accuracy or factual correctness of the answer.</p>
</div>
</li>
<li class="ltx_item" id="S4.I5.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I5.i3.p1">
<p class="ltx_p" id="S4.I5.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I5.i3.p1.1.1">Answer Faithfulness Rate</span>: This evaluates weather the content supplied to the LLM during generation supports the generated answer. An answer is deemed faithful if <span class="ltx_text ltx_font_italic" id="S4.I5.i3.p1.1.2">any</span> portion of the provided content supports it, regardless of the presence of irrelevant content. This component is crucial to ensure that the answer generated is grounded on our content, a crucial feature for many healthcare applications. Ensuring the answer is grounded on the supplied content will mitigate the hallucination risk. Note that declined answers are considered not faithful in our definition.</p>
</div>
</li>
<li class="ltx_item" id="S4.I5.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I5.i4.p1">
<p class="ltx_p" id="S4.I5.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I5.i4.p1.1.1">Answer Declined Rate</span>: This metric assesses whether the LLM declined to answer the question. This may occur because our answer generation couldn’t find relevant information in the content (we specifically prompt the LLM to only answer questions when there is a retrieved content.)</p>
</div>
</li>
</ul>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Experimental Results</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">In this section we discuss the performance of our methods, QB-RAG-8 (resp. QB-RAG-2) where the knowledge base has an average of 8 (resp. 2) queries per content, which are compared against the incoming query for retrieval. We assess the impact of QB-RAG on both retrieval efficacy and the quality of generated answers.</p>
</div>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Effect of QB-RAG on Retrieval Efficacy</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">On the <span class="ltx_text ltx_font_typewriter" id="S5.SS1.p1.1.1">Rephrase</span> test set, where the knowledge base is expected to contain questions semantically similar to the test questions, QB-RAG-8 consistently outperforms all benchmark methods. As shown in table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T2" title="Table 2 ‣ 5.1 Effect of QB-RAG on Retrieval Efficacy ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>, QB-RAG-8 nearly doubles the exact recovery rate compared to other methods (e.g., from 45% to 89% when retrieving a single document). This suggests that a comprehensive, query-aligned knowledge base, as constructed by QB-RAG-8, substantially improves the retrieval of the exact source document. These impressive gains highlight the scenario where our knowledge base is comprehensive and covers quite broadly the extent of questions our documents can answer.</p>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1">The exact recovery rate does not present the full picture. When analyzing the Auto-evaluator Relevancy and the Re-ranker score (refer section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS4.SSS1" title="4.4.1 Retrieval Evaluation ‣ 4.4 Metrics ‣ 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4.4.1</span></a>), our method still dominates the baselines when retrieving a single content. As measured by the LLM, the content we retrieve are relevant 68% of the time, whereas traditional methods retrieve relevant content around 40% of the time. In table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T2" title="Table 2 ‣ 5.1 Effect of QB-RAG on Retrieval Efficacy ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>, we also include the average re-ranker relevancy score. QB-RAG-8 yields the highest average relevance score using the BGE re-ranker.</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.1">Increasing the number of retrieved documents to 3 further illustrates the efficacy of QB-RAG-8. The exact recovery rate reaches a near-optimal 97%, substantially higher than the baseline approaches. QB-RAG-8 also achieves almost 20% higher relevancy rate compared to the baselines. Similarly, the average re-ranker relevancy score is significantly higher for QB-RAG. These findings underscore the robustness of QB-RAG-8 in retrieving both the target document and a set of relevant documents.</p>
</div>
<figure class="ltx_table" id="S5.T2">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T2.1">
<tr class="ltx_tr" id="S5.T2.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T2.1.1.1">
<span class="ltx_text" id="S5.T2.1.1.1.1"></span> <span class="ltx_text" id="S5.T2.1.1.1.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T2.1.1.1.2.1">
<span class="ltx_tr" id="S5.T2.1.1.1.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.1.2.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T2.1.1.1.2.1.1.1.1">Retrieval assessment</span></span></span>
<span class="ltx_tr" id="S5.T2.1.1.1.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.1.2.1.2.1"><span class="ltx_text ltx_font_typewriter" id="S5.T2.1.1.1.2.1.2.1.1">Rephrase</span></span></span>
</span></span><span class="ltx_text" id="S5.T2.1.1.1.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T2.1.1.2">
<span class="ltx_text" id="S5.T2.1.1.2.1"></span> <span class="ltx_text" id="S5.T2.1.1.2.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T2.1.1.2.2.1">
<span class="ltx_tr" id="S5.T2.1.1.2.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.2.2.1.1.1">Exact Recovery</span></span>
<span class="ltx_tr" id="S5.T2.1.1.2.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.2.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T2.1.1.2.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T2.1.1.3">
<span class="ltx_text" id="S5.T2.1.1.3.1"></span> <span class="ltx_text" id="S5.T2.1.1.3.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T2.1.1.3.2.1">
<span class="ltx_tr" id="S5.T2.1.1.3.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.3.2.1.1.1">Auto-evaluator</span></span>
<span class="ltx_tr" id="S5.T2.1.1.3.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.3.2.1.2.1">Relevancy Rate</span></span>
</span></span><span class="ltx_text" id="S5.T2.1.1.3.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T2.1.1.4">
<span class="ltx_text" id="S5.T2.1.1.4.1"></span> <span class="ltx_text" id="S5.T2.1.1.4.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T2.1.1.4.2.1">
<span class="ltx_tr" id="S5.T2.1.1.4.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.4.2.1.1.1">Avg. Re-ranker</span></span>
<span class="ltx_tr" id="S5.T2.1.1.4.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T2.1.1.4.2.1.2.1">Relevancy Score</span></span>
</span></span><span class="ltx_text" id="S5.T2.1.1.4.3"></span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T2.1.2.1">Number of retrieved docs</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.2">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.3">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.4">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.5">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.6">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.2.7">3</td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T2.1.3.1">QB-RAG-8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.2"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.2.1">0.89</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.3"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.3.1">0.97</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.4"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.4.1">0.68</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.5"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.5.1">0.76</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.6"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.6.1">1.21</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.3.7"><span class="ltx_text ltx_font_bold" id="S5.T2.1.3.7.1">1.65</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.4">
<td class="ltx_td ltx_align_left" id="S5.T2.1.4.1">QB-RAG-2</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.2">0.59</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.3">0.75</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.4">0.53</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.5">0.66</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.6">–0.25</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.4.7">0.92</td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.5">
<td class="ltx_td ltx_align_left" id="S5.T2.1.5.1">Naive RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.2">0.44</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.3">0.61</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.4">0.39</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.5">0.56</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.6">-0.96</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.5.7">0.35</td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.6">
<td class="ltx_td ltx_align_left" id="S5.T2.1.6.1">QA-RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.2">0.45</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.3">0.60</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.4">0.41</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.5">0.56</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.6">-1.52</td>
<td class="ltx_td ltx_align_center" id="S5.T2.1.6.7">-0.38</td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.7">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T2.1.7.1">HyDE</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.2">0.47</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.3">0.63</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.4">0.41</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.5">0.56</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.6">-1.14</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T2.1.7.7">-0.09</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Retrieval performance (higher is better) of methods on <span class="ltx_text ltx_font_typewriter" id="S5.T2.3.1">Rephrase</span>, where documents were retrieved given rephrased questions from the content base.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS1.p4">
<p class="ltx_p" id="S5.SS1.p4.1">On the more challenging <span class="ltx_text ltx_font_typewriter" id="S5.SS1.p4.1.1">Out-of-Distribution</span> test set, QB-RAG-8 maintains its advantage, albeit with smaller gains. Table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T3" title="Table 3 ‣ 5.1 Effect of QB-RAG on Retrieval Efficacy ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">3</span></a> shows that QB-RAG-8 improves the exact recovery rate by 1.3% to 6.2% compared to benchmark methods. Despite the adversarial nature of this test set, where incoming questions are intentionally dissimilar to the training set, QB-RAG-8 consistently retrieves the correct source document more often.</p>
</div>
<div class="ltx_para" id="S5.SS1.p5">
<p class="ltx_p" id="S5.SS1.p5.1">Furthermore, QB-RAG-8 demonstrates a significant improvement in relevancy. The auto-evaluator relevancy rate shows gains of 8% to 15% over baseline methods, indicating that QB-RAG-8 effectively identifies relevant content even when the query distribution shifts. These improvements in retrieval quality directly benefit downstream answer generation, as more relevant content is likely to lead to more accurate and informative answers. This is further supported by the consistent gains observed in the average relevance scores from the BGE re-ranker.</p>
</div>
<figure class="ltx_table" id="S5.T3">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T3.1">
<tr class="ltx_tr" id="S5.T3.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T3.1.1.1">
<span class="ltx_text" id="S5.T3.1.1.1.1"></span> <span class="ltx_text" id="S5.T3.1.1.1.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T3.1.1.1.2.1">
<span class="ltx_tr" id="S5.T3.1.1.1.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.1.2.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.1.2.1.1.1.1">Retrieval assessment</span></span></span>
<span class="ltx_tr" id="S5.T3.1.1.1.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.1.2.1.2.1"><span class="ltx_text ltx_font_typewriter" id="S5.T3.1.1.1.2.1.2.1.1">Out-of-Dist</span></span></span>
</span></span><span class="ltx_text" id="S5.T3.1.1.1.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T3.1.1.2">
<span class="ltx_text" id="S5.T3.1.1.2.1"></span> <span class="ltx_text" id="S5.T3.1.1.2.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T3.1.1.2.2.1">
<span class="ltx_tr" id="S5.T3.1.1.2.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.2.2.1.1.1">Exact Recovery</span></span>
<span class="ltx_tr" id="S5.T3.1.1.2.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.2.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T3.1.1.2.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T3.1.1.3">
<span class="ltx_text" id="S5.T3.1.1.3.1"></span> <span class="ltx_text" id="S5.T3.1.1.3.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T3.1.1.3.2.1">
<span class="ltx_tr" id="S5.T3.1.1.3.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.3.2.1.1.1">Auto-evaluator</span></span>
<span class="ltx_tr" id="S5.T3.1.1.3.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.3.2.1.2.1">Relevancy Rate</span></span>
</span></span><span class="ltx_text" id="S5.T3.1.1.3.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T3.1.1.4">
<span class="ltx_text" id="S5.T3.1.1.4.1"></span> <span class="ltx_text" id="S5.T3.1.1.4.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T3.1.1.4.2.1">
<span class="ltx_tr" id="S5.T3.1.1.4.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.4.2.1.1.1">Avg. Re-ranker</span></span>
<span class="ltx_tr" id="S5.T3.1.1.4.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.1.1.4.2.1.2.1">Relevancy Score</span></span>
</span></span><span class="ltx_text" id="S5.T3.1.1.4.3"></span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.1.2.1">Number of retrieved docs</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.2">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.3">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.4">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.5">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.6">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.7">3</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T3.1.3.1">QB-RAG-8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.2"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.2.1">0.53</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.3"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.3.1">0.72</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.4"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.4.1">0.58</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.5"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.5.1">0.75</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.6"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.6.1">0.47</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.7"><span class="ltx_text ltx_font_bold" id="S5.T3.1.3.7.1">1.68</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.4">
<td class="ltx_td ltx_align_left" id="S5.T3.1.4.1">QB-RAG-2</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.2">0.42</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.3">0.57</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.4">0.50</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.5">0.64</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.6">-0.54</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.7">0.78</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.5">
<td class="ltx_td ltx_align_left" id="S5.T3.1.5.1">Naive RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.2">0.50</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.3">0.68</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.4">0.50</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.5">0.64</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.6">-0.03</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.7">1.25</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.6">
<td class="ltx_td ltx_align_left" id="S5.T3.1.6.1">QA-RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.2">0.51</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.3">0.66</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.4">0.47</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.5">0.60</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.6">-0.48</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.7">0.53</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.7">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T3.1.7.1">HyDE</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.2">0.52</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.3">0.70</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.4">0.48</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.5">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.6">-0.01</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.1.7.7">1.20</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Retrieval performance (higher is better) of methods on <span class="ltx_text ltx_font_typewriter" id="S5.T3.3.1">Out-of-Distribution</span>, where documents were retrieved given newly generated questions.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Effect of QB-RAG on Generated Answer Quality</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">We now examine how the improved retrieval accuracy of QB-RAG translates to the quality of generated answers. Recall that the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p1.1.1">Rephrase</span> test set favors our query-based approach as test questions are semantically similar to those in our generated knowledge base.</p>
</div>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T4" title="Table 4 ‣ 5.2 Effect of QB-RAG on Generated Answer Quality ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4</span></a>, both QB-RAG-8 and QB-RAG-2 consistently outperform the benchmark methods on all answer quality metrics for the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p2.1.1">Rephrase</span> test set. Notably, QB-RAG-8 achieves an 84% answer faithfulness rate, significantly surpassing the 62%-68% rates of the baseline methods. This suggests that by accurately retrieving the most relevant content, QB-RAG enables the LLM to generate answers that are well-grounded in the provided information. Additionally, QB-RAG achieves the highest accuracy rate, indicating its answers effectively address the key elements outlined in the pre-defined guidelines (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S4.SS4.SSS2" title="4.4.2 Answer Evaluation ‣ 4.4 Metrics ‣ 4 Benchmark ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4.4.2</span></a>).</p>
</div>
<figure class="ltx_table" id="S5.T4">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T4.1">
<tr class="ltx_tr" id="S5.T4.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T4.1.1.1">
<span class="ltx_text" id="S5.T4.1.1.1.1"></span> <span class="ltx_text" id="S5.T4.1.1.1.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T4.1.1.1.2.1">
<span class="ltx_tr" id="S5.T4.1.1.1.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.1.2.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.2.1.1.1.1">Answer assessment</span></span></span>
<span class="ltx_tr" id="S5.T4.1.1.1.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.1.2.1.2.1"><span class="ltx_text ltx_font_typewriter" id="S5.T4.1.1.1.2.1.2.1.1">Rephrase</span></span></span>
</span></span><span class="ltx_text" id="S5.T4.1.1.1.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T4.1.1.2">
<span class="ltx_text" id="S5.T4.1.1.2.1"></span> <span class="ltx_text" id="S5.T4.1.1.2.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T4.1.1.2.2.1">
<span class="ltx_tr" id="S5.T4.1.1.2.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.2.2.1.1.1">Declined</span></span>
<span class="ltx_tr" id="S5.T4.1.1.2.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.2.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T4.1.1.2.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T4.1.1.3">
<span class="ltx_text" id="S5.T4.1.1.3.1"></span> <span class="ltx_text" id="S5.T4.1.1.3.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T4.1.1.3.2.1">
<span class="ltx_tr" id="S5.T4.1.1.3.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.3.2.1.1.1">Faithfulness</span></span>
<span class="ltx_tr" id="S5.T4.1.1.3.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.3.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T4.1.1.3.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T4.1.1.4">
<span class="ltx_text" id="S5.T4.1.1.4.1"></span> <span class="ltx_text" id="S5.T4.1.1.4.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T4.1.1.4.2.1">
<span class="ltx_tr" id="S5.T4.1.1.4.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.4.2.1.1.1">Relevancy</span></span>
<span class="ltx_tr" id="S5.T4.1.1.4.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.4.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T4.1.1.4.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T4.1.1.5">
<span class="ltx_text" id="S5.T4.1.1.5.1"></span> <span class="ltx_text" id="S5.T4.1.1.5.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T4.1.1.5.2.1">
<span class="ltx_tr" id="S5.T4.1.1.5.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.5.2.1.1.1">Accuracy</span></span>
<span class="ltx_tr" id="S5.T4.1.1.5.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T4.1.1.5.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T4.1.1.5.3"></span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T4.1.2.1">QB-RAG-8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.2.1">.12</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.3"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.3.1">.84</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.4"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.4.1">.83</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.5.1">.79</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.3">
<td class="ltx_td ltx_align_left" id="S5.T4.1.3.1">QB-RAG-2</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.3.2">.21</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.3.3">.74</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.3.4">.73</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.3.5">.73</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.4">
<td class="ltx_td ltx_align_left" id="S5.T4.1.4.1">Naive RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.2">.30</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.3">.67</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.4">.66</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.5">.68</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.5">
<td class="ltx_td ltx_align_left" id="S5.T4.1.5.1">QA-RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.2">.33</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.3">.62</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.4">.62</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.5">.62</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.6">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T4.1.6.1">HyDE</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T4.1.6.2">.30</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T4.1.6.3">.68</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T4.1.6.4">.66</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T4.1.6.5">.67</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Answer quality of methods on <span class="ltx_text ltx_font_typewriter" id="S5.T4.3.1">Rephrase</span>, where documents were retrieved given rephrased questions from the content base. 3 documents retrieved.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS2.p3">
<p class="ltx_p" id="S5.SS2.p3.1">These patterns hold on the more challenging <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p3.1.1">Out-of-Distribution</span> test set, as seen in table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T5" title="Table 5 ‣ 5.2 Effect of QB-RAG on Generated Answer Quality ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">5</span></a>.
There QB-RAG-8 achieves 78% faithfulness, fairing higher than the benchmarks 68%-74%. However QB-RAG-2 under-performs, highlighting its inability to generalize to new questions.</p>
</div>
<figure class="ltx_table" id="S5.T5">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T5.1">
<tr class="ltx_tr" id="S5.T5.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S5.T5.1.1.1">
<span class="ltx_text" id="S5.T5.1.1.1.1"></span> <span class="ltx_text" id="S5.T5.1.1.1.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T5.1.1.1.2.1">
<span class="ltx_tr" id="S5.T5.1.1.1.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.1.2.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.1.2.1.1.1.1">Answer assessment</span></span></span>
<span class="ltx_tr" id="S5.T5.1.1.1.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.1.2.1.2.1"><span class="ltx_text ltx_font_typewriter" id="S5.T5.1.1.1.2.1.2.1.1">Out-of-Dist</span></span></span>
</span></span><span class="ltx_text" id="S5.T5.1.1.1.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.1.1.2">
<span class="ltx_text" id="S5.T5.1.1.2.1"></span> <span class="ltx_text" id="S5.T5.1.1.2.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T5.1.1.2.2.1">
<span class="ltx_tr" id="S5.T5.1.1.2.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.2.2.1.1.1">Declined</span></span>
<span class="ltx_tr" id="S5.T5.1.1.2.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.2.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T5.1.1.2.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.1.1.3">
<span class="ltx_text" id="S5.T5.1.1.3.1"></span> <span class="ltx_text" id="S5.T5.1.1.3.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T5.1.1.3.2.1">
<span class="ltx_tr" id="S5.T5.1.1.3.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.3.2.1.1.1">Faithfulness</span></span>
<span class="ltx_tr" id="S5.T5.1.1.3.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.3.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T5.1.1.3.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.1.1.4">
<span class="ltx_text" id="S5.T5.1.1.4.1"></span> <span class="ltx_text" id="S5.T5.1.1.4.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T5.1.1.4.2.1">
<span class="ltx_tr" id="S5.T5.1.1.4.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.4.2.1.1.1">Relevancy</span></span>
<span class="ltx_tr" id="S5.T5.1.1.4.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.4.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T5.1.1.4.3"></span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.1.1.5">
<span class="ltx_text" id="S5.T5.1.1.5.1"></span> <span class="ltx_text" id="S5.T5.1.1.5.2">
<span class="ltx_tabular ltx_align_middle" id="S5.T5.1.1.5.2.1">
<span class="ltx_tr" id="S5.T5.1.1.5.2.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.5.2.1.1.1">Accuracy</span></span>
<span class="ltx_tr" id="S5.T5.1.1.5.2.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T5.1.1.5.2.1.2.1">Rate</span></span>
</span></span><span class="ltx_text" id="S5.T5.1.1.5.3"></span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T5.1.2.1">QB-RAG-8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.2.1">.17</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.3"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.3.1">.78</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.4"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.4.1">.77</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.5"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.5.1">.69</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.3">
<td class="ltx_td ltx_align_left" id="S5.T5.1.3.1">QB-RAG-2</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.3.2">.29</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.3.3">.66</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.3.4">.65</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.3.5">.63</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.4">
<td class="ltx_td ltx_align_left" id="S5.T5.1.4.1">Naive RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.2">.27</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.3">.72</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.4">.70</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.5">.64</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.5">
<td class="ltx_td ltx_align_left" id="S5.T5.1.5.1">QA-RAG</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.5.2">.29</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.5.3">.68</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.5.4">.67</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.5.5">.63</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.6">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S5.T5.1.6.1">HyDE</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.1.6.2">.24</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.1.6.3">.74</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.1.6.4">.72</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.1.6.5">.68</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Answer quality of methods on <span class="ltx_text ltx_font_typewriter" id="S5.T5.3.1">Out-of-Distribution</span>, where documents were retrieved given newly generated questions. 3 documents retrieved.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS2.p4">
<p class="ltx_p" id="S5.SS2.p4.2">An answer can be deemed unfaithful either because the answer is not grounded, or because the LLM declined to answer. We note that the higher faithfulness rate of QB-RAG-8 is largely due to improved retrieval, resulting in a decline rate of only 12% on the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p4.2.1">Rephrase</span> test set and 17% on the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p4.2.2">Out-of-Distribution</span> test set, compared to significantly higher rates for the baselines. We observe a slight increase in answers that are not grounded, from <math alttext="\approx 2\%-3\%" class="ltx_Math" display="inline" id="S5.SS2.p4.1.m1.1"><semantics id="S5.SS2.p4.1.m1.1a"><mrow id="S5.SS2.p4.1.m1.1.1" xref="S5.SS2.p4.1.m1.1.1.cmml"><mi id="S5.SS2.p4.1.m1.1.1.2" xref="S5.SS2.p4.1.m1.1.1.2.cmml"></mi><mo id="S5.SS2.p4.1.m1.1.1.1" xref="S5.SS2.p4.1.m1.1.1.1.cmml">≈</mo><mrow id="S5.SS2.p4.1.m1.1.1.3" xref="S5.SS2.p4.1.m1.1.1.3.cmml"><mrow id="S5.SS2.p4.1.m1.1.1.3.2" xref="S5.SS2.p4.1.m1.1.1.3.2.cmml"><mn id="S5.SS2.p4.1.m1.1.1.3.2.2" xref="S5.SS2.p4.1.m1.1.1.3.2.2.cmml">2</mn><mo id="S5.SS2.p4.1.m1.1.1.3.2.1" xref="S5.SS2.p4.1.m1.1.1.3.2.1.cmml">%</mo></mrow><mo id="S5.SS2.p4.1.m1.1.1.3.1" xref="S5.SS2.p4.1.m1.1.1.3.1.cmml">−</mo><mrow id="S5.SS2.p4.1.m1.1.1.3.3" xref="S5.SS2.p4.1.m1.1.1.3.3.cmml"><mn id="S5.SS2.p4.1.m1.1.1.3.3.2" xref="S5.SS2.p4.1.m1.1.1.3.3.2.cmml">3</mn><mo id="S5.SS2.p4.1.m1.1.1.3.3.1" xref="S5.SS2.p4.1.m1.1.1.3.3.1.cmml">%</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p4.1.m1.1b"><apply id="S5.SS2.p4.1.m1.1.1.cmml" xref="S5.SS2.p4.1.m1.1.1"><approx id="S5.SS2.p4.1.m1.1.1.1.cmml" xref="S5.SS2.p4.1.m1.1.1.1"></approx><csymbol cd="latexml" id="S5.SS2.p4.1.m1.1.1.2.cmml" xref="S5.SS2.p4.1.m1.1.1.2">absent</csymbol><apply id="S5.SS2.p4.1.m1.1.1.3.cmml" xref="S5.SS2.p4.1.m1.1.1.3"><minus id="S5.SS2.p4.1.m1.1.1.3.1.cmml" xref="S5.SS2.p4.1.m1.1.1.3.1"></minus><apply id="S5.SS2.p4.1.m1.1.1.3.2.cmml" xref="S5.SS2.p4.1.m1.1.1.3.2"><csymbol cd="latexml" id="S5.SS2.p4.1.m1.1.1.3.2.1.cmml" xref="S5.SS2.p4.1.m1.1.1.3.2.1">percent</csymbol><cn id="S5.SS2.p4.1.m1.1.1.3.2.2.cmml" type="integer" xref="S5.SS2.p4.1.m1.1.1.3.2.2">2</cn></apply><apply id="S5.SS2.p4.1.m1.1.1.3.3.cmml" xref="S5.SS2.p4.1.m1.1.1.3.3"><csymbol cd="latexml" id="S5.SS2.p4.1.m1.1.1.3.3.1.cmml" xref="S5.SS2.p4.1.m1.1.1.3.3.1">percent</csymbol><cn id="S5.SS2.p4.1.m1.1.1.3.3.2.cmml" type="integer" xref="S5.SS2.p4.1.m1.1.1.3.3.2">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p4.1.m1.1c">\approx 2\%-3\%</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p4.1.m1.1d">≈ 2 % - 3 %</annotation></semantics></math> on the <span class="ltx_text ltx_font_italic" id="S5.SS2.p4.2.3">Rephrase</span> test set to <math alttext="\approx 3\%-5\%" class="ltx_Math" display="inline" id="S5.SS2.p4.2.m2.1"><semantics id="S5.SS2.p4.2.m2.1a"><mrow id="S5.SS2.p4.2.m2.1.1" xref="S5.SS2.p4.2.m2.1.1.cmml"><mi id="S5.SS2.p4.2.m2.1.1.2" xref="S5.SS2.p4.2.m2.1.1.2.cmml"></mi><mo id="S5.SS2.p4.2.m2.1.1.1" xref="S5.SS2.p4.2.m2.1.1.1.cmml">≈</mo><mrow id="S5.SS2.p4.2.m2.1.1.3" xref="S5.SS2.p4.2.m2.1.1.3.cmml"><mrow id="S5.SS2.p4.2.m2.1.1.3.2" xref="S5.SS2.p4.2.m2.1.1.3.2.cmml"><mn id="S5.SS2.p4.2.m2.1.1.3.2.2" xref="S5.SS2.p4.2.m2.1.1.3.2.2.cmml">3</mn><mo id="S5.SS2.p4.2.m2.1.1.3.2.1" xref="S5.SS2.p4.2.m2.1.1.3.2.1.cmml">%</mo></mrow><mo id="S5.SS2.p4.2.m2.1.1.3.1" xref="S5.SS2.p4.2.m2.1.1.3.1.cmml">−</mo><mrow id="S5.SS2.p4.2.m2.1.1.3.3" xref="S5.SS2.p4.2.m2.1.1.3.3.cmml"><mn id="S5.SS2.p4.2.m2.1.1.3.3.2" xref="S5.SS2.p4.2.m2.1.1.3.3.2.cmml">5</mn><mo id="S5.SS2.p4.2.m2.1.1.3.3.1" xref="S5.SS2.p4.2.m2.1.1.3.3.1.cmml">%</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p4.2.m2.1b"><apply id="S5.SS2.p4.2.m2.1.1.cmml" xref="S5.SS2.p4.2.m2.1.1"><approx id="S5.SS2.p4.2.m2.1.1.1.cmml" xref="S5.SS2.p4.2.m2.1.1.1"></approx><csymbol cd="latexml" id="S5.SS2.p4.2.m2.1.1.2.cmml" xref="S5.SS2.p4.2.m2.1.1.2">absent</csymbol><apply id="S5.SS2.p4.2.m2.1.1.3.cmml" xref="S5.SS2.p4.2.m2.1.1.3"><minus id="S5.SS2.p4.2.m2.1.1.3.1.cmml" xref="S5.SS2.p4.2.m2.1.1.3.1"></minus><apply id="S5.SS2.p4.2.m2.1.1.3.2.cmml" xref="S5.SS2.p4.2.m2.1.1.3.2"><csymbol cd="latexml" id="S5.SS2.p4.2.m2.1.1.3.2.1.cmml" xref="S5.SS2.p4.2.m2.1.1.3.2.1">percent</csymbol><cn id="S5.SS2.p4.2.m2.1.1.3.2.2.cmml" type="integer" xref="S5.SS2.p4.2.m2.1.1.3.2.2">3</cn></apply><apply id="S5.SS2.p4.2.m2.1.1.3.3.cmml" xref="S5.SS2.p4.2.m2.1.1.3.3"><csymbol cd="latexml" id="S5.SS2.p4.2.m2.1.1.3.3.1.cmml" xref="S5.SS2.p4.2.m2.1.1.3.3.1">percent</csymbol><cn id="S5.SS2.p4.2.m2.1.1.3.3.2.cmml" type="integer" xref="S5.SS2.p4.2.m2.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p4.2.m2.1c">\approx 3\%-5\%</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p4.2.m2.1d">≈ 3 % - 5 %</annotation></semantics></math> on the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p4.2.4">Out-of-Distribution</span> test set for QB-RAG. Importantly, we achieve the lowest unfaithfulness rate (3%) on the <span class="ltx_text ltx_font_typewriter" id="S5.SS2.p4.2.5">Rephrase</span> test set with QB-RAG-8, further underscoring the value of generating a comprehensive question set for optimal coverage.</p>
</div>
<div class="ltx_para" id="S5.SS2.p5">
<p class="ltx_p" id="S5.SS2.p5.1">While QB-RAG significantly improves answer faithfulness through better retrieval, it’s worth noting that the groundedness aspect of faithfulness rate is ultimately determined by the capabilities of the answer generation module itself. Further enhancements to answer faithfulness could involve techniques like preference modeling and RLHF where the LLM is specifically for this objective <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib3" title="">2022</a>)</cite>.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>Effect of Coverage of Generated Questions</h3>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">To examine the relationship between the breadth of the generated question set and QB-RAG’s effectiveness, we compare the performance of QB-RAG-2 and QB-RAG-8. This analysis reveals a strong dependence on question coverage.</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">On the <span class="ltx_text ltx_font_typewriter" id="S5.SS3.p2.1.1">Rephrase</span> test set, QB-RAG-2, despite its reduced question set, still surpasses other retrieval methods (table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T2" title="Table 2 ‣ 5.1 Effect of QB-RAG on Retrieval Efficacy ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">2</span></a>). However, the magnitude of improvement is noticeably smaller compared to QB-RAG-8. For instance, QB-RAG-2 shows a 10-15% improvement in exact recovery rate over baselines, whereas QB-RAG-8 nearly doubles the exact recovery rate. This pattern also holds for relevancy rate and average re-ranker scores, indicating that a larger, more comprehensive question set translates to more effective retrieval.</p>
</div>
<div class="ltx_para" id="S5.SS3.p3">
<p class="ltx_p" id="S5.SS3.p3.1">The <span class="ltx_text ltx_font_typewriter" id="S5.SS3.p3.1.1">Out-of-Distribution</span> test set (table <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T3" title="Table 3 ‣ 5.1 Effect of QB-RAG on Retrieval Efficacy ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">3</span></a>) reveals a more pronounced impact of question base coverage. Here, QB-RAG-2’s performance drops below that of some benchmark methods, with the exact recovery rate decreasing by 7-12%. Interestingly, QB-RAG-2 still achieves comparable performance on relevancy-based metrics, suggesting that even a limited question base can partially capture relevant content, but may not pinpoint the exact source document as effectively.</p>
</div>
<div class="ltx_para" id="S5.SS3.p4">
<p class="ltx_p" id="S5.SS3.p4.1">This sensitivity analysis clearly shows that the performance of QB-RAG methods are very much tied to our ability to generate a comprehensive set of questions from RAG knowledge base. As we increase the number of generated questions in our database, we expect to see better retrieval, higher exact matches and higher relevance. Beyond simply increasing the number of questions, improving their diversity may be another way for further improving QB-RAG’s performance. By generating a more diverse set of questions for each content piece, we can capture a broader range of semantic nuances and user intents. This is particularly relevant given that modern retrieval algorithms efficiently handle large knowledge bases, making quantity less of a limiting factor in doing efficient retrieval.</p>
</div>
<div class="ltx_para" id="S5.SS3.p5">
<p class="ltx_p" id="S5.SS3.p5.1">This sensitivity to question coverage is further evident in the quality of the generated answers (Tables <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T4" title="Table 4 ‣ 5.2 Effect of QB-RAG on Generated Answer Quality ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">4</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#S5.T5" title="Table 5 ‣ 5.2 Effect of QB-RAG on Generated Answer Quality ‣ 5 Experimental Results ‣ The Geometry of Queries: Query-Based Innovations in Retrieval-Augmented Generation"><span class="ltx_text ltx_ref_tag">5</span></a>). QB-RAG-8 consistently leads to more faithful, relevant, and accurate answers compared to QB-RAG-2, directly reflecting the differences observed in their retrieval performance. These findings highlight that QB-RAG’s success in downstream tasks is fundamentally linked to its ability to construct and leverage a comprehensive and diverse question set that effectively captures the content and semantic nuances of incoming queries within the RAG knowledge base.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.4 </span>Case Study</h3>
<div class="ltx_para" id="S5.SS4.p1">
<p class="ltx_p" id="S5.SS4.p1.1">To more concretely demonstrate the advantages of QB-RAG in our application, we present an example query from the out-of-distribution test case. The results of Naive RAG, QA-RAG and HyDE for the given test query are as follows.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p2">
<p class="ltx_p" id="S5.SS4.p2.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p2.1.1">Test query:</span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p3">
<p class="ltx_p" id="S5.SS4.p3.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S5.SS4.p3.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p3.1.1.1">What is the difference between soluble and insoluble fiber and how do they affect the body?</span>
</span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p4">
<p class="ltx_p" id="S5.SS4.p4.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p4.1.1">Retrieved content from all non QB-RAG methods: </span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p5">
<p class="ltx_p" id="S5.SS4.p5.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S5.SS4.p5.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p5.1.1.1">Fiber is the “roughage” in plants that gives them their shape. Your body can’t digest it (it just passes through), so why do we need to eat it? You’ve probably heard that fiber helps keep you regular. Fiber can also help lower your cholesterol, manage your blood glucose, and keep you feeling full longer. And it can help you lose weight. How much fiber is enough? For women, experts recommend 25 grams of fiber each day. Men need about 35 grams. Ready to add more fiber to your diet? Try a couple of these tips this week: Choose 100% whole-grain bread or tortillas instead of white bread or white-flour tortillas. Eat brown rice instead of white rice. Fill half your plate with low-carb vegetables. Grab an apple instead of applesauce. Swap in black bean or navy bean soup instead of chicken noodle soup. Choose oatmeal or oat bran instead of corn flakes or puffed rice cereal. Munch on popcorn or kale chips instead of pretzels. Consider trying a fiber-enriched food. A fiber-enriched breakfast bar has around one-third of your daily fiber! A quick note: Fiber is wonderful, but add it to your diet slowly. Your body may need a little time to adjust. As you add fiber, drink more fluids to keep it moving through. If you have any problems with gas or bloating, there are over-the-counter
that can help. Which sources of fiber look good to you?</span>
</span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p6">
<p class="ltx_p" id="S5.SS4.p6.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p6.1.1">Answer generated using retrieved content from all non QB-RAG methods: </span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p7">
<p class="ltx_p" id="S5.SS4.p7.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S5.SS4.p7.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p7.1.1.1">I cannot determine the answer to that. The provided context does not mention the difference between soluble and insoluble fiber or how they affect the body.</span>
</span></p>
</div>
<div class="ltx_para" id="S5.SS4.p8">
<p class="ltx_p" id="S5.SS4.p8.1">Given the query about soluble and insoluble fiber, Naive RAG, QA-RAG and HyDE all retrieved a content about fiber as the top content. While on topic, the content does not contain information to differentiate the effect of soluble and insoluble fiber on the human body, leading to the answer generator declining to answer. The results of QB-RAG for the same test query are as follows.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p9">
<p class="ltx_p" id="S5.SS4.p9.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p9.1.1">Retrieved query by QB-RAG: </span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p10">
<p class="ltx_p" id="S5.SS4.p10.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S5.SS4.p10.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p10.1.1.1">How does soluble fiber help the body?</span>
</span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p11">
<p class="ltx_p" id="S5.SS4.p11.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p11.1.1">Mapped content of retrieved query by QB-RAG: </span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p12">
<p class="ltx_p" id="S5.SS4.p12.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="S5.SS4.p12.1.1" style="border-color: #000000;">
<span class="ltx_inline-block ltx_parbox ltx_align_middle" id="S5.SS4.p12.1.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p12.1.1.1.1">Steel-cut oatmeal (also called Irish oatmeal) is an easy, healthy, high-fiber food. Steel-cut oats have more fiber than rolled or instant oats. Steel-cut oats have both soluble and insoluble fiber. Soluble fiber helps lower cholesterol and keeps blood glucose from rising quickly. Insoluble fiber helps move food through your body, which can keep your bowels regular. The fiber in oatmeal also makes it a very filling food. You can eat a small portion size and feel full longer, which is great for weight loss. Want to boost your oatmeal flavor? Try these ideas: Cinnamon Slivered almonds or other nuts (2 Tbsp) Pumpkin pie spices without sugar Almond butter (1 Tbsp) or other nut butter Powdered peanut butter Powdered protein powder (mix in after cooking for a protein and flavor boost) Stevia (sugar-free sweetener) A dash of vanilla extract Tips: Oatmeal has carbs so keep a small portion size in mind. Milk adds carbs. Consider using a cup of regular milk, unsweetened almond milk, or unsweetened coconut milk as low-carb options. Try eating oatmeal with a protein food (like eggs, nuts, or peanut butter) for a balanced meal.</span>
</span></span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p13">
<p class="ltx_p" id="S5.SS4.p13.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p13.1.1">Answer generated using mapped content of retrieved query by QB-RAG: </span></p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS4.p14">
<p class="ltx_p" id="S5.SS4.p14.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S5.SS4.p14.1.1" style="width:433.6pt;">
<span class="ltx_p" id="S5.SS4.p14.1.1.1">Soluble fiber helps lower cholesterol and keeps blood glucose from rising quickly, while insoluble fiber helps move food through your body, which can keep your bowels regular.</span>
</span></p>
</div>
<div class="ltx_para" id="S5.SS4.p15">
<p class="ltx_p" id="S5.SS4.p15.1">Given the same test query, QB-RAG first retrieved a pre-generated query about soluble fiber stored in the knowledge base. It then maps the retrieved query to the content that was used to generate the query. Given the content, the answer generator was able to provide a response to the test query. Note that while the retrieved content is largely about steel-cut oatmeal, it contains information about soluble and insoluble fiber and their effect on the body. On the surface, it may seem that the content retrieved by the other methods is more on topic, QB-RAG was able to pinpoint the exact content that contains the needed specific information with the help of the pre-generated query.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Discussion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">This paper introduces QB-RAG, a novel approach for enhancing the retrieval phase of RAG systems. QB-RAG addresses the inherent semantic misalignment between user queries and knowledge bases by pre-generating a comprehensive set of potential questions directly from the content. We then leverage efficient vector search to map incoming online queries to these pre-computed questions, facilitating a more accurate and aligned retrieval process.
While QB-RAG requires a significant offline computational investment for question generation, this trade-off is strategically advantageous. Unlike conventional methods that rely on online LLM calls for query rewriting or enhancement, QB-RAG shifts this computational burden offline. This distinction is crucial for minimizing latency in real-time applications, as online LLM invocations can significantly impact the user experience. Furthermore, QB-RAG benefits from the efficiency of highly optimized retrieval algorithms, even when handling large question sets, ensuring rapid content retrieval for online queries.
We have provided a theoretical motivations for QB-RAG and we have also suggested potential avenues for further improving QB-RAG, such as expanding the question set for greater coverage or leveraging matrix completion techniques to infer a complete answerability matrix.</p>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1">To assess QB-RAG’s effectiveness, we designed two distinct test sets: the <span class="ltx_text ltx_font_typewriter" id="S6.p2.1.1">Rephrase</span> set, where test questions are semantically similar to those in our pre-generated question base, and the <span class="ltx_text ltx_font_typewriter" id="S6.p2.1.2">Out-of-Distribution</span> set, where questions are intentionally crafted to be dissimilar. These test sets represent cases designed to evaluate QB-RAG’s robustness under varying conditions, including a potential distribution shift.
Our empirical results demonstrate that QB-RAG consistently outperforms benchmark methods across both test sets. While QB-RAG significantly improves exact recovery and relevance of retrieved documents, its impact extends beyond these initial retrieval metrics. Downstream answer generation using QB-RAG-retrieved content scores higher on key quality metrics, including faithfulness, relevancy, and adherence to pre-defined guidelines. Crucially, answers generated using QB-RAG are more frequently grounded on our trusted source of content, which is key to deliver reliable, up to date information to patient queries.</p>
</div>
<div class="ltx_para" id="S6.p3">
<p class="ltx_p" id="S6.p3.1">Our sensitivity analysis shows that effectiveness of our approach is highly tied to coverage of extracted questions. Beyond increasing the raw number of questions, we also suggest favoring a diverse set of questions during the generation phase. This can be done potentially with prompt engineering, supervised fine-tuning or RLHF frameworks. Metrics like BERTScore <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib32" title="">2019</a>)</cite> and Word Mover’s Distance <cite class="ltx_cite ltx_citemacro_citep">(Kusner et al., <a class="ltx_ref" href="https://arxiv.org/html/2407.18044v1#bib.bib9" title="">2015</a>)</cite> can be used to evaluate the diversity of generated questions from the RAG knowledge base. Finally, an LLM could also be potentially used as an auto-evaluator for measuring diversity of generated questions. We note that retrieval frameworks are highly optimized even for large question bases, thus, we don’t expect quantity of generated questions as a bottleneck for many real-world applications.</p>
</div>
<div class="ltx_para" id="S6.p4">
<p class="ltx_p" id="S6.p4.1">Despite its novelty and effectiveness, our work has several limitations that require further study. First, our evaluation focused on a curated healthcare content base consisting of well-crafted, concise pieces. Assessing QB-RAG’s performance on larger, more diverse datasets, including those from other domains and containing less structured or longer-form content, remains an important area for future research.</p>
</div>
<div class="ltx_para" id="S6.p5">
<p class="ltx_p" id="S6.p5.1">Another limitation stems from our reliance on LLM-based evaluation metrics in the current study. While LLMs have shown promise in assessing answer quality according to predefined guidelines, the real-world deployment of QB-RAG in healthcare settings necessitates thorough expert review. Direct patient interactions demand the highest level of scrutiny to ensure the accuracy, safety, and reliability of generated information. Our automated evaluation serves as a valuable first step, but expert validation remains paramount.</p>
</div>
<div class="ltx_para" id="S6.p6">
<p class="ltx_p" id="S6.p6.1">Finally, it’s crucial to acknowledge a broader challenge inherent to all RAG systems, particularly in fast-changing domains like healthcare: the quality of any RAG system’s output is fundamentally dependent on the quality and recency of its underlying knowledge base. In healthcare, where medical consensus and best practices are constantly evolving, content needs to be regularly reviewed and updated to reflect the latest advancements. This underscores the importance of developing robust mechanisms for ongoing knowledge base maintenance and ensuring alignment with current clinical guidelines, regardless of the specific retrieval methods employed.</p>
</div>
<div class="ltx_para" id="S6.p7">
<p class="ltx_p" id="S6.p7.1">Despite these limitations, our work demonstrates the potential of QB-RAG for enhancing retrieval accuracy and answer groundedness in RAG systems, paving the way for more reliable and trustworthy LLM applications in healthcare. Beyond direct patient interaction, QB-RAG could also be valuable for augmenting coaching and provider resources within digital health platforms. For instance, QB-RAG could be used to generate draft answers that healthcare professionals can then review and refine, ensuring both efficiency and accuracy. Ultimately, real-world deployment of QB-RAG should be carefully considered, taking into account specific use cases, potential risks, and the need for appropriate expert oversight.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Alowais et al. (2023)</span>
<span class="ltx_bibblock">
Shuroug A Alowais, Sahar S Alghamdi, Nada Alsuhebany, Tariq Alqahtani, Abdulrahman I Alshaya, Sumaya N Almohareb, Atheer Aldairem, Mohammed Alrashed, Khalid Bin Saleh, Hisham A Badreldin, et al.

</span>
<span class="ltx_bibblock">Revolutionizing healthcare: the role of artificial intelligence in clinical practice.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">BMC medical education</em>, 23(1):689, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Anil et al. (2023)</span>
<span class="ltx_bibblock">
Rohan Anil, Andrew M Dai, Orhan Firat, Melvin Johnson, Dmitry Lepikhin, Alexandre Passos, Siamak Shakeri, Emanuel Taropa, Paige Bailey, Zhifeng Chen, et al.

</span>
<span class="ltx_bibblock">Palm 2 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2305.10403</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022)</span>
<span class="ltx_bibblock">
Yuntao Bai, Andy Jones, Kamal Ndousse, Amanda Askell, Anna Chen, Nova DasSarma, Dawn Drain, Stanislav Fort, Deep Ganguli, Tom Henighan, et al.

</span>
<span class="ltx_bibblock">Training a helpful and harmless assistant with reinforcement learning from human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2204.05862</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Clusmann et al. (2023)</span>
<span class="ltx_bibblock">
Jan Clusmann, Fiona R Kolbinger, Hannah Sophie Muti, Zunamys I Carrero, Jan-Niklas Eckardt, Narmin Ghaffari Laleh, Chiara Maria Lavinia Löffler, Sophie-Caroline Schwarzkopf, Michaela Unger, Gregory P Veldhuizen, et al.

</span>
<span class="ltx_bibblock">The future landscape of large language models in medicine.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Communications medicine</em>, 3(1):141, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2022)</span>
<span class="ltx_bibblock">
Luyu Gao, Xueguang Ma, Jimmy Lin, and Jamie Callan.

</span>
<span class="ltx_bibblock">Precise zero-shot dense retrieval without relevance labels.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">arXiv preprint arXiv:2212.10496</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gupta et al. (2024)</span>
<span class="ltx_bibblock">
Aman Gupta, Anup Shirgaonkar, Angels de Luis Balaguer, Bruno Silva, Daniel Holstein, Dawei Li, Jennifer Marsman, Leonardo O Nunes, Mahsa Rouzbahman, Morris Sharp, et al.

</span>
<span class="ltx_bibblock">Rag vs fine-tuning: Pipelines, tradeoffs, and a case study on agriculture.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2401.08406</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karpukhin et al. (2020)</span>
<span class="ltx_bibblock">
Vladimir Karpukhin, Barlas Oğuz, Sewon Min, Patrick Lewis, Ledell Wu, Sergey Edunov, Danqi Chen, and Wen-tau Yih.

</span>
<span class="ltx_bibblock">Dense passage retrieval for open-domain question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">arXiv preprint arXiv:2004.04906</em>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kim and Min (2024)</span>
<span class="ltx_bibblock">
Jaewoong Kim and Moohong Min.

</span>
<span class="ltx_bibblock">From rag to qa-rag: Integrating generative ai for pharmaceutical regulatory compliance process.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2402.01717</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kusner et al. (2015)</span>
<span class="ltx_bibblock">
Matt Kusner, Yu Sun, Nicholas Kolkin, and Kilian Weinberger.

</span>
<span class="ltx_bibblock">From word embeddings to document distances.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">International conference on machine learning</em>, pages 957–966. PMLR, 2015.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lee et al. (2023)</span>
<span class="ltx_bibblock">
Harrison Lee, Samrat Phatale, Hassan Mansoor, Kellie Lu, Thomas Mesnard, Colton Bishop, Victor Carbune, and Abhinav Rastogi.

</span>
<span class="ltx_bibblock">Rlaif: Scaling reinforcement learning from human feedback with ai feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">arXiv preprint arXiv:2309.00267</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel, et al.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Advances in Neural Information Processing Systems</em>, 33:9459–9474, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al. (2023)</span>
<span class="ltx_bibblock">
Xi Victoria Lin, Xilun Chen, Mingda Chen, Weijia Shi, Maria Lomeli, Rich James, Pedro Rodriguez, Jacob Kahn, Gergely Szilvasy, Mike Lewis, et al.

</span>
<span class="ltx_bibblock">Ra-dit: Retrieval-augmented dual instruction tuning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2310.01352</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ma et al. (2023)</span>
<span class="ltx_bibblock">
Xinbei Ma, Yeyun Gong, Pengcheng He, Hai Zhao, and Nan Duan.

</span>
<span class="ltx_bibblock">Query rewriting for retrieval-augmented large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">arXiv preprint arXiv:2305.14283</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Majithia et al. (2020)</span>
<span class="ltx_bibblock">
A. R. Majithia, C. M. Kusiak, A. Armento Lee, F. R. Colangelo, R. J. Romanelli, S. Robertson, D. P. Miller, D. M. Erani, J. E. Layne, R. F. Dixon, and H. Zisser.

</span>
<span class="ltx_bibblock">Glycemic outcomes in adults with type 2 diabetes participating in a continuous glucose monitor-driven virtual diabetes clinic: Prospective trial.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">J Med Internet Res</em>, 22(8):e21778, 2020.

</span>
<span class="ltx_bibblock">doi: <span class="ltx_ref ltx_nolink ltx_Url ltx_ref_self">10.2196/21778</span>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nogueira et al. (2019)</span>
<span class="ltx_bibblock">
Rodrigo Nogueira, Wei Yang, Kyunghyun Cho, and Jimmy Lin.

</span>
<span class="ltx_bibblock">Multi-stage document ranking with bert.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:1910.14424</em>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nori et al. (2023)</span>
<span class="ltx_bibblock">
Harsha Nori, Nicholas King, Scott Mayer McKinney, Dean Carignan, and Eric Horvitz.

</span>
<span class="ltx_bibblock">Capabilities of gpt-4 on medical challenge problems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2303.13375</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2024)</span>
<span class="ltx_bibblock">
OpenAI.

</span>
<span class="ltx_bibblock">Gpt-4 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:2303.08774</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, Carroll Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, et al.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Advances in Neural Information Processing Systems</em>, 35:27730–27744, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ovadia et al. (2024)</span>
<span class="ltx_bibblock">
Oded Ovadia, Menachem Brief, Moshik Mishaeli, and Oren Elisha.

</span>
<span class="ltx_bibblock">Fine-tuning or retrieval? comparing knowledge injection in llms, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Peng et al. (2023)</span>
<span class="ltx_bibblock">
Cheng Peng, Xi Yang, Aokun Chen, Kaleb E Smith, Nima PourNejatian, Anthony B Costa, Cheryl Martin, Mona G Flores, Ying Zhang, Tanja Magoc, et al.

</span>
<span class="ltx_bibblock">A study of generative large language model for medical research and healthcare.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2305.13523</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shao et al. (2023)</span>
<span class="ltx_bibblock">
Zhihong Shao, Yeyun Gong, Yelong Shen, Minlie Huang, Nan Duan, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Enhancing retrieval-augmented large language models with iterative retrieval-generation synergy.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2305.15294</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Rich James, Mike Lewis, Luke Zettlemoyer, and Wen-tau Yih.

</span>
<span class="ltx_bibblock">Replug: Retrieval-augmented black-box language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2301.12652</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Singhal et al. (2022)</span>
<span class="ltx_bibblock">
Karan Singhal, Shekoofeh Azizi, Tao Tu, S. Sara Mahdavi, Jason Wei, Hyung Won Chung, Nathan Scales, Ajay Tanwani, Heather Cole-Lewis, Stephen Pfohl, Perry Payne, Martin Seneviratne, Paul Gamble, Chris Kelly, Nathaneal Scharli, Aakanksha Chowdhery, Philip Mansfield, Blaise Aguera y Arcas, Dale Webster, Greg S. Corrado, Yossi Matias, Katherine Chou, Juraj Gottweis, Nenad Tomasev, Yun Liu, Alvin Rajkomar, Joelle Barral, Christopher Semturs, Alan Karthikesalingam, and Vivek Natarajan.

</span>
<span class="ltx_bibblock">Large language models encode clinical knowledge, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Singhal et al. (2023)</span>
<span class="ltx_bibblock">
Karan Singhal, Tao Tu, Juraj Gottweis, Rory Sayres, Ellery Wulczyn, Le Hou, Kevin Clark, Stephen Pfohl, Heather Cole-Lewis, Darlene Neal, et al.

</span>
<span class="ltx_bibblock">Towards expert-level medical question answering with large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv preprint arXiv:2305.09617</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Team et al. (2023)</span>
<span class="ltx_bibblock">
Gemini Team, Rohan Anil, Sebastian Borgeaud, Yonghui Wu, Jean-Baptiste Alayrac, Jiahui Yu, Radu Soricut, Johan Schalkwyk, Andrew M Dai, Anja Hauth, et al.

</span>
<span class="ltx_bibblock">Gemini: a family of highly capable multimodal models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2312.11805</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Thirunavukarasu et al. (2023)</span>
<span class="ltx_bibblock">
Arun James Thirunavukarasu, Darren Shu Jeng Ting, Kabilan Elangovan, Laura Gutierrez, Ting Fang Tan, and Daniel Shu Wei Ting.

</span>
<span class="ltx_bibblock">Large language models in medicine.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">Nature medicine</em>, 29(8):1930–1940, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2307.09288</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tu et al. (2024)</span>
<span class="ltx_bibblock">
Tao Tu, Anil Palepu, Mike Schaekermann, Khaled Saab, Jan Freyberg, Ryutaro Tanno, Amy Wang, Brenna Li, Mohamed Amin, Nenad Tomasev, Shekoofeh Azizi, Karan Singhal, Yong Cheng, Le Hou, Albert Webson, Kavita Kulkarni, S Sara Mahdavi, Christopher Semturs, Juraj Gottweis, Joelle Barral, Katherine Chou, Greg S Corrado, Yossi Matias, Alan Karthikesalingam, and Vivek Natarajan.

</span>
<span class="ltx_bibblock">Towards conversational diagnostic ai, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Liang Wang, Nan Yang, and Furu Wei.

</span>
<span class="ltx_bibblock">Query2doc: Query expansion with large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">arXiv preprint arXiv:2303.07678</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Maarten Bosma, Vincent Y. Zhao, Kelvin Guu, Adams Wei Yu, Brian Lester, Nan Du, Andrew M. Dai, and Quoc V. Le.

</span>
<span class="ltx_bibblock">Finetuned language models are zero-shot learners, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xiao et al. (2023)</span>
<span class="ltx_bibblock">
Shitao Xiao, Zheng Liu, Peitian Zhang, and Niklas Muennighof.

</span>
<span class="ltx_bibblock">C-pack: Packaged resources to advance general chinese embedding.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">arXiv preprint arXiv:2309.07597</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2019)</span>
<span class="ltx_bibblock">
Tianyi Zhang, Varsha Kishore, Felix Wu, Kilian Q Weinberger, and Yoav Artzi.

</span>
<span class="ltx_bibblock">Bertscore: Evaluating text generation with bert.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:1904.09675</em>, 2019.

</span>
</li>
</ul>
</section><div about="" class="ltx_rdf" content="Overleaf Example" property="dcterms:title"></div>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Jul 25 13:47:56 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
