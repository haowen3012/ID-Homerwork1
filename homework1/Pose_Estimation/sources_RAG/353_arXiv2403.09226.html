<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records</title>
<!--Generated on Thu May 16 12:59:57 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2403.09226v2/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S1" title="In Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2" title="In Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>The Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S3" title="In Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Methods</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4" title="In Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Evaluation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4.SS1" title="In 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Experimental setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4.SS2" title="In 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Experimental results</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S5" title="In 4.2 Experimental results ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S6" title="In 5 Related Work ‣ 4.2 Experimental results ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S7" title="In 6 Conclusion ‣ 5 Related Work ‣ 4.2 Experimental results ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Acknowledgments</span></a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Angelo Ziletti* 
<br class="ltx_break"/>Bayer AG
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id1.1.id1">angelo.ziletti@bayer.com</span>
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="id2.2.id2">\And</span>Leonardo D’Ambrosi 
<br class="ltx_break"/>Bayer AG
<br class="ltx_break"/>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id3.id1">Electronic health records (EHR) and claims data are rich sources of real-world data that reflect patient health status and healthcare utilization.
Querying these databases to answer epidemiological questions is challenging due to the intricacy of medical terminology and the need for complex SQL queries. Here, we introduce an end-to-end methodology that combines text-to-SQL generation with retrieval augmented generation (RAG) to answer epidemiological questions using EHR and claims data. We show that our approach, which integrates a medical coding step into the text-to-SQL process, significantly improves the performance over simple prompting. Our findings indicate that although current language models are not yet sufficiently accurate for unsupervised use, RAG offers a promising direction for improving their capabilities, as shown in a realistic industry setting.</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.1">
<p class="ltx_p" id="p1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1.1">Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records</span></p>
<br class="ltx_break ltx_centering"/>
<p class="ltx_p ltx_align_center" id="p1.1.2" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.1.2.1" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.1.2.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.1.2.1.1.1.1">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.1.1.1.1">Angelo Ziletti*</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.2.2">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.2.2.1">Bayer AG</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.3.3">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.3.3.1"><span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.3.3.1.1">angelo.ziletti@bayer.com</span></span></span>
</span>
</span></span>                      <span class="ltx_text ltx_inline-block" id="p1.1.2.2" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.1.2.2.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.1.2.2.1.1.1">
<span class="ltx_td ltx_align_center" id="p1.1.2.2.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.2.1.1.1.1.1">Leonardo D’Ambrosi</span></span></span>
<span class="ltx_tr" id="p1.1.2.2.1.2.2">
<span class="ltx_td ltx_align_center" id="p1.1.2.2.1.2.2.1">Bayer AG</span></span>
</span>
</span></span></p>
<br class="ltx_break ltx_centering"/>
</div>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Real-world data (RWD) are data routinely gathered from various sources that capture aspects of patient health status and the provision of health care. This encompasses electronic health records (EHR), medical claims data, disease registries, and emerging sources like digital health technologies.
By investigating epidemiological quantities like patients’ counts and demographics, disease incidence and prevalence, natural history of diseases, and treatment patterns in real-world clinical practice, researchers and healthcare organizations can identify for example target patient populations with unmet needs, discover unknown benefits of available drugs, evaluate potential for market entry, and estimate the potential enrolment of clinical trials.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p2">
<p class="ltx_p" id="S1.p2.1"><span class="ltx_text ltx_font_bold" id="S1.p2.1.1">Problem Statement.</span>
Addressing epidemiological questions using RWD databases is complex, as it requires not only an understanding of the data’s characteristics, including biases, confounders, and limitations, but also involves interpreting medical terminology across various ontologies, formulating precise SQL queries, executing these queries, and accurately synthesizing the results.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p3">
<p class="ltx_p" id="S1.p3.1"><span class="ltx_text ltx_font_bold" id="S1.p3.1.1">Contributions.</span>
With this paper, we present a straightforward and effective end-to-end approach to answer epidemiological questions based on data queried from EHR/Claims databases.</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We release a dataset of manually annotated question-SQL pairs designed for epidemiological research, and adhering to the widely-adopted Observational Medical Outcomes Partnership Common Data Model (OMOP-CDM) <cite class="ltx_cite ltx_citemacro_cite">OMOP-CDM (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib16" title="">2023</a>)</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We integrate a medical coding step into the text-to-SQL process, enhancing data retrieval and clinical context comprehension.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">We show that retrieval augmented generation (RAG) significantly improves performance compared with static instruction prompting, as confirmed by extensive benchmarking with top-tier large language models (LLMs).</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i4.p1">
<p class="ltx_p" id="S1.I1.i4.p1.1">We share our dataset, code, and prompts<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/Bayer-Group/text-to-sql-epi-ehr-naacl2024" title="">https://github.com/Bayer-Group/text-to-sql-epi-ehr-naacl2024</a></span></span></span> to foster reproducibility and catalyse a community-driven effort towards advancing this research area.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">The presented approach is currently deployed at Bayer in experimental mode. Epidemiologists and data analysts are using the system to explore and evaluate its capabilities, ensuring that its use is carefully monitored and supervised.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>The Dataset</h2>
<figure class="ltx_table" id="S2.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S2.T1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S2.T1.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="S2.T1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.1.1.1.1">
<span class="ltx_p" id="S2.T1.1.1.1.1.1.1" style="width:108.4pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.1.1.1.1.1.1">Quantity</span></span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="S2.T1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.1.1.2.1">
<span class="ltx_p" id="S2.T1.1.1.1.2.1.1" style="width:65.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.1.1.2.1.1.1">Value</span></span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S2.T1.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T1.1.2.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.2.1.1.1">
<span class="ltx_p" id="S2.T1.1.2.1.1.1.1" style="width:108.4pt;"># of question/SQL pairs (all)</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T1.1.2.1.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.2.1.2.1">
<span class="ltx_p" id="S2.T1.1.2.1.2.1.1" style="width:65.0pt;">306</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.3.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.3.2.1.1">
<span class="ltx_p" id="S2.T1.1.3.2.1.1.1" style="width:108.4pt;"># of different tables used (all)</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.3.2.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.3.2.2.1">
<span class="ltx_p" id="S2.T1.1.3.2.2.1.1" style="width:65.0pt;">13</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.4.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.4.3.1.1">
<span class="ltx_p" id="S2.T1.1.4.3.1.1.1" style="width:108.4pt;"># of different columns used (all)</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.4.3.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.4.3.2.1">
<span class="ltx_p" id="S2.T1.1.4.3.2.1.1" style="width:65.0pt;">44</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.5.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.5.4.1.1">
<span class="ltx_p" id="S2.T1.1.5.4.1.1.1" style="width:108.4pt;"># logical conditions/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.5.4.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.5.4.2.1">
<span class="ltx_p" id="S2.T1.1.5.4.2.1.1" style="width:65.0pt;">6.4 (6.7)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.6.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.6.5.1.1">
<span class="ltx_p" id="S2.T1.1.6.5.1.1.1" style="width:108.4pt;"># nesting levels/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.6.5.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.6.5.2.1">
<span class="ltx_p" id="S2.T1.1.6.5.2.1.1" style="width:65.0pt;">1.5 (1.1)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.7.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.7.6.1.1">
<span class="ltx_p" id="S2.T1.1.7.6.1.1.1" style="width:108.4pt;"># tables/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.7.6.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.7.6.2.1">
<span class="ltx_p" id="S2.T1.1.7.6.2.1.1" style="width:65.0pt;">2.7 (0.9)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.8.7">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.8.7.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.8.7.1.1">
<span class="ltx_p" id="S2.T1.1.8.7.1.1.1" style="width:108.4pt;"># columns/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.8.7.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.8.7.2.1">
<span class="ltx_p" id="S2.T1.1.8.7.2.1.1" style="width:65.0pt;">6.3 (4.7)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.9.8">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.9.8.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.9.8.1.1">
<span class="ltx_p" id="S2.T1.1.9.8.1.1.1" style="width:108.4pt;"># medical entities/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.9.8.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.9.8.2.1">
<span class="ltx_p" id="S2.T1.1.9.8.2.1.1" style="width:65.0pt;">2.0 (4.1)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.10.9">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.10.9.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.10.9.1.1">
<span class="ltx_p" id="S2.T1.1.10.9.1.1.1" style="width:108.4pt;">Question length [char]/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.10.9.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.10.9.2.1">
<span class="ltx_p" id="S2.T1.1.10.9.2.1.1" style="width:65.0pt;">91.7 (81.2)</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.11.10">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S2.T1.1.11.10.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.11.10.1.1">
<span class="ltx_p" id="S2.T1.1.11.10.1.1.1" style="width:108.4pt;">SQL query length [char]/query</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S2.T1.1.11.10.2">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.11.10.2.1">
<span class="ltx_p" id="S2.T1.1.11.10.2.1.1" style="width:65.0pt;">796.4 (448.5)</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Summary statistics of the dataset. For sample statistics, average and standard deviation (in brackets) are reported.</figcaption>
</figure>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">Our dataset was created through a manual curation process, engaging specialists in epidemiological studies to contribute typical questions from their work.
Despite its modest size, the dataset offers a realistic selection of epidemiological questions within industry practice, and exhibits a high degree of complexity. 53 samples require more than two level of nesting, and 19 more than three levels.
Correctly answering questions often require multiple logical steps: selection of population(s) of interest, relationship between events within a specific time frame, aggregation statistics, and basic mathematical operations (e.g., ratios).
The dataset features questions in their natural, free-form language and it is augmented with two paraphrased versions per question-SQL pair, increasing volume while also offering validated labels for retrieval algorithms. Statistics on the dataset are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.T1" title="Table 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>. Due to budget limits, we will use one version per question for subsequent evaluations.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<p class="ltx_p" id="S2.p2.1"><span class="ltx_text ltx_font_bold" id="S2.p2.1.1">Applicability across RWD databases</span>.
To address the challenge of data retrieval variability across databases with differing data models, we leverage the OMOP-CDM. This model, underpinned by standardized vocabularies <cite class="ltx_cite ltx_citemacro_cite">Reich et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib25" title="">2024</a>)</cite>, harmonizes observational healthcare data and it is widely recognized as the standard for RWD analysis, with data from over 2.1 billion patient records across 34 countries <cite class="ltx_cite ltx_citemacro_cite">Voss et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib28" title="">2023</a>); Reich et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib25" title="">2024</a>)</cite>.</p>
</div>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="292" id="S2.F1.g1" src="extracted/5600600/workflow.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>From a question in natural language to an answer in natural language using electronic health record or claims databases: end-to-end workflow.</figcaption>
</figure>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methods</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">Our methodology, outlined in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>, employs LLM prompting to translate natural language questions into SQL queries. It advances EHR text-to-SQL methods beyond the constraints of exact or string-based matching to fully encompass the semantic complexities of clinical terminology <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib29" title="">2020</a>); Lee et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib10" title="">2022</a>)</cite>.
To achieve this, we introduce a step where an LLM generates SQL with placeholders for medical entities (e.g., [condition@disphagia] in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>d), which are then mapped to precise clinical ontology terms (Sec. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4.SS1" title="4.1 Experimental setup ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">4.1</span></a>, Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>d-e). This yields executable queries that accurately retrieve database information.
Building on the success of RAG in enhancing LLMs for complex NLP tasks <cite class="ltx_cite ltx_citemacro_cite">Lewis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib11" title="">2020</a>)</cite>, we use our dataset (Sec. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2" title="2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">2</span></a>) as an external knowledge base. Relevant question-SQL pairs are extracted and incorporated into the prompt, refining SQL generation. The completed SQL queries, embedded with medical codes, are run on an OMOP CDM-compliant database (Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>f) to facilitate data retrieval. If needed, an answer can be articulated from the retrieved data through further LLM prompting (Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>g).</p>
</div>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Evaluation</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental setup</h3>
<div class="ltx_para ltx_noindent" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p1.1.1">Large language models.</span>
We employ several leading LLMs as of February 2024: OpenAI’s GPT-3.5 Turbo <cite class="ltx_cite ltx_citemacro_cite">Brown et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib2" title="">2020</a>)</cite> and GPT-4 Turbo <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib18" title="">2023</a>)</cite>, Google’s GeminiPro 1.0 <cite class="ltx_cite ltx_citemacro_cite">Gemini Team (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib6" title="">2023</a>)</cite>, Anthropic’s Claude 2.1 <cite class="ltx_cite ltx_citemacro_cite">Anthropic AI (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib1" title="">2023</a>)</cite>, and Mistral AI’s Mixtral 8x7B and Mixtral Medium <cite class="ltx_cite ltx_citemacro_cite">Mistral AI (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib14" title="">2023</a>)</cite>, with Mixtral 8x7B being the only open-source model <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib8" title="">2024</a>)</cite>.
We use one simple and one advanced prompt. The simple prompt provides essential instructions for creating queries that adhere to the conventions of the pipeline (Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>). The advanced prompt adds detailed directives on concept IDs, race analysis, geographical analysis, date filters, column naming, patient count, age calculation, and additional instructions on SQL query validity review.
Following  <cite class="ltx_cite ltx_citemacro_citet">Pourreza and Rafiei (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib22" title="">2023</a>)</cite>, we allow LLMs up to three attempts to self-correct non-executable SQL queries using the compiler’s error feedback.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.1.1">Retrieval augmented generation.</span>
For similarity computation in RAG, we apply entity masking to substitute medical entities with generic labels (e.g., &lt;DRUG&gt;).
We utilize the <span class="ltx_text ltx_font_smallcaps" id="S4.SS1.p2.1.2">bge-large-en-v1.5</span> embedding model from Hugging Face <cite class="ltx_cite ltx_citemacro_cite">Wolf et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib30" title="">2020</a>)</cite>, which has been fine-tuned for retrieval augmentation of LLMs  <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib32" title="">2023</a>)</cite>.
We opt for masked question selection rather than utilizing the query because it eliminates the need for an initial LLM call to generate SQL for retrieval, while maintaining a comparable accuracy <cite class="ltx_cite ltx_citemacro_cite">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib5" title="">2023</a>)</cite>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p3.1.1">Medical coding.</span> 
LLMs extract medical entities and integrate them into SQL as placeholders (Fig. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2.F1" title="Figure 1 ‣ 2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">1</span></a>d), effectively recasting the medical coding task into medical entity normalization  <cite class="ltx_cite ltx_citemacro_cite">Portelli et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib21" title="">2022</a>); Ziletti et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib34" title="">2022</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib33" title="">2022</a>); Limsopatham and Collier (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib12" title="">2016</a>)</cite>. To perform entity normalization, we first compute the cosine similarity of each entity’s SapBERT embeddings  <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib13" title="">2021</a>)</cite> with SNOMED ontology terms, and select the top-50 matches. Then, similarly to  <cite class="ltx_cite ltx_citemacro_citet">Yang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib31" title="">2022</a>)</cite>, we prompt GPT-4 Turbo to verify whether a given code should be assigned to the input entity, refining the list.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p4.1.1">Database and evaluation.</span> 
The evaluation data reported are obtained querying the DE-SynPUF dataset <cite class="ltx_cite ltx_citemacro_cite">SynPUF (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib26" title="">2010</a>)</cite>, which is a synthetic dataset that emulates the structure of actual claims data. It includes 6.8 million beneficiary records, 112 million claims records, and 111 million prescription drug events records <cite class="ltx_cite ltx_citemacro_cite">Gonzales et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib7" title="">2023</a>)</cite>. The same analysis could be applied to any database conforming to the OMOP-CDM, thus potentially allowing access to 2.1 billion patient records <cite class="ltx_cite ltx_citemacro_cite">Reich et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib25" title="">2024</a>)</cite>.
For evaluation, we manually developed a dataset of question-SQL pairs, as detailed in Sec. <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S2" title="2 The Dataset ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">2</span></a>. These are then executed against the DE-SynPUF dataset, and the retrieved data from both reference and generated queries are compared to assess performance. This process reflects the practical use of SQL queries on healthcare databases.
To ensure a realistic evaluation setup, the actual question being evaluated is removed from the RAG procedure.
A generated query is marked as correct if it retrieves data enabling an answer that aligns with the reference query’s answer (within a 10% tolerance), and incorrect otherwise. The tolerance compensates for variations from GPT-4 Turbo-based medical coding, maintaining the focus on text-to-SQL evaluation accuracy.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Experimental results</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Results are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4.SS2" title="4.2 Experimental results ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">4.2</span></a>, and outlined below.</p>
</div>
<figure class="ltx_table" id="S4.SS2.tab1">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_2">
<table class="ltx_tabular ltx_figure_panel ltx_align_middle" id="S4.SS2.tab1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.SS2.tab1.1.1.1">
<td class="ltx_td ltx_border_tt" id="S4.SS2.tab1.1.1.1.1"></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.2.1">Mixtral</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.3.1">GeminiPro</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.4.1">Claude 2.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.5"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.5.1">Mistral-m</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.6"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.6.1">GPT-3.5 Turbo</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.SS2.tab1.1.1.1.7"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.1.1.7.1">GPT-4 Turbo</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.2.2">
<td class="ltx_td ltx_border_t" id="S4.SS2.tab1.1.2.2.1"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.2">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.3">Exec</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.4">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.5">Exec</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.6">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.7">Exec</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.8">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.9">Exec</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.10">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.11">Exec</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.12">Acc</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.SS2.tab1.1.2.2.13">Exec</td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.3.3">
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.SS2.tab1.1.3.3.1">Prompt (simple)</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.2">2.0</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.3">7.8</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.4">6.9</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.5">29.4</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.3.3.6.1">20.6</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.7">53.5</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.8">8.8</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.9">32.4</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.10">20.2</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.11"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.3.3.11.1">67.0</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.3.3.12.1">28.4</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.3.3.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.3.3.13.1">77.5</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.4.4">
<td class="ltx_td ltx_align_right" id="S4.SS2.tab1.1.4.4.1">
<span class="ltx_ERROR undefined" id="S4.SS2.tab1.1.4.4.1.1">\hdashline</span>[0.5pt/2pt]
   Prompt (advanced)</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.2">2.9</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.3">18.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.4">6.9</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.5">34.7</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.4.4.6.1">25.5</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.4.4.7.1">78.4</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.8">17.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.9">44.1</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.10">15.8</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.11">63.4</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.4.4.12.1">38.2</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.4.4.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.4.4.13.1">91.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.5.5">
<td class="ltx_td ltx_align_right ltx_border_t" id="S4.SS2.tab1.1.5.5.1">RAG-random1</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.2">19.6</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.3">46.1</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.4">11.8</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.5">35.3</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.6">33.3</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.7">76.5</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.5.5.8.1">38.2</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.9">68.3</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.10">29.0</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.11"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.5.5.11.1">84.0</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.5.5.12.1">50.0</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.SS2.tab1.1.5.5.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.5.5.13.1">97.1</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.6.6">
<td class="ltx_td ltx_align_right" id="S4.SS2.tab1.1.6.6.1">
<span class="ltx_ERROR undefined" id="S4.SS2.tab1.1.6.6.1.1">\hdashline</span>[0.5pt/2pt]
   RAG-top1</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.2">33.3</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.3">52.0</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.4">38.2</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.5">59.8</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.6">29.4</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.7">73.5</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.8">50.0</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.9">69.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.6.6.10.1">59.8</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.11"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.6.6.11.1">90.2</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.6.6.12.1">72.5</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.6.6.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.6.6.13.1">97.1</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.7.7">
<td class="ltx_td ltx_align_right" id="S4.SS2.tab1.1.7.7.1">
<span class="ltx_ERROR undefined" id="S4.SS2.tab1.1.7.7.1.1">\hdashline</span>[0.5pt/2pt]
   RAG-top2</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.2">20.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.3">40.2</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.4">37.3</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.5">56.9</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.6">38.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.7">75.2</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.8">46.1</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.9">73.5</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.7.7.10.1">61.8</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.11"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.7.7.11.1">94.1</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.7.7.12.1">77.5</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.7.7.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.7.7.13.1">98.0</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.8.8">
<td class="ltx_td ltx_align_right" id="S4.SS2.tab1.1.8.8.1">
<span class="ltx_ERROR undefined" id="S4.SS2.tab1.1.8.8.1.1">\hdashline</span>[0.5pt/2pt]
   RAG-top5</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.2">22.5</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.3">44.1</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.4">35.0</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.5">62.0</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.6">34.3</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.7">71.6</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.8">51.0</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.9">73.5</td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.8.8.10.1">52.0</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.11"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.8.8.11.1">95.1</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.12"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.8.8.12.1">77.5</span></td>
<td class="ltx_td ltx_align_left" id="S4.SS2.tab1.1.8.8.13"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.8.8.13.1">97.1</span></td>
</tr>
<tr class="ltx_tr" id="S4.SS2.tab1.1.9.9">
<td class="ltx_td ltx_align_right ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.1">RAG-top1-oracle</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.2">52.0</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.3">62.7</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.4">67.6</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.5">73.5</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.6">58.8</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.7">83.3</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.8">56.9</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.9">74.5</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.10"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.9.9.10.1">91.1</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.11"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.1.9.9.11.1">99.0</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.12"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.9.9.12.1">82.8</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S4.SS2.tab1.1.9.9.13"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.SS2.tab1.1.9.9.13.1">95.0</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>Comparative evaluation of LLMs’ performance on text-to-SQL generation for epidemiological question answering. Accuracy (Acc) and executability (Exec) percentages are presented across different models and prompting conditions. Best results are in bold, while second best are underlined. RAG-top1/2/5 indicates the use of the top 1, 2, or 5 most similar questions to augment generation. RAG-random1 and RAG-top1-oracle scenarios provide models with a random dataset sample and the correct SQL query, respectively, for context.</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.tab1.2"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.2.1">Enhanced performance with detailed prompting.</span>
Advanced prompting typically increases execution scores across models (except GPT-3.5 Turbo), but its impact on accuracy varies: Claude 2.1, Mistral-m, and GPT-4 Turbo show marked accuracy improvements with the advanced prompt, whereas Mixtral, GeminiPro, and GPT-3.5 Turbo see no such gains, suggesting that the additional details in the prompt may not benefit smaller or less sophisticated models.
Overall performance is quite poor with either prompting methods.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.tab1.3"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.3.1">Performance gains with contextual information.</span> The inclusion of relevant examples via RAG significantly and consistently improves performance (Table <a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#S4.SS2" title="4.2 Experimental results ‣ 4 Evaluation ‣ Retrieval augmented text-to-SQL generation for epidemiological question answering using electronic health records"><span class="ltx_text ltx_ref_tag">4.2</span></a>, cf. RAG-top1/2/5 vs Prompt(advanced)).
Notably, Mistral-m and GPT-4 Turbo exhibit marked improvements, suggesting they may possess a more advanced few-shot learning ability relative to the other models.
Models outperform zero-shot prompting also when given a random dataset sample (RAG-random1), indicating that exposure to dataset structure and domain-specific language is helpful, even without query-specific context.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.tab1.4"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.4.1">Diminishing returns with increased context.</span>
Providing a single example (RAG-top-1) leads to substantial improvements in performance, but adding more top results (RAG-top2 and RAG-top5) does not result in a similar increase. Some models exhibit a performance peak or a minor decline with additional context, indicating a limit to the beneficial amount of context.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.tab1.5"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.5.1">Superiority of GPT-4 Turbo.</span> GPT-4 Turbo is the best model overall by a large margin, followed by GPT-3.5 Turbo. Mistral-m outperforms both Claude 2.1 and GeminiPro. The open-source Mixtral model lags behind proprietary models in both accuracy and executability across all scenarios.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS2.tab1.6"><span class="ltx_text ltx_font_bold" id="S4.SS2.tab1.6.1">Model-specific approach to oracle context.</span>
In the RAG-top1-oracle scenario, where the prompt includes the correct SQL query, GPT-3.5 Turbo unexpectedly surpasses GPT-4 Turbo by closely mirroring the provided context, favouring direct replication. In contrast, GPT-4 Turbo and other models take a “deliberative” approach, often modifying the input, which, while useful for complex reasoning, hinders tasks that require exact copying.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<section class="ltx_section ltx_figure_panel" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2>
<div class="ltx_para ltx_noindent" id="S5.p1">
<p class="ltx_p" id="S5.p1.1"><span class="ltx_text ltx_font_bold" id="S5.p1.1.1">Text-to-SQL datasets for EHRs.</span>
The MIMIC-SQL dataset  <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib29" title="">2020</a>)</cite> comprises 10 000 template-generated questions for the MIMIC-III <cite class="ltx_cite ltx_citemacro_cite">Johnson et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib9" title="">2016</a>)</cite> database.
It contains both question designed to retrieve patient-specific information, and questions on patients counts with logical and basic mathematical operations.
<cite class="ltx_cite ltx_citemacro_citet">Tarbell et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib27" title="">2023</a>)</cite> noted limited diversity in MIMIC-SQL’s queries, possibly affecting its utility for testing text-to-SQL model generalizability.
emrKBQA  <cite class="ltx_cite ltx_citemacro_cite">Raghavan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib24" title="">2021</a>)</cite> contains 1 million patient-specific questions, also based on MIMIC-III.
EHRSQL<cite class="ltx_cite ltx_citemacro_cite">Lee et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib10" title="">2022</a>)</cite> is a dataset created by extracting templates from clinical questions posed by hospital staff, which are then used to generate a comprehensive set of queries for MIMIC-III and eICU <cite class="ltx_cite ltx_citemacro_cite">Pollard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib20" title="">2018</a>)</cite>. It relies on an earlier, less performing text-to-text model for query generation  <cite class="ltx_cite ltx_citemacro_cite">Raffel et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib23" title="">2020</a>)</cite>.
All these datasets do not adhere with OMOP-CDM, and they opt for direct string matching for concept retrieval. The closest dataset to ours is the OMOP query library <cite class="ltx_cite ltx_citemacro_cite">OHDSI (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib15" title="">2019</a>); OMOP-CDM-Query-Library (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib17" title="">2019</a>)</cite>, which is a collection of queries in OMOP-CDM.
We adapted and included fifteen SQL queries from this library pertinent to epidemiological research into our dataset.
<cite class="ltx_cite ltx_citemacro_citet">Park et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib19" title="">2023</a>)</cite> use rule-based methods and GPT-4 to translate clinical trial eligibility criteria into SQL queries for OMOP-CDM.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p2">
<p class="ltx_p" id="S5.p2.1"><span class="ltx_text ltx_font_bold" id="S5.p2.1.1">Text-to-SQL with LLMs and in-domain demonstrations.</span>
Prompting LLMs has proven effective, often outperforming specialized fine-tuned models in text-to-SQL task <cite class="ltx_cite ltx_citemacro_cite">Pourreza and Rafiei (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib22" title="">2023</a>)</cite>.
Both in-domain <cite class="ltx_cite ltx_citemacro_cite">Chang and Fosler-Lussier (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib3" title="">2023a</a>)</cite> and out-of-domain <cite class="ltx_cite ltx_citemacro_cite">Chang and
Fosler-Lussier (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib4" title="">2023b</a>)</cite> demonstrations improve LLMs’ performance.
<cite class="ltx_cite ltx_citemacro_citet">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib5" title="">2023</a>)</cite> explores retrieval scenarios for in-domain demonstration selection.
To the best of our knowledge, the exploration of these text-to-SQL methods within EHR (or biomedical) research has not yet extended to small datasets that are critical for industry applications.</p>
</div>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">In this work, we presented the task of answering epidemiological questions using RWD.
We demonstrated that RAG is effective in improving performance on all tested scenarios.
Our study extends the demonstrated efficacy of RAG from general text-to-SQL benchmarks <cite class="ltx_cite ltx_citemacro_cite">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib5" title="">2023</a>); Chang and
Fosler-Lussier (<a class="ltx_ref" href="https://arxiv.org/html/2403.09226v2#bib.bib4" title="">2023b</a>)</cite> to include to small, domain-specific biomedical datasets, underlining its utility in data-scarce industry settings.
The primary limitation is the dataset’s limited size and specialized focus on epidemiological questions, suggesting further research should broaden its scope and scale.</p>
</div>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Acknowledgments</h2>
<div class="ltx_para" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">We would like to acknowledge Zuzanna Krawczyk-Borysiak for creating 27 text-SQL pairs; the remaining text-SQL pairs within the dataset were curated by A.Z.
We also thank Jared Worful, Melanie Hackl, and Zuzanna Krawczyk-Borysiak for helpful discussions.</p>
</div>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Anthropic AI (2023)</span>
<span class="ltx_bibblock">
Anthropic AI. 2023.

</span>
<span class="ltx_bibblock">Model card and evaluations for claude models.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www-files.anthropic.com/production/images/Model-Card-Claude-2.pdf" title="">https://www-files.anthropic.com/production/images/Model-Card-Claude-2.pdf</a>.

</span>
<span class="ltx_bibblock">Accessed: February 15, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla
Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell,
Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan, Rewon
Child, Aditya Ramesh, Daniel Ziegler, Jeffrey Wu, Clemens Winter, Chris
Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess,
Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford, Ilya Sutskever,
and Dario Amodei. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdf" title="">Language models are few-shot learners</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">Advances in Neural Information Processing Systems</em>,
volume 33, pages 1877–1901. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chang and Fosler-Lussier (2023a)</span>
<span class="ltx_bibblock">
Shuaichen Chang and Eric Fosler-Lussier. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2305.11853" title="">How to prompt llms for
text-to-sql: A study in zero-shot, single-domain, and cross-domain settings</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chang and
Fosler-Lussier (2023b)</span>
<span class="ltx_bibblock">
Shuaichen Chang and Eric Fosler-Lussier. 2023b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.944" title="">Selective demonstrations for cross-domain text-to-SQL</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Findings of the Association for Computational Linguistics:
EMNLP 2023</em>, pages 14174–14189, Singapore. Association for Computational
Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2023)</span>
<span class="ltx_bibblock">
Dawei Gao, Haibin Wang, Yaliang Li, Xiuyu Sun, Yichen Qian, Bolin Ding, and
Jingren Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2308.15363" title="">Text-to-sql empowered by
large language models: A benchmark evaluation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gemini Team (2023)</span>
<span class="ltx_bibblock">
Gemini Team. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://storage.googleapis.com/deepmind-media/gemini/gemini_1_report.pdf" title="">Gemini: A family of highly capable multimodal models</a>.

</span>
<span class="ltx_bibblock">Technical report, Google.

</span>
<span class="ltx_bibblock">Accessed: February 15, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gonzales et al. (2023)</span>
<span class="ltx_bibblock">
Aldren Gonzales, Guruprabha Guruswamy, and Scott R. Smith. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1371/journal.pdig.0000082" title="">Synthetic data
in health care: A narrative review</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">PLOS Digital Health</em>, 2(1):1–16.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2024)</span>
<span class="ltx_bibblock">
Albert Q. Jiang, Alexandre Sablayrolles, Antoine Roux, Arthur Mensch, Blanche
Savary, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Emma Bou
Hanna, Florian Bressand, Gianna Lengyel, Guillaume Bour, Guillaume Lample,
Lélio Renard Lavaud, Lucile Saulnier, Marie-Anne Lachaux, Pierre Stock,
Sandeep Subramanian, Sophia Yang, Szymon Antoniak, Teven Le Scao, Théophile
Gervet, Thibaut Lavril, Thomas Wang, Timothée Lacroix, and William El Sayed.
2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2401.04088" title="">Mixtral of experts</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Johnson et al. (2016)</span>
<span class="ltx_bibblock">
Alistair E.W. Johnson, Tom J. Pollard, Lu Shen, Li-wei H. Lehman, Mengling
Feng, Mohammad Ghassemi, Benjamin Moody, Peter Szolovits, Leo Anthony Celi,
and Roger G. Mark. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1038/sdata.2016.35" title="">Mimic-iii, a freely
accessible critical care database</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">Scientific Data</em>, 3(1):160035.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lee et al. (2022)</span>
<span class="ltx_bibblock">
Gyubok Lee, Hyeonji Hwang, Seongsu Bae, Yeonsu Kwon, Woncheol Shin, Seongjun
Yang, Minjoon Seo, Jong-Yeup Kim, and Edward Choi. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2022/file/643e347250cf9289e5a2a6c1ed5ee42e-Paper-Datasets_and_Benchmarks.pdf" title="">Ehrsql: A practical text-to-sql benchmark for electronic health records</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Advances in Neural Information Processing Systems</em>,
volume 35, pages 15589–15601. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim
Rocktäschel, Sebastian Riedel, and Douwe Kiela. 2020.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the 34th International Conference on Neural
Information Processing Systems</em>, NIPS’20, Red Hook, NY, USA. Curran
Associates Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Limsopatham and Collier (2016)</span>
<span class="ltx_bibblock">
Nut Limsopatham and Nigel Collier. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/P16-1096" title="">Normalising medical
concepts in social media texts by learning semantic representation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 54th Annual Meeting of the Association
for Computational Linguistics (Volume 1: Long Papers)</em>, pages 1014–1023,
Berlin, Germany. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2021)</span>
<span class="ltx_bibblock">
Fangyu Liu, Ehsan Shareghi, Zaiqiao Meng, Marco Basaldella, and Nigel Collier.
2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2021.naacl-main.334" title="">Self-alignment pretraining for biomedical entity representations</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 2021 Conference of the North American
Chapter of the Association for Computational Linguistics: Human Language
Technologies</em>, pages 4228–4238, Online. Association for Computational
Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mistral AI (2023)</span>
<span class="ltx_bibblock">
Mistral AI. 2023.

</span>
<span class="ltx_bibblock">Generative endopoints of mistral ai.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://docs.mistral.ai/platform/endpoints/" title="">https://docs.mistral.ai/platform/endpoints/</a>.

</span>
<span class="ltx_bibblock">Accessed: February 15, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OHDSI (2019)</span>
<span class="ltx_bibblock">
OHDSI. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://ohdsi.github.io/TheBookOfOhdsi/" title=""><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1.1">The Book of
OHDSI</em></a>, 1 edition.

</span>
<span class="ltx_bibblock">Observational Health Data Sciences and Informatics, Seoul, Korea.

</span>
<span class="ltx_bibblock">Accessed: 2021-03-30.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OMOP-CDM (2023)</span>
<span class="ltx_bibblock">
OMOP-CDM. 2023.

</span>
<span class="ltx_bibblock">Omop cdm common data model.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://ohdsi.github.io/CommonDataModel/" title="">https://ohdsi.github.io/CommonDataModel/</a>.

</span>
<span class="ltx_bibblock">Accessed: January 23, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OMOP-CDM-Query-Library (2019)</span>
<span class="ltx_bibblock">
OMOP-CDM-Query-Library. 2019.

</span>
<span class="ltx_bibblock">Omop cdm query library.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/OHDSI/QueryLibrary" title="">https://github.com/OHDSI/QueryLibrary</a>.

</span>
<span class="ltx_bibblock">Accessed: January 23, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)</span>
<span class="ltx_bibblock">
OpenAI. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2303.08774" title="">Gpt-4 technical report</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Park et al. (2023)</span>
<span class="ltx_bibblock">
Jimyung Park, Yilu Fang, and Chunhua Weng. 2023.

</span>
<span class="ltx_bibblock">Criteria2Query 3.0 Powered by Generative Large Language Models.

</span>
<span class="ltx_bibblock">Observational Health Data Sciences and Informatics (OHDSI).

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.ohdsi.org/wp-content/uploads/2023/10/423-Park-BriefReport.pdf" title="">https://www.ohdsi.org/wp-content/uploads/2023/10/423-Park-BriefReport.pdf</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pollard et al. (2018)</span>
<span class="ltx_bibblock">
Tom J. Pollard, Alistair E. W. Johnson, Jesse D. Raffa, Leo A. Celi, Roger G.
Mark, and Omar Badawi. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1038/sdata.2018.178" title="">The eicu
collaborative research database, a freely available multi-center database for
critical care research</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Scientific Data</em>, 5(1):180178.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Portelli et al. (2022)</span>
<span class="ltx_bibblock">
Beatrice Portelli, Simone Scaboro, Enrico Santus, Hooman Sedghamiz, Emmanuele
Chersoni, and Giuseppe Serra. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.emnlp-main.588" title="">Generalizing
over long tail concepts for medical term normalization</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">Proceedings of the 2022 Conference on Empirical Methods in
Natural Language Processing</em>, pages 8580–8591, Abu Dhabi, United Arab
Emirates. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pourreza and Rafiei (2023)</span>
<span class="ltx_bibblock">
Mohammadreza Pourreza and Davood Rafiei. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=p53QDxSIc5" title="">DIN-SQL:
Decomposed in-context learning of text-to-SQL with self-correction</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Thirty-seventh Conference on Neural Information Processing
Systems</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Raffel et al. (2020)</span>
<span class="ltx_bibblock">
Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael
Matena, Yanqi Zhou, Wei Li, and Peter J. Liu. 2020.

</span>
<span class="ltx_bibblock">Exploring the limits of transfer learning with a unified text-to-text
transformer.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">J. Mach. Learn. Res.</em>, 21(1).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Raghavan et al. (2021)</span>
<span class="ltx_bibblock">
Preethi Raghavan, Jennifer J Liang, Diwakar Mahajan, Rachita Chandra, and Peter
Szolovits. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2021.bionlp-1.7" title="">emrKBQA: A
clinical knowledge-base question answering dataset</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Proceedings of the 20th Workshop on Biomedical Language
Processing</em>, pages 64–73, Online. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reich et al. (2024)</span>
<span class="ltx_bibblock">
Christian Reich, Anna Ostropolets, Patrick Ryan, Peter Rijnbeek, Martijn
Schuemie, Alexander Davydov, Dmitry Dymshyts, and George Hripcsak. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1093/jamia/ocad247" title="">OHDSI Standardized
Vocabularies—a large-scale centralized reference ontology for international
data harmonization</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Journal of the American Medical Informatics Association</em>, page
ocad247.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">SynPUF (2010)</span>
<span class="ltx_bibblock">
SynPUF. 2010.

</span>
<span class="ltx_bibblock">Medicare claims synthetic public use files (synpufs).

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.cms.gov/data-research/statistics-trends-and-reports/medicare-claims-synthetic-public-use-files" title="">https://www.cms.gov/data-research/statistics-trends-and-reports/medicare-claims-synthetic-public-use-files</a>.

</span>
<span class="ltx_bibblock">Accessed: January 23, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tarbell et al. (2023)</span>
<span class="ltx_bibblock">
Richard Tarbell, Kim-Kwang Raymond Choo, Glenn Dietrich, and Anthony Rios.
2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:257687830" title="">Towards
understanding the generalization of medical text-to-sql models and datasets</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">AMIA … Annual Symposium proceedings. AMIA Symposium</em>,
2023:669–678.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Voss et al. (2023)</span>
<span class="ltx_bibblock">
Erica A Voss, Clair Blacketer, Sebastiaan van Sandijk, Maxim Moinat, Michael
Kallfelz, Michel van Speybroeck, Daniel Prieto-Alhambra, Martijn J Schuemie,
and Peter R Rijnbeek. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1093/jamia/ocad214" title="">European health data
and evidence network—learnings from building out a standardized
international health data network</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Journal of the American Medical Informatics Association</em>,
31(1):209–219.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2020)</span>
<span class="ltx_bibblock">
Ping Wang, Tian Shi, and Chandan K. Reddy. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1145/3366423.3380120" title="">Text-to-sql
generation for question answering on electronic medical records</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">Proceedings of The Web Conference 2020</em>, WWW ’20, page
350–361, New York, NY, USA. Association for Computing Machinery.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wolf et al. (2020)</span>
<span class="ltx_bibblock">
Thomas Wolf, Lysandre Debut, Victor Sanh, Julien Chaumond, Clement Delangue,
Anthony Moi, Pierric Cistac, Tim Rault, Remi Louf, Morgan Funtowicz, Joe
Davison, Sam Shleifer, Patrick von Platen, Clara Ma, Yacine Jernite, Julien
Plu, Canwen Xu, Teven Le Scao, Sylvain Gugger, Mariama Drame, Quentin Lhoest,
and Alexander Rush. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.emnlp-demos.6" title="">Transformers:
State-of-the-art natural language processing</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Proceedings of the 2020 Conference on Empirical Methods in
Natural Language Processing: System Demonstrations</em>, pages 38–45, Online.
Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2022)</span>
<span class="ltx_bibblock">
Zhichao Yang, Sunjae Kwon, Zonghai Yao, and Hongfeng Yu. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:254018044" title="">Multi-label few-shot icd coding as autoregressive generation with prompt</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">Proceedings of the AAAI Conference on Artificial Intelligence.
AAAI Conference on Artificial Intelligence</em>, 37 4:5366–5374.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023)</span>
<span class="ltx_bibblock">
Peitian Zhang, Shitao Xiao, Zheng Liu, Zhicheng Dou, and Jian-Yun Nie. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2310.07554" title="">Retrieve anything to augment
large language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2022)</span>
<span class="ltx_bibblock">
Sheng Zhang, Hao Cheng, Shikhar Vashishth, Cliff Wong, Jinfeng Xiao, Xiaodong
Liu, Tristan Naumann, Jianfeng Gao, and Hoifung Poon. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.findings-emnlp.61" title="">Knowledge-rich self-supervision for biomedical entity linking</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">Findings of the Association for Computational Linguistics:
EMNLP 2022</em>, pages 868–880, Abu Dhabi, United Arab Emirates. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ziletti et al. (2022)</span>
<span class="ltx_bibblock">
Angelo Ziletti, Alan Akbik, Christoph Berns, Thomas Herold, Marion Legler, and
Martina Viell. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.naacl-industry.21" title="">Medical
coding with biomedical transformer ensembles and zero/few-shot learning</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Proceedings of the 2022 Conference of the North American
Chapter of the Association for Computational Linguistics: Human Language
Technologies: Industry Track</em>, pages 176–187, Hybrid: Seattle, Washington +
Online. Association for Computational Linguistics.

</span>
</li>
</ul>
</section>
</section>
</section>
</section>
</div>
</div>
</figure>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu May 16 12:59:57 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
