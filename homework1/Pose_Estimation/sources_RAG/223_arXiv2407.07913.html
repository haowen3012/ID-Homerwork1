<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024.</title>
<!--Generated on Thu Jul  4 06:26:01 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2407.07913v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S1" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S2" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S2.SS0.SSS0.Px1" title="In 2 Related Work ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title">Research Gap</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Methodology</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS1" title="In 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>System Architecture</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS2" title="In 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Query Processing Module</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS3" title="In 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Case Retrieval Engine</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS3.SSS1" title="In 3.3 Case Retrieval Engine ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.1 </span>Dense Vector Index</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS3.SSS2" title="In 3.3 Case Retrieval Engine ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.2 </span>Semantic Search Algorithm</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.SS4" title="In 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Insight Generation Module</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS1" title="In 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS2" title="In 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Experimental Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS3" title="In 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Baseline Systems</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS4" title="In 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Evaluation Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS5" title="In 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5 </span>Results and Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS5.SSS1" title="In 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5.1 </span>Medical Domain Performance</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS5.SSS2" title="In 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5.2 </span>Legal Domain Performance</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.SS5.SSS3" title="In 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5.3 </span>Insight Generation Quality</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S5" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Discussion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S6" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Ethical Considerations and Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S7" title="In CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Conclusion and Future Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S7.SS1" title="In 7 Conclusion and Future Work ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.1 </span>Key Contributions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S7.SS2" title="In 7 Conclusion and Future Work ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.2 </span>Future Research Directions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S7.SS3" title="In 7 Conclusion and Future Work ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.3 </span>Concluding Remarks</span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation
<span class="ltx_note ltx_role_thanks" id="id1.id1"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span><span class="ltx_text ltx_font_italic ltx_framed ltx_framed_underline" id="id1.id1.1">Citation</span>:
<span class="ltx_text ltx_font_bold" id="id1.id1.2">Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024.</span></span></span></span>
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
RUI YANG 
<br class="ltx_break"/>University of California, Riverside 
<br class="ltx_break"/>Riverside, USA 
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id2.1.id1">ryang088@ucr.edu</span>
<br class="ltx_break"/>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id3.id1">This paper introduces CaseGPT, an innovative framework that synergizes Large Language Models (LLMs) and Retrieval-Augmented Generation (RAG) technology to enhance case-based reasoning in healthcare and legal domains. CaseGPT addresses the inherent limitations of traditional database queries by facilitating semantic searches based on contextual understanding, thereby significantly improving data accessibility and utility. Our system not only retrieves pertinent cases but also generates nuanced insights and recommendations by discerning intricate patterns within existing case data. We evaluate CaseGPT using comprehensive datasets from both medical and legal fields, demonstrating substantial improvements over state-of-the-art baselines. In medical diagnosis tasks, CaseGPT achieves a 15% increase in F1 score compared to traditional methods, while in legal precedent retrieval, it exhibits a 12% improvement in precision. These results underscore CaseGPT’s potential to revolutionize information retrieval and decision support in complex professional domains, offering a paradigm shift in how practitioners access, analyze, and leverage case data.</p>
<p class="ltx_p" id="id4.id2"><span class="ltx_text ltx_font_bold" id="id4.id2.1">Keywords:</span> Large Language Models, Retrieval-Augmented Generation, Case-Based Reasoning, Healthcare Informatics, Legal Informatics</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para ltx_noindent" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">The exponential proliferation of digital case data in professional domains such as medicine and law presents both unprecedented opportunities and formidable challenges. While this wealth of information has the potential to significantly inform decision-making processes and enhance outcomes, traditional database query systems often fall short in effectively leveraging this vast corpus of data <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib1" title="">1</a>]</cite>. These conventional systems, primarily reliant on exact keyword matches, struggle to capture the nuanced and complex nature of professional terminologies and contextual information <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib2" title="">2</a>]</cite>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">The primary challenges in case-based reasoning within these specialized domains are multifaceted and interrelated. Firstly, there is the issue of handling imprecise or incomplete queries that reflect the ambiguity often present in real-world scenarios. Secondly, understanding the semantic context of queries and cases beyond simple keyword matching requires sophisticated natural language processing capabilities. Lastly, generating meaningful insights and recommendations based on retrieved cases demands advanced analytical and inferential abilities.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">To address these interconnected challenges, we propose CaseGPT, a novel framework that harnesses the power of Large Language Models (LLMs) and Retrieval-Augmented Generation (RAG) technology. CaseGPT represents a significant advancement in the field, offering several key innovations:</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">CaseGPT employs deep semantic understanding of queries and cases, enabling a more flexible and intuitive search process that captures the underlying meaning and context of the information. This approach allows for a more natural interaction between users and the system, bridging the gap between human language and machine interpretation.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">The framework implements contextual retrieval of relevant cases based on sophisticated semantic matching algorithms. This method goes beyond surface-level similarities to identify cases that are conceptually related, even when the specific terminology might differ.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">Perhaps most significantly, CaseGPT generates insights and recommendations by analyzing complex patterns in retrieved cases. This capability transforms the system from a mere retrieval tool to an intelligent assistant capable of providing valuable analytical support to professionals.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">Our work builds upon and extends recent advancements in natural language processing and information retrieval, applying these cutting-edge technologies to specialized professional domains. By synergizing the strengths of LLMs in understanding and generating human-like text with the precision of RAG in retrieving relevant information, CaseGPT represents a paradigm shift in case-based reasoning systems.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p8">
<p class="ltx_p" id="S1.p8.1">The remainder of this paper is structured as follows: Section 2 provides a comprehensive review of related work in the field, situating our contribution within the broader context of AI applications in professional domains. Section 3 elucidates the methodology underlying CaseGPT, detailing its architecture and key components. Section 4 presents our experimental setup and results, offering a rigorous evaluation of the system’s performance. Section 5 discusses the implications of our findings, addressing both the potential impact and the ethical considerations of deploying such a system in sensitive professional contexts. Finally, Section 6 concludes the paper, summarizing our contributions and outlining promising directions for future research.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<div class="ltx_para ltx_noindent" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">The application of advanced natural language processing techniques to case-based reasoning in professional domains has emerged as a vibrant area of research in recent years. This section provides a structured overview of related work, highlighting key areas of development and the gaps our research aims to address.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<dl class="ltx_description" id="S2.I1">
<dt class="ltx_item" id="S2.I1.ix1"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix1.1.1.1">Language Models in Professional Domains</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S2.I1.ix1.p1">
<p class="ltx_p" id="S2.I1.ix1.p1.1">Large Language Models (LLMs) have demonstrated remarkable potential in understanding and generating domain-specific text. Schilder <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib3" title="">3</a>]</cite> conducted a critical analysis of LLMs as intelligent assistance technology in the legal domain, highlighting both the transformative potential and the necessity for human oversight. This work underscores the delicate balance between leveraging AI capabilities and maintaining professional judgment in sensitive fields.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.I1.ix1.p2">
<p class="ltx_p" id="S2.I1.ix1.p2.1">In the medical arena, Saripan et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib4" title="">4</a>]</cite> explored the implications of AI, including LLMs, on informed consent and medical negligence. Their research illuminates the complex ethical and legal landscape surrounding the integration of AI technologies in healthcare decision-making processes.</p>
</div>
</dd>
<dt class="ltx_item" id="S2.I1.ix2"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix2.1.1.1">Information Retrieval in Specialized Domains</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S2.I1.ix2.p1">
<p class="ltx_p" id="S2.I1.ix2.p1.1">The unique challenges of domain-specific search have been a focal point of research in information retrieval. Hanbury <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib1" title="">1</a>]</cite> provided a comprehensive overview of medical information retrieval, emphasizing the need for tailored approaches that can handle the complexity and specificity of medical terminology and concepts.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.I1.ix2.p2">
<p class="ltx_p" id="S2.I1.ix2.p2.1">Hovorushchenko et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib2" title="">2</a>]</cite> proposed an ontology-based approach for information retrieval in medical law, demonstrating the importance of structured knowledge representation in navigating the intersection of medical and legal domains. Their work highlights the potential of semantic technologies in enhancing the precision and relevance of information retrieval in specialized fields.</p>
</div>
</dd>
<dt class="ltx_item" id="S2.I1.ix3"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix3.1.1.1">Innovative Search Techniques</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S2.I1.ix3.p1">
<p class="ltx_p" id="S2.I1.ix3.p1.1">Recent research has focused on addressing the challenges of imprecise queries and enhancing retrieval accuracy:</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.I1.ix3.p2">
<ul class="ltx_itemize" id="S2.I1.ix3.I1">
<li class="ltx_item" id="S2.I1.ix3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix3.I1.i1.1.1.1">•</span></span>
<div class="ltx_para ltx_noindent" id="S2.I1.ix3.I1.i1.p1">
<p class="ltx_p" id="S2.I1.ix3.I1.i1.p1.1"><span class="ltx_text ltx_font_italic" id="S2.I1.ix3.I1.i1.p1.1.1">Fuzzy Search and Query Expansion:</span> Srivel et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib5" title="">5</a>]</cite> introduced a fuzzy-based Grasshopper Optimization Algorithm for query expansion in medical datasets. This approach aims to bridge the gap between user queries and formal medical terminology.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.ix3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix3.I1.i2.1.1.1">•</span></span>
<div class="ltx_para ltx_noindent" id="S2.I1.ix3.I1.i2.p1">
<p class="ltx_p" id="S2.I1.ix3.I1.i2.p1.1"><span class="ltx_text ltx_font_italic" id="S2.I1.ix3.I1.i2.p1.1.1">Semantic Clustering:</span> Chawla <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib6" title="">6</a>]</cite> applied fuzzy c-means clustering and semantic ontologies to web query session mining, advancing intelligent information retrieval.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.ix3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix3.I1.i3.1.1.1">•</span></span>
<div class="ltx_para ltx_noindent" id="S2.I1.ix3.I1.i3.p1">
<p class="ltx_p" id="S2.I1.ix3.I1.i3.p1.1"><span class="ltx_text ltx_font_italic" id="S2.I1.ix3.I1.i3.p1.1.1">Legal Case Retrieval:</span> Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib7" title="">7</a>]</cite> developed a Diversified Legal Case Retrieval Model (DLRM) considering both topical relevance and related subtopics. Liu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib8" title="">8</a>]</cite> compared conversational and traditional search approaches in legal case retrieval, suggesting the potential of interactive interfaces.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="ltx_item" id="S2.I1.ix4"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S2.I1.ix4.1.1.1">Ethical Considerations and Limitations</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S2.I1.ix4.p1">
<p class="ltx_p" id="S2.I1.ix4.p1.1">As AI systems become more prevalent in sensitive domains, ethical implications have come to the forefront. Frihat et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib9" title="">9</a>]</cite> discussed the importance of considering document difficulty for medical practitioners in personalized search engines, highlighting the need for AI systems to adapt to varying levels of user expertise.</p>
</div>
</dd>
</dl>
</div>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Research Gap</h5>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">While these studies have made significant contributions to their respective fields, there remains a notable gap in integrating advanced language models with retrieval-augmented generation for case-based reasoning across multiple professional domains. Our work aims to bridge this gap by introducing CaseGPT, a framework that synergizes the semantic understanding capabilities of LLMs with the precision of RAG technology. This integrated approach has the potential to address the complex challenges of case-based reasoning in a more holistic and effective manner than previous methods.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methodology</h2>
<div class="ltx_para ltx_noindent" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">CaseGPT represents a novel integration of Large Language Models (LLMs) and Retrieval-Augmented Generation (RAG) technology, designed to create a robust framework for case-based reasoning. This section provides a detailed exposition of the components and processes that constitute our system.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>System Architecture</h3>
<div class="ltx_para ltx_noindent" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">The architecture of CaseGPT is composed of three primary modules, each designed to address specific aspects of the case-based reasoning process:</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p2">
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.1">Query Processing Module</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.1">Case Retrieval Engine</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.1">Insight Generation Module</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.1">Figure <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S3.F1" title="Figure 1 ‣ 3.1 System Architecture ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">1</span></a> illustrates the high-level architecture and information flow within CaseGPT.</p>
</div>
<figure class="ltx_figure" id="S3.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="373" id="S3.F1.g1" src="x1.png" width="664"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>High-level architecture of CaseGPT</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Query Processing Module</h3>
<div class="ltx_para ltx_noindent" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">The Query Processing Module serves as the interface between user inputs and the underlying case retrieval and analysis systems. This module leverages a pre-trained LLM to parse and interpret the semantic context of user queries, transforming them into a format optimized for subsequent processing. We employ a state-of-the-art LLM, such as GPT-3 or a domain-specific variant, to tokenize and encode the input query. This process involves breaking down the query into semantic units and mapping them to high-dimensional vectors that capture nuanced meanings and relationships. The tokenization and encoding process is formalized in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#alg1" title="Algorithm 1 ‣ 3.2 Query Processing Module ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> LLM Tokenization and Encoding Process</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg1.l1.1">procedure</span> <span class="ltx_text ltx_font_smallcaps" id="alg1.l1.2">TokenizeAndEncode</span>(<math alttext="Query" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mrow id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml"><mi id="alg1.l1.m1.1.1.2" xref="alg1.l1.m1.1.1.2.cmml">Q</mi><mo id="alg1.l1.m1.1.1.1" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.3" xref="alg1.l1.m1.1.1.3.cmml">u</mi><mo id="alg1.l1.m1.1.1.1a" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.4" xref="alg1.l1.m1.1.1.4.cmml">e</mi><mo id="alg1.l1.m1.1.1.1b" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.5" xref="alg1.l1.m1.1.1.5.cmml">r</mi><mo id="alg1.l1.m1.1.1.1c" xref="alg1.l1.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l1.m1.1.1.6" xref="alg1.l1.m1.1.1.6.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><apply id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1"><times id="alg1.l1.m1.1.1.1.cmml" xref="alg1.l1.m1.1.1.1"></times><ci id="alg1.l1.m1.1.1.2.cmml" xref="alg1.l1.m1.1.1.2">𝑄</ci><ci id="alg1.l1.m1.1.1.3.cmml" xref="alg1.l1.m1.1.1.3">𝑢</ci><ci id="alg1.l1.m1.1.1.4.cmml" xref="alg1.l1.m1.1.1.4">𝑒</ci><ci id="alg1.l1.m1.1.1.5.cmml" xref="alg1.l1.m1.1.1.5">𝑟</ci><ci id="alg1.l1.m1.1.1.6.cmml" xref="alg1.l1.m1.1.1.6">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">Query</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_Q italic_u italic_e italic_r italic_y</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="EncodedQuery\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mrow id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml"><mrow id="alg1.l2.m1.1.1.2" xref="alg1.l2.m1.1.1.2.cmml"><mi id="alg1.l2.m1.1.1.2.2" xref="alg1.l2.m1.1.1.2.2.cmml">E</mi><mo id="alg1.l2.m1.1.1.2.1" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.3" xref="alg1.l2.m1.1.1.2.3.cmml">n</mi><mo id="alg1.l2.m1.1.1.2.1a" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.4" xref="alg1.l2.m1.1.1.2.4.cmml">c</mi><mo id="alg1.l2.m1.1.1.2.1b" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.5" xref="alg1.l2.m1.1.1.2.5.cmml">o</mi><mo id="alg1.l2.m1.1.1.2.1c" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.6" xref="alg1.l2.m1.1.1.2.6.cmml">d</mi><mo id="alg1.l2.m1.1.1.2.1d" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.7" xref="alg1.l2.m1.1.1.2.7.cmml">e</mi><mo id="alg1.l2.m1.1.1.2.1e" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.8" xref="alg1.l2.m1.1.1.2.8.cmml">d</mi><mo id="alg1.l2.m1.1.1.2.1f" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.9" xref="alg1.l2.m1.1.1.2.9.cmml">Q</mi><mo id="alg1.l2.m1.1.1.2.1g" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.10" xref="alg1.l2.m1.1.1.2.10.cmml">u</mi><mo id="alg1.l2.m1.1.1.2.1h" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.11" xref="alg1.l2.m1.1.1.2.11.cmml">e</mi><mo id="alg1.l2.m1.1.1.2.1i" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.12" xref="alg1.l2.m1.1.1.2.12.cmml">r</mi><mo id="alg1.l2.m1.1.1.2.1j" xref="alg1.l2.m1.1.1.2.1.cmml">⁢</mo><mi id="alg1.l2.m1.1.1.2.13" xref="alg1.l2.m1.1.1.2.13.cmml">y</mi></mrow><mo id="alg1.l2.m1.1.1.1" stretchy="false" xref="alg1.l2.m1.1.1.1.cmml">←</mo><mi id="alg1.l2.m1.1.1.3" mathvariant="normal" xref="alg1.l2.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><apply id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1"><ci id="alg1.l2.m1.1.1.1.cmml" xref="alg1.l2.m1.1.1.1">←</ci><apply id="alg1.l2.m1.1.1.2.cmml" xref="alg1.l2.m1.1.1.2"><times id="alg1.l2.m1.1.1.2.1.cmml" xref="alg1.l2.m1.1.1.2.1"></times><ci id="alg1.l2.m1.1.1.2.2.cmml" xref="alg1.l2.m1.1.1.2.2">𝐸</ci><ci id="alg1.l2.m1.1.1.2.3.cmml" xref="alg1.l2.m1.1.1.2.3">𝑛</ci><ci id="alg1.l2.m1.1.1.2.4.cmml" xref="alg1.l2.m1.1.1.2.4">𝑐</ci><ci id="alg1.l2.m1.1.1.2.5.cmml" xref="alg1.l2.m1.1.1.2.5">𝑜</ci><ci id="alg1.l2.m1.1.1.2.6.cmml" xref="alg1.l2.m1.1.1.2.6">𝑑</ci><ci id="alg1.l2.m1.1.1.2.7.cmml" xref="alg1.l2.m1.1.1.2.7">𝑒</ci><ci id="alg1.l2.m1.1.1.2.8.cmml" xref="alg1.l2.m1.1.1.2.8">𝑑</ci><ci id="alg1.l2.m1.1.1.2.9.cmml" xref="alg1.l2.m1.1.1.2.9">𝑄</ci><ci id="alg1.l2.m1.1.1.2.10.cmml" xref="alg1.l2.m1.1.1.2.10">𝑢</ci><ci id="alg1.l2.m1.1.1.2.11.cmml" xref="alg1.l2.m1.1.1.2.11">𝑒</ci><ci id="alg1.l2.m1.1.1.2.12.cmml" xref="alg1.l2.m1.1.1.2.12">𝑟</ci><ci id="alg1.l2.m1.1.1.2.13.cmml" xref="alg1.l2.m1.1.1.2.13">𝑦</ci></apply><emptyset id="alg1.l2.m1.1.1.3.cmml" xref="alg1.l2.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">EncodedQuery\leftarrow\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y ← ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l3.1">for</span> each <math alttext="Sentence" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><mi id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml">S</mi><mo id="alg1.l3.m1.1.1.1" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml">e</mi><mo id="alg1.l3.m1.1.1.1a" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.4" xref="alg1.l3.m1.1.1.4.cmml">n</mi><mo id="alg1.l3.m1.1.1.1b" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.5" xref="alg1.l3.m1.1.1.5.cmml">t</mi><mo id="alg1.l3.m1.1.1.1c" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.6" xref="alg1.l3.m1.1.1.6.cmml">e</mi><mo id="alg1.l3.m1.1.1.1d" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.7" xref="alg1.l3.m1.1.1.7.cmml">n</mi><mo id="alg1.l3.m1.1.1.1e" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.8" xref="alg1.l3.m1.1.1.8.cmml">c</mi><mo id="alg1.l3.m1.1.1.1f" xref="alg1.l3.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m1.1.1.9" xref="alg1.l3.m1.1.1.9.cmml">e</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><times id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1"></times><ci id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2">𝑆</ci><ci id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3">𝑒</ci><ci id="alg1.l3.m1.1.1.4.cmml" xref="alg1.l3.m1.1.1.4">𝑛</ci><ci id="alg1.l3.m1.1.1.5.cmml" xref="alg1.l3.m1.1.1.5">𝑡</ci><ci id="alg1.l3.m1.1.1.6.cmml" xref="alg1.l3.m1.1.1.6">𝑒</ci><ci id="alg1.l3.m1.1.1.7.cmml" xref="alg1.l3.m1.1.1.7">𝑛</ci><ci id="alg1.l3.m1.1.1.8.cmml" xref="alg1.l3.m1.1.1.8">𝑐</ci><ci id="alg1.l3.m1.1.1.9.cmml" xref="alg1.l3.m1.1.1.9">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">Sentence</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_S italic_e italic_n italic_t italic_e italic_n italic_c italic_e</annotation></semantics></math> in <math alttext="Query" class="ltx_Math" display="inline" id="alg1.l3.m2.1"><semantics id="alg1.l3.m2.1a"><mrow id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml"><mi id="alg1.l3.m2.1.1.2" xref="alg1.l3.m2.1.1.2.cmml">Q</mi><mo id="alg1.l3.m2.1.1.1" xref="alg1.l3.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.3" xref="alg1.l3.m2.1.1.3.cmml">u</mi><mo id="alg1.l3.m2.1.1.1a" xref="alg1.l3.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.4" xref="alg1.l3.m2.1.1.4.cmml">e</mi><mo id="alg1.l3.m2.1.1.1b" xref="alg1.l3.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.5" xref="alg1.l3.m2.1.1.5.cmml">r</mi><mo id="alg1.l3.m2.1.1.1c" xref="alg1.l3.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l3.m2.1.1.6" xref="alg1.l3.m2.1.1.6.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b"><apply id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1"><times id="alg1.l3.m2.1.1.1.cmml" xref="alg1.l3.m2.1.1.1"></times><ci id="alg1.l3.m2.1.1.2.cmml" xref="alg1.l3.m2.1.1.2">𝑄</ci><ci id="alg1.l3.m2.1.1.3.cmml" xref="alg1.l3.m2.1.1.3">𝑢</ci><ci id="alg1.l3.m2.1.1.4.cmml" xref="alg1.l3.m2.1.1.4">𝑒</ci><ci id="alg1.l3.m2.1.1.5.cmml" xref="alg1.l3.m2.1.1.5">𝑟</ci><ci id="alg1.l3.m2.1.1.6.cmml" xref="alg1.l3.m2.1.1.6">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m2.1c">Query</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m2.1d">italic_Q italic_u italic_e italic_r italic_y</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l3.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>         <math alttext="SentenceTokens\leftarrow\text{SplitIntoWords}(Sentence)" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mrow id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml"><mi id="alg1.l4.m1.1.1.3.2" xref="alg1.l4.m1.1.1.3.2.cmml">S</mi><mo id="alg1.l4.m1.1.1.3.1" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.3" xref="alg1.l4.m1.1.1.3.3.cmml">e</mi><mo id="alg1.l4.m1.1.1.3.1a" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.4" xref="alg1.l4.m1.1.1.3.4.cmml">n</mi><mo id="alg1.l4.m1.1.1.3.1b" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.5" xref="alg1.l4.m1.1.1.3.5.cmml">t</mi><mo id="alg1.l4.m1.1.1.3.1c" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.6" xref="alg1.l4.m1.1.1.3.6.cmml">e</mi><mo id="alg1.l4.m1.1.1.3.1d" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.7" xref="alg1.l4.m1.1.1.3.7.cmml">n</mi><mo id="alg1.l4.m1.1.1.3.1e" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.8" xref="alg1.l4.m1.1.1.3.8.cmml">c</mi><mo id="alg1.l4.m1.1.1.3.1f" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.9" xref="alg1.l4.m1.1.1.3.9.cmml">e</mi><mo id="alg1.l4.m1.1.1.3.1g" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.10" xref="alg1.l4.m1.1.1.3.10.cmml">T</mi><mo id="alg1.l4.m1.1.1.3.1h" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.11" xref="alg1.l4.m1.1.1.3.11.cmml">o</mi><mo id="alg1.l4.m1.1.1.3.1i" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.12" xref="alg1.l4.m1.1.1.3.12.cmml">k</mi><mo id="alg1.l4.m1.1.1.3.1j" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.13" xref="alg1.l4.m1.1.1.3.13.cmml">e</mi><mo id="alg1.l4.m1.1.1.3.1k" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.14" xref="alg1.l4.m1.1.1.3.14.cmml">n</mi><mo id="alg1.l4.m1.1.1.3.1l" xref="alg1.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.3.15" xref="alg1.l4.m1.1.1.3.15.cmml">s</mi></mrow><mo id="alg1.l4.m1.1.1.2" stretchy="false" xref="alg1.l4.m1.1.1.2.cmml">←</mo><mrow id="alg1.l4.m1.1.1.1" xref="alg1.l4.m1.1.1.1.cmml"><mtext id="alg1.l4.m1.1.1.1.3" xref="alg1.l4.m1.1.1.1.3a.cmml">SplitIntoWords</mtext><mo id="alg1.l4.m1.1.1.1.2" xref="alg1.l4.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l4.m1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l4.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l4.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l4.m1.1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l4.m1.1.1.1.1.1.1.2" xref="alg1.l4.m1.1.1.1.1.1.1.2.cmml">S</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.3" xref="alg1.l4.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1a" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.4" xref="alg1.l4.m1.1.1.1.1.1.1.4.cmml">n</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1b" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.5" xref="alg1.l4.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1c" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.6" xref="alg1.l4.m1.1.1.1.1.1.1.6.cmml">e</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1d" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.7" xref="alg1.l4.m1.1.1.1.1.1.1.7.cmml">n</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1e" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.8" xref="alg1.l4.m1.1.1.1.1.1.1.8.cmml">c</mi><mo id="alg1.l4.m1.1.1.1.1.1.1.1f" xref="alg1.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.1.1.1.1.1.1.9" xref="alg1.l4.m1.1.1.1.1.1.1.9.cmml">e</mi></mrow><mo id="alg1.l4.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">←</ci><apply id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3"><times id="alg1.l4.m1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.3.1"></times><ci id="alg1.l4.m1.1.1.3.2.cmml" xref="alg1.l4.m1.1.1.3.2">𝑆</ci><ci id="alg1.l4.m1.1.1.3.3.cmml" xref="alg1.l4.m1.1.1.3.3">𝑒</ci><ci id="alg1.l4.m1.1.1.3.4.cmml" xref="alg1.l4.m1.1.1.3.4">𝑛</ci><ci id="alg1.l4.m1.1.1.3.5.cmml" xref="alg1.l4.m1.1.1.3.5">𝑡</ci><ci id="alg1.l4.m1.1.1.3.6.cmml" xref="alg1.l4.m1.1.1.3.6">𝑒</ci><ci id="alg1.l4.m1.1.1.3.7.cmml" xref="alg1.l4.m1.1.1.3.7">𝑛</ci><ci id="alg1.l4.m1.1.1.3.8.cmml" xref="alg1.l4.m1.1.1.3.8">𝑐</ci><ci id="alg1.l4.m1.1.1.3.9.cmml" xref="alg1.l4.m1.1.1.3.9">𝑒</ci><ci id="alg1.l4.m1.1.1.3.10.cmml" xref="alg1.l4.m1.1.1.3.10">𝑇</ci><ci id="alg1.l4.m1.1.1.3.11.cmml" xref="alg1.l4.m1.1.1.3.11">𝑜</ci><ci id="alg1.l4.m1.1.1.3.12.cmml" xref="alg1.l4.m1.1.1.3.12">𝑘</ci><ci id="alg1.l4.m1.1.1.3.13.cmml" xref="alg1.l4.m1.1.1.3.13">𝑒</ci><ci id="alg1.l4.m1.1.1.3.14.cmml" xref="alg1.l4.m1.1.1.3.14">𝑛</ci><ci id="alg1.l4.m1.1.1.3.15.cmml" xref="alg1.l4.m1.1.1.3.15">𝑠</ci></apply><apply id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1"><times id="alg1.l4.m1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.2"></times><ci id="alg1.l4.m1.1.1.1.3a.cmml" xref="alg1.l4.m1.1.1.1.3"><mtext id="alg1.l4.m1.1.1.1.3.cmml" xref="alg1.l4.m1.1.1.1.3">SplitIntoWords</mtext></ci><apply id="alg1.l4.m1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1"><times id="alg1.l4.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l4.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.2">𝑆</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.6">𝑒</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.7">𝑛</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.8">𝑐</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.9">𝑒</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">SentenceTokens\leftarrow\text{SplitIntoWords}(Sentence)</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_S italic_e italic_n italic_t italic_e italic_n italic_c italic_e italic_T italic_o italic_k italic_e italic_n italic_s ← SplitIntoWords ( italic_S italic_e italic_n italic_t italic_e italic_n italic_c italic_e )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l5.1">for</span> each <math alttext="Word" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mi id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">W</mi><mo id="alg1.l5.m1.1.1.1" xref="alg1.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml">o</mi><mo id="alg1.l5.m1.1.1.1a" xref="alg1.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.4" xref="alg1.l5.m1.1.1.4.cmml">r</mi><mo id="alg1.l5.m1.1.1.1b" xref="alg1.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m1.1.1.5" xref="alg1.l5.m1.1.1.5.cmml">d</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><times id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1"></times><ci id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">𝑊</ci><ci id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3">𝑜</ci><ci id="alg1.l5.m1.1.1.4.cmml" xref="alg1.l5.m1.1.1.4">𝑟</ci><ci id="alg1.l5.m1.1.1.5.cmml" xref="alg1.l5.m1.1.1.5">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">Word</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_W italic_o italic_r italic_d</annotation></semantics></math> in <math alttext="SentenceTokens" class="ltx_Math" display="inline" id="alg1.l5.m2.1"><semantics id="alg1.l5.m2.1a"><mrow id="alg1.l5.m2.1.1" xref="alg1.l5.m2.1.1.cmml"><mi id="alg1.l5.m2.1.1.2" xref="alg1.l5.m2.1.1.2.cmml">S</mi><mo id="alg1.l5.m2.1.1.1" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.3" xref="alg1.l5.m2.1.1.3.cmml">e</mi><mo id="alg1.l5.m2.1.1.1a" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.4" xref="alg1.l5.m2.1.1.4.cmml">n</mi><mo id="alg1.l5.m2.1.1.1b" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.5" xref="alg1.l5.m2.1.1.5.cmml">t</mi><mo id="alg1.l5.m2.1.1.1c" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.6" xref="alg1.l5.m2.1.1.6.cmml">e</mi><mo id="alg1.l5.m2.1.1.1d" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.7" xref="alg1.l5.m2.1.1.7.cmml">n</mi><mo id="alg1.l5.m2.1.1.1e" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.8" xref="alg1.l5.m2.1.1.8.cmml">c</mi><mo id="alg1.l5.m2.1.1.1f" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.9" xref="alg1.l5.m2.1.1.9.cmml">e</mi><mo id="alg1.l5.m2.1.1.1g" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.10" xref="alg1.l5.m2.1.1.10.cmml">T</mi><mo id="alg1.l5.m2.1.1.1h" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.11" xref="alg1.l5.m2.1.1.11.cmml">o</mi><mo id="alg1.l5.m2.1.1.1i" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.12" xref="alg1.l5.m2.1.1.12.cmml">k</mi><mo id="alg1.l5.m2.1.1.1j" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.13" xref="alg1.l5.m2.1.1.13.cmml">e</mi><mo id="alg1.l5.m2.1.1.1k" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.14" xref="alg1.l5.m2.1.1.14.cmml">n</mi><mo id="alg1.l5.m2.1.1.1l" xref="alg1.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg1.l5.m2.1.1.15" xref="alg1.l5.m2.1.1.15.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m2.1b"><apply id="alg1.l5.m2.1.1.cmml" xref="alg1.l5.m2.1.1"><times id="alg1.l5.m2.1.1.1.cmml" xref="alg1.l5.m2.1.1.1"></times><ci id="alg1.l5.m2.1.1.2.cmml" xref="alg1.l5.m2.1.1.2">𝑆</ci><ci id="alg1.l5.m2.1.1.3.cmml" xref="alg1.l5.m2.1.1.3">𝑒</ci><ci id="alg1.l5.m2.1.1.4.cmml" xref="alg1.l5.m2.1.1.4">𝑛</ci><ci id="alg1.l5.m2.1.1.5.cmml" xref="alg1.l5.m2.1.1.5">𝑡</ci><ci id="alg1.l5.m2.1.1.6.cmml" xref="alg1.l5.m2.1.1.6">𝑒</ci><ci id="alg1.l5.m2.1.1.7.cmml" xref="alg1.l5.m2.1.1.7">𝑛</ci><ci id="alg1.l5.m2.1.1.8.cmml" xref="alg1.l5.m2.1.1.8">𝑐</ci><ci id="alg1.l5.m2.1.1.9.cmml" xref="alg1.l5.m2.1.1.9">𝑒</ci><ci id="alg1.l5.m2.1.1.10.cmml" xref="alg1.l5.m2.1.1.10">𝑇</ci><ci id="alg1.l5.m2.1.1.11.cmml" xref="alg1.l5.m2.1.1.11">𝑜</ci><ci id="alg1.l5.m2.1.1.12.cmml" xref="alg1.l5.m2.1.1.12">𝑘</ci><ci id="alg1.l5.m2.1.1.13.cmml" xref="alg1.l5.m2.1.1.13">𝑒</ci><ci id="alg1.l5.m2.1.1.14.cmml" xref="alg1.l5.m2.1.1.14">𝑛</ci><ci id="alg1.l5.m2.1.1.15.cmml" xref="alg1.l5.m2.1.1.15">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m2.1c">SentenceTokens</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m2.1d">italic_S italic_e italic_n italic_t italic_e italic_n italic_c italic_e italic_T italic_o italic_k italic_e italic_n italic_s</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l5.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>              <math alttext="EncodedToken\leftarrow\text{LLMEncode}(Word)" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml"><mrow id="alg1.l6.m1.1.1.3" xref="alg1.l6.m1.1.1.3.cmml"><mi id="alg1.l6.m1.1.1.3.2" xref="alg1.l6.m1.1.1.3.2.cmml">E</mi><mo id="alg1.l6.m1.1.1.3.1" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.3" xref="alg1.l6.m1.1.1.3.3.cmml">n</mi><mo id="alg1.l6.m1.1.1.3.1a" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.4" xref="alg1.l6.m1.1.1.3.4.cmml">c</mi><mo id="alg1.l6.m1.1.1.3.1b" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.5" xref="alg1.l6.m1.1.1.3.5.cmml">o</mi><mo id="alg1.l6.m1.1.1.3.1c" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.6" xref="alg1.l6.m1.1.1.3.6.cmml">d</mi><mo id="alg1.l6.m1.1.1.3.1d" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.7" xref="alg1.l6.m1.1.1.3.7.cmml">e</mi><mo id="alg1.l6.m1.1.1.3.1e" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.8" xref="alg1.l6.m1.1.1.3.8.cmml">d</mi><mo id="alg1.l6.m1.1.1.3.1f" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.9" xref="alg1.l6.m1.1.1.3.9.cmml">T</mi><mo id="alg1.l6.m1.1.1.3.1g" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.10" xref="alg1.l6.m1.1.1.3.10.cmml">o</mi><mo id="alg1.l6.m1.1.1.3.1h" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.11" xref="alg1.l6.m1.1.1.3.11.cmml">k</mi><mo id="alg1.l6.m1.1.1.3.1i" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.12" xref="alg1.l6.m1.1.1.3.12.cmml">e</mi><mo id="alg1.l6.m1.1.1.3.1j" xref="alg1.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.3.13" xref="alg1.l6.m1.1.1.3.13.cmml">n</mi></mrow><mo id="alg1.l6.m1.1.1.2" stretchy="false" xref="alg1.l6.m1.1.1.2.cmml">←</mo><mrow id="alg1.l6.m1.1.1.1" xref="alg1.l6.m1.1.1.1.cmml"><mtext id="alg1.l6.m1.1.1.1.3" xref="alg1.l6.m1.1.1.1.3a.cmml">LLMEncode</mtext><mo id="alg1.l6.m1.1.1.1.2" xref="alg1.l6.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l6.m1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l6.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l6.m1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.1.2" xref="alg1.l6.m1.1.1.1.1.1.1.2.cmml">W</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.3" xref="alg1.l6.m1.1.1.1.1.1.1.3.cmml">o</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1a" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.4" xref="alg1.l6.m1.1.1.1.1.1.1.4.cmml">r</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.1b" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l6.m1.1.1.1.1.1.1.5" xref="alg1.l6.m1.1.1.1.1.1.1.5.cmml">d</mi></mrow><mo id="alg1.l6.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1"><ci id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2">←</ci><apply id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3"><times id="alg1.l6.m1.1.1.3.1.cmml" xref="alg1.l6.m1.1.1.3.1"></times><ci id="alg1.l6.m1.1.1.3.2.cmml" xref="alg1.l6.m1.1.1.3.2">𝐸</ci><ci id="alg1.l6.m1.1.1.3.3.cmml" xref="alg1.l6.m1.1.1.3.3">𝑛</ci><ci id="alg1.l6.m1.1.1.3.4.cmml" xref="alg1.l6.m1.1.1.3.4">𝑐</ci><ci id="alg1.l6.m1.1.1.3.5.cmml" xref="alg1.l6.m1.1.1.3.5">𝑜</ci><ci id="alg1.l6.m1.1.1.3.6.cmml" xref="alg1.l6.m1.1.1.3.6">𝑑</ci><ci id="alg1.l6.m1.1.1.3.7.cmml" xref="alg1.l6.m1.1.1.3.7">𝑒</ci><ci id="alg1.l6.m1.1.1.3.8.cmml" xref="alg1.l6.m1.1.1.3.8">𝑑</ci><ci id="alg1.l6.m1.1.1.3.9.cmml" xref="alg1.l6.m1.1.1.3.9">𝑇</ci><ci id="alg1.l6.m1.1.1.3.10.cmml" xref="alg1.l6.m1.1.1.3.10">𝑜</ci><ci id="alg1.l6.m1.1.1.3.11.cmml" xref="alg1.l6.m1.1.1.3.11">𝑘</ci><ci id="alg1.l6.m1.1.1.3.12.cmml" xref="alg1.l6.m1.1.1.3.12">𝑒</ci><ci id="alg1.l6.m1.1.1.3.13.cmml" xref="alg1.l6.m1.1.1.3.13">𝑛</ci></apply><apply id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1"><times id="alg1.l6.m1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.2"></times><ci id="alg1.l6.m1.1.1.1.3a.cmml" xref="alg1.l6.m1.1.1.1.3"><mtext id="alg1.l6.m1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.3">LLMEncode</mtext></ci><apply id="alg1.l6.m1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1"><times id="alg1.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.2">𝑊</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3">𝑜</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.4">𝑟</ci><ci id="alg1.l6.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.5">𝑑</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">EncodedToken\leftarrow\text{LLMEncode}(Word)</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_T italic_o italic_k italic_e italic_n ← LLMEncode ( italic_W italic_o italic_r italic_d )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>              <math alttext="EncodedQuery\leftarrow EncodedQuery\cup\{EncodedToken\}" class="ltx_Math" display="inline" id="alg1.l7.m1.1"><semantics id="alg1.l7.m1.1a"><mrow id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml"><mrow id="alg1.l7.m1.1.1.3" xref="alg1.l7.m1.1.1.3.cmml"><mi id="alg1.l7.m1.1.1.3.2" xref="alg1.l7.m1.1.1.3.2.cmml">E</mi><mo id="alg1.l7.m1.1.1.3.1" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.3" xref="alg1.l7.m1.1.1.3.3.cmml">n</mi><mo id="alg1.l7.m1.1.1.3.1a" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.4" xref="alg1.l7.m1.1.1.3.4.cmml">c</mi><mo id="alg1.l7.m1.1.1.3.1b" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.5" xref="alg1.l7.m1.1.1.3.5.cmml">o</mi><mo id="alg1.l7.m1.1.1.3.1c" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.6" xref="alg1.l7.m1.1.1.3.6.cmml">d</mi><mo id="alg1.l7.m1.1.1.3.1d" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.7" xref="alg1.l7.m1.1.1.3.7.cmml">e</mi><mo id="alg1.l7.m1.1.1.3.1e" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.8" xref="alg1.l7.m1.1.1.3.8.cmml">d</mi><mo id="alg1.l7.m1.1.1.3.1f" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.9" xref="alg1.l7.m1.1.1.3.9.cmml">Q</mi><mo id="alg1.l7.m1.1.1.3.1g" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.10" xref="alg1.l7.m1.1.1.3.10.cmml">u</mi><mo id="alg1.l7.m1.1.1.3.1h" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.11" xref="alg1.l7.m1.1.1.3.11.cmml">e</mi><mo id="alg1.l7.m1.1.1.3.1i" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.12" xref="alg1.l7.m1.1.1.3.12.cmml">r</mi><mo id="alg1.l7.m1.1.1.3.1j" xref="alg1.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.3.13" xref="alg1.l7.m1.1.1.3.13.cmml">y</mi></mrow><mo id="alg1.l7.m1.1.1.2" stretchy="false" xref="alg1.l7.m1.1.1.2.cmml">←</mo><mrow id="alg1.l7.m1.1.1.1" xref="alg1.l7.m1.1.1.1.cmml"><mrow id="alg1.l7.m1.1.1.1.3" xref="alg1.l7.m1.1.1.1.3.cmml"><mi id="alg1.l7.m1.1.1.1.3.2" xref="alg1.l7.m1.1.1.1.3.2.cmml">E</mi><mo id="alg1.l7.m1.1.1.1.3.1" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.3" xref="alg1.l7.m1.1.1.1.3.3.cmml">n</mi><mo id="alg1.l7.m1.1.1.1.3.1a" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.4" xref="alg1.l7.m1.1.1.1.3.4.cmml">c</mi><mo id="alg1.l7.m1.1.1.1.3.1b" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.5" xref="alg1.l7.m1.1.1.1.3.5.cmml">o</mi><mo id="alg1.l7.m1.1.1.1.3.1c" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.6" xref="alg1.l7.m1.1.1.1.3.6.cmml">d</mi><mo id="alg1.l7.m1.1.1.1.3.1d" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.7" xref="alg1.l7.m1.1.1.1.3.7.cmml">e</mi><mo id="alg1.l7.m1.1.1.1.3.1e" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.8" xref="alg1.l7.m1.1.1.1.3.8.cmml">d</mi><mo id="alg1.l7.m1.1.1.1.3.1f" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.9" xref="alg1.l7.m1.1.1.1.3.9.cmml">Q</mi><mo id="alg1.l7.m1.1.1.1.3.1g" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.10" xref="alg1.l7.m1.1.1.1.3.10.cmml">u</mi><mo id="alg1.l7.m1.1.1.1.3.1h" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.11" xref="alg1.l7.m1.1.1.1.3.11.cmml">e</mi><mo id="alg1.l7.m1.1.1.1.3.1i" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.12" xref="alg1.l7.m1.1.1.1.3.12.cmml">r</mi><mo id="alg1.l7.m1.1.1.1.3.1j" xref="alg1.l7.m1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.3.13" xref="alg1.l7.m1.1.1.1.3.13.cmml">y</mi></mrow><mo id="alg1.l7.m1.1.1.1.2" xref="alg1.l7.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l7.m1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.2.cmml"><mo id="alg1.l7.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l7.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l7.m1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l7.m1.1.1.1.1.1.1.2" xref="alg1.l7.m1.1.1.1.1.1.1.2.cmml">E</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.3" xref="alg1.l7.m1.1.1.1.1.1.1.3.cmml">n</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1a" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.4" xref="alg1.l7.m1.1.1.1.1.1.1.4.cmml">c</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1b" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.5" xref="alg1.l7.m1.1.1.1.1.1.1.5.cmml">o</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1c" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.6" xref="alg1.l7.m1.1.1.1.1.1.1.6.cmml">d</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1d" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.7" xref="alg1.l7.m1.1.1.1.1.1.1.7.cmml">e</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1e" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.8" xref="alg1.l7.m1.1.1.1.1.1.1.8.cmml">d</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1f" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.9" xref="alg1.l7.m1.1.1.1.1.1.1.9.cmml">T</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1g" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.10" xref="alg1.l7.m1.1.1.1.1.1.1.10.cmml">o</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1h" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.11" xref="alg1.l7.m1.1.1.1.1.1.1.11.cmml">k</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1i" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.12" xref="alg1.l7.m1.1.1.1.1.1.1.12.cmml">e</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.1j" xref="alg1.l7.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg1.l7.m1.1.1.1.1.1.1.13" xref="alg1.l7.m1.1.1.1.1.1.1.13.cmml">n</mi></mrow><mo id="alg1.l7.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l7.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.1b"><apply id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1"><ci id="alg1.l7.m1.1.1.2.cmml" xref="alg1.l7.m1.1.1.2">←</ci><apply id="alg1.l7.m1.1.1.3.cmml" xref="alg1.l7.m1.1.1.3"><times id="alg1.l7.m1.1.1.3.1.cmml" xref="alg1.l7.m1.1.1.3.1"></times><ci id="alg1.l7.m1.1.1.3.2.cmml" xref="alg1.l7.m1.1.1.3.2">𝐸</ci><ci id="alg1.l7.m1.1.1.3.3.cmml" xref="alg1.l7.m1.1.1.3.3">𝑛</ci><ci id="alg1.l7.m1.1.1.3.4.cmml" xref="alg1.l7.m1.1.1.3.4">𝑐</ci><ci id="alg1.l7.m1.1.1.3.5.cmml" xref="alg1.l7.m1.1.1.3.5">𝑜</ci><ci id="alg1.l7.m1.1.1.3.6.cmml" xref="alg1.l7.m1.1.1.3.6">𝑑</ci><ci id="alg1.l7.m1.1.1.3.7.cmml" xref="alg1.l7.m1.1.1.3.7">𝑒</ci><ci id="alg1.l7.m1.1.1.3.8.cmml" xref="alg1.l7.m1.1.1.3.8">𝑑</ci><ci id="alg1.l7.m1.1.1.3.9.cmml" xref="alg1.l7.m1.1.1.3.9">𝑄</ci><ci id="alg1.l7.m1.1.1.3.10.cmml" xref="alg1.l7.m1.1.1.3.10">𝑢</ci><ci id="alg1.l7.m1.1.1.3.11.cmml" xref="alg1.l7.m1.1.1.3.11">𝑒</ci><ci id="alg1.l7.m1.1.1.3.12.cmml" xref="alg1.l7.m1.1.1.3.12">𝑟</ci><ci id="alg1.l7.m1.1.1.3.13.cmml" xref="alg1.l7.m1.1.1.3.13">𝑦</ci></apply><apply id="alg1.l7.m1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1"><union id="alg1.l7.m1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.2"></union><apply id="alg1.l7.m1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.3"><times id="alg1.l7.m1.1.1.1.3.1.cmml" xref="alg1.l7.m1.1.1.1.3.1"></times><ci id="alg1.l7.m1.1.1.1.3.2.cmml" xref="alg1.l7.m1.1.1.1.3.2">𝐸</ci><ci id="alg1.l7.m1.1.1.1.3.3.cmml" xref="alg1.l7.m1.1.1.1.3.3">𝑛</ci><ci id="alg1.l7.m1.1.1.1.3.4.cmml" xref="alg1.l7.m1.1.1.1.3.4">𝑐</ci><ci id="alg1.l7.m1.1.1.1.3.5.cmml" xref="alg1.l7.m1.1.1.1.3.5">𝑜</ci><ci id="alg1.l7.m1.1.1.1.3.6.cmml" xref="alg1.l7.m1.1.1.1.3.6">𝑑</ci><ci id="alg1.l7.m1.1.1.1.3.7.cmml" xref="alg1.l7.m1.1.1.1.3.7">𝑒</ci><ci id="alg1.l7.m1.1.1.1.3.8.cmml" xref="alg1.l7.m1.1.1.1.3.8">𝑑</ci><ci id="alg1.l7.m1.1.1.1.3.9.cmml" xref="alg1.l7.m1.1.1.1.3.9">𝑄</ci><ci id="alg1.l7.m1.1.1.1.3.10.cmml" xref="alg1.l7.m1.1.1.1.3.10">𝑢</ci><ci id="alg1.l7.m1.1.1.1.3.11.cmml" xref="alg1.l7.m1.1.1.1.3.11">𝑒</ci><ci id="alg1.l7.m1.1.1.1.3.12.cmml" xref="alg1.l7.m1.1.1.1.3.12">𝑟</ci><ci id="alg1.l7.m1.1.1.1.3.13.cmml" xref="alg1.l7.m1.1.1.1.3.13">𝑦</ci></apply><set id="alg1.l7.m1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1"><apply id="alg1.l7.m1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1"><times id="alg1.l7.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l7.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2">𝐸</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.3">𝑛</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.4">𝑐</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.5">𝑜</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.6">𝑑</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.7">𝑒</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.8">𝑑</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.9">𝑇</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.10">𝑜</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.11.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.11">𝑘</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.12.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.12">𝑒</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.13.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.13">𝑛</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.1c">EncodedQuery\leftarrow EncodedQuery\cup\{EncodedToken\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.1d">italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y ← italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y ∪ { italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_T italic_o italic_k italic_e italic_n }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l8.2">for</span>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l9.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l9.2">for</span>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l10.1">return</span> <math alttext="EncodedQuery" class="ltx_Math" display="inline" id="alg1.l10.m1.1"><semantics id="alg1.l10.m1.1a"><mrow id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml"><mi id="alg1.l10.m1.1.1.2" xref="alg1.l10.m1.1.1.2.cmml">E</mi><mo id="alg1.l10.m1.1.1.1" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.3" xref="alg1.l10.m1.1.1.3.cmml">n</mi><mo id="alg1.l10.m1.1.1.1a" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.4" xref="alg1.l10.m1.1.1.4.cmml">c</mi><mo id="alg1.l10.m1.1.1.1b" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.5" xref="alg1.l10.m1.1.1.5.cmml">o</mi><mo id="alg1.l10.m1.1.1.1c" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.6" xref="alg1.l10.m1.1.1.6.cmml">d</mi><mo id="alg1.l10.m1.1.1.1d" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.7" xref="alg1.l10.m1.1.1.7.cmml">e</mi><mo id="alg1.l10.m1.1.1.1e" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.8" xref="alg1.l10.m1.1.1.8.cmml">d</mi><mo id="alg1.l10.m1.1.1.1f" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.9" xref="alg1.l10.m1.1.1.9.cmml">Q</mi><mo id="alg1.l10.m1.1.1.1g" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.10" xref="alg1.l10.m1.1.1.10.cmml">u</mi><mo id="alg1.l10.m1.1.1.1h" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.11" xref="alg1.l10.m1.1.1.11.cmml">e</mi><mo id="alg1.l10.m1.1.1.1i" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.12" xref="alg1.l10.m1.1.1.12.cmml">r</mi><mo id="alg1.l10.m1.1.1.1j" xref="alg1.l10.m1.1.1.1.cmml">⁢</mo><mi id="alg1.l10.m1.1.1.13" xref="alg1.l10.m1.1.1.13.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b"><apply id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1"><times id="alg1.l10.m1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1"></times><ci id="alg1.l10.m1.1.1.2.cmml" xref="alg1.l10.m1.1.1.2">𝐸</ci><ci id="alg1.l10.m1.1.1.3.cmml" xref="alg1.l10.m1.1.1.3">𝑛</ci><ci id="alg1.l10.m1.1.1.4.cmml" xref="alg1.l10.m1.1.1.4">𝑐</ci><ci id="alg1.l10.m1.1.1.5.cmml" xref="alg1.l10.m1.1.1.5">𝑜</ci><ci id="alg1.l10.m1.1.1.6.cmml" xref="alg1.l10.m1.1.1.6">𝑑</ci><ci id="alg1.l10.m1.1.1.7.cmml" xref="alg1.l10.m1.1.1.7">𝑒</ci><ci id="alg1.l10.m1.1.1.8.cmml" xref="alg1.l10.m1.1.1.8">𝑑</ci><ci id="alg1.l10.m1.1.1.9.cmml" xref="alg1.l10.m1.1.1.9">𝑄</ci><ci id="alg1.l10.m1.1.1.10.cmml" xref="alg1.l10.m1.1.1.10">𝑢</ci><ci id="alg1.l10.m1.1.1.11.cmml" xref="alg1.l10.m1.1.1.11">𝑒</ci><ci id="alg1.l10.m1.1.1.12.cmml" xref="alg1.l10.m1.1.1.12">𝑟</ci><ci id="alg1.l10.m1.1.1.13.cmml" xref="alg1.l10.m1.1.1.13">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.1c">EncodedQuery</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.1d">italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span><span class="ltx_text ltx_font_bold" id="alg1.l11.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l11.2">procedure</span>
</div>
</div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">The LLMEncode function represents the sophisticated encoding process of the LLM, which maps words to high-dimensional vectors that capture semantic meaning within the context of the entire query.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Case Retrieval Engine</h3>
<div class="ltx_para ltx_noindent" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">The Case Retrieval Engine constitutes the core component of our CaseGPT framework, responsible for identifying and retrieving the most relevant cases based on processed queries. This engine leverages state-of-the-art Retrieval-Augmented Generation (RAG) technology <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib17" title="">17</a>]</cite>, significantly advancing beyond traditional information retrieval methods. The engine’s architecture comprises two primary components: the Dense Vector Index and the Semantic Search Algorithm.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS3.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.1 </span>Dense Vector Index</h4>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS1.p1">
<p class="ltx_p" id="S3.SS3.SSS1.p1.1">Central to our retrieval system is a meticulously maintained dense vector index of all cases in our database. This index serves as a high-dimensional semantic map of our case repository, enabling efficient and accurate case retrieval. The construction and maintenance of this index involve several key aspects:</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS1.p2">
<ol class="ltx_enumerate" id="S3.I2">
<li class="ltx_item" id="S3.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para ltx_noindent" id="S3.I2.i1.p1">
<p class="ltx_p" id="S3.I2.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I2.i1.p1.1.1">Encoding Methodology:</span> Each case undergoes encoding using the same Large Language Model (LLM) employed for query processing. We utilize a variant of the BERT architecture <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib18" title="">18</a>]</cite>, fine-tuned on domain-specific corpora to enhance its understanding of legal and medical terminologies. This consistent approach ensures semantic coherence across the entire system.</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para ltx_noindent" id="S3.I2.i2.p1">
<p class="ltx_p" id="S3.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I2.i2.p1.1.1">Vector Representation:</span> Cases are transformed into dense vectors, typically of 768 to 1024 dimensions, capturing intricate semantic nuances. This high-dimensional representation allows for fine-grained differentiation between cases, crucial for handling the complexity of legal and medical domains <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib19" title="">19</a>]</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para ltx_noindent" id="S3.I2.i3.p1">
<p class="ltx_p" id="S3.I2.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I2.i3.p1.1.1">Index Structure:</span> To facilitate rapid similarity search in high-dimensional spaces, we implement an efficient indexing structure. Specifically, we employ the Hierarchical Navigable Small World (HNSW) algorithm <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib20" title="">20</a>]</cite>, which offers an optimal balance between search speed and accuracy.</p>
</div>
</li>
<li class="ltx_item" id="S3.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para ltx_noindent" id="S3.I2.i4.p1">
<p class="ltx_p" id="S3.I2.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I2.i4.p1.1.1">Dynamic Updates:</span> Our system supports real-time index updates, allowing for the seamless integration of new cases. This is achieved through an incremental indexing mechanism, ensuring that the retrieval system remains current without necessitating complete reindexing <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib21" title="">21</a>]</cite>.</p>
</div>
</li>
</ol>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.2 </span>Semantic Search Algorithm</h4>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS2.p1">
<p class="ltx_p" id="S3.SS3.SSS2.p1.1">The semantic search algorithm forms the operational core of our retrieval engine, responsible for matching encoded queries with the most semantically relevant cases. Our approach transcends traditional keyword matching, delving into deeper semantic relationships between queries and cases. The algorithm encompasses several sophisticated components:</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS2.p2">
<ol class="ltx_enumerate" id="S3.I3">
<li class="ltx_item" id="S3.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para ltx_noindent" id="S3.I3.i1.p1">
<p class="ltx_p" id="S3.I3.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I3.i1.p1.1.1">Similarity Metric:</span> We employ cosine similarity as our primary metric, chosen for its effectiveness in capturing semantic relatedness in high-dimensional spaces. This choice is supported by extensive empirical studies in semantic textual similarity tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib22" title="">22</a>]</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para ltx_noindent" id="S3.I3.i2.p1">
<p class="ltx_p" id="S3.I3.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I3.i2.p1.1.1">Query-Case Matching:</span> The algorithm computes the cosine similarity between the encoded query vector and each case vector in the index. To optimize this process, we utilize approximate nearest neighbor search techniques, specifically the FAISS (Facebook AI Similarity Search) library <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib23" title="">23</a>]</cite>, which allows for sub-linear time complexity in similarity computations.</p>
</div>
</li>
<li class="ltx_item" id="S3.I3.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para ltx_noindent" id="S3.I3.i3.p1">
<p class="ltx_p" id="S3.I3.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I3.i3.p1.1.1">Ranking Mechanism:</span> Retrieved cases are initially ranked based on their cosine similarity scores. Subsequently, we apply a re-ranking step that incorporates additional domain-specific factors such as case recency, citation frequency, and jurisdictional relevance. This multi-factor ranking approach is inspired by learning-to-rank methodologies in information retrieval <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib24" title="">24</a>]</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I3.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para ltx_noindent" id="S3.I3.i4.p1">
<p class="ltx_p" id="S3.I3.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I3.i4.p1.1.1">Diversity-Aware Retrieval:</span> To ensure a comprehensive set of results, we implement a diversity-aware retrieval mechanism. This approach, based on the MaximumMarginal Relevance (MMR) principle <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib25" title="">25</a>]</cite>, balances between relevance and diversity in the retrieved set of cases.</p>
</div>
</li>
</ol>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS2.p3">
<p class="ltx_p" id="S3.SS3.SSS2.p3.1">The core retrieval process is formalized in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#alg2" title="Algorithm 2 ‣ 3.3.2 Semantic Search Algorithm ‣ 3.3 Case Retrieval Engine ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">2</span></a>, which efficiently narrows down the search space using approximate nearest neighbor techniques before computing precise similarity scores and applying the re-ranking mechanism.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg2.2.1.1">Algorithm 2</span> </span> RAG-based Case Retrieval Algorithm</figcaption>
<div class="ltx_listing ltx_listing" id="alg2.3">
<div class="ltx_listingline" id="alg2.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg2.l1.1">procedure</span> <span class="ltx_text ltx_font_smallcaps" id="alg2.l1.2">RetrieveCases</span>(<math alttext="EncodedQuery,N,Index" class="ltx_Math" display="inline" id="alg2.l1.m1.3"><semantics id="alg2.l1.m1.3a"><mrow id="alg2.l1.m1.3.3.2" xref="alg2.l1.m1.3.3.3.cmml"><mrow id="alg2.l1.m1.2.2.1.1" xref="alg2.l1.m1.2.2.1.1.cmml"><mi id="alg2.l1.m1.2.2.1.1.2" xref="alg2.l1.m1.2.2.1.1.2.cmml">E</mi><mo id="alg2.l1.m1.2.2.1.1.1" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.3" xref="alg2.l1.m1.2.2.1.1.3.cmml">n</mi><mo id="alg2.l1.m1.2.2.1.1.1a" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.4" xref="alg2.l1.m1.2.2.1.1.4.cmml">c</mi><mo id="alg2.l1.m1.2.2.1.1.1b" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.5" xref="alg2.l1.m1.2.2.1.1.5.cmml">o</mi><mo id="alg2.l1.m1.2.2.1.1.1c" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.6" xref="alg2.l1.m1.2.2.1.1.6.cmml">d</mi><mo id="alg2.l1.m1.2.2.1.1.1d" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.7" xref="alg2.l1.m1.2.2.1.1.7.cmml">e</mi><mo id="alg2.l1.m1.2.2.1.1.1e" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.8" xref="alg2.l1.m1.2.2.1.1.8.cmml">d</mi><mo id="alg2.l1.m1.2.2.1.1.1f" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.9" xref="alg2.l1.m1.2.2.1.1.9.cmml">Q</mi><mo id="alg2.l1.m1.2.2.1.1.1g" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.10" xref="alg2.l1.m1.2.2.1.1.10.cmml">u</mi><mo id="alg2.l1.m1.2.2.1.1.1h" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.11" xref="alg2.l1.m1.2.2.1.1.11.cmml">e</mi><mo id="alg2.l1.m1.2.2.1.1.1i" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.12" xref="alg2.l1.m1.2.2.1.1.12.cmml">r</mi><mo id="alg2.l1.m1.2.2.1.1.1j" xref="alg2.l1.m1.2.2.1.1.1.cmml">⁢</mo><mi id="alg2.l1.m1.2.2.1.1.13" xref="alg2.l1.m1.2.2.1.1.13.cmml">y</mi></mrow><mo id="alg2.l1.m1.3.3.2.3" xref="alg2.l1.m1.3.3.3.cmml">,</mo><mi id="alg2.l1.m1.1.1" xref="alg2.l1.m1.1.1.cmml">N</mi><mo id="alg2.l1.m1.3.3.2.4" xref="alg2.l1.m1.3.3.3.cmml">,</mo><mrow id="alg2.l1.m1.3.3.2.2" xref="alg2.l1.m1.3.3.2.2.cmml"><mi id="alg2.l1.m1.3.3.2.2.2" xref="alg2.l1.m1.3.3.2.2.2.cmml">I</mi><mo id="alg2.l1.m1.3.3.2.2.1" xref="alg2.l1.m1.3.3.2.2.1.cmml">⁢</mo><mi id="alg2.l1.m1.3.3.2.2.3" xref="alg2.l1.m1.3.3.2.2.3.cmml">n</mi><mo id="alg2.l1.m1.3.3.2.2.1a" xref="alg2.l1.m1.3.3.2.2.1.cmml">⁢</mo><mi id="alg2.l1.m1.3.3.2.2.4" xref="alg2.l1.m1.3.3.2.2.4.cmml">d</mi><mo id="alg2.l1.m1.3.3.2.2.1b" xref="alg2.l1.m1.3.3.2.2.1.cmml">⁢</mo><mi id="alg2.l1.m1.3.3.2.2.5" xref="alg2.l1.m1.3.3.2.2.5.cmml">e</mi><mo id="alg2.l1.m1.3.3.2.2.1c" xref="alg2.l1.m1.3.3.2.2.1.cmml">⁢</mo><mi id="alg2.l1.m1.3.3.2.2.6" xref="alg2.l1.m1.3.3.2.2.6.cmml">x</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l1.m1.3b"><list id="alg2.l1.m1.3.3.3.cmml" xref="alg2.l1.m1.3.3.2"><apply id="alg2.l1.m1.2.2.1.1.cmml" xref="alg2.l1.m1.2.2.1.1"><times id="alg2.l1.m1.2.2.1.1.1.cmml" xref="alg2.l1.m1.2.2.1.1.1"></times><ci id="alg2.l1.m1.2.2.1.1.2.cmml" xref="alg2.l1.m1.2.2.1.1.2">𝐸</ci><ci id="alg2.l1.m1.2.2.1.1.3.cmml" xref="alg2.l1.m1.2.2.1.1.3">𝑛</ci><ci id="alg2.l1.m1.2.2.1.1.4.cmml" xref="alg2.l1.m1.2.2.1.1.4">𝑐</ci><ci id="alg2.l1.m1.2.2.1.1.5.cmml" xref="alg2.l1.m1.2.2.1.1.5">𝑜</ci><ci id="alg2.l1.m1.2.2.1.1.6.cmml" xref="alg2.l1.m1.2.2.1.1.6">𝑑</ci><ci id="alg2.l1.m1.2.2.1.1.7.cmml" xref="alg2.l1.m1.2.2.1.1.7">𝑒</ci><ci id="alg2.l1.m1.2.2.1.1.8.cmml" xref="alg2.l1.m1.2.2.1.1.8">𝑑</ci><ci id="alg2.l1.m1.2.2.1.1.9.cmml" xref="alg2.l1.m1.2.2.1.1.9">𝑄</ci><ci id="alg2.l1.m1.2.2.1.1.10.cmml" xref="alg2.l1.m1.2.2.1.1.10">𝑢</ci><ci id="alg2.l1.m1.2.2.1.1.11.cmml" xref="alg2.l1.m1.2.2.1.1.11">𝑒</ci><ci id="alg2.l1.m1.2.2.1.1.12.cmml" xref="alg2.l1.m1.2.2.1.1.12">𝑟</ci><ci id="alg2.l1.m1.2.2.1.1.13.cmml" xref="alg2.l1.m1.2.2.1.1.13">𝑦</ci></apply><ci id="alg2.l1.m1.1.1.cmml" xref="alg2.l1.m1.1.1">𝑁</ci><apply id="alg2.l1.m1.3.3.2.2.cmml" xref="alg2.l1.m1.3.3.2.2"><times id="alg2.l1.m1.3.3.2.2.1.cmml" xref="alg2.l1.m1.3.3.2.2.1"></times><ci id="alg2.l1.m1.3.3.2.2.2.cmml" xref="alg2.l1.m1.3.3.2.2.2">𝐼</ci><ci id="alg2.l1.m1.3.3.2.2.3.cmml" xref="alg2.l1.m1.3.3.2.2.3">𝑛</ci><ci id="alg2.l1.m1.3.3.2.2.4.cmml" xref="alg2.l1.m1.3.3.2.2.4">𝑑</ci><ci id="alg2.l1.m1.3.3.2.2.5.cmml" xref="alg2.l1.m1.3.3.2.2.5">𝑒</ci><ci id="alg2.l1.m1.3.3.2.2.6.cmml" xref="alg2.l1.m1.3.3.2.2.6">𝑥</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg2.l1.m1.3c">EncodedQuery,N,Index</annotation><annotation encoding="application/x-llamapun" id="alg2.l1.m1.3d">italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y , italic_N , italic_I italic_n italic_d italic_e italic_x</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg2.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="QueryVector\leftarrow\text{NormalizeVector}(EncodedQuery)" class="ltx_Math" display="inline" id="alg2.l2.m1.1"><semantics id="alg2.l2.m1.1a"><mrow id="alg2.l2.m1.1.1" xref="alg2.l2.m1.1.1.cmml"><mrow id="alg2.l2.m1.1.1.3" xref="alg2.l2.m1.1.1.3.cmml"><mi id="alg2.l2.m1.1.1.3.2" xref="alg2.l2.m1.1.1.3.2.cmml">Q</mi><mo id="alg2.l2.m1.1.1.3.1" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.3" xref="alg2.l2.m1.1.1.3.3.cmml">u</mi><mo id="alg2.l2.m1.1.1.3.1a" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.4" xref="alg2.l2.m1.1.1.3.4.cmml">e</mi><mo id="alg2.l2.m1.1.1.3.1b" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.5" xref="alg2.l2.m1.1.1.3.5.cmml">r</mi><mo id="alg2.l2.m1.1.1.3.1c" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.6" xref="alg2.l2.m1.1.1.3.6.cmml">y</mi><mo id="alg2.l2.m1.1.1.3.1d" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.7" xref="alg2.l2.m1.1.1.3.7.cmml">V</mi><mo id="alg2.l2.m1.1.1.3.1e" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.8" xref="alg2.l2.m1.1.1.3.8.cmml">e</mi><mo id="alg2.l2.m1.1.1.3.1f" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.9" xref="alg2.l2.m1.1.1.3.9.cmml">c</mi><mo id="alg2.l2.m1.1.1.3.1g" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.10" xref="alg2.l2.m1.1.1.3.10.cmml">t</mi><mo id="alg2.l2.m1.1.1.3.1h" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.11" xref="alg2.l2.m1.1.1.3.11.cmml">o</mi><mo id="alg2.l2.m1.1.1.3.1i" xref="alg2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.3.12" xref="alg2.l2.m1.1.1.3.12.cmml">r</mi></mrow><mo id="alg2.l2.m1.1.1.2" stretchy="false" xref="alg2.l2.m1.1.1.2.cmml">←</mo><mrow id="alg2.l2.m1.1.1.1" xref="alg2.l2.m1.1.1.1.cmml"><mtext id="alg2.l2.m1.1.1.1.3" xref="alg2.l2.m1.1.1.1.3a.cmml">NormalizeVector</mtext><mo id="alg2.l2.m1.1.1.1.2" xref="alg2.l2.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg2.l2.m1.1.1.1.1.1" xref="alg2.l2.m1.1.1.1.1.1.1.cmml"><mo id="alg2.l2.m1.1.1.1.1.1.2" stretchy="false" xref="alg2.l2.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg2.l2.m1.1.1.1.1.1.1" xref="alg2.l2.m1.1.1.1.1.1.1.cmml"><mi id="alg2.l2.m1.1.1.1.1.1.1.2" xref="alg2.l2.m1.1.1.1.1.1.1.2.cmml">E</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.3" xref="alg2.l2.m1.1.1.1.1.1.1.3.cmml">n</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1a" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.4" xref="alg2.l2.m1.1.1.1.1.1.1.4.cmml">c</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1b" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.5" xref="alg2.l2.m1.1.1.1.1.1.1.5.cmml">o</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1c" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.6" xref="alg2.l2.m1.1.1.1.1.1.1.6.cmml">d</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1d" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.7" xref="alg2.l2.m1.1.1.1.1.1.1.7.cmml">e</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1e" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.8" xref="alg2.l2.m1.1.1.1.1.1.1.8.cmml">d</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1f" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.9" xref="alg2.l2.m1.1.1.1.1.1.1.9.cmml">Q</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1g" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.10" xref="alg2.l2.m1.1.1.1.1.1.1.10.cmml">u</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1h" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.11" xref="alg2.l2.m1.1.1.1.1.1.1.11.cmml">e</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1i" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.12" xref="alg2.l2.m1.1.1.1.1.1.1.12.cmml">r</mi><mo id="alg2.l2.m1.1.1.1.1.1.1.1j" xref="alg2.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l2.m1.1.1.1.1.1.1.13" xref="alg2.l2.m1.1.1.1.1.1.1.13.cmml">y</mi></mrow><mo id="alg2.l2.m1.1.1.1.1.1.3" stretchy="false" xref="alg2.l2.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l2.m1.1b"><apply id="alg2.l2.m1.1.1.cmml" xref="alg2.l2.m1.1.1"><ci id="alg2.l2.m1.1.1.2.cmml" xref="alg2.l2.m1.1.1.2">←</ci><apply id="alg2.l2.m1.1.1.3.cmml" xref="alg2.l2.m1.1.1.3"><times id="alg2.l2.m1.1.1.3.1.cmml" xref="alg2.l2.m1.1.1.3.1"></times><ci id="alg2.l2.m1.1.1.3.2.cmml" xref="alg2.l2.m1.1.1.3.2">𝑄</ci><ci id="alg2.l2.m1.1.1.3.3.cmml" xref="alg2.l2.m1.1.1.3.3">𝑢</ci><ci id="alg2.l2.m1.1.1.3.4.cmml" xref="alg2.l2.m1.1.1.3.4">𝑒</ci><ci id="alg2.l2.m1.1.1.3.5.cmml" xref="alg2.l2.m1.1.1.3.5">𝑟</ci><ci id="alg2.l2.m1.1.1.3.6.cmml" xref="alg2.l2.m1.1.1.3.6">𝑦</ci><ci id="alg2.l2.m1.1.1.3.7.cmml" xref="alg2.l2.m1.1.1.3.7">𝑉</ci><ci id="alg2.l2.m1.1.1.3.8.cmml" xref="alg2.l2.m1.1.1.3.8">𝑒</ci><ci id="alg2.l2.m1.1.1.3.9.cmml" xref="alg2.l2.m1.1.1.3.9">𝑐</ci><ci id="alg2.l2.m1.1.1.3.10.cmml" xref="alg2.l2.m1.1.1.3.10">𝑡</ci><ci id="alg2.l2.m1.1.1.3.11.cmml" xref="alg2.l2.m1.1.1.3.11">𝑜</ci><ci id="alg2.l2.m1.1.1.3.12.cmml" xref="alg2.l2.m1.1.1.3.12">𝑟</ci></apply><apply id="alg2.l2.m1.1.1.1.cmml" xref="alg2.l2.m1.1.1.1"><times id="alg2.l2.m1.1.1.1.2.cmml" xref="alg2.l2.m1.1.1.1.2"></times><ci id="alg2.l2.m1.1.1.1.3a.cmml" xref="alg2.l2.m1.1.1.1.3"><mtext id="alg2.l2.m1.1.1.1.3.cmml" xref="alg2.l2.m1.1.1.1.3">NormalizeVector</mtext></ci><apply id="alg2.l2.m1.1.1.1.1.1.1.cmml" xref="alg2.l2.m1.1.1.1.1.1"><times id="alg2.l2.m1.1.1.1.1.1.1.1.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.1"></times><ci id="alg2.l2.m1.1.1.1.1.1.1.2.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.2">𝐸</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.3.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.3">𝑛</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.4.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.4">𝑐</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.5.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.5">𝑜</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.6.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.6">𝑑</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.7.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.7">𝑒</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.8.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.8">𝑑</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.9.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.9">𝑄</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.10.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.10">𝑢</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.11.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.11">𝑒</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.12.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.12">𝑟</ci><ci id="alg2.l2.m1.1.1.1.1.1.1.13.cmml" xref="alg2.l2.m1.1.1.1.1.1.1.13">𝑦</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l2.m1.1c">QueryVector\leftarrow\text{NormalizeVector}(EncodedQuery)</annotation><annotation encoding="application/x-llamapun" id="alg2.l2.m1.1d">italic_Q italic_u italic_e italic_r italic_y italic_V italic_e italic_c italic_t italic_o italic_r ← NormalizeVector ( italic_E italic_n italic_c italic_o italic_d italic_e italic_d italic_Q italic_u italic_e italic_r italic_y )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math alttext="Candidates\leftarrow\text{ApproximateNearestNeighbors}(Index,QueryVector,k)" class="ltx_Math" display="inline" id="alg2.l3.m1.3"><semantics id="alg2.l3.m1.3a"><mrow id="alg2.l3.m1.3.3" xref="alg2.l3.m1.3.3.cmml"><mrow id="alg2.l3.m1.3.3.4" xref="alg2.l3.m1.3.3.4.cmml"><mi id="alg2.l3.m1.3.3.4.2" xref="alg2.l3.m1.3.3.4.2.cmml">C</mi><mo id="alg2.l3.m1.3.3.4.1" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.3" xref="alg2.l3.m1.3.3.4.3.cmml">a</mi><mo id="alg2.l3.m1.3.3.4.1a" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.4" xref="alg2.l3.m1.3.3.4.4.cmml">n</mi><mo id="alg2.l3.m1.3.3.4.1b" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.5" xref="alg2.l3.m1.3.3.4.5.cmml">d</mi><mo id="alg2.l3.m1.3.3.4.1c" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.6" xref="alg2.l3.m1.3.3.4.6.cmml">i</mi><mo id="alg2.l3.m1.3.3.4.1d" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.7" xref="alg2.l3.m1.3.3.4.7.cmml">d</mi><mo id="alg2.l3.m1.3.3.4.1e" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.8" xref="alg2.l3.m1.3.3.4.8.cmml">a</mi><mo id="alg2.l3.m1.3.3.4.1f" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.9" xref="alg2.l3.m1.3.3.4.9.cmml">t</mi><mo id="alg2.l3.m1.3.3.4.1g" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.10" xref="alg2.l3.m1.3.3.4.10.cmml">e</mi><mo id="alg2.l3.m1.3.3.4.1h" xref="alg2.l3.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.4.11" xref="alg2.l3.m1.3.3.4.11.cmml">s</mi></mrow><mo id="alg2.l3.m1.3.3.3" stretchy="false" xref="alg2.l3.m1.3.3.3.cmml">←</mo><mrow id="alg2.l3.m1.3.3.2" xref="alg2.l3.m1.3.3.2.cmml"><mtext id="alg2.l3.m1.3.3.2.4" xref="alg2.l3.m1.3.3.2.4a.cmml">ApproximateNearestNeighbors</mtext><mo id="alg2.l3.m1.3.3.2.3" xref="alg2.l3.m1.3.3.2.3.cmml">⁢</mo><mrow id="alg2.l3.m1.3.3.2.2.2" xref="alg2.l3.m1.3.3.2.2.3.cmml"><mo id="alg2.l3.m1.3.3.2.2.2.3" stretchy="false" xref="alg2.l3.m1.3.3.2.2.3.cmml">(</mo><mrow id="alg2.l3.m1.2.2.1.1.1.1" xref="alg2.l3.m1.2.2.1.1.1.1.cmml"><mi id="alg2.l3.m1.2.2.1.1.1.1.2" xref="alg2.l3.m1.2.2.1.1.1.1.2.cmml">I</mi><mo id="alg2.l3.m1.2.2.1.1.1.1.1" xref="alg2.l3.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l3.m1.2.2.1.1.1.1.3" xref="alg2.l3.m1.2.2.1.1.1.1.3.cmml">n</mi><mo id="alg2.l3.m1.2.2.1.1.1.1.1a" xref="alg2.l3.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l3.m1.2.2.1.1.1.1.4" xref="alg2.l3.m1.2.2.1.1.1.1.4.cmml">d</mi><mo id="alg2.l3.m1.2.2.1.1.1.1.1b" xref="alg2.l3.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l3.m1.2.2.1.1.1.1.5" xref="alg2.l3.m1.2.2.1.1.1.1.5.cmml">e</mi><mo id="alg2.l3.m1.2.2.1.1.1.1.1c" xref="alg2.l3.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l3.m1.2.2.1.1.1.1.6" xref="alg2.l3.m1.2.2.1.1.1.1.6.cmml">x</mi></mrow><mo id="alg2.l3.m1.3.3.2.2.2.4" xref="alg2.l3.m1.3.3.2.2.3.cmml">,</mo><mrow id="alg2.l3.m1.3.3.2.2.2.2" xref="alg2.l3.m1.3.3.2.2.2.2.cmml"><mi id="alg2.l3.m1.3.3.2.2.2.2.2" xref="alg2.l3.m1.3.3.2.2.2.2.2.cmml">Q</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.3" xref="alg2.l3.m1.3.3.2.2.2.2.3.cmml">u</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1a" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.4" xref="alg2.l3.m1.3.3.2.2.2.2.4.cmml">e</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1b" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.5" xref="alg2.l3.m1.3.3.2.2.2.2.5.cmml">r</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1c" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.6" xref="alg2.l3.m1.3.3.2.2.2.2.6.cmml">y</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1d" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.7" xref="alg2.l3.m1.3.3.2.2.2.2.7.cmml">V</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1e" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.8" xref="alg2.l3.m1.3.3.2.2.2.2.8.cmml">e</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1f" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.9" xref="alg2.l3.m1.3.3.2.2.2.2.9.cmml">c</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1g" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.10" xref="alg2.l3.m1.3.3.2.2.2.2.10.cmml">t</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1h" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.11" xref="alg2.l3.m1.3.3.2.2.2.2.11.cmml">o</mi><mo id="alg2.l3.m1.3.3.2.2.2.2.1i" xref="alg2.l3.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l3.m1.3.3.2.2.2.2.12" xref="alg2.l3.m1.3.3.2.2.2.2.12.cmml">r</mi></mrow><mo id="alg2.l3.m1.3.3.2.2.2.5" xref="alg2.l3.m1.3.3.2.2.3.cmml">,</mo><mi id="alg2.l3.m1.1.1" xref="alg2.l3.m1.1.1.cmml">k</mi><mo id="alg2.l3.m1.3.3.2.2.2.6" stretchy="false" xref="alg2.l3.m1.3.3.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l3.m1.3b"><apply id="alg2.l3.m1.3.3.cmml" xref="alg2.l3.m1.3.3"><ci id="alg2.l3.m1.3.3.3.cmml" xref="alg2.l3.m1.3.3.3">←</ci><apply id="alg2.l3.m1.3.3.4.cmml" xref="alg2.l3.m1.3.3.4"><times id="alg2.l3.m1.3.3.4.1.cmml" xref="alg2.l3.m1.3.3.4.1"></times><ci id="alg2.l3.m1.3.3.4.2.cmml" xref="alg2.l3.m1.3.3.4.2">𝐶</ci><ci id="alg2.l3.m1.3.3.4.3.cmml" xref="alg2.l3.m1.3.3.4.3">𝑎</ci><ci id="alg2.l3.m1.3.3.4.4.cmml" xref="alg2.l3.m1.3.3.4.4">𝑛</ci><ci id="alg2.l3.m1.3.3.4.5.cmml" xref="alg2.l3.m1.3.3.4.5">𝑑</ci><ci id="alg2.l3.m1.3.3.4.6.cmml" xref="alg2.l3.m1.3.3.4.6">𝑖</ci><ci id="alg2.l3.m1.3.3.4.7.cmml" xref="alg2.l3.m1.3.3.4.7">𝑑</ci><ci id="alg2.l3.m1.3.3.4.8.cmml" xref="alg2.l3.m1.3.3.4.8">𝑎</ci><ci id="alg2.l3.m1.3.3.4.9.cmml" xref="alg2.l3.m1.3.3.4.9">𝑡</ci><ci id="alg2.l3.m1.3.3.4.10.cmml" xref="alg2.l3.m1.3.3.4.10">𝑒</ci><ci id="alg2.l3.m1.3.3.4.11.cmml" xref="alg2.l3.m1.3.3.4.11">𝑠</ci></apply><apply id="alg2.l3.m1.3.3.2.cmml" xref="alg2.l3.m1.3.3.2"><times id="alg2.l3.m1.3.3.2.3.cmml" xref="alg2.l3.m1.3.3.2.3"></times><ci id="alg2.l3.m1.3.3.2.4a.cmml" xref="alg2.l3.m1.3.3.2.4"><mtext id="alg2.l3.m1.3.3.2.4.cmml" xref="alg2.l3.m1.3.3.2.4">ApproximateNearestNeighbors</mtext></ci><vector id="alg2.l3.m1.3.3.2.2.3.cmml" xref="alg2.l3.m1.3.3.2.2.2"><apply id="alg2.l3.m1.2.2.1.1.1.1.cmml" xref="alg2.l3.m1.2.2.1.1.1.1"><times id="alg2.l3.m1.2.2.1.1.1.1.1.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.1"></times><ci id="alg2.l3.m1.2.2.1.1.1.1.2.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.2">𝐼</ci><ci id="alg2.l3.m1.2.2.1.1.1.1.3.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.3">𝑛</ci><ci id="alg2.l3.m1.2.2.1.1.1.1.4.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.4">𝑑</ci><ci id="alg2.l3.m1.2.2.1.1.1.1.5.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.5">𝑒</ci><ci id="alg2.l3.m1.2.2.1.1.1.1.6.cmml" xref="alg2.l3.m1.2.2.1.1.1.1.6">𝑥</ci></apply><apply id="alg2.l3.m1.3.3.2.2.2.2.cmml" xref="alg2.l3.m1.3.3.2.2.2.2"><times id="alg2.l3.m1.3.3.2.2.2.2.1.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.1"></times><ci id="alg2.l3.m1.3.3.2.2.2.2.2.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.2">𝑄</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.3.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.3">𝑢</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.4.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.4">𝑒</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.5.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.5">𝑟</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.6.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.6">𝑦</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.7.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.7">𝑉</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.8.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.8">𝑒</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.9.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.9">𝑐</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.10.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.10">𝑡</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.11.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.11">𝑜</ci><ci id="alg2.l3.m1.3.3.2.2.2.2.12.cmml" xref="alg2.l3.m1.3.3.2.2.2.2.12">𝑟</ci></apply><ci id="alg2.l3.m1.1.1.cmml" xref="alg2.l3.m1.1.1">𝑘</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l3.m1.3c">Candidates\leftarrow\text{ApproximateNearestNeighbors}(Index,QueryVector,k)</annotation><annotation encoding="application/x-llamapun" id="alg2.l3.m1.3d">italic_C italic_a italic_n italic_d italic_i italic_d italic_a italic_t italic_e italic_s ← ApproximateNearestNeighbors ( italic_I italic_n italic_d italic_e italic_x , italic_Q italic_u italic_e italic_r italic_y italic_V italic_e italic_c italic_t italic_o italic_r , italic_k )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <math alttext="RankedCases\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg2.l4.m1.1"><semantics id="alg2.l4.m1.1a"><mrow id="alg2.l4.m1.1.1" xref="alg2.l4.m1.1.1.cmml"><mrow id="alg2.l4.m1.1.1.2" xref="alg2.l4.m1.1.1.2.cmml"><mi id="alg2.l4.m1.1.1.2.2" xref="alg2.l4.m1.1.1.2.2.cmml">R</mi><mo id="alg2.l4.m1.1.1.2.1" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.3" xref="alg2.l4.m1.1.1.2.3.cmml">a</mi><mo id="alg2.l4.m1.1.1.2.1a" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.4" xref="alg2.l4.m1.1.1.2.4.cmml">n</mi><mo id="alg2.l4.m1.1.1.2.1b" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.5" xref="alg2.l4.m1.1.1.2.5.cmml">k</mi><mo id="alg2.l4.m1.1.1.2.1c" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.6" xref="alg2.l4.m1.1.1.2.6.cmml">e</mi><mo id="alg2.l4.m1.1.1.2.1d" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.7" xref="alg2.l4.m1.1.1.2.7.cmml">d</mi><mo id="alg2.l4.m1.1.1.2.1e" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.8" xref="alg2.l4.m1.1.1.2.8.cmml">C</mi><mo id="alg2.l4.m1.1.1.2.1f" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.9" xref="alg2.l4.m1.1.1.2.9.cmml">a</mi><mo id="alg2.l4.m1.1.1.2.1g" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.10" xref="alg2.l4.m1.1.1.2.10.cmml">s</mi><mo id="alg2.l4.m1.1.1.2.1h" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.11" xref="alg2.l4.m1.1.1.2.11.cmml">e</mi><mo id="alg2.l4.m1.1.1.2.1i" xref="alg2.l4.m1.1.1.2.1.cmml">⁢</mo><mi id="alg2.l4.m1.1.1.2.12" xref="alg2.l4.m1.1.1.2.12.cmml">s</mi></mrow><mo id="alg2.l4.m1.1.1.1" stretchy="false" xref="alg2.l4.m1.1.1.1.cmml">←</mo><mi id="alg2.l4.m1.1.1.3" mathvariant="normal" xref="alg2.l4.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.l4.m1.1b"><apply id="alg2.l4.m1.1.1.cmml" xref="alg2.l4.m1.1.1"><ci id="alg2.l4.m1.1.1.1.cmml" xref="alg2.l4.m1.1.1.1">←</ci><apply id="alg2.l4.m1.1.1.2.cmml" xref="alg2.l4.m1.1.1.2"><times id="alg2.l4.m1.1.1.2.1.cmml" xref="alg2.l4.m1.1.1.2.1"></times><ci id="alg2.l4.m1.1.1.2.2.cmml" xref="alg2.l4.m1.1.1.2.2">𝑅</ci><ci id="alg2.l4.m1.1.1.2.3.cmml" xref="alg2.l4.m1.1.1.2.3">𝑎</ci><ci id="alg2.l4.m1.1.1.2.4.cmml" xref="alg2.l4.m1.1.1.2.4">𝑛</ci><ci id="alg2.l4.m1.1.1.2.5.cmml" xref="alg2.l4.m1.1.1.2.5">𝑘</ci><ci id="alg2.l4.m1.1.1.2.6.cmml" xref="alg2.l4.m1.1.1.2.6">𝑒</ci><ci id="alg2.l4.m1.1.1.2.7.cmml" xref="alg2.l4.m1.1.1.2.7">𝑑</ci><ci id="alg2.l4.m1.1.1.2.8.cmml" xref="alg2.l4.m1.1.1.2.8">𝐶</ci><ci id="alg2.l4.m1.1.1.2.9.cmml" xref="alg2.l4.m1.1.1.2.9">𝑎</ci><ci id="alg2.l4.m1.1.1.2.10.cmml" xref="alg2.l4.m1.1.1.2.10">𝑠</ci><ci id="alg2.l4.m1.1.1.2.11.cmml" xref="alg2.l4.m1.1.1.2.11">𝑒</ci><ci id="alg2.l4.m1.1.1.2.12.cmml" xref="alg2.l4.m1.1.1.2.12">𝑠</ci></apply><emptyset id="alg2.l4.m1.1.1.3.cmml" xref="alg2.l4.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l4.m1.1c">RankedCases\leftarrow\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg2.l4.m1.1d">italic_R italic_a italic_n italic_k italic_e italic_d italic_C italic_a italic_s italic_e italic_s ← ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l5.1">for</span> each <math alttext="Case" class="ltx_Math" display="inline" id="alg2.l5.m1.1"><semantics id="alg2.l5.m1.1a"><mrow id="alg2.l5.m1.1.1" xref="alg2.l5.m1.1.1.cmml"><mi id="alg2.l5.m1.1.1.2" xref="alg2.l5.m1.1.1.2.cmml">C</mi><mo id="alg2.l5.m1.1.1.1" xref="alg2.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m1.1.1.3" xref="alg2.l5.m1.1.1.3.cmml">a</mi><mo id="alg2.l5.m1.1.1.1a" xref="alg2.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m1.1.1.4" xref="alg2.l5.m1.1.1.4.cmml">s</mi><mo id="alg2.l5.m1.1.1.1b" xref="alg2.l5.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m1.1.1.5" xref="alg2.l5.m1.1.1.5.cmml">e</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.l5.m1.1b"><apply id="alg2.l5.m1.1.1.cmml" xref="alg2.l5.m1.1.1"><times id="alg2.l5.m1.1.1.1.cmml" xref="alg2.l5.m1.1.1.1"></times><ci id="alg2.l5.m1.1.1.2.cmml" xref="alg2.l5.m1.1.1.2">𝐶</ci><ci id="alg2.l5.m1.1.1.3.cmml" xref="alg2.l5.m1.1.1.3">𝑎</ci><ci id="alg2.l5.m1.1.1.4.cmml" xref="alg2.l5.m1.1.1.4">𝑠</ci><ci id="alg2.l5.m1.1.1.5.cmml" xref="alg2.l5.m1.1.1.5">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l5.m1.1c">Case</annotation><annotation encoding="application/x-llamapun" id="alg2.l5.m1.1d">italic_C italic_a italic_s italic_e</annotation></semantics></math> in <math alttext="Candidates" class="ltx_Math" display="inline" id="alg2.l5.m2.1"><semantics id="alg2.l5.m2.1a"><mrow id="alg2.l5.m2.1.1" xref="alg2.l5.m2.1.1.cmml"><mi id="alg2.l5.m2.1.1.2" xref="alg2.l5.m2.1.1.2.cmml">C</mi><mo id="alg2.l5.m2.1.1.1" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.3" xref="alg2.l5.m2.1.1.3.cmml">a</mi><mo id="alg2.l5.m2.1.1.1a" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.4" xref="alg2.l5.m2.1.1.4.cmml">n</mi><mo id="alg2.l5.m2.1.1.1b" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.5" xref="alg2.l5.m2.1.1.5.cmml">d</mi><mo id="alg2.l5.m2.1.1.1c" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.6" xref="alg2.l5.m2.1.1.6.cmml">i</mi><mo id="alg2.l5.m2.1.1.1d" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.7" xref="alg2.l5.m2.1.1.7.cmml">d</mi><mo id="alg2.l5.m2.1.1.1e" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.8" xref="alg2.l5.m2.1.1.8.cmml">a</mi><mo id="alg2.l5.m2.1.1.1f" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.9" xref="alg2.l5.m2.1.1.9.cmml">t</mi><mo id="alg2.l5.m2.1.1.1g" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.10" xref="alg2.l5.m2.1.1.10.cmml">e</mi><mo id="alg2.l5.m2.1.1.1h" xref="alg2.l5.m2.1.1.1.cmml">⁢</mo><mi id="alg2.l5.m2.1.1.11" xref="alg2.l5.m2.1.1.11.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.l5.m2.1b"><apply id="alg2.l5.m2.1.1.cmml" xref="alg2.l5.m2.1.1"><times id="alg2.l5.m2.1.1.1.cmml" xref="alg2.l5.m2.1.1.1"></times><ci id="alg2.l5.m2.1.1.2.cmml" xref="alg2.l5.m2.1.1.2">𝐶</ci><ci id="alg2.l5.m2.1.1.3.cmml" xref="alg2.l5.m2.1.1.3">𝑎</ci><ci id="alg2.l5.m2.1.1.4.cmml" xref="alg2.l5.m2.1.1.4">𝑛</ci><ci id="alg2.l5.m2.1.1.5.cmml" xref="alg2.l5.m2.1.1.5">𝑑</ci><ci id="alg2.l5.m2.1.1.6.cmml" xref="alg2.l5.m2.1.1.6">𝑖</ci><ci id="alg2.l5.m2.1.1.7.cmml" xref="alg2.l5.m2.1.1.7">𝑑</ci><ci id="alg2.l5.m2.1.1.8.cmml" xref="alg2.l5.m2.1.1.8">𝑎</ci><ci id="alg2.l5.m2.1.1.9.cmml" xref="alg2.l5.m2.1.1.9">𝑡</ci><ci id="alg2.l5.m2.1.1.10.cmml" xref="alg2.l5.m2.1.1.10">𝑒</ci><ci id="alg2.l5.m2.1.1.11.cmml" xref="alg2.l5.m2.1.1.11">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l5.m2.1c">Candidates</annotation><annotation encoding="application/x-llamapun" id="alg2.l5.m2.1d">italic_C italic_a italic_n italic_d italic_i italic_d italic_a italic_t italic_e italic_s</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg2.l5.2">do</span>
</div>
<div class="ltx_listingline" id="alg2.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>         <math alttext="Similarity\leftarrow\text{CosineSimilarity}(QueryVector,Case.Vector)" class="ltx_math_unparsed" display="inline" id="alg2.l6.m1.1"><semantics id="alg2.l6.m1.1a"><mrow id="alg2.l6.m1.1b"><mi id="alg2.l6.m1.1.1">S</mi><mi id="alg2.l6.m1.1.2">i</mi><mi id="alg2.l6.m1.1.3">m</mi><mi id="alg2.l6.m1.1.4">i</mi><mi id="alg2.l6.m1.1.5">l</mi><mi id="alg2.l6.m1.1.6">a</mi><mi id="alg2.l6.m1.1.7">r</mi><mi id="alg2.l6.m1.1.8">i</mi><mi id="alg2.l6.m1.1.9">t</mi><mi id="alg2.l6.m1.1.10">y</mi><mo id="alg2.l6.m1.1.11" stretchy="false">←</mo><mtext id="alg2.l6.m1.1.12">CosineSimilarity</mtext><mrow id="alg2.l6.m1.1.13"><mo id="alg2.l6.m1.1.13.1" stretchy="false">(</mo><mi id="alg2.l6.m1.1.13.2">Q</mi><mi id="alg2.l6.m1.1.13.3">u</mi><mi id="alg2.l6.m1.1.13.4">e</mi><mi id="alg2.l6.m1.1.13.5">r</mi><mi id="alg2.l6.m1.1.13.6">y</mi><mi id="alg2.l6.m1.1.13.7">V</mi><mi id="alg2.l6.m1.1.13.8">e</mi><mi id="alg2.l6.m1.1.13.9">c</mi><mi id="alg2.l6.m1.1.13.10">t</mi><mi id="alg2.l6.m1.1.13.11">o</mi><mi id="alg2.l6.m1.1.13.12">r</mi><mo id="alg2.l6.m1.1.13.13">,</mo><mi id="alg2.l6.m1.1.13.14">C</mi><mi id="alg2.l6.m1.1.13.15">a</mi><mi id="alg2.l6.m1.1.13.16">s</mi><mi id="alg2.l6.m1.1.13.17">e</mi><mo id="alg2.l6.m1.1.13.18" lspace="0em" rspace="0.167em">.</mo><mi id="alg2.l6.m1.1.13.19">V</mi><mi id="alg2.l6.m1.1.13.20">e</mi><mi id="alg2.l6.m1.1.13.21">c</mi><mi id="alg2.l6.m1.1.13.22">t</mi><mi id="alg2.l6.m1.1.13.23">o</mi><mi id="alg2.l6.m1.1.13.24">r</mi><mo id="alg2.l6.m1.1.13.25" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg2.l6.m1.1c">Similarity\leftarrow\text{CosineSimilarity}(QueryVector,Case.Vector)</annotation><annotation encoding="application/x-llamapun" id="alg2.l6.m1.1d">italic_S italic_i italic_m italic_i italic_l italic_a italic_r italic_i italic_t italic_y ← CosineSimilarity ( italic_Q italic_u italic_e italic_r italic_y italic_V italic_e italic_c italic_t italic_o italic_r , italic_C italic_a italic_s italic_e . italic_V italic_e italic_c italic_t italic_o italic_r )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <math alttext="RankedCases.\text{insert}(\{Case,Similarity\})" class="ltx_Math" display="inline" id="alg2.l7.m1.2"><semantics id="alg2.l7.m1.2a"><mrow id="alg2.l7.m1.2.2.2" xref="alg2.l7.m1.2.2.3.cmml"><mrow id="alg2.l7.m1.1.1.1.1" xref="alg2.l7.m1.1.1.1.1.cmml"><mi id="alg2.l7.m1.1.1.1.1.2" xref="alg2.l7.m1.1.1.1.1.2.cmml">R</mi><mo id="alg2.l7.m1.1.1.1.1.1" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.3" xref="alg2.l7.m1.1.1.1.1.3.cmml">a</mi><mo id="alg2.l7.m1.1.1.1.1.1a" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.4" xref="alg2.l7.m1.1.1.1.1.4.cmml">n</mi><mo id="alg2.l7.m1.1.1.1.1.1b" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.5" xref="alg2.l7.m1.1.1.1.1.5.cmml">k</mi><mo id="alg2.l7.m1.1.1.1.1.1c" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.6" xref="alg2.l7.m1.1.1.1.1.6.cmml">e</mi><mo id="alg2.l7.m1.1.1.1.1.1d" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.7" xref="alg2.l7.m1.1.1.1.1.7.cmml">d</mi><mo id="alg2.l7.m1.1.1.1.1.1e" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.8" xref="alg2.l7.m1.1.1.1.1.8.cmml">C</mi><mo id="alg2.l7.m1.1.1.1.1.1f" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.9" xref="alg2.l7.m1.1.1.1.1.9.cmml">a</mi><mo id="alg2.l7.m1.1.1.1.1.1g" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.10" xref="alg2.l7.m1.1.1.1.1.10.cmml">s</mi><mo id="alg2.l7.m1.1.1.1.1.1h" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.11" xref="alg2.l7.m1.1.1.1.1.11.cmml">e</mi><mo id="alg2.l7.m1.1.1.1.1.1i" xref="alg2.l7.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.1.1.1.1.12" xref="alg2.l7.m1.1.1.1.1.12.cmml">s</mi></mrow><mo id="alg2.l7.m1.2.2.2.3" lspace="0em" rspace="0.167em" xref="alg2.l7.m1.2.2.3a.cmml">.</mo><mrow id="alg2.l7.m1.2.2.2.2" xref="alg2.l7.m1.2.2.2.2.cmml"><mtext id="alg2.l7.m1.2.2.2.2.3" xref="alg2.l7.m1.2.2.2.2.3a.cmml">insert</mtext><mo id="alg2.l7.m1.2.2.2.2.2" xref="alg2.l7.m1.2.2.2.2.2.cmml">⁢</mo><mrow id="alg2.l7.m1.2.2.2.2.1.1" xref="alg2.l7.m1.2.2.2.2.cmml"><mo id="alg2.l7.m1.2.2.2.2.1.1.2" stretchy="false" xref="alg2.l7.m1.2.2.2.2.cmml">(</mo><mrow id="alg2.l7.m1.2.2.2.2.1.1.1.2" xref="alg2.l7.m1.2.2.2.2.1.1.1.3.cmml"><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.3" stretchy="false" xref="alg2.l7.m1.2.2.2.2.1.1.1.3.cmml">{</mo><mrow id="alg2.l7.m1.2.2.2.2.1.1.1.1.1" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.cmml"><mi id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.2" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.2.cmml">C</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.3" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.3.cmml">a</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1a" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.4" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.4.cmml">s</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1b" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.5" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.5.cmml">e</mi></mrow><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.4" xref="alg2.l7.m1.2.2.2.2.1.1.1.3.cmml">,</mo><mrow id="alg2.l7.m1.2.2.2.2.1.1.1.2.2" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.cmml"><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.2" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.2.cmml">S</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.3" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.3.cmml">i</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1a" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.4" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.4.cmml">m</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1b" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.5" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.5.cmml">i</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1c" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.6" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.6.cmml">l</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1d" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.7" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.7.cmml">a</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1e" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.8" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.8.cmml">r</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1f" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.9" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.9.cmml">i</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1g" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.10" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.10.cmml">t</mi><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1h" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml">⁢</mo><mi id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.11" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.11.cmml">y</mi></mrow><mo id="alg2.l7.m1.2.2.2.2.1.1.1.2.5" stretchy="false" xref="alg2.l7.m1.2.2.2.2.1.1.1.3.cmml">}</mo></mrow><mo id="alg2.l7.m1.2.2.2.2.1.1.3" stretchy="false" xref="alg2.l7.m1.2.2.2.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l7.m1.2b"><apply id="alg2.l7.m1.2.2.3.cmml" xref="alg2.l7.m1.2.2.2"><csymbol cd="ambiguous" id="alg2.l7.m1.2.2.3a.cmml" xref="alg2.l7.m1.2.2.2.3">formulae-sequence</csymbol><apply id="alg2.l7.m1.1.1.1.1.cmml" xref="alg2.l7.m1.1.1.1.1"><times id="alg2.l7.m1.1.1.1.1.1.cmml" xref="alg2.l7.m1.1.1.1.1.1"></times><ci id="alg2.l7.m1.1.1.1.1.2.cmml" xref="alg2.l7.m1.1.1.1.1.2">𝑅</ci><ci id="alg2.l7.m1.1.1.1.1.3.cmml" xref="alg2.l7.m1.1.1.1.1.3">𝑎</ci><ci id="alg2.l7.m1.1.1.1.1.4.cmml" xref="alg2.l7.m1.1.1.1.1.4">𝑛</ci><ci id="alg2.l7.m1.1.1.1.1.5.cmml" xref="alg2.l7.m1.1.1.1.1.5">𝑘</ci><ci id="alg2.l7.m1.1.1.1.1.6.cmml" xref="alg2.l7.m1.1.1.1.1.6">𝑒</ci><ci id="alg2.l7.m1.1.1.1.1.7.cmml" xref="alg2.l7.m1.1.1.1.1.7">𝑑</ci><ci id="alg2.l7.m1.1.1.1.1.8.cmml" xref="alg2.l7.m1.1.1.1.1.8">𝐶</ci><ci id="alg2.l7.m1.1.1.1.1.9.cmml" xref="alg2.l7.m1.1.1.1.1.9">𝑎</ci><ci id="alg2.l7.m1.1.1.1.1.10.cmml" xref="alg2.l7.m1.1.1.1.1.10">𝑠</ci><ci id="alg2.l7.m1.1.1.1.1.11.cmml" xref="alg2.l7.m1.1.1.1.1.11">𝑒</ci><ci id="alg2.l7.m1.1.1.1.1.12.cmml" xref="alg2.l7.m1.1.1.1.1.12">𝑠</ci></apply><apply id="alg2.l7.m1.2.2.2.2.cmml" xref="alg2.l7.m1.2.2.2.2"><times id="alg2.l7.m1.2.2.2.2.2.cmml" xref="alg2.l7.m1.2.2.2.2.2"></times><ci id="alg2.l7.m1.2.2.2.2.3a.cmml" xref="alg2.l7.m1.2.2.2.2.3"><mtext id="alg2.l7.m1.2.2.2.2.3.cmml" xref="alg2.l7.m1.2.2.2.2.3">insert</mtext></ci><set id="alg2.l7.m1.2.2.2.2.1.1.1.3.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2"><apply id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1"><times id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.1"></times><ci id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.2.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.2">𝐶</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.3.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.3">𝑎</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.4.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.4">𝑠</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.1.1.5.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.1.1.5">𝑒</ci></apply><apply id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2"><times id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.1"></times><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.2.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.2">𝑆</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.3.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.3">𝑖</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.4.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.4">𝑚</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.5.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.5">𝑖</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.6.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.6">𝑙</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.7.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.7">𝑎</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.8.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.8">𝑟</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.9.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.9">𝑖</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.10.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.10">𝑡</ci><ci id="alg2.l7.m1.2.2.2.2.1.1.1.2.2.11.cmml" xref="alg2.l7.m1.2.2.2.2.1.1.1.2.2.11">𝑦</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l7.m1.2c">RankedCases.\text{insert}(\{Case,Similarity\})</annotation><annotation encoding="application/x-llamapun" id="alg2.l7.m1.2d">italic_R italic_a italic_n italic_k italic_e italic_d italic_C italic_a italic_s italic_e italic_s . insert ( { italic_C italic_a italic_s italic_e , italic_S italic_i italic_m italic_i italic_l italic_a italic_r italic_i italic_t italic_y } )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg2.l8.2">for</span>
</div>
<div class="ltx_listingline" id="alg2.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <math alttext="RankedCases\leftarrow\text{Sort}(RankedCases,\text{key=Similarity},\text{%
descending=True})" class="ltx_Math" display="inline" id="alg2.l9.m1.3"><semantics id="alg2.l9.m1.3a"><mrow id="alg2.l9.m1.3.3" xref="alg2.l9.m1.3.3.cmml"><mrow id="alg2.l9.m1.3.3.3" xref="alg2.l9.m1.3.3.3.cmml"><mi id="alg2.l9.m1.3.3.3.2" xref="alg2.l9.m1.3.3.3.2.cmml">R</mi><mo id="alg2.l9.m1.3.3.3.1" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.3" xref="alg2.l9.m1.3.3.3.3.cmml">a</mi><mo id="alg2.l9.m1.3.3.3.1a" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.4" xref="alg2.l9.m1.3.3.3.4.cmml">n</mi><mo id="alg2.l9.m1.3.3.3.1b" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.5" xref="alg2.l9.m1.3.3.3.5.cmml">k</mi><mo id="alg2.l9.m1.3.3.3.1c" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.6" xref="alg2.l9.m1.3.3.3.6.cmml">e</mi><mo id="alg2.l9.m1.3.3.3.1d" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.7" xref="alg2.l9.m1.3.3.3.7.cmml">d</mi><mo id="alg2.l9.m1.3.3.3.1e" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.8" xref="alg2.l9.m1.3.3.3.8.cmml">C</mi><mo id="alg2.l9.m1.3.3.3.1f" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.9" xref="alg2.l9.m1.3.3.3.9.cmml">a</mi><mo id="alg2.l9.m1.3.3.3.1g" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.10" xref="alg2.l9.m1.3.3.3.10.cmml">s</mi><mo id="alg2.l9.m1.3.3.3.1h" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.11" xref="alg2.l9.m1.3.3.3.11.cmml">e</mi><mo id="alg2.l9.m1.3.3.3.1i" xref="alg2.l9.m1.3.3.3.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.3.12" xref="alg2.l9.m1.3.3.3.12.cmml">s</mi></mrow><mo id="alg2.l9.m1.3.3.2" stretchy="false" xref="alg2.l9.m1.3.3.2.cmml">←</mo><mrow id="alg2.l9.m1.3.3.1" xref="alg2.l9.m1.3.3.1.cmml"><mtext id="alg2.l9.m1.3.3.1.3" xref="alg2.l9.m1.3.3.1.3a.cmml">Sort</mtext><mo id="alg2.l9.m1.3.3.1.2" xref="alg2.l9.m1.3.3.1.2.cmml">⁢</mo><mrow id="alg2.l9.m1.3.3.1.1.1" xref="alg2.l9.m1.3.3.1.1.2.cmml"><mo id="alg2.l9.m1.3.3.1.1.1.2" stretchy="false" xref="alg2.l9.m1.3.3.1.1.2.cmml">(</mo><mrow id="alg2.l9.m1.3.3.1.1.1.1" xref="alg2.l9.m1.3.3.1.1.1.1.cmml"><mi id="alg2.l9.m1.3.3.1.1.1.1.2" xref="alg2.l9.m1.3.3.1.1.1.1.2.cmml">R</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.3" xref="alg2.l9.m1.3.3.1.1.1.1.3.cmml">a</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1a" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.4" xref="alg2.l9.m1.3.3.1.1.1.1.4.cmml">n</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1b" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.5" xref="alg2.l9.m1.3.3.1.1.1.1.5.cmml">k</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1c" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.6" xref="alg2.l9.m1.3.3.1.1.1.1.6.cmml">e</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1d" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.7" xref="alg2.l9.m1.3.3.1.1.1.1.7.cmml">d</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1e" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.8" xref="alg2.l9.m1.3.3.1.1.1.1.8.cmml">C</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1f" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.9" xref="alg2.l9.m1.3.3.1.1.1.1.9.cmml">a</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1g" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.10" xref="alg2.l9.m1.3.3.1.1.1.1.10.cmml">s</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1h" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.11" xref="alg2.l9.m1.3.3.1.1.1.1.11.cmml">e</mi><mo id="alg2.l9.m1.3.3.1.1.1.1.1i" xref="alg2.l9.m1.3.3.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l9.m1.3.3.1.1.1.1.12" xref="alg2.l9.m1.3.3.1.1.1.1.12.cmml">s</mi></mrow><mo id="alg2.l9.m1.3.3.1.1.1.3" xref="alg2.l9.m1.3.3.1.1.2.cmml">,</mo><mtext id="alg2.l9.m1.1.1" xref="alg2.l9.m1.1.1a.cmml">key=Similarity</mtext><mo id="alg2.l9.m1.3.3.1.1.1.4" xref="alg2.l9.m1.3.3.1.1.2.cmml">,</mo><mtext id="alg2.l9.m1.2.2" xref="alg2.l9.m1.2.2a.cmml">descending=True</mtext><mo id="alg2.l9.m1.3.3.1.1.1.5" stretchy="false" xref="alg2.l9.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l9.m1.3b"><apply id="alg2.l9.m1.3.3.cmml" xref="alg2.l9.m1.3.3"><ci id="alg2.l9.m1.3.3.2.cmml" xref="alg2.l9.m1.3.3.2">←</ci><apply id="alg2.l9.m1.3.3.3.cmml" xref="alg2.l9.m1.3.3.3"><times id="alg2.l9.m1.3.3.3.1.cmml" xref="alg2.l9.m1.3.3.3.1"></times><ci id="alg2.l9.m1.3.3.3.2.cmml" xref="alg2.l9.m1.3.3.3.2">𝑅</ci><ci id="alg2.l9.m1.3.3.3.3.cmml" xref="alg2.l9.m1.3.3.3.3">𝑎</ci><ci id="alg2.l9.m1.3.3.3.4.cmml" xref="alg2.l9.m1.3.3.3.4">𝑛</ci><ci id="alg2.l9.m1.3.3.3.5.cmml" xref="alg2.l9.m1.3.3.3.5">𝑘</ci><ci id="alg2.l9.m1.3.3.3.6.cmml" xref="alg2.l9.m1.3.3.3.6">𝑒</ci><ci id="alg2.l9.m1.3.3.3.7.cmml" xref="alg2.l9.m1.3.3.3.7">𝑑</ci><ci id="alg2.l9.m1.3.3.3.8.cmml" xref="alg2.l9.m1.3.3.3.8">𝐶</ci><ci id="alg2.l9.m1.3.3.3.9.cmml" xref="alg2.l9.m1.3.3.3.9">𝑎</ci><ci id="alg2.l9.m1.3.3.3.10.cmml" xref="alg2.l9.m1.3.3.3.10">𝑠</ci><ci id="alg2.l9.m1.3.3.3.11.cmml" xref="alg2.l9.m1.3.3.3.11">𝑒</ci><ci id="alg2.l9.m1.3.3.3.12.cmml" xref="alg2.l9.m1.3.3.3.12">𝑠</ci></apply><apply id="alg2.l9.m1.3.3.1.cmml" xref="alg2.l9.m1.3.3.1"><times id="alg2.l9.m1.3.3.1.2.cmml" xref="alg2.l9.m1.3.3.1.2"></times><ci id="alg2.l9.m1.3.3.1.3a.cmml" xref="alg2.l9.m1.3.3.1.3"><mtext id="alg2.l9.m1.3.3.1.3.cmml" xref="alg2.l9.m1.3.3.1.3">Sort</mtext></ci><vector id="alg2.l9.m1.3.3.1.1.2.cmml" xref="alg2.l9.m1.3.3.1.1.1"><apply id="alg2.l9.m1.3.3.1.1.1.1.cmml" xref="alg2.l9.m1.3.3.1.1.1.1"><times id="alg2.l9.m1.3.3.1.1.1.1.1.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.1"></times><ci id="alg2.l9.m1.3.3.1.1.1.1.2.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.2">𝑅</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.3.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.3">𝑎</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.4.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.4">𝑛</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.5.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.5">𝑘</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.6.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.6">𝑒</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.7.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.7">𝑑</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.8.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.8">𝐶</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.9.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.9">𝑎</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.10.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.10">𝑠</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.11.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.11">𝑒</ci><ci id="alg2.l9.m1.3.3.1.1.1.1.12.cmml" xref="alg2.l9.m1.3.3.1.1.1.1.12">𝑠</ci></apply><ci id="alg2.l9.m1.1.1a.cmml" xref="alg2.l9.m1.1.1"><mtext id="alg2.l9.m1.1.1.cmml" xref="alg2.l9.m1.1.1">key=Similarity</mtext></ci><ci id="alg2.l9.m1.2.2a.cmml" xref="alg2.l9.m1.2.2"><mtext id="alg2.l9.m1.2.2.cmml" xref="alg2.l9.m1.2.2">descending=True</mtext></ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l9.m1.3c">RankedCases\leftarrow\text{Sort}(RankedCases,\text{key=Similarity},\text{%
descending=True})</annotation><annotation encoding="application/x-llamapun" id="alg2.l9.m1.3d">italic_R italic_a italic_n italic_k italic_e italic_d italic_C italic_a italic_s italic_e italic_s ← Sort ( italic_R italic_a italic_n italic_k italic_e italic_d italic_C italic_a italic_s italic_e italic_s , key=Similarity , descending=True )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <math alttext="DiverseResults\leftarrow\text{ApplyMMR}(RankedCases,QueryVector,N)" class="ltx_Math" display="inline" id="alg2.l10.m1.3"><semantics id="alg2.l10.m1.3a"><mrow id="alg2.l10.m1.3.3" xref="alg2.l10.m1.3.3.cmml"><mrow id="alg2.l10.m1.3.3.4" xref="alg2.l10.m1.3.3.4.cmml"><mi id="alg2.l10.m1.3.3.4.2" xref="alg2.l10.m1.3.3.4.2.cmml">D</mi><mo id="alg2.l10.m1.3.3.4.1" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.3" xref="alg2.l10.m1.3.3.4.3.cmml">i</mi><mo id="alg2.l10.m1.3.3.4.1a" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.4" xref="alg2.l10.m1.3.3.4.4.cmml">v</mi><mo id="alg2.l10.m1.3.3.4.1b" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.5" xref="alg2.l10.m1.3.3.4.5.cmml">e</mi><mo id="alg2.l10.m1.3.3.4.1c" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.6" xref="alg2.l10.m1.3.3.4.6.cmml">r</mi><mo id="alg2.l10.m1.3.3.4.1d" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.7" xref="alg2.l10.m1.3.3.4.7.cmml">s</mi><mo id="alg2.l10.m1.3.3.4.1e" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.8" xref="alg2.l10.m1.3.3.4.8.cmml">e</mi><mo id="alg2.l10.m1.3.3.4.1f" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.9" xref="alg2.l10.m1.3.3.4.9.cmml">R</mi><mo id="alg2.l10.m1.3.3.4.1g" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.10" xref="alg2.l10.m1.3.3.4.10.cmml">e</mi><mo id="alg2.l10.m1.3.3.4.1h" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.11" xref="alg2.l10.m1.3.3.4.11.cmml">s</mi><mo id="alg2.l10.m1.3.3.4.1i" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.12" xref="alg2.l10.m1.3.3.4.12.cmml">u</mi><mo id="alg2.l10.m1.3.3.4.1j" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.13" xref="alg2.l10.m1.3.3.4.13.cmml">l</mi><mo id="alg2.l10.m1.3.3.4.1k" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.14" xref="alg2.l10.m1.3.3.4.14.cmml">t</mi><mo id="alg2.l10.m1.3.3.4.1l" xref="alg2.l10.m1.3.3.4.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.4.15" xref="alg2.l10.m1.3.3.4.15.cmml">s</mi></mrow><mo id="alg2.l10.m1.3.3.3" stretchy="false" xref="alg2.l10.m1.3.3.3.cmml">←</mo><mrow id="alg2.l10.m1.3.3.2" xref="alg2.l10.m1.3.3.2.cmml"><mtext id="alg2.l10.m1.3.3.2.4" xref="alg2.l10.m1.3.3.2.4a.cmml">ApplyMMR</mtext><mo id="alg2.l10.m1.3.3.2.3" xref="alg2.l10.m1.3.3.2.3.cmml">⁢</mo><mrow id="alg2.l10.m1.3.3.2.2.2" xref="alg2.l10.m1.3.3.2.2.3.cmml"><mo id="alg2.l10.m1.3.3.2.2.2.3" stretchy="false" xref="alg2.l10.m1.3.3.2.2.3.cmml">(</mo><mrow id="alg2.l10.m1.2.2.1.1.1.1" xref="alg2.l10.m1.2.2.1.1.1.1.cmml"><mi id="alg2.l10.m1.2.2.1.1.1.1.2" xref="alg2.l10.m1.2.2.1.1.1.1.2.cmml">R</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.3" xref="alg2.l10.m1.2.2.1.1.1.1.3.cmml">a</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1a" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.4" xref="alg2.l10.m1.2.2.1.1.1.1.4.cmml">n</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1b" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.5" xref="alg2.l10.m1.2.2.1.1.1.1.5.cmml">k</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1c" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.6" xref="alg2.l10.m1.2.2.1.1.1.1.6.cmml">e</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1d" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.7" xref="alg2.l10.m1.2.2.1.1.1.1.7.cmml">d</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1e" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.8" xref="alg2.l10.m1.2.2.1.1.1.1.8.cmml">C</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1f" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.9" xref="alg2.l10.m1.2.2.1.1.1.1.9.cmml">a</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1g" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.10" xref="alg2.l10.m1.2.2.1.1.1.1.10.cmml">s</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1h" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.11" xref="alg2.l10.m1.2.2.1.1.1.1.11.cmml">e</mi><mo id="alg2.l10.m1.2.2.1.1.1.1.1i" xref="alg2.l10.m1.2.2.1.1.1.1.1.cmml">⁢</mo><mi id="alg2.l10.m1.2.2.1.1.1.1.12" xref="alg2.l10.m1.2.2.1.1.1.1.12.cmml">s</mi></mrow><mo id="alg2.l10.m1.3.3.2.2.2.4" xref="alg2.l10.m1.3.3.2.2.3.cmml">,</mo><mrow id="alg2.l10.m1.3.3.2.2.2.2" xref="alg2.l10.m1.3.3.2.2.2.2.cmml"><mi id="alg2.l10.m1.3.3.2.2.2.2.2" xref="alg2.l10.m1.3.3.2.2.2.2.2.cmml">Q</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.3" xref="alg2.l10.m1.3.3.2.2.2.2.3.cmml">u</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1a" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.4" xref="alg2.l10.m1.3.3.2.2.2.2.4.cmml">e</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1b" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.5" xref="alg2.l10.m1.3.3.2.2.2.2.5.cmml">r</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1c" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.6" xref="alg2.l10.m1.3.3.2.2.2.2.6.cmml">y</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1d" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.7" xref="alg2.l10.m1.3.3.2.2.2.2.7.cmml">V</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1e" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.8" xref="alg2.l10.m1.3.3.2.2.2.2.8.cmml">e</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1f" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.9" xref="alg2.l10.m1.3.3.2.2.2.2.9.cmml">c</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1g" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.10" xref="alg2.l10.m1.3.3.2.2.2.2.10.cmml">t</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1h" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.11" xref="alg2.l10.m1.3.3.2.2.2.2.11.cmml">o</mi><mo id="alg2.l10.m1.3.3.2.2.2.2.1i" xref="alg2.l10.m1.3.3.2.2.2.2.1.cmml">⁢</mo><mi id="alg2.l10.m1.3.3.2.2.2.2.12" xref="alg2.l10.m1.3.3.2.2.2.2.12.cmml">r</mi></mrow><mo id="alg2.l10.m1.3.3.2.2.2.5" xref="alg2.l10.m1.3.3.2.2.3.cmml">,</mo><mi id="alg2.l10.m1.1.1" xref="alg2.l10.m1.1.1.cmml">N</mi><mo id="alg2.l10.m1.3.3.2.2.2.6" stretchy="false" xref="alg2.l10.m1.3.3.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l10.m1.3b"><apply id="alg2.l10.m1.3.3.cmml" xref="alg2.l10.m1.3.3"><ci id="alg2.l10.m1.3.3.3.cmml" xref="alg2.l10.m1.3.3.3">←</ci><apply id="alg2.l10.m1.3.3.4.cmml" xref="alg2.l10.m1.3.3.4"><times id="alg2.l10.m1.3.3.4.1.cmml" xref="alg2.l10.m1.3.3.4.1"></times><ci id="alg2.l10.m1.3.3.4.2.cmml" xref="alg2.l10.m1.3.3.4.2">𝐷</ci><ci id="alg2.l10.m1.3.3.4.3.cmml" xref="alg2.l10.m1.3.3.4.3">𝑖</ci><ci id="alg2.l10.m1.3.3.4.4.cmml" xref="alg2.l10.m1.3.3.4.4">𝑣</ci><ci id="alg2.l10.m1.3.3.4.5.cmml" xref="alg2.l10.m1.3.3.4.5">𝑒</ci><ci id="alg2.l10.m1.3.3.4.6.cmml" xref="alg2.l10.m1.3.3.4.6">𝑟</ci><ci id="alg2.l10.m1.3.3.4.7.cmml" xref="alg2.l10.m1.3.3.4.7">𝑠</ci><ci id="alg2.l10.m1.3.3.4.8.cmml" xref="alg2.l10.m1.3.3.4.8">𝑒</ci><ci id="alg2.l10.m1.3.3.4.9.cmml" xref="alg2.l10.m1.3.3.4.9">𝑅</ci><ci id="alg2.l10.m1.3.3.4.10.cmml" xref="alg2.l10.m1.3.3.4.10">𝑒</ci><ci id="alg2.l10.m1.3.3.4.11.cmml" xref="alg2.l10.m1.3.3.4.11">𝑠</ci><ci id="alg2.l10.m1.3.3.4.12.cmml" xref="alg2.l10.m1.3.3.4.12">𝑢</ci><ci id="alg2.l10.m1.3.3.4.13.cmml" xref="alg2.l10.m1.3.3.4.13">𝑙</ci><ci id="alg2.l10.m1.3.3.4.14.cmml" xref="alg2.l10.m1.3.3.4.14">𝑡</ci><ci id="alg2.l10.m1.3.3.4.15.cmml" xref="alg2.l10.m1.3.3.4.15">𝑠</ci></apply><apply id="alg2.l10.m1.3.3.2.cmml" xref="alg2.l10.m1.3.3.2"><times id="alg2.l10.m1.3.3.2.3.cmml" xref="alg2.l10.m1.3.3.2.3"></times><ci id="alg2.l10.m1.3.3.2.4a.cmml" xref="alg2.l10.m1.3.3.2.4"><mtext id="alg2.l10.m1.3.3.2.4.cmml" xref="alg2.l10.m1.3.3.2.4">ApplyMMR</mtext></ci><vector id="alg2.l10.m1.3.3.2.2.3.cmml" xref="alg2.l10.m1.3.3.2.2.2"><apply id="alg2.l10.m1.2.2.1.1.1.1.cmml" xref="alg2.l10.m1.2.2.1.1.1.1"><times id="alg2.l10.m1.2.2.1.1.1.1.1.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.1"></times><ci id="alg2.l10.m1.2.2.1.1.1.1.2.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.2">𝑅</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.3.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.3">𝑎</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.4.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.4">𝑛</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.5.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.5">𝑘</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.6.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.6">𝑒</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.7.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.7">𝑑</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.8.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.8">𝐶</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.9.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.9">𝑎</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.10.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.10">𝑠</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.11.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.11">𝑒</ci><ci id="alg2.l10.m1.2.2.1.1.1.1.12.cmml" xref="alg2.l10.m1.2.2.1.1.1.1.12">𝑠</ci></apply><apply id="alg2.l10.m1.3.3.2.2.2.2.cmml" xref="alg2.l10.m1.3.3.2.2.2.2"><times id="alg2.l10.m1.3.3.2.2.2.2.1.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.1"></times><ci id="alg2.l10.m1.3.3.2.2.2.2.2.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.2">𝑄</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.3.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.3">𝑢</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.4.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.4">𝑒</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.5.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.5">𝑟</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.6.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.6">𝑦</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.7.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.7">𝑉</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.8.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.8">𝑒</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.9.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.9">𝑐</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.10.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.10">𝑡</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.11.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.11">𝑜</ci><ci id="alg2.l10.m1.3.3.2.2.2.2.12.cmml" xref="alg2.l10.m1.3.3.2.2.2.2.12">𝑟</ci></apply><ci id="alg2.l10.m1.1.1.cmml" xref="alg2.l10.m1.1.1">𝑁</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l10.m1.3c">DiverseResults\leftarrow\text{ApplyMMR}(RankedCases,QueryVector,N)</annotation><annotation encoding="application/x-llamapun" id="alg2.l10.m1.3d">italic_D italic_i italic_v italic_e italic_r italic_s italic_e italic_R italic_e italic_s italic_u italic_l italic_t italic_s ← ApplyMMR ( italic_R italic_a italic_n italic_k italic_e italic_d italic_C italic_a italic_s italic_e italic_s , italic_Q italic_u italic_e italic_r italic_y italic_V italic_e italic_c italic_t italic_o italic_r , italic_N )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l11.1">return</span> <math alttext="DiverseResults" class="ltx_Math" display="inline" id="alg2.l11.m1.1"><semantics id="alg2.l11.m1.1a"><mrow id="alg2.l11.m1.1.1" xref="alg2.l11.m1.1.1.cmml"><mi id="alg2.l11.m1.1.1.2" xref="alg2.l11.m1.1.1.2.cmml">D</mi><mo id="alg2.l11.m1.1.1.1" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.3" xref="alg2.l11.m1.1.1.3.cmml">i</mi><mo id="alg2.l11.m1.1.1.1a" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.4" xref="alg2.l11.m1.1.1.4.cmml">v</mi><mo id="alg2.l11.m1.1.1.1b" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.5" xref="alg2.l11.m1.1.1.5.cmml">e</mi><mo id="alg2.l11.m1.1.1.1c" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.6" xref="alg2.l11.m1.1.1.6.cmml">r</mi><mo id="alg2.l11.m1.1.1.1d" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.7" xref="alg2.l11.m1.1.1.7.cmml">s</mi><mo id="alg2.l11.m1.1.1.1e" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.8" xref="alg2.l11.m1.1.1.8.cmml">e</mi><mo id="alg2.l11.m1.1.1.1f" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.9" xref="alg2.l11.m1.1.1.9.cmml">R</mi><mo id="alg2.l11.m1.1.1.1g" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.10" xref="alg2.l11.m1.1.1.10.cmml">e</mi><mo id="alg2.l11.m1.1.1.1h" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.11" xref="alg2.l11.m1.1.1.11.cmml">s</mi><mo id="alg2.l11.m1.1.1.1i" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.12" xref="alg2.l11.m1.1.1.12.cmml">u</mi><mo id="alg2.l11.m1.1.1.1j" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.13" xref="alg2.l11.m1.1.1.13.cmml">l</mi><mo id="alg2.l11.m1.1.1.1k" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.14" xref="alg2.l11.m1.1.1.14.cmml">t</mi><mo id="alg2.l11.m1.1.1.1l" xref="alg2.l11.m1.1.1.1.cmml">⁢</mo><mi id="alg2.l11.m1.1.1.15" xref="alg2.l11.m1.1.1.15.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.l11.m1.1b"><apply id="alg2.l11.m1.1.1.cmml" xref="alg2.l11.m1.1.1"><times id="alg2.l11.m1.1.1.1.cmml" xref="alg2.l11.m1.1.1.1"></times><ci id="alg2.l11.m1.1.1.2.cmml" xref="alg2.l11.m1.1.1.2">𝐷</ci><ci id="alg2.l11.m1.1.1.3.cmml" xref="alg2.l11.m1.1.1.3">𝑖</ci><ci id="alg2.l11.m1.1.1.4.cmml" xref="alg2.l11.m1.1.1.4">𝑣</ci><ci id="alg2.l11.m1.1.1.5.cmml" xref="alg2.l11.m1.1.1.5">𝑒</ci><ci id="alg2.l11.m1.1.1.6.cmml" xref="alg2.l11.m1.1.1.6">𝑟</ci><ci id="alg2.l11.m1.1.1.7.cmml" xref="alg2.l11.m1.1.1.7">𝑠</ci><ci id="alg2.l11.m1.1.1.8.cmml" xref="alg2.l11.m1.1.1.8">𝑒</ci><ci id="alg2.l11.m1.1.1.9.cmml" xref="alg2.l11.m1.1.1.9">𝑅</ci><ci id="alg2.l11.m1.1.1.10.cmml" xref="alg2.l11.m1.1.1.10">𝑒</ci><ci id="alg2.l11.m1.1.1.11.cmml" xref="alg2.l11.m1.1.1.11">𝑠</ci><ci id="alg2.l11.m1.1.1.12.cmml" xref="alg2.l11.m1.1.1.12">𝑢</ci><ci id="alg2.l11.m1.1.1.13.cmml" xref="alg2.l11.m1.1.1.13">𝑙</ci><ci id="alg2.l11.m1.1.1.14.cmml" xref="alg2.l11.m1.1.1.14">𝑡</ci><ci id="alg2.l11.m1.1.1.15.cmml" xref="alg2.l11.m1.1.1.15">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l11.m1.1c">DiverseResults</annotation><annotation encoding="application/x-llamapun" id="alg2.l11.m1.1d">italic_D italic_i italic_v italic_e italic_r italic_s italic_e italic_R italic_e italic_s italic_u italic_l italic_t italic_s</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span><span class="ltx_text ltx_font_bold" id="alg2.l12.1">end</span> <span class="ltx_text ltx_font_bold" id="alg2.l12.2">procedure</span>
</div>
</div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS2.p4">
<p class="ltx_p" id="S3.SS3.SSS2.p4.1">This advanced retrieval mechanism forms the cornerstone of CaseGPT’s ability to swiftly and accurately identify relevant cases, providing a robust foundation for subsequent insight generation and decision support. The synergy between the Dense Vector Index and the Semantic Search Algorithm enables CaseGPT to perform nuanced, context-aware case retrieval, significantly outperforming traditional keyword-based methods, particularly in handling complex, domain-specific queries in legal and medical contexts.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Insight Generation Module</h3>
<div class="ltx_para ltx_noindent" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">In developing CaseGPT, we realized that mere case retrieval, while useful, falls short of the analytical support legal and medical professionals often require. This realization led us to design the Insight Generation Module, a component that aims to bridge the gap between raw information retrieval and actionable insights. At its core, this module leverages Large Language Models (LLMs) to analyze retrieved cases in the context of the user’s query, generating recommendations and analyses that we hope will prove valuable in practice.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p2">
<p class="ltx_p" id="S3.SS4.p2.1">Our approach to insight generation builds on two main pillars: context aggregation and conditional text generation. The context aggregation process, which we admittedly found more challenging than initially anticipated, involves synthesizing information from the retrieved cases and the original query. We experimented with several summarization techniques before settling on a hybrid approach that seemed to strike a balance between capturing key details and maintaining readability. Query expansion also proved crucial, helping to capture related concepts that users might not explicitly mention but are often relevant to their needs.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p3">
<p class="ltx_p" id="S3.SS4.p3.1">One of the trickier aspects we encountered was determining how to weight different parts of the aggregated context. After much trial and error, we implemented a weighting scheme inspired by attention mechanisms in transformer models. While not perfect, this approach has shown promise in prioritizing the most pertinent information for insight generation.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p4">
<p class="ltx_p" id="S3.SS4.p4.1">The conditional generation process presented its own set of challenges. Constructing effective prompts for the LLM required numerous iterations and extensive testing. We found that the quality of generated insights could vary significantly based on subtle changes in prompt wording. This sensitivity to prompt design is an area we believe warrants further research.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p5">
<p class="ltx_p" id="S3.SS4.p5.1">To illustrate our process, we’ve included a simplified version of our insight generation algorithm <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#alg3" title="Algorithm 3 ‣ 3.4 Insight Generation Module ‣ 3 Methodology ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">3</span></a>:</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg3.2.1.1">Algorithm 3</span> </span> Insight Generation Process</figcaption>
<div class="ltx_listing ltx_listing" id="alg3.3">
<div class="ltx_listingline" id="alg3.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg3.l1.1">procedure</span> <span class="ltx_text ltx_font_smallcaps" id="alg3.l1.2">GenerateInsights</span>(<math alttext="Query,RetrievedCases" class="ltx_Math" display="inline" id="alg3.l1.m1.2"><semantics id="alg3.l1.m1.2a"><mrow id="alg3.l1.m1.2.2.2" xref="alg3.l1.m1.2.2.3.cmml"><mrow id="alg3.l1.m1.1.1.1.1" xref="alg3.l1.m1.1.1.1.1.cmml"><mi id="alg3.l1.m1.1.1.1.1.2" xref="alg3.l1.m1.1.1.1.1.2.cmml">Q</mi><mo id="alg3.l1.m1.1.1.1.1.1" xref="alg3.l1.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l1.m1.1.1.1.1.3" xref="alg3.l1.m1.1.1.1.1.3.cmml">u</mi><mo id="alg3.l1.m1.1.1.1.1.1a" xref="alg3.l1.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l1.m1.1.1.1.1.4" xref="alg3.l1.m1.1.1.1.1.4.cmml">e</mi><mo id="alg3.l1.m1.1.1.1.1.1b" xref="alg3.l1.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l1.m1.1.1.1.1.5" xref="alg3.l1.m1.1.1.1.1.5.cmml">r</mi><mo id="alg3.l1.m1.1.1.1.1.1c" xref="alg3.l1.m1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l1.m1.1.1.1.1.6" xref="alg3.l1.m1.1.1.1.1.6.cmml">y</mi></mrow><mo id="alg3.l1.m1.2.2.2.3" xref="alg3.l1.m1.2.2.3.cmml">,</mo><mrow id="alg3.l1.m1.2.2.2.2" xref="alg3.l1.m1.2.2.2.2.cmml"><mi id="alg3.l1.m1.2.2.2.2.2" xref="alg3.l1.m1.2.2.2.2.2.cmml">R</mi><mo id="alg3.l1.m1.2.2.2.2.1" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.3" xref="alg3.l1.m1.2.2.2.2.3.cmml">e</mi><mo id="alg3.l1.m1.2.2.2.2.1a" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.4" xref="alg3.l1.m1.2.2.2.2.4.cmml">t</mi><mo id="alg3.l1.m1.2.2.2.2.1b" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.5" xref="alg3.l1.m1.2.2.2.2.5.cmml">r</mi><mo id="alg3.l1.m1.2.2.2.2.1c" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.6" xref="alg3.l1.m1.2.2.2.2.6.cmml">i</mi><mo id="alg3.l1.m1.2.2.2.2.1d" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.7" xref="alg3.l1.m1.2.2.2.2.7.cmml">e</mi><mo id="alg3.l1.m1.2.2.2.2.1e" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.8" xref="alg3.l1.m1.2.2.2.2.8.cmml">v</mi><mo id="alg3.l1.m1.2.2.2.2.1f" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.9" xref="alg3.l1.m1.2.2.2.2.9.cmml">e</mi><mo id="alg3.l1.m1.2.2.2.2.1g" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.10" xref="alg3.l1.m1.2.2.2.2.10.cmml">d</mi><mo id="alg3.l1.m1.2.2.2.2.1h" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.11" xref="alg3.l1.m1.2.2.2.2.11.cmml">C</mi><mo id="alg3.l1.m1.2.2.2.2.1i" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.12" xref="alg3.l1.m1.2.2.2.2.12.cmml">a</mi><mo id="alg3.l1.m1.2.2.2.2.1j" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.13" xref="alg3.l1.m1.2.2.2.2.13.cmml">s</mi><mo id="alg3.l1.m1.2.2.2.2.1k" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.14" xref="alg3.l1.m1.2.2.2.2.14.cmml">e</mi><mo id="alg3.l1.m1.2.2.2.2.1l" xref="alg3.l1.m1.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l1.m1.2.2.2.2.15" xref="alg3.l1.m1.2.2.2.2.15.cmml">s</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l1.m1.2b"><list id="alg3.l1.m1.2.2.3.cmml" xref="alg3.l1.m1.2.2.2"><apply id="alg3.l1.m1.1.1.1.1.cmml" xref="alg3.l1.m1.1.1.1.1"><times id="alg3.l1.m1.1.1.1.1.1.cmml" xref="alg3.l1.m1.1.1.1.1.1"></times><ci id="alg3.l1.m1.1.1.1.1.2.cmml" xref="alg3.l1.m1.1.1.1.1.2">𝑄</ci><ci id="alg3.l1.m1.1.1.1.1.3.cmml" xref="alg3.l1.m1.1.1.1.1.3">𝑢</ci><ci id="alg3.l1.m1.1.1.1.1.4.cmml" xref="alg3.l1.m1.1.1.1.1.4">𝑒</ci><ci id="alg3.l1.m1.1.1.1.1.5.cmml" xref="alg3.l1.m1.1.1.1.1.5">𝑟</ci><ci id="alg3.l1.m1.1.1.1.1.6.cmml" xref="alg3.l1.m1.1.1.1.1.6">𝑦</ci></apply><apply id="alg3.l1.m1.2.2.2.2.cmml" xref="alg3.l1.m1.2.2.2.2"><times id="alg3.l1.m1.2.2.2.2.1.cmml" xref="alg3.l1.m1.2.2.2.2.1"></times><ci id="alg3.l1.m1.2.2.2.2.2.cmml" xref="alg3.l1.m1.2.2.2.2.2">𝑅</ci><ci id="alg3.l1.m1.2.2.2.2.3.cmml" xref="alg3.l1.m1.2.2.2.2.3">𝑒</ci><ci id="alg3.l1.m1.2.2.2.2.4.cmml" xref="alg3.l1.m1.2.2.2.2.4">𝑡</ci><ci id="alg3.l1.m1.2.2.2.2.5.cmml" xref="alg3.l1.m1.2.2.2.2.5">𝑟</ci><ci id="alg3.l1.m1.2.2.2.2.6.cmml" xref="alg3.l1.m1.2.2.2.2.6">𝑖</ci><ci id="alg3.l1.m1.2.2.2.2.7.cmml" xref="alg3.l1.m1.2.2.2.2.7">𝑒</ci><ci id="alg3.l1.m1.2.2.2.2.8.cmml" xref="alg3.l1.m1.2.2.2.2.8">𝑣</ci><ci id="alg3.l1.m1.2.2.2.2.9.cmml" xref="alg3.l1.m1.2.2.2.2.9">𝑒</ci><ci id="alg3.l1.m1.2.2.2.2.10.cmml" xref="alg3.l1.m1.2.2.2.2.10">𝑑</ci><ci id="alg3.l1.m1.2.2.2.2.11.cmml" xref="alg3.l1.m1.2.2.2.2.11">𝐶</ci><ci id="alg3.l1.m1.2.2.2.2.12.cmml" xref="alg3.l1.m1.2.2.2.2.12">𝑎</ci><ci id="alg3.l1.m1.2.2.2.2.13.cmml" xref="alg3.l1.m1.2.2.2.2.13">𝑠</ci><ci id="alg3.l1.m1.2.2.2.2.14.cmml" xref="alg3.l1.m1.2.2.2.2.14">𝑒</ci><ci id="alg3.l1.m1.2.2.2.2.15.cmml" xref="alg3.l1.m1.2.2.2.2.15">𝑠</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg3.l1.m1.2c">Query,RetrievedCases</annotation><annotation encoding="application/x-llamapun" id="alg3.l1.m1.2d">italic_Q italic_u italic_e italic_r italic_y , italic_R italic_e italic_t italic_r italic_i italic_e italic_v italic_e italic_d italic_C italic_a italic_s italic_e italic_s</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg3.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="Context\leftarrow\text{AggregateContext}(Query,RetrievedCases)" class="ltx_Math" display="inline" id="alg3.l2.m1.2"><semantics id="alg3.l2.m1.2a"><mrow id="alg3.l2.m1.2.2" xref="alg3.l2.m1.2.2.cmml"><mrow id="alg3.l2.m1.2.2.4" xref="alg3.l2.m1.2.2.4.cmml"><mi id="alg3.l2.m1.2.2.4.2" xref="alg3.l2.m1.2.2.4.2.cmml">C</mi><mo id="alg3.l2.m1.2.2.4.1" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.3" xref="alg3.l2.m1.2.2.4.3.cmml">o</mi><mo id="alg3.l2.m1.2.2.4.1a" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.4" xref="alg3.l2.m1.2.2.4.4.cmml">n</mi><mo id="alg3.l2.m1.2.2.4.1b" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.5" xref="alg3.l2.m1.2.2.4.5.cmml">t</mi><mo id="alg3.l2.m1.2.2.4.1c" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.6" xref="alg3.l2.m1.2.2.4.6.cmml">e</mi><mo id="alg3.l2.m1.2.2.4.1d" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.7" xref="alg3.l2.m1.2.2.4.7.cmml">x</mi><mo id="alg3.l2.m1.2.2.4.1e" xref="alg3.l2.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.4.8" xref="alg3.l2.m1.2.2.4.8.cmml">t</mi></mrow><mo id="alg3.l2.m1.2.2.3" stretchy="false" xref="alg3.l2.m1.2.2.3.cmml">←</mo><mrow id="alg3.l2.m1.2.2.2" xref="alg3.l2.m1.2.2.2.cmml"><mtext id="alg3.l2.m1.2.2.2.4" xref="alg3.l2.m1.2.2.2.4a.cmml">AggregateContext</mtext><mo id="alg3.l2.m1.2.2.2.3" xref="alg3.l2.m1.2.2.2.3.cmml">⁢</mo><mrow id="alg3.l2.m1.2.2.2.2.2" xref="alg3.l2.m1.2.2.2.2.3.cmml"><mo id="alg3.l2.m1.2.2.2.2.2.3" stretchy="false" xref="alg3.l2.m1.2.2.2.2.3.cmml">(</mo><mrow id="alg3.l2.m1.1.1.1.1.1.1" xref="alg3.l2.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l2.m1.1.1.1.1.1.1.2" xref="alg3.l2.m1.1.1.1.1.1.1.2.cmml">Q</mi><mo id="alg3.l2.m1.1.1.1.1.1.1.1" xref="alg3.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l2.m1.1.1.1.1.1.1.3" xref="alg3.l2.m1.1.1.1.1.1.1.3.cmml">u</mi><mo id="alg3.l2.m1.1.1.1.1.1.1.1a" xref="alg3.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l2.m1.1.1.1.1.1.1.4" xref="alg3.l2.m1.1.1.1.1.1.1.4.cmml">e</mi><mo id="alg3.l2.m1.1.1.1.1.1.1.1b" xref="alg3.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l2.m1.1.1.1.1.1.1.5" xref="alg3.l2.m1.1.1.1.1.1.1.5.cmml">r</mi><mo id="alg3.l2.m1.1.1.1.1.1.1.1c" xref="alg3.l2.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l2.m1.1.1.1.1.1.1.6" xref="alg3.l2.m1.1.1.1.1.1.1.6.cmml">y</mi></mrow><mo id="alg3.l2.m1.2.2.2.2.2.4" xref="alg3.l2.m1.2.2.2.2.3.cmml">,</mo><mrow id="alg3.l2.m1.2.2.2.2.2.2" xref="alg3.l2.m1.2.2.2.2.2.2.cmml"><mi id="alg3.l2.m1.2.2.2.2.2.2.2" xref="alg3.l2.m1.2.2.2.2.2.2.2.cmml">R</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.3" xref="alg3.l2.m1.2.2.2.2.2.2.3.cmml">e</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1a" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.4" xref="alg3.l2.m1.2.2.2.2.2.2.4.cmml">t</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1b" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.5" xref="alg3.l2.m1.2.2.2.2.2.2.5.cmml">r</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1c" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.6" xref="alg3.l2.m1.2.2.2.2.2.2.6.cmml">i</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1d" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.7" xref="alg3.l2.m1.2.2.2.2.2.2.7.cmml">e</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1e" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.8" xref="alg3.l2.m1.2.2.2.2.2.2.8.cmml">v</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1f" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.9" xref="alg3.l2.m1.2.2.2.2.2.2.9.cmml">e</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1g" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.10" xref="alg3.l2.m1.2.2.2.2.2.2.10.cmml">d</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1h" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.11" xref="alg3.l2.m1.2.2.2.2.2.2.11.cmml">C</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1i" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.12" xref="alg3.l2.m1.2.2.2.2.2.2.12.cmml">a</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1j" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.13" xref="alg3.l2.m1.2.2.2.2.2.2.13.cmml">s</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1k" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.14" xref="alg3.l2.m1.2.2.2.2.2.2.14.cmml">e</mi><mo id="alg3.l2.m1.2.2.2.2.2.2.1l" xref="alg3.l2.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l2.m1.2.2.2.2.2.2.15" xref="alg3.l2.m1.2.2.2.2.2.2.15.cmml">s</mi></mrow><mo id="alg3.l2.m1.2.2.2.2.2.5" stretchy="false" xref="alg3.l2.m1.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l2.m1.2b"><apply id="alg3.l2.m1.2.2.cmml" xref="alg3.l2.m1.2.2"><ci id="alg3.l2.m1.2.2.3.cmml" xref="alg3.l2.m1.2.2.3">←</ci><apply id="alg3.l2.m1.2.2.4.cmml" xref="alg3.l2.m1.2.2.4"><times id="alg3.l2.m1.2.2.4.1.cmml" xref="alg3.l2.m1.2.2.4.1"></times><ci id="alg3.l2.m1.2.2.4.2.cmml" xref="alg3.l2.m1.2.2.4.2">𝐶</ci><ci id="alg3.l2.m1.2.2.4.3.cmml" xref="alg3.l2.m1.2.2.4.3">𝑜</ci><ci id="alg3.l2.m1.2.2.4.4.cmml" xref="alg3.l2.m1.2.2.4.4">𝑛</ci><ci id="alg3.l2.m1.2.2.4.5.cmml" xref="alg3.l2.m1.2.2.4.5">𝑡</ci><ci id="alg3.l2.m1.2.2.4.6.cmml" xref="alg3.l2.m1.2.2.4.6">𝑒</ci><ci id="alg3.l2.m1.2.2.4.7.cmml" xref="alg3.l2.m1.2.2.4.7">𝑥</ci><ci id="alg3.l2.m1.2.2.4.8.cmml" xref="alg3.l2.m1.2.2.4.8">𝑡</ci></apply><apply id="alg3.l2.m1.2.2.2.cmml" xref="alg3.l2.m1.2.2.2"><times id="alg3.l2.m1.2.2.2.3.cmml" xref="alg3.l2.m1.2.2.2.3"></times><ci id="alg3.l2.m1.2.2.2.4a.cmml" xref="alg3.l2.m1.2.2.2.4"><mtext id="alg3.l2.m1.2.2.2.4.cmml" xref="alg3.l2.m1.2.2.2.4">AggregateContext</mtext></ci><interval closure="open" id="alg3.l2.m1.2.2.2.2.3.cmml" xref="alg3.l2.m1.2.2.2.2.2"><apply id="alg3.l2.m1.1.1.1.1.1.1.cmml" xref="alg3.l2.m1.1.1.1.1.1.1"><times id="alg3.l2.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.1"></times><ci id="alg3.l2.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.2">𝑄</ci><ci id="alg3.l2.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.3">𝑢</ci><ci id="alg3.l2.m1.1.1.1.1.1.1.4.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.4">𝑒</ci><ci id="alg3.l2.m1.1.1.1.1.1.1.5.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.5">𝑟</ci><ci id="alg3.l2.m1.1.1.1.1.1.1.6.cmml" xref="alg3.l2.m1.1.1.1.1.1.1.6">𝑦</ci></apply><apply id="alg3.l2.m1.2.2.2.2.2.2.cmml" xref="alg3.l2.m1.2.2.2.2.2.2"><times id="alg3.l2.m1.2.2.2.2.2.2.1.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.1"></times><ci id="alg3.l2.m1.2.2.2.2.2.2.2.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.2">𝑅</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.3.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.3">𝑒</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.4.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.4">𝑡</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.5.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.5">𝑟</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.6.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.6">𝑖</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.7.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.7">𝑒</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.8.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.8">𝑣</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.9.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.9">𝑒</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.10.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.10">𝑑</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.11.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.11">𝐶</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.12.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.12">𝑎</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.13.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.13">𝑠</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.14.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.14">𝑒</ci><ci id="alg3.l2.m1.2.2.2.2.2.2.15.cmml" xref="alg3.l2.m1.2.2.2.2.2.2.15">𝑠</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l2.m1.2c">Context\leftarrow\text{AggregateContext}(Query,RetrievedCases)</annotation><annotation encoding="application/x-llamapun" id="alg3.l2.m1.2d">italic_C italic_o italic_n italic_t italic_e italic_x italic_t ← AggregateContext ( italic_Q italic_u italic_e italic_r italic_y , italic_R italic_e italic_t italic_r italic_i italic_e italic_v italic_e italic_d italic_C italic_a italic_s italic_e italic_s )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math alttext="Prompt\leftarrow\text{ConstructPrompt}(Context)" class="ltx_Math" display="inline" id="alg3.l3.m1.1"><semantics id="alg3.l3.m1.1a"><mrow id="alg3.l3.m1.1.1" xref="alg3.l3.m1.1.1.cmml"><mrow id="alg3.l3.m1.1.1.3" xref="alg3.l3.m1.1.1.3.cmml"><mi id="alg3.l3.m1.1.1.3.2" xref="alg3.l3.m1.1.1.3.2.cmml">P</mi><mo id="alg3.l3.m1.1.1.3.1" xref="alg3.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.3.3" xref="alg3.l3.m1.1.1.3.3.cmml">r</mi><mo id="alg3.l3.m1.1.1.3.1a" xref="alg3.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.3.4" xref="alg3.l3.m1.1.1.3.4.cmml">o</mi><mo id="alg3.l3.m1.1.1.3.1b" xref="alg3.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.3.5" xref="alg3.l3.m1.1.1.3.5.cmml">m</mi><mo id="alg3.l3.m1.1.1.3.1c" xref="alg3.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.3.6" xref="alg3.l3.m1.1.1.3.6.cmml">p</mi><mo id="alg3.l3.m1.1.1.3.1d" xref="alg3.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.3.7" xref="alg3.l3.m1.1.1.3.7.cmml">t</mi></mrow><mo id="alg3.l3.m1.1.1.2" stretchy="false" xref="alg3.l3.m1.1.1.2.cmml">←</mo><mrow id="alg3.l3.m1.1.1.1" xref="alg3.l3.m1.1.1.1.cmml"><mtext id="alg3.l3.m1.1.1.1.3" xref="alg3.l3.m1.1.1.1.3a.cmml">ConstructPrompt</mtext><mo id="alg3.l3.m1.1.1.1.2" xref="alg3.l3.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg3.l3.m1.1.1.1.1.1" xref="alg3.l3.m1.1.1.1.1.1.1.cmml"><mo id="alg3.l3.m1.1.1.1.1.1.2" stretchy="false" xref="alg3.l3.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg3.l3.m1.1.1.1.1.1.1" xref="alg3.l3.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l3.m1.1.1.1.1.1.1.2" xref="alg3.l3.m1.1.1.1.1.1.1.2.cmml">C</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.3" xref="alg3.l3.m1.1.1.1.1.1.1.3.cmml">o</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1a" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.4" xref="alg3.l3.m1.1.1.1.1.1.1.4.cmml">n</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1b" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.5" xref="alg3.l3.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1c" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.6" xref="alg3.l3.m1.1.1.1.1.1.1.6.cmml">e</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1d" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.7" xref="alg3.l3.m1.1.1.1.1.1.1.7.cmml">x</mi><mo id="alg3.l3.m1.1.1.1.1.1.1.1e" xref="alg3.l3.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l3.m1.1.1.1.1.1.1.8" xref="alg3.l3.m1.1.1.1.1.1.1.8.cmml">t</mi></mrow><mo id="alg3.l3.m1.1.1.1.1.1.3" stretchy="false" xref="alg3.l3.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l3.m1.1b"><apply id="alg3.l3.m1.1.1.cmml" xref="alg3.l3.m1.1.1"><ci id="alg3.l3.m1.1.1.2.cmml" xref="alg3.l3.m1.1.1.2">←</ci><apply id="alg3.l3.m1.1.1.3.cmml" xref="alg3.l3.m1.1.1.3"><times id="alg3.l3.m1.1.1.3.1.cmml" xref="alg3.l3.m1.1.1.3.1"></times><ci id="alg3.l3.m1.1.1.3.2.cmml" xref="alg3.l3.m1.1.1.3.2">𝑃</ci><ci id="alg3.l3.m1.1.1.3.3.cmml" xref="alg3.l3.m1.1.1.3.3">𝑟</ci><ci id="alg3.l3.m1.1.1.3.4.cmml" xref="alg3.l3.m1.1.1.3.4">𝑜</ci><ci id="alg3.l3.m1.1.1.3.5.cmml" xref="alg3.l3.m1.1.1.3.5">𝑚</ci><ci id="alg3.l3.m1.1.1.3.6.cmml" xref="alg3.l3.m1.1.1.3.6">𝑝</ci><ci id="alg3.l3.m1.1.1.3.7.cmml" xref="alg3.l3.m1.1.1.3.7">𝑡</ci></apply><apply id="alg3.l3.m1.1.1.1.cmml" xref="alg3.l3.m1.1.1.1"><times id="alg3.l3.m1.1.1.1.2.cmml" xref="alg3.l3.m1.1.1.1.2"></times><ci id="alg3.l3.m1.1.1.1.3a.cmml" xref="alg3.l3.m1.1.1.1.3"><mtext id="alg3.l3.m1.1.1.1.3.cmml" xref="alg3.l3.m1.1.1.1.3">ConstructPrompt</mtext></ci><apply id="alg3.l3.m1.1.1.1.1.1.1.cmml" xref="alg3.l3.m1.1.1.1.1.1"><times id="alg3.l3.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.1"></times><ci id="alg3.l3.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.2">𝐶</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.3">𝑜</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.4.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.5.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.6.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.6">𝑒</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.7.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.7">𝑥</ci><ci id="alg3.l3.m1.1.1.1.1.1.1.8.cmml" xref="alg3.l3.m1.1.1.1.1.1.1.8">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l3.m1.1c">Prompt\leftarrow\text{ConstructPrompt}(Context)</annotation><annotation encoding="application/x-llamapun" id="alg3.l3.m1.1d">italic_P italic_r italic_o italic_m italic_p italic_t ← ConstructPrompt ( italic_C italic_o italic_n italic_t italic_e italic_x italic_t )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <math alttext="InitialInsights\leftarrow\text{LLMGenerate}(Prompt)" class="ltx_Math" display="inline" id="alg3.l4.m1.1"><semantics id="alg3.l4.m1.1a"><mrow id="alg3.l4.m1.1.1" xref="alg3.l4.m1.1.1.cmml"><mrow id="alg3.l4.m1.1.1.3" xref="alg3.l4.m1.1.1.3.cmml"><mi id="alg3.l4.m1.1.1.3.2" xref="alg3.l4.m1.1.1.3.2.cmml">I</mi><mo id="alg3.l4.m1.1.1.3.1" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.3" xref="alg3.l4.m1.1.1.3.3.cmml">n</mi><mo id="alg3.l4.m1.1.1.3.1a" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.4" xref="alg3.l4.m1.1.1.3.4.cmml">i</mi><mo id="alg3.l4.m1.1.1.3.1b" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.5" xref="alg3.l4.m1.1.1.3.5.cmml">t</mi><mo id="alg3.l4.m1.1.1.3.1c" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.6" xref="alg3.l4.m1.1.1.3.6.cmml">i</mi><mo id="alg3.l4.m1.1.1.3.1d" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.7" xref="alg3.l4.m1.1.1.3.7.cmml">a</mi><mo id="alg3.l4.m1.1.1.3.1e" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.8" xref="alg3.l4.m1.1.1.3.8.cmml">l</mi><mo id="alg3.l4.m1.1.1.3.1f" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.9" xref="alg3.l4.m1.1.1.3.9.cmml">I</mi><mo id="alg3.l4.m1.1.1.3.1g" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.10" xref="alg3.l4.m1.1.1.3.10.cmml">n</mi><mo id="alg3.l4.m1.1.1.3.1h" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.11" xref="alg3.l4.m1.1.1.3.11.cmml">s</mi><mo id="alg3.l4.m1.1.1.3.1i" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.12" xref="alg3.l4.m1.1.1.3.12.cmml">i</mi><mo id="alg3.l4.m1.1.1.3.1j" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.13" xref="alg3.l4.m1.1.1.3.13.cmml">g</mi><mo id="alg3.l4.m1.1.1.3.1k" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.14" xref="alg3.l4.m1.1.1.3.14.cmml">h</mi><mo id="alg3.l4.m1.1.1.3.1l" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.15" xref="alg3.l4.m1.1.1.3.15.cmml">t</mi><mo id="alg3.l4.m1.1.1.3.1m" xref="alg3.l4.m1.1.1.3.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.3.16" xref="alg3.l4.m1.1.1.3.16.cmml">s</mi></mrow><mo id="alg3.l4.m1.1.1.2" stretchy="false" xref="alg3.l4.m1.1.1.2.cmml">←</mo><mrow id="alg3.l4.m1.1.1.1" xref="alg3.l4.m1.1.1.1.cmml"><mtext id="alg3.l4.m1.1.1.1.3" xref="alg3.l4.m1.1.1.1.3a.cmml">LLMGenerate</mtext><mo id="alg3.l4.m1.1.1.1.2" xref="alg3.l4.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg3.l4.m1.1.1.1.1.1" xref="alg3.l4.m1.1.1.1.1.1.1.cmml"><mo id="alg3.l4.m1.1.1.1.1.1.2" stretchy="false" xref="alg3.l4.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg3.l4.m1.1.1.1.1.1.1" xref="alg3.l4.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l4.m1.1.1.1.1.1.1.2" xref="alg3.l4.m1.1.1.1.1.1.1.2.cmml">P</mi><mo id="alg3.l4.m1.1.1.1.1.1.1.1" xref="alg3.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.1.1.1.1.3" xref="alg3.l4.m1.1.1.1.1.1.1.3.cmml">r</mi><mo id="alg3.l4.m1.1.1.1.1.1.1.1a" xref="alg3.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.1.1.1.1.4" xref="alg3.l4.m1.1.1.1.1.1.1.4.cmml">o</mi><mo id="alg3.l4.m1.1.1.1.1.1.1.1b" xref="alg3.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.1.1.1.1.5" xref="alg3.l4.m1.1.1.1.1.1.1.5.cmml">m</mi><mo id="alg3.l4.m1.1.1.1.1.1.1.1c" xref="alg3.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.1.1.1.1.6" xref="alg3.l4.m1.1.1.1.1.1.1.6.cmml">p</mi><mo id="alg3.l4.m1.1.1.1.1.1.1.1d" xref="alg3.l4.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l4.m1.1.1.1.1.1.1.7" xref="alg3.l4.m1.1.1.1.1.1.1.7.cmml">t</mi></mrow><mo id="alg3.l4.m1.1.1.1.1.1.3" stretchy="false" xref="alg3.l4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l4.m1.1b"><apply id="alg3.l4.m1.1.1.cmml" xref="alg3.l4.m1.1.1"><ci id="alg3.l4.m1.1.1.2.cmml" xref="alg3.l4.m1.1.1.2">←</ci><apply id="alg3.l4.m1.1.1.3.cmml" xref="alg3.l4.m1.1.1.3"><times id="alg3.l4.m1.1.1.3.1.cmml" xref="alg3.l4.m1.1.1.3.1"></times><ci id="alg3.l4.m1.1.1.3.2.cmml" xref="alg3.l4.m1.1.1.3.2">𝐼</ci><ci id="alg3.l4.m1.1.1.3.3.cmml" xref="alg3.l4.m1.1.1.3.3">𝑛</ci><ci id="alg3.l4.m1.1.1.3.4.cmml" xref="alg3.l4.m1.1.1.3.4">𝑖</ci><ci id="alg3.l4.m1.1.1.3.5.cmml" xref="alg3.l4.m1.1.1.3.5">𝑡</ci><ci id="alg3.l4.m1.1.1.3.6.cmml" xref="alg3.l4.m1.1.1.3.6">𝑖</ci><ci id="alg3.l4.m1.1.1.3.7.cmml" xref="alg3.l4.m1.1.1.3.7">𝑎</ci><ci id="alg3.l4.m1.1.1.3.8.cmml" xref="alg3.l4.m1.1.1.3.8">𝑙</ci><ci id="alg3.l4.m1.1.1.3.9.cmml" xref="alg3.l4.m1.1.1.3.9">𝐼</ci><ci id="alg3.l4.m1.1.1.3.10.cmml" xref="alg3.l4.m1.1.1.3.10">𝑛</ci><ci id="alg3.l4.m1.1.1.3.11.cmml" xref="alg3.l4.m1.1.1.3.11">𝑠</ci><ci id="alg3.l4.m1.1.1.3.12.cmml" xref="alg3.l4.m1.1.1.3.12">𝑖</ci><ci id="alg3.l4.m1.1.1.3.13.cmml" xref="alg3.l4.m1.1.1.3.13">𝑔</ci><ci id="alg3.l4.m1.1.1.3.14.cmml" xref="alg3.l4.m1.1.1.3.14">ℎ</ci><ci id="alg3.l4.m1.1.1.3.15.cmml" xref="alg3.l4.m1.1.1.3.15">𝑡</ci><ci id="alg3.l4.m1.1.1.3.16.cmml" xref="alg3.l4.m1.1.1.3.16">𝑠</ci></apply><apply id="alg3.l4.m1.1.1.1.cmml" xref="alg3.l4.m1.1.1.1"><times id="alg3.l4.m1.1.1.1.2.cmml" xref="alg3.l4.m1.1.1.1.2"></times><ci id="alg3.l4.m1.1.1.1.3a.cmml" xref="alg3.l4.m1.1.1.1.3"><mtext id="alg3.l4.m1.1.1.1.3.cmml" xref="alg3.l4.m1.1.1.1.3">LLMGenerate</mtext></ci><apply id="alg3.l4.m1.1.1.1.1.1.1.cmml" xref="alg3.l4.m1.1.1.1.1.1"><times id="alg3.l4.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.1"></times><ci id="alg3.l4.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.2">𝑃</ci><ci id="alg3.l4.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.3">𝑟</ci><ci id="alg3.l4.m1.1.1.1.1.1.1.4.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.4">𝑜</ci><ci id="alg3.l4.m1.1.1.1.1.1.1.5.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.5">𝑚</ci><ci id="alg3.l4.m1.1.1.1.1.1.1.6.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.6">𝑝</ci><ci id="alg3.l4.m1.1.1.1.1.1.1.7.cmml" xref="alg3.l4.m1.1.1.1.1.1.1.7">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l4.m1.1c">InitialInsights\leftarrow\text{LLMGenerate}(Prompt)</annotation><annotation encoding="application/x-llamapun" id="alg3.l4.m1.1d">italic_I italic_n italic_i italic_t italic_i italic_a italic_l italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s ← LLMGenerate ( italic_P italic_r italic_o italic_m italic_p italic_t )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>     <math alttext="RefinedInsights\leftarrow\text{IterativeRefine}(InitialInsights,Context)" class="ltx_Math" display="inline" id="alg3.l5.m1.2"><semantics id="alg3.l5.m1.2a"><mrow id="alg3.l5.m1.2.2" xref="alg3.l5.m1.2.2.cmml"><mrow id="alg3.l5.m1.2.2.4" xref="alg3.l5.m1.2.2.4.cmml"><mi id="alg3.l5.m1.2.2.4.2" xref="alg3.l5.m1.2.2.4.2.cmml">R</mi><mo id="alg3.l5.m1.2.2.4.1" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.3" xref="alg3.l5.m1.2.2.4.3.cmml">e</mi><mo id="alg3.l5.m1.2.2.4.1a" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.4" xref="alg3.l5.m1.2.2.4.4.cmml">f</mi><mo id="alg3.l5.m1.2.2.4.1b" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.5" xref="alg3.l5.m1.2.2.4.5.cmml">i</mi><mo id="alg3.l5.m1.2.2.4.1c" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.6" xref="alg3.l5.m1.2.2.4.6.cmml">n</mi><mo id="alg3.l5.m1.2.2.4.1d" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.7" xref="alg3.l5.m1.2.2.4.7.cmml">e</mi><mo id="alg3.l5.m1.2.2.4.1e" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.8" xref="alg3.l5.m1.2.2.4.8.cmml">d</mi><mo id="alg3.l5.m1.2.2.4.1f" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.9" xref="alg3.l5.m1.2.2.4.9.cmml">I</mi><mo id="alg3.l5.m1.2.2.4.1g" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.10" xref="alg3.l5.m1.2.2.4.10.cmml">n</mi><mo id="alg3.l5.m1.2.2.4.1h" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.11" xref="alg3.l5.m1.2.2.4.11.cmml">s</mi><mo id="alg3.l5.m1.2.2.4.1i" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.12" xref="alg3.l5.m1.2.2.4.12.cmml">i</mi><mo id="alg3.l5.m1.2.2.4.1j" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.13" xref="alg3.l5.m1.2.2.4.13.cmml">g</mi><mo id="alg3.l5.m1.2.2.4.1k" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.14" xref="alg3.l5.m1.2.2.4.14.cmml">h</mi><mo id="alg3.l5.m1.2.2.4.1l" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.15" xref="alg3.l5.m1.2.2.4.15.cmml">t</mi><mo id="alg3.l5.m1.2.2.4.1m" xref="alg3.l5.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.4.16" xref="alg3.l5.m1.2.2.4.16.cmml">s</mi></mrow><mo id="alg3.l5.m1.2.2.3" stretchy="false" xref="alg3.l5.m1.2.2.3.cmml">←</mo><mrow id="alg3.l5.m1.2.2.2" xref="alg3.l5.m1.2.2.2.cmml"><mtext id="alg3.l5.m1.2.2.2.4" xref="alg3.l5.m1.2.2.2.4a.cmml">IterativeRefine</mtext><mo id="alg3.l5.m1.2.2.2.3" xref="alg3.l5.m1.2.2.2.3.cmml">⁢</mo><mrow id="alg3.l5.m1.2.2.2.2.2" xref="alg3.l5.m1.2.2.2.2.3.cmml"><mo id="alg3.l5.m1.2.2.2.2.2.3" stretchy="false" xref="alg3.l5.m1.2.2.2.2.3.cmml">(</mo><mrow id="alg3.l5.m1.1.1.1.1.1.1" xref="alg3.l5.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l5.m1.1.1.1.1.1.1.2" xref="alg3.l5.m1.1.1.1.1.1.1.2.cmml">I</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.3" xref="alg3.l5.m1.1.1.1.1.1.1.3.cmml">n</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1a" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.4" xref="alg3.l5.m1.1.1.1.1.1.1.4.cmml">i</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1b" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.5" xref="alg3.l5.m1.1.1.1.1.1.1.5.cmml">t</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1c" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.6" xref="alg3.l5.m1.1.1.1.1.1.1.6.cmml">i</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1d" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.7" xref="alg3.l5.m1.1.1.1.1.1.1.7.cmml">a</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1e" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.8" xref="alg3.l5.m1.1.1.1.1.1.1.8.cmml">l</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1f" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.9" xref="alg3.l5.m1.1.1.1.1.1.1.9.cmml">I</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1g" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.10" xref="alg3.l5.m1.1.1.1.1.1.1.10.cmml">n</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1h" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.11" xref="alg3.l5.m1.1.1.1.1.1.1.11.cmml">s</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1i" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.12" xref="alg3.l5.m1.1.1.1.1.1.1.12.cmml">i</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1j" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.13" xref="alg3.l5.m1.1.1.1.1.1.1.13.cmml">g</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1k" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.14" xref="alg3.l5.m1.1.1.1.1.1.1.14.cmml">h</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1l" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.15" xref="alg3.l5.m1.1.1.1.1.1.1.15.cmml">t</mi><mo id="alg3.l5.m1.1.1.1.1.1.1.1m" xref="alg3.l5.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l5.m1.1.1.1.1.1.1.16" xref="alg3.l5.m1.1.1.1.1.1.1.16.cmml">s</mi></mrow><mo id="alg3.l5.m1.2.2.2.2.2.4" xref="alg3.l5.m1.2.2.2.2.3.cmml">,</mo><mrow id="alg3.l5.m1.2.2.2.2.2.2" xref="alg3.l5.m1.2.2.2.2.2.2.cmml"><mi id="alg3.l5.m1.2.2.2.2.2.2.2" xref="alg3.l5.m1.2.2.2.2.2.2.2.cmml">C</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.3" xref="alg3.l5.m1.2.2.2.2.2.2.3.cmml">o</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1a" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.4" xref="alg3.l5.m1.2.2.2.2.2.2.4.cmml">n</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1b" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.5" xref="alg3.l5.m1.2.2.2.2.2.2.5.cmml">t</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1c" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.6" xref="alg3.l5.m1.2.2.2.2.2.2.6.cmml">e</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1d" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.7" xref="alg3.l5.m1.2.2.2.2.2.2.7.cmml">x</mi><mo id="alg3.l5.m1.2.2.2.2.2.2.1e" xref="alg3.l5.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l5.m1.2.2.2.2.2.2.8" xref="alg3.l5.m1.2.2.2.2.2.2.8.cmml">t</mi></mrow><mo id="alg3.l5.m1.2.2.2.2.2.5" stretchy="false" xref="alg3.l5.m1.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l5.m1.2b"><apply id="alg3.l5.m1.2.2.cmml" xref="alg3.l5.m1.2.2"><ci id="alg3.l5.m1.2.2.3.cmml" xref="alg3.l5.m1.2.2.3">←</ci><apply id="alg3.l5.m1.2.2.4.cmml" xref="alg3.l5.m1.2.2.4"><times id="alg3.l5.m1.2.2.4.1.cmml" xref="alg3.l5.m1.2.2.4.1"></times><ci id="alg3.l5.m1.2.2.4.2.cmml" xref="alg3.l5.m1.2.2.4.2">𝑅</ci><ci id="alg3.l5.m1.2.2.4.3.cmml" xref="alg3.l5.m1.2.2.4.3">𝑒</ci><ci id="alg3.l5.m1.2.2.4.4.cmml" xref="alg3.l5.m1.2.2.4.4">𝑓</ci><ci id="alg3.l5.m1.2.2.4.5.cmml" xref="alg3.l5.m1.2.2.4.5">𝑖</ci><ci id="alg3.l5.m1.2.2.4.6.cmml" xref="alg3.l5.m1.2.2.4.6">𝑛</ci><ci id="alg3.l5.m1.2.2.4.7.cmml" xref="alg3.l5.m1.2.2.4.7">𝑒</ci><ci id="alg3.l5.m1.2.2.4.8.cmml" xref="alg3.l5.m1.2.2.4.8">𝑑</ci><ci id="alg3.l5.m1.2.2.4.9.cmml" xref="alg3.l5.m1.2.2.4.9">𝐼</ci><ci id="alg3.l5.m1.2.2.4.10.cmml" xref="alg3.l5.m1.2.2.4.10">𝑛</ci><ci id="alg3.l5.m1.2.2.4.11.cmml" xref="alg3.l5.m1.2.2.4.11">𝑠</ci><ci id="alg3.l5.m1.2.2.4.12.cmml" xref="alg3.l5.m1.2.2.4.12">𝑖</ci><ci id="alg3.l5.m1.2.2.4.13.cmml" xref="alg3.l5.m1.2.2.4.13">𝑔</ci><ci id="alg3.l5.m1.2.2.4.14.cmml" xref="alg3.l5.m1.2.2.4.14">ℎ</ci><ci id="alg3.l5.m1.2.2.4.15.cmml" xref="alg3.l5.m1.2.2.4.15">𝑡</ci><ci id="alg3.l5.m1.2.2.4.16.cmml" xref="alg3.l5.m1.2.2.4.16">𝑠</ci></apply><apply id="alg3.l5.m1.2.2.2.cmml" xref="alg3.l5.m1.2.2.2"><times id="alg3.l5.m1.2.2.2.3.cmml" xref="alg3.l5.m1.2.2.2.3"></times><ci id="alg3.l5.m1.2.2.2.4a.cmml" xref="alg3.l5.m1.2.2.2.4"><mtext id="alg3.l5.m1.2.2.2.4.cmml" xref="alg3.l5.m1.2.2.2.4">IterativeRefine</mtext></ci><interval closure="open" id="alg3.l5.m1.2.2.2.2.3.cmml" xref="alg3.l5.m1.2.2.2.2.2"><apply id="alg3.l5.m1.1.1.1.1.1.1.cmml" xref="alg3.l5.m1.1.1.1.1.1.1"><times id="alg3.l5.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.1"></times><ci id="alg3.l5.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.2">𝐼</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.3">𝑛</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.4.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.4">𝑖</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.5.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.5">𝑡</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.6.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.6">𝑖</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.7.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.7">𝑎</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.8.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.8">𝑙</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.9.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.9">𝐼</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.10.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.10">𝑛</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.11.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.11">𝑠</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.12.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.12">𝑖</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.13.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.13">𝑔</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.14.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.14">ℎ</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.15.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.15">𝑡</ci><ci id="alg3.l5.m1.1.1.1.1.1.1.16.cmml" xref="alg3.l5.m1.1.1.1.1.1.1.16">𝑠</ci></apply><apply id="alg3.l5.m1.2.2.2.2.2.2.cmml" xref="alg3.l5.m1.2.2.2.2.2.2"><times id="alg3.l5.m1.2.2.2.2.2.2.1.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.1"></times><ci id="alg3.l5.m1.2.2.2.2.2.2.2.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.2">𝐶</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.3.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.3">𝑜</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.4.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.4">𝑛</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.5.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.5">𝑡</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.6.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.6">𝑒</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.7.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.7">𝑥</ci><ci id="alg3.l5.m1.2.2.2.2.2.2.8.cmml" xref="alg3.l5.m1.2.2.2.2.2.2.8">𝑡</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l5.m1.2c">RefinedInsights\leftarrow\text{IterativeRefine}(InitialInsights,Context)</annotation><annotation encoding="application/x-llamapun" id="alg3.l5.m1.2d">italic_R italic_e italic_f italic_i italic_n italic_e italic_d italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s ← IterativeRefine ( italic_I italic_n italic_i italic_t italic_i italic_a italic_l italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s , italic_C italic_o italic_n italic_t italic_e italic_x italic_t )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <math alttext="VerifiedInsights\leftarrow\text{FactCheck}(RefinedInsights,RetrievedCases)" class="ltx_Math" display="inline" id="alg3.l6.m1.2"><semantics id="alg3.l6.m1.2a"><mrow id="alg3.l6.m1.2.2" xref="alg3.l6.m1.2.2.cmml"><mrow id="alg3.l6.m1.2.2.4" xref="alg3.l6.m1.2.2.4.cmml"><mi id="alg3.l6.m1.2.2.4.2" xref="alg3.l6.m1.2.2.4.2.cmml">V</mi><mo id="alg3.l6.m1.2.2.4.1" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.3" xref="alg3.l6.m1.2.2.4.3.cmml">e</mi><mo id="alg3.l6.m1.2.2.4.1a" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.4" xref="alg3.l6.m1.2.2.4.4.cmml">r</mi><mo id="alg3.l6.m1.2.2.4.1b" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.5" xref="alg3.l6.m1.2.2.4.5.cmml">i</mi><mo id="alg3.l6.m1.2.2.4.1c" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.6" xref="alg3.l6.m1.2.2.4.6.cmml">f</mi><mo id="alg3.l6.m1.2.2.4.1d" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.7" xref="alg3.l6.m1.2.2.4.7.cmml">i</mi><mo id="alg3.l6.m1.2.2.4.1e" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.8" xref="alg3.l6.m1.2.2.4.8.cmml">e</mi><mo id="alg3.l6.m1.2.2.4.1f" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.9" xref="alg3.l6.m1.2.2.4.9.cmml">d</mi><mo id="alg3.l6.m1.2.2.4.1g" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.10" xref="alg3.l6.m1.2.2.4.10.cmml">I</mi><mo id="alg3.l6.m1.2.2.4.1h" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.11" xref="alg3.l6.m1.2.2.4.11.cmml">n</mi><mo id="alg3.l6.m1.2.2.4.1i" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.12" xref="alg3.l6.m1.2.2.4.12.cmml">s</mi><mo id="alg3.l6.m1.2.2.4.1j" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.13" xref="alg3.l6.m1.2.2.4.13.cmml">i</mi><mo id="alg3.l6.m1.2.2.4.1k" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.14" xref="alg3.l6.m1.2.2.4.14.cmml">g</mi><mo id="alg3.l6.m1.2.2.4.1l" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.15" xref="alg3.l6.m1.2.2.4.15.cmml">h</mi><mo id="alg3.l6.m1.2.2.4.1m" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.16" xref="alg3.l6.m1.2.2.4.16.cmml">t</mi><mo id="alg3.l6.m1.2.2.4.1n" xref="alg3.l6.m1.2.2.4.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.4.17" xref="alg3.l6.m1.2.2.4.17.cmml">s</mi></mrow><mo id="alg3.l6.m1.2.2.3" stretchy="false" xref="alg3.l6.m1.2.2.3.cmml">←</mo><mrow id="alg3.l6.m1.2.2.2" xref="alg3.l6.m1.2.2.2.cmml"><mtext id="alg3.l6.m1.2.2.2.4" xref="alg3.l6.m1.2.2.2.4a.cmml">FactCheck</mtext><mo id="alg3.l6.m1.2.2.2.3" xref="alg3.l6.m1.2.2.2.3.cmml">⁢</mo><mrow id="alg3.l6.m1.2.2.2.2.2" xref="alg3.l6.m1.2.2.2.2.3.cmml"><mo id="alg3.l6.m1.2.2.2.2.2.3" stretchy="false" xref="alg3.l6.m1.2.2.2.2.3.cmml">(</mo><mrow id="alg3.l6.m1.1.1.1.1.1.1" xref="alg3.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l6.m1.1.1.1.1.1.1.2" xref="alg3.l6.m1.1.1.1.1.1.1.2.cmml">R</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.3" xref="alg3.l6.m1.1.1.1.1.1.1.3.cmml">e</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1a" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.4" xref="alg3.l6.m1.1.1.1.1.1.1.4.cmml">f</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1b" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.5" xref="alg3.l6.m1.1.1.1.1.1.1.5.cmml">i</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1c" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.6" xref="alg3.l6.m1.1.1.1.1.1.1.6.cmml">n</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1d" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.7" xref="alg3.l6.m1.1.1.1.1.1.1.7.cmml">e</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1e" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.8" xref="alg3.l6.m1.1.1.1.1.1.1.8.cmml">d</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1f" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.9" xref="alg3.l6.m1.1.1.1.1.1.1.9.cmml">I</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1g" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.10" xref="alg3.l6.m1.1.1.1.1.1.1.10.cmml">n</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1h" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.11" xref="alg3.l6.m1.1.1.1.1.1.1.11.cmml">s</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1i" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.12" xref="alg3.l6.m1.1.1.1.1.1.1.12.cmml">i</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1j" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.13" xref="alg3.l6.m1.1.1.1.1.1.1.13.cmml">g</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1k" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.14" xref="alg3.l6.m1.1.1.1.1.1.1.14.cmml">h</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1l" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.15" xref="alg3.l6.m1.1.1.1.1.1.1.15.cmml">t</mi><mo id="alg3.l6.m1.1.1.1.1.1.1.1m" xref="alg3.l6.m1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="alg3.l6.m1.1.1.1.1.1.1.16" xref="alg3.l6.m1.1.1.1.1.1.1.16.cmml">s</mi></mrow><mo id="alg3.l6.m1.2.2.2.2.2.4" xref="alg3.l6.m1.2.2.2.2.3.cmml">,</mo><mrow id="alg3.l6.m1.2.2.2.2.2.2" xref="alg3.l6.m1.2.2.2.2.2.2.cmml"><mi id="alg3.l6.m1.2.2.2.2.2.2.2" xref="alg3.l6.m1.2.2.2.2.2.2.2.cmml">R</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.3" xref="alg3.l6.m1.2.2.2.2.2.2.3.cmml">e</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1a" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.4" xref="alg3.l6.m1.2.2.2.2.2.2.4.cmml">t</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1b" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.5" xref="alg3.l6.m1.2.2.2.2.2.2.5.cmml">r</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1c" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.6" xref="alg3.l6.m1.2.2.2.2.2.2.6.cmml">i</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1d" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.7" xref="alg3.l6.m1.2.2.2.2.2.2.7.cmml">e</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1e" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.8" xref="alg3.l6.m1.2.2.2.2.2.2.8.cmml">v</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1f" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.9" xref="alg3.l6.m1.2.2.2.2.2.2.9.cmml">e</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1g" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.10" xref="alg3.l6.m1.2.2.2.2.2.2.10.cmml">d</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1h" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.11" xref="alg3.l6.m1.2.2.2.2.2.2.11.cmml">C</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1i" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.12" xref="alg3.l6.m1.2.2.2.2.2.2.12.cmml">a</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1j" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.13" xref="alg3.l6.m1.2.2.2.2.2.2.13.cmml">s</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1k" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.14" xref="alg3.l6.m1.2.2.2.2.2.2.14.cmml">e</mi><mo id="alg3.l6.m1.2.2.2.2.2.2.1l" xref="alg3.l6.m1.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="alg3.l6.m1.2.2.2.2.2.2.15" xref="alg3.l6.m1.2.2.2.2.2.2.15.cmml">s</mi></mrow><mo id="alg3.l6.m1.2.2.2.2.2.5" stretchy="false" xref="alg3.l6.m1.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l6.m1.2b"><apply id="alg3.l6.m1.2.2.cmml" xref="alg3.l6.m1.2.2"><ci id="alg3.l6.m1.2.2.3.cmml" xref="alg3.l6.m1.2.2.3">←</ci><apply id="alg3.l6.m1.2.2.4.cmml" xref="alg3.l6.m1.2.2.4"><times id="alg3.l6.m1.2.2.4.1.cmml" xref="alg3.l6.m1.2.2.4.1"></times><ci id="alg3.l6.m1.2.2.4.2.cmml" xref="alg3.l6.m1.2.2.4.2">𝑉</ci><ci id="alg3.l6.m1.2.2.4.3.cmml" xref="alg3.l6.m1.2.2.4.3">𝑒</ci><ci id="alg3.l6.m1.2.2.4.4.cmml" xref="alg3.l6.m1.2.2.4.4">𝑟</ci><ci id="alg3.l6.m1.2.2.4.5.cmml" xref="alg3.l6.m1.2.2.4.5">𝑖</ci><ci id="alg3.l6.m1.2.2.4.6.cmml" xref="alg3.l6.m1.2.2.4.6">𝑓</ci><ci id="alg3.l6.m1.2.2.4.7.cmml" xref="alg3.l6.m1.2.2.4.7">𝑖</ci><ci id="alg3.l6.m1.2.2.4.8.cmml" xref="alg3.l6.m1.2.2.4.8">𝑒</ci><ci id="alg3.l6.m1.2.2.4.9.cmml" xref="alg3.l6.m1.2.2.4.9">𝑑</ci><ci id="alg3.l6.m1.2.2.4.10.cmml" xref="alg3.l6.m1.2.2.4.10">𝐼</ci><ci id="alg3.l6.m1.2.2.4.11.cmml" xref="alg3.l6.m1.2.2.4.11">𝑛</ci><ci id="alg3.l6.m1.2.2.4.12.cmml" xref="alg3.l6.m1.2.2.4.12">𝑠</ci><ci id="alg3.l6.m1.2.2.4.13.cmml" xref="alg3.l6.m1.2.2.4.13">𝑖</ci><ci id="alg3.l6.m1.2.2.4.14.cmml" xref="alg3.l6.m1.2.2.4.14">𝑔</ci><ci id="alg3.l6.m1.2.2.4.15.cmml" xref="alg3.l6.m1.2.2.4.15">ℎ</ci><ci id="alg3.l6.m1.2.2.4.16.cmml" xref="alg3.l6.m1.2.2.4.16">𝑡</ci><ci id="alg3.l6.m1.2.2.4.17.cmml" xref="alg3.l6.m1.2.2.4.17">𝑠</ci></apply><apply id="alg3.l6.m1.2.2.2.cmml" xref="alg3.l6.m1.2.2.2"><times id="alg3.l6.m1.2.2.2.3.cmml" xref="alg3.l6.m1.2.2.2.3"></times><ci id="alg3.l6.m1.2.2.2.4a.cmml" xref="alg3.l6.m1.2.2.2.4"><mtext id="alg3.l6.m1.2.2.2.4.cmml" xref="alg3.l6.m1.2.2.2.4">FactCheck</mtext></ci><interval closure="open" id="alg3.l6.m1.2.2.2.2.3.cmml" xref="alg3.l6.m1.2.2.2.2.2"><apply id="alg3.l6.m1.1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1.1"><times id="alg3.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.1"></times><ci id="alg3.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.2">𝑅</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.4.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.4">𝑓</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.5.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.5">𝑖</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.6.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.6">𝑛</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.7.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.7">𝑒</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.8.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.8">𝑑</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.9.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.9">𝐼</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.10.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.10">𝑛</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.11.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.11">𝑠</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.12.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.12">𝑖</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.13.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.13">𝑔</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.14.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.14">ℎ</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.15.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.15">𝑡</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.16.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.16">𝑠</ci></apply><apply id="alg3.l6.m1.2.2.2.2.2.2.cmml" xref="alg3.l6.m1.2.2.2.2.2.2"><times id="alg3.l6.m1.2.2.2.2.2.2.1.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.1"></times><ci id="alg3.l6.m1.2.2.2.2.2.2.2.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.2">𝑅</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.3.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.3">𝑒</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.4.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.4">𝑡</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.5.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.5">𝑟</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.6.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.6">𝑖</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.7.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.7">𝑒</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.8.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.8">𝑣</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.9.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.9">𝑒</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.10.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.10">𝑑</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.11.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.11">𝐶</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.12.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.12">𝑎</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.13.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.13">𝑠</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.14.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.14">𝑒</ci><ci id="alg3.l6.m1.2.2.2.2.2.2.15.cmml" xref="alg3.l6.m1.2.2.2.2.2.2.15">𝑠</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l6.m1.2c">VerifiedInsights\leftarrow\text{FactCheck}(RefinedInsights,RetrievedCases)</annotation><annotation encoding="application/x-llamapun" id="alg3.l6.m1.2d">italic_V italic_e italic_r italic_i italic_f italic_i italic_e italic_d italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s ← FactCheck ( italic_R italic_e italic_f italic_i italic_n italic_e italic_d italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s , italic_R italic_e italic_t italic_r italic_i italic_e italic_v italic_e italic_d italic_C italic_a italic_s italic_e italic_s )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>     <span class="ltx_text ltx_font_bold" id="alg3.l7.1">return</span> <math alttext="VerifiedInsights" class="ltx_Math" display="inline" id="alg3.l7.m1.1"><semantics id="alg3.l7.m1.1a"><mrow id="alg3.l7.m1.1.1" xref="alg3.l7.m1.1.1.cmml"><mi id="alg3.l7.m1.1.1.2" xref="alg3.l7.m1.1.1.2.cmml">V</mi><mo id="alg3.l7.m1.1.1.1" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.3" xref="alg3.l7.m1.1.1.3.cmml">e</mi><mo id="alg3.l7.m1.1.1.1a" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.4" xref="alg3.l7.m1.1.1.4.cmml">r</mi><mo id="alg3.l7.m1.1.1.1b" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.5" xref="alg3.l7.m1.1.1.5.cmml">i</mi><mo id="alg3.l7.m1.1.1.1c" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.6" xref="alg3.l7.m1.1.1.6.cmml">f</mi><mo id="alg3.l7.m1.1.1.1d" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.7" xref="alg3.l7.m1.1.1.7.cmml">i</mi><mo id="alg3.l7.m1.1.1.1e" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.8" xref="alg3.l7.m1.1.1.8.cmml">e</mi><mo id="alg3.l7.m1.1.1.1f" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.9" xref="alg3.l7.m1.1.1.9.cmml">d</mi><mo id="alg3.l7.m1.1.1.1g" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.10" xref="alg3.l7.m1.1.1.10.cmml">I</mi><mo id="alg3.l7.m1.1.1.1h" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.11" xref="alg3.l7.m1.1.1.11.cmml">n</mi><mo id="alg3.l7.m1.1.1.1i" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.12" xref="alg3.l7.m1.1.1.12.cmml">s</mi><mo id="alg3.l7.m1.1.1.1j" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.13" xref="alg3.l7.m1.1.1.13.cmml">i</mi><mo id="alg3.l7.m1.1.1.1k" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.14" xref="alg3.l7.m1.1.1.14.cmml">g</mi><mo id="alg3.l7.m1.1.1.1l" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.15" xref="alg3.l7.m1.1.1.15.cmml">h</mi><mo id="alg3.l7.m1.1.1.1m" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.16" xref="alg3.l7.m1.1.1.16.cmml">t</mi><mo id="alg3.l7.m1.1.1.1n" xref="alg3.l7.m1.1.1.1.cmml">⁢</mo><mi id="alg3.l7.m1.1.1.17" xref="alg3.l7.m1.1.1.17.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="alg3.l7.m1.1b"><apply id="alg3.l7.m1.1.1.cmml" xref="alg3.l7.m1.1.1"><times id="alg3.l7.m1.1.1.1.cmml" xref="alg3.l7.m1.1.1.1"></times><ci id="alg3.l7.m1.1.1.2.cmml" xref="alg3.l7.m1.1.1.2">𝑉</ci><ci id="alg3.l7.m1.1.1.3.cmml" xref="alg3.l7.m1.1.1.3">𝑒</ci><ci id="alg3.l7.m1.1.1.4.cmml" xref="alg3.l7.m1.1.1.4">𝑟</ci><ci id="alg3.l7.m1.1.1.5.cmml" xref="alg3.l7.m1.1.1.5">𝑖</ci><ci id="alg3.l7.m1.1.1.6.cmml" xref="alg3.l7.m1.1.1.6">𝑓</ci><ci id="alg3.l7.m1.1.1.7.cmml" xref="alg3.l7.m1.1.1.7">𝑖</ci><ci id="alg3.l7.m1.1.1.8.cmml" xref="alg3.l7.m1.1.1.8">𝑒</ci><ci id="alg3.l7.m1.1.1.9.cmml" xref="alg3.l7.m1.1.1.9">𝑑</ci><ci id="alg3.l7.m1.1.1.10.cmml" xref="alg3.l7.m1.1.1.10">𝐼</ci><ci id="alg3.l7.m1.1.1.11.cmml" xref="alg3.l7.m1.1.1.11">𝑛</ci><ci id="alg3.l7.m1.1.1.12.cmml" xref="alg3.l7.m1.1.1.12">𝑠</ci><ci id="alg3.l7.m1.1.1.13.cmml" xref="alg3.l7.m1.1.1.13">𝑖</ci><ci id="alg3.l7.m1.1.1.14.cmml" xref="alg3.l7.m1.1.1.14">𝑔</ci><ci id="alg3.l7.m1.1.1.15.cmml" xref="alg3.l7.m1.1.1.15">ℎ</ci><ci id="alg3.l7.m1.1.1.16.cmml" xref="alg3.l7.m1.1.1.16">𝑡</ci><ci id="alg3.l7.m1.1.1.17.cmml" xref="alg3.l7.m1.1.1.17">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l7.m1.1c">VerifiedInsights</annotation><annotation encoding="application/x-llamapun" id="alg3.l7.m1.1d">italic_V italic_e italic_r italic_i italic_f italic_i italic_e italic_d italic_I italic_n italic_s italic_i italic_g italic_h italic_t italic_s</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span><span class="ltx_text ltx_font_bold" id="alg3.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg3.l8.2">procedure</span>
</div>
</div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS4.p6">
<p class="ltx_p" id="S3.SS4.p6.1">It’s worth noting that while this algorithm appears straightforward, each step involves complex sub-processes that we’re continuing to refine. The LLMGenerate function, for instance, represents a sophisticated text generation process that we’ve fine-tuned extensively for our specific use cases.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p7">
<p class="ltx_p" id="S3.SS4.p7.1">One aspect of our module that we’re particularly proud of is the iterative refinement process. Initial results showed that a single pass often produced insights that, while relevant, lacked the depth we were aiming for. By implementing an iterative approach, we’ve seen a marked improvement in the nuance and comprehensiveness of the generated insights.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p8">
<p class="ltx_p" id="S3.SS4.p8.1">However, we must acknowledge that our current approach is not without limitations. The factual consistency checking mechanism, while crucial, is not infallible. We’ve observed cases where the system generates plausible-sounding but incorrect information, a problem that we’re actively working to address. Additionally, the performance of the module can vary depending on the complexity of the legal or medical case at hand, and we’re still in the process of gathering more comprehensive performance metrics across a wider range of scenarios.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS4.p9">
<p class="ltx_p" id="S3.SS4.p9.1">Despite these challenges, we believe that the Insight Generation Module represents a significant step forward in AI-assisted legal and medical analysis. By combining advanced NLP techniques with domain-specific knowledge, we’ve created a tool that we hope will augment human expertise in these critical fields. As we continue to refine and expand this technology, we remain committed to rigorous testing and validation to ensure its reliability and usefulness in real-world applications.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<div class="ltx_para ltx_noindent" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">To rigorously evaluate the efficacy of CaseGPT, we conducted comprehensive experiments in both medical and legal domains. This section delineates our experimental methodology, datasets, baseline comparisons, and results.</p>
</div>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Datasets</h3>
<div class="ltx_para ltx_noindent" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">We utilized two substantial real-world datasets for our experiments:</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.1.1">Medical Dataset:</span> Our medical dataset comprises 100,000 anonymized medical cases obtained from a large urban hospital network. These cases span a diverse range of medical specialties and include detailed patient symptoms, diagnostic procedures, final diagnoses, and treatment outcomes. The dataset was carefully curated to ensure a representative distribution of case complexities and medical conditions.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p3.1.1">Legal Dataset:</span> Our legal dataset encompasses 50,000 court case summaries from various jurisdictions, covering multiple areas of law including criminal, civil, and administrative cases. Each case summary includes a detailed description of the facts, relevant statutes, court decisions, and case outcomes. The dataset was carefully compiled to represent a broad spectrum of legal complexities and precedents.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Experimental Setup</h3>
<div class="ltx_para ltx_noindent" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">To ensure a robust evaluation of CaseGPT, we implemented a rigorous experimental protocol:</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p2">
<ul class="ltx_itemize" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">Data Preprocessing:</span> Both datasets underwent extensive preprocessing to ensure data quality and consistency. This involved anonymization of sensitive information, standardization of terminologies, and normalization of text formats. For the medical dataset, we employed ICD-10 codes for diagnosis standardization, while legal cases were categorized using a standardized legal taxonomy.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">Training and Testing Split:</span> We employed a stratified random sampling technique to divide each dataset into training (80%) and testing (20%) sets. The stratification ensured that the distribution of case types and complexities was maintained across both sets, mitigating potential biases in our evaluation.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I1.i3.p1">
<p class="ltx_p" id="S4.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i3.p1.1.1">Query Generation:</span> To simulate real-world usage scenarios, we developed a query generation framework that produced a diverse set of test queries. For the medical domain, these queries ranged from simple symptom descriptions to complex multi-symptom scenarios. In the legal domain, queries included case fact patterns, legal issues, and precedent searches.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Baseline Systems</h3>
<div class="ltx_para ltx_noindent" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">To contextualize CaseGPT’s performance, we implemented and compared against several state-of-the-art baseline systems:</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS3.p2">
<ul class="ltx_itemize" id="S4.I2">
<li class="ltx_item" id="S4.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I2.i1.p1">
<p class="ltx_p" id="S4.I2.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i1.p1.1.1">TF-IDF with BM25</span>: A traditional information retrieval system using Term Frequency-Inverse Document Frequency weighting and the BM25 ranking function.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I2.i2.p1">
<p class="ltx_p" id="S4.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i2.p1.1.1">BERT-based Retrieval</span>: A neural retrieval model leveraging BERT embeddings for semantic matching <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib18" title="">18</a>]</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I2.i3.p1">
<p class="ltx_p" id="S4.I2.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i3.p1.1.1">GPT-3 Zero-shot</span>: Utilizing GPT-3 in a zero-shot setting for both case retrieval and insight generation.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I2.i4.p1">
<p class="ltx_p" id="S4.I2.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i4.p1.1.1">LEGAL-BERT</span>: A BERT model fine-tuned on legal corpora, specifically used for the legal domain experiments <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib11" title="">11</a>]</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I2.i5.p1">
<p class="ltx_p" id="S4.I2.i5.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I2.i5.p1.1.1">BioBERT</span>: A biomedical language representation model, employed for the medical domain experiments <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#bib.bib12" title="">12</a>]</cite>.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Evaluation Metrics</h3>
<div class="ltx_para ltx_noindent" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">We employed a comprehensive set of evaluation metrics to assess various aspects of system performance:</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS4.p2">
<ul class="ltx_itemize" id="S4.I3">
<li class="ltx_item" id="S4.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i1.p1">
<p class="ltx_p" id="S4.I3.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i1.p1.1.1">Precision@k</span>: The proportion of relevant cases among the top k retrieved cases.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i2.p1">
<p class="ltx_p" id="S4.I3.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i2.p1.1.1">Recall@k</span>: The proportion of relevant cases that are retrieved in the top k results.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i3.p1">
<p class="ltx_p" id="S4.I3.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i3.p1.1.1">F1 Score</span>: The harmonic mean of precision and recall, providing a balanced measure of retrieval performance.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i4.p1">
<p class="ltx_p" id="S4.I3.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i4.p1.1.1">Mean Reciprocal Rank (MRR)</span>: Evaluating the ranking quality of the retrieval system.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I3.i5.p1">
<p class="ltx_p" id="S4.I3.i5.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i5.p1.1.1">Normalized Discounted Cumulative Gain (NDCG)</span>: Assessing the ranking quality while accounting for the position of relevant documents.</p>
</div>
</li>
<li class="ltx_item" id="S4.I3.i6" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S4.I3.i6.p1">
<p class="ltx_p" id="S4.I3.i6.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I3.i6.p1.1.1">Response Time</span>: Measuring the computational efficiency of each system.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS4.p3">
<p class="ltx_p" id="S4.SS4.p3.1">For the insight generation component, we conducted a rigorous human evaluation. A panel of domain experts assessed the generated insights on a 5-point Likert scale across three dimensions: quality, relevance, and actionability.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.5 </span>Results and Analysis</h3>
<section class="ltx_subsubsection" id="S4.SS5.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.5.1 </span>Medical Domain Performance</h4>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS1.p1">
<p class="ltx_p" id="S4.SS5.SSS1.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.T1" title="Table 1 ‣ 4.5.1 Medical Domain Performance ‣ 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">1</span></a> presents the comparative performance of CaseGPT and baseline systems in the medical domain.</p>
</div>
<figure class="ltx_table" id="S4.T1">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Performance Comparison for Medical Case Retrieval</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.1.1.1.1">System</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.2">P@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.3">R@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.4">F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.5">MRR</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.6">NDCG@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.7">Time (s)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.2.1.1">TF-IDF + BM25</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.2">0.68</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.3">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.4">0.66</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.5">0.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.6">0.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.2.1.7">1.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.3.2.1">BERT-based</th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.2">0.75</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.3">0.72</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.4">0.73</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.5">0.78</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.6">0.76</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.3.2.7">0.9</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.4.3.1">GPT-3 Zero-shot</th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.2">0.79</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.3">0.76</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.4">0.77</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.5">0.81</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.6">0.80</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.3.7">1.2</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.5.4.1">BioBERT</th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.2">0.82</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.3">0.80</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.4">0.81</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.5">0.85</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.6">0.83</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.5.4.7">0.8</td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.1.6.5.1">CaseGPT</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.2"><span class="ltx_text ltx_font_bold" id="S4.T1.1.6.5.2.1">0.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.3"><span class="ltx_text ltx_font_bold" id="S4.T1.1.6.5.3.1">0.88</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.4"><span class="ltx_text ltx_font_bold" id="S4.T1.1.6.5.4.1">0.89</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.5"><span class="ltx_text ltx_font_bold" id="S4.T1.1.6.5.5.1">0.92</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.6"><span class="ltx_text ltx_font_bold" id="S4.T1.1.6.5.6.1">0.91</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.6.5.7">0.5</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS1.p2">
<p class="ltx_p" id="S4.SS5.SSS1.p2.1">CaseGPT demonstrates superior performance across all metrics in the medical domain. Notably, it achieves a 15</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS1.p3">
<p class="ltx_p" id="S4.SS5.SSS1.p3.1">The substantial improvement in MRR and NDCG@10 scores underscores CaseGPT’s proficiency in not just retrieving relevant cases, but also ranking them effectively. This is particularly crucial in medical contexts where the most relevant information needs to be readily accessible to healthcare professionals.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS1.p4">
<p class="ltx_p" id="S4.SS5.SSS1.p4.1">Furthermore, CaseGPT’s reduced response time (0.5 seconds compared to 0.8-1.2 seconds for other methods) demonstrates its efficiency, a critical factor in time-sensitive medical decision-making scenarios.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS5.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.5.2 </span>Legal Domain Performance</h4>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS2.p1">
<p class="ltx_p" id="S4.SS5.SSS2.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.T2" title="Table 2 ‣ 4.5.2 Legal Domain Performance ‣ 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">2</span></a> illustrates the performance comparison in the legal domain.</p>
</div>
<figure class="ltx_table" id="S4.T2">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Performance Comparison for Legal Case Retrieval</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T2.1.1.1.1">System</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.2">P@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.3">R@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.4">F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.5">MRR</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.6">NDCG@10</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.7">Time (s)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.2.1.1">TF-IDF + BM25</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.2">0.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.3">0.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.4">0.71</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.5">0.75</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.6">0.74</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.7">1.2</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.3.2.1">BERT-based</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.2">0.79</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.3">0.77</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.4">0.78</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.5">0.82</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.6">0.81</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.7">1.0</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.4.3.1">GPT-3 Zero-shot</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.2">0.83</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.3">0.81</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.4">0.82</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.5">0.86</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.6">0.85</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.7">1.3</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.5.4.1">LEGAL-BERT</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.2">0.87</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.3">0.85</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.4">0.86</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.5">0.89</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.6">0.88</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.7">0.9</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.1.6.5.1">CaseGPT</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.2.1">0.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.3.1">0.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.4.1">0.91</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.5.1">0.94</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.6"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.6.1">0.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.7">0.8</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS2.p2">
<p class="ltx_p" id="S4.SS5.SSS2.p2.1">In the legal domain, CaseGPT exhibits a similar pattern of superior performance. It achieves a 12</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS2.p3">
<p class="ltx_p" id="S4.SS5.SSS2.p3.1">The notable increase in MRR and NDCG@10 scores reflects CaseGPT’s ability to effectively rank legal cases, ensuring that the most relevant precedents and statutes are prioritized in the results. This capability is particularly valuable in legal research, where the identification of the most pertinent cases can significantly impact case outcomes.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS5.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.5.3 </span>Insight Generation Quality</h4>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS3.p1">
<p class="ltx_p" id="S4.SS5.SSS3.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2407.07913v1#S4.T3" title="Table 3 ‣ 4.5.3 Insight Generation Quality ‣ 4.5 Results and Analysis ‣ 4 Experiments ‣ CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation Citation: Yang, R. CaseGPT: A Case Reasoning Framework Based on Language Models and Retrieval-Augmented Generation. arXiv preprint arXiv:XXXX.XXXXX, 2024."><span class="ltx_text ltx_ref_tag">3</span></a> presents the results of the human evaluation of insight quality for CaseGPT and the GPT-3 Zero-shot baseline.</p>
</div>
<figure class="ltx_table" id="S4.T3">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Human Evaluation of Generated Insights (5-point Likert scale)</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T3.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T3.1.1.1.1">System</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.2">Quality</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.3">Relevance</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.4">Actionability</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T3.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T3.1.2.1.1">GPT-3 Zero-shot</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.1.2.1.2">3.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.1.2.1.3">3.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.1.2.1.4">3.5</td>
</tr>
<tr class="ltx_tr" id="S4.T3.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T3.1.3.2.1">CaseGPT</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.3.2.2"><span class="ltx_text ltx_font_bold" id="S4.T3.1.3.2.2.1">4.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.3.2.3"><span class="ltx_text ltx_font_bold" id="S4.T3.1.3.2.3.1">4.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.3.2.4"><span class="ltx_text ltx_font_bold" id="S4.T3.1.3.2.4.1">4.4</span></td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS5.SSS3.p2">
<p class="ltx_p" id="S4.SS5.SSS3.p2.1">CaseGPT consistently outperforms the GPT-3 Zero-shot baseline across all three dimensions of insight evaluation. The marked improvement in relevance (4.5 vs 3.4) highlights CaseGPT’s ability to generate insights that are closely aligned with the specific context of each case. The higher actionability score (4.4 vs 3.5) indicates that CaseGPT’s insights are more practical and applicable, a crucial factor in both medical and legal decision-making processes.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Discussion</h2>
<div class="ltx_para ltx_noindent" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">Our experiments with CaseGPT show promising results in both medical and legal domains. The improvements in precision, recall, and F1 scores are encouraging, suggesting that our approach may offer advantages over existing methods. However, these findings should be interpreted with caution.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">CaseGPT’s ability to handle complex professional terminologies was somewhat unexpected. This capability could be particularly valuable in fields where precise language is crucial. However, we must remember that understanding terminology is just one aspect of professional expertise.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p3">
<p class="ltx_p" id="S5.p3.1">The potential of CaseGPT as a decision support tool is intriguing. Its high precision and recall rates, along with the generation of actionable insights, could aid in medical diagnoses and legal case preparations. Yet, it’s crucial to emphasize that CaseGPT should complement, not replace, human judgment.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p4">
<p class="ltx_p" id="S5.p4.1">The efficiency gains, with response times of 0.5 seconds for medical and 0.8 seconds for legal queries, are noteworthy. In time-sensitive scenarios, this speed could be invaluable. However, we need to consider whether such rapid responses might sometimes come at the expense of nuanced analysis.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p5">
<p class="ltx_p" id="S5.p5.1">CaseGPT’s potential to democratize access to expert-level insights is an interesting prospect. It could benefit junior professionals and resource-constrained environments. However, this raises questions about the role of experiential learning in professional development.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p6">
<p class="ltx_p" id="S5.p6.1">While our current experiments didn’t test CaseGPT’s ability to learn and adapt over time, this feature could be crucial for maintaining relevance as professional knowledge evolves. Real-world implementation of this capability may present unforeseen challenges.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p7">
<p class="ltx_p" id="S5.p7.1">In conclusion, CaseGPT shows potential to impact workflow processes and service quality in medical and legal fields. However, further research is needed to understand its long-term effects and limitations in real-world applications. As we move forward, it will be essential to balance optimism with rigorous testing and critical evaluation.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Ethical Considerations and Limitations</h2>
<div class="ltx_para ltx_noindent" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">Despite its impressive performance, the deployment of CaseGPT in sensitive domains like healthcare and law necessitates careful consideration of ethical implications and potential limitations:</p>
</div>
<div class="ltx_para ltx_noindent" id="S6.p2">
<p class="ltx_p" id="S6.p2.1"><span class="ltx_text ltx_font_bold" id="S6.p2.1.1">Privacy and Data Protection:</span> The use of large datasets containing sensitive personal information raises important privacy concerns. Robust anonymization techniques and strict data governance policies must be implemented to protect individual privacy and comply with regulations like HIPAA in healthcare and client confidentiality rules in law.</p>
</div>
<div class="ltx_para ltx_noindent" id="S6.p3">
<p class="ltx_p" id="S6.p3.1"><span class="ltx_text ltx_font_bold" id="S6.p3.1.1">Bias and Fairness:</span> Like all AI systems, CaseGPT may inadvertently perpetuate or amplify biases present in its training data. Regular audits for bias and the implementation of fairness-aware machine learning techniques are crucial to ensure equitable outcomes across diverse populations.</p>
</div>
<div class="ltx_para ltx_noindent" id="S6.p4">
<p class="ltx_p" id="S6.p4.1"><span class="ltx_text ltx_font_bold" id="S6.p4.1.1">Transparency and Explainability:</span> The complex nature of CaseGPT’s underlying models may make it challenging to provide clear explanations for its recommendations. Developing methods to enhance the explainability of the system’s outputs is essential, particularly in domains where the reasoning behind decisions is often as important as the decisions themselves.</p>
</div>
<div class="ltx_para ltx_noindent" id="S6.p5">
<p class="ltx_p" id="S6.p5.1"><span class="ltx_text ltx_font_bold" id="S6.p5.1.1">Over-reliance and Deskilling:</span> There is a risk that professionals may become over-reliant on CaseGPT, potentially leading to a deskilling effect. It is crucial to emphasize that CaseGPT is designed as a decision support tool, not a replacement for professional judgment and expertise.</p>
</div>
<div class="ltx_para ltx_noindent" id="S6.p6">
<p class="ltx_p" id="S6.p6.1"><span class="ltx_text ltx_font_bold" id="S6.p6.1.1">Handling of Edge Cases:</span> While CaseGPT demonstrates strong overall performance, its ability to handle rare or unprecedented cases may be limited. Further research is needed to enhance the system’s robustness in dealing with such edge cases.</p>
</div>
</section>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion and Future Work</h2>
<div class="ltx_para ltx_noindent" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">This study introduces CaseGPT, a novel framework for case-based reasoning that synergizes Large Language Models (LLMs) with Retrieval-Augmented Generation (RAG) technology. Our comprehensive experiments in medical and legal domains demonstrate CaseGPT’s superior performance in case retrieval and insight generation, surpassing existing state-of-the-art methods.</p>
</div>
<section class="ltx_subsection" id="S7.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.1 </span>Key Contributions</h3>
<div class="ltx_para ltx_noindent" id="S7.SS1.p1">
<p class="ltx_p" id="S7.SS1.p1.1">The primary contributions of this work can be summarized as follows:</p>
</div>
<div class="ltx_para ltx_noindent" id="S7.SS1.p2">
<dl class="ltx_description" id="S7.I1">
<dt class="ltx_item" id="S7.I1.ix1"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S7.I1.ix1.1.1.1">Innovative Architecture</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S7.I1.ix1.p1">
<p class="ltx_p" id="S7.I1.ix1.p1.1">CaseGPT seamlessly integrates semantic query understanding with precise case retrieval and insightful recommendations, advancing the field of AI-assisted professional decision-making.</p>
</div>
</dd>
<dt class="ltx_item" id="S7.I1.ix2"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S7.I1.ix2.1.1.1">Cross-Domain Efficacy</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S7.I1.ix2.p1">
<p class="ltx_p" id="S7.I1.ix2.p1.1">Empirical evidence shows significant improvements in retrieval accuracy and efficiency across multiple professional domains, highlighting the framework’s versatility.</p>
</div>
</dd>
<dt class="ltx_item" id="S7.I1.ix3"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S7.I1.ix3.1.1.1">Expert-Validated Insights</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S7.I1.ix3.p1">
<p class="ltx_p" id="S7.I1.ix3.p1.1">The system generates high-quality, relevant insights based on retrieved cases, as corroborated by domain experts, bridging the gap between data retrieval and actionable knowledge.</p>
</div>
</dd>
<dt class="ltx_item" id="S7.I1.ix4"><span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold" id="S7.I1.ix4.1.1.1">Ethical Considerations</span></span></dt>
<dd class="ltx_item">
<div class="ltx_para ltx_noindent" id="S7.I1.ix4.p1">
<p class="ltx_p" id="S7.I1.ix4.p1.1">A nuanced discussion of the implications, limitations, and ethical considerations provides a balanced view of deploying such systems in sensitive professional contexts.</p>
</div>
</dd>
</dl>
</div>
</section>
<section class="ltx_subsection" id="S7.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.2 </span>Future Research Directions</h3>
<div class="ltx_para ltx_noindent" id="S7.SS2.p1">
<p class="ltx_p" id="S7.SS2.p1.1">While CaseGPT marks a significant advancement, several critical areas warrant further investigation:</p>
</div>
<div class="ltx_para ltx_noindent" id="S7.SS2.p2">
<ol class="ltx_enumerate" id="S7.I2">
<li class="ltx_item" id="S7.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para ltx_noindent" id="S7.I2.i1.p1">
<p class="ltx_p" id="S7.I2.i1.p1.1"><em class="ltx_emph ltx_font_italic" id="S7.I2.i1.p1.1.1">Transfer Learning:</em> Exploring techniques to adapt CaseGPT to new professional domains with minimal retraining, enhancing its scalability and applicability.</p>
</div>
</li>
<li class="ltx_item" id="S7.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para ltx_noindent" id="S7.I2.i2.p1">
<p class="ltx_p" id="S7.I2.i2.p1.1"><em class="ltx_emph ltx_font_italic" id="S7.I2.i2.p1.1.1">Explainable AI:</em> Developing advanced methods to elucidate the reasoning behind CaseGPT’s recommendations, crucial for building trust and accountability in professional settings.</p>
</div>
</li>
<li class="ltx_item" id="S7.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para ltx_noindent" id="S7.I2.i3.p1">
<p class="ltx_p" id="S7.I2.i3.p1.1"><em class="ltx_emph ltx_font_italic" id="S7.I2.i3.p1.1.1">Robustness Enhancement:</em> Investigating strategies to improve CaseGPT’s performance on rare or unprecedented cases, ensuring reliability across diverse scenarios.</p>
</div>
</li>
<li class="ltx_item" id="S7.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para ltx_noindent" id="S7.I2.i4.p1">
<p class="ltx_p" id="S7.I2.i4.p1.1"><em class="ltx_emph ltx_font_italic" id="S7.I2.i4.p1.1.1">Longitudinal Impact Assessment:</em> Conducting long-term studies to evaluate CaseGPT’s influence on professional decision-making processes and outcomes, providing insights into its real-world efficacy.</p>
</div>
</li>
<li class="ltx_item" id="S7.I2.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span>
<div class="ltx_para ltx_noindent" id="S7.I2.i5.p1">
<p class="ltx_p" id="S7.I2.i5.p1.1"><em class="ltx_emph ltx_font_italic" id="S7.I2.i5.p1.1.1">Privacy-Preserving Collaborative Learning:</em> Integrating federated learning approaches to facilitate knowledge sharing while maintaining data privacy, addressing a key concern in sensitive domains.</p>
</div>
</li>
</ol>
</div>
</section>
<section class="ltx_subsection" id="S7.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.3 </span>Concluding Remarks</h3>
<div class="ltx_para ltx_noindent" id="S7.SS3.p1">
<p class="ltx_p" id="S7.SS3.p1.1">CaseGPT represents a paradigm shift in AI-assisted case-based reasoning for professional domains. By amalgamating advanced language understanding with robust retrieval and generation capabilities, it offers transformative potential in how professionals access, analyze, and leverage case data.</p>
</div>
<div class="ltx_para ltx_noindent" id="S7.SS3.p2">
<p class="ltx_p" id="S7.SS3.p2.1">As we advance this technology, our focus must extend beyond technical refinements to encompass responsible development and thoughtful integration into professional practices. The true promise of CaseGPT lies in its capacity to augment human expertise, fostering improved outcomes across the critical domains of healthcare and law.</p>
</div>
<div class="ltx_para ltx_noindent" id="S7.SS3.p3">
<p class="ltx_p" id="S7.SS3.p3.1">Ultimately, the success of CaseGPT will be measured not just by its technical prowess, but by its ability to:</p>
</div>
<div class="ltx_para ltx_noindent" id="S7.SS3.p4">
<ul class="ltx_itemize" id="S7.I3">
<li class="ltx_item" id="S7.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S7.I3.i1.p1">
<p class="ltx_p" id="S7.I3.i1.p1.1">Enhance decision-making processes in complex professional scenarios</p>
</div>
</li>
<li class="ltx_item" id="S7.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S7.I3.i2.p1">
<p class="ltx_p" id="S7.I3.i2.p1.1">Democratize access to specialized knowledge and insights</p>
</div>
</li>
<li class="ltx_item" id="S7.I3.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S7.I3.i3.p1">
<p class="ltx_p" id="S7.I3.i3.p1.1">Uphold the highest standards of ethical practice and data privacy</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S7.SS3.p5">
<p class="ltx_p" id="S7.SS3.p5.1">As we look to the future, the continued development of CaseGPT must be guided by a commitment to these principles, ensuring that this powerful tool serves to elevate and support human expertise in the most critical and sensitive domains of professional practice.</p>
</div>
</section>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Allan Hanbury.

</span>
<span class="ltx_bibblock">Medical information retrieval: an instance of domain-specific search.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">Proceedings of the 35th international ACM SIGIR conference on
Research and development in information retrieval</span>, pages 1191–1192. ACM,
2012.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Tetiana Hovorushchenko, Yevhen Hnatchuk, and Oksana Savchuk.

</span>
<span class="ltx_bibblock">Concept of information-search system (on the basis of ontologies) for
the domain of medical law.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">Computer Science &amp; Information Technologies</span>, 2, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Frank Schilder.

</span>
<span class="ltx_bibblock">Legal expertise meets artificial intelligence: A critical analysis of
large language models as intelligent assistance technology.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">DBLP</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Hartini Saripan, Nurul Saadah Fathiah Muhammad Saleh Putera, Raihanah Abdullah
Hassan, and Shafiza Mohd Abdullah.

</span>
<span class="ltx_bibblock">Artificial intelligence and medical negligence in malaysia:
Confronting the informed consent dilemma.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">International Journal of Academic Research in Business and
Social Sciences</span>, 11(11), 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
R Srivel, Krishnamoorthy Kaliannan, S Shanthi, and Umasankar Perumal.

</span>
<span class="ltx_bibblock">An automation query expansion strategy for information retrieval by
using fuzzy based grasshopper optimization algorithm on medical datasets.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">Concurrency and Computation: Practice and Experience</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Sonika Chawla.

</span>
<span class="ltx_bibblock">Application of fuzzy c-means clustering and semantic ontology in web
query session mining for intelligent information retrieval.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">International Journal of Fuzzy Systems and Advanced
Applications</span>, 8:1–8, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Ruijie Zhang, Qingyao Ai, Yiqun Wu, Yu Ma, and Yiling Liu.

</span>
<span class="ltx_bibblock">Result diversification for legal case retrieval.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">Proceedings of the 32nd ACM International Conference on
Information and Knowledge Management</span>, pages 2349–2358, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Bin Liu, Yiqun Wu, Yue Liu, Fangzhao Zhang, Yunqiu Shao, Chenliang Li, Min
Zhang, and Shaoping Ma.

</span>
<span class="ltx_bibblock">Conversational vs traditional: Comparing search behavior and outcome
in legal case retrieval.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 44th International ACM SIGIR Conference on
Research and Development in Information Retrieval</span>, pages 2018–2022, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Safia Frihat, Cristina Lampros Beckmann, Erik M Hartmann, and Norbert Fuhr.

</span>
<span class="ltx_bibblock">Document difficulty aspects for medical practitioners: Enhancing
information retrieval in personalized search engines.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">Applied Sciences</span>, 13(19):10612, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova.

</span>
<span class="ltx_bibblock">Bert: Pre-training of deep bidirectional transformers for language
understanding.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib10.1.1">arXiv preprint arXiv:1810.04805</span>, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Ilias Chalkidis, Manos Fergadiotis, Prodromos Malakasiotis, Nikolaos Aletras,
and Ion Androutsopoulos.

</span>
<span class="ltx_bibblock">Legal-bert: The muppets straight out of law school.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:2010.02559</span>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Jinhyuk Lee, Wonjin Yoon, Sungdong Kim, Donghyeon Kim, Sunkyu Kim, Chan Ho So,
and Jaewoo Kang.

</span>
<span class="ltx_bibblock">Biobert: a pre-trained biomedical language representation model for
biomedical text mining.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">Bioinformatics</span>, 36(4):1234–1240, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Cynthia Dwork and Aaron Roth.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib13.1.1">The algorithmic foundations of differential privacy</span>.

</span>
<span class="ltx_bibblock">Now Publishers Inc, 2014.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Ninareh Mehrabi, Fred Morstatter, Nripsuta Saxena, Kristina Lerman, and Aram
Galstyan.

</span>
<span class="ltx_bibblock">A survey on bias and fairness in machine learning.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">ACM Computing Surveys (CSUR)</span>, 54(6):1–35, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Christoph Molnar.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">Interpretable machine learning</span>.

</span>
<span class="ltx_bibblock">Lulu. com, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones,
Aidan N Gomez, Łukasz Kaiser, and Illia Polosukhin.

</span>
<span class="ltx_bibblock">Attention is all you need.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib16.1.1">Advances in neural information processing systems</span>, pages
5998–6008, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandara Piktus, Fabio Petroni, Vladimir
Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim
Rocktäschel, and others.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">Advances in Neural Information Processing Systems</span>, volume
33, pages 9459–9474, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova.

</span>
<span class="ltx_bibblock">Bert: Pre-training of deep bidirectional transformers for language
understanding.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:1810.04805</span>, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Nils Reimers and Iryna Gurevych.

</span>
<span class="ltx_bibblock">Sentence-bert: Sentence embeddings using siamese bert-networks.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">Proceedings of the 2019 Conference on Empirical Methods in
Natural Language Processing and the 9th International Joint Conference on
Natural Language Processing (EMNLP-IJCNLP)</span>, pages 3982–3992, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Yu A Malkov and Dmitry A Yashunin.

</span>
<span class="ltx_bibblock">Efficient and robust approximate nearest neighbor search using
hierarchical navigable small world graphs.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">IEEE transactions on pattern analysis and machine intelligence</span>,
42(4):824–836, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Chen Yang, Peilin Zhang, Ruihai Dong, and Jun Xu.

</span>
<span class="ltx_bibblock">Dynamic indexing and document length normalization in information
retrieval systems.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib21.1.1">Proceedings of the 2020 ACM SIGIR International Conference on
Theory of Information Retrieval</span>, pages 221–228, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Daniel Cer, Mona Diab, Eneko Agirre, Inigo Lopez-Gazpio, and Lucia Specia.

</span>
<span class="ltx_bibblock">Semeval-2017 task 1: Semantic textual similarity multilingual and
crosslingual focused evaluation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">Proceedings of the 11th International Workshop on Semantic
Evaluation (SemEval-2017)</span>, pages 1–14, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Jeff Johnson, Matthijs Douze, and Hervé Jégou.

</span>
<span class="ltx_bibblock">Billion-scale similarity search with gpus.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">IEEE Transactions on Big Data</span>, 7(3):535–547, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Tie-Yan Liu.

</span>
<span class="ltx_bibblock">Learning to rank for information retrieval.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib24.1.1">Foundations and Trends in Information Retrieval</span>, 3(3):225–331,
2009.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Jaime Carbonell and Jade Goldstein.

</span>
<span class="ltx_bibblock">The use of mmr, diversity-based reranking for reordering documents
and producing summaries.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib25.1.1">Proceedings of the 21st annual international ACM SIGIR
conference on Research and development in information retrieval</span>, pages
335–336, 1998.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Jul  4 06:26:01 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
