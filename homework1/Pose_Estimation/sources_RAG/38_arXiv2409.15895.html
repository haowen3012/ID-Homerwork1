<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation</title>
<!--Generated on Tue Sep 24 09:05:33 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="Retrieval-augmented Code Generation,  Preference-guided Refactorer,  Deep Reinforcement Learning" lang="en" name="keywords"/>
<base href="/html/2409.15895v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S1" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S2" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S2.SS1" title="In 2. Related Work ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Pretrained Models for Code Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S2.SS2" title="In 2. Related Work ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Retrieval-Augmented Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S2.SS3" title="In 2. Related Work ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Retrieval-Augmented Code Generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Approach</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.SS1" title="In 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Overview</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.SS2" title="In 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Stage 1: Refactored Fine-Tuning</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.SS2.SSS1" title="In 3.2. Stage 1: Refactored Fine-Tuning ‣ 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.1 </span><span class="ltx_text ltx_font_bold">Training to refactor code</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.SS2.SSS2" title="In 3.2. Stage 1: Refactored Fine-Tuning ‣ 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.2 </span><span class="ltx_text ltx_font_bold">Training to utilize information</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.SS3" title="In 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Stage 2: Preference-aware Tuning</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experimental Setup</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.SS1" title="In 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.SS2" title="In 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Base Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.SS3" title="In 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.SS4" title="In 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Implementation Details</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Experimental Results</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS1" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Research Questions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS2" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Does the RRG framework improve the effectiveness over RAG?</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS3" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>What is the effect of various retrievers on the performance of the RRG framework?</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS4" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.4 </span>How do code tokens of varying lengths influence the RRG’s performance?</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS5" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.5 </span>What is the impact of the preference-aware tuning stage on RRG?</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS6" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.6 </span>How is the generalization performance of the frozen refactorer ?</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.SS7" title="In 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.7 </span>Case Study</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S6" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Threats to Validity</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S7" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Conclusion and Future Works</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S8" title="In Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Acknowledgments</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line ltx_leqno">
<h1 class="ltx_title ltx_title_document">Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Xinyu Gao
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id1.1.id1">Shanghai Key Laboratory of Data Science, School of Computer Science,</span><span class="ltx_text ltx_affiliation_institution" id="id2.2.id2">Fudan University</span><span class="ltx_text ltx_affiliation_city" id="id3.3.id3">Shanghai</span><span class="ltx_text ltx_affiliation_country" id="id4.4.id4">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:23210240161@m.fudan.edu.cn">23210240161@m.fudan.edu.cn</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Yun Xiong <sup class="ltx_sup" id="id5.1.id1">🖂</sup>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id6.2.id1">Shanghai Key Laboratory of Data Science, School of Computer Science,</span><span class="ltx_text ltx_affiliation_institution" id="id7.3.id2">Fudan University</span><span class="ltx_text ltx_affiliation_city" id="id8.4.id3">Shanghai</span><span class="ltx_text ltx_affiliation_country" id="id9.5.id4">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:yunx@fudan.edu.cn">yunx@fudan.edu.cn</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Deze Wang
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id10.1.id1">National University of Defense Technology</span><span class="ltx_text ltx_affiliation_city" id="id11.2.id2">Hunan</span><span class="ltx_text ltx_affiliation_country" id="id12.3.id3">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:wangdeze14@nudt.edu.cn">wangdeze14@nudt.edu.cn</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Zhenhan Guan
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id13.1.id1">Shanghai Key Laboratory of Data Science, School of Computer Science,</span><span class="ltx_text ltx_affiliation_institution" id="id14.2.id2">Fudan University</span><span class="ltx_text ltx_affiliation_city" id="id15.3.id3">Shanghai</span><span class="ltx_text ltx_affiliation_country" id="id16.4.id4">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:zhenhan%CB%99guan@163.com">zhenhan˙guan@163.com</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Zejian Shi
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id17.1.id1">Shanghai Key Laboratory of Data Science, School of Computer Science,</span><span class="ltx_text ltx_affiliation_institution" id="id18.2.id2">Fudan University</span><span class="ltx_text ltx_affiliation_city" id="id19.3.id3">Shanghai</span><span class="ltx_text ltx_affiliation_country" id="id20.4.id4">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:zjshi20@fudan.edu.cn">zjshi20@fudan.edu.cn</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Haofen Wang
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id21.1.id1">College of Design and Innovation,</span><span class="ltx_text ltx_affiliation_institution" id="id22.2.id2">Tongji University</span><span class="ltx_text ltx_affiliation_city" id="id23.3.id3">Shanghai</span><span class="ltx_text ltx_affiliation_country" id="id24.4.id4">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:carter.whfcarter@gmail.com">carter.whfcarter@gmail.com</a>
</span></span></span>
<span class="ltx_author_before"> and </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Shanshan Li <sup class="ltx_sup" id="id25.1.id1">🖂</sup>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_institution" id="id26.2.id1">National University of Defense Technology</span><span class="ltx_text ltx_affiliation_city" id="id27.3.id2">Hunan</span><span class="ltx_text ltx_affiliation_country" id="id28.4.id3">China</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:shanshanli@nudt.edu.cn">shanshanli@nudt.edu.cn</a>
</span></span></span>
</div>
<div class="ltx_dates">(2024)</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract.</h6>
<p class="ltx_p" id="id29.id1">Retrieval-augmented code generation utilizes Large Language Models as the generator and significantly expands their code generation capabilities by providing relevant code, documentation, and more via the retriever. The current approach suffers from two primary limitations: 1) <span class="ltx_text ltx_font_bold" id="id29.id1.1">information redundancy.</span> The indiscriminate inclusion of redundant information can result in resource wastage and may misguide generators, affecting their effectiveness and efficiency. 2) <span class="ltx_text ltx_font_bold" id="id29.id1.2">preference gap.</span> Due to different optimization objectives, the retriever strives to procure code with higher ground truth similarity, yet this effort does not substantially benefit the generator. The retriever and the generator may prefer different golden code, and this gap in preference results in a suboptimal design. Additionally, differences in parameterization knowledge acquired during pre-training result in varying preferences among different generators.</p>
<p class="ltx_p" id="id30.id2">To address these limitations, in this paper, we propose <span class="ltx_text ltx_font_bold" id="id30.id2.1">RRG</span> (<span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="id30.id2.2">R</span>etrieve, <span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="id30.id2.3">R</span>efactor, <span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="id30.id2.4">G</span>enerate), a novel framework for effective and efficient code generation. This framework introduces a code refactorer module between the retriever and the generator to bridge them. The refactoring process transforms the raw retrieved code into a more concise, efficient, and model-friendly version. It eliminates redundant information and noise, reducing the input length. Consequently, the generator receives higher-quality context, enabling it to produce more accurate results with lower inference costs. We conducted comprehensive experiments on multiple datasets. In the experiments, we confirmed the existence of a preference gap between the retriever and the generator, and RRG effectively bridges this gap. Specifically, RRG achieved significant performance improvements, with increases of up to 28% on EM, 13% on BLEU, and 6.8% on CodeBLEU.</p>
</div>
<div class="ltx_keywords">Retrieval-augmented Code Generation, Preference-guided Refactorer, Deep Reinforcement Learning
</div>
<span class="ltx_note ltx_note_frontmatter ltx_role_conference" id="id1"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">conference: </span>ACM Conference; Oct 2024; Sacramento, USA</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_journalyear" id="id2"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">journalyear: </span>2024</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_copyright" id="id3"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">copyright: </span>acmlicensed</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_conference" id="id4"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">conference: </span>39th IEEE/ACM International Conference on Automated Software Engineering ; October 27-November 1, 2024; Sacramento, CA, USA</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_booktitle" id="id5"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">booktitle: </span>39th IEEE/ACM International Conference on Automated Software Engineering (ASE ’24), October 27-November 1, 2024, Sacramento, CA, USA</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_doi" id="id6"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">doi: </span>10.1145/3691620.3694987</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_isbn" id="id7"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">isbn: </span>979-8-4007-1248-7/24/10</span></span></span>
<figure class="ltx_figure" id="S0.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="196" id="S0.F1.g1" src="x1.png" width="337"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S0.F1.2.1.1" style="font-size:90%;">Figure 1</span>. </span><span class="ltx_text" id="S0.F1.3.2" style="font-size:90%;">Comparison of two RACG frameworks. The upper shows the conventional approach, where the retrieved code is directly fed to the LLMs directly, but this holds redundant information and is not model-friendly. The lower shows the RRG framework, where the retrieved code is refactored into concise, model-friendly code, which improves the effectiveness and efficiency of the generator. </span></figcaption>
</figure>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1. </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large Language Models (LLMs) <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib35" title="">reid2024gemini, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib67" title="">codegeex, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib40" title="">shen2023pangu, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib47" title="">tian2023chatgpt, </a>)</cite> have attracted significant attention due to their extraordinary capabilities. Many studies <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib64" title="">generaion1, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib37" title="">generation2, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib63" title="">generaion3, </a>)</cite> have applied them to code generation tasks with impressive performance. However, the rapid versioning of code repositories and the large syntactic gaps between programming languages make it difficult to meet expectations for LLMs solely based on in-parametric knowledge <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib24" title="">codegen4lib, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib46" title="">ase-gold, </a>)</cite>. Retrieval-augmented code generation (RACG) <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib32" title="">recoder, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib68" title="">docprompting, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib45" title="">arks, </a>)</cite> significantly enhances the code generation capability of LLMs by utilizing them as generators and providing relevant knowledge through the retriever. Early explorations have alleviated the generator’s knowledge updating and long-tail <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib14" title="">long-tail, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib66" title="">zhao2024ltgc, </a>)</cite> problems to some extent by searching code repositories or retrieving solutions via Internet search engines <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib32" title="">recoder, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib68" title="">docprompting, </a>)</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">However, the existing approach suffers from the following limitations:</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1"><span class="ltx_text ltx_font_bold" id="S1.p3.1.1">i) Information redundancy.</span> Due to the inherent limitations of the retriever or external databases, some superfluous information is inevitably retrieved. If such redundant information is directly incorporated into the generator’s context, it may mislead the generator <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib21" title="">Less-is-More, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib41" title="">inrelevant, </a>)</cite>, and potentially introduce misleading or harmful information, thereby impairing the generator’s overall performance. Additionally, the retriever may retrieve an excessive volume of related documents or code. This not only increases inference costs and risks getting lost in middle <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib25" title="">lost, </a>)</cite>, but also results in the loss of critical information due to exceeding the context length limit for smaller models. Previous researches have explored removal of redundant information from the perspectives of information entropy and relevance <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib54" title="">xu2023recomp, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib3" title="">token_elimination, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib56" title="">crag, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib12" title="">jiang-etal-2023-llmlingua, </a>)</cite>. Generally, tokens with lower perplexity are deemed less crucial for the model’s contextual understanding <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib20" title="">li2023unlocking, </a>)</cite>, and tokens with lower relevance and perplexity are filtered out. This does not consider the relationship between code tokens, and the compressed code depends entirely on the raw code <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib30" title="">pan2024llmlingua, </a>)</cite>. In the RACG pipeline, if the retrieved non-parameterized knowledge lacks relevant code, selective compression also fails to provide the generator with relevant code.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1"><span class="ltx_text ltx_font_bold" id="S1.p4.1.1">ii) Preference gap.</span> From a human perspective, documents containing correct answers are the most helpful in RACG <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib9" title="">rag, </a>)</cite>. Therefore, the retriever is designed to retrieve the most relevant code to better assist the generator. However, our experiments reveal that code snippets more closely related to the reference answers do not necessarily enhance the generator’s effectiveness, as shown by the results presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T3" title="Table 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a>. The model may prefer a code snippet with a clear code structure, low repetition, and novel knowledge not already incorporated into its parameterized knowledge during the pre-training process <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib6" title="">devlin2018bert, </a>)</cite>. The difference between the golden code snippet preferred by the retriever and the generator is termed the preference gap. The existence of this preference gap renders the current RACG framework inadequate. Some studies <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib42" title="">shi2023replug, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib23" title="">radit, </a>)</cite> have attempted to align them by jointly fine-tuning them or utilizing feedback signals from the generator. However, some LLMs accessed through APIs <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib47" title="">tian2023chatgpt, </a>)</cite> cannot be fine-tuned in conjunction with the retriever, nor do they provide logits to compute certain feedback signals. Additionally, changes in the semantic representation of text following the retriever parameter tuning necessitate updating the external database index, which consumes substantial resources in practice.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To address the aforementioned issues, we propose the <span class="ltx_text ltx_font_bold" id="S1.p5.1.1">RRG</span> (<span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="S1.p5.1.2">R</span>etrieval, <span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="S1.p5.1.3">R</span>efactor, <span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="S1.p5.1.4">G</span>eneration) framework. We inserted a new module, a code refactorer, between the retriever and the generator. Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S0.F1" title="Figure 1 ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">1</span></a> shows the difference between our RRG and conventional RACG. This module processes the retrieved code, providing the generator with more efficient and model-friendly contextual information.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">We propose a two-stage training scheme to train a preference-guided refactorer. In the first stage,we use Supervised Fine-tuning (SFT) to train the refactorer for generative compression, and during this process, we inject knowledge from an external knowledge database into the refactorer. Even if the retrieved information lacks validity, the refactorer can still rely on its internal parametric knowledge to generate information that is more relevant to the answer. In the second stage, we bridge the preference gap by tuning the parameters of the refactorer while freezing those of both the generator and the retriever. Specifically, we treat the generator as a reward model and the refactorer as a policy model, using reinforcement learning to optimize the refactorer’s output to better align with the generator’s preference, guided by the generator’s performance on downstream tasks. Notably, after the first stage of training, the refactorer can leverage both non-parametric and internal parametric knowledge to meet the generator’s preference.</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">To comprehensively validate the performance of the RRG, we conducted extensive experiments across multiple datasets. The results demonstrate the remarkable flexibility and synergy of the RRG with any retrievers and generators, significantly enhancing the performance of the generator while reducing inference costs.
In summary, our contributions are as follows:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We propose a novel RACG framework, named RRG, achieved by incorporating a code refactorer module. Experimental results indicate that there indeed exists a gap between the retriever and the generator. This module compresses and optimizes the retrieved code, providing a more concise, efficient, and model-friendly context for the generator. Furthermore, it aligns this preference gap, thereby improving performance while reducing inference costs.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">To train the preference-guided refactorer, we design a two-stage training scheme that first empowers the refactorer to perform generative compression using both parametric and non-parametric knowledge, and then optimizes the refactorer through feedback signals from the generator. This effectively bridges the preference gap between the retriever and the generator.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">Through extensive experiments on multiple datasets, we have verified that RRG significantly enhances the performance of generators of various types and scales in code generation tasks. This demonstrates its strong generalization capability and practical applicability.</p>
</div>
</li>
</ul>
</div>
<figure class="ltx_figure" id="S1.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="255" id="S1.F2.g1" src="x2.png" width="691"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S1.F2.2.1.1" style="font-size:90%;">Figure 2</span>. </span><span class="ltx_text" id="S1.F2.3.2" style="font-size:90%;">The overall architecture of our proposed RRG with Preference-Guided Refactored Tuning.</span></figcaption>
</figure>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2. </span>Related Work</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1. </span>Pretrained Models for Code Generation</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">The evolution of LLMs has profoundly revolutionized the domain of code generation. While early LLMs <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib5" title="">gpt3, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib48" title="">llama, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib34" title="">t5, </a>)</cite> were not initially designed specifically for code generation, their pre-training incorporated a substantial amount of code corpus. This enabled them to exhibit remarkable proficiency in generating code. To further improve the performance of LLMs in code generation, various approaches <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib51" title="">codet5+, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib1" title="">santacoder, </a>)</cite> have extended the pre-trained models using extensive code corpus. The code models like CodeLLaMA <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib38" title="">codellama, </a>)</cite> and CodeGeex <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib67" title="">codegeex, </a>)</cite> have also built upon their base models to significantly enhance performance in code generation and comprehension. CodeGEN <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib29" title="">codegen, </a>)</cite> takes a unique approach, perceiving code generation as a multi-round dialogue task, whereas AST-T5 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib8" title="">gong2024ast, </a>)</cite> incorporates the syntactic intricacies of code into LLMs. These innovations underscore the vast potential of utilizing LLMs for code generation.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2. </span>Retrieval-Augmented Generation</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">RAG <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib23" title="">radit, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib49" title="">rag3, </a>)</cite> enhances LLMs by retrieving relevant knowledge from external knowledge databases, significantly improving the performance of LLMs in knowledge-intensive domains. Researchers continuously optimize the RAG pipeline from three perspectives: what, when, and how. <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.1">What</span> refers to what to use to enhance LLMs, such as Internet search engine <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib26" title="">webglm, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib19" title="">webRAG, </a>)</cite>, knowledge graph <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib53" title="">rag-kg1, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib43" title="">rag-kg2, </a>)</cite>, phrase <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib17" title="">rag-dy1, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib28" title="">rag-dy2, </a>)</cite>, token <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib16" title="">rag-token1, </a>)</cite>, and chunk <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib49" title="">rag3, </a>)</cite>. <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.2">When</span> refers to when to retrieve. Due to the limitation of one-time retrieval at the beginning, Flare <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib13" title="">Active, </a>)</cite> proposes adaptive retrieval for more flexible and efficient knowledge acquisition. Self-RAG <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib2" title="">self-rag, </a>)</cite> enables the generator to reflect and improve its effectiveness through more comprehensive post-retrieval processing. <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.3">How</span> refers to how to use the retrieved information. RECOMP <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib54" title="">xu2023recomp, </a>)</cite> and PRCA <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib57" title="">prca, </a>)</cite> compress and extract the retrieved information, providing a more effective context for the generator. RETRO <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib4" title="">intro, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib50" title="">wang2023shall, </a>)</cite> inputs the vectorized retrieved information into the internal of the model.</p>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1">Additionally, BGM <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib15" title="">bgm, </a>)</cite> starts from the preferences of humans and LLMs, while we begin by studying the gap between the retriever and the generator. Additionally, BGM introduces a reranker, whereas our approach is more akin to a compressor module.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3. </span>Retrieval-Augmented Code Generation</h3>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">In the field of code generation, many studies on RACG have emerged in recent years. Classic works such as REDCODER <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib32" title="">recoder, </a>)</cite>, ReACC , and DocPrompt [3] assist in tasks like code generation, summarization, and completion by retrieving external contexts and documents. Many studies further optimize naive RACG. KNN-TRANX <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib65" title="">knn-tranx, </a>)</cite> further optimized retrieval results through syntax awareness. LAIL <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib18" title="">lail, </a>)</cite> trained retrievers using signals from LLMs to align preferences. RepoFuse <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib22" title="">liang2024repofuse, </a>)</cite> and APICoder <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib59" title="">code-api, </a>)</cite> reduced the retrieval granularity to private function libraries, enhancing the practicality of RAG. RepoCoder <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib60" title="">repocoder, </a>)</cite> optimized retrieval through iterative retrieval, though it incurred significant costs. Repoformer and ARKS <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib45" title="">arks, </a>)</cite> improved efficiency and reduced costs through active retrieval. Toolcoder <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib62" title="">zhang2023toolcoder, </a>)</cite> and Codeagent <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib61" title="">zhang2024codeagent, </a>)</cite> apply the agent-based approach, allowing LLMs to use APIs and various tools to complete code generation.</p>
</div>
<div class="ltx_para" id="S2.SS3.p2">
<p class="ltx_p" id="S2.SS3.p2.1">Existing research in RACG has achieved notable progress. Nevertheless, it has overlooked addressing the preference gaps between the retriever and the generator, and it has failed to incorporate parameterized knowledge to guide the generator. In contrast, our work introduces a refactoring module designed to bridge the preference divide between the retriever and the generator. By harnessing both parameterized and non-parameterized knowledge, this module equips the generator with a richer, higher-quality contextual background.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3. </span>Approach</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1. </span>Overview</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.3">We present our overall architecture and the two-phase training scheme in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S1.F2" title="Figure 2 ‣ 1. Introduction ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">2</span></a>. Given query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">italic_q</annotation></semantics></math>, the retriever will use a retrieval algorithm to fetch the top-K most relevant codes to <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><mi id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">italic_q</annotation></semantics></math> from external knowledge databases. Subsequently, the code refactorer then converts the retrieved code into concise and model-friendly code. After concatenating the refactored code with <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><mi id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">italic_q</annotation></semantics></math> using special tokens, the combined input is then fed to the generator to generate targeted code.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S3.SS1.p2.1.1">External knowledge databases.</span> This can be either nl-code pairs or code documentation. We expect the external knowledge database to contain information related to the <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">italic_q</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.4"><span class="ltx_text ltx_font_bold" id="S3.SS1.p3.4.1">Retriever.</span> It retrieves the most relevant documents from external knowledge databases using a search algorithm, typically a vector retrieval algorithm. This generally requires two semantic representation models for a given corpus <math alttext="C" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.1"><semantics id="S3.SS1.p3.1.m1.1a"><mi id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><ci id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.1d">italic_C</annotation></semantics></math> and <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p3.2.m2.1"><semantics id="S3.SS1.p3.2.m2.1a"><mi id="S3.SS1.p3.2.m2.1.1" xref="S3.SS1.p3.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m2.1b"><ci id="S3.SS1.p3.2.m2.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.2.m2.1d">italic_q</annotation></semantics></math>. The corpus encoder maps the natural language in <math alttext="C" class="ltx_Math" display="inline" id="S3.SS1.p3.3.m3.1"><semantics id="S3.SS1.p3.3.m3.1a"><mi id="S3.SS1.p3.3.m3.1.1" xref="S3.SS1.p3.3.m3.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.3.m3.1b"><ci id="S3.SS1.p3.3.m3.1.1.cmml" xref="S3.SS1.p3.3.m3.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m3.1c">C</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.3.m3.1d">italic_C</annotation></semantics></math> to an n-dimensional vector, while the query encoder maps <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p3.4.m4.1"><semantics id="S3.SS1.p3.4.m4.1a"><mi id="S3.SS1.p3.4.m4.1.1" xref="S3.SS1.p3.4.m4.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.4.m4.1b"><ci id="S3.SS1.p3.4.m4.1.1.cmml" xref="S3.SS1.p3.4.m4.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.4.m4.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.4.m4.1d">italic_q</annotation></semantics></math> to an n-dimensional vector. Semantic similarity is measured based on the similarity between these vectors, which is typically calculated using the dot product.</p>
</div>
<div class="ltx_para" id="S3.SS1.p4">
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(1)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="S(q,NL_{i})=E_{corpus}(NL_{i})\cdot E_{query}(q)" class="ltx_Math" display="block" id="S3.E1.m1.4"><semantics id="S3.E1.m1.4a"><mrow id="S3.E1.m1.4.4" xref="S3.E1.m1.4.4.cmml"><mrow id="S3.E1.m1.3.3.1" xref="S3.E1.m1.3.3.1.cmml"><mi id="S3.E1.m1.3.3.1.3" xref="S3.E1.m1.3.3.1.3.cmml">S</mi><mo id="S3.E1.m1.3.3.1.2" xref="S3.E1.m1.3.3.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.3.3.1.1.1" xref="S3.E1.m1.3.3.1.1.2.cmml"><mo id="S3.E1.m1.3.3.1.1.1.2" stretchy="false" xref="S3.E1.m1.3.3.1.1.2.cmml">(</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">q</mi><mo id="S3.E1.m1.3.3.1.1.1.3" xref="S3.E1.m1.3.3.1.1.2.cmml">,</mo><mrow id="S3.E1.m1.3.3.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.2.cmml">N</mi><mo id="S3.E1.m1.3.3.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.cmml">⁢</mo><msub id="S3.E1.m1.3.3.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.3.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.3.2" xref="S3.E1.m1.3.3.1.1.1.1.3.2.cmml">L</mi><mi id="S3.E1.m1.3.3.1.1.1.1.3.3" xref="S3.E1.m1.3.3.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="S3.E1.m1.3.3.1.1.1.4" stretchy="false" xref="S3.E1.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.4.4.3" xref="S3.E1.m1.4.4.3.cmml">=</mo><mrow id="S3.E1.m1.4.4.2" xref="S3.E1.m1.4.4.2.cmml"><mrow id="S3.E1.m1.4.4.2.1" xref="S3.E1.m1.4.4.2.1.cmml"><mrow id="S3.E1.m1.4.4.2.1.1" xref="S3.E1.m1.4.4.2.1.1.cmml"><msub id="S3.E1.m1.4.4.2.1.1.3" xref="S3.E1.m1.4.4.2.1.1.3.cmml"><mi id="S3.E1.m1.4.4.2.1.1.3.2" xref="S3.E1.m1.4.4.2.1.1.3.2.cmml">E</mi><mrow id="S3.E1.m1.4.4.2.1.1.3.3" xref="S3.E1.m1.4.4.2.1.1.3.3.cmml"><mi id="S3.E1.m1.4.4.2.1.1.3.3.2" xref="S3.E1.m1.4.4.2.1.1.3.3.2.cmml">c</mi><mo id="S3.E1.m1.4.4.2.1.1.3.3.1" xref="S3.E1.m1.4.4.2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.1.3.3.3" xref="S3.E1.m1.4.4.2.1.1.3.3.3.cmml">o</mi><mo id="S3.E1.m1.4.4.2.1.1.3.3.1a" xref="S3.E1.m1.4.4.2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.1.3.3.4" xref="S3.E1.m1.4.4.2.1.1.3.3.4.cmml">r</mi><mo id="S3.E1.m1.4.4.2.1.1.3.3.1b" xref="S3.E1.m1.4.4.2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.1.3.3.5" xref="S3.E1.m1.4.4.2.1.1.3.3.5.cmml">p</mi><mo id="S3.E1.m1.4.4.2.1.1.3.3.1c" xref="S3.E1.m1.4.4.2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.1.3.3.6" xref="S3.E1.m1.4.4.2.1.1.3.3.6.cmml">u</mi><mo id="S3.E1.m1.4.4.2.1.1.3.3.1d" xref="S3.E1.m1.4.4.2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.1.3.3.7" xref="S3.E1.m1.4.4.2.1.1.3.3.7.cmml">s</mi></mrow></msub><mo id="S3.E1.m1.4.4.2.1.1.2" xref="S3.E1.m1.4.4.2.1.1.2.cmml">⁢</mo><mrow id="S3.E1.m1.4.4.2.1.1.1.1" xref="S3.E1.m1.4.4.2.1.1.1.1.1.cmml"><mo id="S3.E1.m1.4.4.2.1.1.1.1.2" stretchy="false" xref="S3.E1.m1.4.4.2.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1.m1.4.4.2.1.1.1.1.1" xref="S3.E1.m1.4.4.2.1.1.1.1.1.cmml"><mi id="S3.E1.m1.4.4.2.1.1.1.1.1.2" xref="S3.E1.m1.4.4.2.1.1.1.1.1.2.cmml">N</mi><mo id="S3.E1.m1.4.4.2.1.1.1.1.1.1" xref="S3.E1.m1.4.4.2.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.E1.m1.4.4.2.1.1.1.1.1.3" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3.cmml"><mi id="S3.E1.m1.4.4.2.1.1.1.1.1.3.2" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3.2.cmml">L</mi><mi id="S3.E1.m1.4.4.2.1.1.1.1.1.3.3" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="S3.E1.m1.4.4.2.1.1.1.1.3" rspace="0.055em" stretchy="false" xref="S3.E1.m1.4.4.2.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.4.4.2.1.2" rspace="0.222em" xref="S3.E1.m1.4.4.2.1.2.cmml">⋅</mo><msub id="S3.E1.m1.4.4.2.1.3" xref="S3.E1.m1.4.4.2.1.3.cmml"><mi id="S3.E1.m1.4.4.2.1.3.2" xref="S3.E1.m1.4.4.2.1.3.2.cmml">E</mi><mrow id="S3.E1.m1.4.4.2.1.3.3" xref="S3.E1.m1.4.4.2.1.3.3.cmml"><mi id="S3.E1.m1.4.4.2.1.3.3.2" xref="S3.E1.m1.4.4.2.1.3.3.2.cmml">q</mi><mo id="S3.E1.m1.4.4.2.1.3.3.1" xref="S3.E1.m1.4.4.2.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.3.3.3" xref="S3.E1.m1.4.4.2.1.3.3.3.cmml">u</mi><mo id="S3.E1.m1.4.4.2.1.3.3.1a" xref="S3.E1.m1.4.4.2.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.3.3.4" xref="S3.E1.m1.4.4.2.1.3.3.4.cmml">e</mi><mo id="S3.E1.m1.4.4.2.1.3.3.1b" xref="S3.E1.m1.4.4.2.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.3.3.5" xref="S3.E1.m1.4.4.2.1.3.3.5.cmml">r</mi><mo id="S3.E1.m1.4.4.2.1.3.3.1c" xref="S3.E1.m1.4.4.2.1.3.3.1.cmml">⁢</mo><mi id="S3.E1.m1.4.4.2.1.3.3.6" xref="S3.E1.m1.4.4.2.1.3.3.6.cmml">y</mi></mrow></msub></mrow><mo id="S3.E1.m1.4.4.2.2" xref="S3.E1.m1.4.4.2.2.cmml">⁢</mo><mrow id="S3.E1.m1.4.4.2.3.2" xref="S3.E1.m1.4.4.2.cmml"><mo id="S3.E1.m1.4.4.2.3.2.1" stretchy="false" xref="S3.E1.m1.4.4.2.cmml">(</mo><mi id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">q</mi><mo id="S3.E1.m1.4.4.2.3.2.2" stretchy="false" xref="S3.E1.m1.4.4.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.4b"><apply id="S3.E1.m1.4.4.cmml" xref="S3.E1.m1.4.4"><eq id="S3.E1.m1.4.4.3.cmml" xref="S3.E1.m1.4.4.3"></eq><apply id="S3.E1.m1.3.3.1.cmml" xref="S3.E1.m1.3.3.1"><times id="S3.E1.m1.3.3.1.2.cmml" xref="S3.E1.m1.3.3.1.2"></times><ci id="S3.E1.m1.3.3.1.3.cmml" xref="S3.E1.m1.3.3.1.3">𝑆</ci><interval closure="open" id="S3.E1.m1.3.3.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1"><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">𝑞</ci><apply id="S3.E1.m1.3.3.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1"><times id="S3.E1.m1.3.3.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1"></times><ci id="S3.E1.m1.3.3.1.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2">𝑁</ci><apply id="S3.E1.m1.3.3.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.3.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.3.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.2">𝐿</ci><ci id="S3.E1.m1.3.3.1.1.1.1.3.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.3">𝑖</ci></apply></apply></interval></apply><apply id="S3.E1.m1.4.4.2.cmml" xref="S3.E1.m1.4.4.2"><times id="S3.E1.m1.4.4.2.2.cmml" xref="S3.E1.m1.4.4.2.2"></times><apply id="S3.E1.m1.4.4.2.1.cmml" xref="S3.E1.m1.4.4.2.1"><ci id="S3.E1.m1.4.4.2.1.2.cmml" xref="S3.E1.m1.4.4.2.1.2">⋅</ci><apply id="S3.E1.m1.4.4.2.1.1.cmml" xref="S3.E1.m1.4.4.2.1.1"><times id="S3.E1.m1.4.4.2.1.1.2.cmml" xref="S3.E1.m1.4.4.2.1.1.2"></times><apply id="S3.E1.m1.4.4.2.1.1.3.cmml" xref="S3.E1.m1.4.4.2.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.2.1.1.3.1.cmml" xref="S3.E1.m1.4.4.2.1.1.3">subscript</csymbol><ci id="S3.E1.m1.4.4.2.1.1.3.2.cmml" xref="S3.E1.m1.4.4.2.1.1.3.2">𝐸</ci><apply id="S3.E1.m1.4.4.2.1.1.3.3.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3"><times id="S3.E1.m1.4.4.2.1.1.3.3.1.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.1"></times><ci id="S3.E1.m1.4.4.2.1.1.3.3.2.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.2">𝑐</ci><ci id="S3.E1.m1.4.4.2.1.1.3.3.3.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.3">𝑜</ci><ci id="S3.E1.m1.4.4.2.1.1.3.3.4.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.4">𝑟</ci><ci id="S3.E1.m1.4.4.2.1.1.3.3.5.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.5">𝑝</ci><ci id="S3.E1.m1.4.4.2.1.1.3.3.6.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.6">𝑢</ci><ci id="S3.E1.m1.4.4.2.1.1.3.3.7.cmml" xref="S3.E1.m1.4.4.2.1.1.3.3.7">𝑠</ci></apply></apply><apply id="S3.E1.m1.4.4.2.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1"><times id="S3.E1.m1.4.4.2.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.1"></times><ci id="S3.E1.m1.4.4.2.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.2">𝑁</ci><apply id="S3.E1.m1.4.4.2.1.1.1.1.1.3.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.2.1.1.1.1.1.3.1.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E1.m1.4.4.2.1.1.1.1.1.3.2.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3.2">𝐿</ci><ci id="S3.E1.m1.4.4.2.1.1.1.1.1.3.3.cmml" xref="S3.E1.m1.4.4.2.1.1.1.1.1.3.3">𝑖</ci></apply></apply></apply><apply id="S3.E1.m1.4.4.2.1.3.cmml" xref="S3.E1.m1.4.4.2.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.2.1.3.1.cmml" xref="S3.E1.m1.4.4.2.1.3">subscript</csymbol><ci id="S3.E1.m1.4.4.2.1.3.2.cmml" xref="S3.E1.m1.4.4.2.1.3.2">𝐸</ci><apply id="S3.E1.m1.4.4.2.1.3.3.cmml" xref="S3.E1.m1.4.4.2.1.3.3"><times id="S3.E1.m1.4.4.2.1.3.3.1.cmml" xref="S3.E1.m1.4.4.2.1.3.3.1"></times><ci id="S3.E1.m1.4.4.2.1.3.3.2.cmml" xref="S3.E1.m1.4.4.2.1.3.3.2">𝑞</ci><ci id="S3.E1.m1.4.4.2.1.3.3.3.cmml" xref="S3.E1.m1.4.4.2.1.3.3.3">𝑢</ci><ci id="S3.E1.m1.4.4.2.1.3.3.4.cmml" xref="S3.E1.m1.4.4.2.1.3.3.4">𝑒</ci><ci id="S3.E1.m1.4.4.2.1.3.3.5.cmml" xref="S3.E1.m1.4.4.2.1.3.3.5">𝑟</ci><ci id="S3.E1.m1.4.4.2.1.3.3.6.cmml" xref="S3.E1.m1.4.4.2.1.3.3.6">𝑦</ci></apply></apply></apply><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.4c">S(q,NL_{i})=E_{corpus}(NL_{i})\cdot E_{query}(q)</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.4d">italic_S ( italic_q , italic_N italic_L start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_E start_POSTSUBSCRIPT italic_c italic_o italic_r italic_p italic_u italic_s end_POSTSUBSCRIPT ( italic_N italic_L start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ⋅ italic_E start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT ( italic_q )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS1.p5">
<p class="ltx_p" id="S3.SS1.p5.3">where <math alttext="E_{corpus}" class="ltx_Math" display="inline" id="S3.SS1.p5.1.m1.1"><semantics id="S3.SS1.p5.1.m1.1a"><msub id="S3.SS1.p5.1.m1.1.1" xref="S3.SS1.p5.1.m1.1.1.cmml"><mi id="S3.SS1.p5.1.m1.1.1.2" xref="S3.SS1.p5.1.m1.1.1.2.cmml">E</mi><mrow id="S3.SS1.p5.1.m1.1.1.3" xref="S3.SS1.p5.1.m1.1.1.3.cmml"><mi id="S3.SS1.p5.1.m1.1.1.3.2" xref="S3.SS1.p5.1.m1.1.1.3.2.cmml">c</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.1.m1.1.1.3.3" xref="S3.SS1.p5.1.m1.1.1.3.3.cmml">o</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1a" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.1.m1.1.1.3.4" xref="S3.SS1.p5.1.m1.1.1.3.4.cmml">r</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1b" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.1.m1.1.1.3.5" xref="S3.SS1.p5.1.m1.1.1.3.5.cmml">p</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1c" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.1.m1.1.1.3.6" xref="S3.SS1.p5.1.m1.1.1.3.6.cmml">u</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1d" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.1.m1.1.1.3.7" xref="S3.SS1.p5.1.m1.1.1.3.7.cmml">s</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.1.m1.1b"><apply id="S3.SS1.p5.1.m1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p5.1.m1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.1.1.2">𝐸</ci><apply id="S3.SS1.p5.1.m1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3"><times id="S3.SS1.p5.1.m1.1.1.3.1.cmml" xref="S3.SS1.p5.1.m1.1.1.3.1"></times><ci id="S3.SS1.p5.1.m1.1.1.3.2.cmml" xref="S3.SS1.p5.1.m1.1.1.3.2">𝑐</ci><ci id="S3.SS1.p5.1.m1.1.1.3.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3">𝑜</ci><ci id="S3.SS1.p5.1.m1.1.1.3.4.cmml" xref="S3.SS1.p5.1.m1.1.1.3.4">𝑟</ci><ci id="S3.SS1.p5.1.m1.1.1.3.5.cmml" xref="S3.SS1.p5.1.m1.1.1.3.5">𝑝</ci><ci id="S3.SS1.p5.1.m1.1.1.3.6.cmml" xref="S3.SS1.p5.1.m1.1.1.3.6">𝑢</ci><ci id="S3.SS1.p5.1.m1.1.1.3.7.cmml" xref="S3.SS1.p5.1.m1.1.1.3.7">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.1.m1.1c">E_{corpus}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.1.m1.1d">italic_E start_POSTSUBSCRIPT italic_c italic_o italic_r italic_p italic_u italic_s end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="E_{query}" class="ltx_Math" display="inline" id="S3.SS1.p5.2.m2.1"><semantics id="S3.SS1.p5.2.m2.1a"><msub id="S3.SS1.p5.2.m2.1.1" xref="S3.SS1.p5.2.m2.1.1.cmml"><mi id="S3.SS1.p5.2.m2.1.1.2" xref="S3.SS1.p5.2.m2.1.1.2.cmml">E</mi><mrow id="S3.SS1.p5.2.m2.1.1.3" xref="S3.SS1.p5.2.m2.1.1.3.cmml"><mi id="S3.SS1.p5.2.m2.1.1.3.2" xref="S3.SS1.p5.2.m2.1.1.3.2.cmml">q</mi><mo id="S3.SS1.p5.2.m2.1.1.3.1" xref="S3.SS1.p5.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.2.m2.1.1.3.3" xref="S3.SS1.p5.2.m2.1.1.3.3.cmml">u</mi><mo id="S3.SS1.p5.2.m2.1.1.3.1a" xref="S3.SS1.p5.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.2.m2.1.1.3.4" xref="S3.SS1.p5.2.m2.1.1.3.4.cmml">e</mi><mo id="S3.SS1.p5.2.m2.1.1.3.1b" xref="S3.SS1.p5.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.2.m2.1.1.3.5" xref="S3.SS1.p5.2.m2.1.1.3.5.cmml">r</mi><mo id="S3.SS1.p5.2.m2.1.1.3.1c" xref="S3.SS1.p5.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.p5.2.m2.1.1.3.6" xref="S3.SS1.p5.2.m2.1.1.3.6.cmml">y</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.2.m2.1b"><apply id="S3.SS1.p5.2.m2.1.1.cmml" xref="S3.SS1.p5.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.2.m2.1.1.1.cmml" xref="S3.SS1.p5.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p5.2.m2.1.1.2.cmml" xref="S3.SS1.p5.2.m2.1.1.2">𝐸</ci><apply id="S3.SS1.p5.2.m2.1.1.3.cmml" xref="S3.SS1.p5.2.m2.1.1.3"><times id="S3.SS1.p5.2.m2.1.1.3.1.cmml" xref="S3.SS1.p5.2.m2.1.1.3.1"></times><ci id="S3.SS1.p5.2.m2.1.1.3.2.cmml" xref="S3.SS1.p5.2.m2.1.1.3.2">𝑞</ci><ci id="S3.SS1.p5.2.m2.1.1.3.3.cmml" xref="S3.SS1.p5.2.m2.1.1.3.3">𝑢</ci><ci id="S3.SS1.p5.2.m2.1.1.3.4.cmml" xref="S3.SS1.p5.2.m2.1.1.3.4">𝑒</ci><ci id="S3.SS1.p5.2.m2.1.1.3.5.cmml" xref="S3.SS1.p5.2.m2.1.1.3.5">𝑟</ci><ci id="S3.SS1.p5.2.m2.1.1.3.6.cmml" xref="S3.SS1.p5.2.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.2.m2.1c">E_{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.2.m2.1d">italic_E start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT</annotation></semantics></math> are the semantic representation models for corpus and queries respectively. And <math alttext="NL_{i}" class="ltx_Math" display="inline" id="S3.SS1.p5.3.m3.1"><semantics id="S3.SS1.p5.3.m3.1a"><mrow id="S3.SS1.p5.3.m3.1.1" xref="S3.SS1.p5.3.m3.1.1.cmml"><mi id="S3.SS1.p5.3.m3.1.1.2" xref="S3.SS1.p5.3.m3.1.1.2.cmml">N</mi><mo id="S3.SS1.p5.3.m3.1.1.1" xref="S3.SS1.p5.3.m3.1.1.1.cmml">⁢</mo><msub id="S3.SS1.p5.3.m3.1.1.3" xref="S3.SS1.p5.3.m3.1.1.3.cmml"><mi id="S3.SS1.p5.3.m3.1.1.3.2" xref="S3.SS1.p5.3.m3.1.1.3.2.cmml">L</mi><mi id="S3.SS1.p5.3.m3.1.1.3.3" xref="S3.SS1.p5.3.m3.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.3.m3.1b"><apply id="S3.SS1.p5.3.m3.1.1.cmml" xref="S3.SS1.p5.3.m3.1.1"><times id="S3.SS1.p5.3.m3.1.1.1.cmml" xref="S3.SS1.p5.3.m3.1.1.1"></times><ci id="S3.SS1.p5.3.m3.1.1.2.cmml" xref="S3.SS1.p5.3.m3.1.1.2">𝑁</ci><apply id="S3.SS1.p5.3.m3.1.1.3.cmml" xref="S3.SS1.p5.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p5.3.m3.1.1.3.1.cmml" xref="S3.SS1.p5.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS1.p5.3.m3.1.1.3.2.cmml" xref="S3.SS1.p5.3.m3.1.1.3.2">𝐿</ci><ci id="S3.SS1.p5.3.m3.1.1.3.3.cmml" xref="S3.SS1.p5.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.3.m3.1c">NL_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.3.m3.1d">italic_N italic_L start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>is the natural language
in (NL-code) pairs.</p>
</div>
<div class="ltx_para" id="S3.SS1.p6">
<p class="ltx_p" id="S3.SS1.p6.1">However, this approach faces the problem of unclear expressions and inaccurate semantic representations, necessitating the consideration of sparse algorithms based on word frequency. We use the BM25 algorithm to perform a second recall on the documents retrieved by semantic retrieval.</p>
</div>
<div class="ltx_para" id="S3.SS1.p7">
<p class="ltx_p" id="S3.SS1.p7.2"><span class="ltx_text ltx_font_bold" id="S3.SS1.p7.2.1">Refactorer and Generator.</span> We introduce a code refactorer module between the retriever and the generator. This module processes the query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p7.1.m1.1"><semantics id="S3.SS1.p7.1.m1.1a"><mi id="S3.SS1.p7.1.m1.1.1" xref="S3.SS1.p7.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p7.1.m1.1b"><ci id="S3.SS1.p7.1.m1.1.1.cmml" xref="S3.SS1.p7.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p7.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p7.1.m1.1d">italic_q</annotation></semantics></math> along with the top-K relevant codes retrieved by the retriever, with the goal of extracting concise, model-friendly code snippets to better guide the generator. The generator, on the other hand, focuses on directly generating the target code based on the refined contextual information and query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p7.2.m2.1"><semantics id="S3.SS1.p7.2.m2.1a"><mi id="S3.SS1.p7.2.m2.1.1" xref="S3.SS1.p7.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p7.2.m2.1b"><ci id="S3.SS1.p7.2.m2.1.1.cmml" xref="S3.SS1.p7.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p7.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p7.2.m2.1d">italic_q</annotation></semantics></math>. We aim for the refactorer to both act as a compressor and align the preferences of the retriever and the generator <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib15" title="">bgm, </a>)</cite>. To achieve this, we optimize the refactorer and the generator through a two-stage training scheme.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2. </span>Stage 1: Refactored Fine-Tuning </h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">During the refactored fine-tuning phase, we train the refactorer to generate compressed code based on human preference, and we train generators to use external knowledge for generating target code. In this section, we provide a detailed description of how to supervise the training of the refactorer and the generator.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1. </span><span class="ltx_text ltx_font_bold" id="S3.SS2.SSS1.1.1">Training to refactor code</span>
</h4>
<div class="ltx_para" id="S3.SS2.SSS1.p1">
<p class="ltx_p" id="S3.SS2.SSS1.p1.1">The process of refactoring aims to condense the retrieved code to generate higher quality code snippets. At this stage, our focus is solely on refactoring the code, without considering alignment preferences. RACG is an open-book generative task. From a human perspective, providing relevant code snippets that closely resemble the target code significantly enhances the generator’s performance. Consequently, we directly train the code refactorer to produce the target code, ensuring that the generated code closely aligns with our expectations. This condenses the retrieved code into a more concise form. Furthermore, we integrate knowledge from the query, relevant code, and target code into the refactorer, enabling it to produce code tokens pertinent to the query, even when the information retrieved by the retriever may not be perfectly relevant.</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS1.p2">
<p class="ltx_p" id="S3.SS2.SSS1.p2.1">We formalize this task as a sequence-to-sequence code generation task, i.e., generative-compression. To realize the code refactorer, we employ encoder-decoder models such as T5 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib34" title="">t5, </a>)</cite> and CodeT5 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib52" title="">codet5, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib51" title="">codet5+, </a>)</cite>. Such architectures perform well on summarization and generation tasks.</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS1.p3">
<p class="ltx_p" id="S3.SS2.SSS1.p3.2">Specifically, we concatenate the top-k retrieved codes with query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p3.1.m1.1"><semantics id="S3.SS2.SSS1.p3.1.m1.1a"><mi id="S3.SS2.SSS1.p3.1.m1.1.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p3.1.m1.1b"><ci id="S3.SS2.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p3.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p3.1.m1.1d">italic_q</annotation></semantics></math> via special tokens, where these k codes are also separated using special tokens and ranked based on their natural language relevancy to the query. Subsequently, the encoder model of the code refactorer takes in this sequence of tokens and generates an implicit vector representation that contains the contextual information of the original inputs, based on which the decoder generates tokens successively in an autoregressive mode. The actual output is a probability distribution of tokens, which is transformed into code tokens displayed in the vocabulary through a sampling strategy. The decoder continuously predicts the next token based on the generated tokens until the end-of-sequence token <math alttext="[EOS]" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p3.2.m2.1"><semantics id="S3.SS2.SSS1.p3.2.m2.1a"><mrow id="S3.SS2.SSS1.p3.2.m2.1.1.1" xref="S3.SS2.SSS1.p3.2.m2.1.1.2.cmml"><mo id="S3.SS2.SSS1.p3.2.m2.1.1.1.2" stretchy="false" xref="S3.SS2.SSS1.p3.2.m2.1.1.2.1.cmml">[</mo><mrow id="S3.SS2.SSS1.p3.2.m2.1.1.1.1" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.cmml"><mi id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.2" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.2.cmml">E</mi><mo id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.3" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.3.cmml">O</mi><mo id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1a" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.4" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.4.cmml">S</mi></mrow><mo id="S3.SS2.SSS1.p3.2.m2.1.1.1.3" stretchy="false" xref="S3.SS2.SSS1.p3.2.m2.1.1.2.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p3.2.m2.1b"><apply id="S3.SS2.SSS1.p3.2.m2.1.1.2.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1"><csymbol cd="latexml" id="S3.SS2.SSS1.p3.2.m2.1.1.2.1.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.2">delimited-[]</csymbol><apply id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1"><times id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.1"></times><ci id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.2.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.2">𝐸</ci><ci id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.3.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.3">𝑂</ci><ci id="S3.SS2.SSS1.p3.2.m2.1.1.1.1.4.cmml" xref="S3.SS2.SSS1.p3.2.m2.1.1.1.1.4">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p3.2.m2.1c">[EOS]</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p3.2.m2.1d">[ italic_E italic_O italic_S ]</annotation></semantics></math> is generated.</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS1.p4">
<p class="ltx_p" id="S3.SS2.SSS1.p4.1">We use cross-entropy loss function to measure the disparity between the refactorer’s output and the golden code, optimizing continuously to minimize this disparity, thus bringing the generated code closer to the expected target. The cross-entropy loss function is as follows:</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS1.p5">
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(2)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="Loss=-\frac{1}{T}\sum_{t=1}^{T}\sum_{i=1}^{V}y_{t}(i)\cdot\log(p_{t}(i))" class="ltx_Math" display="block" id="S3.E2.m1.4"><semantics id="S3.E2.m1.4a"><mrow id="S3.E2.m1.4.4" xref="S3.E2.m1.4.4.cmml"><mrow id="S3.E2.m1.4.4.3" xref="S3.E2.m1.4.4.3.cmml"><mi id="S3.E2.m1.4.4.3.2" xref="S3.E2.m1.4.4.3.2.cmml">L</mi><mo id="S3.E2.m1.4.4.3.1" xref="S3.E2.m1.4.4.3.1.cmml">⁢</mo><mi id="S3.E2.m1.4.4.3.3" xref="S3.E2.m1.4.4.3.3.cmml">o</mi><mo id="S3.E2.m1.4.4.3.1a" xref="S3.E2.m1.4.4.3.1.cmml">⁢</mo><mi id="S3.E2.m1.4.4.3.4" xref="S3.E2.m1.4.4.3.4.cmml">s</mi><mo id="S3.E2.m1.4.4.3.1b" xref="S3.E2.m1.4.4.3.1.cmml">⁢</mo><mi id="S3.E2.m1.4.4.3.5" xref="S3.E2.m1.4.4.3.5.cmml">s</mi></mrow><mo id="S3.E2.m1.4.4.2" xref="S3.E2.m1.4.4.2.cmml">=</mo><mrow id="S3.E2.m1.4.4.1" xref="S3.E2.m1.4.4.1.cmml"><mo id="S3.E2.m1.4.4.1a" xref="S3.E2.m1.4.4.1.cmml">−</mo><mrow id="S3.E2.m1.4.4.1.1" xref="S3.E2.m1.4.4.1.1.cmml"><mfrac id="S3.E2.m1.4.4.1.1.3" xref="S3.E2.m1.4.4.1.1.3.cmml"><mn id="S3.E2.m1.4.4.1.1.3.2" xref="S3.E2.m1.4.4.1.1.3.2.cmml">1</mn><mi id="S3.E2.m1.4.4.1.1.3.3" xref="S3.E2.m1.4.4.1.1.3.3.cmml">T</mi></mfrac><mo id="S3.E2.m1.4.4.1.1.2" xref="S3.E2.m1.4.4.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.4.4.1.1.1" xref="S3.E2.m1.4.4.1.1.1.cmml"><munderover id="S3.E2.m1.4.4.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.2.cmml"><mo id="S3.E2.m1.4.4.1.1.1.2.2.2" movablelimits="false" rspace="0em" xref="S3.E2.m1.4.4.1.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E2.m1.4.4.1.1.1.2.2.3" xref="S3.E2.m1.4.4.1.1.1.2.2.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.2.2.3.2" xref="S3.E2.m1.4.4.1.1.1.2.2.3.2.cmml">t</mi><mo id="S3.E2.m1.4.4.1.1.1.2.2.3.1" xref="S3.E2.m1.4.4.1.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E2.m1.4.4.1.1.1.2.2.3.3" xref="S3.E2.m1.4.4.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S3.E2.m1.4.4.1.1.1.2.3" xref="S3.E2.m1.4.4.1.1.1.2.3.cmml">T</mi></munderover><mrow id="S3.E2.m1.4.4.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.cmml"><munderover id="S3.E2.m1.4.4.1.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.1.2.cmml"><mo id="S3.E2.m1.4.4.1.1.1.1.2.2.2" movablelimits="false" xref="S3.E2.m1.4.4.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.2.2.3" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.2.2.3.2" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="S3.E2.m1.4.4.1.1.1.1.2.2.3.1" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E2.m1.4.4.1.1.1.1.2.2.3.3" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S3.E2.m1.4.4.1.1.1.1.2.3" xref="S3.E2.m1.4.4.1.1.1.1.2.3.cmml">V</mi></munderover><mrow id="S3.E2.m1.4.4.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.cmml"><mrow id="S3.E2.m1.4.4.1.1.1.1.1.3" xref="S3.E2.m1.4.4.1.1.1.1.1.3.cmml"><msub id="S3.E2.m1.4.4.1.1.1.1.1.3.2" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.1.3.2.2" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2.2.cmml">y</mi><mi id="S3.E2.m1.4.4.1.1.1.1.1.3.2.3" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2.3.cmml">t</mi></msub><mo id="S3.E2.m1.4.4.1.1.1.1.1.3.1" xref="S3.E2.m1.4.4.1.1.1.1.1.3.1.cmml">⁢</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1.3.3.2" xref="S3.E2.m1.4.4.1.1.1.1.1.3.cmml"><mo id="S3.E2.m1.4.4.1.1.1.1.1.3.3.2.1" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.3.cmml">(</mo><mi id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">i</mi><mo id="S3.E2.m1.4.4.1.1.1.1.1.3.3.2.2" rspace="0.055em" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.3.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.4.4.1.1.1.1.1.2" rspace="0.222em" xref="S3.E2.m1.4.4.1.1.1.1.1.2.cmml">⋅</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml"><mi id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml">log</mi><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1a" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml"><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml">(</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.2.cmml">p</mi><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.3.2.1" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml">i</mi><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.3.2.2" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.4b"><apply id="S3.E2.m1.4.4.cmml" xref="S3.E2.m1.4.4"><eq id="S3.E2.m1.4.4.2.cmml" xref="S3.E2.m1.4.4.2"></eq><apply id="S3.E2.m1.4.4.3.cmml" xref="S3.E2.m1.4.4.3"><times id="S3.E2.m1.4.4.3.1.cmml" xref="S3.E2.m1.4.4.3.1"></times><ci id="S3.E2.m1.4.4.3.2.cmml" xref="S3.E2.m1.4.4.3.2">𝐿</ci><ci id="S3.E2.m1.4.4.3.3.cmml" xref="S3.E2.m1.4.4.3.3">𝑜</ci><ci id="S3.E2.m1.4.4.3.4.cmml" xref="S3.E2.m1.4.4.3.4">𝑠</ci><ci id="S3.E2.m1.4.4.3.5.cmml" xref="S3.E2.m1.4.4.3.5">𝑠</ci></apply><apply id="S3.E2.m1.4.4.1.cmml" xref="S3.E2.m1.4.4.1"><minus id="S3.E2.m1.4.4.1.2.cmml" xref="S3.E2.m1.4.4.1"></minus><apply id="S3.E2.m1.4.4.1.1.cmml" xref="S3.E2.m1.4.4.1.1"><times id="S3.E2.m1.4.4.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.2"></times><apply id="S3.E2.m1.4.4.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.3"><divide id="S3.E2.m1.4.4.1.1.3.1.cmml" xref="S3.E2.m1.4.4.1.1.3"></divide><cn id="S3.E2.m1.4.4.1.1.3.2.cmml" type="integer" xref="S3.E2.m1.4.4.1.1.3.2">1</cn><ci id="S3.E2.m1.4.4.1.1.3.3.cmml" xref="S3.E2.m1.4.4.1.1.3.3">𝑇</ci></apply><apply id="S3.E2.m1.4.4.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1"><apply id="S3.E2.m1.4.4.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.2">superscript</csymbol><apply id="S3.E2.m1.4.4.1.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.2.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.2">subscript</csymbol><sum id="S3.E2.m1.4.4.1.1.1.2.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.2.2.2"></sum><apply id="S3.E2.m1.4.4.1.1.1.2.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.2.2.3"><eq id="S3.E2.m1.4.4.1.1.1.2.2.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.2.2.3.1"></eq><ci id="S3.E2.m1.4.4.1.1.1.2.2.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.2.2.3.2">𝑡</ci><cn id="S3.E2.m1.4.4.1.1.1.2.2.3.3.cmml" type="integer" xref="S3.E2.m1.4.4.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S3.E2.m1.4.4.1.1.1.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.2.3">𝑇</ci></apply><apply id="S3.E2.m1.4.4.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1"><apply id="S3.E2.m1.4.4.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2">superscript</csymbol><apply id="S3.E2.m1.4.4.1.1.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.2.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2">subscript</csymbol><sum id="S3.E2.m1.4.4.1.1.1.1.2.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.2"></sum><apply id="S3.E2.m1.4.4.1.1.1.1.2.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3"><eq id="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.1"></eq><ci id="S3.E2.m1.4.4.1.1.1.1.2.2.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.2">𝑖</ci><cn id="S3.E2.m1.4.4.1.1.1.1.2.2.3.3.cmml" type="integer" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S3.E2.m1.4.4.1.1.1.1.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.3">𝑉</ci></apply><apply id="S3.E2.m1.4.4.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1"><ci id="S3.E2.m1.4.4.1.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.2">⋅</ci><apply id="S3.E2.m1.4.4.1.1.1.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3"><times id="S3.E2.m1.4.4.1.1.1.1.1.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3.1"></times><apply id="S3.E2.m1.4.4.1.1.1.1.1.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.1.3.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.1.1.1.3.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2.2">𝑦</ci><ci id="S3.E2.m1.4.4.1.1.1.1.1.3.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.3.2.3">𝑡</ci></apply><ci id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">𝑖</ci></apply><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1"><log id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3"></log><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1"><times id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.1"></times><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.2">𝑝</ci><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.1.1.1.2.3">𝑡</ci></apply><ci id="S3.E2.m1.2.2.cmml" xref="S3.E2.m1.2.2">𝑖</ci></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.4c">Loss=-\frac{1}{T}\sum_{t=1}^{T}\sum_{i=1}^{V}y_{t}(i)\cdot\log(p_{t}(i))</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.4d">italic_L italic_o italic_s italic_s = - divide start_ARG 1 end_ARG start_ARG italic_T end_ARG ∑ start_POSTSUBSCRIPT italic_t = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_V end_POSTSUPERSCRIPT italic_y start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_i ) ⋅ roman_log ( italic_p start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_i ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS2.SSS1.p6">
<p class="ltx_p" id="S3.SS2.SSS1.p6.6">where <math alttext="T" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.1.m1.1"><semantics id="S3.SS2.SSS1.p6.1.m1.1a"><mi id="S3.SS2.SSS1.p6.1.m1.1.1" xref="S3.SS2.SSS1.p6.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.1.m1.1b"><ci id="S3.SS2.SSS1.p6.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p6.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.1.m1.1c">T</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.1.m1.1d">italic_T</annotation></semantics></math> is the length of the sequence, <math alttext="V" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.2.m2.1"><semantics id="S3.SS2.SSS1.p6.2.m2.1a"><mi id="S3.SS2.SSS1.p6.2.m2.1.1" xref="S3.SS2.SSS1.p6.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.2.m2.1b"><ci id="S3.SS2.SSS1.p6.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p6.2.m2.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.2.m2.1c">V</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.2.m2.1d">italic_V</annotation></semantics></math> is the size of the vocabulary, and <math alttext="y_{t}(i)" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.3.m3.1"><semantics id="S3.SS2.SSS1.p6.3.m3.1a"><mrow id="S3.SS2.SSS1.p6.3.m3.1.2" xref="S3.SS2.SSS1.p6.3.m3.1.2.cmml"><msub id="S3.SS2.SSS1.p6.3.m3.1.2.2" xref="S3.SS2.SSS1.p6.3.m3.1.2.2.cmml"><mi id="S3.SS2.SSS1.p6.3.m3.1.2.2.2" xref="S3.SS2.SSS1.p6.3.m3.1.2.2.2.cmml">y</mi><mi id="S3.SS2.SSS1.p6.3.m3.1.2.2.3" xref="S3.SS2.SSS1.p6.3.m3.1.2.2.3.cmml">t</mi></msub><mo id="S3.SS2.SSS1.p6.3.m3.1.2.1" xref="S3.SS2.SSS1.p6.3.m3.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.SSS1.p6.3.m3.1.2.3.2" xref="S3.SS2.SSS1.p6.3.m3.1.2.cmml"><mo id="S3.SS2.SSS1.p6.3.m3.1.2.3.2.1" stretchy="false" xref="S3.SS2.SSS1.p6.3.m3.1.2.cmml">(</mo><mi id="S3.SS2.SSS1.p6.3.m3.1.1" xref="S3.SS2.SSS1.p6.3.m3.1.1.cmml">i</mi><mo id="S3.SS2.SSS1.p6.3.m3.1.2.3.2.2" stretchy="false" xref="S3.SS2.SSS1.p6.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.3.m3.1b"><apply id="S3.SS2.SSS1.p6.3.m3.1.2.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2"><times id="S3.SS2.SSS1.p6.3.m3.1.2.1.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2.1"></times><apply id="S3.SS2.SSS1.p6.3.m3.1.2.2.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2.2"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p6.3.m3.1.2.2.1.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2.2">subscript</csymbol><ci id="S3.SS2.SSS1.p6.3.m3.1.2.2.2.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2.2.2">𝑦</ci><ci id="S3.SS2.SSS1.p6.3.m3.1.2.2.3.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.2.2.3">𝑡</ci></apply><ci id="S3.SS2.SSS1.p6.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p6.3.m3.1.1">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.3.m3.1c">y_{t}(i)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.3.m3.1d">italic_y start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_i )</annotation></semantics></math> and <math alttext="p_{t}(i)" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.4.m4.1"><semantics id="S3.SS2.SSS1.p6.4.m4.1a"><mrow id="S3.SS2.SSS1.p6.4.m4.1.2" xref="S3.SS2.SSS1.p6.4.m4.1.2.cmml"><msub id="S3.SS2.SSS1.p6.4.m4.1.2.2" xref="S3.SS2.SSS1.p6.4.m4.1.2.2.cmml"><mi id="S3.SS2.SSS1.p6.4.m4.1.2.2.2" xref="S3.SS2.SSS1.p6.4.m4.1.2.2.2.cmml">p</mi><mi id="S3.SS2.SSS1.p6.4.m4.1.2.2.3" xref="S3.SS2.SSS1.p6.4.m4.1.2.2.3.cmml">t</mi></msub><mo id="S3.SS2.SSS1.p6.4.m4.1.2.1" xref="S3.SS2.SSS1.p6.4.m4.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.SSS1.p6.4.m4.1.2.3.2" xref="S3.SS2.SSS1.p6.4.m4.1.2.cmml"><mo id="S3.SS2.SSS1.p6.4.m4.1.2.3.2.1" stretchy="false" xref="S3.SS2.SSS1.p6.4.m4.1.2.cmml">(</mo><mi id="S3.SS2.SSS1.p6.4.m4.1.1" xref="S3.SS2.SSS1.p6.4.m4.1.1.cmml">i</mi><mo id="S3.SS2.SSS1.p6.4.m4.1.2.3.2.2" stretchy="false" xref="S3.SS2.SSS1.p6.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.4.m4.1b"><apply id="S3.SS2.SSS1.p6.4.m4.1.2.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2"><times id="S3.SS2.SSS1.p6.4.m4.1.2.1.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2.1"></times><apply id="S3.SS2.SSS1.p6.4.m4.1.2.2.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2.2"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p6.4.m4.1.2.2.1.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2.2">subscript</csymbol><ci id="S3.SS2.SSS1.p6.4.m4.1.2.2.2.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2.2.2">𝑝</ci><ci id="S3.SS2.SSS1.p6.4.m4.1.2.2.3.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.2.2.3">𝑡</ci></apply><ci id="S3.SS2.SSS1.p6.4.m4.1.1.cmml" xref="S3.SS2.SSS1.p6.4.m4.1.1">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.4.m4.1c">p_{t}(i)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.4.m4.1d">italic_p start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_i )</annotation></semantics></math> are the probabilities of the <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.5.m5.1"><semantics id="S3.SS2.SSS1.p6.5.m5.1a"><mi id="S3.SS2.SSS1.p6.5.m5.1.1" xref="S3.SS2.SSS1.p6.5.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.5.m5.1b"><ci id="S3.SS2.SSS1.p6.5.m5.1.1.cmml" xref="S3.SS2.SSS1.p6.5.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.5.m5.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.5.m5.1d">italic_i</annotation></semantics></math>-th word in the vocabulary at time step <math alttext="t" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p6.6.m6.1"><semantics id="S3.SS2.SSS1.p6.6.m6.1a"><mi id="S3.SS2.SSS1.p6.6.m6.1.1" xref="S3.SS2.SSS1.p6.6.m6.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p6.6.m6.1b"><ci id="S3.SS2.SSS1.p6.6.m6.1.1.cmml" xref="S3.SS2.SSS1.p6.6.m6.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p6.6.m6.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p6.6.m6.1d">italic_t</annotation></semantics></math> according to the true distribution and the model’s predicted distribution, respectively.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2. </span><span class="ltx_text ltx_font_bold" id="S3.SS2.SSS2.1.1">Training to utilize information</span>
</h4>
<div class="ltx_para" id="S3.SS2.SSS2.p1">
<p class="ltx_p" id="S3.SS2.SSS2.p1.3">To address context-based code generation tasks, we choose autoregressive models (e.g., GPT-3 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib5" title="">gpt3, </a>)</cite>, CodeGPT <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib27" title="">codegpt, </a>)</cite>, etc.) as generators, which show excellent performance in generative tasks. In traditional code generation tasks, the generator produces the target code solely based on a given query. However, in the RACG framework, the input of the generator combines the query and the retrieved code.
In order to adapt to the specific input form, we fine-tuned the generator. In addition, in the RRG framework, to ensure that the generator matches the output of the refactoring, we limit the length of the relevant code in the SFT phase to the same maximum output length of the refactorings. By cropping the relevant code through a specifically set window, we can shorten the input context length for the model. This not only reduces the complexity of training but also allows the model to concentrate on extracting crucial information from the limited context, thus facilitating the generation of the target code.
Specifically, the input to the model contains the query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.1.m1.1"><semantics id="S3.SS2.SSS2.p1.1.m1.1a"><mi id="S3.SS2.SSS2.p1.1.m1.1.1" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b"><ci id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.1.m1.1d">italic_q</annotation></semantics></math> and the cropped relevant code. First, we use the generator’s tokenizer to process the relevant code with the splitter, and adjust its length to a fixed-length relevant-code<sub class="ltx_sub" id="S3.SS2.SSS2.p1.3.1"><span class="ltx_text ltx_font_italic" id="S3.SS2.SSS2.p1.3.1.1">cropped</span></sub> by cropping or padding operations. Subsequently, we concatenate the processed <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.3.m3.1"><semantics id="S3.SS2.SSS2.p1.3.m3.1a"><mi id="S3.SS2.SSS2.p1.3.m3.1.1" xref="S3.SS2.SSS2.p1.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.3.m3.1b"><ci id="S3.SS2.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p1.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.3.m3.1d">italic_q</annotation></semantics></math>, relevant-code-cropped, and the target code via a special token.</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS2.p2">
<p class="ltx_p" id="S3.SS2.SSS2.p2.1">During training, we calculate the loss by comparing the probability distribution of the predicted next tokens at corresponding positions in the target code with the ground truth tokens. Specifically, we utilize the cross-entropy loss function to measure the discrepancy between the predicted and the ground truth distributions.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3. </span>Stage 2: Preference-aware Tuning </h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">In the preference-aware-tuning phase, the refactorer is expected to align the preference of the retriever and the generator based on the non-parameterized knowledge and the internal parameterized knowledge. We treat the generator as a reward model and the refactorer as a strategy model <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib44" title="">ppo1, </a>)</cite>. We adjust the behavior of the strategy model based on the direct performance of the generator on downstream tasks. The code refactorer’s action at a time step is to generate a token. However, using the reward model to give feedback on every token would be resource-intensive and could lose the global perspective, neglecting the relationship between tokens. Therefore, we take into consideration the start of the refactoring from the beginning of token generation to the generation of [EOS] token, i.e., the generation of a complete sentence, as the action of one time step of the refactorer <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib58" title="">ppo2, </a>)</cite>. To avoid training instability caused by the significant disparity between the initial refactorer’s output and the generator’s preference, we employ a PPO <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib39" title="">ppo, </a>)</cite> strategy that is more suitable for our scenario.</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">In Equation <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S3.E3" title="In 3.3. Stage 2: Preference-aware Tuning ‣ 3. Approach ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, the policy loss function of the PPO algorithm is presented. This is a clipped objective function that improves the training stability of the policy by limiting the changes made to the policy during each training epoch.</p>
</div>
<div class="ltx_para" id="S3.SS3.p3">
<p class="ltx_p" id="S3.SS3.p3.9">The ratio <math alttext="r_{t}(\theta)" class="ltx_Math" display="inline" id="S3.SS3.p3.1.m1.1"><semantics id="S3.SS3.p3.1.m1.1a"><mrow id="S3.SS3.p3.1.m1.1.2" xref="S3.SS3.p3.1.m1.1.2.cmml"><msub id="S3.SS3.p3.1.m1.1.2.2" xref="S3.SS3.p3.1.m1.1.2.2.cmml"><mi id="S3.SS3.p3.1.m1.1.2.2.2" xref="S3.SS3.p3.1.m1.1.2.2.2.cmml">r</mi><mi id="S3.SS3.p3.1.m1.1.2.2.3" xref="S3.SS3.p3.1.m1.1.2.2.3.cmml">t</mi></msub><mo id="S3.SS3.p3.1.m1.1.2.1" xref="S3.SS3.p3.1.m1.1.2.1.cmml">⁢</mo><mrow id="S3.SS3.p3.1.m1.1.2.3.2" xref="S3.SS3.p3.1.m1.1.2.cmml"><mo id="S3.SS3.p3.1.m1.1.2.3.2.1" stretchy="false" xref="S3.SS3.p3.1.m1.1.2.cmml">(</mo><mi id="S3.SS3.p3.1.m1.1.1" xref="S3.SS3.p3.1.m1.1.1.cmml">θ</mi><mo id="S3.SS3.p3.1.m1.1.2.3.2.2" stretchy="false" xref="S3.SS3.p3.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m1.1b"><apply id="S3.SS3.p3.1.m1.1.2.cmml" xref="S3.SS3.p3.1.m1.1.2"><times id="S3.SS3.p3.1.m1.1.2.1.cmml" xref="S3.SS3.p3.1.m1.1.2.1"></times><apply id="S3.SS3.p3.1.m1.1.2.2.cmml" xref="S3.SS3.p3.1.m1.1.2.2"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.1.2.2.1.cmml" xref="S3.SS3.p3.1.m1.1.2.2">subscript</csymbol><ci id="S3.SS3.p3.1.m1.1.2.2.2.cmml" xref="S3.SS3.p3.1.m1.1.2.2.2">𝑟</ci><ci id="S3.SS3.p3.1.m1.1.2.2.3.cmml" xref="S3.SS3.p3.1.m1.1.2.2.3">𝑡</ci></apply><ci id="S3.SS3.p3.1.m1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m1.1c">r_{t}(\theta)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.1.m1.1d">italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ )</annotation></semantics></math> is defined as the probability of taking action <math alttext="a_{t}" class="ltx_Math" display="inline" id="S3.SS3.p3.2.m2.1"><semantics id="S3.SS3.p3.2.m2.1a"><msub id="S3.SS3.p3.2.m2.1.1" xref="S3.SS3.p3.2.m2.1.1.cmml"><mi id="S3.SS3.p3.2.m2.1.1.2" xref="S3.SS3.p3.2.m2.1.1.2.cmml">a</mi><mi id="S3.SS3.p3.2.m2.1.1.3" xref="S3.SS3.p3.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.2.m2.1b"><apply id="S3.SS3.p3.2.m2.1.1.cmml" xref="S3.SS3.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.2.m2.1.1.1.cmml" xref="S3.SS3.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p3.2.m2.1.1.2.cmml" xref="S3.SS3.p3.2.m2.1.1.2">𝑎</ci><ci id="S3.SS3.p3.2.m2.1.1.3.cmml" xref="S3.SS3.p3.2.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.2.m2.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.2.m2.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> under the current policy <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS3.p3.3.m3.1"><semantics id="S3.SS3.p3.3.m3.1a"><msub id="S3.SS3.p3.3.m3.1.1" xref="S3.SS3.p3.3.m3.1.1.cmml"><mi id="S3.SS3.p3.3.m3.1.1.2" xref="S3.SS3.p3.3.m3.1.1.2.cmml">π</mi><mi id="S3.SS3.p3.3.m3.1.1.3" xref="S3.SS3.p3.3.m3.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.3.m3.1b"><apply id="S3.SS3.p3.3.m3.1.1.cmml" xref="S3.SS3.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.3.m3.1.1.1.cmml" xref="S3.SS3.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.p3.3.m3.1.1.2.cmml" xref="S3.SS3.p3.3.m3.1.1.2">𝜋</ci><ci id="S3.SS3.p3.3.m3.1.1.3.cmml" xref="S3.SS3.p3.3.m3.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.3.m3.1c">\pi_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.3.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math> divided by the probability of taking the same action under the previous policy <math alttext="\pi_{\theta_{old}}" class="ltx_Math" display="inline" id="S3.SS3.p3.4.m4.1"><semantics id="S3.SS3.p3.4.m4.1a"><msub id="S3.SS3.p3.4.m4.1.1" xref="S3.SS3.p3.4.m4.1.1.cmml"><mi id="S3.SS3.p3.4.m4.1.1.2" xref="S3.SS3.p3.4.m4.1.1.2.cmml">π</mi><msub id="S3.SS3.p3.4.m4.1.1.3" xref="S3.SS3.p3.4.m4.1.1.3.cmml"><mi id="S3.SS3.p3.4.m4.1.1.3.2" xref="S3.SS3.p3.4.m4.1.1.3.2.cmml">θ</mi><mrow id="S3.SS3.p3.4.m4.1.1.3.3" xref="S3.SS3.p3.4.m4.1.1.3.3.cmml"><mi id="S3.SS3.p3.4.m4.1.1.3.3.2" xref="S3.SS3.p3.4.m4.1.1.3.3.2.cmml">o</mi><mo id="S3.SS3.p3.4.m4.1.1.3.3.1" xref="S3.SS3.p3.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.4.m4.1.1.3.3.3" xref="S3.SS3.p3.4.m4.1.1.3.3.3.cmml">l</mi><mo id="S3.SS3.p3.4.m4.1.1.3.3.1a" xref="S3.SS3.p3.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.4.m4.1.1.3.3.4" xref="S3.SS3.p3.4.m4.1.1.3.3.4.cmml">d</mi></mrow></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.4.m4.1b"><apply id="S3.SS3.p3.4.m4.1.1.cmml" xref="S3.SS3.p3.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.4.m4.1.1.1.cmml" xref="S3.SS3.p3.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.p3.4.m4.1.1.2.cmml" xref="S3.SS3.p3.4.m4.1.1.2">𝜋</ci><apply id="S3.SS3.p3.4.m4.1.1.3.cmml" xref="S3.SS3.p3.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.4.m4.1.1.3.1.cmml" xref="S3.SS3.p3.4.m4.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.4.m4.1.1.3.2.cmml" xref="S3.SS3.p3.4.m4.1.1.3.2">𝜃</ci><apply id="S3.SS3.p3.4.m4.1.1.3.3.cmml" xref="S3.SS3.p3.4.m4.1.1.3.3"><times id="S3.SS3.p3.4.m4.1.1.3.3.1.cmml" xref="S3.SS3.p3.4.m4.1.1.3.3.1"></times><ci id="S3.SS3.p3.4.m4.1.1.3.3.2.cmml" xref="S3.SS3.p3.4.m4.1.1.3.3.2">𝑜</ci><ci id="S3.SS3.p3.4.m4.1.1.3.3.3.cmml" xref="S3.SS3.p3.4.m4.1.1.3.3.3">𝑙</ci><ci id="S3.SS3.p3.4.m4.1.1.3.3.4.cmml" xref="S3.SS3.p3.4.m4.1.1.3.3.4">𝑑</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.4.m4.1c">\pi_{\theta_{old}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.4.m4.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_o italic_l italic_d end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, expressed as: <math alttext="r_{t}(\theta)=\frac{\pi_{\theta}(a_{t}|s_{t})}{\pi_{\theta_{old}}(a_{t}|s_{t})}" class="ltx_Math" display="inline" id="S3.SS3.p3.5.m5.3"><semantics id="S3.SS3.p3.5.m5.3a"><mrow id="S3.SS3.p3.5.m5.3.4" xref="S3.SS3.p3.5.m5.3.4.cmml"><mrow id="S3.SS3.p3.5.m5.3.4.2" xref="S3.SS3.p3.5.m5.3.4.2.cmml"><msub id="S3.SS3.p3.5.m5.3.4.2.2" xref="S3.SS3.p3.5.m5.3.4.2.2.cmml"><mi id="S3.SS3.p3.5.m5.3.4.2.2.2" xref="S3.SS3.p3.5.m5.3.4.2.2.2.cmml">r</mi><mi id="S3.SS3.p3.5.m5.3.4.2.2.3" xref="S3.SS3.p3.5.m5.3.4.2.2.3.cmml">t</mi></msub><mo id="S3.SS3.p3.5.m5.3.4.2.1" xref="S3.SS3.p3.5.m5.3.4.2.1.cmml">⁢</mo><mrow id="S3.SS3.p3.5.m5.3.4.2.3.2" xref="S3.SS3.p3.5.m5.3.4.2.cmml"><mo id="S3.SS3.p3.5.m5.3.4.2.3.2.1" stretchy="false" xref="S3.SS3.p3.5.m5.3.4.2.cmml">(</mo><mi id="S3.SS3.p3.5.m5.3.3" xref="S3.SS3.p3.5.m5.3.3.cmml">θ</mi><mo id="S3.SS3.p3.5.m5.3.4.2.3.2.2" stretchy="false" xref="S3.SS3.p3.5.m5.3.4.2.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p3.5.m5.3.4.1" xref="S3.SS3.p3.5.m5.3.4.1.cmml">=</mo><mfrac id="S3.SS3.p3.5.m5.2.2" xref="S3.SS3.p3.5.m5.2.2.cmml"><mrow id="S3.SS3.p3.5.m5.1.1.1" xref="S3.SS3.p3.5.m5.1.1.1.cmml"><msub id="S3.SS3.p3.5.m5.1.1.1.3" xref="S3.SS3.p3.5.m5.1.1.1.3.cmml"><mi id="S3.SS3.p3.5.m5.1.1.1.3.2" xref="S3.SS3.p3.5.m5.1.1.1.3.2.cmml">π</mi><mi id="S3.SS3.p3.5.m5.1.1.1.3.3" xref="S3.SS3.p3.5.m5.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.SS3.p3.5.m5.1.1.1.2" xref="S3.SS3.p3.5.m5.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.p3.5.m5.1.1.1.1.1" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.cmml"><mo id="S3.SS3.p3.5.m5.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS3.p3.5.m5.1.1.1.1.1.1" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.cmml"><msub id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.cmml"><mi id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.2" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.2.cmml">a</mi><mi id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.3" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S3.SS3.p3.5.m5.1.1.1.1.1.1.1" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.1.cmml">|</mo><msub id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.cmml"><mi id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.2" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.2.cmml">s</mi><mi id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.3" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS3.p3.5.m5.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.SS3.p3.5.m5.2.2.2" xref="S3.SS3.p3.5.m5.2.2.2.cmml"><msub id="S3.SS3.p3.5.m5.2.2.2.3" xref="S3.SS3.p3.5.m5.2.2.2.3.cmml"><mi id="S3.SS3.p3.5.m5.2.2.2.3.2" xref="S3.SS3.p3.5.m5.2.2.2.3.2.cmml">π</mi><msub id="S3.SS3.p3.5.m5.2.2.2.3.3" xref="S3.SS3.p3.5.m5.2.2.2.3.3.cmml"><mi id="S3.SS3.p3.5.m5.2.2.2.3.3.2" xref="S3.SS3.p3.5.m5.2.2.2.3.3.2.cmml">θ</mi><mrow id="S3.SS3.p3.5.m5.2.2.2.3.3.3" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.cmml"><mi id="S3.SS3.p3.5.m5.2.2.2.3.3.3.2" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.2.cmml">o</mi><mo id="S3.SS3.p3.5.m5.2.2.2.3.3.3.1" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.5.m5.2.2.2.3.3.3.3" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.3.cmml">l</mi><mo id="S3.SS3.p3.5.m5.2.2.2.3.3.3.1a" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.5.m5.2.2.2.3.3.3.4" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.4.cmml">d</mi></mrow></msub></msub><mo id="S3.SS3.p3.5.m5.2.2.2.2" xref="S3.SS3.p3.5.m5.2.2.2.2.cmml">⁢</mo><mrow id="S3.SS3.p3.5.m5.2.2.2.1.1" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.cmml"><mo id="S3.SS3.p3.5.m5.2.2.2.1.1.2" stretchy="false" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.cmml">(</mo><mrow id="S3.SS3.p3.5.m5.2.2.2.1.1.1" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.cmml"><msub id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.cmml"><mi id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.2" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.2.cmml">a</mi><mi id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.3" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S3.SS3.p3.5.m5.2.2.2.1.1.1.1" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.1.cmml">|</mo><msub id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.cmml"><mi id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.2" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.2.cmml">s</mi><mi id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.3" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS3.p3.5.m5.2.2.2.1.1.3" stretchy="false" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.5.m5.3b"><apply id="S3.SS3.p3.5.m5.3.4.cmml" xref="S3.SS3.p3.5.m5.3.4"><eq id="S3.SS3.p3.5.m5.3.4.1.cmml" xref="S3.SS3.p3.5.m5.3.4.1"></eq><apply id="S3.SS3.p3.5.m5.3.4.2.cmml" xref="S3.SS3.p3.5.m5.3.4.2"><times id="S3.SS3.p3.5.m5.3.4.2.1.cmml" xref="S3.SS3.p3.5.m5.3.4.2.1"></times><apply id="S3.SS3.p3.5.m5.3.4.2.2.cmml" xref="S3.SS3.p3.5.m5.3.4.2.2"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.3.4.2.2.1.cmml" xref="S3.SS3.p3.5.m5.3.4.2.2">subscript</csymbol><ci id="S3.SS3.p3.5.m5.3.4.2.2.2.cmml" xref="S3.SS3.p3.5.m5.3.4.2.2.2">𝑟</ci><ci id="S3.SS3.p3.5.m5.3.4.2.2.3.cmml" xref="S3.SS3.p3.5.m5.3.4.2.2.3">𝑡</ci></apply><ci id="S3.SS3.p3.5.m5.3.3.cmml" xref="S3.SS3.p3.5.m5.3.3">𝜃</ci></apply><apply id="S3.SS3.p3.5.m5.2.2.cmml" xref="S3.SS3.p3.5.m5.2.2"><divide id="S3.SS3.p3.5.m5.2.2.3.cmml" xref="S3.SS3.p3.5.m5.2.2"></divide><apply id="S3.SS3.p3.5.m5.1.1.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1"><times id="S3.SS3.p3.5.m5.1.1.1.2.cmml" xref="S3.SS3.p3.5.m5.1.1.1.2"></times><apply id="S3.SS3.p3.5.m5.1.1.1.3.cmml" xref="S3.SS3.p3.5.m5.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.1.1.1.3.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.5.m5.1.1.1.3.2.cmml" xref="S3.SS3.p3.5.m5.1.1.1.3.2">𝜋</ci><ci id="S3.SS3.p3.5.m5.1.1.1.3.3.cmml" xref="S3.SS3.p3.5.m5.1.1.1.3.3">𝜃</ci></apply><apply id="S3.SS3.p3.5.m5.1.1.1.1.1.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1"><csymbol cd="latexml" id="S3.SS3.p3.5.m5.1.1.1.1.1.1.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.2.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.2">𝑎</ci><ci id="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.3.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.1.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.2.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.2">𝑠</ci><ci id="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.3.cmml" xref="S3.SS3.p3.5.m5.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply><apply id="S3.SS3.p3.5.m5.2.2.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2"><times id="S3.SS3.p3.5.m5.2.2.2.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.2"></times><apply id="S3.SS3.p3.5.m5.2.2.2.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.2.2.2.3.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3">subscript</csymbol><ci id="S3.SS3.p3.5.m5.2.2.2.3.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.2">𝜋</ci><apply id="S3.SS3.p3.5.m5.2.2.2.3.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.2.2.2.3.3.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3">subscript</csymbol><ci id="S3.SS3.p3.5.m5.2.2.2.3.3.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.2">𝜃</ci><apply id="S3.SS3.p3.5.m5.2.2.2.3.3.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3"><times id="S3.SS3.p3.5.m5.2.2.2.3.3.3.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.1"></times><ci id="S3.SS3.p3.5.m5.2.2.2.3.3.3.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.2">𝑜</ci><ci id="S3.SS3.p3.5.m5.2.2.2.3.3.3.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.3">𝑙</ci><ci id="S3.SS3.p3.5.m5.2.2.2.3.3.3.4.cmml" xref="S3.SS3.p3.5.m5.2.2.2.3.3.3.4">𝑑</ci></apply></apply></apply><apply id="S3.SS3.p3.5.m5.2.2.2.1.1.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1"><csymbol cd="latexml" id="S3.SS3.p3.5.m5.2.2.2.1.1.1.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.1">conditional</csymbol><apply id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2">subscript</csymbol><ci id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.2">𝑎</ci><ci id="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.2.3">𝑡</ci></apply><apply id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.1.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.2.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.2">𝑠</ci><ci id="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.3.cmml" xref="S3.SS3.p3.5.m5.2.2.2.1.1.1.3.3">𝑡</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.5.m5.3c">r_{t}(\theta)=\frac{\pi_{\theta}(a_{t}|s_{t})}{\pi_{\theta_{old}}(a_{t}|s_{t})}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.5.m5.3d">italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ ) = divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_o italic_l italic_d end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) end_ARG</annotation></semantics></math>.
This ratio indicates the relative change in the likelihood of selecting an action between the current and previous policies. It is computed based on the probabilities <math alttext="\pi_{\theta}(a_{t}|s_{t})" class="ltx_Math" display="inline" id="S3.SS3.p3.6.m6.1"><semantics id="S3.SS3.p3.6.m6.1a"><mrow id="S3.SS3.p3.6.m6.1.1" xref="S3.SS3.p3.6.m6.1.1.cmml"><msub id="S3.SS3.p3.6.m6.1.1.3" xref="S3.SS3.p3.6.m6.1.1.3.cmml"><mi id="S3.SS3.p3.6.m6.1.1.3.2" xref="S3.SS3.p3.6.m6.1.1.3.2.cmml">π</mi><mi id="S3.SS3.p3.6.m6.1.1.3.3" xref="S3.SS3.p3.6.m6.1.1.3.3.cmml">θ</mi></msub><mo id="S3.SS3.p3.6.m6.1.1.2" xref="S3.SS3.p3.6.m6.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.p3.6.m6.1.1.1.1" xref="S3.SS3.p3.6.m6.1.1.1.1.1.cmml"><mo id="S3.SS3.p3.6.m6.1.1.1.1.2" stretchy="false" xref="S3.SS3.p3.6.m6.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS3.p3.6.m6.1.1.1.1.1" xref="S3.SS3.p3.6.m6.1.1.1.1.1.cmml"><msub id="S3.SS3.p3.6.m6.1.1.1.1.1.2" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2.cmml"><mi id="S3.SS3.p3.6.m6.1.1.1.1.1.2.2" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2.2.cmml">a</mi><mi id="S3.SS3.p3.6.m6.1.1.1.1.1.2.3" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S3.SS3.p3.6.m6.1.1.1.1.1.1" xref="S3.SS3.p3.6.m6.1.1.1.1.1.1.cmml">|</mo><msub id="S3.SS3.p3.6.m6.1.1.1.1.1.3" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3.cmml"><mi id="S3.SS3.p3.6.m6.1.1.1.1.1.3.2" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3.2.cmml">s</mi><mi id="S3.SS3.p3.6.m6.1.1.1.1.1.3.3" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS3.p3.6.m6.1.1.1.1.3" stretchy="false" xref="S3.SS3.p3.6.m6.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.6.m6.1b"><apply id="S3.SS3.p3.6.m6.1.1.cmml" xref="S3.SS3.p3.6.m6.1.1"><times id="S3.SS3.p3.6.m6.1.1.2.cmml" xref="S3.SS3.p3.6.m6.1.1.2"></times><apply id="S3.SS3.p3.6.m6.1.1.3.cmml" xref="S3.SS3.p3.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.6.m6.1.1.3.1.cmml" xref="S3.SS3.p3.6.m6.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.6.m6.1.1.3.2.cmml" xref="S3.SS3.p3.6.m6.1.1.3.2">𝜋</ci><ci id="S3.SS3.p3.6.m6.1.1.3.3.cmml" xref="S3.SS3.p3.6.m6.1.1.3.3">𝜃</ci></apply><apply id="S3.SS3.p3.6.m6.1.1.1.1.1.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1"><csymbol cd="latexml" id="S3.SS3.p3.6.m6.1.1.1.1.1.1.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.1">conditional</csymbol><apply id="S3.SS3.p3.6.m6.1.1.1.1.1.2.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p3.6.m6.1.1.1.1.1.2.1.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS3.p3.6.m6.1.1.1.1.1.2.2.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2.2">𝑎</ci><ci id="S3.SS3.p3.6.m6.1.1.1.1.1.2.3.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S3.SS3.p3.6.m6.1.1.1.1.1.3.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.6.m6.1.1.1.1.1.3.1.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.6.m6.1.1.1.1.1.3.2.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3.2">𝑠</ci><ci id="S3.SS3.p3.6.m6.1.1.1.1.1.3.3.cmml" xref="S3.SS3.p3.6.m6.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.6.m6.1c">\pi_{\theta}(a_{t}|s_{t})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.6.m6.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT )</annotation></semantics></math> and <math alttext="\pi_{\theta_{old}}(a_{t}|s_{t})" class="ltx_Math" display="inline" id="S3.SS3.p3.7.m7.1"><semantics id="S3.SS3.p3.7.m7.1a"><mrow id="S3.SS3.p3.7.m7.1.1" xref="S3.SS3.p3.7.m7.1.1.cmml"><msub id="S3.SS3.p3.7.m7.1.1.3" xref="S3.SS3.p3.7.m7.1.1.3.cmml"><mi id="S3.SS3.p3.7.m7.1.1.3.2" xref="S3.SS3.p3.7.m7.1.1.3.2.cmml">π</mi><msub id="S3.SS3.p3.7.m7.1.1.3.3" xref="S3.SS3.p3.7.m7.1.1.3.3.cmml"><mi id="S3.SS3.p3.7.m7.1.1.3.3.2" xref="S3.SS3.p3.7.m7.1.1.3.3.2.cmml">θ</mi><mrow id="S3.SS3.p3.7.m7.1.1.3.3.3" xref="S3.SS3.p3.7.m7.1.1.3.3.3.cmml"><mi id="S3.SS3.p3.7.m7.1.1.3.3.3.2" xref="S3.SS3.p3.7.m7.1.1.3.3.3.2.cmml">o</mi><mo id="S3.SS3.p3.7.m7.1.1.3.3.3.1" xref="S3.SS3.p3.7.m7.1.1.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.7.m7.1.1.3.3.3.3" xref="S3.SS3.p3.7.m7.1.1.3.3.3.3.cmml">l</mi><mo id="S3.SS3.p3.7.m7.1.1.3.3.3.1a" xref="S3.SS3.p3.7.m7.1.1.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.p3.7.m7.1.1.3.3.3.4" xref="S3.SS3.p3.7.m7.1.1.3.3.3.4.cmml">d</mi></mrow></msub></msub><mo id="S3.SS3.p3.7.m7.1.1.2" xref="S3.SS3.p3.7.m7.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.p3.7.m7.1.1.1.1" xref="S3.SS3.p3.7.m7.1.1.1.1.1.cmml"><mo id="S3.SS3.p3.7.m7.1.1.1.1.2" stretchy="false" xref="S3.SS3.p3.7.m7.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS3.p3.7.m7.1.1.1.1.1" xref="S3.SS3.p3.7.m7.1.1.1.1.1.cmml"><msub id="S3.SS3.p3.7.m7.1.1.1.1.1.2" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2.cmml"><mi id="S3.SS3.p3.7.m7.1.1.1.1.1.2.2" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2.2.cmml">a</mi><mi id="S3.SS3.p3.7.m7.1.1.1.1.1.2.3" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S3.SS3.p3.7.m7.1.1.1.1.1.1" xref="S3.SS3.p3.7.m7.1.1.1.1.1.1.cmml">|</mo><msub id="S3.SS3.p3.7.m7.1.1.1.1.1.3" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3.cmml"><mi id="S3.SS3.p3.7.m7.1.1.1.1.1.3.2" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3.2.cmml">s</mi><mi id="S3.SS3.p3.7.m7.1.1.1.1.1.3.3" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.SS3.p3.7.m7.1.1.1.1.3" stretchy="false" xref="S3.SS3.p3.7.m7.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.7.m7.1b"><apply id="S3.SS3.p3.7.m7.1.1.cmml" xref="S3.SS3.p3.7.m7.1.1"><times id="S3.SS3.p3.7.m7.1.1.2.cmml" xref="S3.SS3.p3.7.m7.1.1.2"></times><apply id="S3.SS3.p3.7.m7.1.1.3.cmml" xref="S3.SS3.p3.7.m7.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.7.m7.1.1.3.1.cmml" xref="S3.SS3.p3.7.m7.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.7.m7.1.1.3.2.cmml" xref="S3.SS3.p3.7.m7.1.1.3.2">𝜋</ci><apply id="S3.SS3.p3.7.m7.1.1.3.3.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS3.p3.7.m7.1.1.3.3.1.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3">subscript</csymbol><ci id="S3.SS3.p3.7.m7.1.1.3.3.2.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.2">𝜃</ci><apply id="S3.SS3.p3.7.m7.1.1.3.3.3.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.3"><times id="S3.SS3.p3.7.m7.1.1.3.3.3.1.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.3.1"></times><ci id="S3.SS3.p3.7.m7.1.1.3.3.3.2.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.3.2">𝑜</ci><ci id="S3.SS3.p3.7.m7.1.1.3.3.3.3.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.3.3">𝑙</ci><ci id="S3.SS3.p3.7.m7.1.1.3.3.3.4.cmml" xref="S3.SS3.p3.7.m7.1.1.3.3.3.4">𝑑</ci></apply></apply></apply><apply id="S3.SS3.p3.7.m7.1.1.1.1.1.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1"><csymbol cd="latexml" id="S3.SS3.p3.7.m7.1.1.1.1.1.1.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.1">conditional</csymbol><apply id="S3.SS3.p3.7.m7.1.1.1.1.1.2.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p3.7.m7.1.1.1.1.1.2.1.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS3.p3.7.m7.1.1.1.1.1.2.2.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2.2">𝑎</ci><ci id="S3.SS3.p3.7.m7.1.1.1.1.1.2.3.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S3.SS3.p3.7.m7.1.1.1.1.1.3.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p3.7.m7.1.1.1.1.1.3.1.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p3.7.m7.1.1.1.1.1.3.2.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3.2">𝑠</ci><ci id="S3.SS3.p3.7.m7.1.1.1.1.1.3.3.cmml" xref="S3.SS3.p3.7.m7.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.7.m7.1c">\pi_{\theta_{old}}(a_{t}|s_{t})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.7.m7.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_o italic_l italic_d end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT )</annotation></semantics></math>, which represent the likelihood of taking action <math alttext="a_{t}" class="ltx_Math" display="inline" id="S3.SS3.p3.8.m8.1"><semantics id="S3.SS3.p3.8.m8.1a"><msub id="S3.SS3.p3.8.m8.1.1" xref="S3.SS3.p3.8.m8.1.1.cmml"><mi id="S3.SS3.p3.8.m8.1.1.2" xref="S3.SS3.p3.8.m8.1.1.2.cmml">a</mi><mi id="S3.SS3.p3.8.m8.1.1.3" xref="S3.SS3.p3.8.m8.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.8.m8.1b"><apply id="S3.SS3.p3.8.m8.1.1.cmml" xref="S3.SS3.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.8.m8.1.1.1.cmml" xref="S3.SS3.p3.8.m8.1.1">subscript</csymbol><ci id="S3.SS3.p3.8.m8.1.1.2.cmml" xref="S3.SS3.p3.8.m8.1.1.2">𝑎</ci><ci id="S3.SS3.p3.8.m8.1.1.3.cmml" xref="S3.SS3.p3.8.m8.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.8.m8.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.8.m8.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> given state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S3.SS3.p3.9.m9.1"><semantics id="S3.SS3.p3.9.m9.1a"><msub id="S3.SS3.p3.9.m9.1.1" xref="S3.SS3.p3.9.m9.1.1.cmml"><mi id="S3.SS3.p3.9.m9.1.1.2" xref="S3.SS3.p3.9.m9.1.1.2.cmml">s</mi><mi id="S3.SS3.p3.9.m9.1.1.3" xref="S3.SS3.p3.9.m9.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.9.m9.1b"><apply id="S3.SS3.p3.9.m9.1.1.cmml" xref="S3.SS3.p3.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.9.m9.1.1.1.cmml" xref="S3.SS3.p3.9.m9.1.1">subscript</csymbol><ci id="S3.SS3.p3.9.m9.1.1.2.cmml" xref="S3.SS3.p3.9.m9.1.1.2">𝑠</ci><ci id="S3.SS3.p3.9.m9.1.1.3.cmml" xref="S3.SS3.p3.9.m9.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.9.m9.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p3.9.m9.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> under the current and previous policies, respectively.</p>
</div>
<div class="ltx_para" id="S3.SS3.p4">
<table class="ltx_equation ltx_eqn_table" id="S3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(3)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="L^{CLIP}(\theta)=\hat{\mathbb{E}}\left[min(r_{t}(\theta)\hat{A_{t}},clip(r_{t}%
(\theta),1-\varepsilon,1+\varepsilon)\hat{A_{t}})\right]" class="ltx_Math" display="block" id="S3.E3.m1.4"><semantics id="S3.E3.m1.4a"><mrow id="S3.E3.m1.4.4" xref="S3.E3.m1.4.4.cmml"><mrow id="S3.E3.m1.4.4.3" xref="S3.E3.m1.4.4.3.cmml"><msup id="S3.E3.m1.4.4.3.2" xref="S3.E3.m1.4.4.3.2.cmml"><mi id="S3.E3.m1.4.4.3.2.2" xref="S3.E3.m1.4.4.3.2.2.cmml">L</mi><mrow id="S3.E3.m1.4.4.3.2.3" xref="S3.E3.m1.4.4.3.2.3.cmml"><mi id="S3.E3.m1.4.4.3.2.3.2" xref="S3.E3.m1.4.4.3.2.3.2.cmml">C</mi><mo id="S3.E3.m1.4.4.3.2.3.1" xref="S3.E3.m1.4.4.3.2.3.1.cmml">⁢</mo><mi id="S3.E3.m1.4.4.3.2.3.3" xref="S3.E3.m1.4.4.3.2.3.3.cmml">L</mi><mo id="S3.E3.m1.4.4.3.2.3.1a" xref="S3.E3.m1.4.4.3.2.3.1.cmml">⁢</mo><mi id="S3.E3.m1.4.4.3.2.3.4" xref="S3.E3.m1.4.4.3.2.3.4.cmml">I</mi><mo id="S3.E3.m1.4.4.3.2.3.1b" xref="S3.E3.m1.4.4.3.2.3.1.cmml">⁢</mo><mi id="S3.E3.m1.4.4.3.2.3.5" xref="S3.E3.m1.4.4.3.2.3.5.cmml">P</mi></mrow></msup><mo id="S3.E3.m1.4.4.3.1" xref="S3.E3.m1.4.4.3.1.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.3.3.2" xref="S3.E3.m1.4.4.3.cmml"><mo id="S3.E3.m1.4.4.3.3.2.1" stretchy="false" xref="S3.E3.m1.4.4.3.cmml">(</mo><mi id="S3.E3.m1.1.1" xref="S3.E3.m1.1.1.cmml">θ</mi><mo id="S3.E3.m1.4.4.3.3.2.2" stretchy="false" xref="S3.E3.m1.4.4.3.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.4.4.2" xref="S3.E3.m1.4.4.2.cmml">=</mo><mrow id="S3.E3.m1.4.4.1" xref="S3.E3.m1.4.4.1.cmml"><mover accent="true" id="S3.E3.m1.4.4.1.3" xref="S3.E3.m1.4.4.1.3.cmml"><mi id="S3.E3.m1.4.4.1.3.2" xref="S3.E3.m1.4.4.1.3.2.cmml">𝔼</mi><mo id="S3.E3.m1.4.4.1.3.1" xref="S3.E3.m1.4.4.1.3.1.cmml">^</mo></mover><mo id="S3.E3.m1.4.4.1.2" xref="S3.E3.m1.4.4.1.2.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.1.1.1" xref="S3.E3.m1.4.4.1.1.2.cmml"><mo id="S3.E3.m1.4.4.1.1.1.2" xref="S3.E3.m1.4.4.1.1.2.1.cmml">[</mo><mrow id="S3.E3.m1.4.4.1.1.1.1" xref="S3.E3.m1.4.4.1.1.1.1.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.4" xref="S3.E3.m1.4.4.1.1.1.1.4.cmml">m</mi><mo id="S3.E3.m1.4.4.1.1.1.1.3" xref="S3.E3.m1.4.4.1.1.1.1.3.cmml">⁢</mo><mi id="S3.E3.m1.4.4.1.1.1.1.5" xref="S3.E3.m1.4.4.1.1.1.1.5.cmml">i</mi><mo id="S3.E3.m1.4.4.1.1.1.1.3a" xref="S3.E3.m1.4.4.1.1.1.1.3.cmml">⁢</mo><mi id="S3.E3.m1.4.4.1.1.1.1.6" xref="S3.E3.m1.4.4.1.1.1.1.6.cmml">n</mi><mo id="S3.E3.m1.4.4.1.1.1.1.3b" xref="S3.E3.m1.4.4.1.1.1.1.3.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.3.cmml"><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.3" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.3.cmml">(</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.1.1.1" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.cmml"><msub id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.2" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.2.cmml">r</mi><mi id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.3" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo id="S3.E3.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.1.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.1.1.1.3.2" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.cmml"><mo id="S3.E3.m1.4.4.1.1.1.1.1.1.1.3.2.1" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.cmml">(</mo><mi id="S3.E3.m1.2.2" xref="S3.E3.m1.2.2.cmml">θ</mi><mo id="S3.E3.m1.4.4.1.1.1.1.1.1.1.3.2.2" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.1.1.1.1a" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.1.cmml">⁢</mo><mover accent="true" id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.cmml"><msub id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.2" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.2.cmml">A</mi><mi id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.3" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.3.cmml">t</mi></msub><mo id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.1" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.1.cmml">^</mo></mover></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.4" xref="S3.E3.m1.4.4.1.1.1.1.2.3.cmml">,</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.5" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.5.cmml">c</mi><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml">⁢</mo><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.6" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.6.cmml">l</mi><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4a" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml">⁢</mo><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.7" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.7.cmml">i</mi><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4b" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml">⁢</mo><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.8" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.8.cmml">p</mi><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4c" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml"><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.4" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml">(</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.cmml"><msub id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.2.cmml">r</mi><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.3.cmml">t</mi></msub><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.1" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.1.cmml">⁢</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.3.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.cmml"><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.3.2.1" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.cmml">(</mo><mi id="S3.E3.m1.3.3" xref="S3.E3.m1.3.3.cmml">θ</mi><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.3.2.2" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.5" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml">,</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.cmml"><mn id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.2.cmml">1</mn><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.1" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.1.cmml">−</mo><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.3.cmml">ε</mi></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.6" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml">,</mo><mrow id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.cmml"><mn id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.2.cmml">1</mn><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.1" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.1.cmml">+</mo><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.3.cmml">ε</mi></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.7" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml">)</mo></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4d" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml">⁢</mo><mover accent="true" id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.cmml"><msub id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.cmml"><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.2" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.2.cmml">A</mi><mi id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.3" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.3.cmml">t</mi></msub><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.1" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.1.cmml">^</mo></mover></mrow><mo id="S3.E3.m1.4.4.1.1.1.1.2.2.5" stretchy="false" xref="S3.E3.m1.4.4.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.4.4.1.1.1.3" xref="S3.E3.m1.4.4.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.4b"><apply id="S3.E3.m1.4.4.cmml" xref="S3.E3.m1.4.4"><eq id="S3.E3.m1.4.4.2.cmml" xref="S3.E3.m1.4.4.2"></eq><apply id="S3.E3.m1.4.4.3.cmml" xref="S3.E3.m1.4.4.3"><times id="S3.E3.m1.4.4.3.1.cmml" xref="S3.E3.m1.4.4.3.1"></times><apply id="S3.E3.m1.4.4.3.2.cmml" xref="S3.E3.m1.4.4.3.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.3.2.1.cmml" xref="S3.E3.m1.4.4.3.2">superscript</csymbol><ci id="S3.E3.m1.4.4.3.2.2.cmml" xref="S3.E3.m1.4.4.3.2.2">𝐿</ci><apply id="S3.E3.m1.4.4.3.2.3.cmml" xref="S3.E3.m1.4.4.3.2.3"><times id="S3.E3.m1.4.4.3.2.3.1.cmml" xref="S3.E3.m1.4.4.3.2.3.1"></times><ci id="S3.E3.m1.4.4.3.2.3.2.cmml" xref="S3.E3.m1.4.4.3.2.3.2">𝐶</ci><ci id="S3.E3.m1.4.4.3.2.3.3.cmml" xref="S3.E3.m1.4.4.3.2.3.3">𝐿</ci><ci id="S3.E3.m1.4.4.3.2.3.4.cmml" xref="S3.E3.m1.4.4.3.2.3.4">𝐼</ci><ci id="S3.E3.m1.4.4.3.2.3.5.cmml" xref="S3.E3.m1.4.4.3.2.3.5">𝑃</ci></apply></apply><ci id="S3.E3.m1.1.1.cmml" xref="S3.E3.m1.1.1">𝜃</ci></apply><apply id="S3.E3.m1.4.4.1.cmml" xref="S3.E3.m1.4.4.1"><times id="S3.E3.m1.4.4.1.2.cmml" xref="S3.E3.m1.4.4.1.2"></times><apply id="S3.E3.m1.4.4.1.3.cmml" xref="S3.E3.m1.4.4.1.3"><ci id="S3.E3.m1.4.4.1.3.1.cmml" xref="S3.E3.m1.4.4.1.3.1">^</ci><ci id="S3.E3.m1.4.4.1.3.2.cmml" xref="S3.E3.m1.4.4.1.3.2">𝔼</ci></apply><apply id="S3.E3.m1.4.4.1.1.2.cmml" xref="S3.E3.m1.4.4.1.1.1"><csymbol cd="latexml" id="S3.E3.m1.4.4.1.1.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.2">delimited-[]</csymbol><apply id="S3.E3.m1.4.4.1.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1"><times id="S3.E3.m1.4.4.1.1.1.1.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.3"></times><ci id="S3.E3.m1.4.4.1.1.1.1.4.cmml" xref="S3.E3.m1.4.4.1.1.1.1.4">𝑚</ci><ci id="S3.E3.m1.4.4.1.1.1.1.5.cmml" xref="S3.E3.m1.4.4.1.1.1.1.5">𝑖</ci><ci id="S3.E3.m1.4.4.1.1.1.1.6.cmml" xref="S3.E3.m1.4.4.1.1.1.1.6">𝑛</ci><interval closure="open" id="S3.E3.m1.4.4.1.1.1.1.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2"><apply id="S3.E3.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1"><times id="S3.E3.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.1"></times><apply id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.2">𝑟</ci><ci id="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.2.3">𝑡</ci></apply><ci id="S3.E3.m1.2.2.cmml" xref="S3.E3.m1.2.2">𝜃</ci><apply id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4"><ci id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.1">^</ci><apply id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2">subscript</csymbol><ci id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.2">𝐴</ci><ci id="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.1.1.1.4.2.3">𝑡</ci></apply></apply></apply><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2"><times id="S3.E3.m1.4.4.1.1.1.1.2.2.2.4.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.4"></times><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.5.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.5">𝑐</ci><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.6.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.6">𝑙</ci><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.7.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.7">𝑖</ci><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.8.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.8">𝑝</ci><vector id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.4.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3"><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1"><times id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.1"></times><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2">subscript</csymbol><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.2">𝑟</ci><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.1.1.1.2.3">𝑡</ci></apply><ci id="S3.E3.m1.3.3.cmml" xref="S3.E3.m1.3.3">𝜃</ci></apply><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2"><minus id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.1"></minus><cn id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.2.cmml" type="integer" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.2">1</cn><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.2.2.2.3">𝜀</ci></apply><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3"><plus id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.1"></plus><cn id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.2.cmml" type="integer" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.2">1</cn><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.3.3.3.3">𝜀</ci></apply></vector><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9"><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.1">^</ci><apply id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.1.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2">subscript</csymbol><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.2.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.2">𝐴</ci><ci id="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.3.cmml" xref="S3.E3.m1.4.4.1.1.1.1.2.2.2.9.2.3">𝑡</ci></apply></apply></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.4c">L^{CLIP}(\theta)=\hat{\mathbb{E}}\left[min(r_{t}(\theta)\hat{A_{t}},clip(r_{t}%
(\theta),1-\varepsilon,1+\varepsilon)\hat{A_{t}})\right]</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.4d">italic_L start_POSTSUPERSCRIPT italic_C italic_L italic_I italic_P end_POSTSUPERSCRIPT ( italic_θ ) = over^ start_ARG blackboard_E end_ARG [ italic_m italic_i italic_n ( italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ ) over^ start_ARG italic_A start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_ARG , italic_c italic_l italic_i italic_p ( italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ ) , 1 - italic_ε , 1 + italic_ε ) over^ start_ARG italic_A start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_ARG ) ]</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS3.p5">
<p class="ltx_p" id="S3.SS3.p5.3">where <math alttext="r_{t}(\theta)" class="ltx_Math" display="inline" id="S3.SS3.p5.1.m1.1"><semantics id="S3.SS3.p5.1.m1.1a"><mrow id="S3.SS3.p5.1.m1.1.2" xref="S3.SS3.p5.1.m1.1.2.cmml"><msub id="S3.SS3.p5.1.m1.1.2.2" xref="S3.SS3.p5.1.m1.1.2.2.cmml"><mi id="S3.SS3.p5.1.m1.1.2.2.2" xref="S3.SS3.p5.1.m1.1.2.2.2.cmml">r</mi><mi id="S3.SS3.p5.1.m1.1.2.2.3" xref="S3.SS3.p5.1.m1.1.2.2.3.cmml">t</mi></msub><mo id="S3.SS3.p5.1.m1.1.2.1" xref="S3.SS3.p5.1.m1.1.2.1.cmml">⁢</mo><mrow id="S3.SS3.p5.1.m1.1.2.3.2" xref="S3.SS3.p5.1.m1.1.2.cmml"><mo id="S3.SS3.p5.1.m1.1.2.3.2.1" stretchy="false" xref="S3.SS3.p5.1.m1.1.2.cmml">(</mo><mi id="S3.SS3.p5.1.m1.1.1" xref="S3.SS3.p5.1.m1.1.1.cmml">θ</mi><mo id="S3.SS3.p5.1.m1.1.2.3.2.2" stretchy="false" xref="S3.SS3.p5.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p5.1.m1.1b"><apply id="S3.SS3.p5.1.m1.1.2.cmml" xref="S3.SS3.p5.1.m1.1.2"><times id="S3.SS3.p5.1.m1.1.2.1.cmml" xref="S3.SS3.p5.1.m1.1.2.1"></times><apply id="S3.SS3.p5.1.m1.1.2.2.cmml" xref="S3.SS3.p5.1.m1.1.2.2"><csymbol cd="ambiguous" id="S3.SS3.p5.1.m1.1.2.2.1.cmml" xref="S3.SS3.p5.1.m1.1.2.2">subscript</csymbol><ci id="S3.SS3.p5.1.m1.1.2.2.2.cmml" xref="S3.SS3.p5.1.m1.1.2.2.2">𝑟</ci><ci id="S3.SS3.p5.1.m1.1.2.2.3.cmml" xref="S3.SS3.p5.1.m1.1.2.2.3">𝑡</ci></apply><ci id="S3.SS3.p5.1.m1.1.1.cmml" xref="S3.SS3.p5.1.m1.1.1">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p5.1.m1.1c">r_{t}(\theta)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p5.1.m1.1d">italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ )</annotation></semantics></math> is the policy ratio.The clipping operation restricts the policy ratio <math alttext="r_{t}(\theta)" class="ltx_Math" display="inline" id="S3.SS3.p5.2.m2.1"><semantics id="S3.SS3.p5.2.m2.1a"><mrow id="S3.SS3.p5.2.m2.1.2" xref="S3.SS3.p5.2.m2.1.2.cmml"><msub id="S3.SS3.p5.2.m2.1.2.2" xref="S3.SS3.p5.2.m2.1.2.2.cmml"><mi id="S3.SS3.p5.2.m2.1.2.2.2" xref="S3.SS3.p5.2.m2.1.2.2.2.cmml">r</mi><mi id="S3.SS3.p5.2.m2.1.2.2.3" xref="S3.SS3.p5.2.m2.1.2.2.3.cmml">t</mi></msub><mo id="S3.SS3.p5.2.m2.1.2.1" xref="S3.SS3.p5.2.m2.1.2.1.cmml">⁢</mo><mrow id="S3.SS3.p5.2.m2.1.2.3.2" xref="S3.SS3.p5.2.m2.1.2.cmml"><mo id="S3.SS3.p5.2.m2.1.2.3.2.1" stretchy="false" xref="S3.SS3.p5.2.m2.1.2.cmml">(</mo><mi id="S3.SS3.p5.2.m2.1.1" xref="S3.SS3.p5.2.m2.1.1.cmml">θ</mi><mo id="S3.SS3.p5.2.m2.1.2.3.2.2" stretchy="false" xref="S3.SS3.p5.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p5.2.m2.1b"><apply id="S3.SS3.p5.2.m2.1.2.cmml" xref="S3.SS3.p5.2.m2.1.2"><times id="S3.SS3.p5.2.m2.1.2.1.cmml" xref="S3.SS3.p5.2.m2.1.2.1"></times><apply id="S3.SS3.p5.2.m2.1.2.2.cmml" xref="S3.SS3.p5.2.m2.1.2.2"><csymbol cd="ambiguous" id="S3.SS3.p5.2.m2.1.2.2.1.cmml" xref="S3.SS3.p5.2.m2.1.2.2">subscript</csymbol><ci id="S3.SS3.p5.2.m2.1.2.2.2.cmml" xref="S3.SS3.p5.2.m2.1.2.2.2">𝑟</ci><ci id="S3.SS3.p5.2.m2.1.2.2.3.cmml" xref="S3.SS3.p5.2.m2.1.2.2.3">𝑡</ci></apply><ci id="S3.SS3.p5.2.m2.1.1.cmml" xref="S3.SS3.p5.2.m2.1.1">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p5.2.m2.1c">r_{t}(\theta)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p5.2.m2.1d">italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( italic_θ )</annotation></semantics></math> within the range <math alttext="[1-\varepsilon,1+\varepsilon]" class="ltx_Math" display="inline" id="S3.SS3.p5.3.m3.2"><semantics id="S3.SS3.p5.3.m3.2a"><mrow id="S3.SS3.p5.3.m3.2.2.2" xref="S3.SS3.p5.3.m3.2.2.3.cmml"><mo id="S3.SS3.p5.3.m3.2.2.2.3" stretchy="false" xref="S3.SS3.p5.3.m3.2.2.3.cmml">[</mo><mrow id="S3.SS3.p5.3.m3.1.1.1.1" xref="S3.SS3.p5.3.m3.1.1.1.1.cmml"><mn id="S3.SS3.p5.3.m3.1.1.1.1.2" xref="S3.SS3.p5.3.m3.1.1.1.1.2.cmml">1</mn><mo id="S3.SS3.p5.3.m3.1.1.1.1.1" xref="S3.SS3.p5.3.m3.1.1.1.1.1.cmml">−</mo><mi id="S3.SS3.p5.3.m3.1.1.1.1.3" xref="S3.SS3.p5.3.m3.1.1.1.1.3.cmml">ε</mi></mrow><mo id="S3.SS3.p5.3.m3.2.2.2.4" xref="S3.SS3.p5.3.m3.2.2.3.cmml">,</mo><mrow id="S3.SS3.p5.3.m3.2.2.2.2" xref="S3.SS3.p5.3.m3.2.2.2.2.cmml"><mn id="S3.SS3.p5.3.m3.2.2.2.2.2" xref="S3.SS3.p5.3.m3.2.2.2.2.2.cmml">1</mn><mo id="S3.SS3.p5.3.m3.2.2.2.2.1" xref="S3.SS3.p5.3.m3.2.2.2.2.1.cmml">+</mo><mi id="S3.SS3.p5.3.m3.2.2.2.2.3" xref="S3.SS3.p5.3.m3.2.2.2.2.3.cmml">ε</mi></mrow><mo id="S3.SS3.p5.3.m3.2.2.2.5" stretchy="false" xref="S3.SS3.p5.3.m3.2.2.3.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p5.3.m3.2b"><interval closure="closed" id="S3.SS3.p5.3.m3.2.2.3.cmml" xref="S3.SS3.p5.3.m3.2.2.2"><apply id="S3.SS3.p5.3.m3.1.1.1.1.cmml" xref="S3.SS3.p5.3.m3.1.1.1.1"><minus id="S3.SS3.p5.3.m3.1.1.1.1.1.cmml" xref="S3.SS3.p5.3.m3.1.1.1.1.1"></minus><cn id="S3.SS3.p5.3.m3.1.1.1.1.2.cmml" type="integer" xref="S3.SS3.p5.3.m3.1.1.1.1.2">1</cn><ci id="S3.SS3.p5.3.m3.1.1.1.1.3.cmml" xref="S3.SS3.p5.3.m3.1.1.1.1.3">𝜀</ci></apply><apply id="S3.SS3.p5.3.m3.2.2.2.2.cmml" xref="S3.SS3.p5.3.m3.2.2.2.2"><plus id="S3.SS3.p5.3.m3.2.2.2.2.1.cmml" xref="S3.SS3.p5.3.m3.2.2.2.2.1"></plus><cn id="S3.SS3.p5.3.m3.2.2.2.2.2.cmml" type="integer" xref="S3.SS3.p5.3.m3.2.2.2.2.2">1</cn><ci id="S3.SS3.p5.3.m3.2.2.2.2.3.cmml" xref="S3.SS3.p5.3.m3.2.2.2.2.3">𝜀</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p5.3.m3.2c">[1-\varepsilon,1+\varepsilon]</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p5.3.m3.2d">[ 1 - italic_ε , 1 + italic_ε ]</annotation></semantics></math> to prevent large policy updates and ensure training stability.</p>
</div>
<div class="ltx_para" id="S3.SS3.p6">
<p class="ltx_p" id="S3.SS3.p6.1"><math alttext="\hat{A}" class="ltx_Math" display="inline" id="S3.SS3.p6.1.m1.1"><semantics id="S3.SS3.p6.1.m1.1a"><mover accent="true" id="S3.SS3.p6.1.m1.1.1" xref="S3.SS3.p6.1.m1.1.1.cmml"><mi id="S3.SS3.p6.1.m1.1.1.2" xref="S3.SS3.p6.1.m1.1.1.2.cmml">A</mi><mo id="S3.SS3.p6.1.m1.1.1.1" xref="S3.SS3.p6.1.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.1.m1.1b"><apply id="S3.SS3.p6.1.m1.1.1.cmml" xref="S3.SS3.p6.1.m1.1.1"><ci id="S3.SS3.p6.1.m1.1.1.1.cmml" xref="S3.SS3.p6.1.m1.1.1.1">^</ci><ci id="S3.SS3.p6.1.m1.1.1.2.cmml" xref="S3.SS3.p6.1.m1.1.1.2">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.1.m1.1c">\hat{A}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p6.1.m1.1d">over^ start_ARG italic_A end_ARG</annotation></semantics></math> is an estimate of the advantage function. According to the original PPO <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib39" title="">ppo, </a>)</cite>, we generally use Generalized Advantage Estimation (GAE) to compute the advantage function. The GAE formula is as follows:</p>
</div>
<div class="ltx_para" id="S3.SS3.p7">
<table class="ltx_equation ltx_eqn_table" id="S3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(4)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\hat{A}^{GAE(\gamma,\lambda)}=\sum_{l=0}^{\infty}(\gamma\lambda)^{l}\delta_{t+%
l}^{V}" class="ltx_Math" display="block" id="S3.E4.m1.3"><semantics id="S3.E4.m1.3a"><mrow id="S3.E4.m1.3.3" xref="S3.E4.m1.3.3.cmml"><msup id="S3.E4.m1.3.3.3" xref="S3.E4.m1.3.3.3.cmml"><mover accent="true" id="S3.E4.m1.3.3.3.2" xref="S3.E4.m1.3.3.3.2.cmml"><mi id="S3.E4.m1.3.3.3.2.2" xref="S3.E4.m1.3.3.3.2.2.cmml">A</mi><mo id="S3.E4.m1.3.3.3.2.1" xref="S3.E4.m1.3.3.3.2.1.cmml">^</mo></mover><mrow id="S3.E4.m1.2.2.2" xref="S3.E4.m1.2.2.2.cmml"><mi id="S3.E4.m1.2.2.2.4" xref="S3.E4.m1.2.2.2.4.cmml">G</mi><mo id="S3.E4.m1.2.2.2.3" xref="S3.E4.m1.2.2.2.3.cmml">⁢</mo><mi id="S3.E4.m1.2.2.2.5" xref="S3.E4.m1.2.2.2.5.cmml">A</mi><mo id="S3.E4.m1.2.2.2.3a" xref="S3.E4.m1.2.2.2.3.cmml">⁢</mo><mi id="S3.E4.m1.2.2.2.6" xref="S3.E4.m1.2.2.2.6.cmml">E</mi><mo id="S3.E4.m1.2.2.2.3b" xref="S3.E4.m1.2.2.2.3.cmml">⁢</mo><mrow id="S3.E4.m1.2.2.2.7.2" xref="S3.E4.m1.2.2.2.7.1.cmml"><mo id="S3.E4.m1.2.2.2.7.2.1" stretchy="false" xref="S3.E4.m1.2.2.2.7.1.cmml">(</mo><mi id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml">γ</mi><mo id="S3.E4.m1.2.2.2.7.2.2" xref="S3.E4.m1.2.2.2.7.1.cmml">,</mo><mi id="S3.E4.m1.2.2.2.2" xref="S3.E4.m1.2.2.2.2.cmml">λ</mi><mo id="S3.E4.m1.2.2.2.7.2.3" stretchy="false" xref="S3.E4.m1.2.2.2.7.1.cmml">)</mo></mrow></mrow></msup><mo id="S3.E4.m1.3.3.2" rspace="0.111em" xref="S3.E4.m1.3.3.2.cmml">=</mo><mrow id="S3.E4.m1.3.3.1" xref="S3.E4.m1.3.3.1.cmml"><munderover id="S3.E4.m1.3.3.1.2" xref="S3.E4.m1.3.3.1.2.cmml"><mo id="S3.E4.m1.3.3.1.2.2.2" movablelimits="false" rspace="0em" xref="S3.E4.m1.3.3.1.2.2.2.cmml">∑</mo><mrow id="S3.E4.m1.3.3.1.2.2.3" xref="S3.E4.m1.3.3.1.2.2.3.cmml"><mi id="S3.E4.m1.3.3.1.2.2.3.2" xref="S3.E4.m1.3.3.1.2.2.3.2.cmml">l</mi><mo id="S3.E4.m1.3.3.1.2.2.3.1" xref="S3.E4.m1.3.3.1.2.2.3.1.cmml">=</mo><mn id="S3.E4.m1.3.3.1.2.2.3.3" xref="S3.E4.m1.3.3.1.2.2.3.3.cmml">0</mn></mrow><mi id="S3.E4.m1.3.3.1.2.3" mathvariant="normal" xref="S3.E4.m1.3.3.1.2.3.cmml">∞</mi></munderover><mrow id="S3.E4.m1.3.3.1.1" xref="S3.E4.m1.3.3.1.1.cmml"><msup id="S3.E4.m1.3.3.1.1.1" xref="S3.E4.m1.3.3.1.1.1.cmml"><mrow id="S3.E4.m1.3.3.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml"><mo id="S3.E4.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.2.cmml">γ</mi><mo id="S3.E4.m1.3.3.1.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.3.cmml">λ</mi></mrow><mo id="S3.E4.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow><mi id="S3.E4.m1.3.3.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.3.cmml">l</mi></msup><mo id="S3.E4.m1.3.3.1.1.2" xref="S3.E4.m1.3.3.1.1.2.cmml">⁢</mo><msubsup id="S3.E4.m1.3.3.1.1.3" xref="S3.E4.m1.3.3.1.1.3.cmml"><mi id="S3.E4.m1.3.3.1.1.3.2.2" xref="S3.E4.m1.3.3.1.1.3.2.2.cmml">δ</mi><mrow id="S3.E4.m1.3.3.1.1.3.2.3" xref="S3.E4.m1.3.3.1.1.3.2.3.cmml"><mi id="S3.E4.m1.3.3.1.1.3.2.3.2" xref="S3.E4.m1.3.3.1.1.3.2.3.2.cmml">t</mi><mo id="S3.E4.m1.3.3.1.1.3.2.3.1" xref="S3.E4.m1.3.3.1.1.3.2.3.1.cmml">+</mo><mi id="S3.E4.m1.3.3.1.1.3.2.3.3" xref="S3.E4.m1.3.3.1.1.3.2.3.3.cmml">l</mi></mrow><mi id="S3.E4.m1.3.3.1.1.3.3" xref="S3.E4.m1.3.3.1.1.3.3.cmml">V</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.3b"><apply id="S3.E4.m1.3.3.cmml" xref="S3.E4.m1.3.3"><eq id="S3.E4.m1.3.3.2.cmml" xref="S3.E4.m1.3.3.2"></eq><apply id="S3.E4.m1.3.3.3.cmml" xref="S3.E4.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.3.1.cmml" xref="S3.E4.m1.3.3.3">superscript</csymbol><apply id="S3.E4.m1.3.3.3.2.cmml" xref="S3.E4.m1.3.3.3.2"><ci id="S3.E4.m1.3.3.3.2.1.cmml" xref="S3.E4.m1.3.3.3.2.1">^</ci><ci id="S3.E4.m1.3.3.3.2.2.cmml" xref="S3.E4.m1.3.3.3.2.2">𝐴</ci></apply><apply id="S3.E4.m1.2.2.2.cmml" xref="S3.E4.m1.2.2.2"><times id="S3.E4.m1.2.2.2.3.cmml" xref="S3.E4.m1.2.2.2.3"></times><ci id="S3.E4.m1.2.2.2.4.cmml" xref="S3.E4.m1.2.2.2.4">𝐺</ci><ci id="S3.E4.m1.2.2.2.5.cmml" xref="S3.E4.m1.2.2.2.5">𝐴</ci><ci id="S3.E4.m1.2.2.2.6.cmml" xref="S3.E4.m1.2.2.2.6">𝐸</ci><interval closure="open" id="S3.E4.m1.2.2.2.7.1.cmml" xref="S3.E4.m1.2.2.2.7.2"><ci id="S3.E4.m1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1">𝛾</ci><ci id="S3.E4.m1.2.2.2.2.cmml" xref="S3.E4.m1.2.2.2.2">𝜆</ci></interval></apply></apply><apply id="S3.E4.m1.3.3.1.cmml" xref="S3.E4.m1.3.3.1"><apply id="S3.E4.m1.3.3.1.2.cmml" xref="S3.E4.m1.3.3.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.2.1.cmml" xref="S3.E4.m1.3.3.1.2">superscript</csymbol><apply id="S3.E4.m1.3.3.1.2.2.cmml" xref="S3.E4.m1.3.3.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.2.2.1.cmml" xref="S3.E4.m1.3.3.1.2">subscript</csymbol><sum id="S3.E4.m1.3.3.1.2.2.2.cmml" xref="S3.E4.m1.3.3.1.2.2.2"></sum><apply id="S3.E4.m1.3.3.1.2.2.3.cmml" xref="S3.E4.m1.3.3.1.2.2.3"><eq id="S3.E4.m1.3.3.1.2.2.3.1.cmml" xref="S3.E4.m1.3.3.1.2.2.3.1"></eq><ci id="S3.E4.m1.3.3.1.2.2.3.2.cmml" xref="S3.E4.m1.3.3.1.2.2.3.2">𝑙</ci><cn id="S3.E4.m1.3.3.1.2.2.3.3.cmml" type="integer" xref="S3.E4.m1.3.3.1.2.2.3.3">0</cn></apply></apply><infinity id="S3.E4.m1.3.3.1.2.3.cmml" xref="S3.E4.m1.3.3.1.2.3"></infinity></apply><apply id="S3.E4.m1.3.3.1.1.cmml" xref="S3.E4.m1.3.3.1.1"><times id="S3.E4.m1.3.3.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.2"></times><apply id="S3.E4.m1.3.3.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1">superscript</csymbol><apply id="S3.E4.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1"><times id="S3.E4.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1"></times><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.2">𝛾</ci><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.3">𝜆</ci></apply><ci id="S3.E4.m1.3.3.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.3">𝑙</ci></apply><apply id="S3.E4.m1.3.3.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.3.1.cmml" xref="S3.E4.m1.3.3.1.1.3">superscript</csymbol><apply id="S3.E4.m1.3.3.1.1.3.2.cmml" xref="S3.E4.m1.3.3.1.1.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.3.2.1.cmml" xref="S3.E4.m1.3.3.1.1.3">subscript</csymbol><ci id="S3.E4.m1.3.3.1.1.3.2.2.cmml" xref="S3.E4.m1.3.3.1.1.3.2.2">𝛿</ci><apply id="S3.E4.m1.3.3.1.1.3.2.3.cmml" xref="S3.E4.m1.3.3.1.1.3.2.3"><plus id="S3.E4.m1.3.3.1.1.3.2.3.1.cmml" xref="S3.E4.m1.3.3.1.1.3.2.3.1"></plus><ci id="S3.E4.m1.3.3.1.1.3.2.3.2.cmml" xref="S3.E4.m1.3.3.1.1.3.2.3.2">𝑡</ci><ci id="S3.E4.m1.3.3.1.1.3.2.3.3.cmml" xref="S3.E4.m1.3.3.1.1.3.2.3.3">𝑙</ci></apply></apply><ci id="S3.E4.m1.3.3.1.1.3.3.cmml" xref="S3.E4.m1.3.3.1.1.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.3c">\hat{A}^{GAE(\gamma,\lambda)}=\sum_{l=0}^{\infty}(\gamma\lambda)^{l}\delta_{t+%
l}^{V}</annotation><annotation encoding="application/x-llamapun" id="S3.E4.m1.3d">over^ start_ARG italic_A end_ARG start_POSTSUPERSCRIPT italic_G italic_A italic_E ( italic_γ , italic_λ ) end_POSTSUPERSCRIPT = ∑ start_POSTSUBSCRIPT italic_l = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ∞ end_POSTSUPERSCRIPT ( italic_γ italic_λ ) start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT italic_δ start_POSTSUBSCRIPT italic_t + italic_l end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_V end_POSTSUPERSCRIPT</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS3.p8">
<p class="ltx_p" id="S3.SS3.p8.5">where <math alttext="\gamma" class="ltx_Math" display="inline" id="S3.SS3.p8.1.m1.1"><semantics id="S3.SS3.p8.1.m1.1a"><mi id="S3.SS3.p8.1.m1.1.1" xref="S3.SS3.p8.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.1.m1.1b"><ci id="S3.SS3.p8.1.m1.1.1.cmml" xref="S3.SS3.p8.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.1.m1.1c">\gamma</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p8.1.m1.1d">italic_γ</annotation></semantics></math> is the discount factor, typically used to measure the present value of future rewards. <math alttext="\lambda" class="ltx_Math" display="inline" id="S3.SS3.p8.2.m2.1"><semantics id="S3.SS3.p8.2.m2.1a"><mi id="S3.SS3.p8.2.m2.1.1" xref="S3.SS3.p8.2.m2.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.2.m2.1b"><ci id="S3.SS3.p8.2.m2.1.1.cmml" xref="S3.SS3.p8.2.m2.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.2.m2.1c">\lambda</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p8.2.m2.1d">italic_λ</annotation></semantics></math> is the smoothing factor in GAE, controlling the trade-off between bias and variance. <math alttext="\delta_{t+l}^{V}" class="ltx_Math" display="inline" id="S3.SS3.p8.3.m3.1"><semantics id="S3.SS3.p8.3.m3.1a"><msubsup id="S3.SS3.p8.3.m3.1.1" xref="S3.SS3.p8.3.m3.1.1.cmml"><mi id="S3.SS3.p8.3.m3.1.1.2.2" xref="S3.SS3.p8.3.m3.1.1.2.2.cmml">δ</mi><mrow id="S3.SS3.p8.3.m3.1.1.2.3" xref="S3.SS3.p8.3.m3.1.1.2.3.cmml"><mi id="S3.SS3.p8.3.m3.1.1.2.3.2" xref="S3.SS3.p8.3.m3.1.1.2.3.2.cmml">t</mi><mo id="S3.SS3.p8.3.m3.1.1.2.3.1" xref="S3.SS3.p8.3.m3.1.1.2.3.1.cmml">+</mo><mi id="S3.SS3.p8.3.m3.1.1.2.3.3" xref="S3.SS3.p8.3.m3.1.1.2.3.3.cmml">l</mi></mrow><mi id="S3.SS3.p8.3.m3.1.1.3" xref="S3.SS3.p8.3.m3.1.1.3.cmml">V</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.3.m3.1b"><apply id="S3.SS3.p8.3.m3.1.1.cmml" xref="S3.SS3.p8.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p8.3.m3.1.1.1.cmml" xref="S3.SS3.p8.3.m3.1.1">superscript</csymbol><apply id="S3.SS3.p8.3.m3.1.1.2.cmml" xref="S3.SS3.p8.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p8.3.m3.1.1.2.1.cmml" xref="S3.SS3.p8.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.p8.3.m3.1.1.2.2.cmml" xref="S3.SS3.p8.3.m3.1.1.2.2">𝛿</ci><apply id="S3.SS3.p8.3.m3.1.1.2.3.cmml" xref="S3.SS3.p8.3.m3.1.1.2.3"><plus id="S3.SS3.p8.3.m3.1.1.2.3.1.cmml" xref="S3.SS3.p8.3.m3.1.1.2.3.1"></plus><ci id="S3.SS3.p8.3.m3.1.1.2.3.2.cmml" xref="S3.SS3.p8.3.m3.1.1.2.3.2">𝑡</ci><ci id="S3.SS3.p8.3.m3.1.1.2.3.3.cmml" xref="S3.SS3.p8.3.m3.1.1.2.3.3">𝑙</ci></apply></apply><ci id="S3.SS3.p8.3.m3.1.1.3.cmml" xref="S3.SS3.p8.3.m3.1.1.3">𝑉</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.3.m3.1c">\delta_{t+l}^{V}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p8.3.m3.1d">italic_δ start_POSTSUBSCRIPT italic_t + italic_l end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_V end_POSTSUPERSCRIPT</annotation></semantics></math> is the Temporal Difference (TD) error at time step <math alttext="t+l" class="ltx_Math" display="inline" id="S3.SS3.p8.4.m4.1"><semantics id="S3.SS3.p8.4.m4.1a"><mrow id="S3.SS3.p8.4.m4.1.1" xref="S3.SS3.p8.4.m4.1.1.cmml"><mi id="S3.SS3.p8.4.m4.1.1.2" xref="S3.SS3.p8.4.m4.1.1.2.cmml">t</mi><mo id="S3.SS3.p8.4.m4.1.1.1" xref="S3.SS3.p8.4.m4.1.1.1.cmml">+</mo><mi id="S3.SS3.p8.4.m4.1.1.3" xref="S3.SS3.p8.4.m4.1.1.3.cmml">l</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.4.m4.1b"><apply id="S3.SS3.p8.4.m4.1.1.cmml" xref="S3.SS3.p8.4.m4.1.1"><plus id="S3.SS3.p8.4.m4.1.1.1.cmml" xref="S3.SS3.p8.4.m4.1.1.1"></plus><ci id="S3.SS3.p8.4.m4.1.1.2.cmml" xref="S3.SS3.p8.4.m4.1.1.2">𝑡</ci><ci id="S3.SS3.p8.4.m4.1.1.3.cmml" xref="S3.SS3.p8.4.m4.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.4.m4.1c">t+l</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p8.4.m4.1d">italic_t + italic_l</annotation></semantics></math>, defined as <math alttext="\delta_{t}^{V}=r_{t}+\gamma V(s_{t+1})-V(s_{t})" class="ltx_Math" display="inline" id="S3.SS3.p8.5.m5.2"><semantics id="S3.SS3.p8.5.m5.2a"><mrow id="S3.SS3.p8.5.m5.2.2" xref="S3.SS3.p8.5.m5.2.2.cmml"><msubsup id="S3.SS3.p8.5.m5.2.2.4" xref="S3.SS3.p8.5.m5.2.2.4.cmml"><mi id="S3.SS3.p8.5.m5.2.2.4.2.2" xref="S3.SS3.p8.5.m5.2.2.4.2.2.cmml">δ</mi><mi id="S3.SS3.p8.5.m5.2.2.4.2.3" xref="S3.SS3.p8.5.m5.2.2.4.2.3.cmml">t</mi><mi id="S3.SS3.p8.5.m5.2.2.4.3" xref="S3.SS3.p8.5.m5.2.2.4.3.cmml">V</mi></msubsup><mo id="S3.SS3.p8.5.m5.2.2.3" xref="S3.SS3.p8.5.m5.2.2.3.cmml">=</mo><mrow id="S3.SS3.p8.5.m5.2.2.2" xref="S3.SS3.p8.5.m5.2.2.2.cmml"><mrow id="S3.SS3.p8.5.m5.1.1.1.1" xref="S3.SS3.p8.5.m5.1.1.1.1.cmml"><msub id="S3.SS3.p8.5.m5.1.1.1.1.3" xref="S3.SS3.p8.5.m5.1.1.1.1.3.cmml"><mi id="S3.SS3.p8.5.m5.1.1.1.1.3.2" xref="S3.SS3.p8.5.m5.1.1.1.1.3.2.cmml">r</mi><mi id="S3.SS3.p8.5.m5.1.1.1.1.3.3" xref="S3.SS3.p8.5.m5.1.1.1.1.3.3.cmml">t</mi></msub><mo id="S3.SS3.p8.5.m5.1.1.1.1.2" xref="S3.SS3.p8.5.m5.1.1.1.1.2.cmml">+</mo><mrow id="S3.SS3.p8.5.m5.1.1.1.1.1" xref="S3.SS3.p8.5.m5.1.1.1.1.1.cmml"><mi id="S3.SS3.p8.5.m5.1.1.1.1.1.3" xref="S3.SS3.p8.5.m5.1.1.1.1.1.3.cmml">γ</mi><mo id="S3.SS3.p8.5.m5.1.1.1.1.1.2" xref="S3.SS3.p8.5.m5.1.1.1.1.1.2.cmml">⁢</mo><mi id="S3.SS3.p8.5.m5.1.1.1.1.1.4" xref="S3.SS3.p8.5.m5.1.1.1.1.1.4.cmml">V</mi><mo id="S3.SS3.p8.5.m5.1.1.1.1.1.2a" xref="S3.SS3.p8.5.m5.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.cmml"><mo id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.2" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.2.cmml">s</mi><mrow id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.2" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.2.cmml">t</mi><mo id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.1" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.1.cmml">+</mo><mn id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.3" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.3.cmml">1</mn></mrow></msub><mo id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.SS3.p8.5.m5.2.2.2.3" xref="S3.SS3.p8.5.m5.2.2.2.3.cmml">−</mo><mrow id="S3.SS3.p8.5.m5.2.2.2.2" xref="S3.SS3.p8.5.m5.2.2.2.2.cmml"><mi id="S3.SS3.p8.5.m5.2.2.2.2.3" xref="S3.SS3.p8.5.m5.2.2.2.2.3.cmml">V</mi><mo id="S3.SS3.p8.5.m5.2.2.2.2.2" xref="S3.SS3.p8.5.m5.2.2.2.2.2.cmml">⁢</mo><mrow id="S3.SS3.p8.5.m5.2.2.2.2.1.1" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.cmml"><mo id="S3.SS3.p8.5.m5.2.2.2.2.1.1.2" stretchy="false" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.cmml">(</mo><msub id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.cmml"><mi id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.2" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.2.cmml">s</mi><mi id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.3" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS3.p8.5.m5.2.2.2.2.1.1.3" stretchy="false" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.5.m5.2b"><apply id="S3.SS3.p8.5.m5.2.2.cmml" xref="S3.SS3.p8.5.m5.2.2"><eq id="S3.SS3.p8.5.m5.2.2.3.cmml" xref="S3.SS3.p8.5.m5.2.2.3"></eq><apply id="S3.SS3.p8.5.m5.2.2.4.cmml" xref="S3.SS3.p8.5.m5.2.2.4"><csymbol cd="ambiguous" id="S3.SS3.p8.5.m5.2.2.4.1.cmml" xref="S3.SS3.p8.5.m5.2.2.4">superscript</csymbol><apply id="S3.SS3.p8.5.m5.2.2.4.2.cmml" xref="S3.SS3.p8.5.m5.2.2.4"><csymbol cd="ambiguous" id="S3.SS3.p8.5.m5.2.2.4.2.1.cmml" xref="S3.SS3.p8.5.m5.2.2.4">subscript</csymbol><ci id="S3.SS3.p8.5.m5.2.2.4.2.2.cmml" xref="S3.SS3.p8.5.m5.2.2.4.2.2">𝛿</ci><ci id="S3.SS3.p8.5.m5.2.2.4.2.3.cmml" xref="S3.SS3.p8.5.m5.2.2.4.2.3">𝑡</ci></apply><ci id="S3.SS3.p8.5.m5.2.2.4.3.cmml" xref="S3.SS3.p8.5.m5.2.2.4.3">𝑉</ci></apply><apply id="S3.SS3.p8.5.m5.2.2.2.cmml" xref="S3.SS3.p8.5.m5.2.2.2"><minus id="S3.SS3.p8.5.m5.2.2.2.3.cmml" xref="S3.SS3.p8.5.m5.2.2.2.3"></minus><apply id="S3.SS3.p8.5.m5.1.1.1.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1"><plus id="S3.SS3.p8.5.m5.1.1.1.1.2.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.2"></plus><apply id="S3.SS3.p8.5.m5.1.1.1.1.3.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p8.5.m5.1.1.1.1.3.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.3">subscript</csymbol><ci id="S3.SS3.p8.5.m5.1.1.1.1.3.2.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.3.2">𝑟</ci><ci id="S3.SS3.p8.5.m5.1.1.1.1.3.3.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.3.3">𝑡</ci></apply><apply id="S3.SS3.p8.5.m5.1.1.1.1.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1"><times id="S3.SS3.p8.5.m5.1.1.1.1.1.2.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.2"></times><ci id="S3.SS3.p8.5.m5.1.1.1.1.1.3.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.3">𝛾</ci><ci id="S3.SS3.p8.5.m5.1.1.1.1.1.4.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.4">𝑉</ci><apply id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.2">𝑠</ci><apply id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3"><plus id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.1"></plus><ci id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.2">𝑡</ci><cn id="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS3.p8.5.m5.1.1.1.1.1.1.1.1.3.3">1</cn></apply></apply></apply></apply><apply id="S3.SS3.p8.5.m5.2.2.2.2.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2"><times id="S3.SS3.p8.5.m5.2.2.2.2.2.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.2"></times><ci id="S3.SS3.p8.5.m5.2.2.2.2.3.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.3">𝑉</ci><apply id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.1.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1">subscript</csymbol><ci id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.2.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.2">𝑠</ci><ci id="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.3.cmml" xref="S3.SS3.p8.5.m5.2.2.2.2.1.1.1.3">𝑡</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.5.m5.2c">\delta_{t}^{V}=r_{t}+\gamma V(s_{t+1})-V(s_{t})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p8.5.m5.2d">italic_δ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_V end_POSTSUPERSCRIPT = italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT + italic_γ italic_V ( italic_s start_POSTSUBSCRIPT italic_t + 1 end_POSTSUBSCRIPT ) - italic_V ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p9">
<p class="ltx_p" id="S3.SS3.p9.1">It is important to set a sensible reward <math alttext="R_{t}" class="ltx_Math" display="inline" id="S3.SS3.p9.1.m1.1"><semantics id="S3.SS3.p9.1.m1.1a"><msub id="S3.SS3.p9.1.m1.1.1" xref="S3.SS3.p9.1.m1.1.1.cmml"><mi id="S3.SS3.p9.1.m1.1.1.2" xref="S3.SS3.p9.1.m1.1.1.2.cmml">R</mi><mi id="S3.SS3.p9.1.m1.1.1.3" xref="S3.SS3.p9.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p9.1.m1.1b"><apply id="S3.SS3.p9.1.m1.1.1.cmml" xref="S3.SS3.p9.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p9.1.m1.1.1.1.cmml" xref="S3.SS3.p9.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p9.1.m1.1.1.2.cmml" xref="S3.SS3.p9.1.m1.1.1.2">𝑅</ci><ci id="S3.SS3.p9.1.m1.1.1.3.cmml" xref="S3.SS3.p9.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p9.1.m1.1c">R_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p9.1.m1.1d">italic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>. An intuitive design in aligning preference is to directly compute the score from the code snippets generated by the generator and ground truth directly. However, this does not take into consideration the features of the code generation task. Shorter code is generally easier to generate, resulting in higher reward. The corresponding relevant code is also shorter, leading the refactorer to conclude that generating shorter code increases the generator’s performance, thus consistently producing more concise code snippets. During the reinforcement learning training process, the refactorer may generate tokens that could confuse the generator. To address this, we incorporate Kullback-Leibler divergence (KL) into the reward function to ensure that the output distribution of the policy model remains close to that of the original model. The final reward function is:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(5)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="R_{t}=\text{CodeBleu}(GT_{t},output_{t})\cdot\sqrt{\text{len}(\text{tokenizer}%
(GT_{t}))}-\beta\text{KL}" class="ltx_Math" display="block" id="S3.E5.m1.3"><semantics id="S3.E5.m1.3a"><mrow id="S3.E5.m1.3.3" xref="S3.E5.m1.3.3.cmml"><msub id="S3.E5.m1.3.3.4" xref="S3.E5.m1.3.3.4.cmml"><mi id="S3.E5.m1.3.3.4.2" xref="S3.E5.m1.3.3.4.2.cmml">R</mi><mi id="S3.E5.m1.3.3.4.3" xref="S3.E5.m1.3.3.4.3.cmml">t</mi></msub><mo id="S3.E5.m1.3.3.3" xref="S3.E5.m1.3.3.3.cmml">=</mo><mrow id="S3.E5.m1.3.3.2" xref="S3.E5.m1.3.3.2.cmml"><mrow id="S3.E5.m1.3.3.2.2" xref="S3.E5.m1.3.3.2.2.cmml"><mrow id="S3.E5.m1.3.3.2.2.2" xref="S3.E5.m1.3.3.2.2.2.cmml"><mtext id="S3.E5.m1.3.3.2.2.2.4" xref="S3.E5.m1.3.3.2.2.2.4a.cmml">CodeBleu</mtext><mo id="S3.E5.m1.3.3.2.2.2.3" xref="S3.E5.m1.3.3.2.2.2.3.cmml">⁢</mo><mrow id="S3.E5.m1.3.3.2.2.2.2.2" xref="S3.E5.m1.3.3.2.2.2.2.3.cmml"><mo id="S3.E5.m1.3.3.2.2.2.2.2.3" stretchy="false" xref="S3.E5.m1.3.3.2.2.2.2.3.cmml">(</mo><mrow id="S3.E5.m1.2.2.1.1.1.1.1.1" xref="S3.E5.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E5.m1.2.2.1.1.1.1.1.1.2" xref="S3.E5.m1.2.2.1.1.1.1.1.1.2.cmml">G</mi><mo id="S3.E5.m1.2.2.1.1.1.1.1.1.1" xref="S3.E5.m1.2.2.1.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.E5.m1.2.2.1.1.1.1.1.1.3" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.E5.m1.2.2.1.1.1.1.1.1.3.2" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3.2.cmml">T</mi><mi id="S3.E5.m1.2.2.1.1.1.1.1.1.3.3" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.E5.m1.3.3.2.2.2.2.2.4" xref="S3.E5.m1.3.3.2.2.2.2.3.cmml">,</mo><mrow id="S3.E5.m1.3.3.2.2.2.2.2.2" xref="S3.E5.m1.3.3.2.2.2.2.2.2.cmml"><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.2" xref="S3.E5.m1.3.3.2.2.2.2.2.2.2.cmml">o</mi><mo id="S3.E5.m1.3.3.2.2.2.2.2.2.1" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.3" xref="S3.E5.m1.3.3.2.2.2.2.2.2.3.cmml">u</mi><mo id="S3.E5.m1.3.3.2.2.2.2.2.2.1a" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.4" xref="S3.E5.m1.3.3.2.2.2.2.2.2.4.cmml">t</mi><mo id="S3.E5.m1.3.3.2.2.2.2.2.2.1b" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.5" xref="S3.E5.m1.3.3.2.2.2.2.2.2.5.cmml">p</mi><mo id="S3.E5.m1.3.3.2.2.2.2.2.2.1c" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.6" xref="S3.E5.m1.3.3.2.2.2.2.2.2.6.cmml">u</mi><mo id="S3.E5.m1.3.3.2.2.2.2.2.2.1d" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><msub id="S3.E5.m1.3.3.2.2.2.2.2.2.7" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7.cmml"><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.7.2" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7.2.cmml">t</mi><mi id="S3.E5.m1.3.3.2.2.2.2.2.2.7.3" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7.3.cmml">t</mi></msub></mrow><mo id="S3.E5.m1.3.3.2.2.2.2.2.5" rspace="0.055em" stretchy="false" xref="S3.E5.m1.3.3.2.2.2.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.3.3.2.2.3" rspace="0.222em" xref="S3.E5.m1.3.3.2.2.3.cmml">⋅</mo><msqrt id="S3.E5.m1.1.1" xref="S3.E5.m1.1.1.cmml"><mrow id="S3.E5.m1.1.1.1" xref="S3.E5.m1.1.1.1.cmml"><mtext id="S3.E5.m1.1.1.1.3" xref="S3.E5.m1.1.1.1.3a.cmml">len</mtext><mo id="S3.E5.m1.1.1.1.2" xref="S3.E5.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.cmml"><mtext id="S3.E5.m1.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.3a.cmml">tokenizer</mtext><mo id="S3.E5.m1.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.2.cmml">G</mi><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">T</mi><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msqrt></mrow><mo id="S3.E5.m1.3.3.2.3" xref="S3.E5.m1.3.3.2.3.cmml">−</mo><mrow id="S3.E5.m1.3.3.2.4" xref="S3.E5.m1.3.3.2.4.cmml"><mi id="S3.E5.m1.3.3.2.4.2" xref="S3.E5.m1.3.3.2.4.2.cmml">β</mi><mo id="S3.E5.m1.3.3.2.4.1" xref="S3.E5.m1.3.3.2.4.1.cmml">⁢</mo><mtext id="S3.E5.m1.3.3.2.4.3" xref="S3.E5.m1.3.3.2.4.3a.cmml">KL</mtext></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.3b"><apply id="S3.E5.m1.3.3.cmml" xref="S3.E5.m1.3.3"><eq id="S3.E5.m1.3.3.3.cmml" xref="S3.E5.m1.3.3.3"></eq><apply id="S3.E5.m1.3.3.4.cmml" xref="S3.E5.m1.3.3.4"><csymbol cd="ambiguous" id="S3.E5.m1.3.3.4.1.cmml" xref="S3.E5.m1.3.3.4">subscript</csymbol><ci id="S3.E5.m1.3.3.4.2.cmml" xref="S3.E5.m1.3.3.4.2">𝑅</ci><ci id="S3.E5.m1.3.3.4.3.cmml" xref="S3.E5.m1.3.3.4.3">𝑡</ci></apply><apply id="S3.E5.m1.3.3.2.cmml" xref="S3.E5.m1.3.3.2"><minus id="S3.E5.m1.3.3.2.3.cmml" xref="S3.E5.m1.3.3.2.3"></minus><apply id="S3.E5.m1.3.3.2.2.cmml" xref="S3.E5.m1.3.3.2.2"><ci id="S3.E5.m1.3.3.2.2.3.cmml" xref="S3.E5.m1.3.3.2.2.3">⋅</ci><apply id="S3.E5.m1.3.3.2.2.2.cmml" xref="S3.E5.m1.3.3.2.2.2"><times id="S3.E5.m1.3.3.2.2.2.3.cmml" xref="S3.E5.m1.3.3.2.2.2.3"></times><ci id="S3.E5.m1.3.3.2.2.2.4a.cmml" xref="S3.E5.m1.3.3.2.2.2.4"><mtext id="S3.E5.m1.3.3.2.2.2.4.cmml" xref="S3.E5.m1.3.3.2.2.2.4">CodeBleu</mtext></ci><interval closure="open" id="S3.E5.m1.3.3.2.2.2.2.3.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2"><apply id="S3.E5.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1"><times id="S3.E5.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.1"></times><ci id="S3.E5.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.2">𝐺</ci><apply id="S3.E5.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E5.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E5.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3.2">𝑇</ci><ci id="S3.E5.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.E5.m1.2.2.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply><apply id="S3.E5.m1.3.3.2.2.2.2.2.2.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2"><times id="S3.E5.m1.3.3.2.2.2.2.2.2.1.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.1"></times><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.2.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.2">𝑜</ci><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.3.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.3">𝑢</ci><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.4.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.4">𝑡</ci><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.5.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.5">𝑝</ci><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.6.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.6">𝑢</ci><apply id="S3.E5.m1.3.3.2.2.2.2.2.2.7.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7"><csymbol cd="ambiguous" id="S3.E5.m1.3.3.2.2.2.2.2.2.7.1.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7">subscript</csymbol><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.7.2.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7.2">𝑡</ci><ci id="S3.E5.m1.3.3.2.2.2.2.2.2.7.3.cmml" xref="S3.E5.m1.3.3.2.2.2.2.2.2.7.3">𝑡</ci></apply></apply></interval></apply><apply id="S3.E5.m1.1.1.cmml" xref="S3.E5.m1.1.1"><root id="S3.E5.m1.1.1a.cmml" xref="S3.E5.m1.1.1"></root><apply id="S3.E5.m1.1.1.1.cmml" xref="S3.E5.m1.1.1.1"><times id="S3.E5.m1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.2"></times><ci id="S3.E5.m1.1.1.1.3a.cmml" xref="S3.E5.m1.1.1.1.3"><mtext id="S3.E5.m1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.3">len</mtext></ci><apply id="S3.E5.m1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1"><times id="S3.E5.m1.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.2"></times><ci id="S3.E5.m1.1.1.1.1.1.1.3a.cmml" xref="S3.E5.m1.1.1.1.1.1.1.3"><mtext id="S3.E5.m1.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.3">tokenizer</mtext></ci><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1"><times id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1"></times><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.2">𝐺</ci><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.2">𝑇</ci><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></apply></apply></apply><apply id="S3.E5.m1.3.3.2.4.cmml" xref="S3.E5.m1.3.3.2.4"><times id="S3.E5.m1.3.3.2.4.1.cmml" xref="S3.E5.m1.3.3.2.4.1"></times><ci id="S3.E5.m1.3.3.2.4.2.cmml" xref="S3.E5.m1.3.3.2.4.2">𝛽</ci><ci id="S3.E5.m1.3.3.2.4.3a.cmml" xref="S3.E5.m1.3.3.2.4.3"><mtext id="S3.E5.m1.3.3.2.4.3.cmml" xref="S3.E5.m1.3.3.2.4.3">KL</mtext></ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.3c">R_{t}=\text{CodeBleu}(GT_{t},output_{t})\cdot\sqrt{\text{len}(\text{tokenizer}%
(GT_{t}))}-\beta\text{KL}</annotation><annotation encoding="application/x-llamapun" id="S3.E5.m1.3d">italic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = CodeBleu ( italic_G italic_T start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_o italic_u italic_t italic_p italic_u italic_t start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) ⋅ square-root start_ARG len ( tokenizer ( italic_G italic_T start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) ) end_ARG - italic_β KL</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS3.p10">
<p class="ltx_p" id="S3.SS3.p10.3">where <math alttext="GT" class="ltx_Math" display="inline" id="S3.SS3.p10.1.m1.1"><semantics id="S3.SS3.p10.1.m1.1a"><mrow id="S3.SS3.p10.1.m1.1.1" xref="S3.SS3.p10.1.m1.1.1.cmml"><mi id="S3.SS3.p10.1.m1.1.1.2" xref="S3.SS3.p10.1.m1.1.1.2.cmml">G</mi><mo id="S3.SS3.p10.1.m1.1.1.1" xref="S3.SS3.p10.1.m1.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.1.m1.1.1.3" xref="S3.SS3.p10.1.m1.1.1.3.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p10.1.m1.1b"><apply id="S3.SS3.p10.1.m1.1.1.cmml" xref="S3.SS3.p10.1.m1.1.1"><times id="S3.SS3.p10.1.m1.1.1.1.cmml" xref="S3.SS3.p10.1.m1.1.1.1"></times><ci id="S3.SS3.p10.1.m1.1.1.2.cmml" xref="S3.SS3.p10.1.m1.1.1.2">𝐺</ci><ci id="S3.SS3.p10.1.m1.1.1.3.cmml" xref="S3.SS3.p10.1.m1.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p10.1.m1.1c">GT</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p10.1.m1.1d">italic_G italic_T</annotation></semantics></math> stands for ground truth, <math alttext="output" class="ltx_Math" display="inline" id="S3.SS3.p10.2.m2.1"><semantics id="S3.SS3.p10.2.m2.1a"><mrow id="S3.SS3.p10.2.m2.1.1" xref="S3.SS3.p10.2.m2.1.1.cmml"><mi id="S3.SS3.p10.2.m2.1.1.2" xref="S3.SS3.p10.2.m2.1.1.2.cmml">o</mi><mo id="S3.SS3.p10.2.m2.1.1.1" xref="S3.SS3.p10.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.2.m2.1.1.3" xref="S3.SS3.p10.2.m2.1.1.3.cmml">u</mi><mo id="S3.SS3.p10.2.m2.1.1.1a" xref="S3.SS3.p10.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.2.m2.1.1.4" xref="S3.SS3.p10.2.m2.1.1.4.cmml">t</mi><mo id="S3.SS3.p10.2.m2.1.1.1b" xref="S3.SS3.p10.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.2.m2.1.1.5" xref="S3.SS3.p10.2.m2.1.1.5.cmml">p</mi><mo id="S3.SS3.p10.2.m2.1.1.1c" xref="S3.SS3.p10.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.2.m2.1.1.6" xref="S3.SS3.p10.2.m2.1.1.6.cmml">u</mi><mo id="S3.SS3.p10.2.m2.1.1.1d" xref="S3.SS3.p10.2.m2.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.2.m2.1.1.7" xref="S3.SS3.p10.2.m2.1.1.7.cmml">t</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p10.2.m2.1b"><apply id="S3.SS3.p10.2.m2.1.1.cmml" xref="S3.SS3.p10.2.m2.1.1"><times id="S3.SS3.p10.2.m2.1.1.1.cmml" xref="S3.SS3.p10.2.m2.1.1.1"></times><ci id="S3.SS3.p10.2.m2.1.1.2.cmml" xref="S3.SS3.p10.2.m2.1.1.2">𝑜</ci><ci id="S3.SS3.p10.2.m2.1.1.3.cmml" xref="S3.SS3.p10.2.m2.1.1.3">𝑢</ci><ci id="S3.SS3.p10.2.m2.1.1.4.cmml" xref="S3.SS3.p10.2.m2.1.1.4">𝑡</ci><ci id="S3.SS3.p10.2.m2.1.1.5.cmml" xref="S3.SS3.p10.2.m2.1.1.5">𝑝</ci><ci id="S3.SS3.p10.2.m2.1.1.6.cmml" xref="S3.SS3.p10.2.m2.1.1.6">𝑢</ci><ci id="S3.SS3.p10.2.m2.1.1.7.cmml" xref="S3.SS3.p10.2.m2.1.1.7">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p10.2.m2.1c">output</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p10.2.m2.1d">italic_o italic_u italic_t italic_p italic_u italic_t</annotation></semantics></math> represents the output of the policy model, and <math alttext="KL" class="ltx_Math" display="inline" id="S3.SS3.p10.3.m3.1"><semantics id="S3.SS3.p10.3.m3.1a"><mrow id="S3.SS3.p10.3.m3.1.1" xref="S3.SS3.p10.3.m3.1.1.cmml"><mi id="S3.SS3.p10.3.m3.1.1.2" xref="S3.SS3.p10.3.m3.1.1.2.cmml">K</mi><mo id="S3.SS3.p10.3.m3.1.1.1" xref="S3.SS3.p10.3.m3.1.1.1.cmml">⁢</mo><mi id="S3.SS3.p10.3.m3.1.1.3" xref="S3.SS3.p10.3.m3.1.1.3.cmml">L</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p10.3.m3.1b"><apply id="S3.SS3.p10.3.m3.1.1.cmml" xref="S3.SS3.p10.3.m3.1.1"><times id="S3.SS3.p10.3.m3.1.1.1.cmml" xref="S3.SS3.p10.3.m3.1.1.1"></times><ci id="S3.SS3.p10.3.m3.1.1.2.cmml" xref="S3.SS3.p10.3.m3.1.1.2">𝐾</ci><ci id="S3.SS3.p10.3.m3.1.1.3.cmml" xref="S3.SS3.p10.3.m3.1.1.3">𝐿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p10.3.m3.1c">KL</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p10.3.m3.1d">italic_K italic_L</annotation></semantics></math> calculates the difference in output distribution between the policy model and the standard model. The standard model refers to the policy model before training.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4. </span>Experimental Setup</h2>
<figure class="ltx_table" id="S4.T1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S4.T1.2.1.1" style="font-size:90%;">Table 1</span>. </span><span class="ltx_text" id="S4.T1.3.2" style="font-size:90%;">Dataset Statistics. Code, NL, and Relevant refer to the average lengths after tokenization by CodeGPT. Relevant indicates the code retrieved by the retriever. Code tokens indicates the maximum length we set for the output generated by the refactorer.</span></figcaption>
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T1.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.1" style="padding-top:1pt;padding-bottom:1pt;">Dataset</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.2" style="padding-top:1pt;padding-bottom:1pt;">Lang.</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.3.1">
<span class="ltx_p" id="S4.T1.4.1.1.3.1.1" style="width:28.5pt;">Train</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.4.1">
<span class="ltx_p" id="S4.T1.4.1.1.4.1.1" style="width:28.5pt;">Valid</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.5.1">
<span class="ltx_p" id="S4.T1.4.1.1.5.1.1" style="width:28.5pt;">Test</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.6.1">
<span class="ltx_p" id="S4.T1.4.1.1.6.1.1" style="width:28.5pt;">—Code—</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.7.1">
<span class="ltx_p" id="S4.T1.4.1.1.7.1.1" style="width:28.5pt;">—NL—</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T1.4.1.1.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.1.1.8.1">
<span class="ltx_p" id="S4.T1.4.1.1.8.1.1" style="width:35.6pt;">—Relevant—</span>
</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T1.4.1.1.9" style="padding-top:1pt;padding-bottom:1pt;">Code tokens</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.4.2.1">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.4.2.1.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S4.T1.4.2.1.1.1">CodeSearchNet</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.4.2.1.2" style="padding-top:1pt;padding-bottom:1pt;">java</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.3.1">
<span class="ltx_p" id="S4.T1.4.2.1.3.1.1" style="width:28.5pt;">454,451</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.4.1">
<span class="ltx_p" id="S4.T1.4.2.1.4.1.1" style="width:28.5pt;">15,328</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.5.1">
<span class="ltx_p" id="S4.T1.4.2.1.5.1.1" style="width:28.5pt;">26,909</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.6.1">
<span class="ltx_p" id="S4.T1.4.2.1.6.1.1" style="width:28.5pt;">152</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.7.1">
<span class="ltx_p" id="S4.T1.4.2.1.7.1.1" style="width:28.5pt;">58</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T1.4.2.1.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.2.1.8.1">
<span class="ltx_p" id="S4.T1.4.2.1.8.1.1" style="width:35.6pt;">449</span>
</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.2.1.9" style="padding-top:1pt;padding-bottom:1pt;">168</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.3.2">
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.3.2.1" style="padding-top:1pt;padding-bottom:1pt;">python</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.2" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.2.1">
<span class="ltx_p" id="S4.T1.4.3.2.2.1.1" style="width:28.5pt;">412,178</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.3.1">
<span class="ltx_p" id="S4.T1.4.3.2.3.1.1" style="width:28.5pt;">23,107</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.4.1">
<span class="ltx_p" id="S4.T1.4.3.2.4.1.1" style="width:28.5pt;">22,176</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.5.1">
<span class="ltx_p" id="S4.T1.4.3.2.5.1.1" style="width:28.5pt;">184</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.6.1">
<span class="ltx_p" id="S4.T1.4.3.2.6.1.1" style="width:28.5pt;">68</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r" id="S4.T1.4.3.2.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.3.2.7.1">
<span class="ltx_p" id="S4.T1.4.3.2.7.1.1" style="width:35.6pt;">556</span>
</span>
</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.3.2.8" style="padding-top:1pt;padding-bottom:1pt;">168</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.4.3">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.1" style="padding-top:1pt;padding-bottom:1pt;">ConCode</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.2" style="padding-top:1pt;padding-bottom:1pt;">java</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.3.1">
<span class="ltx_p" id="S4.T1.4.4.3.3.1.1" style="width:28.5pt;">100,000</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.4.1">
<span class="ltx_p" id="S4.T1.4.4.3.4.1.1" style="width:28.5pt;">2,000</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.5.1">
<span class="ltx_p" id="S4.T1.4.4.3.5.1.1" style="width:28.5pt;">2,000</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.6.1">
<span class="ltx_p" id="S4.T1.4.4.3.6.1.1" style="width:28.5pt;">40</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.7.1">
<span class="ltx_p" id="S4.T1.4.4.3.7.1.1" style="width:28.5pt;">252</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T1.4.4.3.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S4.T1.4.4.3.8.1">
<span class="ltx_p" id="S4.T1.4.4.3.8.1.1" style="width:35.6pt;">126</span>
</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S4.T1.4.4.3.9" style="padding-top:1pt;padding-bottom:1pt;">64</td>
</tr>
</tbody>
</table>
</figure>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1. </span>Datasets</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">To validate the effectiveness of RRG and simulate a RAG configuration, we utilize two datasets. We constructed an external knowledge base by merging the training, validation, and test sets from these datasets. To enhance data quality, we employed both javalang and Python’s built-in AST (Abstract Syntax Tree) tools to filter out code with syntax errors. We then built a retrieval library and randomly selected 30,000 samples from the original training set to create a new, more refined training dataset. Although this significantly reduce the training set size, our model, after adopting SFT, still exhibited good performance, albeit slightly below the publicly available metrics.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">The statistical information of the datasets and the code tokens for different dataset settings are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.T1" title="Table 1 ‣ 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">1</span></a>. It is worth noting that we trained the entire framework using only the sampled datasets without generating new data.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<ul class="ltx_itemize" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">CodeSearchNet</span> <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib11" title="">husain2019codesearchnet, </a>)</cite> is a dataset with 2 million annotated code pairs extracted from open source libraries hosted on GitHub. The dataset contains code and documentation for 6 programming languages. We utilize the python and java portions of the dataset.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">ConCode</span> <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib27" title="">codegpt, </a>)</cite> is a highly specialized dataset for the java language, which incorporates natural language descriptions that cover not just the requirements but also the environment variables. Models using this dataset are expected to (a) exhibit a profound comprehension of the natural language description, translating it into environment variables, library API calls, and user-defined methods within the class, and (b) confidently ascertain the structure of the resulting code.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2. </span>Base Models</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">To verify the robustness of our framework, we set up multiple retrievers and generators.</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p2.1.1">Base models for Retriever.</span> We employ two types of retrievers: sparse retriever and dense retriever. For the sparse retriever, we use the BM25 algorithm to assess relevance. As for the dense retriever, we have utilized two different sets of semantic representation models: UAE-Large-V1 and mxbai-embed-large-v1. The similarity between the semantic representations is used to evaluate the similarity of the content. Since we are calculating the similarity between text semantics, we randomly selected two embedding models without the need to choose a model trained for code search. It is important to note that sparse retrieval often captures the lexical features of the text, while dense retrieval is more focused on capturing semantic features, resulting in different performance characteristics between the two approaches.</p>
</div>
<div class="ltx_para" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p3.1.1">Base models for Generator.</span> We set up multiple autoregressive language models with different scales of parameters and different pre-training methods:</p>
<ul class="ltx_itemize" id="S4.I2">
<li class="ltx_item" id="S4.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i1.p1">
<p class="ltx_p" id="S4.I2.i1.p1.1">GPT-2 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib33" title="">gpt2, </a>)</cite> is a transformer model pre-trained on a large english corpus via self-supervised learning without requiring manual annotation. Widely applied across various natural language processing tasks, it has not undergone downstream task fine-tuning. We employ models of sizes 170M and 330M in our experiments.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i2.p1">
<p class="ltx_p" id="S4.I2.i2.p1.1">CodeGPT <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib27" title="">codegpt, </a>)</cite> shares similarities with the GPT-2 architecture but is trained on code corpora. Specifically, we utilize CodeGPT-small-java-adapted for java program and CodeGPT-small-py-adapted for python program.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i3.p1">
<p class="ltx_p" id="S4.I2.i3.p1.1">CodeGEN <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib29" title="">codegen, </a>)</cite> describes the process of generating code as a multi-round dialogue between the user and the system. This approach aims to significantly improve code generation performance by validating the effectiveness of the dialogic code generation paradigm. We use the CodeGEN-350M-mono version for experiments.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I2.i4.p1">
<p class="ltx_p" id="S4.I2.i4.p1.1">PolyCoder <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib55" title="">xu2022polycoder, </a>)</cite> is based on the GPT-2 architecture and trained on a corpus of 12 programming languages, it performs better in C programming . We use 160M-sized models in our experiments.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S4.SS2.p4">
<p class="ltx_p" id="S4.SS2.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p4.1.1">Base models for Refactorer.</span> For the refactor module, we adopted the 60M parameter version of CodeT5 <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib52" title="">codet5, </a>)</cite>, a unified pre-trained transformer model.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3. </span>Metrics</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">In line with previous research, we utilize three key metrics to assess the quality of code generation in our method: Exact Match (EM), BLEU <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib31" title="">bleu, </a>)</cite>, and CodeBLEU <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib36" title="">ren2020codebleu, </a>)</cite>. EM determines whether the generated code is an exact match with the reference code. BLEU is an n-gram based metric that gauges the similarity between the generated code and the reference code, with scores ranging from 0 to 1. CodeBLEU, a variant of BLEU, is specifically designed for code generation tasks and takes into account the syntactic structure of the code.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">When examining the impact of the different retrievers on performance of RRG, we introduce a new set of evaluation metrics, which includes cosine similarity and Levenshtein distance <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib10" title="">haldar2011levenshtein, </a>)</cite>. Both metrics aim to quantify the similarity between texts, albeit using different computational principles and applications. Cosine similarity is based on a vector space model, while Levenshtein distance calculates the minimum single-character edit distance between two text sequences.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4. </span>Implementation Details</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.2">For dense retrieval, we utilize the FAISS <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#bib.bib7" title="">douze2024faiss, </a>)</cite> database to store embeddings and similarity matching. For sparse retrieval, we implement it using the python library rank-bm25. We adopt a two-stage retrieval approach, setting Top-K<sub class="ltx_sub" id="S4.SS4.p1.2.1"><span class="ltx_text ltx_font_italic" id="S4.SS4.p1.2.1.1">1</span></sub> to 10 in the first stage and Top-K<sub class="ltx_sub" id="S4.SS4.p1.2.2"><span class="ltx_text ltx_font_italic" id="S4.SS4.p1.2.2.1">2</span></sub> to 3 in the second stage and utilize swifter to expedite pandas processing. In refactored fine-tuning phase, we set batch-size to 16, epoch to 10, and learning rate to 1e-5. During the preference-aware tuning phase of training, we also set the learning rate to 1e-5, batch-size to 16, and train for a single epoch using the first 5k entries in the dataset, with the KL scatter weight set to 0.5. The block-size of the generator and the refactorer is set to 512, and all experiments are conducted on four NVIDIA GeForce RTX 3090s.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5. </span>Experimental Results</h2>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1. </span>Research Questions</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">In the evaluation, we focus on the following five research questions:</p>
<ul class="ltx_itemize" id="S5.I1">
<li class="ltx_item" id="S5.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i1.p1">
<p class="ltx_p" id="S5.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i1.p1.1.1">RQ1:</span> Does the RRG framework improve the effectiveness over RAG?</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i2.p1">
<p class="ltx_p" id="S5.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i2.p1.1.1">RQ2:</span> What is the effect of various retrievers on the performance of the RRG framework?</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i3.p1">
<p class="ltx_p" id="S5.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i3.p1.1.1">RQ3:</span> How do code tokens of varying lengths influence the RRG’s performance?</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i4.p1">
<p class="ltx_p" id="S5.I1.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i4.p1.1.1">RQ4:</span> What is the impact of the preference-aware tuning stage on RRG?</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i5.p1">
<p class="ltx_p" id="S5.I1.i5.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i5.p1.1.1">RQ5:</span> How is the generalization performance of the frozen refactorer?</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1">To investigate RQ1, we utilize two distinct datasets to simulate various scenarios. The ConCode dataset is characterized by relatively short code snippets with high similarity, introducing significant noise to the generator. In the RAG approach, all retrieved information is directly provided to the generator, whereas in the RRG framework, the generator solely refers to the output generated by the refactorer. Conversely, the CodeSearchNet dataset comprises longer and more intricate code, frequently exceeding the contextual window prescribed by the model. This complexity poses a challenge for the generator to produce precise outputs. Hence, we restrict the output size of both the retriever in RAG and the refactorer in RRG to a uniform length which is shown as code tokens in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S4.T1" title="Table 1 ‣ 4. Experimental Setup ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">1</span></a>. The objective of these experiments is to affirm the efficacy of the RRG framework in enhancing the RAG model under diverse conditions.</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.1">Due to limited resources, all subsequent experiments for RQ2-RQ4 are conducted on both the ConCode and CodeSearchNet-java datasets. For RQ2, we configure multiple retriever settings to assess the robustness of RRG against variations in the retriever. Regarding RQ3, we systematically adjust the maximum length of code tokens in the refactorer’s output and conduct extensive parameter experiments to scrutinize how diverse lengths influence RRG’s performance. As for RQ4, we further delve into the significance of preference-aware tuning within RRG. By comparing experimental results across different datasets, generator models, and code token length settings, we thoroughly examine the impact of this training strategy on overall performance. For RQ5, in order to study the generalizability of the frozen refactorer, we directly transferred the trained refactorer to another different combination to observe the effects.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2. </span>Does the RRG framework improve the effectiveness over RAG?</h3>
<figure class="ltx_table" id="S5.T2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S5.T2.2.1.1" style="font-size:90%;">Table 2</span>. </span><span class="ltx_text" id="S5.T2.3.2" style="font-size:90%;">Comparing the performance of different generators in RRG and RAG frameworks. The results are based on ConCode and CodeSearchNet. The refactorer is based on CodeT5-small. The retriever employs a dual-stage retrieval that incorporates UAE and BM25.</span></figcaption>
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T2.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T2.4.1.1">
<th class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S5.T2.4.1.1.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S5.T2.4.1.1.2" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.4.1.1.3" style="padding-top:1pt;padding-bottom:1pt;">ConCode</th>
<th class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.4.1.1.4" style="padding-top:1pt;padding-bottom:1pt;">CodeSearchNet-java</th>
<th class="ltx_td ltx_align_center ltx_align_top ltx_th ltx_th_column ltx_border_tt" colspan="3" id="S5.T2.4.1.1.5" style="padding-top:1pt;padding-bottom:1pt;">CodeSearchNet-python</th>
</tr>
<tr class="ltx_tr" id="S5.T2.4.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r" id="S5.T2.4.2.2.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.2.2.1.1">Base model</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r" id="S5.T2.4.2.2.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.2.2.2.1">Method</span></th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.3.1">
<span class="ltx_p" id="S5.T2.4.2.2.3.1.1" style="width:34.1pt;">EM</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.4.1">
<span class="ltx_p" id="S5.T2.4.2.2.4.1.1" style="width:34.1pt;">BLEU</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.5.1">
<span class="ltx_p" id="S5.T2.4.2.2.5.1.1" style="width:34.1pt;">CodeBLEU</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.6.1">
<span class="ltx_p" id="S5.T2.4.2.2.6.1.1" style="width:34.1pt;">EM</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.7.1">
<span class="ltx_p" id="S5.T2.4.2.2.7.1.1" style="width:34.1pt;">BLEU</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.8.1">
<span class="ltx_p" id="S5.T2.4.2.2.8.1.1" style="width:34.1pt;">CodeBLEU</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.9.1">
<span class="ltx_p" id="S5.T2.4.2.2.9.1.1" style="width:34.1pt;">EM</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.10.1">
<span class="ltx_p" id="S5.T2.4.2.2.10.1.1" style="width:34.1pt;">BLEU</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S5.T2.4.2.2.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.2.2.11.1">
<span class="ltx_p" id="S5.T2.4.2.2.11.1.1" style="width:34.1pt;">CodeBLEU</span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T2.4.3.1">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.3.1.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.3.1.2" style="padding-top:1pt;padding-bottom:1pt;">SFT</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.3.1">
<span class="ltx_p" id="S5.T2.4.3.1.3.1.1" style="width:34.1pt;">15.40</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.4.1">
<span class="ltx_p" id="S5.T2.4.3.1.4.1.1" style="width:34.1pt;">27.42</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.5.1">
<span class="ltx_p" id="S5.T2.4.3.1.5.1.1" style="width:34.1pt;">47.54</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.6.1">
<span class="ltx_p" id="S5.T2.4.3.1.6.1.1" style="width:34.1pt;">4.10</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.7.1">
<span class="ltx_p" id="S5.T2.4.3.1.7.1.1" style="width:34.1pt;">23.68</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.8.1">
<span class="ltx_p" id="S5.T2.4.3.1.8.1.1" style="width:34.1pt;">35.32</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.9.1">
<span class="ltx_p" id="S5.T2.4.3.1.9.1.1" style="width:34.1pt;">0.350</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.10.1">
<span class="ltx_p" id="S5.T2.4.3.1.10.1.1" style="width:34.1pt;">10.14</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.3.1.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.3.1.11.1">
<span class="ltx_p" id="S5.T2.4.3.1.11.1.1" style="width:34.1pt;">22.27</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.4.2">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.4.2.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.4.2.2" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.4.2.2.1" style="background-color:#EFF0F1;">RAG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.3" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.3.1">
<span class="ltx_p" id="S5.T2.4.4.2.3.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.3.1.1.1" style="background-color:#EFF0F1;">16.75</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.4" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.4.1">
<span class="ltx_p" id="S5.T2.4.4.2.4.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.4.1.1.1" style="background-color:#EFF0F1;">37.08</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.5" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.5.1">
<span class="ltx_p" id="S5.T2.4.4.2.5.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.5.1.1.1" style="background-color:#EFF0F1;">52.86</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.6" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.6.1">
<span class="ltx_p" id="S5.T2.4.4.2.6.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.6.1.1.1" style="background-color:#EFF0F1;">6.65</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.7" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.7.1">
<span class="ltx_p" id="S5.T2.4.4.2.7.1.1" style="width:34.1pt;"><span class="ltx_text ltx_align_center" id="S5.T2.4.4.2.7.1.1.1" style="background-color:#EFF0F1;">35.07</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.8" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.8.1">
<span class="ltx_p" id="S5.T2.4.4.2.8.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.8.1.1.1" style="background-color:#EFF0F1;">45.57</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.9" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.9.1">
<span class="ltx_p" id="S5.T2.4.4.2.9.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.9.1.1.1" style="background-color:#EFF0F1;">1.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.10" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.10.1">
<span class="ltx_p" id="S5.T2.4.4.2.10.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.10.1.1.1" style="background-color:#EFF0F1;">17.33</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.4.2.11" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.4.2.11.1">
<span class="ltx_p" id="S5.T2.4.4.2.11.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.4.2.11.1.1.1" style="background-color:#EFF0F1;">28.94</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.5.3.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.5.3.1.1">GPT2-s</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.5.3.2" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.5.3.2.1" style="background-color:#F0F4FF;">RRG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.3" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.3.1">
<span class="ltx_p" id="S5.T2.4.5.3.3.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.3.1.1.1" style="background-color:#F0F4FF;">19.00</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.4" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.4.1">
<span class="ltx_p" id="S5.T2.4.5.3.4.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.4.1.1.1" style="background-color:#F0F4FF;">38.32</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.5" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.5.1">
<span class="ltx_p" id="S5.T2.4.5.3.5.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.5.1.1.1" style="background-color:#F0F4FF;">54.52</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.6" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.6.1">
<span class="ltx_p" id="S5.T2.4.5.3.6.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.6.1.1.1" style="background-color:#F0F4FF;">7.05</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.7" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.7.1">
<span class="ltx_p" id="S5.T2.4.5.3.7.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.7.1.1.1" style="background-color:#F0F4FF;">37.61</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.8" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.8.1">
<span class="ltx_p" id="S5.T2.4.5.3.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.8.1.1.1" style="background-color:#F0F4FF;">47.31</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.9" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.9.1">
<span class="ltx_p" id="S5.T2.4.5.3.9.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.9.1.1.1" style="background-color:#F0F4FF;">1.15</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.10" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.10.1">
<span class="ltx_p" id="S5.T2.4.5.3.10.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.10.1.1.1" style="background-color:#F0F4FF;">19.42</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.5.3.11" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.5.3.11.1">
<span class="ltx_p" id="S5.T2.4.5.3.11.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.5.3.11.1.1.1" style="background-color:#F0F4FF;">30.92</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.6.4">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.6.4.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.6.4.2" style="padding-top:1pt;padding-bottom:1pt;">SFT</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.3.1">
<span class="ltx_p" id="S5.T2.4.6.4.3.1.1" style="width:34.1pt;">15.67</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.4.1">
<span class="ltx_p" id="S5.T2.4.6.4.4.1.1" style="width:34.1pt;">28.60</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.5.1">
<span class="ltx_p" id="S5.T2.4.6.4.5.1.1" style="width:34.1pt;">47.99</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.6.1">
<span class="ltx_p" id="S5.T2.4.6.4.6.1.1" style="width:34.1pt;">4.03</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.7.1">
<span class="ltx_p" id="S5.T2.4.6.4.7.1.1" style="width:34.1pt;">24.13</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.8.1">
<span class="ltx_p" id="S5.T2.4.6.4.8.1.1" style="width:34.1pt;">35.54</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.9.1">
<span class="ltx_p" id="S5.T2.4.6.4.9.1.1" style="width:34.1pt;">0.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.10.1">
<span class="ltx_p" id="S5.T2.4.6.4.10.1.1" style="width:34.1pt;">11.63</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.6.4.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.6.4.11.1">
<span class="ltx_p" id="S5.T2.4.6.4.11.1.1" style="width:34.1pt;">23.82</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.7.5">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.7.5.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.7.5.2" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.7.5.2.1" style="background-color:#EFF0F1;">RAG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.3" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.3.1">
<span class="ltx_p" id="S5.T2.4.7.5.3.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.3.1.1.1" style="background-color:#EFF0F1;">17.80</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.4" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.4.1">
<span class="ltx_p" id="S5.T2.4.7.5.4.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.4.1.1.1" style="background-color:#EFF0F1;">37.6</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.5" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.5.1">
<span class="ltx_p" id="S5.T2.4.7.5.5.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.5.1.1.1" style="background-color:#EFF0F1;">53.77</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.6" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.6.1">
<span class="ltx_p" id="S5.T2.4.7.5.6.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.6.1.1.1" style="background-color:#EFF0F1;">7.3</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.7" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.7.1">
<span class="ltx_p" id="S5.T2.4.7.5.7.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.7.1.1.1" style="background-color:#EFF0F1;">34.53</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.8" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.8.1">
<span class="ltx_p" id="S5.T2.4.7.5.8.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.8.1.1.1" style="background-color:#EFF0F1;">45.53</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.9" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.9.1">
<span class="ltx_p" id="S5.T2.4.7.5.9.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.9.1.1.1" style="background-color:#EFF0F1;">1.40</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.10" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.10.1">
<span class="ltx_p" id="S5.T2.4.7.5.10.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.10.1.1.1" style="background-color:#EFF0F1;">18.82</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.7.5.11" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.7.5.11.1">
<span class="ltx_p" id="S5.T2.4.7.5.11.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.7.5.11.1.1.1" style="background-color:#EFF0F1;">30.10</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.8.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.8.6.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.8.6.1.1">PolyCoder</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.8.6.2" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.8.6.2.1" style="background-color:#F0F4FF;">RRG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.3" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.3.1">
<span class="ltx_p" id="S5.T2.4.8.6.3.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.3.1.1.1" style="background-color:#F0F4FF;">21.41</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.4" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.4.1">
<span class="ltx_p" id="S5.T2.4.8.6.4.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.4.1.1.1" style="background-color:#F0F4FF;">39.26</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.5" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.5.1">
<span class="ltx_p" id="S5.T2.4.8.6.5.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.5.1.1.1" style="background-color:#F0F4FF;">55.67</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.6" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.6.1">
<span class="ltx_p" id="S5.T2.4.8.6.6.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.6.1.1.1" style="background-color:#F0F4FF;">8.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.7" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.7.1">
<span class="ltx_p" id="S5.T2.4.8.6.7.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.7.1.1.1" style="background-color:#F0F4FF;">35.50</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.8" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.8.1">
<span class="ltx_p" id="S5.T2.4.8.6.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.8.1.1.1" style="background-color:#F0F4FF;">45.77</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.9" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.9.1">
<span class="ltx_p" id="S5.T2.4.8.6.9.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.9.1.1.1" style="background-color:#F0F4FF;">1.40</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.10" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.10.1">
<span class="ltx_p" id="S5.T2.4.8.6.10.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.10.1.1.1" style="background-color:#F0F4FF;">19.63</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.8.6.11" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.8.6.11.1">
<span class="ltx_p" id="S5.T2.4.8.6.11.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.8.6.11.1.1.1" style="background-color:#F0F4FF;">31.25</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.9.7">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.9.7.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.9.7.2" style="padding-top:1pt;padding-bottom:1pt;">SFT</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.3.1">
<span class="ltx_p" id="S5.T2.4.9.7.3.1.1" style="width:34.1pt;">11.40</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.4.1">
<span class="ltx_p" id="S5.T2.4.9.7.4.1.1" style="width:34.1pt;">26.82</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.5.1">
<span class="ltx_p" id="S5.T2.4.9.7.5.1.1" style="width:34.1pt;">45.44</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.6.1">
<span class="ltx_p" id="S5.T2.4.9.7.6.1.1" style="width:34.1pt;">3.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.7.1">
<span class="ltx_p" id="S5.T2.4.9.7.7.1.1" style="width:34.1pt;">24.44</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.8.1">
<span class="ltx_p" id="S5.T2.4.9.7.8.1.1" style="width:34.1pt;">35.71</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.9.1">
<span class="ltx_p" id="S5.T2.4.9.7.9.1.1" style="width:34.1pt;">0.35</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.10.1">
<span class="ltx_p" id="S5.T2.4.9.7.10.1.1" style="width:34.1pt;">10.45</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.9.7.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.9.7.11.1">
<span class="ltx_p" id="S5.T2.4.9.7.11.1.1" style="width:34.1pt;">24.32</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.10.8">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.10.8.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.10.8.2" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.10.8.2.1" style="background-color:#EFF0F1;">RAG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.3" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.3.1">
<span class="ltx_p" id="S5.T2.4.10.8.3.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.3.1.1.1" style="background-color:#EFF0F1;">11.85</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.4" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.4.1">
<span class="ltx_p" id="S5.T2.4.10.8.4.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.4.1.1.1" style="background-color:#EFF0F1;">31.73</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.5" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.5.1">
<span class="ltx_p" id="S5.T2.4.10.8.5.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.5.1.1.1" style="background-color:#EFF0F1;">49.74</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.6" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.6.1">
<span class="ltx_p" id="S5.T2.4.10.8.6.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.10.8.6.1.1.1" style="background-color:#EFF0F1;">6.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.7" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.7.1">
<span class="ltx_p" id="S5.T2.4.10.8.7.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.7.1.1.1" style="background-color:#EFF0F1;">34.42</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.8" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.8.1">
<span class="ltx_p" id="S5.T2.4.10.8.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.10.8.8.1.1.1" style="background-color:#EFF0F1;">45.04</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.9" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.9.1">
<span class="ltx_p" id="S5.T2.4.10.8.9.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.10.8.9.1.1.1" style="background-color:#EFF0F1;">1.25</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.10" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.10.1">
<span class="ltx_p" id="S5.T2.4.10.8.10.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.10.1.1.1" style="background-color:#EFF0F1;">18.96</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.10.8.11" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.10.8.11.1">
<span class="ltx_p" id="S5.T2.4.10.8.11.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.10.8.11.1.1.1" style="background-color:#EFF0F1;">30.15</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.11.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.11.9.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.11.9.1.1">CodeGEN</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.11.9.2" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.11.9.2.1" style="background-color:#F0F4FF;">RRG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.3" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.3.1">
<span class="ltx_p" id="S5.T2.4.11.9.3.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.11.9.3.1.1.1" style="background-color:#F0F4FF;">15.11</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.4" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.4.1">
<span class="ltx_p" id="S5.T2.4.11.9.4.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.11.9.4.1.1.1" style="background-color:#F0F4FF;">33.76</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.5" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.5.1">
<span class="ltx_p" id="S5.T2.4.11.9.5.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold ltx_align_center" id="S5.T2.4.11.9.5.1.1.1" style="background-color:#F0F4FF;">51.26</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.6" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.6.1">
<span class="ltx_p" id="S5.T2.4.11.9.6.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.11.9.6.1.1.1" style="background-color:#F0F4FF;">6.55</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.7" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.7.1">
<span class="ltx_p" id="S5.T2.4.11.9.7.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.11.9.7.1.1.1" style="background-color:#F0F4FF;">34.69</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.8" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.8.1">
<span class="ltx_p" id="S5.T2.4.11.9.8.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.11.9.8.1.1.1" style="background-color:#F0F4FF;">44.71</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.9" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.9.1">
<span class="ltx_p" id="S5.T2.4.11.9.9.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.11.9.9.1.1.1" style="background-color:#F0F4FF;">1.19</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.10" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.10.1">
<span class="ltx_p" id="S5.T2.4.11.9.10.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.11.9.10.1.1.1" style="background-color:#F0F4FF;">19.37</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.11.9.11" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.11.9.11.1">
<span class="ltx_p" id="S5.T2.4.11.9.11.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.11.9.11.1.1.1" style="background-color:#F0F4FF;">30.22</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.12.10">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.12.10.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.12.10.2" style="padding-top:1pt;padding-bottom:1pt;">SFT</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.3.1">
<span class="ltx_p" id="S5.T2.4.12.10.3.1.1" style="width:34.1pt;">16.45</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.4.1">
<span class="ltx_p" id="S5.T2.4.12.10.4.1.1" style="width:34.1pt;">29.00</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.5.1">
<span class="ltx_p" id="S5.T2.4.12.10.5.1.1" style="width:34.1pt;">48.36</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.6.1">
<span class="ltx_p" id="S5.T2.4.12.10.6.1.1" style="width:34.1pt;">4.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.7.1">
<span class="ltx_p" id="S5.T2.4.12.10.7.1.1" style="width:34.1pt;">25.11</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.8.1">
<span class="ltx_p" id="S5.T2.4.12.10.8.1.1" style="width:34.1pt;">36.55</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.9.1">
<span class="ltx_p" id="S5.T2.4.12.10.9.1.1" style="width:34.1pt;">0.54</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.10.1">
<span class="ltx_p" id="S5.T2.4.12.10.10.1.1" style="width:34.1pt;">11.33</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.12.10.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.12.10.11.1">
<span class="ltx_p" id="S5.T2.4.12.10.11.1.1" style="width:34.1pt;">23.16</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.13.11">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.13.11.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.13.11.2" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.13.11.2.1" style="background-color:#EFF0F1;">RAG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.3" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.3.1">
<span class="ltx_p" id="S5.T2.4.13.11.3.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.3.1.1.1" style="background-color:#EFF0F1;">17.55</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.4" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.4.1">
<span class="ltx_p" id="S5.T2.4.13.11.4.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.4.1.1.1" style="background-color:#EFF0F1;">36.77</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.5" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.5.1">
<span class="ltx_p" id="S5.T2.4.13.11.5.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.5.1.1.1" style="background-color:#EFF0F1;">53.05</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.6" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.6.1">
<span class="ltx_p" id="S5.T2.4.13.11.6.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.13.11.6.1.1.1" style="background-color:#EFF0F1;">7.45</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.7" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.7.1">
<span class="ltx_p" id="S5.T2.4.13.11.7.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.7.1.1.1" style="background-color:#EFF0F1;">33.80</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.8" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.8.1">
<span class="ltx_p" id="S5.T2.4.13.11.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_align_center" id="S5.T2.4.13.11.8.1.1.1" style="background-color:#EFF0F1;">45.00</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.9" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.9.1">
<span class="ltx_p" id="S5.T2.4.13.11.9.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.13.11.9.1.1.1" style="background-color:#EFF0F1;">0.95</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.10" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.10.1">
<span class="ltx_p" id="S5.T2.4.13.11.10.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.10.1.1.1" style="background-color:#EFF0F1;">17.83</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.13.11.11" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.13.11.11.1">
<span class="ltx_p" id="S5.T2.4.13.11.11.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.13.11.11.1.1.1" style="background-color:#EFF0F1;">29.22</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.14.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.14.12.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.14.12.1.1">GPT2-m</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.14.12.2" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.14.12.2.1" style="background-color:#F0F4FF;">RRG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.3" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.3.1">
<span class="ltx_p" id="S5.T2.4.14.12.3.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.3.1.1.1" style="background-color:#F0F4FF;">20.86</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.4" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.4.1">
<span class="ltx_p" id="S5.T2.4.14.12.4.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.4.1.1.1" style="background-color:#F0F4FF;">40.22</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.5" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.5.1">
<span class="ltx_p" id="S5.T2.4.14.12.5.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.5.1.1.1" style="background-color:#F0F4FF;">55.55</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.6" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.6.1">
<span class="ltx_p" id="S5.T2.4.14.12.6.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.14.12.6.1.1.1" style="background-color:#F0F4FF;">7.25</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.7" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.7.1">
<span class="ltx_p" id="S5.T2.4.14.12.7.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.7.1.1.1" style="background-color:#F0F4FF;">35.07</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.8" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.8.1">
<span class="ltx_p" id="S5.T2.4.14.12.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.8.1.1.1" style="background-color:#F0F4FF;">45.38</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.9" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.9.1">
<span class="ltx_p" id="S5.T2.4.14.12.9.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.14.12.9.1.1.1" style="background-color:#F0F4FF;">0.90</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.10" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.10.1">
<span class="ltx_p" id="S5.T2.4.14.12.10.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.10.1.1.1" style="background-color:#F0F4FF;">18.36</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.14.12.11" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.14.12.11.1">
<span class="ltx_p" id="S5.T2.4.14.12.11.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.14.12.11.1.1.1" style="background-color:#F0F4FF;">30.04</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.15.13">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.15.13.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T2.4.15.13.2" style="padding-top:1pt;padding-bottom:1pt;">SFT</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.3" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.3.1">
<span class="ltx_p" id="S5.T2.4.15.13.3.1.1" style="width:34.1pt;">15.85</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.4" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.4.1">
<span class="ltx_p" id="S5.T2.4.15.13.4.1.1" style="width:34.1pt;">28.58</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.5" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.5.1">
<span class="ltx_p" id="S5.T2.4.15.13.5.1.1" style="width:34.1pt;">48.36</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.6" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.6.1">
<span class="ltx_p" id="S5.T2.4.15.13.6.1.1" style="width:34.1pt;">4.40</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.7" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.7.1">
<span class="ltx_p" id="S5.T2.4.15.13.7.1.1" style="width:34.1pt;">24.01</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.8" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.8.1">
<span class="ltx_p" id="S5.T2.4.15.13.8.1.1" style="width:34.1pt;">36.12</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.9" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.9.1">
<span class="ltx_p" id="S5.T2.4.15.13.9.1.1" style="width:34.1pt;">0.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.10" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.10.1">
<span class="ltx_p" id="S5.T2.4.15.13.10.1.1" style="width:34.1pt;">11.85</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S5.T2.4.15.13.11" style="padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.15.13.11.1">
<span class="ltx_p" id="S5.T2.4.15.13.11.1.1" style="width:34.1pt;">23.65</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.16.14">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.16.14.1" style="padding-top:1pt;padding-bottom:1pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T2.4.16.14.2" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.16.14.2.1" style="background-color:#EFF0F1;">RAG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.3" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.3.1">
<span class="ltx_p" id="S5.T2.4.16.14.3.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.3.1.1.1" style="background-color:#EFF0F1;">17.40</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.4" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.4.1">
<span class="ltx_p" id="S5.T2.4.16.14.4.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.4.1.1.1" style="background-color:#EFF0F1;">36.85</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.5" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.5.1">
<span class="ltx_p" id="S5.T2.4.16.14.5.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.5.1.1.1" style="background-color:#EFF0F1;">53.19</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.6" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.6.1">
<span class="ltx_p" id="S5.T2.4.16.14.6.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.6.1.1.1" style="background-color:#EFF0F1;">7.3</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.7" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.7.1">
<span class="ltx_p" id="S5.T2.4.16.14.7.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.7.1.1.1" style="background-color:#EFF0F1;">34.61</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.8" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.8.1">
<span class="ltx_p" id="S5.T2.4.16.14.8.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.8.1.1.1" style="background-color:#EFF0F1;">45.64</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.9" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.9.1">
<span class="ltx_p" id="S5.T2.4.16.14.9.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.9.1.1.1" style="background-color:#EFF0F1;">1.05</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.10" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.10.1">
<span class="ltx_p" id="S5.T2.4.16.14.10.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.10.1.1.1" style="background-color:#EFF0F1;">18.12</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S5.T2.4.16.14.11" style="background-color:#EFF0F1;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.16.14.11.1">
<span class="ltx_p" id="S5.T2.4.16.14.11.1.1" style="width:34.1pt;"><span class="ltx_text" id="S5.T2.4.16.14.11.1.1.1" style="background-color:#EFF0F1;">29.46</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S5.T2.4.17.15">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r" id="S5.T2.4.17.15.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.17.15.1.1">CodeGPT</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r" id="S5.T2.4.17.15.2" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T2.4.17.15.2.1" style="background-color:#F0F4FF;">RRG</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.3" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.3.1">
<span class="ltx_p" id="S5.T2.4.17.15.3.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.3.1.1.1" style="background-color:#F0F4FF;">20.21</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.4" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.4.1">
<span class="ltx_p" id="S5.T2.4.17.15.4.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.4.1.1.1" style="background-color:#F0F4FF;">39.40</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.5" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.5.1">
<span class="ltx_p" id="S5.T2.4.17.15.5.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.5.1.1.1" style="background-color:#F0F4FF;">55.49</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.6" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.6.1">
<span class="ltx_p" id="S5.T2.4.17.15.6.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.6.1.1.1" style="background-color:#F0F4FF;">8.20</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.7" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.7.1">
<span class="ltx_p" id="S5.T2.4.17.15.7.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.7.1.1.1" style="background-color:#F0F4FF;">37.89</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.8" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.8.1">
<span class="ltx_p" id="S5.T2.4.17.15.8.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.8.1.1.1" style="background-color:#F0F4FF;">47.63</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.9" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.9.1">
<span class="ltx_p" id="S5.T2.4.17.15.9.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.9.1.1.1" style="background-color:#F0F4FF;">1.35</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.10" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.10.1">
<span class="ltx_p" id="S5.T2.4.17.15.10.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.10.1.1.1" style="background-color:#F0F4FF;">20.50</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="S5.T2.4.17.15.11" style="background-color:#F0F4FF;padding-top:1pt;padding-bottom:1pt;">
<span class="ltx_inline-block ltx_align_top" id="S5.T2.4.17.15.11.1">
<span class="ltx_p" id="S5.T2.4.17.15.11.1.1" style="width:34.1pt;"><span class="ltx_text ltx_font_bold" id="S5.T2.4.17.15.11.1.1.1" style="background-color:#F0F4FF;">31.36</span></span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">To answer the RQ1, we evaluate the effectiveness of different generator models in code generation under various frameworks, and the experimental results are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T2" title="Table 2 ‣ 5.2. Does the RRG framework improve the effectiveness over RAG? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.1">RAG vs. SFT: Providing the generator with relevant code during both training and inference phases led to performance gains. This suggests that supplying the generator with contextual or guiding information effectively reduces the search space and allows the generator to focus on generating code relevant to the given task. The enhancement is more pronounced on the CodeSearchNet.</p>
</div>
<div class="ltx_para" id="S5.SS2.p3">
<p class="ltx_p" id="S5.SS2.p3.1">RRG vs. RAG: Overall, our proposed method RRG shows improvements in various metrics on both datasets while reducing the generator’s cost. On the ConCode dataset, guiding the generator with the output from the refactorer leads to significant improvements across all metrics. Specifically, on the ConCode dataset, the EM metric increased by up to 28%, the BLEU metric improved by 9%, and CodeBLEU rose by 4.7%. On the CodeSearchNet dataset, the EM metric increased by a maximum of 28%, BLEU rose by up to 13%, and CodeBLEU improved by a maximum of 6.8%. This indicates that RRG exhibits good robustness and can enhance the performance of any generator on downstream tasks.</p>
</div>
<div class="ltx_para" id="S5.SS2.p4">
<p class="ltx_p" id="S5.SS2.p4.1">In the ConCode, there is a high degree of code similarity but significant differences in the implemented functions. The generator encounters more noise in the relevant codes retrieved by the retriever, which can mislead the generator, increase inference costs, and cause it to lost in middle. Directly inputting these relevant codes into the generator does not yield the best results. In RRG, removing redundant information and generating shorter, more efficient, and model-friendly code through refactorings significantly improves the generator’s effectiveness.</p>
</div>
<div class="ltx_para" id="S5.SS2.p5">
<p class="ltx_p" id="S5.SS2.p5.1">The diversity of the CodeSearchNet is significantly higher than that of ConCode. When dealing with complex code, the refactorer proves capable of generating model-preferred formats. Remarkably, within the same context length, the refactored code demonstrates superior quality, thereby boosting the generator’s overall effectiveness.</p>
</div>
<div class="ltx_para" id="S5.SS2.p6">
<p class="ltx_p" id="S5.SS2.p6.1">We observe that the CodeGEN performed worse on various datasets compared to models with fewer parameters. Comparing the results of GPT2-m and GPT2-s illustrates that models with larger parameters tend to achieve better performance. Therefore, the unusual performance of the CodeGEN may be attributed to its pre-training methodology, where the discrepancy between the pre-training and fine-tuning tasks has contributed to its inferior performance. Nonetheless, RRG still enhances the effectiveness of the CodeGEN.</p>
</div>
<div class="ltx_para" id="S5.SS2.p7">
<span class="ltx_ERROR undefined" id="S5.SS2.p7.1">\mdfsetup</span>
<p class="ltx_p" id="S5.SS2.p7.2">linewidth=2pt,linecolor=gray,backgroundcolor=gray!20,roundcorner=5pt
<span class="ltx_ERROR undefined" id="S5.SS2.p7.2.1">{mdframed}</span>[skipabove=5pt,innertopmargin=5pt,innerbottommargin=5pt,innerleftmargin=3pt,innerrightmargin=3pt]</p>
</div>
<div class="ltx_para" id="S5.SS2.p8">
<p class="ltx_p" id="S5.SS2.p8.1"><span class="ltx_text ltx_font_bold" id="S5.SS2.p8.1.1">ANS to RQ1:</span> In most configurations, RRG can significantly enhance the performance of the generator and reduce its inference costs, demonstrating the robustness and effectiveness of RRG.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3. </span>What is the effect of various retrievers on the performance of the RRG framework?</h3>
<figure class="ltx_table" id="S5.T3">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S5.T3.2.1.1" style="font-size:90%;">Table 3</span>. </span><span class="ltx_text" id="S5.T3.3.2" style="font-size:90%;">The effectiveness of various retrievers and how the generator performs with each of them. The generator is based on CodeGPT-java.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T3.4">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T3.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S5.T3.4.1.1.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T3.4.1.1.1.1">Dataset</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S5.T3.4.1.1.2" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T3.4.1.1.2.1">Retriever</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T3.4.1.1.3" style="padding-top:1pt;padding-bottom:1pt;">Retrieval</td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S5.T3.4.1.1.4" style="padding-top:1pt;padding-bottom:1pt;">Generation</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.2.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.2.2.1" style="padding-top:1pt;padding-bottom:1pt;">LS</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.2.2.2" style="padding-top:1pt;padding-bottom:1pt;">Cos similarity</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.2.2.3" style="padding-top:1pt;padding-bottom:1pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.2.2.4" style="padding-top:1pt;padding-bottom:1pt;">BLEU</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T3.4.3.3.1" rowspan="3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T3.4.3.3.1.1">ConCode</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T3.4.3.3.2" style="padding-top:1pt;padding-bottom:1pt;">BM25</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.3.3.3" style="padding-top:1pt;padding-bottom:1pt;">98.90</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.3.3.4" style="padding-top:1pt;padding-bottom:1pt;">0.35</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.3.3.5" style="padding-top:1pt;padding-bottom:1pt;">18.55</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.3.3.6" style="padding-top:1pt;padding-bottom:1pt;">35.43</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.4.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T3.4.4.4.1" style="padding-top:1pt;padding-bottom:1pt;">UAE</th>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.4.2" style="padding-top:1pt;padding-bottom:1pt;">95.71</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.4.3" style="padding-top:1pt;padding-bottom:1pt;">0.38</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.4.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.4.4.4.1">19.11</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.4.4.5" style="padding-top:1pt;padding-bottom:1pt;">36.86</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.5.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T3.4.5.5.1" style="padding-top:1pt;padding-bottom:1pt;">Mxbai</th>
<td class="ltx_td ltx_align_center" id="S5.T3.4.5.5.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.5.5.2.1">94.98</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.5.5.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.5.5.3.1">0.39</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.5.5.4" style="padding-top:1pt;padding-bottom:1pt;">17.85</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.5.5.5" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.5.5.5.1">37.24</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.6.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r ltx_border_t" id="S5.T3.4.6.6.1" rowspan="3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T3.4.6.6.1.1">CSN-java</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T3.4.6.6.2" style="padding-top:1pt;padding-bottom:1pt;">BM25</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.6.6.3" style="padding-top:1pt;padding-bottom:1pt;">293.52</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.6.6.4" style="padding-top:1pt;padding-bottom:1pt;">0.30</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.6.6.5" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.6.6.5.1">8.05</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.6.6.6" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.6.6.6.1">35.37</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.7.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T3.4.7.7.1" style="padding-top:1pt;padding-bottom:1pt;">UAE</th>
<td class="ltx_td ltx_align_center" id="S5.T3.4.7.7.2" style="padding-top:1pt;padding-bottom:1pt;">288.69</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.7.7.3" style="padding-top:1pt;padding-bottom:1pt;">0.32</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.7.7.4" style="padding-top:1pt;padding-bottom:1pt;">7.2</td>
<td class="ltx_td ltx_align_center" id="S5.T3.4.7.7.5" style="padding-top:1pt;padding-bottom:1pt;">35.20</td>
</tr>
<tr class="ltx_tr" id="S5.T3.4.8.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r" id="S5.T3.4.8.8.1" style="padding-top:1pt;padding-bottom:1pt;">Mxbai</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.4.8.8.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.8.8.2.1">287.88</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.4.8.8.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T3.4.8.8.3.1">0.33</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.4.8.8.4" style="padding-top:1pt;padding-bottom:1pt;">7.05</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T3.4.8.8.5" style="padding-top:1pt;padding-bottom:1pt;">33.08</td>
</tr>
</tbody>
</table>
</figure>
<figure class="ltx_figure" id="S5.F3">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F3.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="410" id="S5.F3.sf1.g1" src="x3.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F3.sf1.2.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text" id="S5.F3.sf1.3.2" style="font-size:90%;">The improvements on the ConCode dataset.</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F3.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="410" id="S5.F3.sf2.g1" src="x4.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F3.sf2.2.1.1" style="font-size:90%;">(b)</span> </span><span class="ltx_text" id="S5.F3.sf2.3.2" style="font-size:90%;">The improvements on the CSN-java dataset.</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F3.2.1.1" style="font-size:90%;">Figure 3</span>. </span><span class="ltx_text" id="S5.F3.3.2" style="font-size:90%;">Shows the improvements brought by the RRG framework when configured with different retrievers. The generator based on CodeGPT-java.</span></figcaption>
</figure>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">To answer RQ2, we compare the improvements of RRG on generator performance under different retriever settings, including sparse retrieval BM25 and two semantic retrieval models. Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T3" title="Table 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a> shows the retrieval results of these retrievers in naive RAG and their generator output. Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F3" title="Figure 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a> shows the improvement of the generator by the RRG framework.</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">On the one hand, the experimental results show that the BM25 algorithm retrieves the worst results. Because natural language descriptions contain some useless words, recalling the target code based on lexical features alone does not meet human preferences. On the other hand, the other vector retrievers differ in the number of parameters and pre-training methods, leading to differences in retrieval results. It is worth noting that the performance of the generator is not always directly correlated with the performance of the retriever. Although mxbai, which had the best results on each dataset, is used to guide the generator, the optimum generation results are not obtained. Similarly, BM25 does not lead to the worst generator results. For example, on the ConCode dataset, the generator produces the worst generation accuracy when using mxbai, whereas on the CSN-java dataset, BM25 achieve the best results on both metrics. This suggests that there is indeed a preference gap between the retriever and the generator.</p>
</div>
<div class="ltx_para" id="S5.SS3.p3">
<p class="ltx_p" id="S5.SS3.p3.1">Overall, as shown in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F3" title="Figure 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, the RRG framework can bridge the preference gap between the retriever and the generator by inserting a refactorer between them. On the ConCode dataset, RRG can improve the EM metric by up to 16.86%, BLEU by up to 12.81%, and CodeBLEU by up to 6.14%. On the CSN-java dataset, it can improve EM by up to 4.30%, BLEU by 6.94%, and CodeBLEU by 9.22%. This demonstrates the robustness of RRG in the face of different retrievers.
However, on the CSN-java dataset, we notice a decrease in the EM metric when using BM25 as the retriever, and the other two metrics do not improve as significantly as with other retrievers. We deem that this is caused by the preference between the retriever and the generator. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T3" title="Table 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, on the CSN-java dataset, the BM25 algorithm retrieves the relevant code that can best guide the generator. The preference of the two is relatively the same. If we then introduce refactoring for the alignment, the opposite effect may be triggered. For other retrievers, the gap between the two is large, and the use of refactoring can significantly improve the final performance of the generator.</p>
</div>
<div class="ltx_para" id="S5.SS3.p4">
<span class="ltx_ERROR undefined" id="S5.SS3.p4.1">\mdfsetup</span>
<p class="ltx_p" id="S5.SS3.p4.2">linewidth=2pt,linecolor=gray,backgroundcolor=gray!20,roundcorner=5pt
<span class="ltx_ERROR undefined" id="S5.SS3.p4.2.1">{mdframed}</span>[skipabove=5pt,innertopmargin=5pt,innerbottommargin=5pt,innerleftmargin=3pt,innerrightmargin=3pt]</p>
</div>
<div class="ltx_para" id="S5.SS3.p5">
<p class="ltx_p" id="S5.SS3.p5.1"><span class="ltx_text ltx_font_bold" id="S5.SS3.p5.1.1">ANS to RQ2:</span> The RRG framework can perform well when using different base models as retrievers. Moreover, in code generation tasks, there is indeed a preference gap between retrievers and generators, and RRG can bridge the gap.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.4. </span>How do code tokens of varying lengths influence the RRG’s performance?</h3>
<figure class="ltx_figure" id="S5.F4">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="214" id="S5.F4.g1" src="extracted/5844922/fig/rq4/EM_Concode.png" width="343"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="213" id="S5.F4.g2" src="extracted/5844922/fig/rq4/BLEU_Concode.png" width="336"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="213" id="S5.F4.g3" src="extracted/5844922/fig/rq4/CodeBLEU_Concode.png" width="336"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel ltx_align_center" id="S5.F4.2"><span class="ltx_text ltx_font_bold" id="S5.F4.2.1">(a) Result on the ConCode dataset.</span></p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="218" id="S5.F4.g4" src="extracted/5844922/fig/rq4/EM_CSN.png" width="343"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="214" id="S5.F4.g5" src="extracted/5844922/fig/rq4/BLEU_CSN.png" width="347"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_figure_panel ltx_img_landscape" height="214" id="S5.F4.g6" src="extracted/5844922/fig/rq4/CodeBLEU_CSN.png" width="349"/></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel ltx_align_center" id="S5.F4.3"><span class="ltx_text ltx_font_bold" id="S5.F4.3.1">(b) Result on the CSN-java dataset.</span></p>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F4.4.1.1" style="font-size:90%;">Figure 4</span>. </span><span class="ltx_text" id="S5.F4.5.2" style="font-size:90%;">Shows the performance of RL and NO-RL in different code tokens settings</span></figcaption>
</figure>
<div class="ltx_para" id="S5.SS4.p1">
<p class="ltx_p" id="S5.SS4.p1.1">To answer RQ3, in this set of experiments, we investigated the effect of different code token settings on the code generation performance of RRG. Specifically, we performed a comparative analysis by limiting the maximum number of output tokens of refactorer. The experimental results are shown in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F4" title="Figure 4 ‣ 5.4. How do code tokens of varying lengths influence the RRG’s performance? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">4</span></a>. It is demonstrated that the length of code tokens has a significant impact on the code generation performance because different numbers of code tokens represent the amount of information passed to the generator. This characteristic directly affects the performance of the model in generating code.
Notably, we observe that the results show a trend similar to a normal distribution. When the number of code tokens is set low, the amount of information passed to the model is low, leading to relatively poor results. As the number of tokens increases, the performance gradually improves. However, it is worth noting that when the number of tokens reaches a certain threshold, too much information may lead to a redundancy phenomenon, which in turn reduces the code generation performance.
In the ConCode dataset, the effect of different information lengths on the model performance is significant, with a 12.02 difference between the extremes of accuracy. In the CodeSearchNet-java dataset, this difference reaches 30%. This suggests that the relationship between the amount of information and generation effectiveness needs to be carefully weighed in practical applications.</p>
</div>
<div class="ltx_para" id="S5.SS4.p2">
<span class="ltx_ERROR undefined" id="S5.SS4.p2.1">\mdfsetup</span>
<p class="ltx_p" id="S5.SS4.p2.2">linewidth=2pt,linecolor=gray,backgroundcolor=gray!20,roundcorner=5pt
<span class="ltx_ERROR undefined" id="S5.SS4.p2.2.1">{mdframed}</span>[skipabove=5pt,innertopmargin=5pt,innerbottommargin=5pt,innerleftmargin=3pt,innerrightmargin=3pt]</p>
</div>
<div class="ltx_para" id="S5.SS4.p3">
<p class="ltx_p" id="S5.SS4.p3.1"><span class="ltx_text ltx_font_bold" id="S5.SS4.p3.1.1">ANS to RQ3:</span> The setting of different code tokens has a significant impact on the code generation performance of RRG, with this difference reaching 12.02% and 30% on two datasets, respectively.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.5. </span>What is the impact of the preference-aware tuning stage on RRG?</h3>
<figure class="ltx_table" id="S5.T4">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S5.T4.2.1.1" style="font-size:90%;">Table 4</span>. </span><span class="ltx_text" id="S5.T4.3.2" style="font-size:90%;">Ablation Study on ConCode and CodeSearchNet-java datasets. The retriever employs a dual-stage retrieval that incorporates UAE and BM25.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T4.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T4.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="5" id="S5.T4.4.1.1.1" style="padding-top:1pt;padding-bottom:1pt;">ConCode</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T4.4.2.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.2.1.1" style="padding-top:1pt;padding-bottom:1pt;">Model Name</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.2.1.2" style="padding-top:1pt;padding-bottom:1pt;">Method</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.2.1.3" style="padding-top:1pt;padding-bottom:1pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.2.1.4" style="padding-top:1pt;padding-bottom:1pt;">BLEU</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.2.1.5" style="padding-top:1pt;padding-bottom:1pt;">CodeBLEU</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.3.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.3.2.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.3.2.1.1">CodeGPT</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.3.2.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.3.2.3" style="padding-top:1pt;padding-bottom:1pt;">19.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.3.2.4" style="padding-top:1pt;padding-bottom:1pt;">38.24</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.3.2.5" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.3.2.5.1">55.12</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.4.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T4.4.4.3.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center" id="S5.T4.4.4.3.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.4.3.2.1">19.71</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.4.3.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.4.3.3.1">38.58</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.4.3.4" style="padding-top:1pt;padding-bottom:1pt;">54.97</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.5.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.5.4.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.5.4.1.1">PolyCoder</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.5.4.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.5.4.3" style="padding-top:1pt;padding-bottom:1pt;">20.76</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.5.4.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.5.4.4.1">40.40</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.5.4.5" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.5.4.5.1">55.77</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.6.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T4.4.6.5.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center" id="S5.T4.4.6.5.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.6.5.2.1">21.41</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.6.5.3" style="padding-top:1pt;padding-bottom:1pt;">39.26</td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.6.5.4" style="padding-top:1pt;padding-bottom:1pt;">55.67</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.7.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.7.6.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.7.6.1.1">CodeGEN</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.7.6.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.7.6.3" style="padding-top:1pt;padding-bottom:1pt;">15.01</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.7.6.4" style="padding-top:1pt;padding-bottom:1pt;">33.03</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.7.6.5" style="padding-top:1pt;padding-bottom:1pt;">50.97</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.8.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T4.4.8.7.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center" id="S5.T4.4.8.7.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.8.7.2.1">15.11</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.8.7.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.8.7.3.1">33.76</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.8.7.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.8.7.4.1">51.26</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.9.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="5" id="S5.T4.4.9.8.1" style="padding-top:1pt;padding-bottom:1pt;">CodeSearchNet-java</th>
</tr>
<tr class="ltx_tr" id="S5.T4.4.10.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.10.9.1" style="padding-top:1pt;padding-bottom:1pt;">Model Name</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.10.9.2" style="padding-top:1pt;padding-bottom:1pt;">Method</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.10.9.3" style="padding-top:1pt;padding-bottom:1pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.10.9.4" style="padding-top:1pt;padding-bottom:1pt;">BLEU</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.10.9.5" style="padding-top:1pt;padding-bottom:1pt;">CodeBLEU</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.11.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.11.10.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.11.10.1.1">CodeGPT</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.11.10.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.11.10.3" style="padding-top:1pt;padding-bottom:1pt;">7.44</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.11.10.4" style="padding-top:1pt;padding-bottom:1pt;">37.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.11.10.5" style="padding-top:1pt;padding-bottom:1pt;">47.02</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.12.11">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T4.4.12.11.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center" id="S5.T4.4.12.11.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.12.11.2.1">7.7</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.12.11.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.12.11.3.1">37.73</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.12.11.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.12.11.4.1">47.41</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.13.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.13.12.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.13.12.1.1">PolyCoder</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.13.12.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.13.12.3" style="padding-top:1pt;padding-bottom:1pt;">7.85</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.13.12.4" style="padding-top:1pt;padding-bottom:1pt;">35.18</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.13.12.5" style="padding-top:1pt;padding-bottom:1pt;">45.52</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.14.13">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T4.4.14.13.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center" id="S5.T4.4.14.13.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.14.13.2.1">8.0</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.14.13.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.14.13.3.1">35.50</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.4.14.13.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.14.13.4.1">45.77</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.15.14">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.4.15.14.1" rowspan="2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T4.4.15.14.1.1">CodeGEN</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T4.4.15.14.2" style="padding-top:1pt;padding-bottom:1pt;">RRG w/o RL</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.15.14.3" style="padding-top:1pt;padding-bottom:1pt;">6.55</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.15.14.4" style="padding-top:1pt;padding-bottom:1pt;">34.69</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.4.15.14.5" style="padding-top:1pt;padding-bottom:1pt;">44.71</td>
</tr>
<tr class="ltx_tr" id="S5.T4.4.16.15">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S5.T4.4.16.15.1" style="padding-top:1pt;padding-bottom:1pt;">RRG</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.4.16.15.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.16.15.2.1">6.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.4.16.15.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.16.15.3.1">34.86</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.4.16.15.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T4.4.16.15.4.1">44.94</span></td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S5.SS5.p1">
<p class="ltx_p" id="S5.SS5.p1.1">To answer the RQ4, we investigate the impact of the Preference-aware Tuning phase on the effectiveness of RRG. We conducted an ablation study. The experimental results are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T4" title="Table 4 ‣ 5.5. What is the impact of the preference-aware tuning stage on RRG? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">4</span></a> and Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F3" title="Figure 3 ‣ 5.3. What is the effect of various retrievers on the performance of the RRG framework? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">3</span></a>. Overall, removing the preference-aware tuning phase resulted in poorer performance of RRG across different models, datasets, and code tokens configurations. This decline is attributed to the fact that after the SFT phase, the output of the refactorer is aligned with human preferences without considering the preferences of the generator. In contrast, when the Preference-aware Tuning is incorporated during training, the refactorer’s output is directly aligned with the generator’s preferences, helping RRG generate more effective code tokens.</p>
</div>
<div class="ltx_para" id="S5.SS5.p2">
<p class="ltx_p" id="S5.SS5.p2.1">Furthermore, on the CodeSearchNet-java dataset, we notice that preference-aware tuning consistently improved the performance across all models. However, it is not the case for the ConCode dataset, suggesting that this phase is better suited for more complex datasets.</p>
</div>
<div class="ltx_para" id="S5.SS5.p3">
<span class="ltx_ERROR undefined" id="S5.SS5.p3.1">\mdfsetup</span>
<p class="ltx_p" id="S5.SS5.p3.2">linewidth=2pt,linecolor=gray,backgroundcolor=gray!20,roundcorner=5pt
<span class="ltx_ERROR undefined" id="S5.SS5.p3.2.1">{mdframed}</span>[skipabove=5pt,innertopmargin=5pt,innerbottommargin=5pt,innerleftmargin=3pt,innerrightmargin=3pt]</p>
</div>
<div class="ltx_para" id="S5.SS5.p4">
<p class="ltx_p" id="S5.SS5.p4.1"><span class="ltx_text ltx_font_bold" id="S5.SS5.p4.1.1">ANS to RQ4:</span> The preference-aware tuning stage is crucial, as it further enhances the effectiveness of the RRG framework by considering the preference of the generator. Moreover, it exhibits good generalization, potentially yielding better results on complex datasets.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.6. </span>How is the generalization performance of the frozen refactorer ?</h3>
<figure class="ltx_table" id="S5.T5">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span class="ltx_text" id="S5.T5.2.1.1" style="font-size:90%;">Table 5</span>. </span><span class="ltx_text" id="S5.T5.3.2" style="font-size:90%;">Generalization experiment. The original combinationsin the table mean where the frozen refactorer was trained. And we directly applied it to other combinations on the ConCode.</span></figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T5.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T5.4.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S5.T5.4.1.1.1" style="padding-top:1pt;padding-bottom:1pt;">Combinations</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T5.4.1.1.2" style="padding-top:1pt;padding-bottom:1pt;">Retriever-Generator</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T5.4.1.1.3" style="padding-top:1pt;padding-bottom:1pt;">EM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T5.4.1.1.4" style="padding-top:1pt;padding-bottom:1pt;">BLEU</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T5.4.2.1" style="background-color:#F0F4FF;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T5.4.2.1.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T5.4.2.1.1.1" style="background-color:#F0F4FF;">original</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.2.1.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.2.1.2.1" style="background-color:#F0F4FF;">mxbai-GPT2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.2.1.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.2.1.3.1" style="background-color:#F0F4FF;">20.01</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.2.1.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.2.1.4.1" style="background-color:#F0F4FF;">38.34</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.3.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T5.4.3.2.1" style="padding-top:1pt;padding-bottom:1pt;">change-retriever</th>
<td class="ltx_td ltx_align_center" id="S5.T5.4.3.2.2" style="padding-top:1pt;padding-bottom:1pt;">BM25-GPT2</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.3.2.3" style="padding-top:1pt;padding-bottom:1pt;">18.25</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.3.2.4" style="padding-top:1pt;padding-bottom:1pt;">36.73</td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.4.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T5.4.4.3.1" style="padding-top:1pt;padding-bottom:1pt;">change-generator</th>
<td class="ltx_td ltx_align_center" id="S5.T5.4.4.3.2" style="padding-top:1pt;padding-bottom:1pt;">mxbai-CodeGPT</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.4.3.3" style="padding-top:1pt;padding-bottom:1pt;">19.35</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.4.3.4" style="padding-top:1pt;padding-bottom:1pt;">38.31</td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.5.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T5.4.5.4.1" style="padding-top:1pt;padding-bottom:1pt;">change-both</th>
<td class="ltx_td ltx_align_center" id="S5.T5.4.5.4.2" style="padding-top:1pt;padding-bottom:1pt;">BM25-CodeGPT</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.5.4.3" style="padding-top:1pt;padding-bottom:1pt;">20.41</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.5.4.4" style="padding-top:1pt;padding-bottom:1pt;">39.11</td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.6.5" style="background-color:#F0F4FF;">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S5.T5.4.6.5.1" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text" id="S5.T5.4.6.5.1.1" style="background-color:#F0F4FF;">original</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.6.5.2" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.6.5.2.1" style="background-color:#F0F4FF;">BM25-CodeGPT</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.6.5.3" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.6.5.3.1" style="background-color:#F0F4FF;">20.81</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.6.5.4" style="padding-top:1pt;padding-bottom:1pt;"><span class="ltx_text ltx_font_bold" id="S5.T5.4.6.5.4.1" style="background-color:#F0F4FF;">39.62</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.7.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T5.4.7.6.1" style="padding-top:1pt;padding-bottom:1pt;">change-retriever</th>
<td class="ltx_td ltx_align_center" id="S5.T5.4.7.6.2" style="padding-top:1pt;padding-bottom:1pt;">mxbai-CodeGPT</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.7.6.3" style="padding-top:1pt;padding-bottom:1pt;">19.25</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.7.6.4" style="padding-top:1pt;padding-bottom:1pt;">37.73</td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.8.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S5.T5.4.8.7.1" style="padding-top:1pt;padding-bottom:1pt;">change-generator</th>
<td class="ltx_td ltx_align_center" id="S5.T5.4.8.7.2" style="padding-top:1pt;padding-bottom:1pt;">BM25-GPT2</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.8.7.3" style="padding-top:1pt;padding-bottom:1pt;">18.25</td>
<td class="ltx_td ltx_align_center" id="S5.T5.4.8.7.4" style="padding-top:1pt;padding-bottom:1pt;">36.73</td>
</tr>
<tr class="ltx_tr" id="S5.T5.4.9.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S5.T5.4.9.8.1" style="padding-top:1pt;padding-bottom:1pt;">change-both</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.4.9.8.2" style="padding-top:1pt;padding-bottom:1pt;">mxbai-GPT2</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.4.9.8.3" style="padding-top:1pt;padding-bottom:1pt;">19.75</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.4.9.8.4" style="padding-top:1pt;padding-bottom:1pt;">38.24</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S5.SS6.p1">
<p class="ltx_p" id="S5.SS6.p1.1">We froze the trained refactorer and experimented with various retriever and generator combinations to evaluate the performance of RRG in code generation. The original combinations listed in the table <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.T5" title="Table 5 ‣ 5.6. How is the generalization performance of the frozen refactorer ? ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">5</span></a> represent the configurations where the refactorer was initially trained. Experimental results indicate that even when frozen, the refactorer aligns well with diverse retriever and generator combinations, demonstrating strong generalization capabilities.</p>
</div>
<div class="ltx_para" id="S5.SS6.p2">
<p class="ltx_p" id="S5.SS6.p2.1">However, a comparison between the mxbai-GPT2 and BM25-CodeGPT configurations reveals that applying a trained refactorer to a new combination results in less effective outcomes compared to using a refactorer specifically trained for that combination. This suggests that, while the refactorer exhibits generalization, specialized training for particular combinations still yields better performance.</p>
</div>
<div class="ltx_para" id="S5.SS6.p3">
<p class="ltx_p" id="S5.SS6.p3.1">Given the high costs associated with retraining models, the refactorer’s generalization ability is particularly noteworthy. In practical applications, this means the refactorer can adapt to different requirements or scenarios by simply altering the retriever and generator combinations, maintaining robust performance while significantly reducing development and maintenance costs.</p>
</div>
<div class="ltx_para" id="S5.SS6.p4">
<span class="ltx_ERROR undefined" id="S5.SS6.p4.1">\mdfsetup</span>
<p class="ltx_p" id="S5.SS6.p4.2">linewidth=2pt,linecolor=gray,backgroundcolor=gray!20,roundcorner=5pt
<span class="ltx_ERROR undefined" id="S5.SS6.p4.2.1">{mdframed}</span>[skipabove=5pt,innertopmargin=5pt,innerbottommargin=5pt,innerleftmargin=3pt,innerrightmargin=3pt]</p>
</div>
<div class="ltx_para" id="S5.SS6.p5">
<p class="ltx_p" id="S5.SS6.p5.1"><span class="ltx_text ltx_font_bold" id="S5.SS6.p5.1.1">ANS to RQ5:</span> The frozen refactorer demonstrates strong generalizability, suggesting its advantage as a modular, plug-and-play component. In practice, it can be directly transferred between different retrievers and generators without requiring fine-tuning.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS7">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.7. </span>Case Study</h3>
<figure class="ltx_figure" id="S5.F5"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="251" id="S5.F5.g1" src="x5.png" width="697"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F5.2.1.1" style="font-size:90%;">Figure 5</span>. </span><span class="ltx_text" id="S5.F5.3.2" style="font-size:90%;">Case comparison. Redundant info and preference gaps led the generator to produce wrong answers from raw retrieved code, whereas it generated correctly from the refactored code. Highlighted tokens significantly impact code generation, whereas misleading tokens in the raw do not affect the generator in the refactored version.</span></figcaption>
</figure>
<figure class="ltx_figure" id="S5.F6"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="268" id="S5.F6.g1" src="x6.png" width="341"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F6.2.1.1" style="font-size:90%;">Figure 6</span>. </span><span class="ltx_text" id="S5.F6.3.2" style="font-size:90%;">The preference-guided refactorer will provide different code to different generators. The highlight represents the tokens that play a significant role in guiding the model’s generation. This difference is referred to as the preferences of different generators.</span></figcaption>
</figure>
<div class="ltx_para" id="S5.SS7.p1">
<p class="ltx_p" id="S5.SS7.p1.3">We illustrate an example of RRG’s effectiveness in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F5" title="Figure 5 ‣ 5.7. Case Study ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">5</span></a>. When the relevant code provided by the retriever contains redundant information, the generator may be misled and produce incorrect code. The generated code closely resembles the retrieved code and is heavily influenced by the top-1 code. However, when using refactored code, the generator can produce correct code. Due to certain model preferences, such as a tendency to favor certain token locations or repetitions, the generator may focus more on the irrelevant tokens, resulting in incorrect output. In contrast, the refactored code retains the tokens that mislead the generator in the raw but is shorter and contains less redundant information. This higher-quality context allows the generator to produce correct answers more easily and avoid being misled. We show an example of preferences between different models in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.15895v1#S5.F6" title="Figure 6 ‣ 5.7. Case Study ‣ 5. Experimental Results ‣ Preference-Guided Refactored Tuning for Retrieval Augmented Code Generation"><span class="ltx_text ltx_ref_tag">6</span></a>. Language models are based on GPT2, while code models are based on CodeGPT. We found that the refactorer provides different codes for different generators. For GPT2, the <math alttext="filter" class="ltx_Math" display="inline" id="S5.SS7.p1.1.m1.1"><semantics id="S5.SS7.p1.1.m1.1a"><mrow id="S5.SS7.p1.1.m1.1.1" xref="S5.SS7.p1.1.m1.1.1.cmml"><mi id="S5.SS7.p1.1.m1.1.1.2" xref="S5.SS7.p1.1.m1.1.1.2.cmml">f</mi><mo id="S5.SS7.p1.1.m1.1.1.1" xref="S5.SS7.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.1.m1.1.1.3" xref="S5.SS7.p1.1.m1.1.1.3.cmml">i</mi><mo id="S5.SS7.p1.1.m1.1.1.1a" xref="S5.SS7.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.1.m1.1.1.4" xref="S5.SS7.p1.1.m1.1.1.4.cmml">l</mi><mo id="S5.SS7.p1.1.m1.1.1.1b" xref="S5.SS7.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.1.m1.1.1.5" xref="S5.SS7.p1.1.m1.1.1.5.cmml">t</mi><mo id="S5.SS7.p1.1.m1.1.1.1c" xref="S5.SS7.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.1.m1.1.1.6" xref="S5.SS7.p1.1.m1.1.1.6.cmml">e</mi><mo id="S5.SS7.p1.1.m1.1.1.1d" xref="S5.SS7.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.1.m1.1.1.7" xref="S5.SS7.p1.1.m1.1.1.7.cmml">r</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.SS7.p1.1.m1.1b"><apply id="S5.SS7.p1.1.m1.1.1.cmml" xref="S5.SS7.p1.1.m1.1.1"><times id="S5.SS7.p1.1.m1.1.1.1.cmml" xref="S5.SS7.p1.1.m1.1.1.1"></times><ci id="S5.SS7.p1.1.m1.1.1.2.cmml" xref="S5.SS7.p1.1.m1.1.1.2">𝑓</ci><ci id="S5.SS7.p1.1.m1.1.1.3.cmml" xref="S5.SS7.p1.1.m1.1.1.3">𝑖</ci><ci id="S5.SS7.p1.1.m1.1.1.4.cmml" xref="S5.SS7.p1.1.m1.1.1.4">𝑙</ci><ci id="S5.SS7.p1.1.m1.1.1.5.cmml" xref="S5.SS7.p1.1.m1.1.1.5">𝑡</ci><ci id="S5.SS7.p1.1.m1.1.1.6.cmml" xref="S5.SS7.p1.1.m1.1.1.6">𝑒</ci><ci id="S5.SS7.p1.1.m1.1.1.7.cmml" xref="S5.SS7.p1.1.m1.1.1.7">𝑟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS7.p1.1.m1.1c">filter</annotation><annotation encoding="application/x-llamapun" id="S5.SS7.p1.1.m1.1d">italic_f italic_i italic_l italic_t italic_e italic_r</annotation></semantics></math> token plays a significant role in the refactored code, while CodeGPT is <math alttext="elements" class="ltx_Math" display="inline" id="S5.SS7.p1.2.m2.1"><semantics id="S5.SS7.p1.2.m2.1a"><mrow id="S5.SS7.p1.2.m2.1.1" xref="S5.SS7.p1.2.m2.1.1.cmml"><mi id="S5.SS7.p1.2.m2.1.1.2" xref="S5.SS7.p1.2.m2.1.1.2.cmml">e</mi><mo id="S5.SS7.p1.2.m2.1.1.1" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.3" xref="S5.SS7.p1.2.m2.1.1.3.cmml">l</mi><mo id="S5.SS7.p1.2.m2.1.1.1a" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.4" xref="S5.SS7.p1.2.m2.1.1.4.cmml">e</mi><mo id="S5.SS7.p1.2.m2.1.1.1b" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.5" xref="S5.SS7.p1.2.m2.1.1.5.cmml">m</mi><mo id="S5.SS7.p1.2.m2.1.1.1c" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.6" xref="S5.SS7.p1.2.m2.1.1.6.cmml">e</mi><mo id="S5.SS7.p1.2.m2.1.1.1d" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.7" xref="S5.SS7.p1.2.m2.1.1.7.cmml">n</mi><mo id="S5.SS7.p1.2.m2.1.1.1e" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.8" xref="S5.SS7.p1.2.m2.1.1.8.cmml">t</mi><mo id="S5.SS7.p1.2.m2.1.1.1f" xref="S5.SS7.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.2.m2.1.1.9" xref="S5.SS7.p1.2.m2.1.1.9.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.SS7.p1.2.m2.1b"><apply id="S5.SS7.p1.2.m2.1.1.cmml" xref="S5.SS7.p1.2.m2.1.1"><times id="S5.SS7.p1.2.m2.1.1.1.cmml" xref="S5.SS7.p1.2.m2.1.1.1"></times><ci id="S5.SS7.p1.2.m2.1.1.2.cmml" xref="S5.SS7.p1.2.m2.1.1.2">𝑒</ci><ci id="S5.SS7.p1.2.m2.1.1.3.cmml" xref="S5.SS7.p1.2.m2.1.1.3">𝑙</ci><ci id="S5.SS7.p1.2.m2.1.1.4.cmml" xref="S5.SS7.p1.2.m2.1.1.4">𝑒</ci><ci id="S5.SS7.p1.2.m2.1.1.5.cmml" xref="S5.SS7.p1.2.m2.1.1.5">𝑚</ci><ci id="S5.SS7.p1.2.m2.1.1.6.cmml" xref="S5.SS7.p1.2.m2.1.1.6">𝑒</ci><ci id="S5.SS7.p1.2.m2.1.1.7.cmml" xref="S5.SS7.p1.2.m2.1.1.7">𝑛</ci><ci id="S5.SS7.p1.2.m2.1.1.8.cmml" xref="S5.SS7.p1.2.m2.1.1.8">𝑡</ci><ci id="S5.SS7.p1.2.m2.1.1.9.cmml" xref="S5.SS7.p1.2.m2.1.1.9">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS7.p1.2.m2.1c">elements</annotation><annotation encoding="application/x-llamapun" id="S5.SS7.p1.2.m2.1d">italic_e italic_l italic_e italic_m italic_e italic_n italic_t italic_s</annotation></semantics></math> token and <math alttext="decision" class="ltx_Math" display="inline" id="S5.SS7.p1.3.m3.1"><semantics id="S5.SS7.p1.3.m3.1a"><mrow id="S5.SS7.p1.3.m3.1.1" xref="S5.SS7.p1.3.m3.1.1.cmml"><mi id="S5.SS7.p1.3.m3.1.1.2" xref="S5.SS7.p1.3.m3.1.1.2.cmml">d</mi><mo id="S5.SS7.p1.3.m3.1.1.1" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.3" xref="S5.SS7.p1.3.m3.1.1.3.cmml">e</mi><mo id="S5.SS7.p1.3.m3.1.1.1a" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.4" xref="S5.SS7.p1.3.m3.1.1.4.cmml">c</mi><mo id="S5.SS7.p1.3.m3.1.1.1b" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.5" xref="S5.SS7.p1.3.m3.1.1.5.cmml">i</mi><mo id="S5.SS7.p1.3.m3.1.1.1c" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.6" xref="S5.SS7.p1.3.m3.1.1.6.cmml">s</mi><mo id="S5.SS7.p1.3.m3.1.1.1d" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.7" xref="S5.SS7.p1.3.m3.1.1.7.cmml">i</mi><mo id="S5.SS7.p1.3.m3.1.1.1e" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.8" xref="S5.SS7.p1.3.m3.1.1.8.cmml">o</mi><mo id="S5.SS7.p1.3.m3.1.1.1f" xref="S5.SS7.p1.3.m3.1.1.1.cmml">⁢</mo><mi id="S5.SS7.p1.3.m3.1.1.9" xref="S5.SS7.p1.3.m3.1.1.9.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.SS7.p1.3.m3.1b"><apply id="S5.SS7.p1.3.m3.1.1.cmml" xref="S5.SS7.p1.3.m3.1.1"><times id="S5.SS7.p1.3.m3.1.1.1.cmml" xref="S5.SS7.p1.3.m3.1.1.1"></times><ci id="S5.SS7.p1.3.m3.1.1.2.cmml" xref="S5.SS7.p1.3.m3.1.1.2">𝑑</ci><ci id="S5.SS7.p1.3.m3.1.1.3.cmml" xref="S5.SS7.p1.3.m3.1.1.3">𝑒</ci><ci id="S5.SS7.p1.3.m3.1.1.4.cmml" xref="S5.SS7.p1.3.m3.1.1.4">𝑐</ci><ci id="S5.SS7.p1.3.m3.1.1.5.cmml" xref="S5.SS7.p1.3.m3.1.1.5">𝑖</ci><ci id="S5.SS7.p1.3.m3.1.1.6.cmml" xref="S5.SS7.p1.3.m3.1.1.6">𝑠</ci><ci id="S5.SS7.p1.3.m3.1.1.7.cmml" xref="S5.SS7.p1.3.m3.1.1.7">𝑖</ci><ci id="S5.SS7.p1.3.m3.1.1.8.cmml" xref="S5.SS7.p1.3.m3.1.1.8">𝑜</ci><ci id="S5.SS7.p1.3.m3.1.1.9.cmml" xref="S5.SS7.p1.3.m3.1.1.9">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS7.p1.3.m3.1c">decision</annotation><annotation encoding="application/x-llamapun" id="S5.SS7.p1.3.m3.1d">italic_d italic_e italic_c italic_i italic_s italic_i italic_o italic_n</annotation></semantics></math> token. We interpret this phenomenon as a result of inherent preference differences among various LLMs. Due to different internal knowledge, generating a piece of code requires different codes to be provided.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6. </span>Threats to Validity</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1"><span class="ltx_text ltx_font_bold" id="S6.p1.1.1">Issue of model scale.</span> The generators in our experiments are mainly based on a number of small code models with a relatively low number of parameters. But our approach can still improve the effectiveness of these models with relatively low capacity. However, we also realize that this may not reflect the applicability of our framework when dealing with larger scale models. We compared models with different numbers of parameters in our experiments, in which models with a larger number of parameters can indeed achieve better results in downstream tasks.
The same holds true for scaling-law in our framework. Furthermore, our reinforcement learning phase also applies to black-box models that do not require access to their internal parameters.</p>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1"><span class="ltx_text ltx_font_bold" id="S6.p2.1.1">Framework setup of the baseline.</span> In our experiments, we mainly compared the improvements that RRG brought to RAG and did not compare it with other RACG methods. However, this does not indicate a fundamental flaw in our research. In fact, our refactorer plugin is designed with a high degree of modularity and plug-and-play capability, meaning it can be easily integrated into any existing framework without significant changes to the original system. When RRG is combined with other methods, it may produce even more impressive results.</p>
</div>
</section>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7. </span>Conclusion and Future Works</h2>
<div class="ltx_para" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">In this paper, we introduce RRG, a novel retrieval-augmented code generation framework, designed to tackle redundant information and bridge the preference gap between retrievers and generators. The preference gap arises from the mismatch between retrieved content and the generator’s actual needs. By integrating a refactor module, we harness both retrieved and internal knowledge to supply the generator with optimized code snippets. Our experiments reveal that RRG significantly enhances code generation with strong generalization.</p>
</div>
<div class="ltx_para" id="S7.p2">
<p class="ltx_p" id="S7.p2.1">Furthermore, we uncover that retrievers and generators exhibit distinct preferences in RACG, and RRG effectively aligns these. Exploring and utilizing specific generator preferences offers vast potential, yet selecting the most beneficial documents based on these remains an open challenge. Currently, we treat model preferences as a black box. However, we aspire to enhance interpretability by elucidating these preferences in the future. Meanwhile, we have also observed that filtering information through RRG can sometimes lead to worse outcomes, highlighting the importance of an adaptive refactorer module. But inspired by soft prompts, perhaps we can achieve the same or even better results with fewer tokens. In the post-processing of retrieval-augmented code generation, there are still unknown territories worth exploring.</p>
</div>
</section>
<section class="ltx_section" id="S8">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8. </span>Acknowledgments</h2>
<div class="ltx_para" id="S8.p1">
<p class="ltx_p" id="S8.p1.1">This work is funded in part by 2022-JCJQ-LA-001-096, the Shanghai Science, Technology Development Fund No. 22dz1200704, the National Natural Science Foundation of China Projects No. U1936213, 62272473, and the Science and Technology Innovation Program of Hunan Province No.2023RC1001.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Loubna Ben Allal, Raymond Li, Denis Kocetkov, Chenghao Mou, Christopher Akiki,
Carlos Munoz Ferrandis, Niklas Muennighoff, Mayank Mishra, Alex Gu, Manan
Dey, et al.

</span>
<span class="ltx_bibblock">Santacoder: don’t reach for the stars!

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">arXiv preprint arXiv:2301.03988</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Akari Asai, Zeqiu Wu, Yizhong Wang, Avirup Sil, and Hannaneh Hajishirzi.

</span>
<span class="ltx_bibblock">Self-rag: Learning to retrieve, generate, and critique through
self-reflection.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2310.11511</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Moshe Berchansky, Peter Izsak, Avi Caciularu, Ido Dagan, and Moshe Wasserblat.

</span>
<span class="ltx_bibblock">Optimizing retrieval-augmented reader models via token elimination.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2310.13682</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Sebastian Borgeaud, Arthur Mensch, Jordan Hoffmann, Trevor Cai, Eliza
Rutherford, Katie Millican, George Bm Van Den Driessche, Jean-Baptiste
Lespiau, Bogdan Damoc, Aidan Clark, et al.

</span>
<span class="ltx_bibblock">Improving language models by retrieving from trillions of tokens.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">International conference on machine learning</span>, pages
2206–2240. PMLR, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla
Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell,
et al.

</span>
<span class="ltx_bibblock">Language models are few-shot learners.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">Advances in neural information processing systems</span>,
33:1877–1901, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova.

</span>
<span class="ltx_bibblock">Bert: Pre-training of deep bidirectional transformers for language
understanding.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:1810.04805</span>, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Matthijs Douze, Alexandr Guzhva, Chengqi Deng, Jeff Johnson, Gergely Szilvasy,
Pierre-Emmanuel Mazaré, Maria Lomeli, Lucas Hosseini, and Hervé Jégou.

</span>
<span class="ltx_bibblock">The faiss library.

</span>
<span class="ltx_bibblock">2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Linyuan Gong, Mostafa Elhoushi, and Alvin Cheung.

</span>
<span class="ltx_bibblock">Ast-t5: Structure-aware pretraining for code generation and
understanding.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2401.03003</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Kelvin Guu, Kenton Lee, Zora Tung, Panupong Pasupat, and Mingwei Chang.

</span>
<span class="ltx_bibblock">Retrieval augmented language model pre-training.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">International conference on machine learning</span>, pages
3929–3938. PMLR, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Rishin Haldar and Debajyoti Mukhopadhyay.

</span>
<span class="ltx_bibblock">Levenshtein distance technique in dictionary lookup methods: An
improved approach.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib10.1.1">arXiv preprint arXiv:1101.1232</span>, 2011.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Hamel Husain, Ho-Hsiang Wu, Tiferet Gazit, Miltiadis Allamanis, and Marc
Brockschmidt.

</span>
<span class="ltx_bibblock">Codesearchnet challenge: Evaluating the state of semantic code
search.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:1909.09436</span>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Huiqiang Jiang, Qianhui Wu, Chin-Yew Lin, Yuqing Yang, and Lili Qiu.

</span>
<span class="ltx_bibblock">LLMLingua: Compressing prompts for accelerated inference of large
language models.

</span>
<span class="ltx_bibblock">In Houda Bouamor, Juan Pino, and Kalika Bali, editors, <span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language
Processing</span>, pages 13358–13376, Singapore, December 2023. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Zhengbao Jiang, Frank F Xu, Luyu Gao, Zhiqing Sun, Qian Liu, Jane Dwivedi-Yu,
Yiming Yang, Jamie Callan, and Graham Neubig.

</span>
<span class="ltx_bibblock">Active retrieval augmented generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib13.1.1">arXiv preprint arXiv:2305.06983</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Nikhil Kandpal, Haikang Deng, Adam Roberts, Eric Wallace, and Colin Raffel.

</span>
<span class="ltx_bibblock">Large language models struggle to learn long-tail knowledge.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">International Conference on Machine Learning</span>, pages
15696–15707. PMLR, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Zixuan Ke, Weize Kong, Cheng Li, Mingyang Zhang, Qiaozhu Mei, and Michael
Bendersky.

</span>
<span class="ltx_bibblock">Bridging the preference gap between retrievers and llms.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2401.06954</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Urvashi Khandelwal, Omer Levy, Dan Jurafsky, Luke Zettlemoyer, and Mike Lewis.

</span>
<span class="ltx_bibblock">Generalization through memorization: Nearest neighbor language
models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:1911.00172</span>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Tian Lan, Deng Cai, Yan Wang, Heyan Huang, and Xian-Ling Mao.

</span>
<span class="ltx_bibblock">Copy is all you need.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">The Eleventh International Conference on Learning
Representations</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Jia Li, Ge Li, Chongyang Tao, Huangzhao Zhang, Fang Liu, and Zhi Jin.

</span>
<span class="ltx_bibblock">Large language model-aware in-context learning for code generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:2310.09748</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Junyi Li, Tianyi Tang, Wayne Xin Zhao, Jingyuan Wang, Jian-Yun Nie, and Ji-Rong
Wen.

</span>
<span class="ltx_bibblock">The web can be your oyster for improving large language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">arXiv preprint arXiv:2305.10998</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Yucheng Li.

</span>
<span class="ltx_bibblock">Unlocking context constraints of llms: Enhancing context efficiency
of llms with self-information-based content filtering.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2304.12102</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Chen Liang, Simiao Zuo, Qingru Zhang, Pengcheng He, Weizhu Chen, and Tuo Zhao.

</span>
<span class="ltx_bibblock">Less is more: Task-aware layer-wise distillation for language model
compression.

</span>
<span class="ltx_bibblock">pages 20852–20867, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Ming Liang, Xiaoheng Xie, Gehao Zhang, Xunjin Zheng, Peng Di, Hongwei Chen,
Chengpeng Wang, Gang Fan, et al.

</span>
<span class="ltx_bibblock">Repofuse: Repository-level code completion with fused dual context.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2402.14323</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Xi Victoria Lin, Xilun Chen, Mingda Chen, Weijia Shi, Maria Lomeli, Rich James,
Pedro Rodriguez, Jacob Kahn, Gergely Szilvasy, Mike Lewis, et al.

</span>
<span class="ltx_bibblock">Ra-dit: Retrieval-augmented dual instruction tuning.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2310.01352</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Mingwei Liu, Tianyong Yang, Yiling Lou, Xueying Du, Ying Wang, and Xin Peng.

</span>
<span class="ltx_bibblock">Codegen4libs: A two-stage approach for library-oriented code
generation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib24.1.1">2023 38th IEEE/ACM International Conference on Automated
Software Engineering (ASE)</span>, pages 434–445, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Nelson F Liu, Kevin Lin, John Hewitt, Ashwin Paranjape, Michele Bevilacqua,
Fabio Petroni, and Percy Liang.

</span>
<span class="ltx_bibblock">Lost in the middle: How language models use long contexts.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib25.1.1">Transactions of the Association for Computational Linguistics</span>,
12:157–173, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Xiao Liu, Hanyu Lai, Hao Yu, Yifan Xu, Aohan Zeng, Zhengxiao Du, Peng Zhang,
Yuxiao Dong, and Jie Tang.

</span>
<span class="ltx_bibblock">Webglm: Towards an efficient web-enhanced question answering system
with human preferences.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib26.1.1">Proceedings of the 29th ACM SIGKDD Conference on Knowledge
Discovery and Data Mining</span>, pages 4549–4560, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Shuai Lu, Daya Guo, Shuo Ren, Junjie Huang, Alexey Svyatkovskiy, Ambrosio
Blanco, Colin Clement, Dawn Drain, Daxin Jiang, Duyu Tang, et al.

</span>
<span class="ltx_bibblock">Codexglue: A machine learning benchmark dataset for code
understanding and generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2102.04664</span>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Sewon Min, Weijia Shi, Mike Lewis, Xilun Chen, Wen-tau Yih, Hannaneh
Hajishirzi, and Luke Zettlemoyer.

</span>
<span class="ltx_bibblock">Nonparametric masked language modeling.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2212.01349</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Erik Nijkamp, Bo Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou, Silvio
Savarese, and Caiming Xiong.

</span>
<span class="ltx_bibblock">Codegen: An open large language model for code with multi-turn
program synthesis.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib29.1.1">arXiv preprint arXiv:2203.13474</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Zhuoshi Pan, Qianhui Wu, Huiqiang Jiang, Menglin Xia, Xufang Luo, Jue Zhang,
Qingwei Lin, Victor Rühle, Yuqing Yang, Chin-Yew Lin, et al.

</span>
<span class="ltx_bibblock">Llmlingua-2: Data distillation for efficient and faithful
task-agnostic prompt compression.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib30.1.1">arXiv preprint arXiv:2403.12968</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Kishore Papineni, Salim Roukos, Todd Ward, and Wei-Jing Zhu.

</span>
<span class="ltx_bibblock">Bleu: a method for automatic evaluation of machine translation.

</span>
<span class="ltx_bibblock">In Pierre Isabelle, Eugene Charniak, and Dekang Lin, editors, <span class="ltx_text ltx_font_italic" id="bib.bib31.1.1">Proceedings of the 40th Annual Meeting of the Association for Computational
Linguistics</span>, pages 311–318, Philadelphia, Pennsylvania, USA, July 2002.
Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Md Rizwan Parvez, Wasi Uddin Ahmad, Saikat Chakraborty, Baishakhi Ray, and
Kai-Wei Chang.

</span>
<span class="ltx_bibblock">Retrieval augmented code generation and summarization.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:2108.11601</span>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Alec Radford, Jeff Wu, Rewon Child, David Luan, Dario Amodei, and Ilya
Sutskever.

</span>
<span class="ltx_bibblock">Language models are unsupervised multitask learners.

</span>
<span class="ltx_bibblock">2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael
Matena, Yanqi Zhou, Wei Li, and Peter J Liu.

</span>
<span class="ltx_bibblock">Exploring the limits of transfer learning with a unified text-to-text
transformer.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib34.1.1">Journal of machine learning research</span>, 21(140):1–67, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Machel Reid, Nikolay Savinov, Denis Teplyashin, Dmitry Lepikhin, Timothy
Lillicrap, Jean-baptiste Alayrac, Radu Soricut, Angeliki Lazaridou, Orhan
Firat, Julian Schrittwieser, et al.

</span>
<span class="ltx_bibblock">Gemini 1.5: Unlocking multimodal understanding across millions of
tokens of context.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">arXiv preprint arXiv:2403.05530</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Shuo Ren, Daya Guo, Shuai Lu, Long Zhou, Shujie Liu, Duyu Tang, Neel
Sundaresan, Ming Zhou, Ambrosio Blanco, and Shuai Ma.

</span>
<span class="ltx_bibblock">Codebleu: a method for automatic evaluation of code synthesis.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2009.10297</span>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
X. Ren, X. Ye, D. Zhao, Z. Xing, and X. Yang.

</span>
<span class="ltx_bibblock">From misuse to mastery: Enhancing code generation with
knowledge-driven ai chaining.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">2023 38th IEEE/ACM International Conference on Automated
Software Engineering (ASE)</span>, pages 976–987, Los Alamitos, CA, USA, sep 2023.
IEEE Computer Society.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Baptiste Rozière, Jonas Gehring, Fabian Gloeckle, Sten Sootla, Itai Gat,
Xiaoqing Tan, Yossi Adi, Jingyu Liu, Tal Remez, Jérémy Rapin, Artyom
Kozhevnikov, I. Evtimov, Joanna Bitton, Manish P Bhatt, Cristian Cantón
Ferrer, Aaron Grattafiori, Wenhan Xiong, Alexandre D’efossez, Jade Copet,
Faisal Azhar, Hugo Touvron, Louis Martin, Nicolas Usunier, Thomas Scialom,
and Gabriel Synnaeve.

</span>
<span class="ltx_bibblock">Code llama: Open foundation models for code.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib38.1.1">ArXiv</span>, abs/2308.12950, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
John Schulman, Filip Wolski, Prafulla Dhariwal, Alec Radford, and Oleg Klimov.

</span>
<span class="ltx_bibblock">Proximal policy optimization algorithms.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib39.1.1">arXiv preprint arXiv:1707.06347</span>, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
Bo Shen, Jiaxin Zhang, Taihong Chen, Daoguang Zan, Bing Geng, An Fu, Muhan
Zeng, Ailun Yu, Jichuan Ji, Jingyang Zhao, et al.

</span>
<span class="ltx_bibblock">Pangu-coder2: Boosting large language models for code with ranking
feedback.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib40.1.1">arXiv preprint arXiv:2307.14936</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Freda Shi, Xinyun Chen, Kanishka Misra, Nathan Scales, David Dohan, Ed H. Chi,
Nathanael Schärli, and Denny Zhou.

</span>
<span class="ltx_bibblock">Large language models can be easily distracted by irrelevant context.

</span>
<span class="ltx_bibblock">In Andreas Krause, Emma Brunskill, Kyunghyun Cho, Barbara Engelhardt,
Sivan Sabato, and Jonathan Scarlett, editors, <span class="ltx_text ltx_font_italic" id="bib.bib41.1.1">Proceedings of the 40th
International Conference on Machine Learning</span>, volume 202 of <span class="ltx_text ltx_font_italic" id="bib.bib41.2.2">Proceedings
of Machine Learning Research</span>, pages 31210–31227. PMLR, 23–29 Jul 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Rich James, Mike Lewis,
Luke Zettlemoyer, and Wen-tau Yih.

</span>
<span class="ltx_bibblock">Replug: Retrieval-augmented black-box language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib42.1.1">arXiv preprint arXiv:2301.12652</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
Karthik Soman, Peter W Rose, John H Morris, Rabia E Akbas, Brett Smith, Braian
Peetoom, Catalina Villouta-Reyes, Gabriel Cerono, Yongmei Shi, Angela
Rizk-Jackson, et al.

</span>
<span class="ltx_bibblock">Biomedical knowledge graph-enhanced prompt generation for large
language models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib43.1.1">arXiv preprint arXiv:2311.17330</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
Feifan Song, Bowen Yu, Minghao Li, Haiyang Yu, Fei Huang, Yongbin Li, and
Houfeng Wang.

</span>
<span class="ltx_bibblock">Preference ranking optimization for human alignment.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib44.1.1">Proceedings of the AAAI Conference on Artificial
Intelligence</span>, volume 38, pages 18990–18998, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
Hongjin Su, Shuyang Jiang, Yuhang Lai, Haoyuan Wu, Boao Shi, Che Liu, Qian Liu,
and Tao Yu.

</span>
<span class="ltx_bibblock">Arks: Active retrieval in knowledge soup for code generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib45.1.1">arXiv preprint arXiv:2402.12317</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
Ze Tang, Jidong Ge, Shangqing Liu, Tingwei Zhu, Tongtong Xu, Liguo Huang, and
Bin Luo.

</span>
<span class="ltx_bibblock">Domain adaptive code completion via language models and decoupled
domain databases.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib46.1.1">2023 38th IEEE/ACM International Conference on Automated
Software Engineering (ASE)</span>, pages 421–433. IEEE, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
Haoye Tian, Weiqi Lu, Tsz On Li, Xunzhu Tang, Shing-Chi Cheung, Jacques Klein,
and Tegawendé F Bissyandé.

</span>
<span class="ltx_bibblock">Is chatgpt the ultimate programming assistant–how far is it?

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib47.1.1">arXiv preprint arXiv:2304.11938</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[48]</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine
Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale,
et al.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib48.1.1">arXiv preprint arXiv:2307.09288</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[49]</span>
<span class="ltx_bibblock">
Boxin Wang, Wei Ping, Lawrence McAfee, Peng Xu, Bo Li, Mohammad Shoeybi, and
Bryan Catanzaro.

</span>
<span class="ltx_bibblock">Instructretro: Instruction tuning post retrieval-augmented
pretraining.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib49.1.1">arXiv preprint arXiv:2310.07713</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[50]</span>
<span class="ltx_bibblock">
Boxin Wang, Wei Ping, Peng Xu, Lawrence McAfee, Zihan Liu, Mohammad Shoeybi,
Yi Dong, Oleksii Kuchaiev, Bo Li, Chaowei Xiao, et al.

</span>
<span class="ltx_bibblock">Shall we pretrain autoregressive language models with retrieval? a
comprehensive study.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib50.1.1">arXiv preprint arXiv:2304.06762</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[51]</span>
<span class="ltx_bibblock">
Yue Wang, Hung Le, Akhilesh Deepak Gotmare, Nghi DQ Bui, Junnan Li, and
Steven CH Hoi.

</span>
<span class="ltx_bibblock">Codet5+: Open code large language models for code understanding and
generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib51.1.1">arXiv preprint arXiv:2305.07922</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib52">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[52]</span>
<span class="ltx_bibblock">
Yue Wang, Weishi Wang, Shafiq Joty, and Steven CH Hoi.

</span>
<span class="ltx_bibblock">Codet5: Identifier-aware unified pre-trained encoder-decoder models
for code understanding and generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib52.1.1">arXiv preprint arXiv:2109.00859</span>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib53">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[53]</span>
<span class="ltx_bibblock">
Yilin Wen, Zifeng Wang, and Jimeng Sun.

</span>
<span class="ltx_bibblock">Mindmap: Knowledge graph prompting sparks graph of thoughts in large
language models.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib53.1.1">Proceedings of the 62nd Annual Meeting of the Association for
Computational Linguistics</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib54">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[54]</span>
<span class="ltx_bibblock">
Fangyuan Xu, Weijia Shi, and Eunsol Choi.

</span>
<span class="ltx_bibblock">Recomp: Improving retrieval-augmented lms with compression and
selective augmentation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib54.1.1">arXiv preprint arXiv:2310.04408</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib55">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[55]</span>
<span class="ltx_bibblock">
Frank F. Xu, Uri Alon, Graham Neubig, and Vincent Josua Hellendoorn.

</span>
<span class="ltx_bibblock">A systematic evaluation of large language models of code.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib55.1.1">Deep Learning for Code Workshop</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib56">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[56]</span>
<span class="ltx_bibblock">
Shi-Qi Yan, Jia-Chen Gu, Yun Zhu, and Zhen-Hua Ling.

</span>
<span class="ltx_bibblock">Corrective retrieval augmented generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib56.1.1">arXiv preprint arXiv:2401.15884</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib57">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[57]</span>
<span class="ltx_bibblock">
Haoyan Yang, Zhitao Li, Yong Zhang, Jianzong Wang, Ning Cheng, Ming Li, and
Jing Xiao.

</span>
<span class="ltx_bibblock">PRCA: Fitting black-box large language models for retrieval
question answering via pluggable reward-driven contextual adapter.

</span>
<span class="ltx_bibblock">In Houda Bouamor, Juan Pino, and Kalika Bali, editors, <span class="ltx_text ltx_font_italic" id="bib.bib57.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language
Processing</span>, pages 5364–5375, Singapore, December 2023. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib58">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[58]</span>
<span class="ltx_bibblock">
Zheng Yuan, Hongyi Yuan, Chuanqi Tan, Wei Wang, Songfang Huang, and Fei Huang.

</span>
<span class="ltx_bibblock">Rrhf: Rank responses to align language models with human feedback
without tears.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib58.1.1">arXiv preprint arXiv:2304.05302</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib59">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[59]</span>
<span class="ltx_bibblock">
Daoguang Zan, Bei Chen, Zeqi Lin, Bei Guan, Yongji Wang, and Jian-Guang Lou.

</span>
<span class="ltx_bibblock">When language model meets private library.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib59.1.1">arXiv preprint arXiv:2210.17236</span>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib60">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[60]</span>
<span class="ltx_bibblock">
Fengji Zhang, Bei Chen, Yue Zhang, Jacky Keung, Jin Liu, Daoguang Zan, Yi Mao,
Jian-Guang Lou, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Repocoder: Repository-level code completion through iterative
retrieval and generation.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib60.1.1">arXiv preprint arXiv:2303.12570</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib61">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[61]</span>
<span class="ltx_bibblock">
Kechi Zhang, Jia Li, Ge Li, Xianjie Shi, and Zhi Jin.

</span>
<span class="ltx_bibblock">Codeagent: Enhancing code generation with tool-integrated agent
systems for real-world repo-level coding challenges.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib61.1.1">arXiv preprint arXiv:2401.07339</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib62">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[62]</span>
<span class="ltx_bibblock">
Kechi Zhang, Huangzhao Zhang, Ge Li, Jia Li, Zhuo Li, and Zhi Jin.

</span>
<span class="ltx_bibblock">Toolcoder: Teach code generation models to use api search tools.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib62.1.1">arXiv preprint arXiv:2305.04032</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib63">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[63]</span>
<span class="ltx_bibblock">
Shun Zhang, Zhenfang Chen, Yikang Shen, Mingyu Ding, Joshua B. Tenenbaum, and
Chuang Gan.

</span>
<span class="ltx_bibblock">Planning with large language models for code generation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib63.1.1">The Eleventh International Conference on Learning
Representations</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib64">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[64]</span>
<span class="ltx_bibblock">
Tianyi Zhang, Tao Yu, Tatsunori Hashimoto, Mike Lewis, Wen-tau Yih, Daniel
Fried, and Sida Wang.

</span>
<span class="ltx_bibblock">Coder reviewer reranking for code generation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib64.1.1">International Conference on Machine Learning</span>, pages
41832–41846. PMLR, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib65">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[65]</span>
<span class="ltx_bibblock">
Xiangyu Zhang, Yu Zhou, Guang Yang, and Taolue Chen.

</span>
<span class="ltx_bibblock">Syntax-aware retrieval augmented code generation.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib65.1.1">The 2023 Conference on Empirical Methods in Natural Language
Processing</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib66">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[66]</span>
<span class="ltx_bibblock">
Qihao Zhao, Yalun Dai, Hao Li, Wei Hu, Fan Zhang, and Jun Liu.

</span>
<span class="ltx_bibblock">Ltgc: Long-tail recognition via leveraging llms-driven generated
content.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib66.1.1">arXiv preprint arXiv:2403.05854</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib67">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[67]</span>
<span class="ltx_bibblock">
Qinkai Zheng, Xiao Xia, Xu Zou, Yuxiao Dong, Shan Wang, Yufei Xue, Zihan Wang,
Lei Shen, Andi Wang, Yang Li, et al.

</span>
<span class="ltx_bibblock">Codegeex: A pre-trained model for code generation with multilingual
evaluations on humaneval-x.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib67.1.1">arXiv preprint arXiv:2303.17568</span>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib68">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[68]</span>
<span class="ltx_bibblock">
Shuyan Zhou, Uri Alon, Frank F Xu, Zhiruo Wang, Zhengbao Jiang, and Graham
Neubig.

</span>
<span class="ltx_bibblock">Docprompting: Generating code by retrieving the docs.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib68.1.1">arXiv preprint arXiv:2207.05987</span>, 2022.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Tue Sep 24 09:05:33 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
