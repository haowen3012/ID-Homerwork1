<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization</title>
<!--Generated on Mon Jun 17 06:30:47 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2406.11258v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S1" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S2" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Works</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S2.SS0.SSS0.Px1" title="In 2 Related Works ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Medical RAG.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S2.SS0.SSS0.Px2" title="In 2 Related Works ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Applications of MCTS.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S2.SS0.SSS0.Px3" title="In 2 Related Works ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Learning from Feedback.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Method</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1" title="In 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Self-Rewarding Tree Search</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS1" title="In 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1.1 </span>Result Evaluator for Quantitatively Measuring</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS2" title="In 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1.2 </span>Query Proposer for Efficiently Searching</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS3" title="In 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1.3 </span>Monte Carlo Tree Search Process</span></a>
<ol class="ltx_toclist ltx_toclist_subsubsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS3.Px1" title="In 3.1.3 Monte Carlo Tree Search Process ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Selection.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS3.Px2" title="In 3.1.3 Monte Carlo Tree Search Process ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Expansion.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS3.Px3" title="In 3.1.3 Monte Carlo Tree Search Process ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Evaluation.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS1.SSS3.Px4" title="In 3.1.3 Monte Carlo Tree Search Process ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title">Backpropagation.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.SS2" title="In 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Proximal Policy Optimization of LLMs with Feedback</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS1" title="In 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS2" title="In 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Baselines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS3" title="In 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS4" title="In 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Main Results</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS4.SSS1" title="In 4.4 Main Results ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.1 </span>Comparison of the Retrieval Capability</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS4.SSS2" title="In 4.4 Main Results ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4.2 </span>Effect on RAG</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS5" title="In 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5 </span>Ablation Study</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS5.SSS1" title="In 4.5 Ablation Study ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5.1 </span>Enhancement of PPO on SeRTS</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.SS5.SSS2" title="In 4.5 Ablation Study ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5.2 </span>Difference on Selection Policy</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S5" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A1" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Five-Point Rubrics of Evaluator</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A2" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Statistics of Generated Token Number</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3" title="In Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Implementation Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS1" title="In Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>RAG Pipeline</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS2" title="In Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>Self-Rewarding Tree Search (SeRTS)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS3" title="In Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>Self-Reflection</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS4" title="In Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.4 </span>LoRA PPO Finetuning</span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Minda Hu<sup class="ltx_sup" id="id11.11.id1"><span class="ltx_text ltx_font_italic" id="id11.11.id1.1">1</span></sup>   Licheng Zong<sup class="ltx_sup" id="id12.12.id2"><span class="ltx_text ltx_font_italic" id="id12.12.id2.1">1</span></sup><span class="ltx_note ltx_role_footnotemark" id="footnotex1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">footnotemark: </span><span class="ltx_tag ltx_tag_note">1</span></span></span></span>   Hongru Wang<sup class="ltx_sup" id="id13.13.id3">2</sup>   Jingyan Zhou<sup class="ltx_sup" id="id14.14.id4">2</sup>   Jingjing Li<sup class="ltx_sup" id="id15.15.id5">1</sup>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id10.10.5">Kam-Fai Wong<sup class="ltx_sup" id="id10.10.5.1"><span class="ltx_text ltx_font_medium" id="id10.10.5.1.1">2</span></sup>   Yu Li<sup class="ltx_sup" id="id10.10.5.2"><span class="ltx_text ltx_font_medium" id="id10.10.5.2.1">1</span></sup>   Irwin King<sup class="ltx_sup" id="id10.10.5.3"><span class="ltx_text ltx_font_medium" id="id10.10.5.3.1">1</span></sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id10.10.5.4"><span class="ltx_text ltx_font_medium" id="id10.10.5.4.1">1</span></sup>Department of Computer Science and Engineering
<br class="ltx_break"/><sup class="ltx_sup" id="id10.10.5.5"><span class="ltx_text ltx_font_medium" id="id10.10.5.5.1">2</span></sup>Department of Systems Engineering and Engineering Management
<br class="ltx_break"/>The Chinese University of Hong Kong
<br class="ltx_break"/></span><span class="ltx_text ltx_font_typewriter" id="id16.16.id6">{mindahu21, lczong21, liyu, king}@cse.cuhk.edu.hk</span><span class="ltx_text ltx_font_bold" id="id17.17.id7">
</span>
</span><span class="ltx_author_notes">  The first two authors have equal contributions.</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id18.id1">Large Language Models (LLMs) have shown great potential in the biomedical domain with the advancement of retrieval-augmented generation (RAG). However, existing retrieval-augmented approaches face challenges in addressing diverse queries and documents, particularly for medical knowledge queries, resulting in sub-optimal performance. To address these limitations, we propose a novel plug-and-play LLM-based retrieval method called <span class="ltx_text ltx_font_bold" id="id18.id1.1">Se</span>lf-<span class="ltx_text ltx_font_bold" id="id18.id1.2">R</span>ewarding <span class="ltx_text ltx_font_bold" id="id18.id1.3">T</span>ree <span class="ltx_text ltx_font_bold" id="id18.id1.4">S</span>earch (<span class="ltx_text ltx_font_bold" id="id18.id1.5">SeRTS</span>) based on Monte Carlo Tree Search (MCTS) and a self-rewarding paradigm. By combining the reasoning capabilities of LLMs with the effectiveness of tree search, SeRTS boosts the zero-shot performance of retrieving high-quality and informative results for RAG. We further enhance retrieval performance by fine-tuning LLMs with Proximal Policy Optimization (PPO) objectives using the trajectories collected by SeRTS as feedback. Controlled experiments using the BioASQ-QA dataset with GPT-3.5-Turbo and LLama2-7b demonstrate that our method significantly improves the performance of the BM25 retriever and surpasses the strong baseline of self-reflection in both efficiency and scalability. Moreover, SeRTS generates higher-quality feedback for PPO training than self-reflection. Our proposed method effectively adapts LLMs to document retrieval tasks, enhancing their ability to retrieve highly relevant documents for RAG in the context of medical knowledge queries. This work presents a significant step forward in leveraging LLMs for accurate and comprehensive biomedical question answering.</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large Language Models (LLMs) have made significant advancements and gained widespread adoption in various natural language tasks, such as dialogue systems <cite class="ltx_cite ltx_citemacro_cite">Bang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib2" title="">2023</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib25" title="">2023</a>)</cite> and question-answering <cite class="ltx_cite ltx_citemacro_cite">Kamalloo et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib8" title="">2023</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib11" title="">2023</a>)</cite>. However, their performance in specialized domains like medicine remains unsatisfactory due to the lack of publicly available training data, which limits the amount of domain-specific knowledge these LLMs can encode in their parameters <cite class="ltx_cite ltx_citemacro_cite">Xia et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib28" title="">2022</a>); Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib17" title="">2024</a>)</cite>. To address this limitation, recent studies have turned to retrieval-augmented generation (RAG) frameworks <cite class="ltx_cite ltx_citemacro_cite">Xiong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib29" title="">2024</a>)</cite>. These frameworks can enhance LLMs’ capabilities by retrieving relevant documents from large and private databases, thereby enabling the models to provide more accurate and informative answers.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Existing RAG framework mainly consists of two modules: an external retriever to retrieve documents according to semantic similarity between documents and queries, and the reader to generate the final answer given retrieved documents and query <cite class="ltx_cite ltx_citemacro_cite">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib4" title="">2024</a>)</cite>. However, this kind of setting overlook the two significant challenges in medical domain: the complexity of the queries and the varying importance of different documents. For example, patients may describe the same disease in diverse ways, leading to variations in query formulation. Additionally, documents from different medical disciplines should be weighted differently based on both of their relevance and importance. Thus, effectively identifying the most pertinent and useful documents from a vast corpus of medical literature is crucial. This not only enhances performance but also improves the explainability and credibility of the system.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">To address these issues, we propose a plug-and-play LLM-based retrieval method, <span class="ltx_text ltx_font_smallcaps" id="S1.p3.1.1">Self-Rewarding Tree Search (SeRTS)</span>, combines the exceptional reasoning capabilities of LLMs with the effective searching capabilities of Monte Carlo Tree Search (MCTS). Specifically, we first formulate the task of document retrieval as a tree search problem, considering both the diversity of queries and different relationship between multiple documents. Inspired by recent studies using MCTS to search the optimal reasoning paths of LLMs, we alternativelly employ it to find the best query and most related documents from vast candidate spaces. To ensure the success of MCTS, we carefully design each operations in MCTS and provide detailed feedback from different levels of documents. Furthermore, to validate the effectivenss and quality of our tree search retriever, we then collect these feedbacks with all intermediate reasoning results to finetune LLMs using PPO method. To sum up, our contributions can be summarized as follows:</p>
</div>
<div class="ltx_para" id="S1.p4">
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">To best of our knowledge, we are the first to formulate document retrieval as a tree search problem, considering both of complex query variations and document relationships.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We propose a Self-Rewarding Tree Search framework, consisting of a tree search retriever and a PPO self-training process.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">Experimental results on two LLMs, <span class="ltx_text ltx_font_smallcaps" id="S1.I1.i3.p1.1.1">GPT-3.5-Turbo</span> and <span class="ltx_text ltx_font_smallcaps" id="S1.I1.i3.p1.1.2">LLama2-7b-chat</span>, demonstrate that our SeRTS method significantly improves the performance of BM25 retrievers and surpasses the strong baseline of self-reflection in both efficiency and scalability.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Works</h2>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Medical RAG.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">Retrieval-Augmented Generation represents a significant advancement to provide up-to-date and trustworthy collections and improves the transparency of LLMs by grounding their reasoning on the retrieved documents <cite class="ltx_cite ltx_citemacro_citep">(Xiong et al., <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib29" title="">2024</a>)</cite>, particularly in the medical question-answering <cite class="ltx_cite ltx_citemacro_cite">Tian et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib23" title="">2019</a>); Xia et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib28" title="">2022</a>)</cite> and dialogue tasks <cite class="ltx_cite ltx_citemacro_cite">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib17" title="">2024</a>)</cite>. Most of previous works focus on query rewriting <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib37" title="">2022</a>)</cite> and multi-step retrieval <cite class="ltx_cite ltx_citemacro_cite">Mrini et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib12" title="">2022</a>)</cite>. More recent studies explore how LLMs can improve literature information-seeking and clinical decision-making RAG <cite class="ltx_cite ltx_citemacro_cite">Zakka et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib34" title="">2023</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib27" title="">2024</a>); Jeong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib7" title="">2024</a>)</cite>. In detail, <cite class="ltx_cite ltx_citemacro_citet">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib27" title="">2024</a>)</cite> design a hybrid retriever and conduct complex filter operations to get high-quality documents while <cite class="ltx_cite ltx_citemacro_citet">Jeong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib7" title="">2024</a>)</cite> propose Self-BioRAG to utilize retrieval and self-reflection together, resulting in better medical reasoning.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Applications of MCTS.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px2.p1.1">Monte Carlo Tree Search (MCTS) has been validated as an effective method for finding better solution paths among a wide range of potentially feasible options, enabling proficient exploration and enhancing decision-making<cite class="ltx_cite ltx_citemacro_citep">(Silver et al., <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib20" title="">2017</a>)</cite>. It has proven to be highly successful in various domains, including game-playing <cite class="ltx_cite ltx_citemacro_cite">Sironi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib21" title="">2018</a>); Ontanón (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib14" title="">2016</a>)</cite>, and planning <cite class="ltx_cite ltx_citemacro_cite">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib38" title="">2023</a>); Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib30" title="">2023</a>)</cite>. By combining MCTS with reinforcement learning, models can learn from self-play and achieve human-level performance or even surpass it in complex tasks, such as the game of Go <cite class="ltx_cite ltx_citemacro_cite">Silver et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib19" title="">2016</a>)</cite>. Recent works mainly utilize MCTS to determine the most promising reasoning path of LLMs, leading to better performance without additional annotations <cite class="ltx_cite ltx_citemacro_cite">Feng et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib3" title="">2024</a>); Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib39" title="">2024</a>); Tian et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib22" title="">2024</a>)</cite>. Specifically, <cite class="ltx_cite ltx_citemacro_citet">Feng et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib3" title="">2024</a>)</cite> fix a search step to be either a token or a sentence while <cite class="ltx_cite ltx_citemacro_citet">Tian et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib22" title="">2024</a>)</cite> employ <math alttext="\eta" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.1.m1.1"><semantics id="S2.SS0.SSS0.Px2.p1.1.m1.1a"><mi id="S2.SS0.SSS0.Px2.p1.1.m1.1.1" xref="S2.SS0.SSS0.Px2.p1.1.m1.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.1.m1.1b"><ci id="S2.SS0.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.1.m1.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.1.m1.1c">\eta</annotation><annotation encoding="application/x-llamapun" id="S2.SS0.SSS0.Px2.p1.1.m1.1d">italic_η</annotation></semantics></math>MCTS to search across multiple levels of planning with carefully defined reward signals. Additionally, other studies use MCTS to collect high-quality reasoning traces to train the reward model, aiming to continuously enhance LLMs over multiple iterations <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al., <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib36" title="">2024</a>)</cite>. Furthermore, <cite class="ltx_cite ltx_citemacro_citet">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib39" title="">2024</a>)</cite> expands the search space to encompass all possible reasoning and acting steps, thereby unifying reasoning, acting, and planning in language models.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Learning from Feedback.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p1.1">LLMs can evolve and then refine its outputs by learning from self-assessed rewards or environmental signals, such as self-learning or reinforcement learning from human feedback (RLHF). On the one hand, self-learning methods leverage the LM’s ability to critique its outputs, collecting natural language feedback as signals, such as Reflection <cite class="ltx_cite ltx_citemacro_cite">Shinn et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib18" title="">2024</a>)</cite>, Self-Rewarding LMs <cite class="ltx_cite ltx_citemacro_cite">Yuan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib31" title="">2024a</a>)</cite>. On the other hand, lots of works apply reinforcement learning to train the external reward model from human preferences <cite class="ltx_cite ltx_citemacro_cite">Ouyang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib15" title="">2022</a>)</cite>. The reward model is then frozen and used to train the LLM using RL, e.g., Proximal Policy Optimization (PPO) <cite class="ltx_cite ltx_citemacro_cite">Schulman et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib16" title="">2017</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib26" title="">2022</a>)</cite>, which is a popular reinforcement learning algorithm that has been successfully applied to various domains, including natural language processing tasks <cite class="ltx_cite ltx_citemacro_cite">Han et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib5" title="">2023</a>); Akyurek et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib1" title="">2023</a>)</cite>. However, most existing reinforced self-improvement approaches, e.g., STaR <cite class="ltx_cite ltx_citemacro_cite">Zelikman et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib35" title="">2022</a>)</cite> and RFT <cite class="ltx_cite ltx_citemacro_cite">Yuan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib33" title="">2023</a>)</cite>, overlooking the possibility that incorrect or low-quality reasoning traces may still lead to the correct solution due to hallucinations or randomness, leading to an unreliable reward model <cite class="ltx_cite ltx_citemacro_cite">Lanham et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib10" title="">2023</a>)</cite>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Method</h2>
<figure class="ltx_figure" id="S3.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="203" id="S3.F1.g1" src="x1.png" width="373"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>A straightforward Retrieval-Augmented Generation (RAG) pipeline</figcaption>
</figure>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="440" id="S3.F2.g1" src="x2.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Overview of our proposed method SeRTS</figcaption>
</figure>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.10">Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.F1" title="Figure 1 ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a> illustrates a straightforward Retrieval-Augmented Generation (RAG) pipeline we employed as the basis of our experiments. This process can be defined as follows:
Give a literature document set <math alttext="\mathcal{D}=\{d_{i}\}_{i=1}^{M}" class="ltx_Math" display="inline" id="S3.p1.1.m1.1"><semantics id="S3.p1.1.m1.1a"><mrow id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.1.m1.1.1.3" xref="S3.p1.1.m1.1.1.3.cmml">𝒟</mi><mo id="S3.p1.1.m1.1.1.2" xref="S3.p1.1.m1.1.1.2.cmml">=</mo><msubsup id="S3.p1.1.m1.1.1.1" xref="S3.p1.1.m1.1.1.1.cmml"><mrow id="S3.p1.1.m1.1.1.1.1.1.1" xref="S3.p1.1.m1.1.1.1.1.1.2.cmml"><mo id="S3.p1.1.m1.1.1.1.1.1.1.2" stretchy="false" xref="S3.p1.1.m1.1.1.1.1.1.2.cmml">{</mo><msub id="S3.p1.1.m1.1.1.1.1.1.1.1" xref="S3.p1.1.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.p1.1.m1.1.1.1.1.1.1.1.2" xref="S3.p1.1.m1.1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.p1.1.m1.1.1.1.1.1.1.1.3" xref="S3.p1.1.m1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.p1.1.m1.1.1.1.1.1.1.3" stretchy="false" xref="S3.p1.1.m1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.p1.1.m1.1.1.1.1.3" xref="S3.p1.1.m1.1.1.1.1.3.cmml"><mi id="S3.p1.1.m1.1.1.1.1.3.2" xref="S3.p1.1.m1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.p1.1.m1.1.1.1.1.3.1" xref="S3.p1.1.m1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.p1.1.m1.1.1.1.1.3.3" xref="S3.p1.1.m1.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.p1.1.m1.1.1.1.3" xref="S3.p1.1.m1.1.1.1.3.cmml">M</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.1b"><apply id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1"><eq id="S3.p1.1.m1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.2"></eq><ci id="S3.p1.1.m1.1.1.3.cmml" xref="S3.p1.1.m1.1.1.3">𝒟</ci><apply id="S3.p1.1.m1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.1.m1.1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.1">superscript</csymbol><apply id="S3.p1.1.m1.1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.1.m1.1.1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.1">subscript</csymbol><set id="S3.p1.1.m1.1.1.1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.1.1.1.1"><apply id="S3.p1.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.p1.1.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.p1.1.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.p1.1.m1.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.p1.1.m1.1.1.1.1.3.cmml" xref="S3.p1.1.m1.1.1.1.1.3"><eq id="S3.p1.1.m1.1.1.1.1.3.1.cmml" xref="S3.p1.1.m1.1.1.1.1.3.1"></eq><ci id="S3.p1.1.m1.1.1.1.1.3.2.cmml" xref="S3.p1.1.m1.1.1.1.1.3.2">𝑖</ci><cn id="S3.p1.1.m1.1.1.1.1.3.3.cmml" type="integer" xref="S3.p1.1.m1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.p1.1.m1.1.1.1.3.cmml" xref="S3.p1.1.m1.1.1.1.3">𝑀</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.1c">\mathcal{D}=\{d_{i}\}_{i=1}^{M}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.1.m1.1d">caligraphic_D = { italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_M end_POSTSUPERSCRIPT</annotation></semantics></math>, a Language Model based reader <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S3.p1.2.m2.1"><semantics id="S3.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.1b"><ci id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.2.m2.1d">caligraphic_P</annotation></semantics></math>, an external retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.p1.3.m3.1"><semantics id="S3.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b"><ci id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.3.m3.1d">caligraphic_R</annotation></semantics></math>, and a question <math alttext="Q" class="ltx_Math" display="inline" id="S3.p1.4.m4.1"><semantics id="S3.p1.4.m4.1a"><mi id="S3.p1.4.m4.1.1" xref="S3.p1.4.m4.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.p1.4.m4.1b"><ci id="S3.p1.4.m4.1.1.cmml" xref="S3.p1.4.m4.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.4.m4.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.p1.4.m4.1d">italic_Q</annotation></semantics></math>, use <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.p1.5.m5.1"><semantics id="S3.p1.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.5.m5.1.1" xref="S3.p1.5.m5.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.p1.5.m5.1b"><ci id="S3.p1.5.m5.1.1.cmml" xref="S3.p1.5.m5.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.5.m5.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.5.m5.1d">caligraphic_R</annotation></semantics></math> to retrieve several documents <math alttext="\{d_{1..j}\}" class="ltx_math_unparsed" display="inline" id="S3.p1.6.m6.2"><semantics id="S3.p1.6.m6.2a"><mrow id="S3.p1.6.m6.2.2.1"><mo id="S3.p1.6.m6.2.2.1.2" stretchy="false">{</mo><msub id="S3.p1.6.m6.2.2.1.1"><mi id="S3.p1.6.m6.2.2.1.1.2">d</mi><mrow id="S3.p1.6.m6.1.1.1"><mn id="S3.p1.6.m6.1.1.1.1">1</mn><mo id="S3.p1.6.m6.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.p1.6.m6.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.p1.6.m6.1.1.1.4">j</mi></mrow></msub><mo id="S3.p1.6.m6.2.2.1.3" stretchy="false">}</mo></mrow><annotation encoding="application/x-tex" id="S3.p1.6.m6.2b">\{d_{1..j}\}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.6.m6.2c">{ italic_d start_POSTSUBSCRIPT 1 . . italic_j end_POSTSUBSCRIPT }</annotation></semantics></math> related to <math alttext="Q" class="ltx_Math" display="inline" id="S3.p1.7.m7.1"><semantics id="S3.p1.7.m7.1a"><mi id="S3.p1.7.m7.1.1" xref="S3.p1.7.m7.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.p1.7.m7.1b"><ci id="S3.p1.7.m7.1.1.cmml" xref="S3.p1.7.m7.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.7.m7.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.p1.7.m7.1d">italic_Q</annotation></semantics></math>, so that the reader <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S3.p1.8.m8.1"><semantics id="S3.p1.8.m8.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.8.m8.1.1" xref="S3.p1.8.m8.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S3.p1.8.m8.1b"><ci id="S3.p1.8.m8.1.1.cmml" xref="S3.p1.8.m8.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.8.m8.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.8.m8.1d">caligraphic_P</annotation></semantics></math> can generate appropriate answers using them. When <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S3.p1.9.m9.1"><semantics id="S3.p1.9.m9.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.9.m9.1.1" xref="S3.p1.9.m9.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S3.p1.9.m9.1b"><ci id="S3.p1.9.m9.1.1.cmml" xref="S3.p1.9.m9.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.9.m9.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.9.m9.1d">caligraphic_P</annotation></semantics></math> is fixed, the quality of the generated answers mainly depends on the retrieved <math alttext="\{d_{1..j}\}" class="ltx_math_unparsed" display="inline" id="S3.p1.10.m10.2"><semantics id="S3.p1.10.m10.2a"><mrow id="S3.p1.10.m10.2.2.1"><mo id="S3.p1.10.m10.2.2.1.2" stretchy="false">{</mo><msub id="S3.p1.10.m10.2.2.1.1"><mi id="S3.p1.10.m10.2.2.1.1.2">d</mi><mrow id="S3.p1.10.m10.1.1.1"><mn id="S3.p1.10.m10.1.1.1.1">1</mn><mo id="S3.p1.10.m10.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.p1.10.m10.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.p1.10.m10.1.1.1.4">j</mi></mrow></msub><mo id="S3.p1.10.m10.2.2.1.3" stretchy="false">}</mo></mrow><annotation encoding="application/x-tex" id="S3.p1.10.m10.2b">\{d_{1..j}\}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.10.m10.2c">{ italic_d start_POSTSUBSCRIPT 1 . . italic_j end_POSTSUBSCRIPT }</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.p2">
<p class="ltx_p" id="S3.p2.2">To improve the relevance of <math alttext="\{d_{1..j}\}" class="ltx_math_unparsed" display="inline" id="S3.p2.1.m1.2"><semantics id="S3.p2.1.m1.2a"><mrow id="S3.p2.1.m1.2.2.1"><mo id="S3.p2.1.m1.2.2.1.2" stretchy="false">{</mo><msub id="S3.p2.1.m1.2.2.1.1"><mi id="S3.p2.1.m1.2.2.1.1.2">d</mi><mrow id="S3.p2.1.m1.1.1.1"><mn id="S3.p2.1.m1.1.1.1.1">1</mn><mo id="S3.p2.1.m1.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.p2.1.m1.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.p2.1.m1.1.1.1.4">j</mi></mrow></msub><mo id="S3.p2.1.m1.2.2.1.3" stretchy="false">}</mo></mrow><annotation encoding="application/x-tex" id="S3.p2.1.m1.2b">\{d_{1..j}\}</annotation><annotation encoding="application/x-llamapun" id="S3.p2.1.m1.2c">{ italic_d start_POSTSUBSCRIPT 1 . . italic_j end_POSTSUBSCRIPT }</annotation></semantics></math> to <math alttext="Q" class="ltx_Math" display="inline" id="S3.p2.2.m2.1"><semantics id="S3.p2.2.m2.1a"><mi id="S3.p2.2.m2.1.1" xref="S3.p2.2.m2.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.p2.2.m2.1b"><ci id="S3.p2.2.m2.1.1.cmml" xref="S3.p2.2.m2.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.2.m2.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.p2.2.m2.1d">italic_Q</annotation></semantics></math> for higher quality of the answers, we propose a novel method for retrieval, called <span class="ltx_text ltx_font_bold" id="S3.p2.2.1">Se</span>lf-<span class="ltx_text ltx_font_bold" id="S3.p2.2.2">R</span>ewarding <span class="ltx_text ltx_font_bold" id="S3.p2.2.3">T</span>ree <span class="ltx_text ltx_font_bold" id="S3.p2.2.4">S</span>earch (<span class="ltx_text ltx_font_bold" id="S3.p2.2.5">SeRTS</span>) as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a>. The core of SeRTS is a search algorithm based on Monte Carlo Tree Search (MCTS) that learns from trial-and-error experiences based on Self-Rewarding Paradigms and explores better trajectories of self-reflection reasoning to retrieve more relevant documents for Retrieval Augmented Generation (RAG).</p>
</div>
<div class="ltx_para" id="S3.p3">
<p class="ltx_p" id="S3.p3.3">It is worth noting that our method is decoupled from the RAG pipeline. All components in the pipeline, including the document set <math alttext="\mathcal{D}=\{d_{i}\}_{i=1}^{M}" class="ltx_Math" display="inline" id="S3.p3.1.m1.1"><semantics id="S3.p3.1.m1.1a"><mrow id="S3.p3.1.m1.1.1" xref="S3.p3.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p3.1.m1.1.1.3" xref="S3.p3.1.m1.1.1.3.cmml">𝒟</mi><mo id="S3.p3.1.m1.1.1.2" xref="S3.p3.1.m1.1.1.2.cmml">=</mo><msubsup id="S3.p3.1.m1.1.1.1" xref="S3.p3.1.m1.1.1.1.cmml"><mrow id="S3.p3.1.m1.1.1.1.1.1.1" xref="S3.p3.1.m1.1.1.1.1.1.2.cmml"><mo id="S3.p3.1.m1.1.1.1.1.1.1.2" stretchy="false" xref="S3.p3.1.m1.1.1.1.1.1.2.cmml">{</mo><msub id="S3.p3.1.m1.1.1.1.1.1.1.1" xref="S3.p3.1.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.p3.1.m1.1.1.1.1.1.1.1.2" xref="S3.p3.1.m1.1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.p3.1.m1.1.1.1.1.1.1.1.3" xref="S3.p3.1.m1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.p3.1.m1.1.1.1.1.1.1.3" stretchy="false" xref="S3.p3.1.m1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.p3.1.m1.1.1.1.1.3" xref="S3.p3.1.m1.1.1.1.1.3.cmml"><mi id="S3.p3.1.m1.1.1.1.1.3.2" xref="S3.p3.1.m1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.p3.1.m1.1.1.1.1.3.1" xref="S3.p3.1.m1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.p3.1.m1.1.1.1.1.3.3" xref="S3.p3.1.m1.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.p3.1.m1.1.1.1.3" xref="S3.p3.1.m1.1.1.1.3.cmml">M</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.p3.1.m1.1b"><apply id="S3.p3.1.m1.1.1.cmml" xref="S3.p3.1.m1.1.1"><eq id="S3.p3.1.m1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.2"></eq><ci id="S3.p3.1.m1.1.1.3.cmml" xref="S3.p3.1.m1.1.1.3">𝒟</ci><apply id="S3.p3.1.m1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.p3.1.m1.1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.1">superscript</csymbol><apply id="S3.p3.1.m1.1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.p3.1.m1.1.1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.1">subscript</csymbol><set id="S3.p3.1.m1.1.1.1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.1.1.1.1"><apply id="S3.p3.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p3.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.p3.1.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.p3.1.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.p3.1.m1.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.p3.1.m1.1.1.1.1.3.cmml" xref="S3.p3.1.m1.1.1.1.1.3"><eq id="S3.p3.1.m1.1.1.1.1.3.1.cmml" xref="S3.p3.1.m1.1.1.1.1.3.1"></eq><ci id="S3.p3.1.m1.1.1.1.1.3.2.cmml" xref="S3.p3.1.m1.1.1.1.1.3.2">𝑖</ci><cn id="S3.p3.1.m1.1.1.1.1.3.3.cmml" type="integer" xref="S3.p3.1.m1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.p3.1.m1.1.1.1.3.cmml" xref="S3.p3.1.m1.1.1.1.3">𝑀</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.1.m1.1c">\mathcal{D}=\{d_{i}\}_{i=1}^{M}</annotation><annotation encoding="application/x-llamapun" id="S3.p3.1.m1.1d">caligraphic_D = { italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_M end_POSTSUPERSCRIPT</annotation></semantics></math>, the LM reader <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S3.p3.2.m2.1"><semantics id="S3.p3.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p3.2.m2.1.1" xref="S3.p3.2.m2.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S3.p3.2.m2.1b"><ci id="S3.p3.2.m2.1.1.cmml" xref="S3.p3.2.m2.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.2.m2.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S3.p3.2.m2.1d">caligraphic_P</annotation></semantics></math> and the retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.p3.3.m3.1"><semantics id="S3.p3.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p3.3.m3.1.1" xref="S3.p3.3.m3.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.p3.3.m3.1b"><ci id="S3.p3.3.m3.1.1.cmml" xref="S3.p3.3.m3.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.3.m3.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.p3.3.m3.1d">caligraphic_R</annotation></semantics></math> could be replaced by other types. Our method acts as a plugger that can be integrated into any RAG pipelines.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Self-Rewarding Tree Search</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">As a decision policy, MCTS effectively balances exploration and exploitation when searching for optimal trajectories, so it’s employed to find the best retrieval results in our proposed method.
</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.15">We formulate the document retrieval process as a tree search problem. In the tree shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a>, each node <math alttext="s_{i}=[Q,A_{i},D_{i},R_{i},F_{i},O_{i}]" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.6"><semantics id="S3.SS1.p2.1.m1.6a"><mrow id="S3.SS1.p2.1.m1.6.6" xref="S3.SS1.p2.1.m1.6.6.cmml"><msub id="S3.SS1.p2.1.m1.6.6.7" xref="S3.SS1.p2.1.m1.6.6.7.cmml"><mi id="S3.SS1.p2.1.m1.6.6.7.2" xref="S3.SS1.p2.1.m1.6.6.7.2.cmml">s</mi><mi id="S3.SS1.p2.1.m1.6.6.7.3" xref="S3.SS1.p2.1.m1.6.6.7.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.6" xref="S3.SS1.p2.1.m1.6.6.6.cmml">=</mo><mrow id="S3.SS1.p2.1.m1.6.6.5.5" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml"><mo id="S3.SS1.p2.1.m1.6.6.5.5.6" stretchy="false" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">[</mo><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">Q</mi><mo id="S3.SS1.p2.1.m1.6.6.5.5.7" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">,</mo><msub id="S3.SS1.p2.1.m1.2.2.1.1.1" xref="S3.SS1.p2.1.m1.2.2.1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.2.2.1.1.1.2" xref="S3.SS1.p2.1.m1.2.2.1.1.1.2.cmml">A</mi><mi id="S3.SS1.p2.1.m1.2.2.1.1.1.3" xref="S3.SS1.p2.1.m1.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.5.5.8" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">,</mo><msub id="S3.SS1.p2.1.m1.3.3.2.2.2" xref="S3.SS1.p2.1.m1.3.3.2.2.2.cmml"><mi id="S3.SS1.p2.1.m1.3.3.2.2.2.2" xref="S3.SS1.p2.1.m1.3.3.2.2.2.2.cmml">D</mi><mi id="S3.SS1.p2.1.m1.3.3.2.2.2.3" xref="S3.SS1.p2.1.m1.3.3.2.2.2.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.5.5.9" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">,</mo><msub id="S3.SS1.p2.1.m1.4.4.3.3.3" xref="S3.SS1.p2.1.m1.4.4.3.3.3.cmml"><mi id="S3.SS1.p2.1.m1.4.4.3.3.3.2" xref="S3.SS1.p2.1.m1.4.4.3.3.3.2.cmml">R</mi><mi id="S3.SS1.p2.1.m1.4.4.3.3.3.3" xref="S3.SS1.p2.1.m1.4.4.3.3.3.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.5.5.10" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">,</mo><msub id="S3.SS1.p2.1.m1.5.5.4.4.4" xref="S3.SS1.p2.1.m1.5.5.4.4.4.cmml"><mi id="S3.SS1.p2.1.m1.5.5.4.4.4.2" xref="S3.SS1.p2.1.m1.5.5.4.4.4.2.cmml">F</mi><mi id="S3.SS1.p2.1.m1.5.5.4.4.4.3" xref="S3.SS1.p2.1.m1.5.5.4.4.4.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.5.5.11" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">,</mo><msub id="S3.SS1.p2.1.m1.6.6.5.5.5" xref="S3.SS1.p2.1.m1.6.6.5.5.5.cmml"><mi id="S3.SS1.p2.1.m1.6.6.5.5.5.2" xref="S3.SS1.p2.1.m1.6.6.5.5.5.2.cmml">O</mi><mi id="S3.SS1.p2.1.m1.6.6.5.5.5.3" xref="S3.SS1.p2.1.m1.6.6.5.5.5.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.6.6.5.5.12" stretchy="false" xref="S3.SS1.p2.1.m1.6.6.5.6.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.6b"><apply id="S3.SS1.p2.1.m1.6.6.cmml" xref="S3.SS1.p2.1.m1.6.6"><eq id="S3.SS1.p2.1.m1.6.6.6.cmml" xref="S3.SS1.p2.1.m1.6.6.6"></eq><apply id="S3.SS1.p2.1.m1.6.6.7.cmml" xref="S3.SS1.p2.1.m1.6.6.7"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.6.6.7.1.cmml" xref="S3.SS1.p2.1.m1.6.6.7">subscript</csymbol><ci id="S3.SS1.p2.1.m1.6.6.7.2.cmml" xref="S3.SS1.p2.1.m1.6.6.7.2">𝑠</ci><ci id="S3.SS1.p2.1.m1.6.6.7.3.cmml" xref="S3.SS1.p2.1.m1.6.6.7.3">𝑖</ci></apply><list id="S3.SS1.p2.1.m1.6.6.5.6.cmml" xref="S3.SS1.p2.1.m1.6.6.5.5"><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝑄</ci><apply id="S3.SS1.p2.1.m1.2.2.1.1.1.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.2.2.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1.2">𝐴</ci><ci id="S3.SS1.p2.1.m1.2.2.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1.3">𝑖</ci></apply><apply id="S3.SS1.p2.1.m1.3.3.2.2.2.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.3.3.2.2.2.1.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p2.1.m1.3.3.2.2.2.2.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2.2">𝐷</ci><ci id="S3.SS1.p2.1.m1.3.3.2.2.2.3.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2.3">𝑖</ci></apply><apply id="S3.SS1.p2.1.m1.4.4.3.3.3.cmml" xref="S3.SS1.p2.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.4.4.3.3.3.1.cmml" xref="S3.SS1.p2.1.m1.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p2.1.m1.4.4.3.3.3.2.cmml" xref="S3.SS1.p2.1.m1.4.4.3.3.3.2">𝑅</ci><ci id="S3.SS1.p2.1.m1.4.4.3.3.3.3.cmml" xref="S3.SS1.p2.1.m1.4.4.3.3.3.3">𝑖</ci></apply><apply id="S3.SS1.p2.1.m1.5.5.4.4.4.cmml" xref="S3.SS1.p2.1.m1.5.5.4.4.4"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.5.5.4.4.4.1.cmml" xref="S3.SS1.p2.1.m1.5.5.4.4.4">subscript</csymbol><ci id="S3.SS1.p2.1.m1.5.5.4.4.4.2.cmml" xref="S3.SS1.p2.1.m1.5.5.4.4.4.2">𝐹</ci><ci id="S3.SS1.p2.1.m1.5.5.4.4.4.3.cmml" xref="S3.SS1.p2.1.m1.5.5.4.4.4.3">𝑖</ci></apply><apply id="S3.SS1.p2.1.m1.6.6.5.5.5.cmml" xref="S3.SS1.p2.1.m1.6.6.5.5.5"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.6.6.5.5.5.1.cmml" xref="S3.SS1.p2.1.m1.6.6.5.5.5">subscript</csymbol><ci id="S3.SS1.p2.1.m1.6.6.5.5.5.2.cmml" xref="S3.SS1.p2.1.m1.6.6.5.5.5.2">𝑂</ci><ci id="S3.SS1.p2.1.m1.6.6.5.5.5.3.cmml" xref="S3.SS1.p2.1.m1.6.6.5.5.5.3">𝑖</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.6c">s_{i}=[Q,A_{i},D_{i},R_{i},F_{i},O_{i}]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.6d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = [ italic_Q , italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_D start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_F start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_O start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ]</annotation></semantics></math> represents a state with the original question <math alttext="Q" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">italic_Q</annotation></semantics></math>, query proposal <math alttext="A_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><msub id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml"><mi id="S3.SS1.p2.3.m3.1.1.2" xref="S3.SS1.p2.3.m3.1.1.2.cmml">A</mi><mi id="S3.SS1.p2.3.m3.1.1.3" xref="S3.SS1.p2.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><apply id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.3.m3.1.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1">subscript</csymbol><ci id="S3.SS1.p2.3.m3.1.1.2.cmml" xref="S3.SS1.p2.3.m3.1.1.2">𝐴</ci><ci id="S3.SS1.p2.3.m3.1.1.3.cmml" xref="S3.SS1.p2.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">A_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">italic_A start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, retrieved documents <math alttext="F" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.1"><semantics id="S3.SS1.p2.4.m4.1a"><mi id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><ci id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">F</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.1d">italic_F</annotation></semantics></math>, result score <math alttext="R" class="ltx_Math" display="inline" id="S3.SS1.p2.5.m5.1"><semantics id="S3.SS1.p2.5.m5.1a"><mi id="S3.SS1.p2.5.m5.1.1" xref="S3.SS1.p2.5.m5.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m5.1b"><ci id="S3.SS1.p2.5.m5.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m5.1c">R</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.5.m5.1d">italic_R</annotation></semantics></math> and feedback <math alttext="F" class="ltx_Math" display="inline" id="S3.SS1.p2.6.m6.1"><semantics id="S3.SS1.p2.6.m6.1a"><mi id="S3.SS1.p2.6.m6.1.1" xref="S3.SS1.p2.6.m6.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.6.m6.1b"><ci id="S3.SS1.p2.6.m6.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.6.m6.1c">F</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.6.m6.1d">italic_F</annotation></semantics></math>, and previous process observation <math alttext="O_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.7.m7.1"><semantics id="S3.SS1.p2.7.m7.1a"><msub id="S3.SS1.p2.7.m7.1.1" xref="S3.SS1.p2.7.m7.1.1.cmml"><mi id="S3.SS1.p2.7.m7.1.1.2" xref="S3.SS1.p2.7.m7.1.1.2.cmml">O</mi><mi id="S3.SS1.p2.7.m7.1.1.3" xref="S3.SS1.p2.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.7.m7.1b"><apply id="S3.SS1.p2.7.m7.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.7.m7.1.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1">subscript</csymbol><ci id="S3.SS1.p2.7.m7.1.1.2.cmml" xref="S3.SS1.p2.7.m7.1.1.2">𝑂</ci><ci id="S3.SS1.p2.7.m7.1.1.3.cmml" xref="S3.SS1.p2.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.7.m7.1c">O_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.7.m7.1d">italic_O start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>
(query proposals from all <math alttext="s_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.8.m8.1"><semantics id="S3.SS1.p2.8.m8.1a"><msub id="S3.SS1.p2.8.m8.1.1" xref="S3.SS1.p2.8.m8.1.1.cmml"><mi id="S3.SS1.p2.8.m8.1.1.2" xref="S3.SS1.p2.8.m8.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.8.m8.1.1.3" xref="S3.SS1.p2.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.8.m8.1b"><apply id="S3.SS1.p2.8.m8.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.8.m8.1.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1">subscript</csymbol><ci id="S3.SS1.p2.8.m8.1.1.2.cmml" xref="S3.SS1.p2.8.m8.1.1.2">𝑠</ci><ci id="S3.SS1.p2.8.m8.1.1.3.cmml" xref="S3.SS1.p2.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.8.m8.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.8.m8.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>’s ancestor nodes <math alttext="O^{anc}_{q}=\bigcup_{k\in\text{anc}(s_{i})}A_{k}" class="ltx_Math" display="inline" id="S3.SS1.p2.9.m9.1"><semantics id="S3.SS1.p2.9.m9.1a"><mrow id="S3.SS1.p2.9.m9.1.2" xref="S3.SS1.p2.9.m9.1.2.cmml"><msubsup id="S3.SS1.p2.9.m9.1.2.2" xref="S3.SS1.p2.9.m9.1.2.2.cmml"><mi id="S3.SS1.p2.9.m9.1.2.2.2.2" xref="S3.SS1.p2.9.m9.1.2.2.2.2.cmml">O</mi><mi id="S3.SS1.p2.9.m9.1.2.2.3" xref="S3.SS1.p2.9.m9.1.2.2.3.cmml">q</mi><mrow id="S3.SS1.p2.9.m9.1.2.2.2.3" xref="S3.SS1.p2.9.m9.1.2.2.2.3.cmml"><mi id="S3.SS1.p2.9.m9.1.2.2.2.3.2" xref="S3.SS1.p2.9.m9.1.2.2.2.3.2.cmml">a</mi><mo id="S3.SS1.p2.9.m9.1.2.2.2.3.1" xref="S3.SS1.p2.9.m9.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.9.m9.1.2.2.2.3.3" xref="S3.SS1.p2.9.m9.1.2.2.2.3.3.cmml">n</mi><mo id="S3.SS1.p2.9.m9.1.2.2.2.3.1a" xref="S3.SS1.p2.9.m9.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.9.m9.1.2.2.2.3.4" xref="S3.SS1.p2.9.m9.1.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="S3.SS1.p2.9.m9.1.2.1" rspace="0.111em" xref="S3.SS1.p2.9.m9.1.2.1.cmml">=</mo><mrow id="S3.SS1.p2.9.m9.1.2.3" xref="S3.SS1.p2.9.m9.1.2.3.cmml"><msub id="S3.SS1.p2.9.m9.1.2.3.1" xref="S3.SS1.p2.9.m9.1.2.3.1.cmml"><mo id="S3.SS1.p2.9.m9.1.2.3.1.2" xref="S3.SS1.p2.9.m9.1.2.3.1.2.cmml">⋃</mo><mrow id="S3.SS1.p2.9.m9.1.1.1" xref="S3.SS1.p2.9.m9.1.1.1.cmml"><mi id="S3.SS1.p2.9.m9.1.1.1.3" xref="S3.SS1.p2.9.m9.1.1.1.3.cmml">k</mi><mo id="S3.SS1.p2.9.m9.1.1.1.2" xref="S3.SS1.p2.9.m9.1.1.1.2.cmml">∈</mo><mrow id="S3.SS1.p2.9.m9.1.1.1.1" xref="S3.SS1.p2.9.m9.1.1.1.1.cmml"><mtext id="S3.SS1.p2.9.m9.1.1.1.1.3" xref="S3.SS1.p2.9.m9.1.1.1.1.3a.cmml">anc</mtext><mo id="S3.SS1.p2.9.m9.1.1.1.1.2" xref="S3.SS1.p2.9.m9.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p2.9.m9.1.1.1.1.1.1" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.9.m9.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.2" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.9.m9.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></msub><msub id="S3.SS1.p2.9.m9.1.2.3.2" xref="S3.SS1.p2.9.m9.1.2.3.2.cmml"><mi id="S3.SS1.p2.9.m9.1.2.3.2.2" xref="S3.SS1.p2.9.m9.1.2.3.2.2.cmml">A</mi><mi id="S3.SS1.p2.9.m9.1.2.3.2.3" xref="S3.SS1.p2.9.m9.1.2.3.2.3.cmml">k</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.9.m9.1b"><apply id="S3.SS1.p2.9.m9.1.2.cmml" xref="S3.SS1.p2.9.m9.1.2"><eq id="S3.SS1.p2.9.m9.1.2.1.cmml" xref="S3.SS1.p2.9.m9.1.2.1"></eq><apply id="S3.SS1.p2.9.m9.1.2.2.cmml" xref="S3.SS1.p2.9.m9.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m9.1.2.2.1.cmml" xref="S3.SS1.p2.9.m9.1.2.2">subscript</csymbol><apply id="S3.SS1.p2.9.m9.1.2.2.2.cmml" xref="S3.SS1.p2.9.m9.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m9.1.2.2.2.1.cmml" xref="S3.SS1.p2.9.m9.1.2.2">superscript</csymbol><ci id="S3.SS1.p2.9.m9.1.2.2.2.2.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.2">𝑂</ci><apply id="S3.SS1.p2.9.m9.1.2.2.2.3.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.3"><times id="S3.SS1.p2.9.m9.1.2.2.2.3.1.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.3.1"></times><ci id="S3.SS1.p2.9.m9.1.2.2.2.3.2.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.3.2">𝑎</ci><ci id="S3.SS1.p2.9.m9.1.2.2.2.3.3.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.3.3">𝑛</ci><ci id="S3.SS1.p2.9.m9.1.2.2.2.3.4.cmml" xref="S3.SS1.p2.9.m9.1.2.2.2.3.4">𝑐</ci></apply></apply><ci id="S3.SS1.p2.9.m9.1.2.2.3.cmml" xref="S3.SS1.p2.9.m9.1.2.2.3">𝑞</ci></apply><apply id="S3.SS1.p2.9.m9.1.2.3.cmml" xref="S3.SS1.p2.9.m9.1.2.3"><apply id="S3.SS1.p2.9.m9.1.2.3.1.cmml" xref="S3.SS1.p2.9.m9.1.2.3.1"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m9.1.2.3.1.1.cmml" xref="S3.SS1.p2.9.m9.1.2.3.1">subscript</csymbol><union id="S3.SS1.p2.9.m9.1.2.3.1.2.cmml" xref="S3.SS1.p2.9.m9.1.2.3.1.2"></union><apply id="S3.SS1.p2.9.m9.1.1.1.cmml" xref="S3.SS1.p2.9.m9.1.1.1"><in id="S3.SS1.p2.9.m9.1.1.1.2.cmml" xref="S3.SS1.p2.9.m9.1.1.1.2"></in><ci id="S3.SS1.p2.9.m9.1.1.1.3.cmml" xref="S3.SS1.p2.9.m9.1.1.1.3">𝑘</ci><apply id="S3.SS1.p2.9.m9.1.1.1.1.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1"><times id="S3.SS1.p2.9.m9.1.1.1.1.2.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.2"></times><ci id="S3.SS1.p2.9.m9.1.1.1.1.3a.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.3"><mtext id="S3.SS1.p2.9.m9.1.1.1.1.3.cmml" mathsize="70%" xref="S3.SS1.p2.9.m9.1.1.1.1.3">anc</mtext></ci><apply id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.9.m9.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply><apply id="S3.SS1.p2.9.m9.1.2.3.2.cmml" xref="S3.SS1.p2.9.m9.1.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p2.9.m9.1.2.3.2.1.cmml" xref="S3.SS1.p2.9.m9.1.2.3.2">subscript</csymbol><ci id="S3.SS1.p2.9.m9.1.2.3.2.2.cmml" xref="S3.SS1.p2.9.m9.1.2.3.2.2">𝐴</ci><ci id="S3.SS1.p2.9.m9.1.2.3.2.3.cmml" xref="S3.SS1.p2.9.m9.1.2.3.2.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.9.m9.1c">O^{anc}_{q}=\bigcup_{k\in\text{anc}(s_{i})}A_{k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.9.m9.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT = ⋃ start_POSTSUBSCRIPT italic_k ∈ anc ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_POSTSUBSCRIPT italic_A start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT</annotation></semantics></math>,
retrieved documents from all <math alttext="s_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.10.m10.1"><semantics id="S3.SS1.p2.10.m10.1a"><msub id="S3.SS1.p2.10.m10.1.1" xref="S3.SS1.p2.10.m10.1.1.cmml"><mi id="S3.SS1.p2.10.m10.1.1.2" xref="S3.SS1.p2.10.m10.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.10.m10.1.1.3" xref="S3.SS1.p2.10.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.10.m10.1b"><apply id="S3.SS1.p2.10.m10.1.1.cmml" xref="S3.SS1.p2.10.m10.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.10.m10.1.1.1.cmml" xref="S3.SS1.p2.10.m10.1.1">subscript</csymbol><ci id="S3.SS1.p2.10.m10.1.1.2.cmml" xref="S3.SS1.p2.10.m10.1.1.2">𝑠</ci><ci id="S3.SS1.p2.10.m10.1.1.3.cmml" xref="S3.SS1.p2.10.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.10.m10.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.10.m10.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>’s ancestor nodes <math alttext="O^{anc}_{d}=\bigcup_{k\in\text{anc}(s_{i})}D_{k}" class="ltx_Math" display="inline" id="S3.SS1.p2.11.m11.1"><semantics id="S3.SS1.p2.11.m11.1a"><mrow id="S3.SS1.p2.11.m11.1.2" xref="S3.SS1.p2.11.m11.1.2.cmml"><msubsup id="S3.SS1.p2.11.m11.1.2.2" xref="S3.SS1.p2.11.m11.1.2.2.cmml"><mi id="S3.SS1.p2.11.m11.1.2.2.2.2" xref="S3.SS1.p2.11.m11.1.2.2.2.2.cmml">O</mi><mi id="S3.SS1.p2.11.m11.1.2.2.3" xref="S3.SS1.p2.11.m11.1.2.2.3.cmml">d</mi><mrow id="S3.SS1.p2.11.m11.1.2.2.2.3" xref="S3.SS1.p2.11.m11.1.2.2.2.3.cmml"><mi id="S3.SS1.p2.11.m11.1.2.2.2.3.2" xref="S3.SS1.p2.11.m11.1.2.2.2.3.2.cmml">a</mi><mo id="S3.SS1.p2.11.m11.1.2.2.2.3.1" xref="S3.SS1.p2.11.m11.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.11.m11.1.2.2.2.3.3" xref="S3.SS1.p2.11.m11.1.2.2.2.3.3.cmml">n</mi><mo id="S3.SS1.p2.11.m11.1.2.2.2.3.1a" xref="S3.SS1.p2.11.m11.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.11.m11.1.2.2.2.3.4" xref="S3.SS1.p2.11.m11.1.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="S3.SS1.p2.11.m11.1.2.1" rspace="0.111em" xref="S3.SS1.p2.11.m11.1.2.1.cmml">=</mo><mrow id="S3.SS1.p2.11.m11.1.2.3" xref="S3.SS1.p2.11.m11.1.2.3.cmml"><msub id="S3.SS1.p2.11.m11.1.2.3.1" xref="S3.SS1.p2.11.m11.1.2.3.1.cmml"><mo id="S3.SS1.p2.11.m11.1.2.3.1.2" xref="S3.SS1.p2.11.m11.1.2.3.1.2.cmml">⋃</mo><mrow id="S3.SS1.p2.11.m11.1.1.1" xref="S3.SS1.p2.11.m11.1.1.1.cmml"><mi id="S3.SS1.p2.11.m11.1.1.1.3" xref="S3.SS1.p2.11.m11.1.1.1.3.cmml">k</mi><mo id="S3.SS1.p2.11.m11.1.1.1.2" xref="S3.SS1.p2.11.m11.1.1.1.2.cmml">∈</mo><mrow id="S3.SS1.p2.11.m11.1.1.1.1" xref="S3.SS1.p2.11.m11.1.1.1.1.cmml"><mtext id="S3.SS1.p2.11.m11.1.1.1.1.3" xref="S3.SS1.p2.11.m11.1.1.1.1.3a.cmml">anc</mtext><mo id="S3.SS1.p2.11.m11.1.1.1.1.2" xref="S3.SS1.p2.11.m11.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p2.11.m11.1.1.1.1.1.1" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.11.m11.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.2" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.11.m11.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></msub><msub id="S3.SS1.p2.11.m11.1.2.3.2" xref="S3.SS1.p2.11.m11.1.2.3.2.cmml"><mi id="S3.SS1.p2.11.m11.1.2.3.2.2" xref="S3.SS1.p2.11.m11.1.2.3.2.2.cmml">D</mi><mi id="S3.SS1.p2.11.m11.1.2.3.2.3" xref="S3.SS1.p2.11.m11.1.2.3.2.3.cmml">k</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.11.m11.1b"><apply id="S3.SS1.p2.11.m11.1.2.cmml" xref="S3.SS1.p2.11.m11.1.2"><eq id="S3.SS1.p2.11.m11.1.2.1.cmml" xref="S3.SS1.p2.11.m11.1.2.1"></eq><apply id="S3.SS1.p2.11.m11.1.2.2.cmml" xref="S3.SS1.p2.11.m11.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m11.1.2.2.1.cmml" xref="S3.SS1.p2.11.m11.1.2.2">subscript</csymbol><apply id="S3.SS1.p2.11.m11.1.2.2.2.cmml" xref="S3.SS1.p2.11.m11.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m11.1.2.2.2.1.cmml" xref="S3.SS1.p2.11.m11.1.2.2">superscript</csymbol><ci id="S3.SS1.p2.11.m11.1.2.2.2.2.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.2">𝑂</ci><apply id="S3.SS1.p2.11.m11.1.2.2.2.3.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.3"><times id="S3.SS1.p2.11.m11.1.2.2.2.3.1.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.3.1"></times><ci id="S3.SS1.p2.11.m11.1.2.2.2.3.2.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.3.2">𝑎</ci><ci id="S3.SS1.p2.11.m11.1.2.2.2.3.3.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.3.3">𝑛</ci><ci id="S3.SS1.p2.11.m11.1.2.2.2.3.4.cmml" xref="S3.SS1.p2.11.m11.1.2.2.2.3.4">𝑐</ci></apply></apply><ci id="S3.SS1.p2.11.m11.1.2.2.3.cmml" xref="S3.SS1.p2.11.m11.1.2.2.3">𝑑</ci></apply><apply id="S3.SS1.p2.11.m11.1.2.3.cmml" xref="S3.SS1.p2.11.m11.1.2.3"><apply id="S3.SS1.p2.11.m11.1.2.3.1.cmml" xref="S3.SS1.p2.11.m11.1.2.3.1"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m11.1.2.3.1.1.cmml" xref="S3.SS1.p2.11.m11.1.2.3.1">subscript</csymbol><union id="S3.SS1.p2.11.m11.1.2.3.1.2.cmml" xref="S3.SS1.p2.11.m11.1.2.3.1.2"></union><apply id="S3.SS1.p2.11.m11.1.1.1.cmml" xref="S3.SS1.p2.11.m11.1.1.1"><in id="S3.SS1.p2.11.m11.1.1.1.2.cmml" xref="S3.SS1.p2.11.m11.1.1.1.2"></in><ci id="S3.SS1.p2.11.m11.1.1.1.3.cmml" xref="S3.SS1.p2.11.m11.1.1.1.3">𝑘</ci><apply id="S3.SS1.p2.11.m11.1.1.1.1.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1"><times id="S3.SS1.p2.11.m11.1.1.1.1.2.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.2"></times><ci id="S3.SS1.p2.11.m11.1.1.1.1.3a.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.3"><mtext id="S3.SS1.p2.11.m11.1.1.1.1.3.cmml" mathsize="70%" xref="S3.SS1.p2.11.m11.1.1.1.1.3">anc</mtext></ci><apply id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.11.m11.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply><apply id="S3.SS1.p2.11.m11.1.2.3.2.cmml" xref="S3.SS1.p2.11.m11.1.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p2.11.m11.1.2.3.2.1.cmml" xref="S3.SS1.p2.11.m11.1.2.3.2">subscript</csymbol><ci id="S3.SS1.p2.11.m11.1.2.3.2.2.cmml" xref="S3.SS1.p2.11.m11.1.2.3.2.2">𝐷</ci><ci id="S3.SS1.p2.11.m11.1.2.3.2.3.cmml" xref="S3.SS1.p2.11.m11.1.2.3.2.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.11.m11.1c">O^{anc}_{d}=\bigcup_{k\in\text{anc}(s_{i})}D_{k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.11.m11.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT = ⋃ start_POSTSUBSCRIPT italic_k ∈ anc ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT</annotation></semantics></math>,
query proposals from all <math alttext="s_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.12.m12.1"><semantics id="S3.SS1.p2.12.m12.1a"><msub id="S3.SS1.p2.12.m12.1.1" xref="S3.SS1.p2.12.m12.1.1.cmml"><mi id="S3.SS1.p2.12.m12.1.1.2" xref="S3.SS1.p2.12.m12.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.12.m12.1.1.3" xref="S3.SS1.p2.12.m12.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.12.m12.1b"><apply id="S3.SS1.p2.12.m12.1.1.cmml" xref="S3.SS1.p2.12.m12.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.12.m12.1.1.1.cmml" xref="S3.SS1.p2.12.m12.1.1">subscript</csymbol><ci id="S3.SS1.p2.12.m12.1.1.2.cmml" xref="S3.SS1.p2.12.m12.1.1.2">𝑠</ci><ci id="S3.SS1.p2.12.m12.1.1.3.cmml" xref="S3.SS1.p2.12.m12.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.12.m12.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.12.m12.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>’s sibling nodes <math alttext="O^{sib}_{q}=\bigcup_{k\in\text{sib}(s_{i})}A_{k}" class="ltx_Math" display="inline" id="S3.SS1.p2.13.m13.1"><semantics id="S3.SS1.p2.13.m13.1a"><mrow id="S3.SS1.p2.13.m13.1.2" xref="S3.SS1.p2.13.m13.1.2.cmml"><msubsup id="S3.SS1.p2.13.m13.1.2.2" xref="S3.SS1.p2.13.m13.1.2.2.cmml"><mi id="S3.SS1.p2.13.m13.1.2.2.2.2" xref="S3.SS1.p2.13.m13.1.2.2.2.2.cmml">O</mi><mi id="S3.SS1.p2.13.m13.1.2.2.3" xref="S3.SS1.p2.13.m13.1.2.2.3.cmml">q</mi><mrow id="S3.SS1.p2.13.m13.1.2.2.2.3" xref="S3.SS1.p2.13.m13.1.2.2.2.3.cmml"><mi id="S3.SS1.p2.13.m13.1.2.2.2.3.2" xref="S3.SS1.p2.13.m13.1.2.2.2.3.2.cmml">s</mi><mo id="S3.SS1.p2.13.m13.1.2.2.2.3.1" xref="S3.SS1.p2.13.m13.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.13.m13.1.2.2.2.3.3" xref="S3.SS1.p2.13.m13.1.2.2.2.3.3.cmml">i</mi><mo id="S3.SS1.p2.13.m13.1.2.2.2.3.1a" xref="S3.SS1.p2.13.m13.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.13.m13.1.2.2.2.3.4" xref="S3.SS1.p2.13.m13.1.2.2.2.3.4.cmml">b</mi></mrow></msubsup><mo id="S3.SS1.p2.13.m13.1.2.1" rspace="0.111em" xref="S3.SS1.p2.13.m13.1.2.1.cmml">=</mo><mrow id="S3.SS1.p2.13.m13.1.2.3" xref="S3.SS1.p2.13.m13.1.2.3.cmml"><msub id="S3.SS1.p2.13.m13.1.2.3.1" xref="S3.SS1.p2.13.m13.1.2.3.1.cmml"><mo id="S3.SS1.p2.13.m13.1.2.3.1.2" xref="S3.SS1.p2.13.m13.1.2.3.1.2.cmml">⋃</mo><mrow id="S3.SS1.p2.13.m13.1.1.1" xref="S3.SS1.p2.13.m13.1.1.1.cmml"><mi id="S3.SS1.p2.13.m13.1.1.1.3" xref="S3.SS1.p2.13.m13.1.1.1.3.cmml">k</mi><mo id="S3.SS1.p2.13.m13.1.1.1.2" xref="S3.SS1.p2.13.m13.1.1.1.2.cmml">∈</mo><mrow id="S3.SS1.p2.13.m13.1.1.1.1" xref="S3.SS1.p2.13.m13.1.1.1.1.cmml"><mtext id="S3.SS1.p2.13.m13.1.1.1.1.3" xref="S3.SS1.p2.13.m13.1.1.1.1.3a.cmml">sib</mtext><mo id="S3.SS1.p2.13.m13.1.1.1.1.2" xref="S3.SS1.p2.13.m13.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p2.13.m13.1.1.1.1.1.1" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.13.m13.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.2" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.13.m13.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></msub><msub id="S3.SS1.p2.13.m13.1.2.3.2" xref="S3.SS1.p2.13.m13.1.2.3.2.cmml"><mi id="S3.SS1.p2.13.m13.1.2.3.2.2" xref="S3.SS1.p2.13.m13.1.2.3.2.2.cmml">A</mi><mi id="S3.SS1.p2.13.m13.1.2.3.2.3" xref="S3.SS1.p2.13.m13.1.2.3.2.3.cmml">k</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.13.m13.1b"><apply id="S3.SS1.p2.13.m13.1.2.cmml" xref="S3.SS1.p2.13.m13.1.2"><eq id="S3.SS1.p2.13.m13.1.2.1.cmml" xref="S3.SS1.p2.13.m13.1.2.1"></eq><apply id="S3.SS1.p2.13.m13.1.2.2.cmml" xref="S3.SS1.p2.13.m13.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.13.m13.1.2.2.1.cmml" xref="S3.SS1.p2.13.m13.1.2.2">subscript</csymbol><apply id="S3.SS1.p2.13.m13.1.2.2.2.cmml" xref="S3.SS1.p2.13.m13.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.13.m13.1.2.2.2.1.cmml" xref="S3.SS1.p2.13.m13.1.2.2">superscript</csymbol><ci id="S3.SS1.p2.13.m13.1.2.2.2.2.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.2">𝑂</ci><apply id="S3.SS1.p2.13.m13.1.2.2.2.3.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.3"><times id="S3.SS1.p2.13.m13.1.2.2.2.3.1.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.3.1"></times><ci id="S3.SS1.p2.13.m13.1.2.2.2.3.2.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.3.2">𝑠</ci><ci id="S3.SS1.p2.13.m13.1.2.2.2.3.3.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.3.3">𝑖</ci><ci id="S3.SS1.p2.13.m13.1.2.2.2.3.4.cmml" xref="S3.SS1.p2.13.m13.1.2.2.2.3.4">𝑏</ci></apply></apply><ci id="S3.SS1.p2.13.m13.1.2.2.3.cmml" xref="S3.SS1.p2.13.m13.1.2.2.3">𝑞</ci></apply><apply id="S3.SS1.p2.13.m13.1.2.3.cmml" xref="S3.SS1.p2.13.m13.1.2.3"><apply id="S3.SS1.p2.13.m13.1.2.3.1.cmml" xref="S3.SS1.p2.13.m13.1.2.3.1"><csymbol cd="ambiguous" id="S3.SS1.p2.13.m13.1.2.3.1.1.cmml" xref="S3.SS1.p2.13.m13.1.2.3.1">subscript</csymbol><union id="S3.SS1.p2.13.m13.1.2.3.1.2.cmml" xref="S3.SS1.p2.13.m13.1.2.3.1.2"></union><apply id="S3.SS1.p2.13.m13.1.1.1.cmml" xref="S3.SS1.p2.13.m13.1.1.1"><in id="S3.SS1.p2.13.m13.1.1.1.2.cmml" xref="S3.SS1.p2.13.m13.1.1.1.2"></in><ci id="S3.SS1.p2.13.m13.1.1.1.3.cmml" xref="S3.SS1.p2.13.m13.1.1.1.3">𝑘</ci><apply id="S3.SS1.p2.13.m13.1.1.1.1.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1"><times id="S3.SS1.p2.13.m13.1.1.1.1.2.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.2"></times><ci id="S3.SS1.p2.13.m13.1.1.1.1.3a.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.3"><mtext id="S3.SS1.p2.13.m13.1.1.1.1.3.cmml" mathsize="70%" xref="S3.SS1.p2.13.m13.1.1.1.1.3">sib</mtext></ci><apply id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.13.m13.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply><apply id="S3.SS1.p2.13.m13.1.2.3.2.cmml" xref="S3.SS1.p2.13.m13.1.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p2.13.m13.1.2.3.2.1.cmml" xref="S3.SS1.p2.13.m13.1.2.3.2">subscript</csymbol><ci id="S3.SS1.p2.13.m13.1.2.3.2.2.cmml" xref="S3.SS1.p2.13.m13.1.2.3.2.2">𝐴</ci><ci id="S3.SS1.p2.13.m13.1.2.3.2.3.cmml" xref="S3.SS1.p2.13.m13.1.2.3.2.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.13.m13.1c">O^{sib}_{q}=\bigcup_{k\in\text{sib}(s_{i})}A_{k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.13.m13.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT = ⋃ start_POSTSUBSCRIPT italic_k ∈ sib ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_POSTSUBSCRIPT italic_A start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT</annotation></semantics></math>,
feedback from all <math alttext="s_{i}" class="ltx_Math" display="inline" id="S3.SS1.p2.14.m14.1"><semantics id="S3.SS1.p2.14.m14.1a"><msub id="S3.SS1.p2.14.m14.1.1" xref="S3.SS1.p2.14.m14.1.1.cmml"><mi id="S3.SS1.p2.14.m14.1.1.2" xref="S3.SS1.p2.14.m14.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.14.m14.1.1.3" xref="S3.SS1.p2.14.m14.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.14.m14.1b"><apply id="S3.SS1.p2.14.m14.1.1.cmml" xref="S3.SS1.p2.14.m14.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.14.m14.1.1.1.cmml" xref="S3.SS1.p2.14.m14.1.1">subscript</csymbol><ci id="S3.SS1.p2.14.m14.1.1.2.cmml" xref="S3.SS1.p2.14.m14.1.1.2">𝑠</ci><ci id="S3.SS1.p2.14.m14.1.1.3.cmml" xref="S3.SS1.p2.14.m14.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.14.m14.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.14.m14.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>’s sibling nodes <math alttext="O^{sib}_{f}=\bigcup_{k\in\text{sib}(s_{i})}F_{k}" class="ltx_Math" display="inline" id="S3.SS1.p2.15.m15.1"><semantics id="S3.SS1.p2.15.m15.1a"><mrow id="S3.SS1.p2.15.m15.1.2" xref="S3.SS1.p2.15.m15.1.2.cmml"><msubsup id="S3.SS1.p2.15.m15.1.2.2" xref="S3.SS1.p2.15.m15.1.2.2.cmml"><mi id="S3.SS1.p2.15.m15.1.2.2.2.2" xref="S3.SS1.p2.15.m15.1.2.2.2.2.cmml">O</mi><mi id="S3.SS1.p2.15.m15.1.2.2.3" xref="S3.SS1.p2.15.m15.1.2.2.3.cmml">f</mi><mrow id="S3.SS1.p2.15.m15.1.2.2.2.3" xref="S3.SS1.p2.15.m15.1.2.2.2.3.cmml"><mi id="S3.SS1.p2.15.m15.1.2.2.2.3.2" xref="S3.SS1.p2.15.m15.1.2.2.2.3.2.cmml">s</mi><mo id="S3.SS1.p2.15.m15.1.2.2.2.3.1" xref="S3.SS1.p2.15.m15.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.15.m15.1.2.2.2.3.3" xref="S3.SS1.p2.15.m15.1.2.2.2.3.3.cmml">i</mi><mo id="S3.SS1.p2.15.m15.1.2.2.2.3.1a" xref="S3.SS1.p2.15.m15.1.2.2.2.3.1.cmml">⁢</mo><mi id="S3.SS1.p2.15.m15.1.2.2.2.3.4" xref="S3.SS1.p2.15.m15.1.2.2.2.3.4.cmml">b</mi></mrow></msubsup><mo id="S3.SS1.p2.15.m15.1.2.1" rspace="0.111em" xref="S3.SS1.p2.15.m15.1.2.1.cmml">=</mo><mrow id="S3.SS1.p2.15.m15.1.2.3" xref="S3.SS1.p2.15.m15.1.2.3.cmml"><msub id="S3.SS1.p2.15.m15.1.2.3.1" xref="S3.SS1.p2.15.m15.1.2.3.1.cmml"><mo id="S3.SS1.p2.15.m15.1.2.3.1.2" xref="S3.SS1.p2.15.m15.1.2.3.1.2.cmml">⋃</mo><mrow id="S3.SS1.p2.15.m15.1.1.1" xref="S3.SS1.p2.15.m15.1.1.1.cmml"><mi id="S3.SS1.p2.15.m15.1.1.1.3" xref="S3.SS1.p2.15.m15.1.1.1.3.cmml">k</mi><mo id="S3.SS1.p2.15.m15.1.1.1.2" xref="S3.SS1.p2.15.m15.1.1.1.2.cmml">∈</mo><mrow id="S3.SS1.p2.15.m15.1.1.1.1" xref="S3.SS1.p2.15.m15.1.1.1.1.cmml"><mtext id="S3.SS1.p2.15.m15.1.1.1.1.3" xref="S3.SS1.p2.15.m15.1.1.1.1.3a.cmml">sib</mtext><mo id="S3.SS1.p2.15.m15.1.1.1.1.2" xref="S3.SS1.p2.15.m15.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.p2.15.m15.1.1.1.1.1.1" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.15.m15.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.2" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p2.15.m15.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></msub><msub id="S3.SS1.p2.15.m15.1.2.3.2" xref="S3.SS1.p2.15.m15.1.2.3.2.cmml"><mi id="S3.SS1.p2.15.m15.1.2.3.2.2" xref="S3.SS1.p2.15.m15.1.2.3.2.2.cmml">F</mi><mi id="S3.SS1.p2.15.m15.1.2.3.2.3" xref="S3.SS1.p2.15.m15.1.2.3.2.3.cmml">k</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.15.m15.1b"><apply id="S3.SS1.p2.15.m15.1.2.cmml" xref="S3.SS1.p2.15.m15.1.2"><eq id="S3.SS1.p2.15.m15.1.2.1.cmml" xref="S3.SS1.p2.15.m15.1.2.1"></eq><apply id="S3.SS1.p2.15.m15.1.2.2.cmml" xref="S3.SS1.p2.15.m15.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.15.m15.1.2.2.1.cmml" xref="S3.SS1.p2.15.m15.1.2.2">subscript</csymbol><apply id="S3.SS1.p2.15.m15.1.2.2.2.cmml" xref="S3.SS1.p2.15.m15.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.15.m15.1.2.2.2.1.cmml" xref="S3.SS1.p2.15.m15.1.2.2">superscript</csymbol><ci id="S3.SS1.p2.15.m15.1.2.2.2.2.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.2">𝑂</ci><apply id="S3.SS1.p2.15.m15.1.2.2.2.3.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.3"><times id="S3.SS1.p2.15.m15.1.2.2.2.3.1.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.3.1"></times><ci id="S3.SS1.p2.15.m15.1.2.2.2.3.2.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.3.2">𝑠</ci><ci id="S3.SS1.p2.15.m15.1.2.2.2.3.3.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.3.3">𝑖</ci><ci id="S3.SS1.p2.15.m15.1.2.2.2.3.4.cmml" xref="S3.SS1.p2.15.m15.1.2.2.2.3.4">𝑏</ci></apply></apply><ci id="S3.SS1.p2.15.m15.1.2.2.3.cmml" xref="S3.SS1.p2.15.m15.1.2.2.3">𝑓</ci></apply><apply id="S3.SS1.p2.15.m15.1.2.3.cmml" xref="S3.SS1.p2.15.m15.1.2.3"><apply id="S3.SS1.p2.15.m15.1.2.3.1.cmml" xref="S3.SS1.p2.15.m15.1.2.3.1"><csymbol cd="ambiguous" id="S3.SS1.p2.15.m15.1.2.3.1.1.cmml" xref="S3.SS1.p2.15.m15.1.2.3.1">subscript</csymbol><union id="S3.SS1.p2.15.m15.1.2.3.1.2.cmml" xref="S3.SS1.p2.15.m15.1.2.3.1.2"></union><apply id="S3.SS1.p2.15.m15.1.1.1.cmml" xref="S3.SS1.p2.15.m15.1.1.1"><in id="S3.SS1.p2.15.m15.1.1.1.2.cmml" xref="S3.SS1.p2.15.m15.1.1.1.2"></in><ci id="S3.SS1.p2.15.m15.1.1.1.3.cmml" xref="S3.SS1.p2.15.m15.1.1.1.3">𝑘</ci><apply id="S3.SS1.p2.15.m15.1.1.1.1.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1"><times id="S3.SS1.p2.15.m15.1.1.1.1.2.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.2"></times><ci id="S3.SS1.p2.15.m15.1.1.1.1.3a.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.3"><mtext id="S3.SS1.p2.15.m15.1.1.1.1.3.cmml" mathsize="70%" xref="S3.SS1.p2.15.m15.1.1.1.1.3">sib</mtext></ci><apply id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.15.m15.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply><apply id="S3.SS1.p2.15.m15.1.2.3.2.cmml" xref="S3.SS1.p2.15.m15.1.2.3.2"><csymbol cd="ambiguous" id="S3.SS1.p2.15.m15.1.2.3.2.1.cmml" xref="S3.SS1.p2.15.m15.1.2.3.2">subscript</csymbol><ci id="S3.SS1.p2.15.m15.1.2.3.2.2.cmml" xref="S3.SS1.p2.15.m15.1.2.3.2.2">𝐹</ci><ci id="S3.SS1.p2.15.m15.1.2.3.2.3.cmml" xref="S3.SS1.p2.15.m15.1.2.3.2.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.15.m15.1c">O^{sib}_{f}=\bigcup_{k\in\text{sib}(s_{i})}F_{k}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.15.m15.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT = ⋃ start_POSTSUBSCRIPT italic_k ∈ sib ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_POSTSUBSCRIPT italic_F start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT</annotation></semantics></math>).</p>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.5">Starting from the root node (initial state <math alttext="s_{0}" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.1"><semantics id="S3.SS1.p3.1.m1.1a"><msub id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml"><mi id="S3.SS1.p3.1.m1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.2.cmml">s</mi><mn id="S3.SS1.p3.1.m1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><apply id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p3.1.m1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2">𝑠</ci><cn id="S3.SS1.p3.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.p3.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">s_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.1d">italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>), SeRTS uses the MCTS algorithm that iteratively searches through the Query Space <math alttext="A_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS1.p3.2.m2.1"><semantics id="S3.SS1.p3.2.m2.1a"><msub id="S3.SS1.p3.2.m2.1.2"><mi id="S3.SS1.p3.2.m2.1.2.2">A</mi><mrow id="S3.SS1.p3.2.m2.1.1.1"><mn id="S3.SS1.p3.2.m2.1.1.1.1">1</mn><mo id="S3.SS1.p3.2.m2.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS1.p3.2.m2.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS1.p3.2.m2.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1b">A_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.2.m2.1c">italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and uses <math alttext="A_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS1.p3.3.m3.1"><semantics id="S3.SS1.p3.3.m3.1a"><msub id="S3.SS1.p3.3.m3.1.2"><mi id="S3.SS1.p3.3.m3.1.2.2">A</mi><mrow id="S3.SS1.p3.3.m3.1.1.1"><mn id="S3.SS1.p3.3.m3.1.1.1.1">1</mn><mo id="S3.SS1.p3.3.m3.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS1.p3.3.m3.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS1.p3.3.m3.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m3.1b">A_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.3.m3.1c">italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> to retrieve documents. The retriever employed here is the BM25, a strong retriever in the biomedical retrieval domain, supported by multiple evaluations <cite class="ltx_cite ltx_citemacro_cite">Xiong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib29" title="">2024</a>)</cite>. The final target is to find node <math alttext="s_{o}" class="ltx_Math" display="inline" id="S3.SS1.p3.4.m4.1"><semantics id="S3.SS1.p3.4.m4.1a"><msub id="S3.SS1.p3.4.m4.1.1" xref="S3.SS1.p3.4.m4.1.1.cmml"><mi id="S3.SS1.p3.4.m4.1.1.2" xref="S3.SS1.p3.4.m4.1.1.2.cmml">s</mi><mi id="S3.SS1.p3.4.m4.1.1.3" xref="S3.SS1.p3.4.m4.1.1.3.cmml">o</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.4.m4.1b"><apply id="S3.SS1.p3.4.m4.1.1.cmml" xref="S3.SS1.p3.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.4.m4.1.1.1.cmml" xref="S3.SS1.p3.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.p3.4.m4.1.1.2.cmml" xref="S3.SS1.p3.4.m4.1.1.2">𝑠</ci><ci id="S3.SS1.p3.4.m4.1.1.3.cmml" xref="S3.SS1.p3.4.m4.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.4.m4.1c">s_{o}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.4.m4.1d">italic_s start_POSTSUBSCRIPT italic_o end_POSTSUBSCRIPT</annotation></semantics></math> that has retrieved documents from itself and its ancestors are evaluated to have the highest scores in helping generate answers for question <math alttext="Q" class="ltx_Math" display="inline" id="S3.SS1.p3.5.m5.1"><semantics id="S3.SS1.p3.5.m5.1a"><mi id="S3.SS1.p3.5.m5.1.1" xref="S3.SS1.p3.5.m5.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.5.m5.1b"><ci id="S3.SS1.p3.5.m5.1.1.cmml" xref="S3.SS1.p3.5.m5.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.5.m5.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.5.m5.1d">italic_Q</annotation></semantics></math>.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.1.1 </span>Result Evaluator for Quantitatively Measuring</h4>
<div class="ltx_para" id="S3.SS1.SSS1.p1">
<p class="ltx_p" id="S3.SS1.SSS1.p1.1">Quantitatively measuring the quality of retrieved documents by providing high-quality feedback with a specific score is essential for the MCTS. Here, we propose to utilize LMs to automatically do the evaluation and provide feedback, inspired by the Self-Rewarding paradigm <cite class="ltx_cite ltx_citemacro_cite">Yuan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib31" title="">2024a</a>)</cite>. The quality of feedback plays a crucial role in producing accurate reasoning, and low-quality feedback can hinder the self-improving ability of LLMs during self-reflection.</p>
</div>
<div class="ltx_para" id="S3.SS1.SSS1.p2">
<p class="ltx_p" id="S3.SS1.SSS1.p2.1">We design a <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS1.p2.1.1">Result Evaluator</span> <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S3.SS1.SSS1.p2.1.m1.1"><semantics id="S3.SS1.SSS1.p2.1.m1.1a"><msubsup id="S3.SS1.SSS1.p2.1.m1.1.1" xref="S3.SS1.SSS1.p2.1.m1.1.1.cmml"><mi id="S3.SS1.SSS1.p2.1.m1.1.1.2.2" xref="S3.SS1.SSS1.p2.1.m1.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS1.p2.1.m1.1.1.2.3" xref="S3.SS1.SSS1.p2.1.m1.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS1.p2.1.m1.1.1.3" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.cmml"><mi id="S3.SS1.SSS1.p2.1.m1.1.1.3.2" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.2.cmml">e</mi><mo id="S3.SS1.SSS1.p2.1.m1.1.1.3.1" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS1.p2.1.m1.1.1.3.3" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.3.cmml">v</mi><mo id="S3.SS1.SSS1.p2.1.m1.1.1.3.1a" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS1.p2.1.m1.1.1.3.4" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.4.cmml">a</mi><mo id="S3.SS1.SSS1.p2.1.m1.1.1.3.1b" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS1.p2.1.m1.1.1.3.5" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS1.p2.1.m1.1b"><apply id="S3.SS1.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.SSS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS1.p2.1.m1.1.1.2.1.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS1.p2.1.m1.1.1.2.2.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS1.p2.1.m1.1.1.2.3.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3"><times id="S3.SS1.SSS1.p2.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.1"></times><ci id="S3.SS1.SSS1.p2.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.2">𝑒</ci><ci id="S3.SS1.SSS1.p2.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.3">𝑣</ci><ci id="S3.SS1.SSS1.p2.1.m1.1.1.3.4.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.4">𝑎</ci><ci id="S3.SS1.SSS1.p2.1.m1.1.1.3.5.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS1.p2.1.m1.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS1.p2.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> using the system prompt in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T1" title="Table 1 ‣ 3.1.1 Result Evaluator for Quantitatively Measuring ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a> to provide descriptional feedback and quantitative measurement for retrieved documents.</p>
</div>
<div class="ltx_para" id="S3.SS1.SSS1.p3">
<p class="ltx_p" id="S3.SS1.SSS1.p3.1">It utilizes the 5-point rubrics to assess the relevance of retrieved documents to the query and their potential contribution to the reasoning process, as well as providing descriptional feedback to the search algorithm. This scoring mechanism enables MCTS to make informed decisions during the search process, guiding it toward retrieving the most informative and relevant documents for RAG.</p>
</div>
<figure class="ltx_table" id="S3.T1">
<p class="ltx_p ltx_align_center" id="S3.T1.2"><span class="ltx_text" id="S3.T1.2.2"><span class="ltx_text" id="S3.T1.2.2.2" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="S3.T1.2.2.2.2">
<span class="ltx_tbody">
<span class="ltx_tr" id="S3.T1.2.2.2.2.3.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.3.1.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.3.1.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.3.1.1.1.1" style="width:204.9pt;">You are a medical expert. Review the user’s question and rate the corresponding retrieved knowledge using the additive 5-point scoring system described below. Points are accumulated based on the satisfaction of each criterion:</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.4.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.4.2.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.4.2.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.4.2.1.1.1" style="width:204.9pt;"><span class="ltx_text ltx_font_bold" id="S3.T1.2.2.2.2.4.2.1.1.1.1">{Five-point Rubrics}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.1.1.1.1.1.1">
<span class="ltx_p" id="S3.T1.1.1.1.1.1.1.1.1" style="width:204.9pt;">&lt;question&gt; <span class="ltx_text ltx_font_bold" id="S3.T1.1.1.1.1.1.1.1.1.1">{<math alttext="Q" class="ltx_Math" display="inline" id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1a"><mi id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1.1" mathbackground="#FFF5EB" xref="S3.T1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1b"><ci id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S3.T1.1.1.1.1.1.1.1.1.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.T1.1.1.1.1.1.1.1.1.1.m1.1d">italic_Q</annotation></semantics></math>}</span> &lt;/question&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.5.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.5.3.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.5.3.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.5.3.1.1.1" style="width:204.9pt;">&lt;retrieved_knowledge&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.2.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.2.1.1.1" style="width:204.9pt;"><span class="ltx_text ltx_font_bold" id="S3.T1.2.2.2.2.2.1.1.1.1">{<math alttext="D\cup O^{anc}_{d}" class="ltx_Math" display="inline" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1"><semantics id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1a"><mrow id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.cmml"><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.2" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.2.cmml">D</mi><mo id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.1" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.1.cmml">∪</mo><msubsup id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.cmml"><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.2" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.2.cmml">O</mi><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.3" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.3.cmml">d</mi><mrow id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.cmml"><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.2" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.2.cmml">a</mi><mo id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.3" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.3.cmml">n</mi><mo id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1a" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.4" mathbackground="#FFF5EB" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1b"><apply id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1"><union id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.1.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.1"></union><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.2.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.2">𝐷</ci><apply id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.1.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3">subscript</csymbol><apply id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.1.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3">superscript</csymbol><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.2.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.2">𝑂</ci><apply id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3"><times id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.1"></times><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.2.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.2">𝑎</ci><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.3.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.3">𝑛</ci><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.4.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.2.3.4">𝑐</ci></apply></apply><ci id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.3.cmml" xref="S3.T1.2.2.2.2.2.1.1.1.1.m1.1.1.3.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1c">D\cup O^{anc}_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.T1.2.2.2.2.2.1.1.1.1.m1.1d">italic_D ∪ italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.6.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.6.4.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.6.4.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.6.4.1.1.1" style="width:204.9pt;">&lt;/retrieved_knowledge&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.7.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.7.5.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.7.5.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.7.5.1.1.1" style="width:204.9pt;">After examining the user’s instruction and the response:</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.8.6">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.8.6.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.8.6.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.8.6.1.1.1" style="width:204.9pt;">-Briefly justify your total score, up to 100 words. Remember to assess from the AI Assistant perspective, utilizing web search knowledge as necessary. To evaluate the response in alignment with this additive scoring model, we’ll systematically attribute points based on the outlined criteria.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.9.7">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.9.7.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.9.7.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.9.7.1.1.1" style="width:204.9pt;">-Give suggestions for constructing better queries up to 100 words.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T1.2.2.2.2.10.8">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T1.2.2.2.2.10.8.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.2.2.2.2.10.8.1.1">
<span class="ltx_p" id="S3.T1.2.2.2.2.10.8.1.1.1" style="width:204.9pt;">Conclude with a score between 0 and 5, strictly using the aforementioned additive 5-point scoring system and the format: “&lt;score&gt; Integer Score &lt;/score&gt;”. For example, &lt;score&gt;3&lt;/score&gt;.</span>
</span></span></span>
</span>
</span></span></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Prompt for Evaluator <math alttext="P^{eval}_{\theta}" class="ltx_Math" display="inline" id="S3.T1.4.m1.1"><semantics id="S3.T1.4.m1.1b"><msubsup id="S3.T1.4.m1.1.1" xref="S3.T1.4.m1.1.1.cmml"><mi id="S3.T1.4.m1.1.1.2.2" xref="S3.T1.4.m1.1.1.2.2.cmml">P</mi><mi id="S3.T1.4.m1.1.1.3" xref="S3.T1.4.m1.1.1.3.cmml">θ</mi><mrow id="S3.T1.4.m1.1.1.2.3" xref="S3.T1.4.m1.1.1.2.3.cmml"><mi id="S3.T1.4.m1.1.1.2.3.2" xref="S3.T1.4.m1.1.1.2.3.2.cmml">e</mi><mo id="S3.T1.4.m1.1.1.2.3.1" xref="S3.T1.4.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T1.4.m1.1.1.2.3.3" xref="S3.T1.4.m1.1.1.2.3.3.cmml">v</mi><mo id="S3.T1.4.m1.1.1.2.3.1b" xref="S3.T1.4.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T1.4.m1.1.1.2.3.4" xref="S3.T1.4.m1.1.1.2.3.4.cmml">a</mi><mo id="S3.T1.4.m1.1.1.2.3.1c" xref="S3.T1.4.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T1.4.m1.1.1.2.3.5" xref="S3.T1.4.m1.1.1.2.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T1.4.m1.1c"><apply id="S3.T1.4.m1.1.1.cmml" xref="S3.T1.4.m1.1.1"><csymbol cd="ambiguous" id="S3.T1.4.m1.1.1.1.cmml" xref="S3.T1.4.m1.1.1">subscript</csymbol><apply id="S3.T1.4.m1.1.1.2.cmml" xref="S3.T1.4.m1.1.1"><csymbol cd="ambiguous" id="S3.T1.4.m1.1.1.2.1.cmml" xref="S3.T1.4.m1.1.1">superscript</csymbol><ci id="S3.T1.4.m1.1.1.2.2.cmml" xref="S3.T1.4.m1.1.1.2.2">𝑃</ci><apply id="S3.T1.4.m1.1.1.2.3.cmml" xref="S3.T1.4.m1.1.1.2.3"><times id="S3.T1.4.m1.1.1.2.3.1.cmml" xref="S3.T1.4.m1.1.1.2.3.1"></times><ci id="S3.T1.4.m1.1.1.2.3.2.cmml" xref="S3.T1.4.m1.1.1.2.3.2">𝑒</ci><ci id="S3.T1.4.m1.1.1.2.3.3.cmml" xref="S3.T1.4.m1.1.1.2.3.3">𝑣</ci><ci id="S3.T1.4.m1.1.1.2.3.4.cmml" xref="S3.T1.4.m1.1.1.2.3.4">𝑎</ci><ci id="S3.T1.4.m1.1.1.2.3.5.cmml" xref="S3.T1.4.m1.1.1.2.3.5">𝑙</ci></apply></apply><ci id="S3.T1.4.m1.1.1.3.cmml" xref="S3.T1.4.m1.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.4.m1.1d">P^{eval}_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.T1.4.m1.1e">italic_P start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math>. Details of <span class="ltx_text ltx_font_bold" id="S3.T1.6.1">{Five-point Rubrics}</span> is shown in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A1" title="Appendix A Five-Point Rubrics of Evaluator ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">A</span></a>.</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.1.2 </span>Query Proposer for Efficiently Searching</h4>
<div class="ltx_para" id="S3.SS1.SSS2.p1">
<p class="ltx_p" id="S3.SS1.SSS2.p1.1">The vast number of potential token combinations in natural language tasks results in an exponentially large search space, posing a significant challenge to the efficiency of MCTS. Our approach tackles the search space issue by employing strategic expanding techniques and heuristics to navigate the vast query space <math alttext="A_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS1.SSS2.p1.1.m1.1"><semantics id="S3.SS1.SSS2.p1.1.m1.1a"><msub id="S3.SS1.SSS2.p1.1.m1.1.2"><mi id="S3.SS1.SSS2.p1.1.m1.1.2.2">A</mi><mrow id="S3.SS1.SSS2.p1.1.m1.1.1.1"><mn id="S3.SS1.SSS2.p1.1.m1.1.1.1.1">1</mn><mo id="S3.SS1.SSS2.p1.1.m1.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS1.SSS2.p1.1.m1.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS1.SSS2.p1.1.m1.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS1.SSS2.p1.1.m1.1b">A_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS2.p1.1.m1.1c">italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> efficiently.</p>
</div>
<div class="ltx_para" id="S3.SS1.SSS2.p2">
<p class="ltx_p" id="S3.SS1.SSS2.p2.4">We design a <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS2.p2.4.1">Query Proposer</span> <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.1.m1.1"><semantics id="S3.SS1.SSS2.p2.1.m1.1a"><msubsup id="S3.SS1.SSS2.p2.1.m1.1.1" xref="S3.SS1.SSS2.p2.1.m1.1.1.cmml"><mi id="S3.SS1.SSS2.p2.1.m1.1.1.2.2" xref="S3.SS1.SSS2.p2.1.m1.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS2.p2.1.m1.1.1.2.3" xref="S3.SS1.SSS2.p2.1.m1.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS2.p2.1.m1.1.1.3" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.cmml"><mi id="S3.SS1.SSS2.p2.1.m1.1.1.3.2" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS2.p2.1.m1.1.1.3.1" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.1.m1.1.1.3.3" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS2.p2.1.m1.1.1.3.1a" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.1.m1.1.1.3.4" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS2.p2.1.m1.1.1.3.1b" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.1.m1.1.1.3.5" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS2.p2.1.m1.1.1.3.1c" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.1.m1.1.1.3.6" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.1.m1.1b"><apply id="S3.SS1.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.1.m1.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS2.p2.1.m1.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS2.p2.1.m1.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3"><times id="S3.SS1.SSS2.p2.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.1"></times><ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.4.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.5.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.6.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.1.m1.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS2.p2.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> using the system prompt in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T2" title="Table 2 ‣ 3.1.2 Query Proposer for Efficiently Searching ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a>. Query Proposer efficiently explores new queries in a heuristic manner using previous results and feedback. At every node, <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.2.m2.1"><semantics id="S3.SS1.SSS2.p2.2.m2.1a"><msubsup id="S3.SS1.SSS2.p2.2.m2.1.1" xref="S3.SS1.SSS2.p2.2.m2.1.1.cmml"><mi id="S3.SS1.SSS2.p2.2.m2.1.1.2.2" xref="S3.SS1.SSS2.p2.2.m2.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS2.p2.2.m2.1.1.2.3" xref="S3.SS1.SSS2.p2.2.m2.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS2.p2.2.m2.1.1.3" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.cmml"><mi id="S3.SS1.SSS2.p2.2.m2.1.1.3.2" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS2.p2.2.m2.1.1.3.1" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.2.m2.1.1.3.3" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS2.p2.2.m2.1.1.3.1a" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.2.m2.1.1.3.4" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS2.p2.2.m2.1.1.3.1b" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.2.m2.1.1.3.5" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS2.p2.2.m2.1.1.3.1c" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.2.m2.1.1.3.6" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.2.m2.1b"><apply id="S3.SS1.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1">superscript</csymbol><apply id="S3.SS1.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.2.m2.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.SSS2.p2.2.m2.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS2.p2.2.m2.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3"><times id="S3.SS1.SSS2.p2.2.m2.1.1.3.1.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.1"></times><ci id="S3.SS1.SSS2.p2.2.m2.1.1.3.2.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS2.p2.2.m2.1.1.3.3.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS2.p2.2.m2.1.1.3.4.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS2.p2.2.m2.1.1.3.5.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS2.p2.2.m2.1.1.3.6.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.2.m2.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS2.p2.2.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> is given the query proposals from its sibling nodes and the corresponding feedback produced by the Result Evaluator <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.3.m3.1"><semantics id="S3.SS1.SSS2.p2.3.m3.1a"><msubsup id="S3.SS1.SSS2.p2.3.m3.1.1" xref="S3.SS1.SSS2.p2.3.m3.1.1.cmml"><mi id="S3.SS1.SSS2.p2.3.m3.1.1.2.2" xref="S3.SS1.SSS2.p2.3.m3.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS2.p2.3.m3.1.1.2.3" xref="S3.SS1.SSS2.p2.3.m3.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS2.p2.3.m3.1.1.3" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.cmml"><mi id="S3.SS1.SSS2.p2.3.m3.1.1.3.2" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.2.cmml">e</mi><mo id="S3.SS1.SSS2.p2.3.m3.1.1.3.1" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.3.m3.1.1.3.3" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.3.cmml">v</mi><mo id="S3.SS1.SSS2.p2.3.m3.1.1.3.1a" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.3.m3.1.1.3.4" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.4.cmml">a</mi><mo id="S3.SS1.SSS2.p2.3.m3.1.1.3.1b" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.3.m3.1.1.3.5" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.3.m3.1b"><apply id="S3.SS1.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.3.m3.1.1.1.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1">superscript</csymbol><apply id="S3.SS1.SSS2.p2.3.m3.1.1.2.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.3.m3.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1">subscript</csymbol><ci id="S3.SS1.SSS2.p2.3.m3.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS2.p2.3.m3.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS2.p2.3.m3.1.1.3.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3"><times id="S3.SS1.SSS2.p2.3.m3.1.1.3.1.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.1"></times><ci id="S3.SS1.SSS2.p2.3.m3.1.1.3.2.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.2">𝑒</ci><ci id="S3.SS1.SSS2.p2.3.m3.1.1.3.3.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.3">𝑣</ci><ci id="S3.SS1.SSS2.p2.3.m3.1.1.3.4.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.4">𝑎</ci><ci id="S3.SS1.SSS2.p2.3.m3.1.1.3.5.cmml" xref="S3.SS1.SSS2.p2.3.m3.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.3.m3.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS2.p2.3.m3.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>, as well as previously retrieved documents from all its ancestor nodes. Considering the known information, <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.4.m4.1"><semantics id="S3.SS1.SSS2.p2.4.m4.1a"><msubsup id="S3.SS1.SSS2.p2.4.m4.1.1" xref="S3.SS1.SSS2.p2.4.m4.1.1.cmml"><mi id="S3.SS1.SSS2.p2.4.m4.1.1.2.2" xref="S3.SS1.SSS2.p2.4.m4.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS2.p2.4.m4.1.1.2.3" xref="S3.SS1.SSS2.p2.4.m4.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS2.p2.4.m4.1.1.3" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.cmml"><mi id="S3.SS1.SSS2.p2.4.m4.1.1.3.2" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS2.p2.4.m4.1.1.3.1" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.4.m4.1.1.3.3" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS2.p2.4.m4.1.1.3.1a" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.4.m4.1.1.3.4" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS2.p2.4.m4.1.1.3.1b" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.4.m4.1.1.3.5" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS2.p2.4.m4.1.1.3.1c" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS2.p2.4.m4.1.1.3.6" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.4.m4.1b"><apply id="S3.SS1.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.4.m4.1.1.1.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1">superscript</csymbol><apply id="S3.SS1.SSS2.p2.4.m4.1.1.2.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.4.m4.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.SSS2.p2.4.m4.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS2.p2.4.m4.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS2.p2.4.m4.1.1.3.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3"><times id="S3.SS1.SSS2.p2.4.m4.1.1.3.1.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.1"></times><ci id="S3.SS1.SSS2.p2.4.m4.1.1.3.2.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS2.p2.4.m4.1.1.3.3.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS2.p2.4.m4.1.1.3.4.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS2.p2.4.m4.1.1.3.5.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS2.p2.4.m4.1.1.3.6.cmml" xref="S3.SS1.SSS2.p2.4.m4.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.4.m4.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS2.p2.4.m4.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> is prompted to generate new query proposals efficiently for the next step.</p>
</div>
<figure class="ltx_table" id="S3.T2">
<p class="ltx_p ltx_align_center" id="S3.T2.7"><span class="ltx_text" id="S3.T2.7.7"><span class="ltx_text" id="S3.T2.7.7.7" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="S3.T2.7.7.7.7">
<span class="ltx_tbody">
<span class="ltx_tr" id="S3.T2.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.1.1.1.1.1.1.1">
<span class="ltx_p" id="S3.T2.1.1.1.1.1.1.1.1" style="width:204.9pt;">You are a medical expert, and you are tasked with searching for as much useful knowledge from a database of medical paper abstracts as possible to address the user’s question. The question is stated as follows: <span class="ltx_text ltx_font_bold" id="S3.T2.1.1.1.1.1.1.1.1.1">{<math alttext="Q" class="ltx_Math" display="inline" id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1a"><mi id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1.1" mathbackground="#FFF5EB" xref="S3.T2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1b"><ci id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S3.T2.1.1.1.1.1.1.1.1.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S3.T2.1.1.1.1.1.1.1.1.1.m1.1d">italic_Q</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.8.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.8.1.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.8.1.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.8.1.1.1.1" style="width:204.9pt;">You are given the BM25 retriever as the search tool. According to previous query proposals and proposals’ corresponding feedback and suggestions, give one single better query for the retriever to further search for extra information needed for answering the given question.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.9.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.9.2.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.9.2.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.9.2.1.1.1" style="width:204.9pt;">&lt;query_proposal&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.3.3.3.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.3.3.3.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.3.3.3.3.3.2.2">
<span class="ltx_p" id="S3.T2.3.3.3.3.3.2.2.2" style="width:204.9pt;">1. <span class="ltx_text ltx_font_bold" id="S3.T2.2.2.2.2.2.1.1.1.1">{<math alttext="O^{sib}_{q,1}" class="ltx_Math" display="inline" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2"><semantics id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2a"><msubsup id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.cmml"><mi id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.2" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.2.cmml">O</mi><mrow id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.4" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.3.cmml"><mi id="S3.T2.2.2.2.2.2.1.1.1.1.m1.1.1.1.1" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.1.1.1.1.cmml">q</mi><mo id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.4.1" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.3.cmml">,</mo><mn id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.2" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.2.cmml">1</mn></mrow><mrow id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.cmml"><mi id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.2.cmml">s</mi><mo id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.3.cmml">i</mi><mo id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1a" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2b"><apply id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.1.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3">subscript</csymbol><apply id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.1.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3">superscript</csymbol><ci id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.2.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.2">𝑂</ci><apply id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3"><times id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.1"></times><ci id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.2.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.2">𝑠</ci><ci id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.3.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.3">𝑖</ci><ci id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.4.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.3.2.3.4">𝑏</ci></apply></apply><list id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.3.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.4"><ci id="S3.T2.2.2.2.2.2.1.1.1.1.m1.1.1.1.1.cmml" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.1.1.1.1">𝑞</ci><cn id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.2.cmml" type="integer" xref="S3.T2.2.2.2.2.2.1.1.1.1.m1.2.2.2.2">1</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2c">O^{sib}_{q,1}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.2.2.2.2.2.1.1.1.1.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q , 1 end_POSTSUBSCRIPT</annotation></semantics></math>}</span>    Corresponding Feedback: <span class="ltx_text ltx_font_bold" id="S3.T2.3.3.3.3.3.2.2.2.2">{<math alttext="O^{sib}_{f,1}" class="ltx_Math" display="inline" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2"><semantics id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2a"><msubsup id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.cmml"><mi id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.2" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.2.cmml">O</mi><mrow id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.4" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.3.cmml"><mi id="S3.T2.3.3.3.3.3.2.2.2.2.m1.1.1.1.1" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.1.1.1.1.cmml">f</mi><mo id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.4.1" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.3.cmml">,</mo><mn id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.2" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.2.cmml">1</mn></mrow><mrow id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.cmml"><mi id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.2.cmml">s</mi><mo id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.3.cmml">i</mi><mo id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1a" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2b"><apply id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.1.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3">subscript</csymbol><apply id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.1.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3">superscript</csymbol><ci id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.2.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.2">𝑂</ci><apply id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3"><times id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.1"></times><ci id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.2.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.2">𝑠</ci><ci id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.3.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.3">𝑖</ci><ci id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.4.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.3.2.3.4">𝑏</ci></apply></apply><list id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.3.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.4"><ci id="S3.T2.3.3.3.3.3.2.2.2.2.m1.1.1.1.1.cmml" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.1.1.1.1">𝑓</ci><cn id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.2.cmml" type="integer" xref="S3.T2.3.3.3.3.3.2.2.2.2.m1.2.2.2.2">1</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2c">O^{sib}_{f,1}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.3.3.3.3.3.2.2.2.2.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f , 1 end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.10.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.10.3.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.10.3.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.10.3.1.1.1" style="width:204.9pt;">    ……</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.5.5.5.5.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.5.5.5.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.5.5.5.5.5.2.2">
<span class="ltx_p" id="S3.T2.5.5.5.5.5.2.2.2" style="width:204.9pt;">i. <span class="ltx_text ltx_font_bold" id="S3.T2.4.4.4.4.4.1.1.1.1">{<math alttext="O^{sib}_{q,i}" class="ltx_Math" display="inline" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2"><semantics id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2a"><msubsup id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.cmml"><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.2" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.2.cmml">O</mi><mrow id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.4" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.3.cmml"><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.1.1.1.1" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.1.1.1.1.cmml">q</mi><mo id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.4.1" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.3.cmml">,</mo><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.2" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.2.cmml">i</mi></mrow><mrow id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.cmml"><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.2.cmml">s</mi><mo id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.3.cmml">i</mi><mo id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1a" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2b"><apply id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.1.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3">subscript</csymbol><apply id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.1.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3">superscript</csymbol><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.2.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.2">𝑂</ci><apply id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3"><times id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.1"></times><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.2.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.2">𝑠</ci><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.3.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.3">𝑖</ci><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.4.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.3.2.3.4">𝑏</ci></apply></apply><list id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.3.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.4"><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.1.1.1.1.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.1.1.1.1">𝑞</ci><ci id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.2.cmml" xref="S3.T2.4.4.4.4.4.1.1.1.1.m1.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2c">O^{sib}_{q,i}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.4.4.4.4.4.1.1.1.1.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q , italic_i end_POSTSUBSCRIPT</annotation></semantics></math>}</span>     Corresponding Feedback: <span class="ltx_text ltx_font_bold" id="S3.T2.5.5.5.5.5.2.2.2.2">{<math alttext="O^{sib}_{f,i}" class="ltx_Math" display="inline" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2"><semantics id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2a"><msubsup id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.cmml"><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.2" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.2.cmml">O</mi><mrow id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.4" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.3.cmml"><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.1.1.1.1" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.1.1.1.1.cmml">f</mi><mo id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.4.1" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.3.cmml">,</mo><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.2" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.2.cmml">i</mi></mrow><mrow id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.cmml"><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.2.cmml">s</mi><mo id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.3.cmml">i</mi><mo id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1a" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1.cmml">⁢</mo><mi id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2b"><apply id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.1.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3">subscript</csymbol><apply id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3"><csymbol cd="ambiguous" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.1.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3">superscript</csymbol><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.2.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.2">𝑂</ci><apply id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3"><times id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.1"></times><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.2.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.2">𝑠</ci><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.3.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.3">𝑖</ci><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.4.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.3.2.3.4">𝑏</ci></apply></apply><list id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.3.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.4"><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.1.1.1.1.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.1.1.1.1">𝑓</ci><ci id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.2.cmml" xref="S3.T2.5.5.5.5.5.2.2.2.2.m1.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2c">O^{sib}_{f,i}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.5.5.5.5.5.2.2.2.2.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f , italic_i end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.11.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.11.4.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.11.4.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.11.4.1.1.1" style="width:204.9pt;">&lt;/query_proposal&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.12.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.12.5.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.12.5.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.12.5.1.1.1" style="width:204.9pt;">Information already known is as follows:&lt;retrieved_info&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.6.6.6.6.6">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.6.6.6.6.6.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.6.6.6.6.6.1.1">
<span class="ltx_p" id="S3.T2.6.6.6.6.6.1.1.1" style="width:204.9pt;">    Query and its reasoning for Abstracts: <span class="ltx_text ltx_font_bold" id="S3.T2.6.6.6.6.6.1.1.1.1">{<math alttext="O^{anc}_{q}" class="ltx_Math" display="inline" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1"><semantics id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1a"><msubsup id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.cmml"><mi id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.2" mathbackground="#FFF5EB" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.2.cmml">O</mi><mi id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.3" mathbackground="#FFF5EB" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.3.cmml">q</mi><mrow id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.cmml"><mi id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.2.cmml">a</mi><mo id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.3.cmml">n</mi><mo id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1a" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1b"><apply id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.1.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1">subscript</csymbol><apply id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.1.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1">superscript</csymbol><ci id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.2.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.2">𝑂</ci><apply id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3"><times id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.1"></times><ci id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.2.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.2">𝑎</ci><ci id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.3.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.3">𝑛</ci><ci id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.4.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.3.cmml" xref="S3.T2.6.6.6.6.6.1.1.1.1.m1.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1c">O^{anc}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.6.6.6.6.6.1.1.1.1.m1.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.7">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.7.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.7.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.7.1.1.1" style="width:204.9pt;">    Retrieved Abstracts: <span class="ltx_text ltx_font_bold" id="S3.T2.7.7.7.7.7.1.1.1.1">{<math alttext="O^{anc}_{d}" class="ltx_Math" display="inline" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1"><semantics id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1a"><msubsup id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.cmml"><mi id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.2" mathbackground="#FFF5EB" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.2.cmml">O</mi><mi id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.3" mathbackground="#FFF5EB" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.3.cmml">d</mi><mrow id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.cmml"><mi id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.2" mathbackground="#FFF5EB" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.2.cmml">a</mi><mo id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.3" mathbackground="#FFF5EB" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.3.cmml">n</mi><mo id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1a" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.4" mathbackground="#FFF5EB" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1b"><apply id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.1.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1">subscript</csymbol><apply id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.1.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1">superscript</csymbol><ci id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.2.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.2">𝑂</ci><apply id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3"><times id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.1"></times><ci id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.2.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.2">𝑎</ci><ci id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.3.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.3">𝑛</ci><ci id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.4.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.3.cmml" xref="S3.T2.7.7.7.7.7.1.1.1.1.m1.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1c">O^{anc}_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.7.7.7.7.7.1.1.1.1.m1.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.13.6">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.13.6.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.13.6.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.13.6.1.1.1" style="width:204.9pt;">&lt;/retrieved_info&gt;</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.14.7">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.14.7.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.14.7.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.14.7.1.1.1" style="width:204.9pt;">After examining the information above, justify your decision, in up to 100 words.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.15.8">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.15.8.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.15.8.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.15.8.1.1.1" style="width:204.9pt;">Hints:</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.16.9">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.16.9.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.16.9.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.16.9.1.1.1" style="width:204.9pt;">1. Use simple keywords as queries if no information is retrieved.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.17.10">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.17.10.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.17.10.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.17.10.1.1.1" style="width:204.9pt;">2. You can take one step at a time, subdivide the original question, and search for information on the sub-questions.</span>
</span></span></span>
<span class="ltx_tr" id="S3.T2.7.7.7.7.18.11">
<span class="ltx_td ltx_align_justify ltx_align_top" id="S3.T2.7.7.7.7.18.11.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T2.7.7.7.7.18.11.1.1">
<span class="ltx_p" id="S3.T2.7.7.7.7.18.11.1.1.1" style="width:204.9pt;">Conclude with the query for the paper abstracts using the format: "&lt;query&gt; Query Here &lt;/query&gt;".</span>
</span></span></span>
</span>
</span></span></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Prompt for Query Proposer <math alttext="P^{query}_{\theta}" class="ltx_Math" display="inline" id="S3.T2.9.m1.1"><semantics id="S3.T2.9.m1.1b"><msubsup id="S3.T2.9.m1.1.1" xref="S3.T2.9.m1.1.1.cmml"><mi id="S3.T2.9.m1.1.1.2.2" xref="S3.T2.9.m1.1.1.2.2.cmml">P</mi><mi id="S3.T2.9.m1.1.1.3" xref="S3.T2.9.m1.1.1.3.cmml">θ</mi><mrow id="S3.T2.9.m1.1.1.2.3" xref="S3.T2.9.m1.1.1.2.3.cmml"><mi id="S3.T2.9.m1.1.1.2.3.2" xref="S3.T2.9.m1.1.1.2.3.2.cmml">q</mi><mo id="S3.T2.9.m1.1.1.2.3.1" xref="S3.T2.9.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.9.m1.1.1.2.3.3" xref="S3.T2.9.m1.1.1.2.3.3.cmml">u</mi><mo id="S3.T2.9.m1.1.1.2.3.1b" xref="S3.T2.9.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.9.m1.1.1.2.3.4" xref="S3.T2.9.m1.1.1.2.3.4.cmml">e</mi><mo id="S3.T2.9.m1.1.1.2.3.1c" xref="S3.T2.9.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.9.m1.1.1.2.3.5" xref="S3.T2.9.m1.1.1.2.3.5.cmml">r</mi><mo id="S3.T2.9.m1.1.1.2.3.1d" xref="S3.T2.9.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.T2.9.m1.1.1.2.3.6" xref="S3.T2.9.m1.1.1.2.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.T2.9.m1.1c"><apply id="S3.T2.9.m1.1.1.cmml" xref="S3.T2.9.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.9.m1.1.1.1.cmml" xref="S3.T2.9.m1.1.1">subscript</csymbol><apply id="S3.T2.9.m1.1.1.2.cmml" xref="S3.T2.9.m1.1.1"><csymbol cd="ambiguous" id="S3.T2.9.m1.1.1.2.1.cmml" xref="S3.T2.9.m1.1.1">superscript</csymbol><ci id="S3.T2.9.m1.1.1.2.2.cmml" xref="S3.T2.9.m1.1.1.2.2">𝑃</ci><apply id="S3.T2.9.m1.1.1.2.3.cmml" xref="S3.T2.9.m1.1.1.2.3"><times id="S3.T2.9.m1.1.1.2.3.1.cmml" xref="S3.T2.9.m1.1.1.2.3.1"></times><ci id="S3.T2.9.m1.1.1.2.3.2.cmml" xref="S3.T2.9.m1.1.1.2.3.2">𝑞</ci><ci id="S3.T2.9.m1.1.1.2.3.3.cmml" xref="S3.T2.9.m1.1.1.2.3.3">𝑢</ci><ci id="S3.T2.9.m1.1.1.2.3.4.cmml" xref="S3.T2.9.m1.1.1.2.3.4">𝑒</ci><ci id="S3.T2.9.m1.1.1.2.3.5.cmml" xref="S3.T2.9.m1.1.1.2.3.5">𝑟</ci><ci id="S3.T2.9.m1.1.1.2.3.6.cmml" xref="S3.T2.9.m1.1.1.2.3.6">𝑦</ci></apply></apply><ci id="S3.T2.9.m1.1.1.3.cmml" xref="S3.T2.9.m1.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.9.m1.1d">P^{query}_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.T2.9.m1.1e">italic_P start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math>.</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S3.SS1.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.1.3 </span>Monte Carlo Tree Search Process</h4>
<figure class="ltx_figure" id="S3.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="343" id="S3.F3.g1" src="x3.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Overview of the four operations in MCTS</figcaption>
</figure>
<div class="ltx_para" id="S3.SS1.SSS3.p1">
<p class="ltx_p" id="S3.SS1.SSS3.p1.2">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.F3" title="Figure 3 ‣ 3.1.3 Monte Carlo Tree Search Process ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">3</span></a>, using the <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS3.p1.2.2">Query Proposer</span> <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p1.1.m1.1"><semantics id="S3.SS1.SSS3.p1.1.m1.1a"><msubsup id="S3.SS1.SSS3.p1.1.m1.1.1" xref="S3.SS1.SSS3.p1.1.m1.1.1.cmml"><mi id="S3.SS1.SSS3.p1.1.m1.1.1.2.2" xref="S3.SS1.SSS3.p1.1.m1.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.p1.1.m1.1.1.2.3" xref="S3.SS1.SSS3.p1.1.m1.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.p1.1.m1.1.1.3" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.cmml"><mi id="S3.SS1.SSS3.p1.1.m1.1.1.3.2" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS3.p1.1.m1.1.1.3.1" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.1.m1.1.1.3.3" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS3.p1.1.m1.1.1.3.1a" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.1.m1.1.1.3.4" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS3.p1.1.m1.1.1.3.1b" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.1.m1.1.1.3.5" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS3.p1.1.m1.1.1.3.1c" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.1.m1.1.1.3.6" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p1.1.m1.1b"><apply id="S3.SS1.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.1.m1.1.1.2.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.p1.1.m1.1.1.2.2.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.p1.1.m1.1.1.2.3.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3"><times id="S3.SS1.SSS3.p1.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.1"></times><ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.4.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.5.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.6.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.p1.1.m1.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.p1.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> and the <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS3.p1.2.1">Result Evaluator<math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p1.2.1.m1.1"><semantics id="S3.SS1.SSS3.p1.2.1.m1.1a"><msubsup id="S3.SS1.SSS3.p1.2.1.m1.1.1" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.cmml"><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.2" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.3" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.p1.2.1.m1.1.1.3" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.cmml"><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.2" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.2.cmml">e</mi><mo id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.3" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.3.cmml">v</mi><mo id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1a" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.4" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.4.cmml">a</mi><mo id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1b" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.5" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p1.2.1.m1.1b"><apply id="S3.SS1.SSS3.p1.2.1.m1.1.1.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.2.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.1.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.2.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.2.3.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3"><times id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.1"></times><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.2">𝑒</ci><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.3">𝑣</ci><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.4.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.4">𝑎</ci><ci id="S3.SS1.SSS3.p1.2.1.m1.1.1.3.5.cmml" xref="S3.SS1.SSS3.p1.2.1.m1.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.p1.2.1.m1.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.p1.2.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math></span>, SeRTS iteratively performs <span class="ltx_text ltx_font_italic" id="S3.SS1.SSS3.p1.2.3">Selection</span>, <span class="ltx_text ltx_font_italic" id="S3.SS1.SSS3.p1.2.4">Expansion</span>, <span class="ltx_text ltx_font_italic" id="S3.SS1.SSS3.p1.2.5">Evaluation</span>, and <span class="ltx_text ltx_font_italic" id="S3.SS1.SSS3.p1.2.6">Backpropagation</span> until it finds a good enough query result or a computational limit is reached. The full pseudocode is provided in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#footnote1" title="footnote 1 ‣ C.2 Self-Rewarding Tree Search (SeRTS) ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<section class="ltx_paragraph" id="S3.SS1.SSS3.Px1">
<h5 class="ltx_title ltx_title_paragraph">Selection.</h5>
<div class="ltx_para" id="S3.SS1.SSS3.Px1.p1">
<p class="ltx_p" id="S3.SS1.SSS3.Px1.p1.1">In the first operation, the algorithm selects the most promising leaf node for expansion, starting from the root node (initial state <math alttext="s_{0}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.1.m1.1"><semantics id="S3.SS1.SSS3.Px1.p1.1.m1.1a"><msub id="S3.SS1.SSS3.Px1.p1.1.m1.1.1" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1.cmml"><mi id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.2" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1.2.cmml">s</mi><mn id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.3" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.1.m1.1b"><apply id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1.2">𝑠</ci><cn id="S3.SS1.SSS3.Px1.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.SSS3.Px1.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.1.m1.1c">s_{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.1.m1.1d">italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>). The Upper Confidence Bounds (UCB) is used to balance exploration and exploitation during node selection:</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E1">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E1X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle UCB(s)=\frac{R(s)}{N(s)}+C*\sqrt{2*\ln\frac{N(p)}{N(s)}}" class="ltx_Math" display="inline" id="S3.E1X.2.1.1.m1.5"><semantics id="S3.E1X.2.1.1.m1.5a"><mrow id="S3.E1X.2.1.1.m1.5.6" xref="S3.E1X.2.1.1.m1.5.6.cmml"><mrow id="S3.E1X.2.1.1.m1.5.6.2" xref="S3.E1X.2.1.1.m1.5.6.2.cmml"><mi id="S3.E1X.2.1.1.m1.5.6.2.2" xref="S3.E1X.2.1.1.m1.5.6.2.2.cmml">U</mi><mo id="S3.E1X.2.1.1.m1.5.6.2.1" xref="S3.E1X.2.1.1.m1.5.6.2.1.cmml">⁢</mo><mi id="S3.E1X.2.1.1.m1.5.6.2.3" xref="S3.E1X.2.1.1.m1.5.6.2.3.cmml">C</mi><mo id="S3.E1X.2.1.1.m1.5.6.2.1a" xref="S3.E1X.2.1.1.m1.5.6.2.1.cmml">⁢</mo><mi id="S3.E1X.2.1.1.m1.5.6.2.4" xref="S3.E1X.2.1.1.m1.5.6.2.4.cmml">B</mi><mo id="S3.E1X.2.1.1.m1.5.6.2.1b" xref="S3.E1X.2.1.1.m1.5.6.2.1.cmml">⁢</mo><mrow id="S3.E1X.2.1.1.m1.5.6.2.5.2" xref="S3.E1X.2.1.1.m1.5.6.2.cmml"><mo id="S3.E1X.2.1.1.m1.5.6.2.5.2.1" stretchy="false" xref="S3.E1X.2.1.1.m1.5.6.2.cmml">(</mo><mi id="S3.E1X.2.1.1.m1.5.5" xref="S3.E1X.2.1.1.m1.5.5.cmml">s</mi><mo id="S3.E1X.2.1.1.m1.5.6.2.5.2.2" stretchy="false" xref="S3.E1X.2.1.1.m1.5.6.2.cmml">)</mo></mrow></mrow><mo id="S3.E1X.2.1.1.m1.5.6.1" xref="S3.E1X.2.1.1.m1.5.6.1.cmml">=</mo><mrow id="S3.E1X.2.1.1.m1.5.6.3" xref="S3.E1X.2.1.1.m1.5.6.3.cmml"><mstyle displaystyle="true" id="S3.E1X.2.1.1.m1.2.2" xref="S3.E1X.2.1.1.m1.2.2.cmml"><mfrac id="S3.E1X.2.1.1.m1.2.2a" xref="S3.E1X.2.1.1.m1.2.2.cmml"><mrow id="S3.E1X.2.1.1.m1.1.1.1" xref="S3.E1X.2.1.1.m1.1.1.1.cmml"><mi id="S3.E1X.2.1.1.m1.1.1.1.3" xref="S3.E1X.2.1.1.m1.1.1.1.3.cmml">R</mi><mo id="S3.E1X.2.1.1.m1.1.1.1.2" xref="S3.E1X.2.1.1.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1X.2.1.1.m1.1.1.1.4.2" xref="S3.E1X.2.1.1.m1.1.1.1.cmml"><mo id="S3.E1X.2.1.1.m1.1.1.1.4.2.1" stretchy="false" xref="S3.E1X.2.1.1.m1.1.1.1.cmml">(</mo><mi id="S3.E1X.2.1.1.m1.1.1.1.1" xref="S3.E1X.2.1.1.m1.1.1.1.1.cmml">s</mi><mo id="S3.E1X.2.1.1.m1.1.1.1.4.2.2" stretchy="false" xref="S3.E1X.2.1.1.m1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E1X.2.1.1.m1.2.2.2" xref="S3.E1X.2.1.1.m1.2.2.2.cmml"><mi id="S3.E1X.2.1.1.m1.2.2.2.3" xref="S3.E1X.2.1.1.m1.2.2.2.3.cmml">N</mi><mo id="S3.E1X.2.1.1.m1.2.2.2.2" xref="S3.E1X.2.1.1.m1.2.2.2.2.cmml">⁢</mo><mrow id="S3.E1X.2.1.1.m1.2.2.2.4.2" xref="S3.E1X.2.1.1.m1.2.2.2.cmml"><mo id="S3.E1X.2.1.1.m1.2.2.2.4.2.1" stretchy="false" xref="S3.E1X.2.1.1.m1.2.2.2.cmml">(</mo><mi id="S3.E1X.2.1.1.m1.2.2.2.1" xref="S3.E1X.2.1.1.m1.2.2.2.1.cmml">s</mi><mo id="S3.E1X.2.1.1.m1.2.2.2.4.2.2" stretchy="false" xref="S3.E1X.2.1.1.m1.2.2.2.cmml">)</mo></mrow></mrow></mfrac></mstyle><mo id="S3.E1X.2.1.1.m1.5.6.3.1" xref="S3.E1X.2.1.1.m1.5.6.3.1.cmml">+</mo><mrow id="S3.E1X.2.1.1.m1.5.6.3.2" xref="S3.E1X.2.1.1.m1.5.6.3.2.cmml"><mi id="S3.E1X.2.1.1.m1.5.6.3.2.2" xref="S3.E1X.2.1.1.m1.5.6.3.2.2.cmml">C</mi><mo id="S3.E1X.2.1.1.m1.5.6.3.2.1" lspace="0.222em" rspace="0.222em" xref="S3.E1X.2.1.1.m1.5.6.3.2.1.cmml">∗</mo><msqrt id="S3.E1X.2.1.1.m1.4.4" xref="S3.E1X.2.1.1.m1.4.4.cmml"><mrow id="S3.E1X.2.1.1.m1.4.4.2" xref="S3.E1X.2.1.1.m1.4.4.2.cmml"><mn id="S3.E1X.2.1.1.m1.4.4.2.4" xref="S3.E1X.2.1.1.m1.4.4.2.4.cmml">2</mn><mo id="S3.E1X.2.1.1.m1.4.4.2.3" lspace="0.222em" rspace="0.222em" xref="S3.E1X.2.1.1.m1.4.4.2.3.cmml">∗</mo><mrow id="S3.E1X.2.1.1.m1.4.4.2.5" xref="S3.E1X.2.1.1.m1.4.4.2.5.cmml"><mi id="S3.E1X.2.1.1.m1.4.4.2.5.1" xref="S3.E1X.2.1.1.m1.4.4.2.5.1.cmml">ln</mi><mo id="S3.E1X.2.1.1.m1.4.4.2.5a" lspace="0.167em" xref="S3.E1X.2.1.1.m1.4.4.2.5.cmml">⁡</mo><mstyle displaystyle="true" id="S3.E1X.2.1.1.m1.4.4.2.2" xref="S3.E1X.2.1.1.m1.4.4.2.2.cmml"><mfrac id="S3.E1X.2.1.1.m1.4.4.2.2a" xref="S3.E1X.2.1.1.m1.4.4.2.2.cmml"><mrow id="S3.E1X.2.1.1.m1.3.3.1.1.1" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.cmml"><mi id="S3.E1X.2.1.1.m1.3.3.1.1.1.3" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.3.cmml">N</mi><mo id="S3.E1X.2.1.1.m1.3.3.1.1.1.2" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1X.2.1.1.m1.3.3.1.1.1.4.2" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.cmml"><mo id="S3.E1X.2.1.1.m1.3.3.1.1.1.4.2.1" stretchy="false" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.cmml">(</mo><mi id="S3.E1X.2.1.1.m1.3.3.1.1.1.1" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.1.cmml">p</mi><mo id="S3.E1X.2.1.1.m1.3.3.1.1.1.4.2.2" stretchy="false" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E1X.2.1.1.m1.4.4.2.2.2" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.cmml"><mi id="S3.E1X.2.1.1.m1.4.4.2.2.2.3" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.3.cmml">N</mi><mo id="S3.E1X.2.1.1.m1.4.4.2.2.2.2" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.2.cmml">⁢</mo><mrow id="S3.E1X.2.1.1.m1.4.4.2.2.2.4.2" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.cmml"><mo id="S3.E1X.2.1.1.m1.4.4.2.2.2.4.2.1" stretchy="false" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.cmml">(</mo><mi id="S3.E1X.2.1.1.m1.4.4.2.2.2.1" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.1.cmml">s</mi><mo id="S3.E1X.2.1.1.m1.4.4.2.2.2.4.2.2" stretchy="false" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.cmml">)</mo></mrow></mrow></mfrac></mstyle></mrow></mrow></msqrt></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1X.2.1.1.m1.5b"><apply id="S3.E1X.2.1.1.m1.5.6.cmml" xref="S3.E1X.2.1.1.m1.5.6"><eq id="S3.E1X.2.1.1.m1.5.6.1.cmml" xref="S3.E1X.2.1.1.m1.5.6.1"></eq><apply id="S3.E1X.2.1.1.m1.5.6.2.cmml" xref="S3.E1X.2.1.1.m1.5.6.2"><times id="S3.E1X.2.1.1.m1.5.6.2.1.cmml" xref="S3.E1X.2.1.1.m1.5.6.2.1"></times><ci id="S3.E1X.2.1.1.m1.5.6.2.2.cmml" xref="S3.E1X.2.1.1.m1.5.6.2.2">𝑈</ci><ci id="S3.E1X.2.1.1.m1.5.6.2.3.cmml" xref="S3.E1X.2.1.1.m1.5.6.2.3">𝐶</ci><ci id="S3.E1X.2.1.1.m1.5.6.2.4.cmml" xref="S3.E1X.2.1.1.m1.5.6.2.4">𝐵</ci><ci id="S3.E1X.2.1.1.m1.5.5.cmml" xref="S3.E1X.2.1.1.m1.5.5">𝑠</ci></apply><apply id="S3.E1X.2.1.1.m1.5.6.3.cmml" xref="S3.E1X.2.1.1.m1.5.6.3"><plus id="S3.E1X.2.1.1.m1.5.6.3.1.cmml" xref="S3.E1X.2.1.1.m1.5.6.3.1"></plus><apply id="S3.E1X.2.1.1.m1.2.2.cmml" xref="S3.E1X.2.1.1.m1.2.2"><divide id="S3.E1X.2.1.1.m1.2.2.3.cmml" xref="S3.E1X.2.1.1.m1.2.2"></divide><apply id="S3.E1X.2.1.1.m1.1.1.1.cmml" xref="S3.E1X.2.1.1.m1.1.1.1"><times id="S3.E1X.2.1.1.m1.1.1.1.2.cmml" xref="S3.E1X.2.1.1.m1.1.1.1.2"></times><ci id="S3.E1X.2.1.1.m1.1.1.1.3.cmml" xref="S3.E1X.2.1.1.m1.1.1.1.3">𝑅</ci><ci id="S3.E1X.2.1.1.m1.1.1.1.1.cmml" xref="S3.E1X.2.1.1.m1.1.1.1.1">𝑠</ci></apply><apply id="S3.E1X.2.1.1.m1.2.2.2.cmml" xref="S3.E1X.2.1.1.m1.2.2.2"><times id="S3.E1X.2.1.1.m1.2.2.2.2.cmml" xref="S3.E1X.2.1.1.m1.2.2.2.2"></times><ci id="S3.E1X.2.1.1.m1.2.2.2.3.cmml" xref="S3.E1X.2.1.1.m1.2.2.2.3">𝑁</ci><ci id="S3.E1X.2.1.1.m1.2.2.2.1.cmml" xref="S3.E1X.2.1.1.m1.2.2.2.1">𝑠</ci></apply></apply><apply id="S3.E1X.2.1.1.m1.5.6.3.2.cmml" xref="S3.E1X.2.1.1.m1.5.6.3.2"><times id="S3.E1X.2.1.1.m1.5.6.3.2.1.cmml" xref="S3.E1X.2.1.1.m1.5.6.3.2.1"></times><ci id="S3.E1X.2.1.1.m1.5.6.3.2.2.cmml" xref="S3.E1X.2.1.1.m1.5.6.3.2.2">𝐶</ci><apply id="S3.E1X.2.1.1.m1.4.4.cmml" xref="S3.E1X.2.1.1.m1.4.4"><root id="S3.E1X.2.1.1.m1.4.4a.cmml" xref="S3.E1X.2.1.1.m1.4.4"></root><apply id="S3.E1X.2.1.1.m1.4.4.2.cmml" xref="S3.E1X.2.1.1.m1.4.4.2"><times id="S3.E1X.2.1.1.m1.4.4.2.3.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.3"></times><cn id="S3.E1X.2.1.1.m1.4.4.2.4.cmml" type="integer" xref="S3.E1X.2.1.1.m1.4.4.2.4">2</cn><apply id="S3.E1X.2.1.1.m1.4.4.2.5.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.5"><ln id="S3.E1X.2.1.1.m1.4.4.2.5.1.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.5.1"></ln><apply id="S3.E1X.2.1.1.m1.4.4.2.2.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2"><divide id="S3.E1X.2.1.1.m1.4.4.2.2.3.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2"></divide><apply id="S3.E1X.2.1.1.m1.3.3.1.1.1.cmml" xref="S3.E1X.2.1.1.m1.3.3.1.1.1"><times id="S3.E1X.2.1.1.m1.3.3.1.1.1.2.cmml" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.2"></times><ci id="S3.E1X.2.1.1.m1.3.3.1.1.1.3.cmml" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.3">𝑁</ci><ci id="S3.E1X.2.1.1.m1.3.3.1.1.1.1.cmml" xref="S3.E1X.2.1.1.m1.3.3.1.1.1.1">𝑝</ci></apply><apply id="S3.E1X.2.1.1.m1.4.4.2.2.2.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2.2"><times id="S3.E1X.2.1.1.m1.4.4.2.2.2.2.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.2"></times><ci id="S3.E1X.2.1.1.m1.4.4.2.2.2.3.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.3">𝑁</ci><ci id="S3.E1X.2.1.1.m1.4.4.2.2.2.1.cmml" xref="S3.E1X.2.1.1.m1.4.4.2.2.2.1">𝑠</ci></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1X.2.1.1.m1.5c">\displaystyle UCB(s)=\frac{R(s)}{N(s)}+C*\sqrt{2*\ln\frac{N(p)}{N(s)}}</annotation><annotation encoding="application/x-llamapun" id="S3.E1X.2.1.1.m1.5d">italic_U italic_C italic_B ( italic_s ) = divide start_ARG italic_R ( italic_s ) end_ARG start_ARG italic_N ( italic_s ) end_ARG + italic_C ∗ square-root start_ARG 2 ∗ roman_ln divide start_ARG italic_N ( italic_p ) end_ARG start_ARG italic_N ( italic_s ) end_ARG end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(1)</span></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="S3.SS1.SSS3.Px1.p1.8">, where <math alttext="N(s)" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.2.m1.1"><semantics id="S3.SS1.SSS3.Px1.p1.2.m1.1a"><mrow id="S3.SS1.SSS3.Px1.p1.2.m1.1.2" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.cmml"><mi id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.2" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.2.cmml">N</mi><mo id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.1" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.1.cmml">⁢</mo><mrow id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.3.2" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.cmml"><mo id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.3.2.1" stretchy="false" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.cmml">(</mo><mi id="S3.SS1.SSS3.Px1.p1.2.m1.1.1" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.1.cmml">s</mi><mo id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.3.2.2" stretchy="false" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.2.m1.1b"><apply id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.cmml" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2"><times id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.1.cmml" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.1"></times><ci id="S3.SS1.SSS3.Px1.p1.2.m1.1.2.2.cmml" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.2.2">𝑁</ci><ci id="S3.SS1.SSS3.Px1.p1.2.m1.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.2.m1.1.1">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.2.m1.1c">N(s)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.2.m1.1d">italic_N ( italic_s )</annotation></semantics></math> is the number of visits to a node <math alttext="s" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.3.m2.1"><semantics id="S3.SS1.SSS3.Px1.p1.3.m2.1a"><mi id="S3.SS1.SSS3.Px1.p1.3.m2.1.1" xref="S3.SS1.SSS3.Px1.p1.3.m2.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.3.m2.1b"><ci id="S3.SS1.SSS3.Px1.p1.3.m2.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.3.m2.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.3.m2.1c">s</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.3.m2.1d">italic_s</annotation></semantics></math>, <math alttext="R(s)" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.4.m3.1"><semantics id="S3.SS1.SSS3.Px1.p1.4.m3.1a"><mrow id="S3.SS1.SSS3.Px1.p1.4.m3.1.2" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.cmml"><mi id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.2" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.2.cmml">R</mi><mo id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.1" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.1.cmml">⁢</mo><mrow id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.3.2" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.cmml"><mo id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.3.2.1" stretchy="false" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.cmml">(</mo><mi id="S3.SS1.SSS3.Px1.p1.4.m3.1.1" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.1.cmml">s</mi><mo id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.3.2.2" stretchy="false" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.4.m3.1b"><apply id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.cmml" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2"><times id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.1.cmml" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.1"></times><ci id="S3.SS1.SSS3.Px1.p1.4.m3.1.2.2.cmml" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.2.2">𝑅</ci><ci id="S3.SS1.SSS3.Px1.p1.4.m3.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.4.m3.1.1">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.4.m3.1c">R(s)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.4.m3.1d">italic_R ( italic_s )</annotation></semantics></math> is the reward assigned to <math alttext="s" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.5.m4.1"><semantics id="S3.SS1.SSS3.Px1.p1.5.m4.1a"><mi id="S3.SS1.SSS3.Px1.p1.5.m4.1.1" xref="S3.SS1.SSS3.Px1.p1.5.m4.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.5.m4.1b"><ci id="S3.SS1.SSS3.Px1.p1.5.m4.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.5.m4.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.5.m4.1c">s</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.5.m4.1d">italic_s</annotation></semantics></math>, and <math alttext="p" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.6.m5.1"><semantics id="S3.SS1.SSS3.Px1.p1.6.m5.1a"><mi id="S3.SS1.SSS3.Px1.p1.6.m5.1.1" xref="S3.SS1.SSS3.Px1.p1.6.m5.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.6.m5.1b"><ci id="S3.SS1.SSS3.Px1.p1.6.m5.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.6.m5.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.6.m5.1c">p</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.6.m5.1d">italic_p</annotation></semantics></math> is the parent node of <math alttext="s" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.7.m6.1"><semantics id="S3.SS1.SSS3.Px1.p1.7.m6.1a"><mi id="S3.SS1.SSS3.Px1.p1.7.m6.1.1" xref="S3.SS1.SSS3.Px1.p1.7.m6.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.7.m6.1b"><ci id="S3.SS1.SSS3.Px1.p1.7.m6.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.7.m6.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.7.m6.1c">s</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.7.m6.1d">italic_s</annotation></semantics></math>. At each level, the child node with the highest UCT value is selected. The <math alttext="C" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px1.p1.8.m7.1"><semantics id="S3.SS1.SSS3.Px1.p1.8.m7.1a"><mi id="S3.SS1.SSS3.Px1.p1.8.m7.1.1" xref="S3.SS1.SSS3.Px1.p1.8.m7.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px1.p1.8.m7.1b"><ci id="S3.SS1.SSS3.Px1.p1.8.m7.1.1.cmml" xref="S3.SS1.SSS3.Px1.p1.8.m7.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px1.p1.8.m7.1c">C</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px1.p1.8.m7.1d">italic_C</annotation></semantics></math> parameter balances exploration and exploitation.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS3.Px2">
<h5 class="ltx_title ltx_title_paragraph">Expansion.</h5>
<div class="ltx_para" id="S3.SS1.SSS3.Px2.p1">
<p class="ltx_p" id="S3.SS1.SSS3.Px2.p1.8">The selected node is expanded by sampling <math alttext="n" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.1.m1.1"><semantics id="S3.SS1.SSS3.Px2.p1.1.m1.1a"><mi id="S3.SS1.SSS3.Px2.p1.1.m1.1.1" xref="S3.SS1.SSS3.Px2.p1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.1.m1.1b"><ci id="S3.SS1.SSS3.Px2.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.1.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.1.m1.1d">italic_n</annotation></semantics></math> query proposals from <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.2.m2.1"><semantics id="S3.SS1.SSS3.Px2.p1.2.m2.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.2.m2.1.1" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.2" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.3" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1a" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.4" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1b" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.5" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1c" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.6" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.2.m2.1b"><apply id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3"><times id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.5.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.6.cmml" xref="S3.SS1.SSS3.Px2.p1.2.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.2.m2.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.2.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math>. The expansion is performed in a self-reflection manner to deal with the vast search space. All feedback <math alttext="O^{sib}_{f}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.3.m3.1"><semantics id="S3.SS1.SSS3.Px2.p1.3.m3.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.3.m3.1.1" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.2.cmml">O</mi><mi id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.3" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.3.cmml">f</mi><mrow id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.2" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.2.cmml">s</mi><mo id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.3" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.3.cmml">i</mi><mo id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1a" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.4" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.3.m3.1b"><apply id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1">subscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.2">𝑂</ci><apply id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3"><times id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.2">𝑠</ci><ci id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.3">𝑖</ci><ci id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.2.3.4">𝑏</ci></apply></apply><ci id="S3.SS1.SSS3.Px2.p1.3.m3.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.3.m3.1.1.3">𝑓</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.3.m3.1c">O^{sib}_{f}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.3.m3.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.4.m4.1"><semantics id="S3.SS1.SSS3.Px2.p1.4.m4.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.4.m4.1.1" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.2" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.2.cmml">e</mi><mo id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.3" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.3.cmml">v</mi><mo id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1a" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.4" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.4.cmml">a</mi><mo id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1b" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.5" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.4.m4.1b"><apply id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3"><times id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.2">𝑒</ci><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.3">𝑣</ci><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.4">𝑎</ci><ci id="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.5.cmml" xref="S3.SS1.SSS3.Px2.p1.4.m4.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.4.m4.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.4.m4.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>, along with all the history of query proposals <math alttext="O^{sib}_{q}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.5.m5.1"><semantics id="S3.SS1.SSS3.Px2.p1.5.m5.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.5.m5.1.1" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.2.cmml">O</mi><mi id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.3" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.3.cmml">q</mi><mrow id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.2" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.2.cmml">s</mi><mo id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.3" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.3.cmml">i</mi><mo id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1a" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.4" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.5.m5.1b"><apply id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1">subscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.2">𝑂</ci><apply id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3"><times id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.2">𝑠</ci><ci id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.3">𝑖</ci><ci id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.2.3.4">𝑏</ci></apply></apply><ci id="S3.SS1.SSS3.Px2.p1.5.m5.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.5.m5.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.5.m5.1c">O^{sib}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.5.m5.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> from sibling nodes, as well as retrieved documents <math alttext="O^{anc}_{d}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.6.m6.1"><semantics id="S3.SS1.SSS3.Px2.p1.6.m6.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.6.m6.1.1" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.2.cmml">O</mi><mi id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.3" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.3.cmml">d</mi><mrow id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.2" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.2.cmml">a</mi><mo id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.3" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.3.cmml">n</mi><mo id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1a" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.4" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.6.m6.1b"><apply id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1">subscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.2">𝑂</ci><apply id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3"><times id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.2">𝑎</ci><ci id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.3">𝑛</ci><ci id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.2.3.4">𝑐</ci></apply></apply><ci id="S3.SS1.SSS3.Px2.p1.6.m6.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.6.m6.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.6.m6.1c">O^{anc}_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.6.m6.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> and query proposals <math alttext="O^{anc}_{q}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.7.m7.1"><semantics id="S3.SS1.SSS3.Px2.p1.7.m7.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.7.m7.1.1" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.2.cmml">O</mi><mi id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.3" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.3.cmml">q</mi><mrow id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.2" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.2.cmml">a</mi><mo id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.3" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.3.cmml">n</mi><mo id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1a" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.4" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.7.m7.1b"><apply id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1">subscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.2">𝑂</ci><apply id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3"><times id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.2">𝑎</ci><ci id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.3">𝑛</ci><ci id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.2.3.4">𝑐</ci></apply></apply><ci id="S3.SS1.SSS3.Px2.p1.7.m7.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.7.m7.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.7.m7.1c">O^{anc}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.7.m7.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> from all the ancestor nodes, are fed into <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px2.p1.8.m8.1"><semantics id="S3.SS1.SSS3.Px2.p1.8.m8.1a"><msubsup id="S3.SS1.SSS3.Px2.p1.8.m8.1.1" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.cmml"><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.2" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.3" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.cmml"><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.2" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.2.cmml">q</mi><mo id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.3" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.3.cmml">u</mi><mo id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1a" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.4" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.4.cmml">e</mi><mo id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1b" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.5" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.5.cmml">r</mi><mo id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1c" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.6" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px2.p1.8.m8.1b"><apply id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.1.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3"><times id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.1"></times><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.2.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.2">𝑞</ci><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.3.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.3">𝑢</ci><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.4.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.4">𝑒</ci><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.5.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.5">𝑟</ci><ci id="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.6.cmml" xref="S3.SS1.SSS3.Px2.p1.8.m8.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px2.p1.8.m8.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px2.p1.8.m8.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> as reflection material as shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T2" title="Table 2 ‣ 3.1.2 Query Proposer for Efficiently Searching ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a>. This practice ensures diverse reasoning by expanding different and potentially better branches after each sampling.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS3.Px3">
<h5 class="ltx_title ltx_title_paragraph">Evaluation.</h5>
<div class="ltx_para" id="S3.SS1.SSS3.Px3.p1">
<p class="ltx_p" id="S3.SS1.SSS3.Px3.p1.2">A scalar value is assigned to each new child node using feedback give by <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px3.p1.1.m1.1"><semantics id="S3.SS1.SSS3.Px3.p1.1.m1.1a"><msubsup id="S3.SS1.SSS3.Px3.p1.1.m1.1.1" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.cmml"><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.2" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.2.cmml">P</mi><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.3" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.3.cmml">θ</mi><mrow id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.cmml"><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.2" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.2.cmml">e</mi><mo id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.3" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.3.cmml">v</mi><mo id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1a" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.4" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.4.cmml">a</mi><mo id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1b" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.5" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px3.p1.1.m1.1b"><apply id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1">superscript</csymbol><apply id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.1.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.2.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.2">𝑃</ci><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.3.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.2.3">𝜃</ci></apply><apply id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3"><times id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.1"></times><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.2">𝑒</ci><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.3">𝑣</ci><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.4.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.4">𝑎</ci><ci id="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.5.cmml" xref="S3.SS1.SSS3.Px3.p1.1.m1.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px3.p1.1.m1.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px3.p1.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>, quantifying the agent’s progress in task completion and steering the search algorithm towards promising regions. Following previous work Self-rewarding Language Models <cite class="ltx_cite ltx_citemacro_cite">Yuan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib32" title="">2024b</a>)</cite>, we assess the currently retrieved document set <math alttext="D\cup O^{anc}_{d}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px3.p1.2.m2.1"><semantics id="S3.SS1.SSS3.Px3.p1.2.m2.1a"><mrow id="S3.SS1.SSS3.Px3.p1.2.m2.1.1" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.cmml"><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.2" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.2.cmml">D</mi><mo id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.1" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.1.cmml">∪</mo><msubsup id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.2" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.2.cmml">O</mi><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.3" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.3.cmml">d</mi><mrow id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.cmml"><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.2" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.2.cmml">a</mi><mo id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.3" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.3.cmml">n</mi><mo id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1a" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.4" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px3.p1.2.m2.1b"><apply id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1"><union id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.1.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.1"></union><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.2.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.2">𝐷</ci><apply id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3">subscript</csymbol><apply id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.1.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3">superscript</csymbol><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.2.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.2">𝑂</ci><apply id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3"><times id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.1"></times><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.2.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.2">𝑎</ci><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.3.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.3">𝑛</ci><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.4.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.2.3.4">𝑐</ci></apply></apply><ci id="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.3.cmml" xref="S3.SS1.SSS3.Px3.p1.2.m2.1.1.3.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px3.p1.2.m2.1c">D\cup O^{anc}_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px3.p1.2.m2.1d">italic_D ∪ italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> with LLM-as-a-Judge prompting with a 5-point rubric as shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T1" title="Table 1 ‣ 3.1.1 Result Evaluator for Quantitatively Measuring ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS3.Px4">
<h5 class="ltx_title ltx_title_paragraph">Backpropagation.</h5>
<div class="ltx_para" id="S3.SS1.SSS3.Px4.p1">
<p class="ltx_p" id="S3.SS1.SSS3.Px4.p1.2">The average value and visit counts of the newly generated node <math alttext="s^{\prime}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px4.p1.1.m1.1"><semantics id="S3.SS1.SSS3.Px4.p1.1.m1.1a"><msup id="S3.SS1.SSS3.Px4.p1.1.m1.1.1" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1.cmml"><mi id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.2" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1.2.cmml">s</mi><mo id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.3" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px4.p1.1.m1.1b"><apply id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1.2">𝑠</ci><ci id="S3.SS1.SSS3.Px4.p1.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.Px4.p1.1.m1.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px4.p1.1.m1.1c">s^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px4.p1.1.m1.1d">italic_s start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> and its ancestors are updated using the scaled reward <math alttext="R(s^{\prime})" class="ltx_Math" display="inline" id="S3.SS1.SSS3.Px4.p1.2.m2.1"><semantics id="S3.SS1.SSS3.Px4.p1.2.m2.1a"><mrow id="S3.SS1.SSS3.Px4.p1.2.m2.1.1" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.cmml"><mi id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.3" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.3.cmml">R</mi><mo id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.2" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.2.cmml">⁢</mo><mrow id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.cmml"><mo id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.cmml">(</mo><msup id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.2" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.2.cmml">s</mi><mo id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.3" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.3.cmml">′</mo></msup><mo id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.Px4.p1.2.m2.1b"><apply id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1"><times id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.2.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.2"></times><ci id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.3.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.3">𝑅</ci><apply id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1">superscript</csymbol><ci id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.2">𝑠</ci><ci id="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS1.SSS3.Px4.p1.2.m2.1.1.1.1.1.3">′</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS3.Px4.p1.2.m2.1c">R(s^{\prime})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS3.Px4.p1.2.m2.1d">italic_R ( italic_s start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT )</annotation></semantics></math> from the Evaluation step.</p>
</div>
<div class="ltx_para" id="S3.SS1.SSS3.Px4.p2">
<p class="ltx_p" id="S3.SS1.SSS3.Px4.p2.1">By incorporating a self-rewarding paradigm and expanding strategy, SeRTS improves search efficiency and enhances the quality of retrieved documents. Details and pseudo-codes for SeRTS are illustrated in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#footnote1" title="footnote 1 ‣ C.2 Self-Rewarding Tree Search (SeRTS) ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</section>
</section>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Proximal Policy Optimization of LLMs with Feedback</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">To further improve the reasoning abilities of the Query Proposer and the Result Evaluator, we utilize Proximal Policy Optimization (PPO) to fine-tune the two LLMs using the trajectories collected by SeRTS as feedback. Additionally, through this process, we could validate the effectiveness of the SeRTS reasoning process by examining the trajectories it produces.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.9">PPO aims to optimize the policy of an LLM agent by maximizing the expected cumulative reward while ensuring that the LLMs are updated conservatively in case of performance degradation. The objective function of PPO can be formulated as follows:</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E2">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E2X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\leavevmode\resizebox{433.62pt}{}{$L^{ppo}(\theta)=\hat{\mathbb{E%
}}\left[\min\left(r(\theta)\hat{A}_{t},\operatorname{clip}(r(\theta),1-%
\epsilon,1+\epsilon)\hat{A}_{t}\right)\right]$}," class="ltx_Math" display="inline" id="S3.E2X.2.1.1.m1.6"><semantics id="S3.E2X.2.1.1.m1.6a"><mrow id="S3.E2X.2.1.1.m1.6.7.2" xref="S3.E2X.2.1.1.m1.6.6.cmml"><mpadded depth="5.5pt" height="17.7pt" id="S3.E2X.2.1.1.m1.6.6" width="433.6pt" xref="S3.E2X.2.1.1.m1.6.6.cmml"><mrow id="S3.E2X.2.1.1.m1.6.6.9" xref="S3.E2X.2.1.1.m1.6.6.9.cmml"><msup id="S3.E2X.2.1.1.m1.6.6.9.2" xref="S3.E2X.2.1.1.m1.6.6.9.2.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.9.2.2" xref="S3.E2X.2.1.1.m1.6.6.9.2.2.cmml">L</mi><mrow id="S3.E2X.2.1.1.m1.6.6.9.2.3" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.9.2.3.2" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.2.cmml">p</mi><mo id="S3.E2X.2.1.1.m1.6.6.9.2.3.1" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.1.cmml">⁢</mo><mi id="S3.E2X.2.1.1.m1.6.6.9.2.3.3" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.3.cmml">p</mi><mo id="S3.E2X.2.1.1.m1.6.6.9.2.3.1a" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.1.cmml">⁢</mo><mi id="S3.E2X.2.1.1.m1.6.6.9.2.3.4" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.4.cmml">o</mi></mrow></msup><mo id="S3.E2X.2.1.1.m1.6.6.9.1" xref="S3.E2X.2.1.1.m1.6.6.9.1.cmml">⁢</mo><mrow id="S3.E2X.2.1.1.m1.6.6.9.3.2" xref="S3.E2X.2.1.1.m1.6.6.9.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.9.3.2.1" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.9.cmml">(</mo><mi id="S3.E2X.2.1.1.m1.1.1.2" xref="S3.E2X.2.1.1.m1.1.1.2.cmml">θ</mi><mo id="S3.E2X.2.1.1.m1.6.6.9.3.2.2" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.9.cmml">)</mo></mrow></mrow><mo id="S3.E2X.2.1.1.m1.6.6.8" xref="S3.E2X.2.1.1.m1.6.6.8.cmml">=</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7" xref="S3.E2X.2.1.1.m1.6.6.7.cmml"><mover accent="true" id="S3.E2X.2.1.1.m1.6.6.7.3" xref="S3.E2X.2.1.1.m1.6.6.7.3.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.7.3.2" xref="S3.E2X.2.1.1.m1.6.6.7.3.2.cmml">𝔼</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.3.1" xref="S3.E2X.2.1.1.m1.6.6.7.3.1.cmml">^</mo></mover><mo id="S3.E2X.2.1.1.m1.6.6.7.2" xref="S3.E2X.2.1.1.m1.6.6.7.2.cmml">⁢</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.2.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.2.1.cmml">[</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml"><mi id="S3.E2X.2.1.1.m1.5.5.6" xref="S3.E2X.2.1.1.m1.5.5.6.cmml">min</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2a" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml">⁡</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml">(</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.2.cmml">r</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1.cmml">⁢</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.3.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.3.2.1" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.cmml">(</mo><mi id="S3.E2X.2.1.1.m1.2.2.3" xref="S3.E2X.2.1.1.m1.2.2.3.cmml">θ</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.3.2.2" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1a" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.cmml"><mover accent="true" id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.2.cmml">A</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.1.cmml">^</mo></mover><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.3.cmml">t</mi></msub></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.4" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml">,</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.cmml"><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml"><mi id="S3.E2X.2.1.1.m1.4.4.5" xref="S3.E2X.2.1.1.m1.4.4.5.cmml">clip</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3a" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml">⁡</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.4" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml">(</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.2.cmml">r</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.1.cmml">⁢</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.3.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.cmml"><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.3.2.1" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.cmml">(</mo><mi id="S3.E2X.2.1.1.m1.3.3.4" xref="S3.E2X.2.1.1.m1.3.3.4.cmml">θ</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.3.2.2" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.5" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml">,</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.cmml"><mn id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.2.cmml">1</mn><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.1.cmml">−</mo><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.3.cmml">ϵ</mi></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.6" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml">,</mo><mrow id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.cmml"><mn id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.2.cmml">1</mn><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.1.cmml">+</mo><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.3.cmml">ϵ</mi></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.7" stretchy="false" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml">)</mo></mrow></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.4" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.4.cmml">⁢</mo><msub id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.cmml"><mover accent="true" id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.cmml"><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.2" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.2.cmml">A</mi><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.1" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.1.cmml">^</mo></mover><mi id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.3.cmml">t</mi></msub></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.5" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml">)</mo></mrow></mrow><mo id="S3.E2X.2.1.1.m1.6.6.7.1.1.3" xref="S3.E2X.2.1.1.m1.6.6.7.1.2.1.cmml">]</mo></mrow></mrow></mpadded><mo id="S3.E2X.2.1.1.m1.6.7.2.1" xref="S3.E2X.2.1.1.m1.6.6.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2X.2.1.1.m1.6b"><apply id="S3.E2X.2.1.1.m1.6.6.cmml" xref="S3.E2X.2.1.1.m1.6.7.2"><eq id="S3.E2X.2.1.1.m1.6.6.8.cmml" xref="S3.E2X.2.1.1.m1.6.6.8"></eq><apply id="S3.E2X.2.1.1.m1.6.6.9.cmml" xref="S3.E2X.2.1.1.m1.6.6.9"><times id="S3.E2X.2.1.1.m1.6.6.9.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.1"></times><apply id="S3.E2X.2.1.1.m1.6.6.9.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.6.6.9.2.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2">superscript</csymbol><ci id="S3.E2X.2.1.1.m1.6.6.9.2.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.2">𝐿</ci><apply id="S3.E2X.2.1.1.m1.6.6.9.2.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.3"><times id="S3.E2X.2.1.1.m1.6.6.9.2.3.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.1"></times><ci id="S3.E2X.2.1.1.m1.6.6.9.2.3.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.2">𝑝</ci><ci id="S3.E2X.2.1.1.m1.6.6.9.2.3.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.3">𝑝</ci><ci id="S3.E2X.2.1.1.m1.6.6.9.2.3.4.cmml" xref="S3.E2X.2.1.1.m1.6.6.9.2.3.4">𝑜</ci></apply></apply><ci id="S3.E2X.2.1.1.m1.1.1.2.cmml" xref="S3.E2X.2.1.1.m1.1.1.2">𝜃</ci></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.cmml" xref="S3.E2X.2.1.1.m1.6.6.7"><times id="S3.E2X.2.1.1.m1.6.6.7.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.2"></times><apply id="S3.E2X.2.1.1.m1.6.6.7.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.3"><ci id="S3.E2X.2.1.1.m1.6.6.7.3.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.3.1">^</ci><ci id="S3.E2X.2.1.1.m1.6.6.7.3.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.3.2">𝔼</ci></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.1.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1"><csymbol cd="latexml" id="S3.E2X.2.1.1.m1.6.6.7.1.2.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.2">delimited-[]</csymbol><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2"><min id="S3.E2X.2.1.1.m1.5.5.6.cmml" xref="S3.E2X.2.1.1.m1.5.5.6"></min><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1"><times id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.1"></times><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.2">𝑟</ci><ci id="S3.E2X.2.1.1.m1.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.3">𝜃</ci><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4">subscript</csymbol><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2"><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.1">^</ci><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.2.2">𝐴</ci></apply><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.1.1.1.4.3">𝑡</ci></apply></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2"><times id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.4.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.4"></times><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.4.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3"><ci id="S3.E2X.2.1.1.m1.4.4.5.cmml" xref="S3.E2X.2.1.1.m1.4.4.5">clip</ci><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1"><times id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.1"></times><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.1.1.1.1.2">𝑟</ci><ci id="S3.E2X.2.1.1.m1.3.3.4.cmml" xref="S3.E2X.2.1.1.m1.3.3.4">𝜃</ci></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2"><minus id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.1"></minus><cn id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.2.cmml" type="integer" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.2">1</cn><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.2.2.2.2.3">italic-ϵ</ci></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3"><plus id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.1"></plus><cn id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.2.cmml" type="integer" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.2">1</cn><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.3.3.3.3.3">italic-ϵ</ci></apply></apply><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5">subscript</csymbol><apply id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2"><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.1.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.1">^</ci><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.2.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.2.2">𝐴</ci></apply><ci id="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.3.cmml" xref="S3.E2X.2.1.1.m1.6.6.7.1.1.1.2.2.2.5.3">𝑡</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2X.2.1.1.m1.6c">\displaystyle\leavevmode\resizebox{433.62pt}{}{$L^{ppo}(\theta)=\hat{\mathbb{E%
}}\left[\min\left(r(\theta)\hat{A}_{t},\operatorname{clip}(r(\theta),1-%
\epsilon,1+\epsilon)\hat{A}_{t}\right)\right]$},</annotation><annotation encoding="application/x-llamapun" id="S3.E2X.2.1.1.m1.6d">italic_L start_POSTSUPERSCRIPT italic_p italic_p italic_o end_POSTSUPERSCRIPT ( italic_θ ) = over^ start_ARG blackboard_E end_ARG [ roman_min ( italic_r ( italic_θ ) over^ start_ARG italic_A end_ARG start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , roman_clip ( italic_r ( italic_θ ) , 1 - italic_ϵ , 1 + italic_ϵ ) over^ start_ARG italic_A end_ARG start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) ] ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(2)</span></td>
</tr>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E2Xa">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\mathrm{where}\ r_{\theta}=\frac{\pi_{\theta}\left(A_{1..i}\mid O%
_{1..i}\right)}{\pi_{\theta_{old}}\left(A_{1..i}\mid O_{1..i}\right)}" class="ltx_math_unparsed" display="inline" id="S3.E2Xa.2.1.1.m1.6"><semantics id="S3.E2Xa.2.1.1.m1.6a"><mrow id="S3.E2Xa.2.1.1.m1.6.7"><mrow id="S3.E2Xa.2.1.1.m1.6.7.2"><mi id="S3.E2Xa.2.1.1.m1.6.7.2.2">where</mi><mo id="S3.E2Xa.2.1.1.m1.6.7.2.1" lspace="0.500em">⁢</mo><msub id="S3.E2Xa.2.1.1.m1.6.7.2.3"><mi id="S3.E2Xa.2.1.1.m1.6.7.2.3.2">r</mi><mi id="S3.E2Xa.2.1.1.m1.6.7.2.3.3">θ</mi></msub></mrow><mo id="S3.E2Xa.2.1.1.m1.6.7.1">=</mo><mstyle displaystyle="true" id="S3.E2Xa.2.1.1.m1.6.6"><mfrac id="S3.E2Xa.2.1.1.m1.6.6a"><mrow id="S3.E2Xa.2.1.1.m1.3.3.3"><msub id="S3.E2Xa.2.1.1.m1.3.3.3.5"><mi id="S3.E2Xa.2.1.1.m1.3.3.3.5.2">π</mi><mi id="S3.E2Xa.2.1.1.m1.3.3.3.5.3">θ</mi></msub><mo id="S3.E2Xa.2.1.1.m1.3.3.3.4">⁢</mo><mrow id="S3.E2Xa.2.1.1.m1.3.3.3.3.1"><mo id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.2">(</mo><mrow id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1"><msub id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1.2"><mi id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1.2.2">A</mi><mrow id="S3.E2Xa.2.1.1.m1.1.1.1.1.1"><mn id="S3.E2Xa.2.1.1.m1.1.1.1.1.1.1">1</mn><mo id="S3.E2Xa.2.1.1.m1.1.1.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.E2Xa.2.1.1.m1.1.1.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.E2Xa.2.1.1.m1.1.1.1.1.1.4">i</mi></mrow></msub><mo id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1.1">∣</mo><msub id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1.3"><mi id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.1.3.2">O</mi><mrow id="S3.E2Xa.2.1.1.m1.2.2.2.2.1"><mn id="S3.E2Xa.2.1.1.m1.2.2.2.2.1.1">1</mn><mo id="S3.E2Xa.2.1.1.m1.2.2.2.2.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.E2Xa.2.1.1.m1.2.2.2.2.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.E2Xa.2.1.1.m1.2.2.2.2.1.4">i</mi></mrow></msub></mrow><mo id="S3.E2Xa.2.1.1.m1.3.3.3.3.1.3">)</mo></mrow></mrow><mrow id="S3.E2Xa.2.1.1.m1.6.6.6"><msub id="S3.E2Xa.2.1.1.m1.6.6.6.5"><mi id="S3.E2Xa.2.1.1.m1.6.6.6.5.2">π</mi><msub id="S3.E2Xa.2.1.1.m1.6.6.6.5.3"><mi id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.2">θ</mi><mrow id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3"><mi id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3.2">o</mi><mo id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3.1">⁢</mo><mi id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3.3">l</mi><mo id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3.1a">⁢</mo><mi id="S3.E2Xa.2.1.1.m1.6.6.6.5.3.3.4">d</mi></mrow></msub></msub><mo id="S3.E2Xa.2.1.1.m1.6.6.6.4">⁢</mo><mrow id="S3.E2Xa.2.1.1.m1.6.6.6.3.1"><mo id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.2">(</mo><mrow id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1"><msub id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1.2"><mi id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1.2.2">A</mi><mrow id="S3.E2Xa.2.1.1.m1.4.4.4.1.1"><mn id="S3.E2Xa.2.1.1.m1.4.4.4.1.1.1">1</mn><mo id="S3.E2Xa.2.1.1.m1.4.4.4.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.E2Xa.2.1.1.m1.4.4.4.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.E2Xa.2.1.1.m1.4.4.4.1.1.4">i</mi></mrow></msub><mo id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1.1">∣</mo><msub id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1.3"><mi id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.1.3.2">O</mi><mrow id="S3.E2Xa.2.1.1.m1.5.5.5.2.1"><mn id="S3.E2Xa.2.1.1.m1.5.5.5.2.1.1">1</mn><mo id="S3.E2Xa.2.1.1.m1.5.5.5.2.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.E2Xa.2.1.1.m1.5.5.5.2.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.E2Xa.2.1.1.m1.5.5.5.2.1.4">i</mi></mrow></msub></mrow><mo id="S3.E2Xa.2.1.1.m1.6.6.6.3.1.3">)</mo></mrow></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex" id="S3.E2Xa.2.1.1.m1.6b">\displaystyle\mathrm{where}\ r_{\theta}=\frac{\pi_{\theta}\left(A_{1..i}\mid O%
_{1..i}\right)}{\pi_{\theta_{old}}\left(A_{1..i}\mid O_{1..i}\right)}</annotation><annotation encoding="application/x-llamapun" id="S3.E2Xa.2.1.1.m1.6c">roman_where italic_r start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT = divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT ∣ italic_O start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_o italic_l italic_d end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT ∣ italic_O start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="S3.SS2.p2.8">Here <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mi id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><ci id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_θ</annotation></semantics></math> represents the parameters of the policy network, <math alttext="r_{\theta}" class="ltx_Math" display="inline" id="S3.SS2.p2.2.m2.1"><semantics id="S3.SS2.p2.2.m2.1a"><msub id="S3.SS2.p2.2.m2.1.1" xref="S3.SS2.p2.2.m2.1.1.cmml"><mi id="S3.SS2.p2.2.m2.1.1.2" xref="S3.SS2.p2.2.m2.1.1.2.cmml">r</mi><mi id="S3.SS2.p2.2.m2.1.1.3" xref="S3.SS2.p2.2.m2.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.1b"><apply id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.p2.2.m2.1.1.2.cmml" xref="S3.SS2.p2.2.m2.1.1.2">𝑟</ci><ci id="S3.SS2.p2.2.m2.1.1.3.cmml" xref="S3.SS2.p2.2.m2.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.1c">r_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.2.m2.1d">italic_r start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math> indicates the ratio of the probability of selecting an action under the new policy to that under the old one, and <math alttext="A_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS2.p2.3.m3.1"><semantics id="S3.SS2.p2.3.m3.1a"><msub id="S3.SS2.p2.3.m3.1.2"><mi id="S3.SS2.p2.3.m3.1.2.2">A</mi><mrow id="S3.SS2.p2.3.m3.1.1.1"><mn id="S3.SS2.p2.3.m3.1.1.1.1">1</mn><mo id="S3.SS2.p2.3.m3.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p2.3.m3.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p2.3.m3.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1b">A_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.3.m3.1c">italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="O_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS2.p2.4.m4.1"><semantics id="S3.SS2.p2.4.m4.1a"><msub id="S3.SS2.p2.4.m4.1.2"><mi id="S3.SS2.p2.4.m4.1.2.2">O</mi><mrow id="S3.SS2.p2.4.m4.1.1.1"><mn id="S3.SS2.p2.4.m4.1.1.1.1">1</mn><mo id="S3.SS2.p2.4.m4.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p2.4.m4.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p2.4.m4.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS2.p2.4.m4.1b">O_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.4.m4.1c">italic_O start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> denotes sampled query proposals and previous observations. <math alttext="\hat{A}_{t}" class="ltx_Math" display="inline" id="S3.SS2.p2.5.m5.1"><semantics id="S3.SS2.p2.5.m5.1a"><msub id="S3.SS2.p2.5.m5.1.1" xref="S3.SS2.p2.5.m5.1.1.cmml"><mover accent="true" id="S3.SS2.p2.5.m5.1.1.2" xref="S3.SS2.p2.5.m5.1.1.2.cmml"><mi id="S3.SS2.p2.5.m5.1.1.2.2" xref="S3.SS2.p2.5.m5.1.1.2.2.cmml">A</mi><mo id="S3.SS2.p2.5.m5.1.1.2.1" xref="S3.SS2.p2.5.m5.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS2.p2.5.m5.1.1.3" xref="S3.SS2.p2.5.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.5.m5.1b"><apply id="S3.SS2.p2.5.m5.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.1.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1">subscript</csymbol><apply id="S3.SS2.p2.5.m5.1.1.2.cmml" xref="S3.SS2.p2.5.m5.1.1.2"><ci id="S3.SS2.p2.5.m5.1.1.2.1.cmml" xref="S3.SS2.p2.5.m5.1.1.2.1">^</ci><ci id="S3.SS2.p2.5.m5.1.1.2.2.cmml" xref="S3.SS2.p2.5.m5.1.1.2.2">𝐴</ci></apply><ci id="S3.SS2.p2.5.m5.1.1.3.cmml" xref="S3.SS2.p2.5.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.5.m5.1c">\hat{A}_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.5.m5.1d">over^ start_ARG italic_A end_ARG start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is the advantage function estimating the relative reward of taking action <math alttext="A_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS2.p2.6.m6.1"><semantics id="S3.SS2.p2.6.m6.1a"><msub id="S3.SS2.p2.6.m6.1.2"><mi id="S3.SS2.p2.6.m6.1.2.2">A</mi><mrow id="S3.SS2.p2.6.m6.1.1.1"><mn id="S3.SS2.p2.6.m6.1.1.1.1">1</mn><mo id="S3.SS2.p2.6.m6.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p2.6.m6.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p2.6.m6.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS2.p2.6.m6.1b">A_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.6.m6.1c">italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in the state of <math alttext="O_{1..i}" class="ltx_math_unparsed" display="inline" id="S3.SS2.p2.7.m7.1"><semantics id="S3.SS2.p2.7.m7.1a"><msub id="S3.SS2.p2.7.m7.1.2"><mi id="S3.SS2.p2.7.m7.1.2.2">O</mi><mrow id="S3.SS2.p2.7.m7.1.1.1"><mn id="S3.SS2.p2.7.m7.1.1.1.1">1</mn><mo id="S3.SS2.p2.7.m7.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p2.7.m7.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p2.7.m7.1.1.1.4">i</mi></mrow></msub><annotation encoding="application/x-tex" id="S3.SS2.p2.7.m7.1b">O_{1..i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.7.m7.1c">italic_O start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT</annotation></semantics></math> compared to the average value of the state, and <math alttext="\epsilon" class="ltx_Math" display="inline" id="S3.SS2.p2.8.m8.1"><semantics id="S3.SS2.p2.8.m8.1a"><mi id="S3.SS2.p2.8.m8.1.1" xref="S3.SS2.p2.8.m8.1.1.cmml">ϵ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.8.m8.1b"><ci id="S3.SS2.p2.8.m8.1.1.cmml" xref="S3.SS2.p2.8.m8.1.1">italic-ϵ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.8.m8.1c">\epsilon</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.8.m8.1d">italic_ϵ</annotation></semantics></math> is the clipping range hyperparameter.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.4">During training, we sample trajectories <math alttext="\mathcal{T}_{SeRTS}={(A_{1..i},O_{1..i},R_{1..i})}" class="ltx_math_unparsed" display="inline" id="S3.SS2.p3.1.m1.6"><semantics id="S3.SS2.p3.1.m1.6a"><mrow id="S3.SS2.p3.1.m1.6.6"><msub id="S3.SS2.p3.1.m1.6.6.5"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p3.1.m1.6.6.5.2">𝒯</mi><mrow id="S3.SS2.p3.1.m1.6.6.5.3"><mi id="S3.SS2.p3.1.m1.6.6.5.3.2">S</mi><mo id="S3.SS2.p3.1.m1.6.6.5.3.1">⁢</mo><mi id="S3.SS2.p3.1.m1.6.6.5.3.3">e</mi><mo id="S3.SS2.p3.1.m1.6.6.5.3.1a">⁢</mo><mi id="S3.SS2.p3.1.m1.6.6.5.3.4">R</mi><mo id="S3.SS2.p3.1.m1.6.6.5.3.1b">⁢</mo><mi id="S3.SS2.p3.1.m1.6.6.5.3.5">T</mi><mo id="S3.SS2.p3.1.m1.6.6.5.3.1c">⁢</mo><mi id="S3.SS2.p3.1.m1.6.6.5.3.6">S</mi></mrow></msub><mo id="S3.SS2.p3.1.m1.6.6.4">=</mo><mrow id="S3.SS2.p3.1.m1.6.6.3.3"><mo id="S3.SS2.p3.1.m1.6.6.3.3.4" stretchy="false">(</mo><msub id="S3.SS2.p3.1.m1.4.4.1.1.1"><mi id="S3.SS2.p3.1.m1.4.4.1.1.1.2">A</mi><mrow id="S3.SS2.p3.1.m1.1.1.1"><mn id="S3.SS2.p3.1.m1.1.1.1.1">1</mn><mo id="S3.SS2.p3.1.m1.1.1.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p3.1.m1.1.1.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p3.1.m1.1.1.1.4">i</mi></mrow></msub><mo id="S3.SS2.p3.1.m1.6.6.3.3.5">,</mo><msub id="S3.SS2.p3.1.m1.5.5.2.2.2"><mi id="S3.SS2.p3.1.m1.5.5.2.2.2.2">O</mi><mrow id="S3.SS2.p3.1.m1.2.2.1"><mn id="S3.SS2.p3.1.m1.2.2.1.1">1</mn><mo id="S3.SS2.p3.1.m1.2.2.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p3.1.m1.2.2.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p3.1.m1.2.2.1.4">i</mi></mrow></msub><mo id="S3.SS2.p3.1.m1.6.6.3.3.6">,</mo><msub id="S3.SS2.p3.1.m1.6.6.3.3.3"><mi id="S3.SS2.p3.1.m1.6.6.3.3.3.2">R</mi><mrow id="S3.SS2.p3.1.m1.3.3.1"><mn id="S3.SS2.p3.1.m1.3.3.1.1">1</mn><mo id="S3.SS2.p3.1.m1.3.3.1.2" lspace="0em" rspace="0.0835em">.</mo><mo id="S3.SS2.p3.1.m1.3.3.1.3" lspace="0.0835em" rspace="0.167em">.</mo><mi id="S3.SS2.p3.1.m1.3.3.1.4">i</mi></mrow></msub><mo id="S3.SS2.p3.1.m1.6.6.3.3.7" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.6b">\mathcal{T}_{SeRTS}={(A_{1..i},O_{1..i},R_{1..i})}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.1.m1.6c">caligraphic_T start_POSTSUBSCRIPT italic_S italic_e italic_R italic_T italic_S end_POSTSUBSCRIPT = ( italic_A start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT , italic_O start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT , italic_R start_POSTSUBSCRIPT 1 . . italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> from the SeRTS retrieval process and the generated answers to estimate the advantage function and update the policy network <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS2.p3.2.m2.1"><semantics id="S3.SS2.p3.2.m2.1a"><mi id="S3.SS2.p3.2.m2.1.1" xref="S3.SS2.p3.2.m2.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.2.m2.1b"><ci id="S3.SS2.p3.2.m2.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.2.m2.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.2.m2.1d">italic_θ</annotation></semantics></math>. The clipping function <math alttext="\operatorname{clip}" class="ltx_Math" display="inline" id="S3.SS2.p3.3.m3.1"><semantics id="S3.SS2.p3.3.m3.1a"><mi id="S3.SS2.p3.3.m3.1.1" xref="S3.SS2.p3.3.m3.1.1.cmml">clip</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.3.m3.1b"><ci id="S3.SS2.p3.3.m3.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1">clip</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.3.m3.1c">\operatorname{clip}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.3.m3.1d">roman_clip</annotation></semantics></math> in <math alttext="L^{ppo}(\theta)" class="ltx_Math" display="inline" id="S3.SS2.p3.4.m4.1"><semantics id="S3.SS2.p3.4.m4.1a"><mrow id="S3.SS2.p3.4.m4.1.2" xref="S3.SS2.p3.4.m4.1.2.cmml"><msup id="S3.SS2.p3.4.m4.1.2.2" xref="S3.SS2.p3.4.m4.1.2.2.cmml"><mi id="S3.SS2.p3.4.m4.1.2.2.2" xref="S3.SS2.p3.4.m4.1.2.2.2.cmml">L</mi><mrow id="S3.SS2.p3.4.m4.1.2.2.3" xref="S3.SS2.p3.4.m4.1.2.2.3.cmml"><mi id="S3.SS2.p3.4.m4.1.2.2.3.2" xref="S3.SS2.p3.4.m4.1.2.2.3.2.cmml">p</mi><mo id="S3.SS2.p3.4.m4.1.2.2.3.1" xref="S3.SS2.p3.4.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.4.m4.1.2.2.3.3" xref="S3.SS2.p3.4.m4.1.2.2.3.3.cmml">p</mi><mo id="S3.SS2.p3.4.m4.1.2.2.3.1a" xref="S3.SS2.p3.4.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S3.SS2.p3.4.m4.1.2.2.3.4" xref="S3.SS2.p3.4.m4.1.2.2.3.4.cmml">o</mi></mrow></msup><mo id="S3.SS2.p3.4.m4.1.2.1" xref="S3.SS2.p3.4.m4.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.p3.4.m4.1.2.3.2" xref="S3.SS2.p3.4.m4.1.2.cmml"><mo id="S3.SS2.p3.4.m4.1.2.3.2.1" stretchy="false" xref="S3.SS2.p3.4.m4.1.2.cmml">(</mo><mi id="S3.SS2.p3.4.m4.1.1" xref="S3.SS2.p3.4.m4.1.1.cmml">θ</mi><mo id="S3.SS2.p3.4.m4.1.2.3.2.2" stretchy="false" xref="S3.SS2.p3.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.4.m4.1b"><apply id="S3.SS2.p3.4.m4.1.2.cmml" xref="S3.SS2.p3.4.m4.1.2"><times id="S3.SS2.p3.4.m4.1.2.1.cmml" xref="S3.SS2.p3.4.m4.1.2.1"></times><apply id="S3.SS2.p3.4.m4.1.2.2.cmml" xref="S3.SS2.p3.4.m4.1.2.2"><csymbol cd="ambiguous" id="S3.SS2.p3.4.m4.1.2.2.1.cmml" xref="S3.SS2.p3.4.m4.1.2.2">superscript</csymbol><ci id="S3.SS2.p3.4.m4.1.2.2.2.cmml" xref="S3.SS2.p3.4.m4.1.2.2.2">𝐿</ci><apply id="S3.SS2.p3.4.m4.1.2.2.3.cmml" xref="S3.SS2.p3.4.m4.1.2.2.3"><times id="S3.SS2.p3.4.m4.1.2.2.3.1.cmml" xref="S3.SS2.p3.4.m4.1.2.2.3.1"></times><ci id="S3.SS2.p3.4.m4.1.2.2.3.2.cmml" xref="S3.SS2.p3.4.m4.1.2.2.3.2">𝑝</ci><ci id="S3.SS2.p3.4.m4.1.2.2.3.3.cmml" xref="S3.SS2.p3.4.m4.1.2.2.3.3">𝑝</ci><ci id="S3.SS2.p3.4.m4.1.2.2.3.4.cmml" xref="S3.SS2.p3.4.m4.1.2.2.3.4">𝑜</ci></apply></apply><ci id="S3.SS2.p3.4.m4.1.1.cmml" xref="S3.SS2.p3.4.m4.1.1">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.4.m4.1c">L^{ppo}(\theta)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.4.m4.1d">italic_L start_POSTSUPERSCRIPT italic_p italic_p italic_o end_POSTSUPERSCRIPT ( italic_θ )</annotation></semantics></math> ensures that the policy update is conservative, preventing drastic changes that could lead to instability or performance degradation.</p>
</div>
<figure class="ltx_table" id="S3.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T3.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.1" style="padding-left:9.1pt;padding-right:9.1pt;">Retrieval Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.2" style="padding-left:9.1pt;padding-right:9.1pt;">Precision</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.3" style="padding-left:9.1pt;padding-right:9.1pt;">Recall</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.4" style="padding-left:9.1pt;padding-right:9.1pt;">F1 score</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.5" style="padding-left:9.1pt;padding-right:9.1pt;">Hit Rate</th>
</tr>
<tr class="ltx_tr" id="S3.T3.1.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.2.2.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.2.2.1.1">BM25</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.2.2.2" style="padding-left:9.1pt;padding-right:9.1pt;">72.48</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.2.2.3" style="padding-left:9.1pt;padding-right:9.1pt;">47.16</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.2.2.4" style="padding-left:9.1pt;padding-right:9.1pt;">45.87</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.2.2.5" style="padding-left:9.1pt;padding-right:9.1pt;">83.00</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T3.1.3.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S3.T3.1.3.1.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.3.1.1.1">GPT-3.5-turbo + Reflection (sim 6)</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.3.1.2" style="padding-left:9.1pt;padding-right:9.1pt;">66.26</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.3.1.3" style="padding-left:9.1pt;padding-right:9.1pt;">58.96</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.3.1.4" style="padding-left:9.1pt;padding-right:9.1pt;">51.18</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.3.1.5" style="padding-left:9.1pt;padding-right:9.1pt;">88.89</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.4.2">
<td class="ltx_td ltx_align_left" id="S3.T3.1.4.2.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.4.2.1.1">GPT-3.5-turbo + SeRTS (sim 6, max ucb)</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.4.2.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.4.2.2.1">74.31</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.4.2.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.4.2.3.1">59.09</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.4.2.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.4.2.4.1">55.06</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.4.2.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.4.2.5.1">92.22</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.5.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T3.1.5.3.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.5.3.1.1">LLama2-7b + Reflection (sim 6)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.5.3.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.5.3.2.1">72.48</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.5.3.3" style="padding-left:9.1pt;padding-right:9.1pt;">48.66</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.5.3.4" style="padding-left:9.1pt;padding-right:9.1pt;">47.12</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.5.3.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.5.3.5.1">84.44</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.6.4">
<td class="ltx_td ltx_align_left" id="S3.T3.1.6.4.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.6.4.1.1">LLama2-7b + SeRTS (sim 6, max ucb)</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.6.4.2" style="padding-left:9.1pt;padding-right:9.1pt;">67.85</td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.6.4.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.6.4.3.1">50.95</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.6.4.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.6.4.4.1">47.58</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.6.4.5" style="padding-left:9.1pt;padding-right:9.1pt;">83.33</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.7.5">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S3.T3.1.7.5.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.7.5.1.1">GPT-3.5-turbo + Reflection (sim 12)</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.7.5.2" style="padding-left:9.1pt;padding-right:9.1pt;">71.36</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.7.5.3" style="padding-left:9.1pt;padding-right:9.1pt;">58.84</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.7.5.4" style="padding-left:9.1pt;padding-right:9.1pt;">52.72</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T3.1.7.5.5" style="padding-left:9.1pt;padding-right:9.1pt;">91.11</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.8.6">
<td class="ltx_td ltx_align_left" id="S3.T3.1.8.6.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.8.6.1.1">GPT-3.5-turbo + SeRTS (sim 12, max ucb)</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.8.6.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.8.6.2.1">74.65</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.8.6.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.8.6.3.1">58.96</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.8.6.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.8.6.4.1">54.70</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.8.6.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.8.6.5.1">94.44</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.9.7">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T3.1.9.7.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.9.7.1.1">LLama2-7b + Reflection (sim 12)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.9.7.2" style="padding-left:9.1pt;padding-right:9.1pt;">68.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.9.7.3" style="padding-left:9.1pt;padding-right:9.1pt;">51.82</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.9.7.4" style="padding-left:9.1pt;padding-right:9.1pt;">48.79</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.9.7.5" style="padding-left:9.1pt;padding-right:9.1pt;">83.33</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.10.8">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S3.T3.1.10.8.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.10.8.1.1">LLama2-7b + SeRTS (sim 12, max ucb)</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.10.8.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.10.8.2.1">70.62</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.10.8.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.10.8.3.1">52.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.10.8.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.10.8.4.1">49.39</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.10.8.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.1.10.8.5.1">85.55</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Retrieval Results on BioASQ Task 11b batch 1 Test Set. The highest values are <span class="ltx_text ltx_font_bold" id="S3.T3.3.1">bolded</span>. All metrics are averaged across three runs with three random seeds {42, 43, 44}.</figcaption>
</figure>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.1">By updating the language model using PPO with the feedback <math alttext="\mathcal{T}_{SeRTS}" class="ltx_Math" display="inline" id="S3.SS2.p4.1.m1.1"><semantics id="S3.SS2.p4.1.m1.1a"><msub id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.1.m1.1.1.2" xref="S3.SS2.p4.1.m1.1.1.2.cmml">𝒯</mi><mrow id="S3.SS2.p4.1.m1.1.1.3" xref="S3.SS2.p4.1.m1.1.1.3.cmml"><mi id="S3.SS2.p4.1.m1.1.1.3.2" xref="S3.SS2.p4.1.m1.1.1.3.2.cmml">S</mi><mo id="S3.SS2.p4.1.m1.1.1.3.1" xref="S3.SS2.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p4.1.m1.1.1.3.3" xref="S3.SS2.p4.1.m1.1.1.3.3.cmml">e</mi><mo id="S3.SS2.p4.1.m1.1.1.3.1a" xref="S3.SS2.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p4.1.m1.1.1.3.4" xref="S3.SS2.p4.1.m1.1.1.3.4.cmml">R</mi><mo id="S3.SS2.p4.1.m1.1.1.3.1b" xref="S3.SS2.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p4.1.m1.1.1.3.5" xref="S3.SS2.p4.1.m1.1.1.3.5.cmml">T</mi><mo id="S3.SS2.p4.1.m1.1.1.3.1c" xref="S3.SS2.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS2.p4.1.m1.1.1.3.6" xref="S3.SS2.p4.1.m1.1.1.3.6.cmml">S</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.1b"><apply id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2">𝒯</ci><apply id="S3.SS2.p4.1.m1.1.1.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3"><times id="S3.SS2.p4.1.m1.1.1.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.3.1"></times><ci id="S3.SS2.p4.1.m1.1.1.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.3.2">𝑆</ci><ci id="S3.SS2.p4.1.m1.1.1.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3">𝑒</ci><ci id="S3.SS2.p4.1.m1.1.1.3.4.cmml" xref="S3.SS2.p4.1.m1.1.1.3.4">𝑅</ci><ci id="S3.SS2.p4.1.m1.1.1.3.5.cmml" xref="S3.SS2.p4.1.m1.1.1.3.5">𝑇</ci><ci id="S3.SS2.p4.1.m1.1.1.3.6.cmml" xref="S3.SS2.p4.1.m1.1.1.3.6">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">\mathcal{T}_{SeRTS}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.1.m1.1d">caligraphic_T start_POSTSUBSCRIPT italic_S italic_e italic_R italic_T italic_S end_POSTSUBSCRIPT</annotation></semantics></math>, we aim to let LMs know how to make good query proposals given current observations. This training process allows the LLMs to adapt to the specific requirements of medical knowledge retrieval, self-improving their ability of RAG in the bio-medical domain. The finetuning details are listed in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS4" title="C.4 LoRA PPO Finetuning ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">C.4</span></a>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Datasets</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">The BioASQ-QA <cite class="ltx_cite ltx_citemacro_cite">Krithara et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib9" title="">2023</a>)</cite> dataset is a comprehensive resource designed to meet the authentic information needs of biomedical professionals. It comprises questions in English, accompanied by gold-enriched answers by biomedical experts and relevant supporting material. This dataset stands out from most existing biomedical QA datasets due to its realistic and challenging nature, reflecting the complexity of real-world biomedical inquiries. Most importantly, BioASQ provides ideal answers in the form of summaries rather than only exact answers. This unique feature makes the dataset particularly valuable for researchers working on multi-document summarization techniques in the biomedical domain.
Furthermore, the BioASQ-QA dataset is updated annually through an open-challenge format, making it highly unlikely for LLMs to have accessed the data during training. To evaluate our approach, we utilize the BioASQ 2023 Task 11b test set <cite class="ltx_cite ltx_citemacro_cite">Nentidis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib13" title="">2023</a>)</cite>, which consists of question-answer pairs along with their corresponding retrieved documents.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Baselines</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.4">We compare our proposed SeRTS method with Self-Reflection baselines. For a fair comparison, we implement Self-Reflection by making minor modifications to the SeRTS prompt. Specifically, we remove the sibling node information (<math alttext="O^{sib}_{f}" class="ltx_Math" display="inline" id="S4.SS2.p1.1.m1.1"><semantics id="S4.SS2.p1.1.m1.1a"><msubsup id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml"><mi id="S4.SS2.p1.1.m1.1.1.2.2" xref="S4.SS2.p1.1.m1.1.1.2.2.cmml">O</mi><mi id="S4.SS2.p1.1.m1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.3.cmml">f</mi><mrow id="S4.SS2.p1.1.m1.1.1.2.3" xref="S4.SS2.p1.1.m1.1.1.2.3.cmml"><mi id="S4.SS2.p1.1.m1.1.1.2.3.2" xref="S4.SS2.p1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="S4.SS2.p1.1.m1.1.1.2.3.1" xref="S4.SS2.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.1.m1.1.1.2.3.3" xref="S4.SS2.p1.1.m1.1.1.2.3.3.cmml">i</mi><mo id="S4.SS2.p1.1.m1.1.1.2.3.1a" xref="S4.SS2.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.1.m1.1.1.2.3.4" xref="S4.SS2.p1.1.m1.1.1.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><apply id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.1.m1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1">subscript</csymbol><apply id="S4.SS2.p1.1.m1.1.1.2.cmml" xref="S4.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.1.m1.1.1.2.1.cmml" xref="S4.SS2.p1.1.m1.1.1">superscript</csymbol><ci id="S4.SS2.p1.1.m1.1.1.2.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2.2">𝑂</ci><apply id="S4.SS2.p1.1.m1.1.1.2.3.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3"><times id="S4.SS2.p1.1.m1.1.1.2.3.1.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3.1"></times><ci id="S4.SS2.p1.1.m1.1.1.2.3.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3.2">𝑠</ci><ci id="S4.SS2.p1.1.m1.1.1.2.3.3.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3.3">𝑖</ci><ci id="S4.SS2.p1.1.m1.1.1.2.3.4.cmml" xref="S4.SS2.p1.1.m1.1.1.2.3.4">𝑏</ci></apply></apply><ci id="S4.SS2.p1.1.m1.1.1.3.cmml" xref="S4.SS2.p1.1.m1.1.1.3">𝑓</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">O^{sib}_{f}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.m1.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="O^{sib}_{d}" class="ltx_Math" display="inline" id="S4.SS2.p1.2.m2.1"><semantics id="S4.SS2.p1.2.m2.1a"><msubsup id="S4.SS2.p1.2.m2.1.1" xref="S4.SS2.p1.2.m2.1.1.cmml"><mi id="S4.SS2.p1.2.m2.1.1.2.2" xref="S4.SS2.p1.2.m2.1.1.2.2.cmml">O</mi><mi id="S4.SS2.p1.2.m2.1.1.3" xref="S4.SS2.p1.2.m2.1.1.3.cmml">d</mi><mrow id="S4.SS2.p1.2.m2.1.1.2.3" xref="S4.SS2.p1.2.m2.1.1.2.3.cmml"><mi id="S4.SS2.p1.2.m2.1.1.2.3.2" xref="S4.SS2.p1.2.m2.1.1.2.3.2.cmml">s</mi><mo id="S4.SS2.p1.2.m2.1.1.2.3.1" xref="S4.SS2.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.2.m2.1.1.2.3.3" xref="S4.SS2.p1.2.m2.1.1.2.3.3.cmml">i</mi><mo id="S4.SS2.p1.2.m2.1.1.2.3.1a" xref="S4.SS2.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.2.m2.1.1.2.3.4" xref="S4.SS2.p1.2.m2.1.1.2.3.4.cmml">b</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.2.m2.1b"><apply id="S4.SS2.p1.2.m2.1.1.cmml" xref="S4.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.2.m2.1.1.1.cmml" xref="S4.SS2.p1.2.m2.1.1">subscript</csymbol><apply id="S4.SS2.p1.2.m2.1.1.2.cmml" xref="S4.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.2.m2.1.1.2.1.cmml" xref="S4.SS2.p1.2.m2.1.1">superscript</csymbol><ci id="S4.SS2.p1.2.m2.1.1.2.2.cmml" xref="S4.SS2.p1.2.m2.1.1.2.2">𝑂</ci><apply id="S4.SS2.p1.2.m2.1.1.2.3.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3"><times id="S4.SS2.p1.2.m2.1.1.2.3.1.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3.1"></times><ci id="S4.SS2.p1.2.m2.1.1.2.3.2.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3.2">𝑠</ci><ci id="S4.SS2.p1.2.m2.1.1.2.3.3.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3.3">𝑖</ci><ci id="S4.SS2.p1.2.m2.1.1.2.3.4.cmml" xref="S4.SS2.p1.2.m2.1.1.2.3.4">𝑏</ci></apply></apply><ci id="S4.SS2.p1.2.m2.1.1.3.cmml" xref="S4.SS2.p1.2.m2.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.2.m2.1c">O^{sib}_{d}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.2.m2.1d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>) from the query proposer agent <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S4.SS2.p1.3.m3.1"><semantics id="S4.SS2.p1.3.m3.1a"><msubsup id="S4.SS2.p1.3.m3.1.1" xref="S4.SS2.p1.3.m3.1.1.cmml"><mi id="S4.SS2.p1.3.m3.1.1.2.2" xref="S4.SS2.p1.3.m3.1.1.2.2.cmml">P</mi><mi id="S4.SS2.p1.3.m3.1.1.2.3" xref="S4.SS2.p1.3.m3.1.1.2.3.cmml">θ</mi><mrow id="S4.SS2.p1.3.m3.1.1.3" xref="S4.SS2.p1.3.m3.1.1.3.cmml"><mi id="S4.SS2.p1.3.m3.1.1.3.2" xref="S4.SS2.p1.3.m3.1.1.3.2.cmml">q</mi><mo id="S4.SS2.p1.3.m3.1.1.3.1" xref="S4.SS2.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.3.m3.1.1.3.3" xref="S4.SS2.p1.3.m3.1.1.3.3.cmml">u</mi><mo id="S4.SS2.p1.3.m3.1.1.3.1a" xref="S4.SS2.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.3.m3.1.1.3.4" xref="S4.SS2.p1.3.m3.1.1.3.4.cmml">e</mi><mo id="S4.SS2.p1.3.m3.1.1.3.1b" xref="S4.SS2.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.3.m3.1.1.3.5" xref="S4.SS2.p1.3.m3.1.1.3.5.cmml">r</mi><mo id="S4.SS2.p1.3.m3.1.1.3.1c" xref="S4.SS2.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.3.m3.1.1.3.6" xref="S4.SS2.p1.3.m3.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.3.m3.1b"><apply id="S4.SS2.p1.3.m3.1.1.cmml" xref="S4.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.3.m3.1.1.1.cmml" xref="S4.SS2.p1.3.m3.1.1">superscript</csymbol><apply id="S4.SS2.p1.3.m3.1.1.2.cmml" xref="S4.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.3.m3.1.1.2.1.cmml" xref="S4.SS2.p1.3.m3.1.1">subscript</csymbol><ci id="S4.SS2.p1.3.m3.1.1.2.2.cmml" xref="S4.SS2.p1.3.m3.1.1.2.2">𝑃</ci><ci id="S4.SS2.p1.3.m3.1.1.2.3.cmml" xref="S4.SS2.p1.3.m3.1.1.2.3">𝜃</ci></apply><apply id="S4.SS2.p1.3.m3.1.1.3.cmml" xref="S4.SS2.p1.3.m3.1.1.3"><times id="S4.SS2.p1.3.m3.1.1.3.1.cmml" xref="S4.SS2.p1.3.m3.1.1.3.1"></times><ci id="S4.SS2.p1.3.m3.1.1.3.2.cmml" xref="S4.SS2.p1.3.m3.1.1.3.2">𝑞</ci><ci id="S4.SS2.p1.3.m3.1.1.3.3.cmml" xref="S4.SS2.p1.3.m3.1.1.3.3">𝑢</ci><ci id="S4.SS2.p1.3.m3.1.1.3.4.cmml" xref="S4.SS2.p1.3.m3.1.1.3.4">𝑒</ci><ci id="S4.SS2.p1.3.m3.1.1.3.5.cmml" xref="S4.SS2.p1.3.m3.1.1.3.5">𝑟</ci><ci id="S4.SS2.p1.3.m3.1.1.3.6.cmml" xref="S4.SS2.p1.3.m3.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.3.m3.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.3.m3.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> prompt, as self-reflection does not involve sibling nodes during expansion. The evaluator agent <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S4.SS2.p1.4.m4.1"><semantics id="S4.SS2.p1.4.m4.1a"><msubsup id="S4.SS2.p1.4.m4.1.1" xref="S4.SS2.p1.4.m4.1.1.cmml"><mi id="S4.SS2.p1.4.m4.1.1.2.2" xref="S4.SS2.p1.4.m4.1.1.2.2.cmml">P</mi><mi id="S4.SS2.p1.4.m4.1.1.2.3" xref="S4.SS2.p1.4.m4.1.1.2.3.cmml">θ</mi><mrow id="S4.SS2.p1.4.m4.1.1.3" xref="S4.SS2.p1.4.m4.1.1.3.cmml"><mi id="S4.SS2.p1.4.m4.1.1.3.2" xref="S4.SS2.p1.4.m4.1.1.3.2.cmml">e</mi><mo id="S4.SS2.p1.4.m4.1.1.3.1" xref="S4.SS2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.4.m4.1.1.3.3" xref="S4.SS2.p1.4.m4.1.1.3.3.cmml">v</mi><mo id="S4.SS2.p1.4.m4.1.1.3.1a" xref="S4.SS2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.4.m4.1.1.3.4" xref="S4.SS2.p1.4.m4.1.1.3.4.cmml">a</mi><mo id="S4.SS2.p1.4.m4.1.1.3.1b" xref="S4.SS2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S4.SS2.p1.4.m4.1.1.3.5" xref="S4.SS2.p1.4.m4.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.4.m4.1b"><apply id="S4.SS2.p1.4.m4.1.1.cmml" xref="S4.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.4.m4.1.1.1.cmml" xref="S4.SS2.p1.4.m4.1.1">superscript</csymbol><apply id="S4.SS2.p1.4.m4.1.1.2.cmml" xref="S4.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S4.SS2.p1.4.m4.1.1.2.1.cmml" xref="S4.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="S4.SS2.p1.4.m4.1.1.2.2.cmml" xref="S4.SS2.p1.4.m4.1.1.2.2">𝑃</ci><ci id="S4.SS2.p1.4.m4.1.1.2.3.cmml" xref="S4.SS2.p1.4.m4.1.1.2.3">𝜃</ci></apply><apply id="S4.SS2.p1.4.m4.1.1.3.cmml" xref="S4.SS2.p1.4.m4.1.1.3"><times id="S4.SS2.p1.4.m4.1.1.3.1.cmml" xref="S4.SS2.p1.4.m4.1.1.3.1"></times><ci id="S4.SS2.p1.4.m4.1.1.3.2.cmml" xref="S4.SS2.p1.4.m4.1.1.3.2">𝑒</ci><ci id="S4.SS2.p1.4.m4.1.1.3.3.cmml" xref="S4.SS2.p1.4.m4.1.1.3.3">𝑣</ci><ci id="S4.SS2.p1.4.m4.1.1.3.4.cmml" xref="S4.SS2.p1.4.m4.1.1.3.4">𝑎</ci><ci id="S4.SS2.p1.4.m4.1.1.3.5.cmml" xref="S4.SS2.p1.4.m4.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.4.m4.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.4.m4.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> prompt remains unchanged. We measure the retrieval capability of all methods by indexing the ground truth documents. Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.SS3" title="C.3 Self-Reflection ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">C.3</span></a> provides details and pseudo-code for the self-reflection process.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Metrics</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">We evaluate retriever performance using standard metrics: <span class="ltx_text ltx_font_bold" id="S4.SS3.p1.1.1">Precision</span>, <span class="ltx_text ltx_font_bold" id="S4.SS3.p1.1.2">Recall</span>, and <span class="ltx_text ltx_font_bold" id="S4.SS3.p1.1.3">F1 score</span>, comparing retrieved document IDs with the ground truth. <span class="ltx_text ltx_font_bold" id="S4.SS3.p1.1.4">Hit Rate</span> assesses robustness by measuring the ratio of questions with at least one ground-truth document retrieved.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">To measure RAG quality, we use <span class="ltx_text ltx_font_bold" id="S4.SS3.p2.1.1">ROUGE-2 (R-2)</span> and <span class="ltx_text ltx_font_bold" id="S4.SS3.p2.1.2">ROUGE-SU4 (R-SU4)</span>. R-2 computes shared bigrams between predicted answers and ground truth, while R-SU4 calculates skip-bigram overlap with a skip distance of four. Higher ROUGE scores indicate greater content overlap and more informative answers, suggesting better retrieval methods.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Main Results</h3>
<section class="ltx_subsubsection" id="S4.SS4.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.1 </span>Comparison of the Retrieval Capability</h4>
<div class="ltx_para" id="S4.SS4.SSS1.p1">
<p class="ltx_p" id="S4.SS4.SSS1.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T3" title="Table 3 ‣ 3.2 Proximal Policy Optimization of LLMs with Feedback ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">3</span></a> shows that <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.1">SeRTS (max ucb)</span> consistently improves <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS1.p1.1.2">Recall</span> and <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS1.p1.1.3">Hit Rate</span> compared to <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.4">Reflection</span> for both <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.5">GPT-3.5-turbo</span> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.6">LLama2-7B-chat</span> models. This performance gap supports our DoT assumption that higher-quality feedback induces more accurate reasoning. The performance gap between <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.7">GPT-3.5-turbo</span> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.8">LLama2-7B-chat</span> is attributed to <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.9">GPT-3.5</span>’s larger parameter count (175B) and stronger reasoning capacity compared to <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.10">LLama2</span> (7B). In addition, increasing the maximal simulation number further boosts the performance of both <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.11">SeRTS</span> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.12">Reflection</span>. <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS1.p1.1.13">SeRTS (sim 12, max ucb)</span> improves <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS1.p1.1.14">Recall</span> and <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS1.p1.1.15">Hit Rate</span> by 5.5 and 2.5 percentage points compared to the vanilla <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS1.p1.1.16">BM25</span> retriever.</p>
</div>
<figure class="ltx_table" id="S4.T4">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T4.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T4.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T4.1.1.1.1" style="padding-left:9.1pt;padding-right:9.1pt;">Retrieval Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.2" style="padding-left:9.1pt;padding-right:9.1pt;">R-2 Recall</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.3" style="padding-left:9.1pt;padding-right:9.1pt;">R-2 F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.4" style="padding-left:9.1pt;padding-right:9.1pt;">R-SU4 Recall</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.5" style="padding-left:9.1pt;padding-right:9.1pt;">R-SU4 F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T4.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.1.2.1.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.2.1.1.1">Ground Truth</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.2.1.2" style="padding-left:9.1pt;padding-right:9.1pt;">57.02</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.2.1.3" style="padding-left:9.1pt;padding-right:9.1pt;">56.64</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.2.1.4" style="padding-left:9.1pt;padding-right:9.1pt;">58.26</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.2.1.5" style="padding-left:9.1pt;padding-right:9.1pt;">57.42</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.1.3.2.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.3.2.1.1">BM25</span></th>
<td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.2" style="padding-left:9.1pt;padding-right:9.1pt;">25.58</td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.3" style="padding-left:9.1pt;padding-right:9.1pt;">22.74</td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.4" style="padding-left:9.1pt;padding-right:9.1pt;">29.63</td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.5" style="padding-left:9.1pt;padding-right:9.1pt;">26.22</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T4.1.4.3.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.4.3.1.1">GPT-3.5-turbo + Reflection</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.4.3.2" style="padding-left:9.1pt;padding-right:9.1pt;">26.92</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.4.3.3" style="padding-left:9.1pt;padding-right:9.1pt;">24.08</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.4.3.4" style="padding-left:9.1pt;padding-right:9.1pt;">30.86</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.4.3.5" style="padding-left:9.1pt;padding-right:9.1pt;">27.41</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.1.5.4.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.5.4.1.1">GPT-3.5-turbo + SeRTS (max ucb)</span></th>
<td class="ltx_td ltx_align_center" id="S4.T4.1.5.4.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.5.4.2.1">27.25</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.5.4.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.5.4.3.1">24.35</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.5.4.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.5.4.4.1">31.25</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.5.4.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.5.4.5.1">27.77</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.1.6.5.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.6.5.1.1">LLama2-7b + Reflection</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.6.5.2" style="padding-left:9.1pt;padding-right:9.1pt;">25.73</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.6.5.3" style="padding-left:9.1pt;padding-right:9.1pt;">22.86</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.6.5.4" style="padding-left:9.1pt;padding-right:9.1pt;">29.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.6.5.5" style="padding-left:9.1pt;padding-right:9.1pt;">26.41</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.7.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.1.7.6.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.7.6.1.1">LLama2-7b + SeRTS (max ucb)</span></th>
<td class="ltx_td ltx_align_center" id="S4.T4.1.7.6.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.7.6.2.1">26.18</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.7.6.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.7.6.3.1">23.20</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.7.6.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.7.6.4.1">30.30</span></td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.7.6.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.7.6.5.1">26.79</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.8.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.1.8.7.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.8.7.1.1">LLama2-7b + Reflection (PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.8.7.2" style="padding-left:9.1pt;padding-right:9.1pt;">26.20</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.8.7.3" style="padding-left:9.1pt;padding-right:9.1pt;">23.41</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.8.7.4" style="padding-left:9.1pt;padding-right:9.1pt;">30.24</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.8.7.5" style="padding-left:9.1pt;padding-right:9.1pt;">26.93</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.9.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T4.1.9.8.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T4.1.9.8.1.1">LLama2-7b + SeRTS (PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.9.8.2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.9.8.2.1">26.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.9.8.3" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.9.8.3.1">23.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.9.8.4" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.9.8.4.1">30.73</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.9.8.5" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.1.9.8.5.1">27.34</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Answer Generation Results on BioASQ Task 11b batch 1 Test Set. The highest values are <span class="ltx_text ltx_font_bold" id="S4.T4.3.1">bolded</span>. All metrics are averaged across three runs with three random seeds {42, 43, 44}.</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S4.SS4.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.4.2 </span>Effect on RAG</h4>
<div class="ltx_para" id="S4.SS4.SSS2.p1">
<p class="ltx_p" id="S4.SS4.SSS2.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.T4" title="Table 4 ‣ 4.4.1 Comparison of the Retrieval Capability ‣ 4.4 Main Results ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">4</span></a> presents the RAG performance of <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.1">LLama2-7b-chat</span> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.2">GPT-3.5-turbo</span> using different retrieval methods on the bio-medical QA task. The large gap between <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p1.1.3">BM25</span> and <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p1.1.4">GROUND TRUTH</span> highlights the importance of document retrieval quality in generating final answers for the difficult medical QA task. Variants of <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p1.1.5">SeRTS</span> perform best among all methods on all metrics, with <span class="ltx_text ltx_markedasmath ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.6">SeRTS (max ucb)</span> achieving 0.5 <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p1.1.7">R-2 F1</span> and 0.5 <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p1.1.8">R-SU4 F1</span> score improvements over <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.9">BM25</span> on BioASQ dataset. The improvement of <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.10">SeRTS (max ucb)</span> over <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p1.1.11">Reflection</span> demonstrates the effectiveness of our proposed method.</p>
</div>
<div class="ltx_para" id="S4.SS4.SSS2.p2">
<p class="ltx_p" id="S4.SS4.SSS2.p2.1">Fine-tuning with the PPO objective further improves the performance of <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.1">Reflection</span> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.2">SeRTS</span>, with <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.3">SeRTS (PPO)</span> acquiring 0.4 <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p2.1.4">R-2 F1</span> and 0.6 <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p2.1.5">R-SU4 F1</span> uplift over <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.6">SeRTS (MAX UCB)</span> on <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.7">LLama2-7b-chat</span>. This suggests that PPO fine-tuning enables self-improvement and domain knowledge acquisition for bio-medical RAG. <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.8">SeRTS (max ucb)</span> achieves 1.5 points <span class="ltx_text ltx_font_bold" id="S4.SS4.SSS2.p2.1.9">R-SU4 F1</span> increase over <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.10">BM25</span> using <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.11">GPT-3.5-turbo</span> model, while <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p2.1.12">LLama2-7b-chat + SeRTS (PPO)</span> brings a total of 1.1 point improvement, narrowing the retrieval performance gap between the small and large language models.</p>
</div>
<div class="ltx_para" id="S4.SS4.SSS2.p3">
<p class="ltx_p" id="S4.SS4.SSS2.p3.1">The superiority of <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.1">SeRTS</span> method over <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.2">Reflection</span> is evident in both <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.3">PPO</span> and zero-shot variants when computation amounts are controlled to be similar (<span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.4">sim 6</span> &amp; <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.5">sim 12</span>), showing the high scalability of <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.6">SeRTS</span> compared to <span class="ltx_text ltx_font_smallcaps" id="S4.SS4.SSS2.p3.1.7">Reflection</span>.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.5 </span>Ablation Study</h3>
<section class="ltx_subsubsection" id="S4.SS5.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.5.1 </span>Enhancement of PPO on SeRTS</h4>
<div class="ltx_para" id="S4.SS5.SSS1.p1">
<p class="ltx_p" id="S4.SS5.SSS1.p1.14">We examine the effect of PPO fine-tuning on RAG performance by gradually switching the original weight <math alttext="\theta" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.1.m1.1"><semantics id="S4.SS5.SSS1.p1.1.m1.1a"><mi id="S4.SS5.SSS1.p1.1.m1.1.1" xref="S4.SS5.SSS1.p1.1.m1.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.1.m1.1b"><ci id="S4.SS5.SSS1.p1.1.m1.1.1.cmml" xref="S4.SS5.SSS1.p1.1.m1.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.1.m1.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.1.m1.1d">italic_θ</annotation></semantics></math> of the proposer <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.2.m2.1"><semantics id="S4.SS5.SSS1.p1.2.m2.1a"><msubsup id="S4.SS5.SSS1.p1.2.m2.1.1" xref="S4.SS5.SSS1.p1.2.m2.1.1.cmml"><mi id="S4.SS5.SSS1.p1.2.m2.1.1.2.2" xref="S4.SS5.SSS1.p1.2.m2.1.1.2.2.cmml">P</mi><mi id="S4.SS5.SSS1.p1.2.m2.1.1.2.3" xref="S4.SS5.SSS1.p1.2.m2.1.1.2.3.cmml">θ</mi><mrow id="S4.SS5.SSS1.p1.2.m2.1.1.3" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.2.m2.1.1.3.2" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.2.cmml">q</mi><mo id="S4.SS5.SSS1.p1.2.m2.1.1.3.1" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.2.m2.1.1.3.3" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.3.cmml">u</mi><mo id="S4.SS5.SSS1.p1.2.m2.1.1.3.1a" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.2.m2.1.1.3.4" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.4.cmml">e</mi><mo id="S4.SS5.SSS1.p1.2.m2.1.1.3.1b" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.2.m2.1.1.3.5" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.5.cmml">r</mi><mo id="S4.SS5.SSS1.p1.2.m2.1.1.3.1c" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.2.m2.1.1.3.6" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.2.m2.1b"><apply id="S4.SS5.SSS1.p1.2.m2.1.1.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.2.m2.1.1.1.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.2.m2.1.1.2.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.2.m2.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.2.m2.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.2.2">𝑃</ci><ci id="S4.SS5.SSS1.p1.2.m2.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.2.3">𝜃</ci></apply><apply id="S4.SS5.SSS1.p1.2.m2.1.1.3.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3"><times id="S4.SS5.SSS1.p1.2.m2.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.2.m2.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.2">𝑞</ci><ci id="S4.SS5.SSS1.p1.2.m2.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.3">𝑢</ci><ci id="S4.SS5.SSS1.p1.2.m2.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.4">𝑒</ci><ci id="S4.SS5.SSS1.p1.2.m2.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.5">𝑟</ci><ci id="S4.SS5.SSS1.p1.2.m2.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.2.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.2.m2.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.2.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> and evaluator <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.3.m3.1"><semantics id="S4.SS5.SSS1.p1.3.m3.1a"><msubsup id="S4.SS5.SSS1.p1.3.m3.1.1" xref="S4.SS5.SSS1.p1.3.m3.1.1.cmml"><mi id="S4.SS5.SSS1.p1.3.m3.1.1.2.2" xref="S4.SS5.SSS1.p1.3.m3.1.1.2.2.cmml">P</mi><mi id="S4.SS5.SSS1.p1.3.m3.1.1.2.3" xref="S4.SS5.SSS1.p1.3.m3.1.1.2.3.cmml">θ</mi><mrow id="S4.SS5.SSS1.p1.3.m3.1.1.3" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.3.m3.1.1.3.2" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.2.cmml">e</mi><mo id="S4.SS5.SSS1.p1.3.m3.1.1.3.1" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.3.m3.1.1.3.3" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.3.cmml">v</mi><mo id="S4.SS5.SSS1.p1.3.m3.1.1.3.1a" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.3.m3.1.1.3.4" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.4.cmml">a</mi><mo id="S4.SS5.SSS1.p1.3.m3.1.1.3.1b" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.3.m3.1.1.3.5" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.3.m3.1b"><apply id="S4.SS5.SSS1.p1.3.m3.1.1.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.3.m3.1.1.1.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.3.m3.1.1.2.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.3.m3.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.3.m3.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.2.2">𝑃</ci><ci id="S4.SS5.SSS1.p1.3.m3.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.2.3">𝜃</ci></apply><apply id="S4.SS5.SSS1.p1.3.m3.1.1.3.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3"><times id="S4.SS5.SSS1.p1.3.m3.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.3.m3.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.2">𝑒</ci><ci id="S4.SS5.SSS1.p1.3.m3.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.3">𝑣</ci><ci id="S4.SS5.SSS1.p1.3.m3.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.4">𝑎</ci><ci id="S4.SS5.SSS1.p1.3.m3.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.3.m3.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.3.m3.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.3.m3.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> to <math alttext="\theta_{p}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.4.m4.1"><semantics id="S4.SS5.SSS1.p1.4.m4.1a"><msub id="S4.SS5.SSS1.p1.4.m4.1.1" xref="S4.SS5.SSS1.p1.4.m4.1.1.cmml"><mi id="S4.SS5.SSS1.p1.4.m4.1.1.2" xref="S4.SS5.SSS1.p1.4.m4.1.1.2.cmml">θ</mi><mi id="S4.SS5.SSS1.p1.4.m4.1.1.3" xref="S4.SS5.SSS1.p1.4.m4.1.1.3.cmml">p</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.4.m4.1b"><apply id="S4.SS5.SSS1.p1.4.m4.1.1.cmml" xref="S4.SS5.SSS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.4.m4.1.1.1.cmml" xref="S4.SS5.SSS1.p1.4.m4.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.4.m4.1.1.2.cmml" xref="S4.SS5.SSS1.p1.4.m4.1.1.2">𝜃</ci><ci id="S4.SS5.SSS1.p1.4.m4.1.1.3.cmml" xref="S4.SS5.SSS1.p1.4.m4.1.1.3">𝑝</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.4.m4.1c">\theta_{p}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.4.m4.1d">italic_θ start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT</annotation></semantics></math> fine-tuned by PPO. Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.T5" title="Table 5 ‣ 4.5.1 Enhancement of PPO on SeRTS ‣ 4.5 Ablation Study ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">5</span></a> shows that switching from <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.5.m5.1"><semantics id="S4.SS5.SSS1.p1.5.m5.1a"><msubsup id="S4.SS5.SSS1.p1.5.m5.1.1" xref="S4.SS5.SSS1.p1.5.m5.1.1.cmml"><mi id="S4.SS5.SSS1.p1.5.m5.1.1.2.2" xref="S4.SS5.SSS1.p1.5.m5.1.1.2.2.cmml">P</mi><mi id="S4.SS5.SSS1.p1.5.m5.1.1.2.3" xref="S4.SS5.SSS1.p1.5.m5.1.1.2.3.cmml">θ</mi><mrow id="S4.SS5.SSS1.p1.5.m5.1.1.3" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.5.m5.1.1.3.2" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.2.cmml">q</mi><mo id="S4.SS5.SSS1.p1.5.m5.1.1.3.1" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.5.m5.1.1.3.3" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.3.cmml">u</mi><mo id="S4.SS5.SSS1.p1.5.m5.1.1.3.1a" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.5.m5.1.1.3.4" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.4.cmml">e</mi><mo id="S4.SS5.SSS1.p1.5.m5.1.1.3.1b" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.5.m5.1.1.3.5" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.5.cmml">r</mi><mo id="S4.SS5.SSS1.p1.5.m5.1.1.3.1c" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.5.m5.1.1.3.6" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.5.m5.1b"><apply id="S4.SS5.SSS1.p1.5.m5.1.1.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.5.m5.1.1.1.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.5.m5.1.1.2.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.5.m5.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.5.m5.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.2.2">𝑃</ci><ci id="S4.SS5.SSS1.p1.5.m5.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.2.3">𝜃</ci></apply><apply id="S4.SS5.SSS1.p1.5.m5.1.1.3.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3"><times id="S4.SS5.SSS1.p1.5.m5.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.5.m5.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.2">𝑞</ci><ci id="S4.SS5.SSS1.p1.5.m5.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.3">𝑢</ci><ci id="S4.SS5.SSS1.p1.5.m5.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.4">𝑒</ci><ci id="S4.SS5.SSS1.p1.5.m5.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.5">𝑟</ci><ci id="S4.SS5.SSS1.p1.5.m5.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.5.m5.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.5.m5.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.5.m5.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> to <math alttext="P_{\theta_{p}}^{query}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.6.m6.1"><semantics id="S4.SS5.SSS1.p1.6.m6.1a"><msubsup id="S4.SS5.SSS1.p1.6.m6.1.1" xref="S4.SS5.SSS1.p1.6.m6.1.1.cmml"><mi id="S4.SS5.SSS1.p1.6.m6.1.1.2.2" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.2.cmml">P</mi><msub id="S4.SS5.SSS1.p1.6.m6.1.1.2.3" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3.cmml"><mi id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.2" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3.2.cmml">θ</mi><mi id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.3" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3.3.cmml">p</mi></msub><mrow id="S4.SS5.SSS1.p1.6.m6.1.1.3" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.6.m6.1.1.3.2" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.2.cmml">q</mi><mo id="S4.SS5.SSS1.p1.6.m6.1.1.3.1" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.6.m6.1.1.3.3" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.3.cmml">u</mi><mo id="S4.SS5.SSS1.p1.6.m6.1.1.3.1a" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.6.m6.1.1.3.4" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.4.cmml">e</mi><mo id="S4.SS5.SSS1.p1.6.m6.1.1.3.1b" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.6.m6.1.1.3.5" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.5.cmml">r</mi><mo id="S4.SS5.SSS1.p1.6.m6.1.1.3.1c" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.6.m6.1.1.3.6" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.6.m6.1b"><apply id="S4.SS5.SSS1.p1.6.m6.1.1.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.6.m6.1.1.1.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.6.m6.1.1.2.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.6.m6.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.6.m6.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.2">𝑃</ci><apply id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.1.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3">subscript</csymbol><ci id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.2.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3.2">𝜃</ci><ci id="S4.SS5.SSS1.p1.6.m6.1.1.2.3.3.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.2.3.3">𝑝</ci></apply></apply><apply id="S4.SS5.SSS1.p1.6.m6.1.1.3.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3"><times id="S4.SS5.SSS1.p1.6.m6.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.6.m6.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.2">𝑞</ci><ci id="S4.SS5.SSS1.p1.6.m6.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.3">𝑢</ci><ci id="S4.SS5.SSS1.p1.6.m6.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.4">𝑒</ci><ci id="S4.SS5.SSS1.p1.6.m6.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.5">𝑟</ci><ci id="S4.SS5.SSS1.p1.6.m6.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.6.m6.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.6.m6.1c">P_{\theta_{p}}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.6.m6.1d">italic_P start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> increases <span class="ltx_text ltx_font_bold" id="S4.SS5.SSS1.p1.14.1">R-SU4 F1</span> from 26.41 to 26.91 in <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS1.p1.14.2">Reflection</span> and from 26.79 to 26.89 in <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS1.p1.14.3">SeRTS</span>. Further switching from <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.7.m7.1"><semantics id="S4.SS5.SSS1.p1.7.m7.1a"><msubsup id="S4.SS5.SSS1.p1.7.m7.1.1" xref="S4.SS5.SSS1.p1.7.m7.1.1.cmml"><mi id="S4.SS5.SSS1.p1.7.m7.1.1.2.2" xref="S4.SS5.SSS1.p1.7.m7.1.1.2.2.cmml">P</mi><mi id="S4.SS5.SSS1.p1.7.m7.1.1.2.3" xref="S4.SS5.SSS1.p1.7.m7.1.1.2.3.cmml">θ</mi><mrow id="S4.SS5.SSS1.p1.7.m7.1.1.3" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.7.m7.1.1.3.2" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.2.cmml">e</mi><mo id="S4.SS5.SSS1.p1.7.m7.1.1.3.1" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.7.m7.1.1.3.3" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.3.cmml">v</mi><mo id="S4.SS5.SSS1.p1.7.m7.1.1.3.1a" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.7.m7.1.1.3.4" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.4.cmml">a</mi><mo id="S4.SS5.SSS1.p1.7.m7.1.1.3.1b" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.7.m7.1.1.3.5" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.7.m7.1b"><apply id="S4.SS5.SSS1.p1.7.m7.1.1.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.7.m7.1.1.1.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.7.m7.1.1.2.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.7.m7.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.7.m7.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.2.2">𝑃</ci><ci id="S4.SS5.SSS1.p1.7.m7.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.2.3">𝜃</ci></apply><apply id="S4.SS5.SSS1.p1.7.m7.1.1.3.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3"><times id="S4.SS5.SSS1.p1.7.m7.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.7.m7.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.2">𝑒</ci><ci id="S4.SS5.SSS1.p1.7.m7.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.3">𝑣</ci><ci id="S4.SS5.SSS1.p1.7.m7.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.4">𝑎</ci><ci id="S4.SS5.SSS1.p1.7.m7.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.7.m7.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.7.m7.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.7.m7.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> to <math alttext="P_{\theta_{p}}^{eval}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.8.m8.1"><semantics id="S4.SS5.SSS1.p1.8.m8.1a"><msubsup id="S4.SS5.SSS1.p1.8.m8.1.1" xref="S4.SS5.SSS1.p1.8.m8.1.1.cmml"><mi id="S4.SS5.SSS1.p1.8.m8.1.1.2.2" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.2.cmml">P</mi><msub id="S4.SS5.SSS1.p1.8.m8.1.1.2.3" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3.cmml"><mi id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.2" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3.2.cmml">θ</mi><mi id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.3" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3.3.cmml">p</mi></msub><mrow id="S4.SS5.SSS1.p1.8.m8.1.1.3" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.8.m8.1.1.3.2" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.2.cmml">e</mi><mo id="S4.SS5.SSS1.p1.8.m8.1.1.3.1" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.8.m8.1.1.3.3" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.3.cmml">v</mi><mo id="S4.SS5.SSS1.p1.8.m8.1.1.3.1a" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.8.m8.1.1.3.4" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.4.cmml">a</mi><mo id="S4.SS5.SSS1.p1.8.m8.1.1.3.1b" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.8.m8.1.1.3.5" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.8.m8.1b"><apply id="S4.SS5.SSS1.p1.8.m8.1.1.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.8.m8.1.1.1.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.8.m8.1.1.2.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.8.m8.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.8.m8.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.2">𝑃</ci><apply id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.1.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3">subscript</csymbol><ci id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.2.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3.2">𝜃</ci><ci id="S4.SS5.SSS1.p1.8.m8.1.1.2.3.3.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.2.3.3">𝑝</ci></apply></apply><apply id="S4.SS5.SSS1.p1.8.m8.1.1.3.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3"><times id="S4.SS5.SSS1.p1.8.m8.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.8.m8.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.2">𝑒</ci><ci id="S4.SS5.SSS1.p1.8.m8.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.3">𝑣</ci><ci id="S4.SS5.SSS1.p1.8.m8.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.4">𝑎</ci><ci id="S4.SS5.SSS1.p1.8.m8.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.8.m8.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.8.m8.1c">P_{\theta_{p}}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.8.m8.1d">italic_P start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> with <math alttext="P_{\theta_{p}}^{query}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.9.m9.1"><semantics id="S4.SS5.SSS1.p1.9.m9.1a"><msubsup id="S4.SS5.SSS1.p1.9.m9.1.1" xref="S4.SS5.SSS1.p1.9.m9.1.1.cmml"><mi id="S4.SS5.SSS1.p1.9.m9.1.1.2.2" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.2.cmml">P</mi><msub id="S4.SS5.SSS1.p1.9.m9.1.1.2.3" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3.cmml"><mi id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.2" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3.2.cmml">θ</mi><mi id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.3" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3.3.cmml">p</mi></msub><mrow id="S4.SS5.SSS1.p1.9.m9.1.1.3" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.9.m9.1.1.3.2" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.2.cmml">q</mi><mo id="S4.SS5.SSS1.p1.9.m9.1.1.3.1" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.9.m9.1.1.3.3" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.3.cmml">u</mi><mo id="S4.SS5.SSS1.p1.9.m9.1.1.3.1a" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.9.m9.1.1.3.4" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.4.cmml">e</mi><mo id="S4.SS5.SSS1.p1.9.m9.1.1.3.1b" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.9.m9.1.1.3.5" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.5.cmml">r</mi><mo id="S4.SS5.SSS1.p1.9.m9.1.1.3.1c" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.9.m9.1.1.3.6" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.9.m9.1b"><apply id="S4.SS5.SSS1.p1.9.m9.1.1.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.9.m9.1.1.1.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.9.m9.1.1.2.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.9.m9.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.9.m9.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.2">𝑃</ci><apply id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.1.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3">subscript</csymbol><ci id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.2.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3.2">𝜃</ci><ci id="S4.SS5.SSS1.p1.9.m9.1.1.2.3.3.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.2.3.3">𝑝</ci></apply></apply><apply id="S4.SS5.SSS1.p1.9.m9.1.1.3.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3"><times id="S4.SS5.SSS1.p1.9.m9.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.9.m9.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.2">𝑞</ci><ci id="S4.SS5.SSS1.p1.9.m9.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.3">𝑢</ci><ci id="S4.SS5.SSS1.p1.9.m9.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.4">𝑒</ci><ci id="S4.SS5.SSS1.p1.9.m9.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.5">𝑟</ci><ci id="S4.SS5.SSS1.p1.9.m9.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.9.m9.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.9.m9.1c">P_{\theta_{p}}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.9.m9.1d">italic_P start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> as the query proposer continues to improve performance on all metrics. This suggests that <math alttext="P_{\theta_{p}}^{eval}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.10.m10.1"><semantics id="S4.SS5.SSS1.p1.10.m10.1a"><msubsup id="S4.SS5.SSS1.p1.10.m10.1.1" xref="S4.SS5.SSS1.p1.10.m10.1.1.cmml"><mi id="S4.SS5.SSS1.p1.10.m10.1.1.2.2" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.2.cmml">P</mi><msub id="S4.SS5.SSS1.p1.10.m10.1.1.2.3" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3.cmml"><mi id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.2" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3.2.cmml">θ</mi><mi id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.3" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3.3.cmml">p</mi></msub><mrow id="S4.SS5.SSS1.p1.10.m10.1.1.3" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.10.m10.1.1.3.2" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.2.cmml">e</mi><mo id="S4.SS5.SSS1.p1.10.m10.1.1.3.1" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.10.m10.1.1.3.3" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.3.cmml">v</mi><mo id="S4.SS5.SSS1.p1.10.m10.1.1.3.1a" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.10.m10.1.1.3.4" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.4.cmml">a</mi><mo id="S4.SS5.SSS1.p1.10.m10.1.1.3.1b" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.10.m10.1.1.3.5" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.10.m10.1b"><apply id="S4.SS5.SSS1.p1.10.m10.1.1.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.10.m10.1.1.1.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.10.m10.1.1.2.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.10.m10.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.10.m10.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.2">𝑃</ci><apply id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.1.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3">subscript</csymbol><ci id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.2.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3.2">𝜃</ci><ci id="S4.SS5.SSS1.p1.10.m10.1.1.2.3.3.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.2.3.3">𝑝</ci></apply></apply><apply id="S4.SS5.SSS1.p1.10.m10.1.1.3.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3"><times id="S4.SS5.SSS1.p1.10.m10.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.10.m10.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.2">𝑒</ci><ci id="S4.SS5.SSS1.p1.10.m10.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.3">𝑣</ci><ci id="S4.SS5.SSS1.p1.10.m10.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.4">𝑎</ci><ci id="S4.SS5.SSS1.p1.10.m10.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.10.m10.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.10.m10.1c">P_{\theta_{p}}^{eval}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.10.m10.1d">italic_P start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math> has learned to better evaluate retrieved documents and provide suggestions for improved queries, possibly due to the fact that the LM learns from feedback observations <math alttext="F" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.11.m11.1"><semantics id="S4.SS5.SSS1.p1.11.m11.1a"><mi id="S4.SS5.SSS1.p1.11.m11.1.1" xref="S4.SS5.SSS1.p1.11.m11.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.11.m11.1b"><ci id="S4.SS5.SSS1.p1.11.m11.1.1.cmml" xref="S4.SS5.SSS1.p1.11.m11.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.11.m11.1c">F</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.11.m11.1d">italic_F</annotation></semantics></math> and rewards <math alttext="R" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.12.m12.1"><semantics id="S4.SS5.SSS1.p1.12.m12.1a"><mi id="S4.SS5.SSS1.p1.12.m12.1.1" xref="S4.SS5.SSS1.p1.12.m12.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.12.m12.1b"><ci id="S4.SS5.SSS1.p1.12.m12.1.1.cmml" xref="S4.SS5.SSS1.p1.12.m12.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.12.m12.1c">R</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.12.m12.1d">italic_R</annotation></semantics></math> in trajectories <math alttext="\mathcal{T}_{SeRTS}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.13.m13.1"><semantics id="S4.SS5.SSS1.p1.13.m13.1a"><msub id="S4.SS5.SSS1.p1.13.m13.1.1" xref="S4.SS5.SSS1.p1.13.m13.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS5.SSS1.p1.13.m13.1.1.2" xref="S4.SS5.SSS1.p1.13.m13.1.1.2.cmml">𝒯</mi><mrow id="S4.SS5.SSS1.p1.13.m13.1.1.3" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.13.m13.1.1.3.2" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.2.cmml">S</mi><mo id="S4.SS5.SSS1.p1.13.m13.1.1.3.1" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.13.m13.1.1.3.3" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.3.cmml">e</mi><mo id="S4.SS5.SSS1.p1.13.m13.1.1.3.1a" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.13.m13.1.1.3.4" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.4.cmml">R</mi><mo id="S4.SS5.SSS1.p1.13.m13.1.1.3.1b" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.13.m13.1.1.3.5" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.5.cmml">T</mi><mo id="S4.SS5.SSS1.p1.13.m13.1.1.3.1c" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.13.m13.1.1.3.6" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.6.cmml">S</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.13.m13.1b"><apply id="S4.SS5.SSS1.p1.13.m13.1.1.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.13.m13.1.1.1.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.13.m13.1.1.2.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.2">𝒯</ci><apply id="S4.SS5.SSS1.p1.13.m13.1.1.3.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3"><times id="S4.SS5.SSS1.p1.13.m13.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.13.m13.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.2">𝑆</ci><ci id="S4.SS5.SSS1.p1.13.m13.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.3">𝑒</ci><ci id="S4.SS5.SSS1.p1.13.m13.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.4">𝑅</ci><ci id="S4.SS5.SSS1.p1.13.m13.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.5">𝑇</ci><ci id="S4.SS5.SSS1.p1.13.m13.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.13.m13.1.1.3.6">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.13.m13.1c">\mathcal{T}_{SeRTS}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.13.m13.1d">caligraphic_T start_POSTSUBSCRIPT italic_S italic_e italic_R italic_T italic_S end_POSTSUBSCRIPT</annotation></semantics></math> about what feedback and suggestions can lead to better queries from the proposer <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="S4.SS5.SSS1.p1.14.m14.1"><semantics id="S4.SS5.SSS1.p1.14.m14.1a"><msubsup id="S4.SS5.SSS1.p1.14.m14.1.1" xref="S4.SS5.SSS1.p1.14.m14.1.1.cmml"><mi id="S4.SS5.SSS1.p1.14.m14.1.1.2.2" xref="S4.SS5.SSS1.p1.14.m14.1.1.2.2.cmml">P</mi><mi id="S4.SS5.SSS1.p1.14.m14.1.1.2.3" xref="S4.SS5.SSS1.p1.14.m14.1.1.2.3.cmml">θ</mi><mrow id="S4.SS5.SSS1.p1.14.m14.1.1.3" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.cmml"><mi id="S4.SS5.SSS1.p1.14.m14.1.1.3.2" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.2.cmml">q</mi><mo id="S4.SS5.SSS1.p1.14.m14.1.1.3.1" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.14.m14.1.1.3.3" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.3.cmml">u</mi><mo id="S4.SS5.SSS1.p1.14.m14.1.1.3.1a" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.14.m14.1.1.3.4" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.4.cmml">e</mi><mo id="S4.SS5.SSS1.p1.14.m14.1.1.3.1b" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.14.m14.1.1.3.5" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.5.cmml">r</mi><mo id="S4.SS5.SSS1.p1.14.m14.1.1.3.1c" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.SSS1.p1.14.m14.1.1.3.6" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS1.p1.14.m14.1b"><apply id="S4.SS5.SSS1.p1.14.m14.1.1.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.14.m14.1.1.1.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1">superscript</csymbol><apply id="S4.SS5.SSS1.p1.14.m14.1.1.2.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1"><csymbol cd="ambiguous" id="S4.SS5.SSS1.p1.14.m14.1.1.2.1.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1">subscript</csymbol><ci id="S4.SS5.SSS1.p1.14.m14.1.1.2.2.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.2.2">𝑃</ci><ci id="S4.SS5.SSS1.p1.14.m14.1.1.2.3.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.2.3">𝜃</ci></apply><apply id="S4.SS5.SSS1.p1.14.m14.1.1.3.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3"><times id="S4.SS5.SSS1.p1.14.m14.1.1.3.1.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.1"></times><ci id="S4.SS5.SSS1.p1.14.m14.1.1.3.2.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.2">𝑞</ci><ci id="S4.SS5.SSS1.p1.14.m14.1.1.3.3.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.3">𝑢</ci><ci id="S4.SS5.SSS1.p1.14.m14.1.1.3.4.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.4">𝑒</ci><ci id="S4.SS5.SSS1.p1.14.m14.1.1.3.5.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.5">𝑟</ci><ci id="S4.SS5.SSS1.p1.14.m14.1.1.3.6.cmml" xref="S4.SS5.SSS1.p1.14.m14.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS1.p1.14.m14.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS1.p1.14.m14.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math>.</p>
</div>
<figure class="ltx_table" id="S4.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T5.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T5.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T5.1.1.1.1" style="padding-left:9.1pt;padding-right:9.1pt;">Evaluating Agent</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.1.1.2" style="padding-left:9.1pt;padding-right:9.1pt;">R-2 Recall</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.1.1.3" style="padding-left:9.1pt;padding-right:9.1pt;">R-2 F1</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.1.1.4" style="padding-left:9.1pt;padding-right:9.1pt;">R-SU4 Recall</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.1.1.5" style="padding-left:9.1pt;padding-right:9.1pt;">R-SU4 F1</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T5.1.2.2.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.2.2.1.1">+ Reflection</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.2.2.2" style="padding-left:9.1pt;padding-right:9.1pt;">25.73</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.2.2.3" style="padding-left:9.1pt;padding-right:9.1pt;">22.86</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.2.2.4" style="padding-left:9.1pt;padding-right:9.1pt;">29.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.2.2.5" style="padding-left:9.1pt;padding-right:9.1pt;">26.41</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T5.1.3.3.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.3.3.1.1">+ Reflection (PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.3.3.2" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.3.3.2.1">26.15</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.3.3.3" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.3.3.3.1">23.36</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.3.3.4" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.3.3.4.1">30.11</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.3.3.5" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.3.3.5.1">26.83</span></td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T5.1.4.4.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.4.4.1.1">w. original evaluator</span></th>
</tr>
<tr class="ltx_tr" id="S4.T5.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T5.1.5.5.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.5.5.1.1">+ Reflection (PPO)</span></th>
<td class="ltx_td ltx_align_center" id="S4.T5.1.5.5.2" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.5.5.2.1">26.20</span></td>
<td class="ltx_td ltx_align_center" id="S4.T5.1.5.5.3" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.5.5.3.1">23.41</span></td>
<td class="ltx_td ltx_align_center" id="S4.T5.1.5.5.4" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.5.5.4.1">30.24</span></td>
<td class="ltx_td ltx_align_center" id="S4.T5.1.5.5.5" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.5.5.5.1">26.93</span></td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T5.1.6.6.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.6.6.1.1">w. PPO evaluator</span></th>
</tr>
<tr class="ltx_tr" id="S4.T5.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T5.1.7.7.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.7.7.1.1">+ SeRTS</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.7.7.2" style="padding-left:9.1pt;padding-right:9.1pt;">26.18</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.7.7.3" style="padding-left:9.1pt;padding-right:9.1pt;">23.20</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.7.7.4" style="padding-left:9.1pt;padding-right:9.1pt;">30.30</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T5.1.7.7.5" style="padding-left:9.1pt;padding-right:9.1pt;">26.79</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T5.1.8.8.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.8.8.1.1">+ SeRTS (PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.8.8.2" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.8.8.2.1">25.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.8.8.3" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.8.8.3.1">23.42</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.8.8.4" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.8.8.4.1">30.34</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.8.8.5" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text" id="S4.T5.1.8.8.5.1">26.89</span></td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T5.1.9.9.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.9.9.1.1">w. original evaluator</span></th>
</tr>
<tr class="ltx_tr" id="S4.T5.1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T5.1.10.10.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.10.10.1.1">+ SeRTS (PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.10.10.2" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.10.10.2.1">26.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.10.10.3" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.10.10.3.1">23.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.10.10.4" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.10.10.4.1">30.73</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.10.10.5" rowspan="2" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.1.10.10.5.1">27.34</span></td>
</tr>
</tbody>
<tfoot class="ltx_tfoot">
<tr class="ltx_tr" id="S4.T5.1.11.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T5.1.11.1.1" style="padding-left:9.1pt;padding-right:9.1pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T5.1.11.1.1.1">w. PPO evaluator</span></th>
</tr>
</tfoot>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Effect on Answer Generation Performance of PPO Finetuning on <span class="ltx_text ltx_font_smallcaps" id="S4.T5.4.1">Llama2-7b-chat</span>. The highest values are <span class="ltx_text ltx_font_bold" id="S4.T5.5.2">bolded</span>. All metrics are averaged across three runs with three random seeds {42, 43, 44}.</figcaption>
</figure>
</section>
<section class="ltx_subsubsection" id="S4.SS5.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.5.2 </span>Difference on Selection Policy</h4>
<figure class="ltx_table" id="S4.T6">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T6.2">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T6.2.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T6.2.3.1.1" style="padding-left:8.5pt;padding-right:8.5pt;">Retrieval Method</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.3.1.2" style="padding-left:8.5pt;padding-right:8.5pt;">R-2 Recall</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.3.1.3" style="padding-left:8.5pt;padding-right:8.5pt;">R-2 F1</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.3.1.4" style="padding-left:8.5pt;padding-right:8.5pt;">R-SU4 Recall</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.3.1.5" style="padding-left:8.5pt;padding-right:8.5pt;">R-SU4 F1</td>
</tr>
<tr class="ltx_tr" id="S4.T6.2.4.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T6.2.4.2.1" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T6.2.4.2.1.1">BM25</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.2.4.2.2" style="padding-left:8.5pt;padding-right:8.5pt;">25.58</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.2.4.2.3" style="padding-left:8.5pt;padding-right:8.5pt;">22.74</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.2.4.2.4" style="padding-left:8.5pt;padding-right:8.5pt;">29.63</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.2.4.2.5" style="padding-left:8.5pt;padding-right:8.5pt;">26.22</td>
</tr>
<tr class="ltx_tr" id="S4.T6.2.5.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T6.2.5.3.1" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T6.2.5.3.1.1">Refelction</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.2.5.3.2" style="padding-left:8.5pt;padding-right:8.5pt;">26.92</td>
<td class="ltx_td ltx_align_center" id="S4.T6.2.5.3.3" style="padding-left:8.5pt;padding-right:8.5pt;">24.08</td>
<td class="ltx_td ltx_align_center" id="S4.T6.2.5.3.4" style="padding-left:8.5pt;padding-right:8.5pt;">30.86</td>
<td class="ltx_td ltx_align_center" id="S4.T6.2.5.3.5" style="padding-left:8.5pt;padding-right:8.5pt;">27.41</td>
</tr>
<tr class="ltx_tr" id="S4.T6.2.6.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T6.2.6.4.1" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T6.2.6.4.1.1">SeRTS (random)</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.6.4.2" style="padding-left:8.5pt;padding-right:8.5pt;">25.74</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.6.4.3" style="padding-left:8.5pt;padding-right:8.5pt;">22.87</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.6.4.4" style="padding-left:8.5pt;padding-right:8.5pt;">29.73</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T6.2.6.4.5" style="padding-left:8.5pt;padding-right:8.5pt;">26.29</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T6.1.1.1" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T6.1.1.1.1">SeRTS (max ucb, <math alttext="C=0.0" class="ltx_Math" display="inline" id="S4.T6.1.1.1.1.m1.1"><semantics id="S4.T6.1.1.1.1.m1.1a"><mrow id="S4.T6.1.1.1.1.m1.1.1" xref="S4.T6.1.1.1.1.m1.1.1.cmml"><mi id="S4.T6.1.1.1.1.m1.1.1.2" xref="S4.T6.1.1.1.1.m1.1.1.2.cmml">C</mi><mo id="S4.T6.1.1.1.1.m1.1.1.1" xref="S4.T6.1.1.1.1.m1.1.1.1.cmml">=</mo><mn id="S4.T6.1.1.1.1.m1.1.1.3" xref="S4.T6.1.1.1.1.m1.1.1.3.cmml">0.0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.T6.1.1.1.1.m1.1b"><apply id="S4.T6.1.1.1.1.m1.1.1.cmml" xref="S4.T6.1.1.1.1.m1.1.1"><eq id="S4.T6.1.1.1.1.m1.1.1.1.cmml" xref="S4.T6.1.1.1.1.m1.1.1.1"></eq><ci id="S4.T6.1.1.1.1.m1.1.1.2.cmml" xref="S4.T6.1.1.1.1.m1.1.1.2">𝐶</ci><cn id="S4.T6.1.1.1.1.m1.1.1.3.cmml" type="float" xref="S4.T6.1.1.1.1.m1.1.1.3">0.0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T6.1.1.1.1.m1.1c">C=0.0</annotation><annotation encoding="application/x-llamapun" id="S4.T6.1.1.1.1.m1.1d">italic_C = 0.0</annotation></semantics></math>)</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.1.2" style="padding-left:8.5pt;padding-right:8.5pt;">25.73</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.1.3" style="padding-left:8.5pt;padding-right:8.5pt;">22.87</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.1.4" style="padding-left:8.5pt;padding-right:8.5pt;">29.70</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.1.5" style="padding-left:8.5pt;padding-right:8.5pt;">26.27</td>
</tr>
<tr class="ltx_tr" id="S4.T6.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T6.2.2.1" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T6.2.2.1.1">SeRTS (max ucb, <math alttext="C=0.1" class="ltx_Math" display="inline" id="S4.T6.2.2.1.1.m1.1"><semantics id="S4.T6.2.2.1.1.m1.1a"><mrow id="S4.T6.2.2.1.1.m1.1.1" xref="S4.T6.2.2.1.1.m1.1.1.cmml"><mi id="S4.T6.2.2.1.1.m1.1.1.2" xref="S4.T6.2.2.1.1.m1.1.1.2.cmml">C</mi><mo id="S4.T6.2.2.1.1.m1.1.1.1" xref="S4.T6.2.2.1.1.m1.1.1.1.cmml">=</mo><mn id="S4.T6.2.2.1.1.m1.1.1.3" xref="S4.T6.2.2.1.1.m1.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.T6.2.2.1.1.m1.1b"><apply id="S4.T6.2.2.1.1.m1.1.1.cmml" xref="S4.T6.2.2.1.1.m1.1.1"><eq id="S4.T6.2.2.1.1.m1.1.1.1.cmml" xref="S4.T6.2.2.1.1.m1.1.1.1"></eq><ci id="S4.T6.2.2.1.1.m1.1.1.2.cmml" xref="S4.T6.2.2.1.1.m1.1.1.2">𝐶</ci><cn id="S4.T6.2.2.1.1.m1.1.1.3.cmml" type="float" xref="S4.T6.2.2.1.1.m1.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T6.2.2.1.1.m1.1c">C=0.1</annotation><annotation encoding="application/x-llamapun" id="S4.T6.2.2.1.1.m1.1d">italic_C = 0.1</annotation></semantics></math>)</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T6.2.2.2" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.2.2.2.1">27.25</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T6.2.2.3" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.2.2.3.1">24.35</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T6.2.2.4" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.2.2.4.1">31.25</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T6.2.2.5" style="padding-left:8.5pt;padding-right:8.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.2.2.5.1">27.77</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Effect on Answer Generation Performance of Selection Policy in <span class="ltx_text ltx_font_smallcaps" id="S4.T6.5.1">SeRTS</span>. The highest values are <span class="ltx_text ltx_font_bold" id="S4.T6.6.2">bolded</span>. All metrics are averaged across three runs with three random seeds {42, 43, 44}.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS5.SSS2.p1">
<p class="ltx_p" id="S4.SS5.SSS2.p1.4">Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.T6" title="Table 6 ‣ 4.5.2 Difference on Selection Policy ‣ 4.5 Ablation Study ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">6</span></a> examines how different selection policies in <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS2.p1.4.3">SeRTS</span> affect retrieval performance. Here we evaluate three policies: 1) <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS2.p1.4.4">random</span>, which randomly explores nodes without exploiting assigned scores <math alttext="R" class="ltx_Math" display="inline" id="S4.SS5.SSS2.p1.1.m1.1"><semantics id="S4.SS5.SSS2.p1.1.m1.1a"><mi id="S4.SS5.SSS2.p1.1.m1.1.1" xref="S4.SS5.SSS2.p1.1.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS2.p1.1.m1.1b"><ci id="S4.SS5.SSS2.p1.1.m1.1.1.cmml" xref="S4.SS5.SSS2.p1.1.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS2.p1.1.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS2.p1.1.m1.1d">italic_R</annotation></semantics></math>; 2) <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS2.p1.2.1">max ucb (<math alttext="C=0.0" class="ltx_Math" display="inline" id="S4.SS5.SSS2.p1.2.1.m1.1"><semantics id="S4.SS5.SSS2.p1.2.1.m1.1a"><mrow id="S4.SS5.SSS2.p1.2.1.m1.1.1" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.cmml"><mi id="S4.SS5.SSS2.p1.2.1.m1.1.1.2" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.2.cmml">C</mi><mo id="S4.SS5.SSS2.p1.2.1.m1.1.1.1" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.1.cmml">=</mo><mn id="S4.SS5.SSS2.p1.2.1.m1.1.1.3" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.3.cmml">0.0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS2.p1.2.1.m1.1b"><apply id="S4.SS5.SSS2.p1.2.1.m1.1.1.cmml" xref="S4.SS5.SSS2.p1.2.1.m1.1.1"><eq id="S4.SS5.SSS2.p1.2.1.m1.1.1.1.cmml" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.1"></eq><ci id="S4.SS5.SSS2.p1.2.1.m1.1.1.2.cmml" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.2">𝐶</ci><cn id="S4.SS5.SSS2.p1.2.1.m1.1.1.3.cmml" type="float" xref="S4.SS5.SSS2.p1.2.1.m1.1.1.3">0.0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS2.p1.2.1.m1.1c">C=0.0</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS2.p1.2.1.m1.1d">italic_C = 0.0</annotation></semantics></math>)</span>, which only selects nodes with the highest <math alttext="R" class="ltx_Math" display="inline" id="S4.SS5.SSS2.p1.3.m2.1"><semantics id="S4.SS5.SSS2.p1.3.m2.1a"><mi id="S4.SS5.SSS2.p1.3.m2.1.1" xref="S4.SS5.SSS2.p1.3.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS2.p1.3.m2.1b"><ci id="S4.SS5.SSS2.p1.3.m2.1.1.cmml" xref="S4.SS5.SSS2.p1.3.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS2.p1.3.m2.1c">R</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS2.p1.3.m2.1d">italic_R</annotation></semantics></math> without exploring other options; and 3) <span class="ltx_text ltx_font_smallcaps" id="S4.SS5.SSS2.p1.4.2">max ucb (<math alttext="C=0.1" class="ltx_Math" display="inline" id="S4.SS5.SSS2.p1.4.2.m1.1"><semantics id="S4.SS5.SSS2.p1.4.2.m1.1a"><mrow id="S4.SS5.SSS2.p1.4.2.m1.1.1" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.cmml"><mi id="S4.SS5.SSS2.p1.4.2.m1.1.1.2" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.2.cmml">C</mi><mo id="S4.SS5.SSS2.p1.4.2.m1.1.1.1" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.1.cmml">=</mo><mn id="S4.SS5.SSS2.p1.4.2.m1.1.1.3" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS5.SSS2.p1.4.2.m1.1b"><apply id="S4.SS5.SSS2.p1.4.2.m1.1.1.cmml" xref="S4.SS5.SSS2.p1.4.2.m1.1.1"><eq id="S4.SS5.SSS2.p1.4.2.m1.1.1.1.cmml" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.1"></eq><ci id="S4.SS5.SSS2.p1.4.2.m1.1.1.2.cmml" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.2">𝐶</ci><cn id="S4.SS5.SSS2.p1.4.2.m1.1.1.3.cmml" type="float" xref="S4.SS5.SSS2.p1.4.2.m1.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.SSS2.p1.4.2.m1.1c">C=0.1</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.SSS2.p1.4.2.m1.1d">italic_C = 0.1</annotation></semantics></math>)</span>, which balances exploitation and exploration. The results empirically prove that striking a balance between exploitation and exploration is necessary for <span class="ltx_text ltx_font_bold" id="S4.SS5.SSS2.p1.4.5">SeRTS</span> to achieve ideal performance, while pure exploitation or exploration causes performance degradation.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">We propose Self-Rewarding Tree Search (SeRTS), a plug-and-play retrieval method that combines LLM reasoning with conventional retrievers to address limitations in biomedical retrieval-augmented approaches. SeRTS introduces a reasoning process based on Monte Carlo Tree Search (MCTS) and a self-rewarding paradigm, boosting zero-shot performance in retrieving high-quality, informative results for Retrieval Augmented Generation (RAG). We further enhance retrieval by fine-tuning LLMs with PPO objectives using SeRTS retrieval trajectories as feedback.</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">Experiments using the BioASQ-QA dataset with GPT-3.5-Turbo and LLama2-7b show that SeRTS significantly improves BM25 retriever performance, surpassing the self-reflection baseline in efficiency and scalability. SeRTS (PPO) effectively adapts LLMs to document retrieval, enhancing their ability to find highly relevant documents for RAG when answering medical queries.</p>
</div>
<div class="ltx_para" id="S5.p3">
<p class="ltx_p" id="S5.p3.1">Our work presents an effective method for accurate, comprehensive medical knowledge retrieval using LLMs. While SeRTS outperforms Self-Reflection, both require numerous simulations, limiting widespread application. Future research should focus on developing more efficient reasoning strategies and leveraging the self-improvement capabilities of LLMs to further enhance retrieval efficiency and usability.</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Limitations</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">PPO fine-tuning effectively improves SeRTS’s performance but is prone to Catastrophic Forgetting, degrading LLMs’ instruction-following capability. Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#Sx1.T7" title="Table 7 ‣ Limitations ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">7</span></a> shows error cases where <math alttext="P_{\phi}^{query}" class="ltx_Math" display="inline" id="Sx1.p1.1.m1.1"><semantics id="Sx1.p1.1.m1.1a"><msubsup id="Sx1.p1.1.m1.1.1" xref="Sx1.p1.1.m1.1.1.cmml"><mi id="Sx1.p1.1.m1.1.1.2.2" xref="Sx1.p1.1.m1.1.1.2.2.cmml">P</mi><mi id="Sx1.p1.1.m1.1.1.2.3" xref="Sx1.p1.1.m1.1.1.2.3.cmml">ϕ</mi><mrow id="Sx1.p1.1.m1.1.1.3" xref="Sx1.p1.1.m1.1.1.3.cmml"><mi id="Sx1.p1.1.m1.1.1.3.2" xref="Sx1.p1.1.m1.1.1.3.2.cmml">q</mi><mo id="Sx1.p1.1.m1.1.1.3.1" xref="Sx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.p1.1.m1.1.1.3.3" xref="Sx1.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="Sx1.p1.1.m1.1.1.3.1a" xref="Sx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.p1.1.m1.1.1.3.4" xref="Sx1.p1.1.m1.1.1.3.4.cmml">e</mi><mo id="Sx1.p1.1.m1.1.1.3.1b" xref="Sx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.p1.1.m1.1.1.3.5" xref="Sx1.p1.1.m1.1.1.3.5.cmml">r</mi><mo id="Sx1.p1.1.m1.1.1.3.1c" xref="Sx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.p1.1.m1.1.1.3.6" xref="Sx1.p1.1.m1.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="Sx1.p1.1.m1.1b"><apply id="Sx1.p1.1.m1.1.1.cmml" xref="Sx1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx1.p1.1.m1.1.1.1.cmml" xref="Sx1.p1.1.m1.1.1">superscript</csymbol><apply id="Sx1.p1.1.m1.1.1.2.cmml" xref="Sx1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx1.p1.1.m1.1.1.2.1.cmml" xref="Sx1.p1.1.m1.1.1">subscript</csymbol><ci id="Sx1.p1.1.m1.1.1.2.2.cmml" xref="Sx1.p1.1.m1.1.1.2.2">𝑃</ci><ci id="Sx1.p1.1.m1.1.1.2.3.cmml" xref="Sx1.p1.1.m1.1.1.2.3">italic-ϕ</ci></apply><apply id="Sx1.p1.1.m1.1.1.3.cmml" xref="Sx1.p1.1.m1.1.1.3"><times id="Sx1.p1.1.m1.1.1.3.1.cmml" xref="Sx1.p1.1.m1.1.1.3.1"></times><ci id="Sx1.p1.1.m1.1.1.3.2.cmml" xref="Sx1.p1.1.m1.1.1.3.2">𝑞</ci><ci id="Sx1.p1.1.m1.1.1.3.3.cmml" xref="Sx1.p1.1.m1.1.1.3.3">𝑢</ci><ci id="Sx1.p1.1.m1.1.1.3.4.cmml" xref="Sx1.p1.1.m1.1.1.3.4">𝑒</ci><ci id="Sx1.p1.1.m1.1.1.3.5.cmml" xref="Sx1.p1.1.m1.1.1.3.5">𝑟</ci><ci id="Sx1.p1.1.m1.1.1.3.6.cmml" xref="Sx1.p1.1.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p1.1.m1.1c">P_{\phi}^{query}</annotation><annotation encoding="application/x-llamapun" id="Sx1.p1.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> fails to follow the designed instruction. Although manual templates can temporarily address these issues in our current experiments, the noisy trajectories impede further iteration and self-improvement using SeRTS sampling and PPO fine-tuning when fed back into the loop. As a result, we restrict our experiments to a single iteration of sampling and PPO fine-tuning. Future research should prioritize mitigating Catastrophic Forgetting and investigate the potential of multiple PPO fine-tuning iterations for further LLM self-improvement.</p>
</div>
<figure class="ltx_table" id="Sx1.T7">
<p class="ltx_p ltx_align_center" id="Sx1.T7.7"><span class="ltx_text" id="Sx1.T7.7.1"><span class="ltx_text" id="Sx1.T7.7.1.1" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="Sx1.T7.7.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.1.1.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.1.1.1.1.1" style="width:204.9pt;">Based on the retrieved information, I would suggest the following query to search for more information:</span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.2.2.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.2.2.1.1.1" style="width:204.9pt;"><span class="ltx_text" id="Sx1.T7.7.1.1.1.2.2.1.1.1.1" style="color:#008000;background-color:#FFF5EB;">&lt;query&gt; Does losartan slow down brain atrophy in Alzheimer’s disease? A systematic review and meta-analysis. &lt;/query&gt;</span></span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.3.3.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.3.3.1.1.1" style="width:204.9pt;">Based on the information retrieved, I would suggest the following query to further search for relevant information:</span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.4.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.4.4.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.4.4.1.1.1" style="width:204.9pt;"><span class="ltx_text" id="Sx1.T7.7.1.1.1.4.4.1.1.1.1" style="color:#B30000;background-color:#FFF5EB;">"Does losartan slow down brain atrophy in Alzheimer’s disease?"</span></span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.5.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.5.5.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.5.5.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.5.5.1.1.1" style="width:204.9pt;">Based on the retrieved information, I would suggest the following query to retrieve more abstracts:</span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.6.6">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.6.6.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.6.6.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.6.6.1.1.1" style="width:204.9pt;"><span class="ltx_text" id="Sx1.T7.7.1.1.1.6.6.1.1.1.1" style="color:#B30000;background-color:#FFF5EB;">&lt;query&gt; Does losartan slow down brain atrophy in Alzheimer’s disease? A systematic review and meta-analysis. Corresponding Feedback: Total Score: 40/50</span></span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.7.7">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.7.7.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.7.7.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.7.7.1.1.1" style="width:204.9pt;">Based on the retrieved information, I would suggest the following query to further search for relevant information:</span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.8.8">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.8.8.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.8.8.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.8.8.1.1.1" style="width:204.9pt;"><span class="ltx_text" id="Sx1.T7.7.1.1.1.8.8.1.1.1.1" style="color:#B30000;background-color:#FFF5EB;">"Losartan and brain atrophy in Alzheimer’s disease" Query Here</span></span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.9.9">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.9.9.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.9.9.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.9.9.1.1.1" style="width:204.9pt;">Based on the retrieved information, I would suggest the following query to further search for additional information on dermatillomania:</span>
</span></span></span>
<span class="ltx_tr" id="Sx1.T7.7.1.1.1.10.10">
<span class="ltx_td ltx_align_justify ltx_align_top" id="Sx1.T7.7.1.1.1.10.10.1">
<span class="ltx_inline-block ltx_align_top" id="Sx1.T7.7.1.1.1.10.10.1.1">
<span class="ltx_p" id="Sx1.T7.7.1.1.1.10.10.1.1.1" style="width:204.9pt;"><span class="ltx_text" id="Sx1.T7.7.1.1.1.10.10.1.1.1.1" style="color:#B30000;background-color:#FFF5EB;">"&lt;query&gt; Causes of dermatillomania Query Here &gt;"</span></span>
</span></span></span>
</span>
</span></span></span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Examples of <math alttext="P_{\phi}^{query}" class="ltx_Math" display="inline" id="Sx1.T7.4.m1.1"><semantics id="Sx1.T7.4.m1.1b"><msubsup id="Sx1.T7.4.m1.1.1" xref="Sx1.T7.4.m1.1.1.cmml"><mi id="Sx1.T7.4.m1.1.1.2.2" xref="Sx1.T7.4.m1.1.1.2.2.cmml">P</mi><mi id="Sx1.T7.4.m1.1.1.2.3" xref="Sx1.T7.4.m1.1.1.2.3.cmml">ϕ</mi><mrow id="Sx1.T7.4.m1.1.1.3" xref="Sx1.T7.4.m1.1.1.3.cmml"><mi id="Sx1.T7.4.m1.1.1.3.2" xref="Sx1.T7.4.m1.1.1.3.2.cmml">q</mi><mo id="Sx1.T7.4.m1.1.1.3.1" xref="Sx1.T7.4.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.4.m1.1.1.3.3" xref="Sx1.T7.4.m1.1.1.3.3.cmml">u</mi><mo id="Sx1.T7.4.m1.1.1.3.1b" xref="Sx1.T7.4.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.4.m1.1.1.3.4" xref="Sx1.T7.4.m1.1.1.3.4.cmml">e</mi><mo id="Sx1.T7.4.m1.1.1.3.1c" xref="Sx1.T7.4.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.4.m1.1.1.3.5" xref="Sx1.T7.4.m1.1.1.3.5.cmml">r</mi><mo id="Sx1.T7.4.m1.1.1.3.1d" xref="Sx1.T7.4.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.4.m1.1.1.3.6" xref="Sx1.T7.4.m1.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="Sx1.T7.4.m1.1c"><apply id="Sx1.T7.4.m1.1.1.cmml" xref="Sx1.T7.4.m1.1.1"><csymbol cd="ambiguous" id="Sx1.T7.4.m1.1.1.1.cmml" xref="Sx1.T7.4.m1.1.1">superscript</csymbol><apply id="Sx1.T7.4.m1.1.1.2.cmml" xref="Sx1.T7.4.m1.1.1"><csymbol cd="ambiguous" id="Sx1.T7.4.m1.1.1.2.1.cmml" xref="Sx1.T7.4.m1.1.1">subscript</csymbol><ci id="Sx1.T7.4.m1.1.1.2.2.cmml" xref="Sx1.T7.4.m1.1.1.2.2">𝑃</ci><ci id="Sx1.T7.4.m1.1.1.2.3.cmml" xref="Sx1.T7.4.m1.1.1.2.3">italic-ϕ</ci></apply><apply id="Sx1.T7.4.m1.1.1.3.cmml" xref="Sx1.T7.4.m1.1.1.3"><times id="Sx1.T7.4.m1.1.1.3.1.cmml" xref="Sx1.T7.4.m1.1.1.3.1"></times><ci id="Sx1.T7.4.m1.1.1.3.2.cmml" xref="Sx1.T7.4.m1.1.1.3.2">𝑞</ci><ci id="Sx1.T7.4.m1.1.1.3.3.cmml" xref="Sx1.T7.4.m1.1.1.3.3">𝑢</ci><ci id="Sx1.T7.4.m1.1.1.3.4.cmml" xref="Sx1.T7.4.m1.1.1.3.4">𝑒</ci><ci id="Sx1.T7.4.m1.1.1.3.5.cmml" xref="Sx1.T7.4.m1.1.1.3.5">𝑟</ci><ci id="Sx1.T7.4.m1.1.1.3.6.cmml" xref="Sx1.T7.4.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx1.T7.4.m1.1d">P_{\phi}^{query}</annotation><annotation encoding="application/x-llamapun" id="Sx1.T7.4.m1.1e">italic_P start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> generating query proposals. Cases where <math alttext="P_{\phi}^{query}" class="ltx_Math" display="inline" id="Sx1.T7.5.m2.1"><semantics id="Sx1.T7.5.m2.1b"><msubsup id="Sx1.T7.5.m2.1.1" xref="Sx1.T7.5.m2.1.1.cmml"><mi id="Sx1.T7.5.m2.1.1.2.2" xref="Sx1.T7.5.m2.1.1.2.2.cmml">P</mi><mi id="Sx1.T7.5.m2.1.1.2.3" xref="Sx1.T7.5.m2.1.1.2.3.cmml">ϕ</mi><mrow id="Sx1.T7.5.m2.1.1.3" xref="Sx1.T7.5.m2.1.1.3.cmml"><mi id="Sx1.T7.5.m2.1.1.3.2" xref="Sx1.T7.5.m2.1.1.3.2.cmml">q</mi><mo id="Sx1.T7.5.m2.1.1.3.1" xref="Sx1.T7.5.m2.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.5.m2.1.1.3.3" xref="Sx1.T7.5.m2.1.1.3.3.cmml">u</mi><mo id="Sx1.T7.5.m2.1.1.3.1b" xref="Sx1.T7.5.m2.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.5.m2.1.1.3.4" xref="Sx1.T7.5.m2.1.1.3.4.cmml">e</mi><mo id="Sx1.T7.5.m2.1.1.3.1c" xref="Sx1.T7.5.m2.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.5.m2.1.1.3.5" xref="Sx1.T7.5.m2.1.1.3.5.cmml">r</mi><mo id="Sx1.T7.5.m2.1.1.3.1d" xref="Sx1.T7.5.m2.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.5.m2.1.1.3.6" xref="Sx1.T7.5.m2.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="Sx1.T7.5.m2.1c"><apply id="Sx1.T7.5.m2.1.1.cmml" xref="Sx1.T7.5.m2.1.1"><csymbol cd="ambiguous" id="Sx1.T7.5.m2.1.1.1.cmml" xref="Sx1.T7.5.m2.1.1">superscript</csymbol><apply id="Sx1.T7.5.m2.1.1.2.cmml" xref="Sx1.T7.5.m2.1.1"><csymbol cd="ambiguous" id="Sx1.T7.5.m2.1.1.2.1.cmml" xref="Sx1.T7.5.m2.1.1">subscript</csymbol><ci id="Sx1.T7.5.m2.1.1.2.2.cmml" xref="Sx1.T7.5.m2.1.1.2.2">𝑃</ci><ci id="Sx1.T7.5.m2.1.1.2.3.cmml" xref="Sx1.T7.5.m2.1.1.2.3">italic-ϕ</ci></apply><apply id="Sx1.T7.5.m2.1.1.3.cmml" xref="Sx1.T7.5.m2.1.1.3"><times id="Sx1.T7.5.m2.1.1.3.1.cmml" xref="Sx1.T7.5.m2.1.1.3.1"></times><ci id="Sx1.T7.5.m2.1.1.3.2.cmml" xref="Sx1.T7.5.m2.1.1.3.2">𝑞</ci><ci id="Sx1.T7.5.m2.1.1.3.3.cmml" xref="Sx1.T7.5.m2.1.1.3.3">𝑢</ci><ci id="Sx1.T7.5.m2.1.1.3.4.cmml" xref="Sx1.T7.5.m2.1.1.3.4">𝑒</ci><ci id="Sx1.T7.5.m2.1.1.3.5.cmml" xref="Sx1.T7.5.m2.1.1.3.5">𝑟</ci><ci id="Sx1.T7.5.m2.1.1.3.6.cmml" xref="Sx1.T7.5.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx1.T7.5.m2.1d">P_{\phi}^{query}</annotation><annotation encoding="application/x-llamapun" id="Sx1.T7.5.m2.1e">italic_P start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> successfully follows the instruction are marked in <span class="ltx_text" id="Sx1.T7.10.1" style="color:#B30000;">red</span>, while cases where <math alttext="P_{\phi}^{query}" class="ltx_Math" display="inline" id="Sx1.T7.6.m3.1"><semantics id="Sx1.T7.6.m3.1b"><msubsup id="Sx1.T7.6.m3.1.1" xref="Sx1.T7.6.m3.1.1.cmml"><mi id="Sx1.T7.6.m3.1.1.2.2" xref="Sx1.T7.6.m3.1.1.2.2.cmml">P</mi><mi id="Sx1.T7.6.m3.1.1.2.3" xref="Sx1.T7.6.m3.1.1.2.3.cmml">ϕ</mi><mrow id="Sx1.T7.6.m3.1.1.3" xref="Sx1.T7.6.m3.1.1.3.cmml"><mi id="Sx1.T7.6.m3.1.1.3.2" xref="Sx1.T7.6.m3.1.1.3.2.cmml">q</mi><mo id="Sx1.T7.6.m3.1.1.3.1" xref="Sx1.T7.6.m3.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.6.m3.1.1.3.3" xref="Sx1.T7.6.m3.1.1.3.3.cmml">u</mi><mo id="Sx1.T7.6.m3.1.1.3.1b" xref="Sx1.T7.6.m3.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.6.m3.1.1.3.4" xref="Sx1.T7.6.m3.1.1.3.4.cmml">e</mi><mo id="Sx1.T7.6.m3.1.1.3.1c" xref="Sx1.T7.6.m3.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.6.m3.1.1.3.5" xref="Sx1.T7.6.m3.1.1.3.5.cmml">r</mi><mo id="Sx1.T7.6.m3.1.1.3.1d" xref="Sx1.T7.6.m3.1.1.3.1.cmml">⁢</mo><mi id="Sx1.T7.6.m3.1.1.3.6" xref="Sx1.T7.6.m3.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="Sx1.T7.6.m3.1c"><apply id="Sx1.T7.6.m3.1.1.cmml" xref="Sx1.T7.6.m3.1.1"><csymbol cd="ambiguous" id="Sx1.T7.6.m3.1.1.1.cmml" xref="Sx1.T7.6.m3.1.1">superscript</csymbol><apply id="Sx1.T7.6.m3.1.1.2.cmml" xref="Sx1.T7.6.m3.1.1"><csymbol cd="ambiguous" id="Sx1.T7.6.m3.1.1.2.1.cmml" xref="Sx1.T7.6.m3.1.1">subscript</csymbol><ci id="Sx1.T7.6.m3.1.1.2.2.cmml" xref="Sx1.T7.6.m3.1.1.2.2">𝑃</ci><ci id="Sx1.T7.6.m3.1.1.2.3.cmml" xref="Sx1.T7.6.m3.1.1.2.3">italic-ϕ</ci></apply><apply id="Sx1.T7.6.m3.1.1.3.cmml" xref="Sx1.T7.6.m3.1.1.3"><times id="Sx1.T7.6.m3.1.1.3.1.cmml" xref="Sx1.T7.6.m3.1.1.3.1"></times><ci id="Sx1.T7.6.m3.1.1.3.2.cmml" xref="Sx1.T7.6.m3.1.1.3.2">𝑞</ci><ci id="Sx1.T7.6.m3.1.1.3.3.cmml" xref="Sx1.T7.6.m3.1.1.3.3">𝑢</ci><ci id="Sx1.T7.6.m3.1.1.3.4.cmml" xref="Sx1.T7.6.m3.1.1.3.4">𝑒</ci><ci id="Sx1.T7.6.m3.1.1.3.5.cmml" xref="Sx1.T7.6.m3.1.1.3.5">𝑟</ci><ci id="Sx1.T7.6.m3.1.1.3.6.cmml" xref="Sx1.T7.6.m3.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx1.T7.6.m3.1d">P_{\phi}^{query}</annotation><annotation encoding="application/x-llamapun" id="Sx1.T7.6.m3.1e">italic_P start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> fails to follow the instruction are marked in <span class="ltx_text" id="Sx1.T7.11.2" style="color:#008000;">green</span>.</figcaption>
</figure>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Akyurek et al. (2023)</span>
<span class="ltx_bibblock">
Afra Feyza Akyurek, Ekin Akyurek, Ashwin Kalyan, Peter Clark, Derry Tanti Wijaya, and Niket Tandon. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.acl-long.427" title="">RL4F: Generating natural language feedback with reinforcement learning for repairing model outputs</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 7716–7733, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bang et al. (2023)</span>
<span class="ltx_bibblock">
Yejin Bang, Samuel Cahyawijaya, Nayeon Lee, Wenliang Dai, Dan Su, Bryan Wilie, Holy Lovenia, Ziwei Ji, Tiezheng Yu, Willy Chung, Quyet V. Do, Yan Xu, and Pascale Fung. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.ijcnlp-main.45" title="">A multitask, multilingual, multimodal evaluation of ChatGPT on reasoning, hallucination, and interactivity</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">Proceedings of the 13th International Joint Conference on Natural Language Processing and the 3rd Conference of the Asia-Pacific Chapter of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 675–718, Nusa Dua, Bali. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Feng et al. (2024)</span>
<span class="ltx_bibblock">
Xidong Feng, Ziyu Wan, Muning Wen, Stephen Marcus McAleer, Ying Wen, Weinan Zhang, and Jun Wang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2309.17179" title="">Alphazero-like tree-search can guide large language model decoding and training</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2024)</span>
<span class="ltx_bibblock">
Yunfan Gao, Yun Xiong, Xinyu Gao, Kangxiang Jia, Jinliu Pan, Yuxi Bi, Yi Dai, Jiawei Sun, Meng Wang, and Haofen Wang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2312.10997" title="">Retrieval-augmented generation for large language models: A survey</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Han et al. (2023)</span>
<span class="ltx_bibblock">
Chengcheng Han, Xiaowei Du, Che Zhang, Yixin Lian, Xiang Li, Ming Gao, and Baoyuan Wang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.501" title="">DialCoT meets PPO: Decomposing and exploring reasoning paths in smaller language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 8055–8068, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2022)</span>
<span class="ltx_bibblock">
Edward J. Hu, Yelong Shen, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu Wang, and Weizhu Chen. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=nZeVKeeFYf9" title="">Lora: Low-rank adaptation of large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">The Tenth International Conference on Learning Representations, ICLR 2022, Virtual Event, April 25-29, 2022</em>. OpenReview.net.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jeong et al. (2024)</span>
<span class="ltx_bibblock">
Minbyul Jeong, Jiwoong Sohn, Mujeen Sung, and Jaewoo Kang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2401.15269" title="">Improving medical reasoning through retrieval and self-reflection with retrieval-augmented large language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kamalloo et al. (2023)</span>
<span class="ltx_bibblock">
Ehsan Kamalloo, Nouha Dziri, Charles L. A. Clarke, and Davood Rafiei. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2305.06984" title="">Evaluating open-domain question answering in the era of large language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Krithara et al. (2023)</span>
<span class="ltx_bibblock">
Anastasia Krithara, Anastasios Nentidis, Konstantinos Bougiatiotis, and Georgios Paliouras. 2023.

</span>
<span class="ltx_bibblock">Bioasq-qa: A manually curated corpus for biomedical question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">Scientific Data</em>, 10(1):170.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lanham et al. (2023)</span>
<span class="ltx_bibblock">
Tamera Lanham, Anna Chen, Ansh Radhakrishnan, Benoit Steiner, Carson Denison, Danny Hernandez, Dustin Li, Esin Durmus, Evan Hubinger, Jackson Kernion, et al. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2307.13702" title="">Measuring faithfulness in chain-of-thought reasoning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">ArXiv preprint</em>, abs/2307.13702.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Xibo Li, Bowei Zou, Yifan Fan, Yanling Li, Ai Ti Aw, and Yu Hong. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.209" title="">Interview evaluation: A novel approach for automatic evaluation of conversational question answering models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 3435–3446, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mrini et al. (2022)</span>
<span class="ltx_bibblock">
Khalil Mrini, Harpreet Singh, Franck Dernoncourt, Seunghyun Yoon, Trung Bui, Walter W. Chang, Emilia Farcas, and Ndapa Nakashole. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.coling-1.241" title="">Medical question understanding and answering with knowledge grounding and semantic self-supervision</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 29th International Conference on Computational Linguistics</em>, pages 2734–2747, Gyeongju, Republic of Korea. International Committee on Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nentidis et al. (2023)</span>
<span class="ltx_bibblock">
Anastasios Nentidis, Georgios Katsimpras, Anastasia Krithara, Salvador Lima López, Eulália Farré-Maduell, Luis Gasco, Martin Krallinger, and Georgios Paliouras. 2023.

</span>
<span class="ltx_bibblock">Overview of bioasq 2023: The eleventh bioasq challenge on large-scale biomedical semantic indexing and question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">International Conference of the Cross-Language Evaluation Forum for European Languages</em>, pages 227–250. Springer.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ontanón (2016)</span>
<span class="ltx_bibblock">
Santiago Ontanón. 2016.

</span>
<span class="ltx_bibblock">Informed monte carlo tree search for real-time strategy games.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">2016 IEEE Conference on Computational Intelligence and Games (CIG)</em>, pages 1–8. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2203.02155" title="">Training language models to follow instructions with human feedback</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schulman et al. (2017)</span>
<span class="ltx_bibblock">
John Schulman, Filip Wolski, Prafulla Dhariwal, Alec Radford, and Oleg Klimov. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1707.06347" title="">Proximal policy optimization algorithms</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2024)</span>
<span class="ltx_bibblock">
Xiaoming Shi, Zeming Liu, Li Du, Yuxuan Wang, Hongru Wang, Yuhang Guo, Tong Ruan, Jie Xu, and Shaoting Zhang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2405.10630" title="">Medical dialogue: A survey of categories, methods, evaluation and challenges</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shinn et al. (2024)</span>
<span class="ltx_bibblock">
Noah Shinn, Federico Cassano, Ashwin Gopinath, Karthik Narasimhan, and Shunyu Yao. 2024.

</span>
<span class="ltx_bibblock">Reflexion: Language agents with verbal reinforcement learning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Silver et al. (2016)</span>
<span class="ltx_bibblock">
David Silver, Aja Huang, Chris J Maddison, Arthur Guez, Laurent Sifre, George Van Den Driessche, Julian Schrittwieser, Ioannis Antonoglou, Veda Panneershelvam, Marc Lanctot, et al. 2016.

</span>
<span class="ltx_bibblock">Mastering the game of go with deep neural networks and tree search.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">nature</em>, 529(7587):484–489.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Silver et al. (2017)</span>
<span class="ltx_bibblock">
David Silver, Thomas Hubert, Julian Schrittwieser, Ioannis Antonoglou, Matthew Lai, Arthur Guez, Marc Lanctot, Laurent Sifre, Dharshan Kumaran, Thore Graepel, Timothy Lillicrap, Karen Simonyan, and Demis Hassabis. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1712.01815" title="">Mastering chess and shogi by self-play with a general reinforcement learning algorithm</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sironi et al. (2018)</span>
<span class="ltx_bibblock">
Chiara F Sironi, Jialin Liu, Diego Perez-Liebana, Raluca D Gaina, Ivan Bravi, Simon M Lucas, and Mark HM Winands. 2018.

</span>
<span class="ltx_bibblock">Self-adaptive mcts for general video game playing.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">International Conference on the Applications of Evolutionary Computation</em>, pages 358–375. Springer.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tian et al. (2024)</span>
<span class="ltx_bibblock">
Ye Tian, Baolin Peng, Linfeng Song, Lifeng Jin, Dian Yu, Haitao Mi, and Dong Yu. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2404.12253" title="">Toward self-improvement of llms via imagination, searching, and criticizing</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tian et al. (2019)</span>
<span class="ltx_bibblock">
Yuanhe Tian, Weicheng Ma, Fei Xia, and Yan Song. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/W19-5027" title="">ChiMed: A Chinese medical corpus for question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Proceedings of the 18th BioNLP Workshop and Shared Task</em>, pages 250–260, Florence, Italy. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2307.09288" title="">Llama 2: Open foundation and fine-tuned chat models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">ArXiv preprint</em>, abs/2307.09288.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Hongru Wang, Minda Hu, Yang Deng, Rui Wang, Fei Mi, Weichao Wang, Yasheng Wang, Wai-Chung Kwan, Irwin King, and Kam-Fai Wong. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.641" title="">Large language models as source planner for personalized knowledge-grounded dialogues</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, pages 9556–9569, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2022)</span>
<span class="ltx_bibblock">
Hongru Wang, Huimin Wang, Zezhong Wang, and Kam-Fai Wong. 2022.

</span>
<span class="ltx_bibblock">Integrating pretrained language model for dialogue policy evaluation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">ICASSP 2022-2022 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</em>, pages 6692–6696. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Yubo Wang, Xueguang Ma, and Wenhu Chen. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2309.02233" title="">Augmenting black-box llms with medical textbooks for clinical question answering</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xia et al. (2022)</span>
<span class="ltx_bibblock">
Fei Xia, Bin Li, Yixuan Weng, Shizhu He, Kang Liu, Bin Sun, Shutao Li, and Jun Zhao. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.emnlp-demos.15" title="">MedConQA: Medical conversational question answering system based on knowledge graphs</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Proceedings of the 2022 Conference on Empirical Methods in Natural Language Processing: System Demonstrations</em>, pages 148–158, Abu Dhabi, UAE. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xiong et al. (2024)</span>
<span class="ltx_bibblock">
Guangzhi Xiong, Qiao Jin, Zhiyong Lu, and Aidong Zhang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2402.13178" title="">Benchmarking retrieval-augmented generation for medicine</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2023)</span>
<span class="ltx_bibblock">
Xiao Yu, Maximillian Chen, and Zhou Yu. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.439" title="">Prompt-based Monte-Carlo tree search for goal-oriented dialogue policy planning</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 7101–7125, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2024a)</span>
<span class="ltx_bibblock">
Weizhe Yuan, Richard Yuanzhe Pang, Kyunghyun Cho, Xian Li, Sainbayar Sukhbaatar, Jing Xu, and Jason Weston. 2024a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2401.10020" title="">Self-rewarding language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2024b)</span>
<span class="ltx_bibblock">
Weizhe Yuan, Richard Yuanzhe Pang, Kyunghyun Cho, Sainbayar Sukhbaatar, Jing Xu, and Jason Weston. 2024b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2401.10020" title="">Self-rewarding language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">ArXiv preprint</em>, abs/2401.10020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2023)</span>
<span class="ltx_bibblock">
Zheng Yuan, Hongyi Yuan, Chengpeng Li, Guanting Dong, Chuanqi Tan, and Chang Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2308.01825" title="">Scaling relationship on learning mathematical reasoning with large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">ArXiv preprint</em>, abs/2308.01825.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zakka et al. (2023)</span>
<span class="ltx_bibblock">
Cyril Zakka, Akash Chaurasia, Rohan Shad, Alex R. Dalal, Jennifer L. Kim, Michael Moor, Kevin Alexander, Euan Ashley, Jack Boyd, Kathleen Boyd, Karen Hirsch, Curt Langlotz, Joanna Nelson, and William Hiesinger. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2303.01229" title="">Almanac: Retrieval-augmented language models for clinical medicine</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zelikman et al. (2022)</span>
<span class="ltx_bibblock">
Eric Zelikman, Yuhuai Wu, Jesse Mu, and Noah Goodman. 2022.

</span>
<span class="ltx_bibblock">Star: Bootstrapping reasoning with reasoning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Advances in Neural Information Processing Systems</em>, 35:15476–15488.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2024)</span>
<span class="ltx_bibblock">
Dan Zhang, Sining Zhoubian, Yisong Yue, Yuxiao Dong, and Jie Tang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2406.03816" title="">Rest-mcts*: Llm self-training via process reward guided tree search</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2022)</span>
<span class="ltx_bibblock">
Ming Zhang, Shuai Dou, Ziyang Wang, and Yunfang Wu. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.coling-1.539" title="">Focus-driven contrastive learning for medical question summarization</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Proceedings of the 29th International Conference on Computational Linguistics</em>, pages 6176–6186, Gyeongju, Republic of Korea. International Committee on Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2023)</span>
<span class="ltx_bibblock">
Andy Zhou, Kai Yan, Michal Shlapentokh-Rothman, Haohan Wang, and Yu-Xiong Wang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2310.04406" title="">Language agent tree search unifies reasoning acting and planning in language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">ArXiv preprint</em>, abs/2310.04406.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2024)</span>
<span class="ltx_bibblock">
Andy Zhou, Kai Yan, Michal Shlapentokh-Rothman, Haohan Wang, and Yu-Xiong Wang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2310.04406" title="">Language agent tree search unifies reasoning acting and planning in language models</a>.

</span>
</li>
</ul>
</section>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Five-Point Rubrics of Evaluator</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">Details of evaluation rubrics are illustrated in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A1.T8" title="Table 8 ‣ Appendix A Five-Point Rubrics of Evaluator ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">8</span></a>.</p>
</div>
<figure class="ltx_table" id="A1.T8">
<p class="ltx_p ltx_align_center" id="A1.T8.1"><span class="ltx_text" id="A1.T8.1.1"><span class="ltx_text" id="A1.T8.1.1.1" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="A1.T8.1.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="A1.T8.1.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.1.1.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.1.1.1.1.1" style="width:204.9pt;">- Add 1 point if the knowledge is relevant and provides some information related to the user’s inquiry, even if it is incomplete or contains some irrelevant content.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T8.1.1.1.1.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.1.1.1.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.2.2.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.2.2.1.1.1" style="width:204.9pt;">- Add another point if the knowledge addresses a substantial portion of the user’s question, but does not completely resolve the query or provide a direct answer.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T8.1.1.1.1.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.1.1.1.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.3.3.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.3.3.1.1.1" style="width:204.9pt;">- Award a third point if the response answers the basic elements of the user’s question in a useful way, regardless of whether it seems to have been written by an AI Assistant or if it has elements typically found in blogs or search results.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T8.1.1.1.1.4.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.1.1.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.4.4.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.4.4.1.1.1" style="width:204.9pt;">- Grant a fourth point if the knowledge addresses the user’s question directly and comprehensively, even if there is slight room for improvement in clarity, conciseness, or focus.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T8.1.1.1.1.5.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A1.T8.1.1.1.1.5.5.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T8.1.1.1.1.5.5.1.1">
<span class="ltx_p" id="A1.T8.1.1.1.1.5.5.1.1.1" style="width:204.9pt;">- Bestow a fifth point for knowledge that is impeccably tailored to the user’s question, without extraneous information, reflecting expert knowledge, and can be used to produce a high-quality, engaging, and insightful answer.</span>
</span></span></span>
</span>
</span></span></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Details of <span class="ltx_text ltx_font_bold" id="A1.T8.3.1">{Five-point Rubrics}</span></figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Statistics of Generated Token Number</h2>
<figure class="ltx_table" id="A2.T9">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A2.T9.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A2.T9.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A2.T9.1.1.1.1" style="padding-left:5.7pt;padding-right:5.7pt;">Retrieval Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T9.1.1.1.2" style="padding-left:5.7pt;padding-right:5.7pt;">Token Number</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A2.T9.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A2.T9.1.2.1.1" style="padding-left:5.7pt;padding-right:5.7pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.1.2.1.1.1">Self-Reflection (sim 6)</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.2.1.2" style="padding-left:5.7pt;padding-right:5.7pt;">342,445</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T9.1.3.2.1" style="padding-left:5.7pt;padding-right:5.7pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.1.3.2.1.1">TSR (sim 6)</span></th>
<td class="ltx_td ltx_align_center" id="A2.T9.1.3.2.2" style="padding-left:5.7pt;padding-right:5.7pt;">347,359</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A2.T9.1.4.3.1" style="padding-left:5.7pt;padding-right:5.7pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.1.4.3.1.1">Self-Reflection (sim 12)</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.4.3.2" style="padding-left:5.7pt;padding-right:5.7pt;">973,113</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T9.1.5.4.1" style="padding-left:5.7pt;padding-right:5.7pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.1.5.4.1.1">TSR (sim 12)</span></th>
<td class="ltx_td ltx_align_center" id="A2.T9.1.5.4.2" style="padding-left:5.7pt;padding-right:5.7pt;">679,584</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A2.T9.1.6.5.1" style="padding-left:5.7pt;padding-right:5.7pt;"><span class="ltx_text ltx_font_smallcaps" id="A2.T9.1.6.5.1.1">TSR (sim 12, PPO)</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T9.1.6.5.2" style="padding-left:5.7pt;padding-right:5.7pt;">417,259</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Total Number of Tokens Generated by <span class="ltx_text ltx_font_smallcaps" id="A2.T9.3.1">LLama2-7b-chat</span> during the Experiment in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S4.T4" title="Table 4 ‣ 4.4.1 Comparison of the Retrieval Capability ‣ 4.4 Main Results ‣ 4 Experiments ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">4</span></a>.</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Implementation Details</h2>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>RAG Pipeline</h3>
<div class="ltx_para" id="A3.SS1.p1">
<p class="ltx_p" id="A3.SS1.p1.20">It searches for relevant text from the document test set using the questions as queries and supplies these texts as references to the language model. The language model we used is the <span class="ltx_text ltx_font_smallcaps" id="A3.SS1.p1.20.1">LLama2-7B-chat</span> <cite class="ltx_cite ltx_citemacro_cite">Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib24" title="">2023</a>)</cite>, which has been fine-tuned on the BioASQ corpus using LoRA <cite class="ltx_cite ltx_citemacro_cite">Hu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#bib.bib6" title="">2022</a>)</cite>. This corpus comprises 4,719 question-answer pairs from the BioASQ task 11b training set. Importantly, the documents in the training set are distinct from those in the test set, ensuring no overlap.
The BM25 retrieval function can be expressed as follows:</p>
<table class="ltx_equationgroup ltx_eqn_table" id="A3.E3">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="A3.E3X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\text{score}(q,d)=\sum_{i=1}^{n}IDF(q_{i})" class="ltx_Math" display="inline" id="A3.E3X.2.1.1.m1.3"><semantics id="A3.E3X.2.1.1.m1.3a"><mrow id="A3.E3X.2.1.1.m1.3.3" xref="A3.E3X.2.1.1.m1.3.3.cmml"><mrow id="A3.E3X.2.1.1.m1.3.3.3" xref="A3.E3X.2.1.1.m1.3.3.3.cmml"><mtext id="A3.E3X.2.1.1.m1.3.3.3.2" xref="A3.E3X.2.1.1.m1.3.3.3.2a.cmml">score</mtext><mo id="A3.E3X.2.1.1.m1.3.3.3.1" xref="A3.E3X.2.1.1.m1.3.3.3.1.cmml">⁢</mo><mrow id="A3.E3X.2.1.1.m1.3.3.3.3.2" xref="A3.E3X.2.1.1.m1.3.3.3.3.1.cmml"><mo id="A3.E3X.2.1.1.m1.3.3.3.3.2.1" stretchy="false" xref="A3.E3X.2.1.1.m1.3.3.3.3.1.cmml">(</mo><mi id="A3.E3X.2.1.1.m1.1.1" xref="A3.E3X.2.1.1.m1.1.1.cmml">q</mi><mo id="A3.E3X.2.1.1.m1.3.3.3.3.2.2" xref="A3.E3X.2.1.1.m1.3.3.3.3.1.cmml">,</mo><mi id="A3.E3X.2.1.1.m1.2.2" xref="A3.E3X.2.1.1.m1.2.2.cmml">d</mi><mo id="A3.E3X.2.1.1.m1.3.3.3.3.2.3" stretchy="false" xref="A3.E3X.2.1.1.m1.3.3.3.3.1.cmml">)</mo></mrow></mrow><mo id="A3.E3X.2.1.1.m1.3.3.2" xref="A3.E3X.2.1.1.m1.3.3.2.cmml">=</mo><mrow id="A3.E3X.2.1.1.m1.3.3.1" xref="A3.E3X.2.1.1.m1.3.3.1.cmml"><mstyle displaystyle="true" id="A3.E3X.2.1.1.m1.3.3.1.2" xref="A3.E3X.2.1.1.m1.3.3.1.2.cmml"><munderover id="A3.E3X.2.1.1.m1.3.3.1.2a" xref="A3.E3X.2.1.1.m1.3.3.1.2.cmml"><mo id="A3.E3X.2.1.1.m1.3.3.1.2.2.2" movablelimits="false" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.2.cmml">∑</mo><mrow id="A3.E3X.2.1.1.m1.3.3.1.2.2.3" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.cmml"><mi id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.2" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.2.cmml">i</mi><mo id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.1" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.1.cmml">=</mo><mn id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.3" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.3.cmml">1</mn></mrow><mi id="A3.E3X.2.1.1.m1.3.3.1.2.3" xref="A3.E3X.2.1.1.m1.3.3.1.2.3.cmml">n</mi></munderover></mstyle><mrow id="A3.E3X.2.1.1.m1.3.3.1.1" xref="A3.E3X.2.1.1.m1.3.3.1.1.cmml"><mi id="A3.E3X.2.1.1.m1.3.3.1.1.3" xref="A3.E3X.2.1.1.m1.3.3.1.1.3.cmml">I</mi><mo id="A3.E3X.2.1.1.m1.3.3.1.1.2" xref="A3.E3X.2.1.1.m1.3.3.1.1.2.cmml">⁢</mo><mi id="A3.E3X.2.1.1.m1.3.3.1.1.4" xref="A3.E3X.2.1.1.m1.3.3.1.1.4.cmml">D</mi><mo id="A3.E3X.2.1.1.m1.3.3.1.1.2a" xref="A3.E3X.2.1.1.m1.3.3.1.1.2.cmml">⁢</mo><mi id="A3.E3X.2.1.1.m1.3.3.1.1.5" xref="A3.E3X.2.1.1.m1.3.3.1.1.5.cmml">F</mi><mo id="A3.E3X.2.1.1.m1.3.3.1.1.2b" xref="A3.E3X.2.1.1.m1.3.3.1.1.2.cmml">⁢</mo><mrow id="A3.E3X.2.1.1.m1.3.3.1.1.1.1" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.cmml"><mo id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.2" stretchy="false" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.cmml">(</mo><msub id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.cmml"><mi id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.2" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.2.cmml">q</mi><mi id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.3" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.3" stretchy="false" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.E3X.2.1.1.m1.3b"><apply id="A3.E3X.2.1.1.m1.3.3.cmml" xref="A3.E3X.2.1.1.m1.3.3"><eq id="A3.E3X.2.1.1.m1.3.3.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.2"></eq><apply id="A3.E3X.2.1.1.m1.3.3.3.cmml" xref="A3.E3X.2.1.1.m1.3.3.3"><times id="A3.E3X.2.1.1.m1.3.3.3.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.3.1"></times><ci id="A3.E3X.2.1.1.m1.3.3.3.2a.cmml" xref="A3.E3X.2.1.1.m1.3.3.3.2"><mtext id="A3.E3X.2.1.1.m1.3.3.3.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.3.2">score</mtext></ci><interval closure="open" id="A3.E3X.2.1.1.m1.3.3.3.3.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.3.3.2"><ci id="A3.E3X.2.1.1.m1.1.1.cmml" xref="A3.E3X.2.1.1.m1.1.1">𝑞</ci><ci id="A3.E3X.2.1.1.m1.2.2.cmml" xref="A3.E3X.2.1.1.m1.2.2">𝑑</ci></interval></apply><apply id="A3.E3X.2.1.1.m1.3.3.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1"><apply id="A3.E3X.2.1.1.m1.3.3.1.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2"><csymbol cd="ambiguous" id="A3.E3X.2.1.1.m1.3.3.1.2.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2">superscript</csymbol><apply id="A3.E3X.2.1.1.m1.3.3.1.2.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2"><csymbol cd="ambiguous" id="A3.E3X.2.1.1.m1.3.3.1.2.2.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2">subscript</csymbol><sum id="A3.E3X.2.1.1.m1.3.3.1.2.2.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.2"></sum><apply id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3"><eq id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.1"></eq><ci id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.2">𝑖</ci><cn id="A3.E3X.2.1.1.m1.3.3.1.2.2.3.3.cmml" type="integer" xref="A3.E3X.2.1.1.m1.3.3.1.2.2.3.3">1</cn></apply></apply><ci id="A3.E3X.2.1.1.m1.3.3.1.2.3.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.2.3">𝑛</ci></apply><apply id="A3.E3X.2.1.1.m1.3.3.1.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1"><times id="A3.E3X.2.1.1.m1.3.3.1.1.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.2"></times><ci id="A3.E3X.2.1.1.m1.3.3.1.1.3.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.3">𝐼</ci><ci id="A3.E3X.2.1.1.m1.3.3.1.1.4.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.4">𝐷</ci><ci id="A3.E3X.2.1.1.m1.3.3.1.1.5.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.5">𝐹</ci><apply id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.1.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1">subscript</csymbol><ci id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.2.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.2">𝑞</ci><ci id="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.3.cmml" xref="A3.E3X.2.1.1.m1.3.3.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.E3X.2.1.1.m1.3c">\displaystyle\text{score}(q,d)=\sum_{i=1}^{n}IDF(q_{i})</annotation><annotation encoding="application/x-llamapun" id="A3.E3X.2.1.1.m1.3d">score ( italic_q , italic_d ) = ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT italic_I italic_D italic_F ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(3)</span></td>
</tr>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="A3.E3Xa">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\cdot\frac{f(q_{i},d)\cdot(k_{1}+1)}{f(q_{i},d)+k_{1}\cdot\left(1%
-b+b\cdot\frac{|d|}{\text{avgdl}}\right)}" class="ltx_Math" display="inline" id="A3.E3Xa.2.1.1.m1.7"><semantics id="A3.E3Xa.2.1.1.m1.7a"><mrow id="A3.E3Xa.2.1.1.m1.7.8" xref="A3.E3Xa.2.1.1.m1.7.8.cmml"><mi id="A3.E3Xa.2.1.1.m1.7.8.2" xref="A3.E3Xa.2.1.1.m1.7.8.2.cmml"></mi><mo id="A3.E3Xa.2.1.1.m1.7.8.1" lspace="0.222em" rspace="0.222em" xref="A3.E3Xa.2.1.1.m1.7.8.1.cmml">⋅</mo><mstyle displaystyle="true" id="A3.E3Xa.2.1.1.m1.7.7" xref="A3.E3Xa.2.1.1.m1.7.7.cmml"><mfrac id="A3.E3Xa.2.1.1.m1.7.7a" xref="A3.E3Xa.2.1.1.m1.7.7.cmml"><mrow id="A3.E3Xa.2.1.1.m1.3.3.3" xref="A3.E3Xa.2.1.1.m1.3.3.3.cmml"><mrow id="A3.E3Xa.2.1.1.m1.2.2.2.2" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.cmml"><mi id="A3.E3Xa.2.1.1.m1.2.2.2.2.3" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.3.cmml">f</mi><mo id="A3.E3Xa.2.1.1.m1.2.2.2.2.2" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.2.cmml">⁢</mo><mrow id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.2.cmml"><mo id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.2" stretchy="false" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.2.cmml">(</mo><msub id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.cmml"><mi id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.2" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.2.cmml">q</mi><mi id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.3" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.3" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.2.cmml">,</mo><mi id="A3.E3Xa.2.1.1.m1.1.1.1.1" xref="A3.E3Xa.2.1.1.m1.1.1.1.1.cmml">d</mi><mo id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.4" rspace="0.055em" stretchy="false" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.2.cmml">)</mo></mrow></mrow><mo id="A3.E3Xa.2.1.1.m1.3.3.3.4" rspace="0.222em" xref="A3.E3Xa.2.1.1.m1.3.3.3.4.cmml">⋅</mo><mrow id="A3.E3Xa.2.1.1.m1.3.3.3.3.1" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.cmml"><mo id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.2" stretchy="false" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.cmml">(</mo><mrow id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.cmml"><msub id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.cmml"><mi id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.2" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.2.cmml">k</mi><mn id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.3" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.3.cmml">1</mn></msub><mo id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.1" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.1.cmml">+</mo><mn id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.3" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.3.cmml">1</mn></mrow><mo id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.3" stretchy="false" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.cmml">)</mo></mrow></mrow><mrow id="A3.E3Xa.2.1.1.m1.7.7.7" xref="A3.E3Xa.2.1.1.m1.7.7.7.cmml"><mrow id="A3.E3Xa.2.1.1.m1.6.6.6.3" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.cmml"><mi id="A3.E3Xa.2.1.1.m1.6.6.6.3.3" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.3.cmml">f</mi><mo id="A3.E3Xa.2.1.1.m1.6.6.6.3.2" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.2.cmml">⁢</mo><mrow id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.2.cmml"><mo id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.2" stretchy="false" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.2.cmml">(</mo><msub id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.cmml"><mi id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.2" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.2.cmml">q</mi><mi id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.3" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.3.cmml">i</mi></msub><mo id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.3" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.2.cmml">,</mo><mi id="A3.E3Xa.2.1.1.m1.5.5.5.2" xref="A3.E3Xa.2.1.1.m1.5.5.5.2.cmml">d</mi><mo id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.4" stretchy="false" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.2.cmml">)</mo></mrow></mrow><mo id="A3.E3Xa.2.1.1.m1.7.7.7.5" xref="A3.E3Xa.2.1.1.m1.7.7.7.5.cmml">+</mo><mrow id="A3.E3Xa.2.1.1.m1.7.7.7.4" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.cmml"><msub id="A3.E3Xa.2.1.1.m1.7.7.7.4.3" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3.cmml"><mi id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.2" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3.2.cmml">k</mi><mn id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.3" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3.3.cmml">1</mn></msub><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.2" lspace="0.222em" rspace="0.222em" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.2.cmml">⋅</mo><mrow id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.cmml"><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.2" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.cmml">(</mo><mrow id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.cmml"><mrow id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.cmml"><mn id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.2" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.2.cmml">1</mn><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.1" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.1.cmml">−</mo><mi id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.3" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.3.cmml">b</mi></mrow><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.1" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.1.cmml">+</mo><mrow id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.cmml"><mi id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.2" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.2.cmml">b</mi><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.1.cmml">⋅</mo><mfrac id="A3.E3Xa.2.1.1.m1.4.4.4.1" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.cmml"><mrow id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.3" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.2.cmml"><mo id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.3.1" stretchy="false" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.2.1.cmml">|</mo><mi id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.1" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.1.cmml">d</mi><mo id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.3.2" stretchy="false" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.2.1.cmml">|</mo></mrow><mtext id="A3.E3Xa.2.1.1.m1.4.4.4.1.3" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.3a.cmml">avgdl</mtext></mfrac></mrow></mrow><mo id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.3" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.cmml">)</mo></mrow></mrow></mrow></mfrac></mstyle></mrow><annotation-xml encoding="MathML-Content" id="A3.E3Xa.2.1.1.m1.7b"><apply id="A3.E3Xa.2.1.1.m1.7.8.cmml" xref="A3.E3Xa.2.1.1.m1.7.8"><ci id="A3.E3Xa.2.1.1.m1.7.8.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.8.1">⋅</ci><csymbol cd="latexml" id="A3.E3Xa.2.1.1.m1.7.8.2.cmml" xref="A3.E3Xa.2.1.1.m1.7.8.2">absent</csymbol><apply id="A3.E3Xa.2.1.1.m1.7.7.cmml" xref="A3.E3Xa.2.1.1.m1.7.7"><divide id="A3.E3Xa.2.1.1.m1.7.7.8.cmml" xref="A3.E3Xa.2.1.1.m1.7.7"></divide><apply id="A3.E3Xa.2.1.1.m1.3.3.3.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3"><ci id="A3.E3Xa.2.1.1.m1.3.3.3.4.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.4">⋅</ci><apply id="A3.E3Xa.2.1.1.m1.2.2.2.2.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2"><times id="A3.E3Xa.2.1.1.m1.2.2.2.2.2.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.2"></times><ci id="A3.E3Xa.2.1.1.m1.2.2.2.2.3.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.3">𝑓</ci><interval closure="open" id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1"><apply id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1">subscript</csymbol><ci id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.2">𝑞</ci><ci id="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.3.cmml" xref="A3.E3Xa.2.1.1.m1.2.2.2.2.1.1.1.3">𝑖</ci></apply><ci id="A3.E3Xa.2.1.1.m1.1.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.1.1.1.1">𝑑</ci></interval></apply><apply id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1"><plus id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.1"></plus><apply id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2"><csymbol cd="ambiguous" id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.1.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2">subscript</csymbol><ci id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.2.cmml" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.2">𝑘</ci><cn id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.3.cmml" type="integer" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.2.3">1</cn></apply><cn id="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.3.cmml" type="integer" xref="A3.E3Xa.2.1.1.m1.3.3.3.3.1.1.3">1</cn></apply></apply><apply id="A3.E3Xa.2.1.1.m1.7.7.7.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7"><plus id="A3.E3Xa.2.1.1.m1.7.7.7.5.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.5"></plus><apply id="A3.E3Xa.2.1.1.m1.6.6.6.3.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3"><times id="A3.E3Xa.2.1.1.m1.6.6.6.3.2.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.2"></times><ci id="A3.E3Xa.2.1.1.m1.6.6.6.3.3.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.3">𝑓</ci><interval closure="open" id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1"><apply id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1"><csymbol cd="ambiguous" id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1">subscript</csymbol><ci id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.2">𝑞</ci><ci id="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.3.cmml" xref="A3.E3Xa.2.1.1.m1.6.6.6.3.1.1.1.3">𝑖</ci></apply><ci id="A3.E3Xa.2.1.1.m1.5.5.5.2.cmml" xref="A3.E3Xa.2.1.1.m1.5.5.5.2">𝑑</ci></interval></apply><apply id="A3.E3Xa.2.1.1.m1.7.7.7.4.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4"><ci id="A3.E3Xa.2.1.1.m1.7.7.7.4.2.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.2">⋅</ci><apply id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3"><csymbol cd="ambiguous" id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3">subscript</csymbol><ci id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.2.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3.2">𝑘</ci><cn id="A3.E3Xa.2.1.1.m1.7.7.7.4.3.3.cmml" type="integer" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.3.3">1</cn></apply><apply id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1"><plus id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.1"></plus><apply id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2"><minus id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.1"></minus><cn id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.2.cmml" type="integer" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.2">1</cn><ci id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.3.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.2.3">𝑏</ci></apply><apply id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3"><ci id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.1.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.1">⋅</ci><ci id="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.2.cmml" xref="A3.E3Xa.2.1.1.m1.7.7.7.4.1.1.1.3.2">𝑏</ci><apply id="A3.E3Xa.2.1.1.m1.4.4.4.1.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1"><divide id="A3.E3Xa.2.1.1.m1.4.4.4.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1"></divide><apply id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.2.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.3"><abs id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.2.1.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.3.1"></abs><ci id="A3.E3Xa.2.1.1.m1.4.4.4.1.1.1.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.1.1">𝑑</ci></apply><ci id="A3.E3Xa.2.1.1.m1.4.4.4.1.3a.cmml" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.3"><mtext id="A3.E3Xa.2.1.1.m1.4.4.4.1.3.cmml" mathsize="70%" xref="A3.E3Xa.2.1.1.m1.4.4.4.1.3">avgdl</mtext></ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.E3Xa.2.1.1.m1.7c">\displaystyle\cdot\frac{f(q_{i},d)\cdot(k_{1}+1)}{f(q_{i},d)+k_{1}\cdot\left(1%
-b+b\cdot\frac{|d|}{\text{avgdl}}\right)}</annotation><annotation encoding="application/x-llamapun" id="A3.E3Xa.2.1.1.m1.7d">⋅ divide start_ARG italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_d ) ⋅ ( italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT + 1 ) end_ARG start_ARG italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_d ) + italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ⋅ ( 1 - italic_b + italic_b ⋅ divide start_ARG | italic_d | end_ARG start_ARG avgdl end_ARG ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="A3.SS1.p1.16">, where
<math alttext="q" class="ltx_Math" display="inline" id="A3.SS1.p1.1.m1.1"><semantics id="A3.SS1.p1.1.m1.1a"><mi id="A3.SS1.p1.1.m1.1.1" xref="A3.SS1.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.1.m1.1b"><ci id="A3.SS1.p1.1.m1.1.1.cmml" xref="A3.SS1.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.1.m1.1d">italic_q</annotation></semantics></math> is the query, and <math alttext="d" class="ltx_Math" display="inline" id="A3.SS1.p1.2.m2.1"><semantics id="A3.SS1.p1.2.m2.1a"><mi id="A3.SS1.p1.2.m2.1.1" xref="A3.SS1.p1.2.m2.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.2.m2.1b"><ci id="A3.SS1.p1.2.m2.1.1.cmml" xref="A3.SS1.p1.2.m2.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.2.m2.1c">d</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.2.m2.1d">italic_d</annotation></semantics></math> is the document.
<math alttext="q_{i}" class="ltx_Math" display="inline" id="A3.SS1.p1.3.m3.1"><semantics id="A3.SS1.p1.3.m3.1a"><msub id="A3.SS1.p1.3.m3.1.1" xref="A3.SS1.p1.3.m3.1.1.cmml"><mi id="A3.SS1.p1.3.m3.1.1.2" xref="A3.SS1.p1.3.m3.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.3.m3.1.1.3" xref="A3.SS1.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.3.m3.1b"><apply id="A3.SS1.p1.3.m3.1.1.cmml" xref="A3.SS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.3.m3.1.1.1.cmml" xref="A3.SS1.p1.3.m3.1.1">subscript</csymbol><ci id="A3.SS1.p1.3.m3.1.1.2.cmml" xref="A3.SS1.p1.3.m3.1.1.2">𝑞</ci><ci id="A3.SS1.p1.3.m3.1.1.3.cmml" xref="A3.SS1.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.3.m3.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.3.m3.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the <math alttext="i" class="ltx_Math" display="inline" id="A3.SS1.p1.4.m4.1"><semantics id="A3.SS1.p1.4.m4.1a"><mi id="A3.SS1.p1.4.m4.1.1" xref="A3.SS1.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.4.m4.1b"><ci id="A3.SS1.p1.4.m4.1.1.cmml" xref="A3.SS1.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.4.m4.1c">i</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.4.m4.1d">italic_i</annotation></semantics></math>-th term in the query.
<math alttext="f(q_{i},d)" class="ltx_Math" display="inline" id="A3.SS1.p1.5.m5.2"><semantics id="A3.SS1.p1.5.m5.2a"><mrow id="A3.SS1.p1.5.m5.2.2" xref="A3.SS1.p1.5.m5.2.2.cmml"><mi id="A3.SS1.p1.5.m5.2.2.3" xref="A3.SS1.p1.5.m5.2.2.3.cmml">f</mi><mo id="A3.SS1.p1.5.m5.2.2.2" xref="A3.SS1.p1.5.m5.2.2.2.cmml">⁢</mo><mrow id="A3.SS1.p1.5.m5.2.2.1.1" xref="A3.SS1.p1.5.m5.2.2.1.2.cmml"><mo id="A3.SS1.p1.5.m5.2.2.1.1.2" stretchy="false" xref="A3.SS1.p1.5.m5.2.2.1.2.cmml">(</mo><msub id="A3.SS1.p1.5.m5.2.2.1.1.1" xref="A3.SS1.p1.5.m5.2.2.1.1.1.cmml"><mi id="A3.SS1.p1.5.m5.2.2.1.1.1.2" xref="A3.SS1.p1.5.m5.2.2.1.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.5.m5.2.2.1.1.1.3" xref="A3.SS1.p1.5.m5.2.2.1.1.1.3.cmml">i</mi></msub><mo id="A3.SS1.p1.5.m5.2.2.1.1.3" xref="A3.SS1.p1.5.m5.2.2.1.2.cmml">,</mo><mi id="A3.SS1.p1.5.m5.1.1" xref="A3.SS1.p1.5.m5.1.1.cmml">d</mi><mo id="A3.SS1.p1.5.m5.2.2.1.1.4" stretchy="false" xref="A3.SS1.p1.5.m5.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.5.m5.2b"><apply id="A3.SS1.p1.5.m5.2.2.cmml" xref="A3.SS1.p1.5.m5.2.2"><times id="A3.SS1.p1.5.m5.2.2.2.cmml" xref="A3.SS1.p1.5.m5.2.2.2"></times><ci id="A3.SS1.p1.5.m5.2.2.3.cmml" xref="A3.SS1.p1.5.m5.2.2.3">𝑓</ci><interval closure="open" id="A3.SS1.p1.5.m5.2.2.1.2.cmml" xref="A3.SS1.p1.5.m5.2.2.1.1"><apply id="A3.SS1.p1.5.m5.2.2.1.1.1.cmml" xref="A3.SS1.p1.5.m5.2.2.1.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.5.m5.2.2.1.1.1.1.cmml" xref="A3.SS1.p1.5.m5.2.2.1.1.1">subscript</csymbol><ci id="A3.SS1.p1.5.m5.2.2.1.1.1.2.cmml" xref="A3.SS1.p1.5.m5.2.2.1.1.1.2">𝑞</ci><ci id="A3.SS1.p1.5.m5.2.2.1.1.1.3.cmml" xref="A3.SS1.p1.5.m5.2.2.1.1.1.3">𝑖</ci></apply><ci id="A3.SS1.p1.5.m5.1.1.cmml" xref="A3.SS1.p1.5.m5.1.1">𝑑</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.5.m5.2c">f(q_{i},d)</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.5.m5.2d">italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_d )</annotation></semantics></math> is the term frequency of <math alttext="q_{i}" class="ltx_Math" display="inline" id="A3.SS1.p1.6.m6.1"><semantics id="A3.SS1.p1.6.m6.1a"><msub id="A3.SS1.p1.6.m6.1.1" xref="A3.SS1.p1.6.m6.1.1.cmml"><mi id="A3.SS1.p1.6.m6.1.1.2" xref="A3.SS1.p1.6.m6.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.6.m6.1.1.3" xref="A3.SS1.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.6.m6.1b"><apply id="A3.SS1.p1.6.m6.1.1.cmml" xref="A3.SS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.6.m6.1.1.1.cmml" xref="A3.SS1.p1.6.m6.1.1">subscript</csymbol><ci id="A3.SS1.p1.6.m6.1.1.2.cmml" xref="A3.SS1.p1.6.m6.1.1.2">𝑞</ci><ci id="A3.SS1.p1.6.m6.1.1.3.cmml" xref="A3.SS1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.6.m6.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.6.m6.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in the document <math alttext="d" class="ltx_Math" display="inline" id="A3.SS1.p1.7.m7.1"><semantics id="A3.SS1.p1.7.m7.1a"><mi id="A3.SS1.p1.7.m7.1.1" xref="A3.SS1.p1.7.m7.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.7.m7.1b"><ci id="A3.SS1.p1.7.m7.1.1.cmml" xref="A3.SS1.p1.7.m7.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.7.m7.1c">d</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.7.m7.1d">italic_d</annotation></semantics></math>.
<math alttext="|d|" class="ltx_Math" display="inline" id="A3.SS1.p1.8.m8.1"><semantics id="A3.SS1.p1.8.m8.1a"><mrow id="A3.SS1.p1.8.m8.1.2.2" xref="A3.SS1.p1.8.m8.1.2.1.cmml"><mo id="A3.SS1.p1.8.m8.1.2.2.1" stretchy="false" xref="A3.SS1.p1.8.m8.1.2.1.1.cmml">|</mo><mi id="A3.SS1.p1.8.m8.1.1" xref="A3.SS1.p1.8.m8.1.1.cmml">d</mi><mo id="A3.SS1.p1.8.m8.1.2.2.2" stretchy="false" xref="A3.SS1.p1.8.m8.1.2.1.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.8.m8.1b"><apply id="A3.SS1.p1.8.m8.1.2.1.cmml" xref="A3.SS1.p1.8.m8.1.2.2"><abs id="A3.SS1.p1.8.m8.1.2.1.1.cmml" xref="A3.SS1.p1.8.m8.1.2.2.1"></abs><ci id="A3.SS1.p1.8.m8.1.1.cmml" xref="A3.SS1.p1.8.m8.1.1">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.8.m8.1c">|d|</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.8.m8.1d">| italic_d |</annotation></semantics></math> is the length of the document <math alttext="d" class="ltx_Math" display="inline" id="A3.SS1.p1.9.m9.1"><semantics id="A3.SS1.p1.9.m9.1a"><mi id="A3.SS1.p1.9.m9.1.1" xref="A3.SS1.p1.9.m9.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.9.m9.1b"><ci id="A3.SS1.p1.9.m9.1.1.cmml" xref="A3.SS1.p1.9.m9.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.9.m9.1c">d</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.9.m9.1d">italic_d</annotation></semantics></math> in terms of the number of words.
<span class="ltx_text ltx_markedasmath" id="A3.SS1.p1.16.1">avgdl</span> is the average document length in the collection.
<math alttext="k_{1}" class="ltx_Math" display="inline" id="A3.SS1.p1.11.m11.1"><semantics id="A3.SS1.p1.11.m11.1a"><msub id="A3.SS1.p1.11.m11.1.1" xref="A3.SS1.p1.11.m11.1.1.cmml"><mi id="A3.SS1.p1.11.m11.1.1.2" xref="A3.SS1.p1.11.m11.1.1.2.cmml">k</mi><mn id="A3.SS1.p1.11.m11.1.1.3" xref="A3.SS1.p1.11.m11.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.11.m11.1b"><apply id="A3.SS1.p1.11.m11.1.1.cmml" xref="A3.SS1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.11.m11.1.1.1.cmml" xref="A3.SS1.p1.11.m11.1.1">subscript</csymbol><ci id="A3.SS1.p1.11.m11.1.1.2.cmml" xref="A3.SS1.p1.11.m11.1.1.2">𝑘</ci><cn id="A3.SS1.p1.11.m11.1.1.3.cmml" type="integer" xref="A3.SS1.p1.11.m11.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.11.m11.1c">k_{1}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.11.m11.1d">italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="b" class="ltx_Math" display="inline" id="A3.SS1.p1.12.m12.1"><semantics id="A3.SS1.p1.12.m12.1a"><mi id="A3.SS1.p1.12.m12.1.1" xref="A3.SS1.p1.12.m12.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.12.m12.1b"><ci id="A3.SS1.p1.12.m12.1.1.cmml" xref="A3.SS1.p1.12.m12.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.12.m12.1c">b</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.12.m12.1d">italic_b</annotation></semantics></math> are free parameters, usually chosen, for example, <math alttext="k_{1}=1.2" class="ltx_Math" display="inline" id="A3.SS1.p1.13.m13.1"><semantics id="A3.SS1.p1.13.m13.1a"><mrow id="A3.SS1.p1.13.m13.1.1" xref="A3.SS1.p1.13.m13.1.1.cmml"><msub id="A3.SS1.p1.13.m13.1.1.2" xref="A3.SS1.p1.13.m13.1.1.2.cmml"><mi id="A3.SS1.p1.13.m13.1.1.2.2" xref="A3.SS1.p1.13.m13.1.1.2.2.cmml">k</mi><mn id="A3.SS1.p1.13.m13.1.1.2.3" xref="A3.SS1.p1.13.m13.1.1.2.3.cmml">1</mn></msub><mo id="A3.SS1.p1.13.m13.1.1.1" xref="A3.SS1.p1.13.m13.1.1.1.cmml">=</mo><mn id="A3.SS1.p1.13.m13.1.1.3" xref="A3.SS1.p1.13.m13.1.1.3.cmml">1.2</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.13.m13.1b"><apply id="A3.SS1.p1.13.m13.1.1.cmml" xref="A3.SS1.p1.13.m13.1.1"><eq id="A3.SS1.p1.13.m13.1.1.1.cmml" xref="A3.SS1.p1.13.m13.1.1.1"></eq><apply id="A3.SS1.p1.13.m13.1.1.2.cmml" xref="A3.SS1.p1.13.m13.1.1.2"><csymbol cd="ambiguous" id="A3.SS1.p1.13.m13.1.1.2.1.cmml" xref="A3.SS1.p1.13.m13.1.1.2">subscript</csymbol><ci id="A3.SS1.p1.13.m13.1.1.2.2.cmml" xref="A3.SS1.p1.13.m13.1.1.2.2">𝑘</ci><cn id="A3.SS1.p1.13.m13.1.1.2.3.cmml" type="integer" xref="A3.SS1.p1.13.m13.1.1.2.3">1</cn></apply><cn id="A3.SS1.p1.13.m13.1.1.3.cmml" type="float" xref="A3.SS1.p1.13.m13.1.1.3">1.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.13.m13.1c">k_{1}=1.2</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.13.m13.1d">italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT = 1.2</annotation></semantics></math> and <math alttext="b=0.75" class="ltx_Math" display="inline" id="A3.SS1.p1.14.m14.1"><semantics id="A3.SS1.p1.14.m14.1a"><mrow id="A3.SS1.p1.14.m14.1.1" xref="A3.SS1.p1.14.m14.1.1.cmml"><mi id="A3.SS1.p1.14.m14.1.1.2" xref="A3.SS1.p1.14.m14.1.1.2.cmml">b</mi><mo id="A3.SS1.p1.14.m14.1.1.1" xref="A3.SS1.p1.14.m14.1.1.1.cmml">=</mo><mn id="A3.SS1.p1.14.m14.1.1.3" xref="A3.SS1.p1.14.m14.1.1.3.cmml">0.75</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.14.m14.1b"><apply id="A3.SS1.p1.14.m14.1.1.cmml" xref="A3.SS1.p1.14.m14.1.1"><eq id="A3.SS1.p1.14.m14.1.1.1.cmml" xref="A3.SS1.p1.14.m14.1.1.1"></eq><ci id="A3.SS1.p1.14.m14.1.1.2.cmml" xref="A3.SS1.p1.14.m14.1.1.2">𝑏</ci><cn id="A3.SS1.p1.14.m14.1.1.3.cmml" type="float" xref="A3.SS1.p1.14.m14.1.1.3">0.75</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.14.m14.1c">b=0.75</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.14.m14.1d">italic_b = 0.75</annotation></semantics></math>.
<math alttext="IDF(q_{i})" class="ltx_Math" display="inline" id="A3.SS1.p1.15.m15.1"><semantics id="A3.SS1.p1.15.m15.1a"><mrow id="A3.SS1.p1.15.m15.1.1" xref="A3.SS1.p1.15.m15.1.1.cmml"><mi id="A3.SS1.p1.15.m15.1.1.3" xref="A3.SS1.p1.15.m15.1.1.3.cmml">I</mi><mo id="A3.SS1.p1.15.m15.1.1.2" xref="A3.SS1.p1.15.m15.1.1.2.cmml">⁢</mo><mi id="A3.SS1.p1.15.m15.1.1.4" xref="A3.SS1.p1.15.m15.1.1.4.cmml">D</mi><mo id="A3.SS1.p1.15.m15.1.1.2a" xref="A3.SS1.p1.15.m15.1.1.2.cmml">⁢</mo><mi id="A3.SS1.p1.15.m15.1.1.5" xref="A3.SS1.p1.15.m15.1.1.5.cmml">F</mi><mo id="A3.SS1.p1.15.m15.1.1.2b" xref="A3.SS1.p1.15.m15.1.1.2.cmml">⁢</mo><mrow id="A3.SS1.p1.15.m15.1.1.1.1" xref="A3.SS1.p1.15.m15.1.1.1.1.1.cmml"><mo id="A3.SS1.p1.15.m15.1.1.1.1.2" stretchy="false" xref="A3.SS1.p1.15.m15.1.1.1.1.1.cmml">(</mo><msub id="A3.SS1.p1.15.m15.1.1.1.1.1" xref="A3.SS1.p1.15.m15.1.1.1.1.1.cmml"><mi id="A3.SS1.p1.15.m15.1.1.1.1.1.2" xref="A3.SS1.p1.15.m15.1.1.1.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.15.m15.1.1.1.1.1.3" xref="A3.SS1.p1.15.m15.1.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.SS1.p1.15.m15.1.1.1.1.3" stretchy="false" xref="A3.SS1.p1.15.m15.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.15.m15.1b"><apply id="A3.SS1.p1.15.m15.1.1.cmml" xref="A3.SS1.p1.15.m15.1.1"><times id="A3.SS1.p1.15.m15.1.1.2.cmml" xref="A3.SS1.p1.15.m15.1.1.2"></times><ci id="A3.SS1.p1.15.m15.1.1.3.cmml" xref="A3.SS1.p1.15.m15.1.1.3">𝐼</ci><ci id="A3.SS1.p1.15.m15.1.1.4.cmml" xref="A3.SS1.p1.15.m15.1.1.4">𝐷</ci><ci id="A3.SS1.p1.15.m15.1.1.5.cmml" xref="A3.SS1.p1.15.m15.1.1.5">𝐹</ci><apply id="A3.SS1.p1.15.m15.1.1.1.1.1.cmml" xref="A3.SS1.p1.15.m15.1.1.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.15.m15.1.1.1.1.1.1.cmml" xref="A3.SS1.p1.15.m15.1.1.1.1">subscript</csymbol><ci id="A3.SS1.p1.15.m15.1.1.1.1.1.2.cmml" xref="A3.SS1.p1.15.m15.1.1.1.1.1.2">𝑞</ci><ci id="A3.SS1.p1.15.m15.1.1.1.1.1.3.cmml" xref="A3.SS1.p1.15.m15.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.15.m15.1c">IDF(q_{i})</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.15.m15.1d">italic_I italic_D italic_F ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the inverse document frequency weight of the term <math alttext="q_{i}" class="ltx_Math" display="inline" id="A3.SS1.p1.16.m16.1"><semantics id="A3.SS1.p1.16.m16.1a"><msub id="A3.SS1.p1.16.m16.1.1" xref="A3.SS1.p1.16.m16.1.1.cmml"><mi id="A3.SS1.p1.16.m16.1.1.2" xref="A3.SS1.p1.16.m16.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.16.m16.1.1.3" xref="A3.SS1.p1.16.m16.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.16.m16.1b"><apply id="A3.SS1.p1.16.m16.1.1.cmml" xref="A3.SS1.p1.16.m16.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.16.m16.1.1.1.cmml" xref="A3.SS1.p1.16.m16.1.1">subscript</csymbol><ci id="A3.SS1.p1.16.m16.1.1.2.cmml" xref="A3.SS1.p1.16.m16.1.1.2">𝑞</ci><ci id="A3.SS1.p1.16.m16.1.1.3.cmml" xref="A3.SS1.p1.16.m16.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.16.m16.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.16.m16.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, calculated as:</p>
<table class="ltx_equation ltx_eqn_table" id="A3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="IDF(q_{i})=\log\left(\frac{N-n(q_{i})+0.5}{n(q_{i})+0.5}+1\right)" class="ltx_Math" display="block" id="A3.E4.m1.5"><semantics id="A3.E4.m1.5a"><mrow id="A3.E4.m1.5.5" xref="A3.E4.m1.5.5.cmml"><mrow id="A3.E4.m1.4.4.1" xref="A3.E4.m1.4.4.1.cmml"><mi id="A3.E4.m1.4.4.1.3" xref="A3.E4.m1.4.4.1.3.cmml">I</mi><mo id="A3.E4.m1.4.4.1.2" xref="A3.E4.m1.4.4.1.2.cmml">⁢</mo><mi id="A3.E4.m1.4.4.1.4" xref="A3.E4.m1.4.4.1.4.cmml">D</mi><mo id="A3.E4.m1.4.4.1.2a" xref="A3.E4.m1.4.4.1.2.cmml">⁢</mo><mi id="A3.E4.m1.4.4.1.5" xref="A3.E4.m1.4.4.1.5.cmml">F</mi><mo id="A3.E4.m1.4.4.1.2b" xref="A3.E4.m1.4.4.1.2.cmml">⁢</mo><mrow id="A3.E4.m1.4.4.1.1.1" xref="A3.E4.m1.4.4.1.1.1.1.cmml"><mo id="A3.E4.m1.4.4.1.1.1.2" stretchy="false" xref="A3.E4.m1.4.4.1.1.1.1.cmml">(</mo><msub id="A3.E4.m1.4.4.1.1.1.1" xref="A3.E4.m1.4.4.1.1.1.1.cmml"><mi id="A3.E4.m1.4.4.1.1.1.1.2" xref="A3.E4.m1.4.4.1.1.1.1.2.cmml">q</mi><mi id="A3.E4.m1.4.4.1.1.1.1.3" xref="A3.E4.m1.4.4.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.E4.m1.4.4.1.1.1.3" stretchy="false" xref="A3.E4.m1.4.4.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A3.E4.m1.5.5.3" xref="A3.E4.m1.5.5.3.cmml">=</mo><mrow id="A3.E4.m1.5.5.2.1" xref="A3.E4.m1.5.5.2.2.cmml"><mi id="A3.E4.m1.3.3" xref="A3.E4.m1.3.3.cmml">log</mi><mo id="A3.E4.m1.5.5.2.1a" xref="A3.E4.m1.5.5.2.2.cmml">⁡</mo><mrow id="A3.E4.m1.5.5.2.1.1" xref="A3.E4.m1.5.5.2.2.cmml"><mo id="A3.E4.m1.5.5.2.1.1.2" xref="A3.E4.m1.5.5.2.2.cmml">(</mo><mrow id="A3.E4.m1.5.5.2.1.1.1" xref="A3.E4.m1.5.5.2.1.1.1.cmml"><mfrac id="A3.E4.m1.2.2" xref="A3.E4.m1.2.2.cmml"><mrow id="A3.E4.m1.1.1.1" xref="A3.E4.m1.1.1.1.cmml"><mrow id="A3.E4.m1.1.1.1.1" xref="A3.E4.m1.1.1.1.1.cmml"><mi id="A3.E4.m1.1.1.1.1.3" xref="A3.E4.m1.1.1.1.1.3.cmml">N</mi><mo id="A3.E4.m1.1.1.1.1.2" xref="A3.E4.m1.1.1.1.1.2.cmml">−</mo><mrow id="A3.E4.m1.1.1.1.1.1" xref="A3.E4.m1.1.1.1.1.1.cmml"><mi id="A3.E4.m1.1.1.1.1.1.3" xref="A3.E4.m1.1.1.1.1.1.3.cmml">n</mi><mo id="A3.E4.m1.1.1.1.1.1.2" xref="A3.E4.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="A3.E4.m1.1.1.1.1.1.1.1" xref="A3.E4.m1.1.1.1.1.1.1.1.1.cmml"><mo id="A3.E4.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="A3.E4.m1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="A3.E4.m1.1.1.1.1.1.1.1.1" xref="A3.E4.m1.1.1.1.1.1.1.1.1.cmml"><mi id="A3.E4.m1.1.1.1.1.1.1.1.1.2" xref="A3.E4.m1.1.1.1.1.1.1.1.1.2.cmml">q</mi><mi id="A3.E4.m1.1.1.1.1.1.1.1.1.3" xref="A3.E4.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.E4.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="A3.E4.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="A3.E4.m1.1.1.1.2" xref="A3.E4.m1.1.1.1.2.cmml">+</mo><mn id="A3.E4.m1.1.1.1.3" xref="A3.E4.m1.1.1.1.3.cmml">0.5</mn></mrow><mrow id="A3.E4.m1.2.2.2" xref="A3.E4.m1.2.2.2.cmml"><mrow id="A3.E4.m1.2.2.2.1" xref="A3.E4.m1.2.2.2.1.cmml"><mi id="A3.E4.m1.2.2.2.1.3" xref="A3.E4.m1.2.2.2.1.3.cmml">n</mi><mo id="A3.E4.m1.2.2.2.1.2" xref="A3.E4.m1.2.2.2.1.2.cmml">⁢</mo><mrow id="A3.E4.m1.2.2.2.1.1.1" xref="A3.E4.m1.2.2.2.1.1.1.1.cmml"><mo id="A3.E4.m1.2.2.2.1.1.1.2" stretchy="false" xref="A3.E4.m1.2.2.2.1.1.1.1.cmml">(</mo><msub id="A3.E4.m1.2.2.2.1.1.1.1" xref="A3.E4.m1.2.2.2.1.1.1.1.cmml"><mi id="A3.E4.m1.2.2.2.1.1.1.1.2" xref="A3.E4.m1.2.2.2.1.1.1.1.2.cmml">q</mi><mi id="A3.E4.m1.2.2.2.1.1.1.1.3" xref="A3.E4.m1.2.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.E4.m1.2.2.2.1.1.1.3" stretchy="false" xref="A3.E4.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A3.E4.m1.2.2.2.2" xref="A3.E4.m1.2.2.2.2.cmml">+</mo><mn id="A3.E4.m1.2.2.2.3" xref="A3.E4.m1.2.2.2.3.cmml">0.5</mn></mrow></mfrac><mo id="A3.E4.m1.5.5.2.1.1.1.1" xref="A3.E4.m1.5.5.2.1.1.1.1.cmml">+</mo><mn id="A3.E4.m1.5.5.2.1.1.1.2" xref="A3.E4.m1.5.5.2.1.1.1.2.cmml">1</mn></mrow><mo id="A3.E4.m1.5.5.2.1.1.3" xref="A3.E4.m1.5.5.2.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.E4.m1.5b"><apply id="A3.E4.m1.5.5.cmml" xref="A3.E4.m1.5.5"><eq id="A3.E4.m1.5.5.3.cmml" xref="A3.E4.m1.5.5.3"></eq><apply id="A3.E4.m1.4.4.1.cmml" xref="A3.E4.m1.4.4.1"><times id="A3.E4.m1.4.4.1.2.cmml" xref="A3.E4.m1.4.4.1.2"></times><ci id="A3.E4.m1.4.4.1.3.cmml" xref="A3.E4.m1.4.4.1.3">𝐼</ci><ci id="A3.E4.m1.4.4.1.4.cmml" xref="A3.E4.m1.4.4.1.4">𝐷</ci><ci id="A3.E4.m1.4.4.1.5.cmml" xref="A3.E4.m1.4.4.1.5">𝐹</ci><apply id="A3.E4.m1.4.4.1.1.1.1.cmml" xref="A3.E4.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="A3.E4.m1.4.4.1.1.1.1.1.cmml" xref="A3.E4.m1.4.4.1.1.1">subscript</csymbol><ci id="A3.E4.m1.4.4.1.1.1.1.2.cmml" xref="A3.E4.m1.4.4.1.1.1.1.2">𝑞</ci><ci id="A3.E4.m1.4.4.1.1.1.1.3.cmml" xref="A3.E4.m1.4.4.1.1.1.1.3">𝑖</ci></apply></apply><apply id="A3.E4.m1.5.5.2.2.cmml" xref="A3.E4.m1.5.5.2.1"><log id="A3.E4.m1.3.3.cmml" xref="A3.E4.m1.3.3"></log><apply id="A3.E4.m1.5.5.2.1.1.1.cmml" xref="A3.E4.m1.5.5.2.1.1.1"><plus id="A3.E4.m1.5.5.2.1.1.1.1.cmml" xref="A3.E4.m1.5.5.2.1.1.1.1"></plus><apply id="A3.E4.m1.2.2.cmml" xref="A3.E4.m1.2.2"><divide id="A3.E4.m1.2.2.3.cmml" xref="A3.E4.m1.2.2"></divide><apply id="A3.E4.m1.1.1.1.cmml" xref="A3.E4.m1.1.1.1"><plus id="A3.E4.m1.1.1.1.2.cmml" xref="A3.E4.m1.1.1.1.2"></plus><apply id="A3.E4.m1.1.1.1.1.cmml" xref="A3.E4.m1.1.1.1.1"><minus id="A3.E4.m1.1.1.1.1.2.cmml" xref="A3.E4.m1.1.1.1.1.2"></minus><ci id="A3.E4.m1.1.1.1.1.3.cmml" xref="A3.E4.m1.1.1.1.1.3">𝑁</ci><apply id="A3.E4.m1.1.1.1.1.1.cmml" xref="A3.E4.m1.1.1.1.1.1"><times id="A3.E4.m1.1.1.1.1.1.2.cmml" xref="A3.E4.m1.1.1.1.1.1.2"></times><ci id="A3.E4.m1.1.1.1.1.1.3.cmml" xref="A3.E4.m1.1.1.1.1.1.3">𝑛</ci><apply id="A3.E4.m1.1.1.1.1.1.1.1.1.cmml" xref="A3.E4.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="A3.E4.m1.1.1.1.1.1.1.1.1.1.cmml" xref="A3.E4.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="A3.E4.m1.1.1.1.1.1.1.1.1.2.cmml" xref="A3.E4.m1.1.1.1.1.1.1.1.1.2">𝑞</ci><ci id="A3.E4.m1.1.1.1.1.1.1.1.1.3.cmml" xref="A3.E4.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply><cn id="A3.E4.m1.1.1.1.3.cmml" type="float" xref="A3.E4.m1.1.1.1.3">0.5</cn></apply><apply id="A3.E4.m1.2.2.2.cmml" xref="A3.E4.m1.2.2.2"><plus id="A3.E4.m1.2.2.2.2.cmml" xref="A3.E4.m1.2.2.2.2"></plus><apply id="A3.E4.m1.2.2.2.1.cmml" xref="A3.E4.m1.2.2.2.1"><times id="A3.E4.m1.2.2.2.1.2.cmml" xref="A3.E4.m1.2.2.2.1.2"></times><ci id="A3.E4.m1.2.2.2.1.3.cmml" xref="A3.E4.m1.2.2.2.1.3">𝑛</ci><apply id="A3.E4.m1.2.2.2.1.1.1.1.cmml" xref="A3.E4.m1.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A3.E4.m1.2.2.2.1.1.1.1.1.cmml" xref="A3.E4.m1.2.2.2.1.1.1">subscript</csymbol><ci id="A3.E4.m1.2.2.2.1.1.1.1.2.cmml" xref="A3.E4.m1.2.2.2.1.1.1.1.2">𝑞</ci><ci id="A3.E4.m1.2.2.2.1.1.1.1.3.cmml" xref="A3.E4.m1.2.2.2.1.1.1.1.3">𝑖</ci></apply></apply><cn id="A3.E4.m1.2.2.2.3.cmml" type="float" xref="A3.E4.m1.2.2.2.3">0.5</cn></apply></apply><cn id="A3.E4.m1.5.5.2.1.1.1.2.cmml" type="integer" xref="A3.E4.m1.5.5.2.1.1.1.2">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.E4.m1.5c">IDF(q_{i})=\log\left(\frac{N-n(q_{i})+0.5}{n(q_{i})+0.5}+1\right)</annotation><annotation encoding="application/x-llamapun" id="A3.E4.m1.5d">italic_I italic_D italic_F ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = roman_log ( divide start_ARG italic_N - italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) + 0.5 end_ARG start_ARG italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) + 0.5 end_ARG + 1 )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="A3.SS1.p1.19">, where
<math alttext="N" class="ltx_Math" display="inline" id="A3.SS1.p1.17.m1.1"><semantics id="A3.SS1.p1.17.m1.1a"><mi id="A3.SS1.p1.17.m1.1.1" xref="A3.SS1.p1.17.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.17.m1.1b"><ci id="A3.SS1.p1.17.m1.1.1.cmml" xref="A3.SS1.p1.17.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.17.m1.1c">N</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.17.m1.1d">italic_N</annotation></semantics></math> is the total number of documents in the collection.
<math alttext="n(q_{i})" class="ltx_Math" display="inline" id="A3.SS1.p1.18.m2.1"><semantics id="A3.SS1.p1.18.m2.1a"><mrow id="A3.SS1.p1.18.m2.1.1" xref="A3.SS1.p1.18.m2.1.1.cmml"><mi id="A3.SS1.p1.18.m2.1.1.3" xref="A3.SS1.p1.18.m2.1.1.3.cmml">n</mi><mo id="A3.SS1.p1.18.m2.1.1.2" xref="A3.SS1.p1.18.m2.1.1.2.cmml">⁢</mo><mrow id="A3.SS1.p1.18.m2.1.1.1.1" xref="A3.SS1.p1.18.m2.1.1.1.1.1.cmml"><mo id="A3.SS1.p1.18.m2.1.1.1.1.2" stretchy="false" xref="A3.SS1.p1.18.m2.1.1.1.1.1.cmml">(</mo><msub id="A3.SS1.p1.18.m2.1.1.1.1.1" xref="A3.SS1.p1.18.m2.1.1.1.1.1.cmml"><mi id="A3.SS1.p1.18.m2.1.1.1.1.1.2" xref="A3.SS1.p1.18.m2.1.1.1.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.18.m2.1.1.1.1.1.3" xref="A3.SS1.p1.18.m2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="A3.SS1.p1.18.m2.1.1.1.1.3" stretchy="false" xref="A3.SS1.p1.18.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.18.m2.1b"><apply id="A3.SS1.p1.18.m2.1.1.cmml" xref="A3.SS1.p1.18.m2.1.1"><times id="A3.SS1.p1.18.m2.1.1.2.cmml" xref="A3.SS1.p1.18.m2.1.1.2"></times><ci id="A3.SS1.p1.18.m2.1.1.3.cmml" xref="A3.SS1.p1.18.m2.1.1.3">𝑛</ci><apply id="A3.SS1.p1.18.m2.1.1.1.1.1.cmml" xref="A3.SS1.p1.18.m2.1.1.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.18.m2.1.1.1.1.1.1.cmml" xref="A3.SS1.p1.18.m2.1.1.1.1">subscript</csymbol><ci id="A3.SS1.p1.18.m2.1.1.1.1.1.2.cmml" xref="A3.SS1.p1.18.m2.1.1.1.1.1.2">𝑞</ci><ci id="A3.SS1.p1.18.m2.1.1.1.1.1.3.cmml" xref="A3.SS1.p1.18.m2.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.18.m2.1c">n(q_{i})</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.18.m2.1d">italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the number of documents containing the term <math alttext="q_{i}" class="ltx_Math" display="inline" id="A3.SS1.p1.19.m3.1"><semantics id="A3.SS1.p1.19.m3.1a"><msub id="A3.SS1.p1.19.m3.1.1" xref="A3.SS1.p1.19.m3.1.1.cmml"><mi id="A3.SS1.p1.19.m3.1.1.2" xref="A3.SS1.p1.19.m3.1.1.2.cmml">q</mi><mi id="A3.SS1.p1.19.m3.1.1.3" xref="A3.SS1.p1.19.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.19.m3.1b"><apply id="A3.SS1.p1.19.m3.1.1.cmml" xref="A3.SS1.p1.19.m3.1.1"><csymbol cd="ambiguous" id="A3.SS1.p1.19.m3.1.1.1.cmml" xref="A3.SS1.p1.19.m3.1.1">subscript</csymbol><ci id="A3.SS1.p1.19.m3.1.1.2.cmml" xref="A3.SS1.p1.19.m3.1.1.2">𝑞</ci><ci id="A3.SS1.p1.19.m3.1.1.3.cmml" xref="A3.SS1.p1.19.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.19.m3.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.19.m3.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="A3.SS1.p2">
<p class="ltx_p" id="A3.SS1.p2.1">To minimize the influence of the prompt, we employed a very simple prompt to instruct the language model to generate appropriate answers based on the provided text. The structure of this prompt is illustrated as follows.</p>
</div>
<figure class="ltx_table" id="A3.T10">
<p class="ltx_p ltx_align_center" id="A3.T10.1"><span class="ltx_text" id="A3.T10.1.1"><span class="ltx_text" id="A3.T10.1.1.1" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="A3.T10.1.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="A3.T10.1.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T10.1.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T10.1.1.1.1.1.1.1.1">
<span class="ltx_p" id="A3.T10.1.1.1.1.1.1.1.1.1" style="width:204.9pt;">You are an expert in the field of biomedical science.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T10.1.1.1.1.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T10.1.1.1.1.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T10.1.1.1.1.2.2.1.1">
<span class="ltx_p" id="A3.T10.1.1.1.1.2.2.1.1.1" style="width:204.9pt;">Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T10.1.1.1.1.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T10.1.1.1.1.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T10.1.1.1.1.3.3.1.1">
<span class="ltx_p" id="A3.T10.1.1.1.1.3.3.1.1.1" style="width:204.9pt;">### Instruction:
<span class="ltx_text ltx_font_bold" id="A3.T10.1.1.1.1.3.3.1.1.1.1">{question}</span></span>
</span></span></span>
<span class="ltx_tr" id="A3.T10.1.1.1.1.4.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T10.1.1.1.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T10.1.1.1.1.4.4.1.1">
<span class="ltx_p" id="A3.T10.1.1.1.1.4.4.1.1.1" style="width:204.9pt;">### Input:
<span class="ltx_text ltx_font_bold" id="A3.T10.1.1.1.1.4.4.1.1.1.1">{context}</span></span>
</span></span></span>
<span class="ltx_tr" id="A3.T10.1.1.1.1.5.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T10.1.1.1.1.5.5.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T10.1.1.1.1.5.5.1.1">
<span class="ltx_p" id="A3.T10.1.1.1.1.5.5.1.1.1" style="width:204.9pt;">### Response:</span>
</span></span></span>
</span>
</span></span></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 10: </span>Prompt for Question Answering.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>Self-Rewarding Tree Search (SeRTS)</h3>
<div class="ltx_para" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.3">We use the Llama2-7b-chat model published in the Huggingface <span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/meta-llama/Llama-2-7b-chat-hf" title="">https://huggingface.co/meta-llama/Llama-2-7b-chat-hf</a></span></span></span> for experiments in this work. The Llama2-7b-chat model is loaded in 4 bits, and it uses flash attention 2 as attention implementation for efficiency. For sequence generation, we keep the same configuration of setting the temperature to 0.7 and maximal length to 4096 tokens. For all experiments, we report the averaged metrics from three runs with the random seed fixed to {42,43,44}. For the SeRTS process illustrated in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#alg1" title="Algorithm 1 ‣ C.2 Self-Rewarding Tree Search (SeRTS) ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">1</span></a>, we set the maximal simulation number <math alttext="Sim" class="ltx_Math" display="inline" id="A3.SS2.p1.1.m1.1"><semantics id="A3.SS2.p1.1.m1.1a"><mrow id="A3.SS2.p1.1.m1.1.1" xref="A3.SS2.p1.1.m1.1.1.cmml"><mi id="A3.SS2.p1.1.m1.1.1.2" xref="A3.SS2.p1.1.m1.1.1.2.cmml">S</mi><mo id="A3.SS2.p1.1.m1.1.1.1" xref="A3.SS2.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.3" xref="A3.SS2.p1.1.m1.1.1.3.cmml">i</mi><mo id="A3.SS2.p1.1.m1.1.1.1a" xref="A3.SS2.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="A3.SS2.p1.1.m1.1.1.4" xref="A3.SS2.p1.1.m1.1.1.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.1.m1.1b"><apply id="A3.SS2.p1.1.m1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1"><times id="A3.SS2.p1.1.m1.1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1.1"></times><ci id="A3.SS2.p1.1.m1.1.1.2.cmml" xref="A3.SS2.p1.1.m1.1.1.2">𝑆</ci><ci id="A3.SS2.p1.1.m1.1.1.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3">𝑖</ci><ci id="A3.SS2.p1.1.m1.1.1.4.cmml" xref="A3.SS2.p1.1.m1.1.1.4">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.1.m1.1c">Sim</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.1.m1.1d">italic_S italic_i italic_m</annotation></semantics></math> to 12, maximal branch number <math alttext="b" class="ltx_Math" display="inline" id="A3.SS2.p1.2.m2.1"><semantics id="A3.SS2.p1.2.m2.1a"><mi id="A3.SS2.p1.2.m2.1.1" xref="A3.SS2.p1.2.m2.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.2.m2.1b"><ci id="A3.SS2.p1.2.m2.1.1.cmml" xref="A3.SS2.p1.2.m2.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.2.m2.1c">b</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.2.m2.1d">italic_b</annotation></semantics></math> to 3, and maximal depth <math alttext="D" class="ltx_Math" display="inline" id="A3.SS2.p1.3.m3.1"><semantics id="A3.SS2.p1.3.m3.1a"><mi id="A3.SS2.p1.3.m3.1.1" xref="A3.SS2.p1.3.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.3.m3.1b"><ci id="A3.SS2.p1.3.m3.1.1.cmml" xref="A3.SS2.p1.3.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.3.m3.1c">D</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.3.m3.1d">italic_D</annotation></semantics></math> to 3.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> The Self-Rewarding Tree Search (SeRTS) Algorithm.</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="algx1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="algx1.l1.1">Input:</span> question <math alttext="Q" class="ltx_Math" display="inline" id="algx1.l1.m1.1"><semantics id="algx1.l1.m1.1a"><mi id="algx1.l1.m1.1.1" xref="algx1.l1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx1.l1.m1.1b"><ci id="algx1.l1.m1.1.1.cmml" xref="algx1.l1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m1.1d">italic_Q</annotation></semantics></math>, query proposer <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="algx1.l1.m2.1"><semantics id="algx1.l1.m2.1a"><msubsup id="algx1.l1.m2.1.1" xref="algx1.l1.m2.1.1.cmml"><mi id="algx1.l1.m2.1.1.2.2" xref="algx1.l1.m2.1.1.2.2.cmml">P</mi><mi id="algx1.l1.m2.1.1.2.3" xref="algx1.l1.m2.1.1.2.3.cmml">θ</mi><mrow id="algx1.l1.m2.1.1.3" xref="algx1.l1.m2.1.1.3.cmml"><mi id="algx1.l1.m2.1.1.3.2" xref="algx1.l1.m2.1.1.3.2.cmml">q</mi><mo id="algx1.l1.m2.1.1.3.1" xref="algx1.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m2.1.1.3.3" xref="algx1.l1.m2.1.1.3.3.cmml">u</mi><mo id="algx1.l1.m2.1.1.3.1a" xref="algx1.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m2.1.1.3.4" xref="algx1.l1.m2.1.1.3.4.cmml">e</mi><mo id="algx1.l1.m2.1.1.3.1b" xref="algx1.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m2.1.1.3.5" xref="algx1.l1.m2.1.1.3.5.cmml">r</mi><mo id="algx1.l1.m2.1.1.3.1c" xref="algx1.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m2.1.1.3.6" xref="algx1.l1.m2.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx1.l1.m2.1b"><apply id="algx1.l1.m2.1.1.cmml" xref="algx1.l1.m2.1.1"><csymbol cd="ambiguous" id="algx1.l1.m2.1.1.1.cmml" xref="algx1.l1.m2.1.1">superscript</csymbol><apply id="algx1.l1.m2.1.1.2.cmml" xref="algx1.l1.m2.1.1"><csymbol cd="ambiguous" id="algx1.l1.m2.1.1.2.1.cmml" xref="algx1.l1.m2.1.1">subscript</csymbol><ci id="algx1.l1.m2.1.1.2.2.cmml" xref="algx1.l1.m2.1.1.2.2">𝑃</ci><ci id="algx1.l1.m2.1.1.2.3.cmml" xref="algx1.l1.m2.1.1.2.3">𝜃</ci></apply><apply id="algx1.l1.m2.1.1.3.cmml" xref="algx1.l1.m2.1.1.3"><times id="algx1.l1.m2.1.1.3.1.cmml" xref="algx1.l1.m2.1.1.3.1"></times><ci id="algx1.l1.m2.1.1.3.2.cmml" xref="algx1.l1.m2.1.1.3.2">𝑞</ci><ci id="algx1.l1.m2.1.1.3.3.cmml" xref="algx1.l1.m2.1.1.3.3">𝑢</ci><ci id="algx1.l1.m2.1.1.3.4.cmml" xref="algx1.l1.m2.1.1.3.4">𝑒</ci><ci id="algx1.l1.m2.1.1.3.5.cmml" xref="algx1.l1.m2.1.1.3.5">𝑟</ci><ci id="algx1.l1.m2.1.1.3.6.cmml" xref="algx1.l1.m2.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m2.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math>, evaluator <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="algx1.l1.m3.1"><semantics id="algx1.l1.m3.1a"><msubsup id="algx1.l1.m3.1.1" xref="algx1.l1.m3.1.1.cmml"><mi id="algx1.l1.m3.1.1.2.2" xref="algx1.l1.m3.1.1.2.2.cmml">P</mi><mi id="algx1.l1.m3.1.1.2.3" xref="algx1.l1.m3.1.1.2.3.cmml">θ</mi><mrow id="algx1.l1.m3.1.1.3" xref="algx1.l1.m3.1.1.3.cmml"><mi id="algx1.l1.m3.1.1.3.2" xref="algx1.l1.m3.1.1.3.2.cmml">e</mi><mo id="algx1.l1.m3.1.1.3.1" xref="algx1.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m3.1.1.3.3" xref="algx1.l1.m3.1.1.3.3.cmml">v</mi><mo id="algx1.l1.m3.1.1.3.1a" xref="algx1.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m3.1.1.3.4" xref="algx1.l1.m3.1.1.3.4.cmml">a</mi><mo id="algx1.l1.m3.1.1.3.1b" xref="algx1.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m3.1.1.3.5" xref="algx1.l1.m3.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx1.l1.m3.1b"><apply id="algx1.l1.m3.1.1.cmml" xref="algx1.l1.m3.1.1"><csymbol cd="ambiguous" id="algx1.l1.m3.1.1.1.cmml" xref="algx1.l1.m3.1.1">superscript</csymbol><apply id="algx1.l1.m3.1.1.2.cmml" xref="algx1.l1.m3.1.1"><csymbol cd="ambiguous" id="algx1.l1.m3.1.1.2.1.cmml" xref="algx1.l1.m3.1.1">subscript</csymbol><ci id="algx1.l1.m3.1.1.2.2.cmml" xref="algx1.l1.m3.1.1.2.2">𝑃</ci><ci id="algx1.l1.m3.1.1.2.3.cmml" xref="algx1.l1.m3.1.1.2.3">𝜃</ci></apply><apply id="algx1.l1.m3.1.1.3.cmml" xref="algx1.l1.m3.1.1.3"><times id="algx1.l1.m3.1.1.3.1.cmml" xref="algx1.l1.m3.1.1.3.1"></times><ci id="algx1.l1.m3.1.1.3.2.cmml" xref="algx1.l1.m3.1.1.3.2">𝑒</ci><ci id="algx1.l1.m3.1.1.3.3.cmml" xref="algx1.l1.m3.1.1.3.3">𝑣</ci><ci id="algx1.l1.m3.1.1.3.4.cmml" xref="algx1.l1.m3.1.1.3.4">𝑎</ci><ci id="algx1.l1.m3.1.1.3.5.cmml" xref="algx1.l1.m3.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m3.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m3.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>, max_simulation_number <math alttext="Sim" class="ltx_Math" display="inline" id="algx1.l1.m4.1"><semantics id="algx1.l1.m4.1a"><mrow id="algx1.l1.m4.1.1" xref="algx1.l1.m4.1.1.cmml"><mi id="algx1.l1.m4.1.1.2" xref="algx1.l1.m4.1.1.2.cmml">S</mi><mo id="algx1.l1.m4.1.1.1" xref="algx1.l1.m4.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m4.1.1.3" xref="algx1.l1.m4.1.1.3.cmml">i</mi><mo id="algx1.l1.m4.1.1.1a" xref="algx1.l1.m4.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m4.1.1.4" xref="algx1.l1.m4.1.1.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l1.m4.1b"><apply id="algx1.l1.m4.1.1.cmml" xref="algx1.l1.m4.1.1"><times id="algx1.l1.m4.1.1.1.cmml" xref="algx1.l1.m4.1.1.1"></times><ci id="algx1.l1.m4.1.1.2.cmml" xref="algx1.l1.m4.1.1.2">𝑆</ci><ci id="algx1.l1.m4.1.1.3.cmml" xref="algx1.l1.m4.1.1.3">𝑖</ci><ci id="algx1.l1.m4.1.1.4.cmml" xref="algx1.l1.m4.1.1.4">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m4.1c">Sim</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m4.1d">italic_S italic_i italic_m</annotation></semantics></math>, max_branch_number <math alttext="b" class="ltx_Math" display="inline" id="algx1.l1.m5.1"><semantics id="algx1.l1.m5.1a"><mi id="algx1.l1.m5.1.1" xref="algx1.l1.m5.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="algx1.l1.m5.1b"><ci id="algx1.l1.m5.1.1.cmml" xref="algx1.l1.m5.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m5.1c">b</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m5.1d">italic_b</annotation></semantics></math>, max_depth <math alttext="Depth" class="ltx_Math" display="inline" id="algx1.l1.m6.1"><semantics id="algx1.l1.m6.1a"><mrow id="algx1.l1.m6.1.1" xref="algx1.l1.m6.1.1.cmml"><mi id="algx1.l1.m6.1.1.2" xref="algx1.l1.m6.1.1.2.cmml">D</mi><mo id="algx1.l1.m6.1.1.1" xref="algx1.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m6.1.1.3" xref="algx1.l1.m6.1.1.3.cmml">e</mi><mo id="algx1.l1.m6.1.1.1a" xref="algx1.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m6.1.1.4" xref="algx1.l1.m6.1.1.4.cmml">p</mi><mo id="algx1.l1.m6.1.1.1b" xref="algx1.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m6.1.1.5" xref="algx1.l1.m6.1.1.5.cmml">t</mi><mo id="algx1.l1.m6.1.1.1c" xref="algx1.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx1.l1.m6.1.1.6" xref="algx1.l1.m6.1.1.6.cmml">h</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l1.m6.1b"><apply id="algx1.l1.m6.1.1.cmml" xref="algx1.l1.m6.1.1"><times id="algx1.l1.m6.1.1.1.cmml" xref="algx1.l1.m6.1.1.1"></times><ci id="algx1.l1.m6.1.1.2.cmml" xref="algx1.l1.m6.1.1.2">𝐷</ci><ci id="algx1.l1.m6.1.1.3.cmml" xref="algx1.l1.m6.1.1.3">𝑒</ci><ci id="algx1.l1.m6.1.1.4.cmml" xref="algx1.l1.m6.1.1.4">𝑝</ci><ci id="algx1.l1.m6.1.1.5.cmml" xref="algx1.l1.m6.1.1.5">𝑡</ci><ci id="algx1.l1.m6.1.1.6.cmml" xref="algx1.l1.m6.1.1.6">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m6.1c">Depth</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m6.1d">italic_D italic_e italic_p italic_t italic_h</annotation></semantics></math>, BM25_retriever <math alttext="\mathcal{R}_{bm25}" class="ltx_Math" display="inline" id="algx1.l1.m7.1"><semantics id="algx1.l1.m7.1a"><msub id="algx1.l1.m7.1.1" xref="algx1.l1.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l1.m7.1.1.2" xref="algx1.l1.m7.1.1.2.cmml">ℛ</mi><mrow id="algx1.l1.m7.1.1.3" xref="algx1.l1.m7.1.1.3.cmml"><mi id="algx1.l1.m7.1.1.3.2" xref="algx1.l1.m7.1.1.3.2.cmml">b</mi><mo id="algx1.l1.m7.1.1.3.1" xref="algx1.l1.m7.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m7.1.1.3.3" xref="algx1.l1.m7.1.1.3.3.cmml">m</mi><mo id="algx1.l1.m7.1.1.3.1a" xref="algx1.l1.m7.1.1.3.1.cmml">⁢</mo><mn id="algx1.l1.m7.1.1.3.4" xref="algx1.l1.m7.1.1.3.4.cmml">25</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l1.m7.1b"><apply id="algx1.l1.m7.1.1.cmml" xref="algx1.l1.m7.1.1"><csymbol cd="ambiguous" id="algx1.l1.m7.1.1.1.cmml" xref="algx1.l1.m7.1.1">subscript</csymbol><ci id="algx1.l1.m7.1.1.2.cmml" xref="algx1.l1.m7.1.1.2">ℛ</ci><apply id="algx1.l1.m7.1.1.3.cmml" xref="algx1.l1.m7.1.1.3"><times id="algx1.l1.m7.1.1.3.1.cmml" xref="algx1.l1.m7.1.1.3.1"></times><ci id="algx1.l1.m7.1.1.3.2.cmml" xref="algx1.l1.m7.1.1.3.2">𝑏</ci><ci id="algx1.l1.m7.1.1.3.3.cmml" xref="algx1.l1.m7.1.1.3.3">𝑚</ci><cn id="algx1.l1.m7.1.1.3.4.cmml" type="integer" xref="algx1.l1.m7.1.1.3.4">25</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m7.1c">\mathcal{R}_{bm25}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m7.1d">caligraphic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="algx1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span><math alttext="T_{Q}\leftarrow\text{Initialize\_tree}(Q)" class="ltx_Math" display="inline" id="algx1.l2.m1.1"><semantics id="algx1.l2.m1.1a"><mrow id="algx1.l2.m1.1.2" xref="algx1.l2.m1.1.2.cmml"><msub id="algx1.l2.m1.1.2.2" xref="algx1.l2.m1.1.2.2.cmml"><mi id="algx1.l2.m1.1.2.2.2" xref="algx1.l2.m1.1.2.2.2.cmml">T</mi><mi id="algx1.l2.m1.1.2.2.3" xref="algx1.l2.m1.1.2.2.3.cmml">Q</mi></msub><mo id="algx1.l2.m1.1.2.1" stretchy="false" xref="algx1.l2.m1.1.2.1.cmml">←</mo><mrow id="algx1.l2.m1.1.2.3" xref="algx1.l2.m1.1.2.3.cmml"><mtext id="algx1.l2.m1.1.2.3.2" xref="algx1.l2.m1.1.2.3.2a.cmml">Initialize_tree</mtext><mo id="algx1.l2.m1.1.2.3.1" xref="algx1.l2.m1.1.2.3.1.cmml">⁢</mo><mrow id="algx1.l2.m1.1.2.3.3.2" xref="algx1.l2.m1.1.2.3.cmml"><mo id="algx1.l2.m1.1.2.3.3.2.1" stretchy="false" xref="algx1.l2.m1.1.2.3.cmml">(</mo><mi id="algx1.l2.m1.1.1" xref="algx1.l2.m1.1.1.cmml">Q</mi><mo id="algx1.l2.m1.1.2.3.3.2.2" stretchy="false" xref="algx1.l2.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l2.m1.1b"><apply id="algx1.l2.m1.1.2.cmml" xref="algx1.l2.m1.1.2"><ci id="algx1.l2.m1.1.2.1.cmml" xref="algx1.l2.m1.1.2.1">←</ci><apply id="algx1.l2.m1.1.2.2.cmml" xref="algx1.l2.m1.1.2.2"><csymbol cd="ambiguous" id="algx1.l2.m1.1.2.2.1.cmml" xref="algx1.l2.m1.1.2.2">subscript</csymbol><ci id="algx1.l2.m1.1.2.2.2.cmml" xref="algx1.l2.m1.1.2.2.2">𝑇</ci><ci id="algx1.l2.m1.1.2.2.3.cmml" xref="algx1.l2.m1.1.2.2.3">𝑄</ci></apply><apply id="algx1.l2.m1.1.2.3.cmml" xref="algx1.l2.m1.1.2.3"><times id="algx1.l2.m1.1.2.3.1.cmml" xref="algx1.l2.m1.1.2.3.1"></times><ci id="algx1.l2.m1.1.2.3.2a.cmml" xref="algx1.l2.m1.1.2.3.2"><mtext id="algx1.l2.m1.1.2.3.2.cmml" xref="algx1.l2.m1.1.2.3.2">Initialize_tree</mtext></ci><ci id="algx1.l2.m1.1.1.cmml" xref="algx1.l2.m1.1.1">𝑄</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.m1.1c">T_{Q}\leftarrow\text{Initialize\_tree}(Q)</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.m1.1d">italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT ← Initialize_tree ( italic_Q )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span><span class="ltx_text ltx_font_bold" id="algx1.l3.1">for</span> <math alttext="i" class="ltx_Math" display="inline" id="algx1.l3.m1.1"><semantics id="algx1.l3.m1.1a"><mi id="algx1.l3.m1.1.1" xref="algx1.l3.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="algx1.l3.m1.1b"><ci id="algx1.l3.m1.1.1.cmml" xref="algx1.l3.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m1.1c">i</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m1.1d">italic_i</annotation></semantics></math> in range(<math alttext="Sim" class="ltx_Math" display="inline" id="algx1.l3.m2.1"><semantics id="algx1.l3.m2.1a"><mrow id="algx1.l3.m2.1.1" xref="algx1.l3.m2.1.1.cmml"><mi id="algx1.l3.m2.1.1.2" xref="algx1.l3.m2.1.1.2.cmml">S</mi><mo id="algx1.l3.m2.1.1.1" xref="algx1.l3.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l3.m2.1.1.3" xref="algx1.l3.m2.1.1.3.cmml">i</mi><mo id="algx1.l3.m2.1.1.1a" xref="algx1.l3.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l3.m2.1.1.4" xref="algx1.l3.m2.1.1.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l3.m2.1b"><apply id="algx1.l3.m2.1.1.cmml" xref="algx1.l3.m2.1.1"><times id="algx1.l3.m2.1.1.1.cmml" xref="algx1.l3.m2.1.1.1"></times><ci id="algx1.l3.m2.1.1.2.cmml" xref="algx1.l3.m2.1.1.2">𝑆</ci><ci id="algx1.l3.m2.1.1.3.cmml" xref="algx1.l3.m2.1.1.3">𝑖</ci><ci id="algx1.l3.m2.1.1.4.cmml" xref="algx1.l3.m2.1.1.4">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m2.1c">Sim</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m2.1d">italic_S italic_i italic_m</annotation></semantics></math>) <span class="ltx_text ltx_font_bold" id="algx1.l3.2">do</span>
</div>
<div class="ltx_listingline" id="algx1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <math alttext="C\leftarrow\text{root}(T_{q})" class="ltx_Math" display="inline" id="algx1.l4.m1.1"><semantics id="algx1.l4.m1.1a"><mrow id="algx1.l4.m1.1.1" xref="algx1.l4.m1.1.1.cmml"><mi id="algx1.l4.m1.1.1.3" xref="algx1.l4.m1.1.1.3.cmml">C</mi><mo id="algx1.l4.m1.1.1.2" stretchy="false" xref="algx1.l4.m1.1.1.2.cmml">←</mo><mrow id="algx1.l4.m1.1.1.1" xref="algx1.l4.m1.1.1.1.cmml"><mtext id="algx1.l4.m1.1.1.1.3" xref="algx1.l4.m1.1.1.1.3a.cmml">root</mtext><mo id="algx1.l4.m1.1.1.1.2" xref="algx1.l4.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx1.l4.m1.1.1.1.1.1" xref="algx1.l4.m1.1.1.1.1.1.1.cmml"><mo id="algx1.l4.m1.1.1.1.1.1.2" stretchy="false" xref="algx1.l4.m1.1.1.1.1.1.1.cmml">(</mo><msub id="algx1.l4.m1.1.1.1.1.1.1" xref="algx1.l4.m1.1.1.1.1.1.1.cmml"><mi id="algx1.l4.m1.1.1.1.1.1.1.2" xref="algx1.l4.m1.1.1.1.1.1.1.2.cmml">T</mi><mi id="algx1.l4.m1.1.1.1.1.1.1.3" xref="algx1.l4.m1.1.1.1.1.1.1.3.cmml">q</mi></msub><mo id="algx1.l4.m1.1.1.1.1.1.3" stretchy="false" xref="algx1.l4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l4.m1.1b"><apply id="algx1.l4.m1.1.1.cmml" xref="algx1.l4.m1.1.1"><ci id="algx1.l4.m1.1.1.2.cmml" xref="algx1.l4.m1.1.1.2">←</ci><ci id="algx1.l4.m1.1.1.3.cmml" xref="algx1.l4.m1.1.1.3">𝐶</ci><apply id="algx1.l4.m1.1.1.1.cmml" xref="algx1.l4.m1.1.1.1"><times id="algx1.l4.m1.1.1.1.2.cmml" xref="algx1.l4.m1.1.1.1.2"></times><ci id="algx1.l4.m1.1.1.1.3a.cmml" xref="algx1.l4.m1.1.1.1.3"><mtext id="algx1.l4.m1.1.1.1.3.cmml" xref="algx1.l4.m1.1.1.1.3">root</mtext></ci><apply id="algx1.l4.m1.1.1.1.1.1.1.cmml" xref="algx1.l4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l4.m1.1.1.1.1.1.1.1.cmml" xref="algx1.l4.m1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l4.m1.1.1.1.1.1.1.2.cmml" xref="algx1.l4.m1.1.1.1.1.1.1.2">𝑇</ci><ci id="algx1.l4.m1.1.1.1.1.1.1.3.cmml" xref="algx1.l4.m1.1.1.1.1.1.1.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m1.1c">C\leftarrow\text{root}(T_{q})</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m1.1d">italic_C ← root ( italic_T start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>     <span class="ltx_text ltx_font_bold ltx_font_italic" id="algx1.l5.1">———————Selection———————</span>
</div>
<div class="ltx_listingline" id="algx1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l6.1">while</span> <math alttext="C" class="ltx_Math" display="inline" id="algx1.l6.m1.1"><semantics id="algx1.l6.m1.1a"><mi id="algx1.l6.m1.1.1" xref="algx1.l6.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l6.m1.1b"><ci id="algx1.l6.m1.1.1.cmml" xref="algx1.l6.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m1.1d">italic_C</annotation></semantics></math> is not leaf node do <span class="ltx_text ltx_font_bold" id="algx1.l6.2">do</span>
</div>
<div class="ltx_listingline" id="algx1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <math alttext="C\leftarrow\arg\max_{s}UCB(s)=\frac{R(s)}{N(s)}+C*\sqrt{2*\ln\frac{N(p)}{N(s)}}" class="ltx_Math" display="inline" id="algx1.l7.m1.5"><semantics id="algx1.l7.m1.5a"><mrow id="algx1.l7.m1.5.6" xref="algx1.l7.m1.5.6.cmml"><mi id="algx1.l7.m1.5.6.2" xref="algx1.l7.m1.5.6.2.cmml">C</mi><mo id="algx1.l7.m1.5.6.3" stretchy="false" xref="algx1.l7.m1.5.6.3.cmml">←</mo><mrow id="algx1.l7.m1.5.6.4" xref="algx1.l7.m1.5.6.4.cmml"><mrow id="algx1.l7.m1.5.6.4.2" xref="algx1.l7.m1.5.6.4.2.cmml"><mi id="algx1.l7.m1.5.6.4.2.1" xref="algx1.l7.m1.5.6.4.2.1.cmml">arg</mi><mo id="algx1.l7.m1.5.6.4.2a" lspace="0.167em" xref="algx1.l7.m1.5.6.4.2.cmml">⁡</mo><mrow id="algx1.l7.m1.5.6.4.2.2" xref="algx1.l7.m1.5.6.4.2.2.cmml"><msub id="algx1.l7.m1.5.6.4.2.2.1" xref="algx1.l7.m1.5.6.4.2.2.1.cmml"><mi id="algx1.l7.m1.5.6.4.2.2.1.2" xref="algx1.l7.m1.5.6.4.2.2.1.2.cmml">max</mi><mi id="algx1.l7.m1.5.6.4.2.2.1.3" xref="algx1.l7.m1.5.6.4.2.2.1.3.cmml">s</mi></msub><mo id="algx1.l7.m1.5.6.4.2.2a" lspace="0.167em" xref="algx1.l7.m1.5.6.4.2.2.cmml">⁡</mo><mrow id="algx1.l7.m1.5.6.4.2.2.2" xref="algx1.l7.m1.5.6.4.2.2.2.cmml"><mi id="algx1.l7.m1.5.6.4.2.2.2.2" xref="algx1.l7.m1.5.6.4.2.2.2.2.cmml">U</mi><mo id="algx1.l7.m1.5.6.4.2.2.2.1" xref="algx1.l7.m1.5.6.4.2.2.2.1.cmml">⁢</mo><mi id="algx1.l7.m1.5.6.4.2.2.2.3" xref="algx1.l7.m1.5.6.4.2.2.2.3.cmml">C</mi><mo id="algx1.l7.m1.5.6.4.2.2.2.1a" xref="algx1.l7.m1.5.6.4.2.2.2.1.cmml">⁢</mo><mi id="algx1.l7.m1.5.6.4.2.2.2.4" xref="algx1.l7.m1.5.6.4.2.2.2.4.cmml">B</mi></mrow></mrow></mrow><mo id="algx1.l7.m1.5.6.4.1" xref="algx1.l7.m1.5.6.4.1.cmml">⁢</mo><mrow id="algx1.l7.m1.5.6.4.3.2" xref="algx1.l7.m1.5.6.4.cmml"><mo id="algx1.l7.m1.5.6.4.3.2.1" stretchy="false" xref="algx1.l7.m1.5.6.4.cmml">(</mo><mi id="algx1.l7.m1.5.5" xref="algx1.l7.m1.5.5.cmml">s</mi><mo id="algx1.l7.m1.5.6.4.3.2.2" stretchy="false" xref="algx1.l7.m1.5.6.4.cmml">)</mo></mrow></mrow><mo id="algx1.l7.m1.5.6.5" xref="algx1.l7.m1.5.6.5.cmml">=</mo><mrow id="algx1.l7.m1.5.6.6" xref="algx1.l7.m1.5.6.6.cmml"><mfrac id="algx1.l7.m1.2.2" xref="algx1.l7.m1.2.2.cmml"><mrow id="algx1.l7.m1.1.1.1" xref="algx1.l7.m1.1.1.1.cmml"><mi id="algx1.l7.m1.1.1.1.3" xref="algx1.l7.m1.1.1.1.3.cmml">R</mi><mo id="algx1.l7.m1.1.1.1.2" xref="algx1.l7.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx1.l7.m1.1.1.1.4.2" xref="algx1.l7.m1.1.1.1.cmml"><mo id="algx1.l7.m1.1.1.1.4.2.1" stretchy="false" xref="algx1.l7.m1.1.1.1.cmml">(</mo><mi id="algx1.l7.m1.1.1.1.1" xref="algx1.l7.m1.1.1.1.1.cmml">s</mi><mo id="algx1.l7.m1.1.1.1.4.2.2" stretchy="false" xref="algx1.l7.m1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="algx1.l7.m1.2.2.2" xref="algx1.l7.m1.2.2.2.cmml"><mi id="algx1.l7.m1.2.2.2.3" xref="algx1.l7.m1.2.2.2.3.cmml">N</mi><mo id="algx1.l7.m1.2.2.2.2" xref="algx1.l7.m1.2.2.2.2.cmml">⁢</mo><mrow id="algx1.l7.m1.2.2.2.4.2" xref="algx1.l7.m1.2.2.2.cmml"><mo id="algx1.l7.m1.2.2.2.4.2.1" stretchy="false" xref="algx1.l7.m1.2.2.2.cmml">(</mo><mi id="algx1.l7.m1.2.2.2.1" xref="algx1.l7.m1.2.2.2.1.cmml">s</mi><mo id="algx1.l7.m1.2.2.2.4.2.2" stretchy="false" xref="algx1.l7.m1.2.2.2.cmml">)</mo></mrow></mrow></mfrac><mo id="algx1.l7.m1.5.6.6.1" xref="algx1.l7.m1.5.6.6.1.cmml">+</mo><mrow id="algx1.l7.m1.5.6.6.2" xref="algx1.l7.m1.5.6.6.2.cmml"><mi id="algx1.l7.m1.5.6.6.2.2" xref="algx1.l7.m1.5.6.6.2.2.cmml">C</mi><mo id="algx1.l7.m1.5.6.6.2.1" lspace="0.222em" rspace="0.222em" xref="algx1.l7.m1.5.6.6.2.1.cmml">∗</mo><msqrt id="algx1.l7.m1.4.4" xref="algx1.l7.m1.4.4.cmml"><mrow id="algx1.l7.m1.4.4.2" xref="algx1.l7.m1.4.4.2.cmml"><mn id="algx1.l7.m1.4.4.2.4" xref="algx1.l7.m1.4.4.2.4.cmml">2</mn><mo id="algx1.l7.m1.4.4.2.3" lspace="0.222em" rspace="0.222em" xref="algx1.l7.m1.4.4.2.3.cmml">∗</mo><mrow id="algx1.l7.m1.4.4.2.5" xref="algx1.l7.m1.4.4.2.5.cmml"><mi id="algx1.l7.m1.4.4.2.5.1" xref="algx1.l7.m1.4.4.2.5.1.cmml">ln</mi><mo id="algx1.l7.m1.4.4.2.5a" lspace="0.167em" xref="algx1.l7.m1.4.4.2.5.cmml">⁡</mo><mfrac id="algx1.l7.m1.4.4.2.2" xref="algx1.l7.m1.4.4.2.2.cmml"><mrow id="algx1.l7.m1.3.3.1.1.1" xref="algx1.l7.m1.3.3.1.1.1.cmml"><mi id="algx1.l7.m1.3.3.1.1.1.3" xref="algx1.l7.m1.3.3.1.1.1.3.cmml">N</mi><mo id="algx1.l7.m1.3.3.1.1.1.2" xref="algx1.l7.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="algx1.l7.m1.3.3.1.1.1.4.2" xref="algx1.l7.m1.3.3.1.1.1.cmml"><mo id="algx1.l7.m1.3.3.1.1.1.4.2.1" stretchy="false" xref="algx1.l7.m1.3.3.1.1.1.cmml">(</mo><mi id="algx1.l7.m1.3.3.1.1.1.1" xref="algx1.l7.m1.3.3.1.1.1.1.cmml">p</mi><mo id="algx1.l7.m1.3.3.1.1.1.4.2.2" stretchy="false" xref="algx1.l7.m1.3.3.1.1.1.cmml">)</mo></mrow></mrow><mrow id="algx1.l7.m1.4.4.2.2.2" xref="algx1.l7.m1.4.4.2.2.2.cmml"><mi id="algx1.l7.m1.4.4.2.2.2.3" xref="algx1.l7.m1.4.4.2.2.2.3.cmml">N</mi><mo id="algx1.l7.m1.4.4.2.2.2.2" xref="algx1.l7.m1.4.4.2.2.2.2.cmml">⁢</mo><mrow id="algx1.l7.m1.4.4.2.2.2.4.2" xref="algx1.l7.m1.4.4.2.2.2.cmml"><mo id="algx1.l7.m1.4.4.2.2.2.4.2.1" stretchy="false" xref="algx1.l7.m1.4.4.2.2.2.cmml">(</mo><mi id="algx1.l7.m1.4.4.2.2.2.1" xref="algx1.l7.m1.4.4.2.2.2.1.cmml">s</mi><mo id="algx1.l7.m1.4.4.2.2.2.4.2.2" stretchy="false" xref="algx1.l7.m1.4.4.2.2.2.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow></msqrt></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l7.m1.5b"><apply id="algx1.l7.m1.5.6.cmml" xref="algx1.l7.m1.5.6"><and id="algx1.l7.m1.5.6a.cmml" xref="algx1.l7.m1.5.6"></and><apply id="algx1.l7.m1.5.6b.cmml" xref="algx1.l7.m1.5.6"><ci id="algx1.l7.m1.5.6.3.cmml" xref="algx1.l7.m1.5.6.3">←</ci><ci id="algx1.l7.m1.5.6.2.cmml" xref="algx1.l7.m1.5.6.2">𝐶</ci><apply id="algx1.l7.m1.5.6.4.cmml" xref="algx1.l7.m1.5.6.4"><times id="algx1.l7.m1.5.6.4.1.cmml" xref="algx1.l7.m1.5.6.4.1"></times><apply id="algx1.l7.m1.5.6.4.2.cmml" xref="algx1.l7.m1.5.6.4.2"><arg id="algx1.l7.m1.5.6.4.2.1.cmml" xref="algx1.l7.m1.5.6.4.2.1"></arg><apply id="algx1.l7.m1.5.6.4.2.2.cmml" xref="algx1.l7.m1.5.6.4.2.2"><apply id="algx1.l7.m1.5.6.4.2.2.1.cmml" xref="algx1.l7.m1.5.6.4.2.2.1"><csymbol cd="ambiguous" id="algx1.l7.m1.5.6.4.2.2.1.1.cmml" xref="algx1.l7.m1.5.6.4.2.2.1">subscript</csymbol><max id="algx1.l7.m1.5.6.4.2.2.1.2.cmml" xref="algx1.l7.m1.5.6.4.2.2.1.2"></max><ci id="algx1.l7.m1.5.6.4.2.2.1.3.cmml" xref="algx1.l7.m1.5.6.4.2.2.1.3">𝑠</ci></apply><apply id="algx1.l7.m1.5.6.4.2.2.2.cmml" xref="algx1.l7.m1.5.6.4.2.2.2"><times id="algx1.l7.m1.5.6.4.2.2.2.1.cmml" xref="algx1.l7.m1.5.6.4.2.2.2.1"></times><ci id="algx1.l7.m1.5.6.4.2.2.2.2.cmml" xref="algx1.l7.m1.5.6.4.2.2.2.2">𝑈</ci><ci id="algx1.l7.m1.5.6.4.2.2.2.3.cmml" xref="algx1.l7.m1.5.6.4.2.2.2.3">𝐶</ci><ci id="algx1.l7.m1.5.6.4.2.2.2.4.cmml" xref="algx1.l7.m1.5.6.4.2.2.2.4">𝐵</ci></apply></apply></apply><ci id="algx1.l7.m1.5.5.cmml" xref="algx1.l7.m1.5.5">𝑠</ci></apply></apply><apply id="algx1.l7.m1.5.6c.cmml" xref="algx1.l7.m1.5.6"><eq id="algx1.l7.m1.5.6.5.cmml" xref="algx1.l7.m1.5.6.5"></eq><share href="https://arxiv.org/html/2406.11258v1#algx1.l7.m1.5.6.4.cmml" id="algx1.l7.m1.5.6d.cmml" xref="algx1.l7.m1.5.6"></share><apply id="algx1.l7.m1.5.6.6.cmml" xref="algx1.l7.m1.5.6.6"><plus id="algx1.l7.m1.5.6.6.1.cmml" xref="algx1.l7.m1.5.6.6.1"></plus><apply id="algx1.l7.m1.2.2.cmml" xref="algx1.l7.m1.2.2"><divide id="algx1.l7.m1.2.2.3.cmml" xref="algx1.l7.m1.2.2"></divide><apply id="algx1.l7.m1.1.1.1.cmml" xref="algx1.l7.m1.1.1.1"><times id="algx1.l7.m1.1.1.1.2.cmml" xref="algx1.l7.m1.1.1.1.2"></times><ci id="algx1.l7.m1.1.1.1.3.cmml" xref="algx1.l7.m1.1.1.1.3">𝑅</ci><ci id="algx1.l7.m1.1.1.1.1.cmml" xref="algx1.l7.m1.1.1.1.1">𝑠</ci></apply><apply id="algx1.l7.m1.2.2.2.cmml" xref="algx1.l7.m1.2.2.2"><times id="algx1.l7.m1.2.2.2.2.cmml" xref="algx1.l7.m1.2.2.2.2"></times><ci id="algx1.l7.m1.2.2.2.3.cmml" xref="algx1.l7.m1.2.2.2.3">𝑁</ci><ci id="algx1.l7.m1.2.2.2.1.cmml" xref="algx1.l7.m1.2.2.2.1">𝑠</ci></apply></apply><apply id="algx1.l7.m1.5.6.6.2.cmml" xref="algx1.l7.m1.5.6.6.2"><times id="algx1.l7.m1.5.6.6.2.1.cmml" xref="algx1.l7.m1.5.6.6.2.1"></times><ci id="algx1.l7.m1.5.6.6.2.2.cmml" xref="algx1.l7.m1.5.6.6.2.2">𝐶</ci><apply id="algx1.l7.m1.4.4.cmml" xref="algx1.l7.m1.4.4"><root id="algx1.l7.m1.4.4a.cmml" xref="algx1.l7.m1.4.4"></root><apply id="algx1.l7.m1.4.4.2.cmml" xref="algx1.l7.m1.4.4.2"><times id="algx1.l7.m1.4.4.2.3.cmml" xref="algx1.l7.m1.4.4.2.3"></times><cn id="algx1.l7.m1.4.4.2.4.cmml" type="integer" xref="algx1.l7.m1.4.4.2.4">2</cn><apply id="algx1.l7.m1.4.4.2.5.cmml" xref="algx1.l7.m1.4.4.2.5"><ln id="algx1.l7.m1.4.4.2.5.1.cmml" xref="algx1.l7.m1.4.4.2.5.1"></ln><apply id="algx1.l7.m1.4.4.2.2.cmml" xref="algx1.l7.m1.4.4.2.2"><divide id="algx1.l7.m1.4.4.2.2.3.cmml" xref="algx1.l7.m1.4.4.2.2"></divide><apply id="algx1.l7.m1.3.3.1.1.1.cmml" xref="algx1.l7.m1.3.3.1.1.1"><times id="algx1.l7.m1.3.3.1.1.1.2.cmml" xref="algx1.l7.m1.3.3.1.1.1.2"></times><ci id="algx1.l7.m1.3.3.1.1.1.3.cmml" xref="algx1.l7.m1.3.3.1.1.1.3">𝑁</ci><ci id="algx1.l7.m1.3.3.1.1.1.1.cmml" xref="algx1.l7.m1.3.3.1.1.1.1">𝑝</ci></apply><apply id="algx1.l7.m1.4.4.2.2.2.cmml" xref="algx1.l7.m1.4.4.2.2.2"><times id="algx1.l7.m1.4.4.2.2.2.2.cmml" xref="algx1.l7.m1.4.4.2.2.2.2"></times><ci id="algx1.l7.m1.4.4.2.2.2.3.cmml" xref="algx1.l7.m1.4.4.2.2.2.3">𝑁</ci><ci id="algx1.l7.m1.4.4.2.2.2.1.cmml" xref="algx1.l7.m1.4.4.2.2.2.1">𝑠</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l7.m1.5c">C\leftarrow\arg\max_{s}UCB(s)=\frac{R(s)}{N(s)}+C*\sqrt{2*\ln\frac{N(p)}{N(s)}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l7.m1.5d">italic_C ← roman_arg roman_max start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT italic_U italic_C italic_B ( italic_s ) = divide start_ARG italic_R ( italic_s ) end_ARG start_ARG italic_N ( italic_s ) end_ARG + italic_C ∗ square-root start_ARG 2 ∗ roman_ln divide start_ARG italic_N ( italic_p ) end_ARG start_ARG italic_N ( italic_s ) end_ARG end_ARG</annotation></semantics></math> <span class="ltx_text" id="algx1.l7.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l7.1.m1.1"><semantics id="algx1.l7.1.m1.1a"><mo id="algx1.l7.1.m1.1.1" xref="algx1.l7.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l7.1.m1.1b"><ci id="algx1.l7.1.m1.1.1.cmml" xref="algx1.l7.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l7.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l7.1.m1.1d">▷</annotation></semantics></math> Select child node based on UCB
</span>
</div>
<div class="ltx_listingline" id="algx1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l8.3">if</span> <math alttext="C" class="ltx_Math" display="inline" id="algx1.l8.m1.1"><semantics id="algx1.l8.m1.1a"><mi id="algx1.l8.m1.1.1" xref="algx1.l8.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l8.m1.1b"><ci id="algx1.l8.m1.1.1.cmml" xref="algx1.l8.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m1.1d">italic_C</annotation></semantics></math>’s depth &gt;= <math alttext="Depth" class="ltx_Math" display="inline" id="algx1.l8.m2.1"><semantics id="algx1.l8.m2.1a"><mrow id="algx1.l8.m2.1.1" xref="algx1.l8.m2.1.1.cmml"><mi id="algx1.l8.m2.1.1.2" xref="algx1.l8.m2.1.1.2.cmml">D</mi><mo id="algx1.l8.m2.1.1.1" xref="algx1.l8.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l8.m2.1.1.3" xref="algx1.l8.m2.1.1.3.cmml">e</mi><mo id="algx1.l8.m2.1.1.1a" xref="algx1.l8.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l8.m2.1.1.4" xref="algx1.l8.m2.1.1.4.cmml">p</mi><mo id="algx1.l8.m2.1.1.1b" xref="algx1.l8.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l8.m2.1.1.5" xref="algx1.l8.m2.1.1.5.cmml">t</mi><mo id="algx1.l8.m2.1.1.1c" xref="algx1.l8.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l8.m2.1.1.6" xref="algx1.l8.m2.1.1.6.cmml">h</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l8.m2.1b"><apply id="algx1.l8.m2.1.1.cmml" xref="algx1.l8.m2.1.1"><times id="algx1.l8.m2.1.1.1.cmml" xref="algx1.l8.m2.1.1.1"></times><ci id="algx1.l8.m2.1.1.2.cmml" xref="algx1.l8.m2.1.1.2">𝐷</ci><ci id="algx1.l8.m2.1.1.3.cmml" xref="algx1.l8.m2.1.1.3">𝑒</ci><ci id="algx1.l8.m2.1.1.4.cmml" xref="algx1.l8.m2.1.1.4">𝑝</ci><ci id="algx1.l8.m2.1.1.5.cmml" xref="algx1.l8.m2.1.1.5">𝑡</ci><ci id="algx1.l8.m2.1.1.6.cmml" xref="algx1.l8.m2.1.1.6">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m2.1c">Depth</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m2.1d">italic_D italic_e italic_p italic_t italic_h</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l8.4">then</span> <span class="ltx_text" id="algx1.l8.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l8.1.m1.1"><semantics id="algx1.l8.1.m1.1a"><mo id="algx1.l8.1.m1.1.1" xref="algx1.l8.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l8.1.m1.1b"><ci id="algx1.l8.1.m1.1.1.cmml" xref="algx1.l8.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.1.m1.1d">▷</annotation></semantics></math> Break if <math alttext="C" class="ltx_Math" display="inline" id="algx1.l8.2.m2.1"><semantics id="algx1.l8.2.m2.1a"><mi id="algx1.l8.2.m2.1.1" xref="algx1.l8.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l8.2.m2.1b"><ci id="algx1.l8.2.m2.1.1.cmml" xref="algx1.l8.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.2.m2.1d">italic_C</annotation></semantics></math> reaches maximal depth
</span>
</div>
<div class="ltx_listingline" id="algx1.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>              <span class="ltx_text ltx_font_bold" id="algx1.l9.1">break</span>
</div>
<div class="ltx_listingline" id="algx1.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l10.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l10.2">if</span>
</div>
<div class="ltx_listingline" id="algx1.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>
</div>
<div class="ltx_listingline" id="algx1.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l12.3">if</span> <math alttext="C" class="ltx_Math" display="inline" id="algx1.l12.m1.1"><semantics id="algx1.l12.m1.1a"><mi id="algx1.l12.m1.1.1" xref="algx1.l12.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l12.m1.1b"><ci id="algx1.l12.m1.1.1.cmml" xref="algx1.l12.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.m1.1d">italic_C</annotation></semantics></math> has less than <math alttext="b" class="ltx_Math" display="inline" id="algx1.l12.m2.1"><semantics id="algx1.l12.m2.1a"><mi id="algx1.l12.m2.1.1" xref="algx1.l12.m2.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="algx1.l12.m2.1b"><ci id="algx1.l12.m2.1.1.cmml" xref="algx1.l12.m2.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.m2.1c">b</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.m2.1d">italic_b</annotation></semantics></math> children nodes <span class="ltx_text ltx_font_bold" id="algx1.l12.4">then</span> <span class="ltx_text" id="algx1.l12.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l12.1.m1.1"><semantics id="algx1.l12.1.m1.1a"><mo id="algx1.l12.1.m1.1.1" xref="algx1.l12.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l12.1.m1.1b"><ci id="algx1.l12.1.m1.1.1.cmml" xref="algx1.l12.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.1.m1.1d">▷</annotation></semantics></math> Select <math alttext="C" class="ltx_Math" display="inline" id="algx1.l12.2.m2.1"><semantics id="algx1.l12.2.m2.1a"><mi id="algx1.l12.2.m2.1.1" xref="algx1.l12.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l12.2.m2.1b"><ci id="algx1.l12.2.m2.1.1.cmml" xref="algx1.l12.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.2.m2.1d">italic_C</annotation></semantics></math> if it is not fully expanded
</span>
</div>
<div class="ltx_listingline" id="algx1.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>              <span class="ltx_text ltx_font_bold" id="algx1.l13.1">break</span>
</div>
<div class="ltx_listingline" id="algx1.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l14.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l14.2">if</span>
</div>
<div class="ltx_listingline" id="algx1.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l15.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l15.2">while</span>
</div>
<div class="ltx_listingline" id="algx1.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l16.3">if</span> <math alttext="C" class="ltx_Math" display="inline" id="algx1.l16.m1.1"><semantics id="algx1.l16.m1.1a"><mi id="algx1.l16.m1.1.1" xref="algx1.l16.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l16.m1.1b"><ci id="algx1.l16.m1.1.1.cmml" xref="algx1.l16.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l16.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.m1.1d">italic_C</annotation></semantics></math>’s depth &gt;= <math alttext="Depth" class="ltx_Math" display="inline" id="algx1.l16.m2.1"><semantics id="algx1.l16.m2.1a"><mrow id="algx1.l16.m2.1.1" xref="algx1.l16.m2.1.1.cmml"><mi id="algx1.l16.m2.1.1.2" xref="algx1.l16.m2.1.1.2.cmml">D</mi><mo id="algx1.l16.m2.1.1.1" xref="algx1.l16.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l16.m2.1.1.3" xref="algx1.l16.m2.1.1.3.cmml">e</mi><mo id="algx1.l16.m2.1.1.1a" xref="algx1.l16.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l16.m2.1.1.4" xref="algx1.l16.m2.1.1.4.cmml">p</mi><mo id="algx1.l16.m2.1.1.1b" xref="algx1.l16.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l16.m2.1.1.5" xref="algx1.l16.m2.1.1.5.cmml">t</mi><mo id="algx1.l16.m2.1.1.1c" xref="algx1.l16.m2.1.1.1.cmml">⁢</mo><mi id="algx1.l16.m2.1.1.6" xref="algx1.l16.m2.1.1.6.cmml">h</mi></mrow><annotation-xml encoding="MathML-Content" id="algx1.l16.m2.1b"><apply id="algx1.l16.m2.1.1.cmml" xref="algx1.l16.m2.1.1"><times id="algx1.l16.m2.1.1.1.cmml" xref="algx1.l16.m2.1.1.1"></times><ci id="algx1.l16.m2.1.1.2.cmml" xref="algx1.l16.m2.1.1.2">𝐷</ci><ci id="algx1.l16.m2.1.1.3.cmml" xref="algx1.l16.m2.1.1.3">𝑒</ci><ci id="algx1.l16.m2.1.1.4.cmml" xref="algx1.l16.m2.1.1.4">𝑝</ci><ci id="algx1.l16.m2.1.1.5.cmml" xref="algx1.l16.m2.1.1.5">𝑡</ci><ci id="algx1.l16.m2.1.1.6.cmml" xref="algx1.l16.m2.1.1.6">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l16.m2.1c">Depth</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.m2.1d">italic_D italic_e italic_p italic_t italic_h</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx1.l16.4">then</span> <span class="ltx_text" id="algx1.l16.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l16.1.m1.1"><semantics id="algx1.l16.1.m1.1a"><mo id="algx1.l16.1.m1.1.1" xref="algx1.l16.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l16.1.m1.1b"><ci id="algx1.l16.1.m1.1.1.cmml" xref="algx1.l16.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l16.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.1.m1.1d">▷</annotation></semantics></math> Continue to select other nodes if <math alttext="C" class="ltx_Math" display="inline" id="algx1.l16.2.m2.1"><semantics id="algx1.l16.2.m2.1a"><mi id="algx1.l16.2.m2.1.1" xref="algx1.l16.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l16.2.m2.1b"><ci id="algx1.l16.2.m2.1.1.cmml" xref="algx1.l16.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l16.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.2.m2.1d">italic_C</annotation></semantics></math> reaches maximal depth
</span>
</div>
<div class="ltx_listingline" id="algx1.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l17.1">continue</span>
</div>
<div class="ltx_listingline" id="algx1.l18">
<span class="ltx_tag ltx_tag_listingline">18:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l18.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l18.2">if</span>
</div>
<div class="ltx_listingline" id="algx1.l19">
<span class="ltx_tag ltx_tag_listingline">19:</span>
</div>
<div class="ltx_listingline" id="algx1.l20">
<span class="ltx_tag ltx_tag_listingline">20:</span>     <span class="ltx_text ltx_font_bold ltx_font_italic" id="algx1.l20.1">————Expansion &amp; Evaluation————</span>
</div>
<div class="ltx_listingline" id="algx1.l21">
<span class="ltx_tag ltx_tag_listingline">21:</span>     <math alttext="O^{anc}_{q}\leftarrow\bigcup_{k\in\text{ancestors}(C)}A_{k}:\text{query %
proposals from all $C$'s ancestor nodes}" class="ltx_Math" display="inline" id="algx1.l21.m1.2"><semantics id="algx1.l21.m1.2a"><mrow id="algx1.l21.m1.2.3" xref="algx1.l21.m1.2.3.cmml"><mrow id="algx1.l21.m1.2.3.2" xref="algx1.l21.m1.2.3.2.cmml"><msubsup id="algx1.l21.m1.2.3.2.2" xref="algx1.l21.m1.2.3.2.2.cmml"><mi id="algx1.l21.m1.2.3.2.2.2.2" xref="algx1.l21.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx1.l21.m1.2.3.2.2.3" xref="algx1.l21.m1.2.3.2.2.3.cmml">q</mi><mrow id="algx1.l21.m1.2.3.2.2.2.3" xref="algx1.l21.m1.2.3.2.2.2.3.cmml"><mi id="algx1.l21.m1.2.3.2.2.2.3.2" xref="algx1.l21.m1.2.3.2.2.2.3.2.cmml">a</mi><mo id="algx1.l21.m1.2.3.2.2.2.3.1" xref="algx1.l21.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l21.m1.2.3.2.2.2.3.3" xref="algx1.l21.m1.2.3.2.2.2.3.3.cmml">n</mi><mo id="algx1.l21.m1.2.3.2.2.2.3.1a" xref="algx1.l21.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l21.m1.2.3.2.2.2.3.4" xref="algx1.l21.m1.2.3.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx1.l21.m1.2.3.2.1" rspace="0.111em" stretchy="false" xref="algx1.l21.m1.2.3.2.1.cmml">←</mo><mrow id="algx1.l21.m1.2.3.2.3" xref="algx1.l21.m1.2.3.2.3.cmml"><msub id="algx1.l21.m1.2.3.2.3.1" xref="algx1.l21.m1.2.3.2.3.1.cmml"><mo id="algx1.l21.m1.2.3.2.3.1.2" xref="algx1.l21.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx1.l21.m1.2.2.1" xref="algx1.l21.m1.2.2.1.cmml"><mi id="algx1.l21.m1.2.2.1.3" xref="algx1.l21.m1.2.2.1.3.cmml">k</mi><mo id="algx1.l21.m1.2.2.1.2" xref="algx1.l21.m1.2.2.1.2.cmml">∈</mo><mrow id="algx1.l21.m1.2.2.1.4" xref="algx1.l21.m1.2.2.1.4.cmml"><mtext id="algx1.l21.m1.2.2.1.4.2" xref="algx1.l21.m1.2.2.1.4.2a.cmml">ancestors</mtext><mo id="algx1.l21.m1.2.2.1.4.1" xref="algx1.l21.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx1.l21.m1.2.2.1.4.3.2" xref="algx1.l21.m1.2.2.1.4.cmml"><mo id="algx1.l21.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx1.l21.m1.2.2.1.4.cmml">(</mo><mi id="algx1.l21.m1.2.2.1.1" xref="algx1.l21.m1.2.2.1.1.cmml">C</mi><mo id="algx1.l21.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx1.l21.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx1.l21.m1.2.3.2.3.2" xref="algx1.l21.m1.2.3.2.3.2.cmml"><mi id="algx1.l21.m1.2.3.2.3.2.2" xref="algx1.l21.m1.2.3.2.3.2.2.cmml">A</mi><mi id="algx1.l21.m1.2.3.2.3.2.3" xref="algx1.l21.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx1.l21.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx1.l21.m1.2.3.1.cmml">:</mo><mrow id="algx1.l21.m1.1.1.1" xref="algx1.l21.m1.1.1.1c.cmml"><mtext id="algx1.l21.m1.1.1.1a" xref="algx1.l21.m1.1.1.1c.cmml">query proposals from all </mtext><mi id="algx1.l21.m1.1.1.1.m1.1.1" xref="algx1.l21.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx1.l21.m1.1.1.1b" xref="algx1.l21.m1.1.1.1c.cmml">’s ancestor nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l21.m1.2b"><apply id="algx1.l21.m1.2.3.cmml" xref="algx1.l21.m1.2.3"><ci id="algx1.l21.m1.2.3.1.cmml" xref="algx1.l21.m1.2.3.1">:</ci><apply id="algx1.l21.m1.2.3.2.cmml" xref="algx1.l21.m1.2.3.2"><ci id="algx1.l21.m1.2.3.2.1.cmml" xref="algx1.l21.m1.2.3.2.1">←</ci><apply id="algx1.l21.m1.2.3.2.2.cmml" xref="algx1.l21.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l21.m1.2.3.2.2.1.cmml" xref="algx1.l21.m1.2.3.2.2">subscript</csymbol><apply id="algx1.l21.m1.2.3.2.2.2.cmml" xref="algx1.l21.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l21.m1.2.3.2.2.2.1.cmml" xref="algx1.l21.m1.2.3.2.2">superscript</csymbol><ci id="algx1.l21.m1.2.3.2.2.2.2.cmml" xref="algx1.l21.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx1.l21.m1.2.3.2.2.2.3.cmml" xref="algx1.l21.m1.2.3.2.2.2.3"><times id="algx1.l21.m1.2.3.2.2.2.3.1.cmml" xref="algx1.l21.m1.2.3.2.2.2.3.1"></times><ci id="algx1.l21.m1.2.3.2.2.2.3.2.cmml" xref="algx1.l21.m1.2.3.2.2.2.3.2">𝑎</ci><ci id="algx1.l21.m1.2.3.2.2.2.3.3.cmml" xref="algx1.l21.m1.2.3.2.2.2.3.3">𝑛</ci><ci id="algx1.l21.m1.2.3.2.2.2.3.4.cmml" xref="algx1.l21.m1.2.3.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx1.l21.m1.2.3.2.2.3.cmml" xref="algx1.l21.m1.2.3.2.2.3">𝑞</ci></apply><apply id="algx1.l21.m1.2.3.2.3.cmml" xref="algx1.l21.m1.2.3.2.3"><apply id="algx1.l21.m1.2.3.2.3.1.cmml" xref="algx1.l21.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx1.l21.m1.2.3.2.3.1.1.cmml" xref="algx1.l21.m1.2.3.2.3.1">subscript</csymbol><union id="algx1.l21.m1.2.3.2.3.1.2.cmml" xref="algx1.l21.m1.2.3.2.3.1.2"></union><apply id="algx1.l21.m1.2.2.1.cmml" xref="algx1.l21.m1.2.2.1"><in id="algx1.l21.m1.2.2.1.2.cmml" xref="algx1.l21.m1.2.2.1.2"></in><ci id="algx1.l21.m1.2.2.1.3.cmml" xref="algx1.l21.m1.2.2.1.3">𝑘</ci><apply id="algx1.l21.m1.2.2.1.4.cmml" xref="algx1.l21.m1.2.2.1.4"><times id="algx1.l21.m1.2.2.1.4.1.cmml" xref="algx1.l21.m1.2.2.1.4.1"></times><ci id="algx1.l21.m1.2.2.1.4.2a.cmml" xref="algx1.l21.m1.2.2.1.4.2"><mtext id="algx1.l21.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx1.l21.m1.2.2.1.4.2">ancestors</mtext></ci><ci id="algx1.l21.m1.2.2.1.1.cmml" xref="algx1.l21.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx1.l21.m1.2.3.2.3.2.cmml" xref="algx1.l21.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx1.l21.m1.2.3.2.3.2.1.cmml" xref="algx1.l21.m1.2.3.2.3.2">subscript</csymbol><ci id="algx1.l21.m1.2.3.2.3.2.2.cmml" xref="algx1.l21.m1.2.3.2.3.2.2">𝐴</ci><ci id="algx1.l21.m1.2.3.2.3.2.3.cmml" xref="algx1.l21.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx1.l21.m1.1.1.1c.cmml" xref="algx1.l21.m1.1.1.1"><mrow id="algx1.l21.m1.1.1.1.cmml" xref="algx1.l21.m1.1.1.1"><mtext id="algx1.l21.m1.1.1.1a.cmml" xref="algx1.l21.m1.1.1.1">query proposals from all </mtext><mi id="algx1.l21.m1.1.1.1.m1.1.1.cmml" xref="algx1.l21.m1.1.1.1.m1.1.1">C</mi><mtext id="algx1.l21.m1.1.1.1b.cmml" xref="algx1.l21.m1.1.1.1">’s ancestor nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l21.m1.2c">O^{anc}_{q}\leftarrow\bigcup_{k\in\text{ancestors}(C)}A_{k}:\text{query %
proposals from all $C$'s ancestor nodes}</annotation><annotation encoding="application/x-llamapun" id="algx1.l21.m1.2d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ ancestors ( italic_C ) end_POSTSUBSCRIPT italic_A start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : query proposals from all italic_C ’s ancestor nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l22">
<span class="ltx_tag ltx_tag_listingline">22:</span>     <math alttext="O^{anc}_{d}\leftarrow\bigcup_{k\in\text{ancestors}(C)}D_{k}:\text{retrieved %
documents from all $C$'s ancestor nodes}" class="ltx_Math" display="inline" id="algx1.l22.m1.2"><semantics id="algx1.l22.m1.2a"><mrow id="algx1.l22.m1.2.3" xref="algx1.l22.m1.2.3.cmml"><mrow id="algx1.l22.m1.2.3.2" xref="algx1.l22.m1.2.3.2.cmml"><msubsup id="algx1.l22.m1.2.3.2.2" xref="algx1.l22.m1.2.3.2.2.cmml"><mi id="algx1.l22.m1.2.3.2.2.2.2" xref="algx1.l22.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx1.l22.m1.2.3.2.2.3" xref="algx1.l22.m1.2.3.2.2.3.cmml">d</mi><mrow id="algx1.l22.m1.2.3.2.2.2.3" xref="algx1.l22.m1.2.3.2.2.2.3.cmml"><mi id="algx1.l22.m1.2.3.2.2.2.3.2" xref="algx1.l22.m1.2.3.2.2.2.3.2.cmml">a</mi><mo id="algx1.l22.m1.2.3.2.2.2.3.1" xref="algx1.l22.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l22.m1.2.3.2.2.2.3.3" xref="algx1.l22.m1.2.3.2.2.2.3.3.cmml">n</mi><mo id="algx1.l22.m1.2.3.2.2.2.3.1a" xref="algx1.l22.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l22.m1.2.3.2.2.2.3.4" xref="algx1.l22.m1.2.3.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx1.l22.m1.2.3.2.1" rspace="0.111em" stretchy="false" xref="algx1.l22.m1.2.3.2.1.cmml">←</mo><mrow id="algx1.l22.m1.2.3.2.3" xref="algx1.l22.m1.2.3.2.3.cmml"><msub id="algx1.l22.m1.2.3.2.3.1" xref="algx1.l22.m1.2.3.2.3.1.cmml"><mo id="algx1.l22.m1.2.3.2.3.1.2" xref="algx1.l22.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx1.l22.m1.2.2.1" xref="algx1.l22.m1.2.2.1.cmml"><mi id="algx1.l22.m1.2.2.1.3" xref="algx1.l22.m1.2.2.1.3.cmml">k</mi><mo id="algx1.l22.m1.2.2.1.2" xref="algx1.l22.m1.2.2.1.2.cmml">∈</mo><mrow id="algx1.l22.m1.2.2.1.4" xref="algx1.l22.m1.2.2.1.4.cmml"><mtext id="algx1.l22.m1.2.2.1.4.2" xref="algx1.l22.m1.2.2.1.4.2a.cmml">ancestors</mtext><mo id="algx1.l22.m1.2.2.1.4.1" xref="algx1.l22.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx1.l22.m1.2.2.1.4.3.2" xref="algx1.l22.m1.2.2.1.4.cmml"><mo id="algx1.l22.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx1.l22.m1.2.2.1.4.cmml">(</mo><mi id="algx1.l22.m1.2.2.1.1" xref="algx1.l22.m1.2.2.1.1.cmml">C</mi><mo id="algx1.l22.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx1.l22.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx1.l22.m1.2.3.2.3.2" xref="algx1.l22.m1.2.3.2.3.2.cmml"><mi id="algx1.l22.m1.2.3.2.3.2.2" xref="algx1.l22.m1.2.3.2.3.2.2.cmml">D</mi><mi id="algx1.l22.m1.2.3.2.3.2.3" xref="algx1.l22.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx1.l22.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx1.l22.m1.2.3.1.cmml">:</mo><mrow id="algx1.l22.m1.1.1.1" xref="algx1.l22.m1.1.1.1c.cmml"><mtext id="algx1.l22.m1.1.1.1a" xref="algx1.l22.m1.1.1.1c.cmml">retrieved documents from all </mtext><mi id="algx1.l22.m1.1.1.1.m1.1.1" xref="algx1.l22.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx1.l22.m1.1.1.1b" xref="algx1.l22.m1.1.1.1c.cmml">’s ancestor nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l22.m1.2b"><apply id="algx1.l22.m1.2.3.cmml" xref="algx1.l22.m1.2.3"><ci id="algx1.l22.m1.2.3.1.cmml" xref="algx1.l22.m1.2.3.1">:</ci><apply id="algx1.l22.m1.2.3.2.cmml" xref="algx1.l22.m1.2.3.2"><ci id="algx1.l22.m1.2.3.2.1.cmml" xref="algx1.l22.m1.2.3.2.1">←</ci><apply id="algx1.l22.m1.2.3.2.2.cmml" xref="algx1.l22.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l22.m1.2.3.2.2.1.cmml" xref="algx1.l22.m1.2.3.2.2">subscript</csymbol><apply id="algx1.l22.m1.2.3.2.2.2.cmml" xref="algx1.l22.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l22.m1.2.3.2.2.2.1.cmml" xref="algx1.l22.m1.2.3.2.2">superscript</csymbol><ci id="algx1.l22.m1.2.3.2.2.2.2.cmml" xref="algx1.l22.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx1.l22.m1.2.3.2.2.2.3.cmml" xref="algx1.l22.m1.2.3.2.2.2.3"><times id="algx1.l22.m1.2.3.2.2.2.3.1.cmml" xref="algx1.l22.m1.2.3.2.2.2.3.1"></times><ci id="algx1.l22.m1.2.3.2.2.2.3.2.cmml" xref="algx1.l22.m1.2.3.2.2.2.3.2">𝑎</ci><ci id="algx1.l22.m1.2.3.2.2.2.3.3.cmml" xref="algx1.l22.m1.2.3.2.2.2.3.3">𝑛</ci><ci id="algx1.l22.m1.2.3.2.2.2.3.4.cmml" xref="algx1.l22.m1.2.3.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx1.l22.m1.2.3.2.2.3.cmml" xref="algx1.l22.m1.2.3.2.2.3">𝑑</ci></apply><apply id="algx1.l22.m1.2.3.2.3.cmml" xref="algx1.l22.m1.2.3.2.3"><apply id="algx1.l22.m1.2.3.2.3.1.cmml" xref="algx1.l22.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx1.l22.m1.2.3.2.3.1.1.cmml" xref="algx1.l22.m1.2.3.2.3.1">subscript</csymbol><union id="algx1.l22.m1.2.3.2.3.1.2.cmml" xref="algx1.l22.m1.2.3.2.3.1.2"></union><apply id="algx1.l22.m1.2.2.1.cmml" xref="algx1.l22.m1.2.2.1"><in id="algx1.l22.m1.2.2.1.2.cmml" xref="algx1.l22.m1.2.2.1.2"></in><ci id="algx1.l22.m1.2.2.1.3.cmml" xref="algx1.l22.m1.2.2.1.3">𝑘</ci><apply id="algx1.l22.m1.2.2.1.4.cmml" xref="algx1.l22.m1.2.2.1.4"><times id="algx1.l22.m1.2.2.1.4.1.cmml" xref="algx1.l22.m1.2.2.1.4.1"></times><ci id="algx1.l22.m1.2.2.1.4.2a.cmml" xref="algx1.l22.m1.2.2.1.4.2"><mtext id="algx1.l22.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx1.l22.m1.2.2.1.4.2">ancestors</mtext></ci><ci id="algx1.l22.m1.2.2.1.1.cmml" xref="algx1.l22.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx1.l22.m1.2.3.2.3.2.cmml" xref="algx1.l22.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx1.l22.m1.2.3.2.3.2.1.cmml" xref="algx1.l22.m1.2.3.2.3.2">subscript</csymbol><ci id="algx1.l22.m1.2.3.2.3.2.2.cmml" xref="algx1.l22.m1.2.3.2.3.2.2">𝐷</ci><ci id="algx1.l22.m1.2.3.2.3.2.3.cmml" xref="algx1.l22.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx1.l22.m1.1.1.1c.cmml" xref="algx1.l22.m1.1.1.1"><mrow id="algx1.l22.m1.1.1.1.cmml" xref="algx1.l22.m1.1.1.1"><mtext id="algx1.l22.m1.1.1.1a.cmml" xref="algx1.l22.m1.1.1.1">retrieved documents from all </mtext><mi id="algx1.l22.m1.1.1.1.m1.1.1.cmml" xref="algx1.l22.m1.1.1.1.m1.1.1">C</mi><mtext id="algx1.l22.m1.1.1.1b.cmml" xref="algx1.l22.m1.1.1.1">’s ancestor nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l22.m1.2c">O^{anc}_{d}\leftarrow\bigcup_{k\in\text{ancestors}(C)}D_{k}:\text{retrieved %
documents from all $C$'s ancestor nodes}</annotation><annotation encoding="application/x-llamapun" id="algx1.l22.m1.2d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ ancestors ( italic_C ) end_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : retrieved documents from all italic_C ’s ancestor nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l23">
<span class="ltx_tag ltx_tag_listingline">23:</span>     <math alttext="O^{sib}_{q}\ \leftarrow\bigcup_{k\in\text{siblings}(C)}A_{k}:\text{query %
proposals from all $C$'s sibling nodes}" class="ltx_Math" display="inline" id="algx1.l23.m1.2"><semantics id="algx1.l23.m1.2a"><mrow id="algx1.l23.m1.2.3" xref="algx1.l23.m1.2.3.cmml"><mrow id="algx1.l23.m1.2.3.2" xref="algx1.l23.m1.2.3.2.cmml"><msubsup id="algx1.l23.m1.2.3.2.2" xref="algx1.l23.m1.2.3.2.2.cmml"><mi id="algx1.l23.m1.2.3.2.2.2.2" xref="algx1.l23.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx1.l23.m1.2.3.2.2.3" xref="algx1.l23.m1.2.3.2.2.3.cmml">q</mi><mrow id="algx1.l23.m1.2.3.2.2.2.3" xref="algx1.l23.m1.2.3.2.2.2.3.cmml"><mi id="algx1.l23.m1.2.3.2.2.2.3.2" xref="algx1.l23.m1.2.3.2.2.2.3.2.cmml">s</mi><mo id="algx1.l23.m1.2.3.2.2.2.3.1" xref="algx1.l23.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l23.m1.2.3.2.2.2.3.3" xref="algx1.l23.m1.2.3.2.2.2.3.3.cmml">i</mi><mo id="algx1.l23.m1.2.3.2.2.2.3.1a" xref="algx1.l23.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l23.m1.2.3.2.2.2.3.4" xref="algx1.l23.m1.2.3.2.2.2.3.4.cmml">b</mi></mrow></msubsup><mo id="algx1.l23.m1.2.3.2.1" lspace="0.778em" rspace="0.111em" stretchy="false" xref="algx1.l23.m1.2.3.2.1.cmml">←</mo><mrow id="algx1.l23.m1.2.3.2.3" xref="algx1.l23.m1.2.3.2.3.cmml"><msub id="algx1.l23.m1.2.3.2.3.1" xref="algx1.l23.m1.2.3.2.3.1.cmml"><mo id="algx1.l23.m1.2.3.2.3.1.2" xref="algx1.l23.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx1.l23.m1.2.2.1" xref="algx1.l23.m1.2.2.1.cmml"><mi id="algx1.l23.m1.2.2.1.3" xref="algx1.l23.m1.2.2.1.3.cmml">k</mi><mo id="algx1.l23.m1.2.2.1.2" xref="algx1.l23.m1.2.2.1.2.cmml">∈</mo><mrow id="algx1.l23.m1.2.2.1.4" xref="algx1.l23.m1.2.2.1.4.cmml"><mtext id="algx1.l23.m1.2.2.1.4.2" xref="algx1.l23.m1.2.2.1.4.2a.cmml">siblings</mtext><mo id="algx1.l23.m1.2.2.1.4.1" xref="algx1.l23.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx1.l23.m1.2.2.1.4.3.2" xref="algx1.l23.m1.2.2.1.4.cmml"><mo id="algx1.l23.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx1.l23.m1.2.2.1.4.cmml">(</mo><mi id="algx1.l23.m1.2.2.1.1" xref="algx1.l23.m1.2.2.1.1.cmml">C</mi><mo id="algx1.l23.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx1.l23.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx1.l23.m1.2.3.2.3.2" xref="algx1.l23.m1.2.3.2.3.2.cmml"><mi id="algx1.l23.m1.2.3.2.3.2.2" xref="algx1.l23.m1.2.3.2.3.2.2.cmml">A</mi><mi id="algx1.l23.m1.2.3.2.3.2.3" xref="algx1.l23.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx1.l23.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx1.l23.m1.2.3.1.cmml">:</mo><mrow id="algx1.l23.m1.1.1.1" xref="algx1.l23.m1.1.1.1c.cmml"><mtext id="algx1.l23.m1.1.1.1a" xref="algx1.l23.m1.1.1.1c.cmml">query proposals from all </mtext><mi id="algx1.l23.m1.1.1.1.m1.1.1" xref="algx1.l23.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx1.l23.m1.1.1.1b" xref="algx1.l23.m1.1.1.1c.cmml">’s sibling nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l23.m1.2b"><apply id="algx1.l23.m1.2.3.cmml" xref="algx1.l23.m1.2.3"><ci id="algx1.l23.m1.2.3.1.cmml" xref="algx1.l23.m1.2.3.1">:</ci><apply id="algx1.l23.m1.2.3.2.cmml" xref="algx1.l23.m1.2.3.2"><ci id="algx1.l23.m1.2.3.2.1.cmml" xref="algx1.l23.m1.2.3.2.1">←</ci><apply id="algx1.l23.m1.2.3.2.2.cmml" xref="algx1.l23.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l23.m1.2.3.2.2.1.cmml" xref="algx1.l23.m1.2.3.2.2">subscript</csymbol><apply id="algx1.l23.m1.2.3.2.2.2.cmml" xref="algx1.l23.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l23.m1.2.3.2.2.2.1.cmml" xref="algx1.l23.m1.2.3.2.2">superscript</csymbol><ci id="algx1.l23.m1.2.3.2.2.2.2.cmml" xref="algx1.l23.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx1.l23.m1.2.3.2.2.2.3.cmml" xref="algx1.l23.m1.2.3.2.2.2.3"><times id="algx1.l23.m1.2.3.2.2.2.3.1.cmml" xref="algx1.l23.m1.2.3.2.2.2.3.1"></times><ci id="algx1.l23.m1.2.3.2.2.2.3.2.cmml" xref="algx1.l23.m1.2.3.2.2.2.3.2">𝑠</ci><ci id="algx1.l23.m1.2.3.2.2.2.3.3.cmml" xref="algx1.l23.m1.2.3.2.2.2.3.3">𝑖</ci><ci id="algx1.l23.m1.2.3.2.2.2.3.4.cmml" xref="algx1.l23.m1.2.3.2.2.2.3.4">𝑏</ci></apply></apply><ci id="algx1.l23.m1.2.3.2.2.3.cmml" xref="algx1.l23.m1.2.3.2.2.3">𝑞</ci></apply><apply id="algx1.l23.m1.2.3.2.3.cmml" xref="algx1.l23.m1.2.3.2.3"><apply id="algx1.l23.m1.2.3.2.3.1.cmml" xref="algx1.l23.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx1.l23.m1.2.3.2.3.1.1.cmml" xref="algx1.l23.m1.2.3.2.3.1">subscript</csymbol><union id="algx1.l23.m1.2.3.2.3.1.2.cmml" xref="algx1.l23.m1.2.3.2.3.1.2"></union><apply id="algx1.l23.m1.2.2.1.cmml" xref="algx1.l23.m1.2.2.1"><in id="algx1.l23.m1.2.2.1.2.cmml" xref="algx1.l23.m1.2.2.1.2"></in><ci id="algx1.l23.m1.2.2.1.3.cmml" xref="algx1.l23.m1.2.2.1.3">𝑘</ci><apply id="algx1.l23.m1.2.2.1.4.cmml" xref="algx1.l23.m1.2.2.1.4"><times id="algx1.l23.m1.2.2.1.4.1.cmml" xref="algx1.l23.m1.2.2.1.4.1"></times><ci id="algx1.l23.m1.2.2.1.4.2a.cmml" xref="algx1.l23.m1.2.2.1.4.2"><mtext id="algx1.l23.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx1.l23.m1.2.2.1.4.2">siblings</mtext></ci><ci id="algx1.l23.m1.2.2.1.1.cmml" xref="algx1.l23.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx1.l23.m1.2.3.2.3.2.cmml" xref="algx1.l23.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx1.l23.m1.2.3.2.3.2.1.cmml" xref="algx1.l23.m1.2.3.2.3.2">subscript</csymbol><ci id="algx1.l23.m1.2.3.2.3.2.2.cmml" xref="algx1.l23.m1.2.3.2.3.2.2">𝐴</ci><ci id="algx1.l23.m1.2.3.2.3.2.3.cmml" xref="algx1.l23.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx1.l23.m1.1.1.1c.cmml" xref="algx1.l23.m1.1.1.1"><mrow id="algx1.l23.m1.1.1.1.cmml" xref="algx1.l23.m1.1.1.1"><mtext id="algx1.l23.m1.1.1.1a.cmml" xref="algx1.l23.m1.1.1.1">query proposals from all </mtext><mi id="algx1.l23.m1.1.1.1.m1.1.1.cmml" xref="algx1.l23.m1.1.1.1.m1.1.1">C</mi><mtext id="algx1.l23.m1.1.1.1b.cmml" xref="algx1.l23.m1.1.1.1">’s sibling nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l23.m1.2c">O^{sib}_{q}\ \leftarrow\bigcup_{k\in\text{siblings}(C)}A_{k}:\text{query %
proposals from all $C$'s sibling nodes}</annotation><annotation encoding="application/x-llamapun" id="algx1.l23.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ siblings ( italic_C ) end_POSTSUBSCRIPT italic_A start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : query proposals from all italic_C ’s sibling nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l24">
<span class="ltx_tag ltx_tag_listingline">24:</span>     <math alttext="O^{sib}_{f}\ \leftarrow\bigcup_{k\in\text{siblings}(C)}F_{k}:\text{feedback %
from all $C$'s sibling nodes}" class="ltx_Math" display="inline" id="algx1.l24.m1.2"><semantics id="algx1.l24.m1.2a"><mrow id="algx1.l24.m1.2.3" xref="algx1.l24.m1.2.3.cmml"><mrow id="algx1.l24.m1.2.3.2" xref="algx1.l24.m1.2.3.2.cmml"><msubsup id="algx1.l24.m1.2.3.2.2" xref="algx1.l24.m1.2.3.2.2.cmml"><mi id="algx1.l24.m1.2.3.2.2.2.2" xref="algx1.l24.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx1.l24.m1.2.3.2.2.3" xref="algx1.l24.m1.2.3.2.2.3.cmml">f</mi><mrow id="algx1.l24.m1.2.3.2.2.2.3" xref="algx1.l24.m1.2.3.2.2.2.3.cmml"><mi id="algx1.l24.m1.2.3.2.2.2.3.2" xref="algx1.l24.m1.2.3.2.2.2.3.2.cmml">s</mi><mo id="algx1.l24.m1.2.3.2.2.2.3.1" xref="algx1.l24.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l24.m1.2.3.2.2.2.3.3" xref="algx1.l24.m1.2.3.2.2.2.3.3.cmml">i</mi><mo id="algx1.l24.m1.2.3.2.2.2.3.1a" xref="algx1.l24.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l24.m1.2.3.2.2.2.3.4" xref="algx1.l24.m1.2.3.2.2.2.3.4.cmml">b</mi></mrow></msubsup><mo id="algx1.l24.m1.2.3.2.1" lspace="0.778em" rspace="0.111em" stretchy="false" xref="algx1.l24.m1.2.3.2.1.cmml">←</mo><mrow id="algx1.l24.m1.2.3.2.3" xref="algx1.l24.m1.2.3.2.3.cmml"><msub id="algx1.l24.m1.2.3.2.3.1" xref="algx1.l24.m1.2.3.2.3.1.cmml"><mo id="algx1.l24.m1.2.3.2.3.1.2" xref="algx1.l24.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx1.l24.m1.2.2.1" xref="algx1.l24.m1.2.2.1.cmml"><mi id="algx1.l24.m1.2.2.1.3" xref="algx1.l24.m1.2.2.1.3.cmml">k</mi><mo id="algx1.l24.m1.2.2.1.2" xref="algx1.l24.m1.2.2.1.2.cmml">∈</mo><mrow id="algx1.l24.m1.2.2.1.4" xref="algx1.l24.m1.2.2.1.4.cmml"><mtext id="algx1.l24.m1.2.2.1.4.2" xref="algx1.l24.m1.2.2.1.4.2a.cmml">siblings</mtext><mo id="algx1.l24.m1.2.2.1.4.1" xref="algx1.l24.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx1.l24.m1.2.2.1.4.3.2" xref="algx1.l24.m1.2.2.1.4.cmml"><mo id="algx1.l24.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx1.l24.m1.2.2.1.4.cmml">(</mo><mi id="algx1.l24.m1.2.2.1.1" xref="algx1.l24.m1.2.2.1.1.cmml">C</mi><mo id="algx1.l24.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx1.l24.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx1.l24.m1.2.3.2.3.2" xref="algx1.l24.m1.2.3.2.3.2.cmml"><mi id="algx1.l24.m1.2.3.2.3.2.2" xref="algx1.l24.m1.2.3.2.3.2.2.cmml">F</mi><mi id="algx1.l24.m1.2.3.2.3.2.3" xref="algx1.l24.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx1.l24.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx1.l24.m1.2.3.1.cmml">:</mo><mrow id="algx1.l24.m1.1.1.1" xref="algx1.l24.m1.1.1.1c.cmml"><mtext id="algx1.l24.m1.1.1.1a" xref="algx1.l24.m1.1.1.1c.cmml">feedback from all </mtext><mi id="algx1.l24.m1.1.1.1.m1.1.1" xref="algx1.l24.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx1.l24.m1.1.1.1b" xref="algx1.l24.m1.1.1.1c.cmml">’s sibling nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l24.m1.2b"><apply id="algx1.l24.m1.2.3.cmml" xref="algx1.l24.m1.2.3"><ci id="algx1.l24.m1.2.3.1.cmml" xref="algx1.l24.m1.2.3.1">:</ci><apply id="algx1.l24.m1.2.3.2.cmml" xref="algx1.l24.m1.2.3.2"><ci id="algx1.l24.m1.2.3.2.1.cmml" xref="algx1.l24.m1.2.3.2.1">←</ci><apply id="algx1.l24.m1.2.3.2.2.cmml" xref="algx1.l24.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l24.m1.2.3.2.2.1.cmml" xref="algx1.l24.m1.2.3.2.2">subscript</csymbol><apply id="algx1.l24.m1.2.3.2.2.2.cmml" xref="algx1.l24.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx1.l24.m1.2.3.2.2.2.1.cmml" xref="algx1.l24.m1.2.3.2.2">superscript</csymbol><ci id="algx1.l24.m1.2.3.2.2.2.2.cmml" xref="algx1.l24.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx1.l24.m1.2.3.2.2.2.3.cmml" xref="algx1.l24.m1.2.3.2.2.2.3"><times id="algx1.l24.m1.2.3.2.2.2.3.1.cmml" xref="algx1.l24.m1.2.3.2.2.2.3.1"></times><ci id="algx1.l24.m1.2.3.2.2.2.3.2.cmml" xref="algx1.l24.m1.2.3.2.2.2.3.2">𝑠</ci><ci id="algx1.l24.m1.2.3.2.2.2.3.3.cmml" xref="algx1.l24.m1.2.3.2.2.2.3.3">𝑖</ci><ci id="algx1.l24.m1.2.3.2.2.2.3.4.cmml" xref="algx1.l24.m1.2.3.2.2.2.3.4">𝑏</ci></apply></apply><ci id="algx1.l24.m1.2.3.2.2.3.cmml" xref="algx1.l24.m1.2.3.2.2.3">𝑓</ci></apply><apply id="algx1.l24.m1.2.3.2.3.cmml" xref="algx1.l24.m1.2.3.2.3"><apply id="algx1.l24.m1.2.3.2.3.1.cmml" xref="algx1.l24.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx1.l24.m1.2.3.2.3.1.1.cmml" xref="algx1.l24.m1.2.3.2.3.1">subscript</csymbol><union id="algx1.l24.m1.2.3.2.3.1.2.cmml" xref="algx1.l24.m1.2.3.2.3.1.2"></union><apply id="algx1.l24.m1.2.2.1.cmml" xref="algx1.l24.m1.2.2.1"><in id="algx1.l24.m1.2.2.1.2.cmml" xref="algx1.l24.m1.2.2.1.2"></in><ci id="algx1.l24.m1.2.2.1.3.cmml" xref="algx1.l24.m1.2.2.1.3">𝑘</ci><apply id="algx1.l24.m1.2.2.1.4.cmml" xref="algx1.l24.m1.2.2.1.4"><times id="algx1.l24.m1.2.2.1.4.1.cmml" xref="algx1.l24.m1.2.2.1.4.1"></times><ci id="algx1.l24.m1.2.2.1.4.2a.cmml" xref="algx1.l24.m1.2.2.1.4.2"><mtext id="algx1.l24.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx1.l24.m1.2.2.1.4.2">siblings</mtext></ci><ci id="algx1.l24.m1.2.2.1.1.cmml" xref="algx1.l24.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx1.l24.m1.2.3.2.3.2.cmml" xref="algx1.l24.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx1.l24.m1.2.3.2.3.2.1.cmml" xref="algx1.l24.m1.2.3.2.3.2">subscript</csymbol><ci id="algx1.l24.m1.2.3.2.3.2.2.cmml" xref="algx1.l24.m1.2.3.2.3.2.2">𝐹</ci><ci id="algx1.l24.m1.2.3.2.3.2.3.cmml" xref="algx1.l24.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx1.l24.m1.1.1.1c.cmml" xref="algx1.l24.m1.1.1.1"><mrow id="algx1.l24.m1.1.1.1.cmml" xref="algx1.l24.m1.1.1.1"><mtext id="algx1.l24.m1.1.1.1a.cmml" xref="algx1.l24.m1.1.1.1">feedback from all </mtext><mi id="algx1.l24.m1.1.1.1.m1.1.1.cmml" xref="algx1.l24.m1.1.1.1.m1.1.1">C</mi><mtext id="algx1.l24.m1.1.1.1b.cmml" xref="algx1.l24.m1.1.1.1">’s sibling nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l24.m1.2c">O^{sib}_{f}\ \leftarrow\bigcup_{k\in\text{siblings}(C)}F_{k}:\text{feedback %
from all $C$'s sibling nodes}</annotation><annotation encoding="application/x-llamapun" id="algx1.l24.m1.2d">italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ siblings ( italic_C ) end_POSTSUBSCRIPT italic_F start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : feedback from all italic_C ’s sibling nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l25">
<span class="ltx_tag ltx_tag_listingline">25:</span>     <math alttext="O\leftarrow(O^{anc}_{q},O^{anc}_{d},O^{sib}_{q},O^{sib}_{f})" class="ltx_Math" display="inline" id="algx1.l25.m1.4"><semantics id="algx1.l25.m1.4a"><mrow id="algx1.l25.m1.4.4" xref="algx1.l25.m1.4.4.cmml"><mi id="algx1.l25.m1.4.4.6" xref="algx1.l25.m1.4.4.6.cmml">O</mi><mo id="algx1.l25.m1.4.4.5" stretchy="false" xref="algx1.l25.m1.4.4.5.cmml">←</mo><mrow id="algx1.l25.m1.4.4.4.4" xref="algx1.l25.m1.4.4.4.5.cmml"><mo id="algx1.l25.m1.4.4.4.4.5" stretchy="false" xref="algx1.l25.m1.4.4.4.5.cmml">(</mo><msubsup id="algx1.l25.m1.1.1.1.1.1" xref="algx1.l25.m1.1.1.1.1.1.cmml"><mi id="algx1.l25.m1.1.1.1.1.1.2.2" xref="algx1.l25.m1.1.1.1.1.1.2.2.cmml">O</mi><mi id="algx1.l25.m1.1.1.1.1.1.3" xref="algx1.l25.m1.1.1.1.1.1.3.cmml">q</mi><mrow id="algx1.l25.m1.1.1.1.1.1.2.3" xref="algx1.l25.m1.1.1.1.1.1.2.3.cmml"><mi id="algx1.l25.m1.1.1.1.1.1.2.3.2" xref="algx1.l25.m1.1.1.1.1.1.2.3.2.cmml">a</mi><mo id="algx1.l25.m1.1.1.1.1.1.2.3.1" xref="algx1.l25.m1.1.1.1.1.1.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.1.1.1.1.1.2.3.3" xref="algx1.l25.m1.1.1.1.1.1.2.3.3.cmml">n</mi><mo id="algx1.l25.m1.1.1.1.1.1.2.3.1a" xref="algx1.l25.m1.1.1.1.1.1.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.1.1.1.1.1.2.3.4" xref="algx1.l25.m1.1.1.1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx1.l25.m1.4.4.4.4.6" xref="algx1.l25.m1.4.4.4.5.cmml">,</mo><msubsup id="algx1.l25.m1.2.2.2.2.2" xref="algx1.l25.m1.2.2.2.2.2.cmml"><mi id="algx1.l25.m1.2.2.2.2.2.2.2" xref="algx1.l25.m1.2.2.2.2.2.2.2.cmml">O</mi><mi id="algx1.l25.m1.2.2.2.2.2.3" xref="algx1.l25.m1.2.2.2.2.2.3.cmml">d</mi><mrow id="algx1.l25.m1.2.2.2.2.2.2.3" xref="algx1.l25.m1.2.2.2.2.2.2.3.cmml"><mi id="algx1.l25.m1.2.2.2.2.2.2.3.2" xref="algx1.l25.m1.2.2.2.2.2.2.3.2.cmml">a</mi><mo id="algx1.l25.m1.2.2.2.2.2.2.3.1" xref="algx1.l25.m1.2.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.2.2.2.2.2.2.3.3" xref="algx1.l25.m1.2.2.2.2.2.2.3.3.cmml">n</mi><mo id="algx1.l25.m1.2.2.2.2.2.2.3.1a" xref="algx1.l25.m1.2.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.2.2.2.2.2.2.3.4" xref="algx1.l25.m1.2.2.2.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx1.l25.m1.4.4.4.4.7" xref="algx1.l25.m1.4.4.4.5.cmml">,</mo><msubsup id="algx1.l25.m1.3.3.3.3.3" xref="algx1.l25.m1.3.3.3.3.3.cmml"><mi id="algx1.l25.m1.3.3.3.3.3.2.2" xref="algx1.l25.m1.3.3.3.3.3.2.2.cmml">O</mi><mi id="algx1.l25.m1.3.3.3.3.3.3" xref="algx1.l25.m1.3.3.3.3.3.3.cmml">q</mi><mrow id="algx1.l25.m1.3.3.3.3.3.2.3" xref="algx1.l25.m1.3.3.3.3.3.2.3.cmml"><mi id="algx1.l25.m1.3.3.3.3.3.2.3.2" xref="algx1.l25.m1.3.3.3.3.3.2.3.2.cmml">s</mi><mo id="algx1.l25.m1.3.3.3.3.3.2.3.1" xref="algx1.l25.m1.3.3.3.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.3.3.3.3.3.2.3.3" xref="algx1.l25.m1.3.3.3.3.3.2.3.3.cmml">i</mi><mo id="algx1.l25.m1.3.3.3.3.3.2.3.1a" xref="algx1.l25.m1.3.3.3.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.3.3.3.3.3.2.3.4" xref="algx1.l25.m1.3.3.3.3.3.2.3.4.cmml">b</mi></mrow></msubsup><mo id="algx1.l25.m1.4.4.4.4.8" xref="algx1.l25.m1.4.4.4.5.cmml">,</mo><msubsup id="algx1.l25.m1.4.4.4.4.4" xref="algx1.l25.m1.4.4.4.4.4.cmml"><mi id="algx1.l25.m1.4.4.4.4.4.2.2" xref="algx1.l25.m1.4.4.4.4.4.2.2.cmml">O</mi><mi id="algx1.l25.m1.4.4.4.4.4.3" xref="algx1.l25.m1.4.4.4.4.4.3.cmml">f</mi><mrow id="algx1.l25.m1.4.4.4.4.4.2.3" xref="algx1.l25.m1.4.4.4.4.4.2.3.cmml"><mi id="algx1.l25.m1.4.4.4.4.4.2.3.2" xref="algx1.l25.m1.4.4.4.4.4.2.3.2.cmml">s</mi><mo id="algx1.l25.m1.4.4.4.4.4.2.3.1" xref="algx1.l25.m1.4.4.4.4.4.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.4.4.4.4.4.2.3.3" xref="algx1.l25.m1.4.4.4.4.4.2.3.3.cmml">i</mi><mo id="algx1.l25.m1.4.4.4.4.4.2.3.1a" xref="algx1.l25.m1.4.4.4.4.4.2.3.1.cmml">⁢</mo><mi id="algx1.l25.m1.4.4.4.4.4.2.3.4" xref="algx1.l25.m1.4.4.4.4.4.2.3.4.cmml">b</mi></mrow></msubsup><mo id="algx1.l25.m1.4.4.4.4.9" stretchy="false" xref="algx1.l25.m1.4.4.4.5.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l25.m1.4b"><apply id="algx1.l25.m1.4.4.cmml" xref="algx1.l25.m1.4.4"><ci id="algx1.l25.m1.4.4.5.cmml" xref="algx1.l25.m1.4.4.5">←</ci><ci id="algx1.l25.m1.4.4.6.cmml" xref="algx1.l25.m1.4.4.6">𝑂</ci><vector id="algx1.l25.m1.4.4.4.5.cmml" xref="algx1.l25.m1.4.4.4.4"><apply id="algx1.l25.m1.1.1.1.1.1.cmml" xref="algx1.l25.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l25.m1.1.1.1.1.1.1.cmml" xref="algx1.l25.m1.1.1.1.1.1">subscript</csymbol><apply id="algx1.l25.m1.1.1.1.1.1.2.cmml" xref="algx1.l25.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l25.m1.1.1.1.1.1.2.1.cmml" xref="algx1.l25.m1.1.1.1.1.1">superscript</csymbol><ci id="algx1.l25.m1.1.1.1.1.1.2.2.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.2">𝑂</ci><apply id="algx1.l25.m1.1.1.1.1.1.2.3.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.3"><times id="algx1.l25.m1.1.1.1.1.1.2.3.1.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.3.1"></times><ci id="algx1.l25.m1.1.1.1.1.1.2.3.2.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.3.2">𝑎</ci><ci id="algx1.l25.m1.1.1.1.1.1.2.3.3.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.3.3">𝑛</ci><ci id="algx1.l25.m1.1.1.1.1.1.2.3.4.cmml" xref="algx1.l25.m1.1.1.1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="algx1.l25.m1.1.1.1.1.1.3.cmml" xref="algx1.l25.m1.1.1.1.1.1.3">𝑞</ci></apply><apply id="algx1.l25.m1.2.2.2.2.2.cmml" xref="algx1.l25.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="algx1.l25.m1.2.2.2.2.2.1.cmml" xref="algx1.l25.m1.2.2.2.2.2">subscript</csymbol><apply id="algx1.l25.m1.2.2.2.2.2.2.cmml" xref="algx1.l25.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="algx1.l25.m1.2.2.2.2.2.2.1.cmml" xref="algx1.l25.m1.2.2.2.2.2">superscript</csymbol><ci id="algx1.l25.m1.2.2.2.2.2.2.2.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.2">𝑂</ci><apply id="algx1.l25.m1.2.2.2.2.2.2.3.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.3"><times id="algx1.l25.m1.2.2.2.2.2.2.3.1.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.3.1"></times><ci id="algx1.l25.m1.2.2.2.2.2.2.3.2.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.3.2">𝑎</ci><ci id="algx1.l25.m1.2.2.2.2.2.2.3.3.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.3.3">𝑛</ci><ci id="algx1.l25.m1.2.2.2.2.2.2.3.4.cmml" xref="algx1.l25.m1.2.2.2.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx1.l25.m1.2.2.2.2.2.3.cmml" xref="algx1.l25.m1.2.2.2.2.2.3">𝑑</ci></apply><apply id="algx1.l25.m1.3.3.3.3.3.cmml" xref="algx1.l25.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="algx1.l25.m1.3.3.3.3.3.1.cmml" xref="algx1.l25.m1.3.3.3.3.3">subscript</csymbol><apply id="algx1.l25.m1.3.3.3.3.3.2.cmml" xref="algx1.l25.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="algx1.l25.m1.3.3.3.3.3.2.1.cmml" xref="algx1.l25.m1.3.3.3.3.3">superscript</csymbol><ci id="algx1.l25.m1.3.3.3.3.3.2.2.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.2">𝑂</ci><apply id="algx1.l25.m1.3.3.3.3.3.2.3.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.3"><times id="algx1.l25.m1.3.3.3.3.3.2.3.1.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.3.1"></times><ci id="algx1.l25.m1.3.3.3.3.3.2.3.2.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.3.2">𝑠</ci><ci id="algx1.l25.m1.3.3.3.3.3.2.3.3.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.3.3">𝑖</ci><ci id="algx1.l25.m1.3.3.3.3.3.2.3.4.cmml" xref="algx1.l25.m1.3.3.3.3.3.2.3.4">𝑏</ci></apply></apply><ci id="algx1.l25.m1.3.3.3.3.3.3.cmml" xref="algx1.l25.m1.3.3.3.3.3.3">𝑞</ci></apply><apply id="algx1.l25.m1.4.4.4.4.4.cmml" xref="algx1.l25.m1.4.4.4.4.4"><csymbol cd="ambiguous" id="algx1.l25.m1.4.4.4.4.4.1.cmml" xref="algx1.l25.m1.4.4.4.4.4">subscript</csymbol><apply id="algx1.l25.m1.4.4.4.4.4.2.cmml" xref="algx1.l25.m1.4.4.4.4.4"><csymbol cd="ambiguous" id="algx1.l25.m1.4.4.4.4.4.2.1.cmml" xref="algx1.l25.m1.4.4.4.4.4">superscript</csymbol><ci id="algx1.l25.m1.4.4.4.4.4.2.2.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.2">𝑂</ci><apply id="algx1.l25.m1.4.4.4.4.4.2.3.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.3"><times id="algx1.l25.m1.4.4.4.4.4.2.3.1.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.3.1"></times><ci id="algx1.l25.m1.4.4.4.4.4.2.3.2.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.3.2">𝑠</ci><ci id="algx1.l25.m1.4.4.4.4.4.2.3.3.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.3.3">𝑖</ci><ci id="algx1.l25.m1.4.4.4.4.4.2.3.4.cmml" xref="algx1.l25.m1.4.4.4.4.4.2.3.4">𝑏</ci></apply></apply><ci id="algx1.l25.m1.4.4.4.4.4.3.cmml" xref="algx1.l25.m1.4.4.4.4.4.3">𝑓</ci></apply></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l25.m1.4c">O\leftarrow(O^{anc}_{q},O^{anc}_{d},O^{sib}_{q},O^{sib}_{f})</annotation><annotation encoding="application/x-llamapun" id="algx1.l25.m1.4d">italic_O ← ( italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT , italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , italic_O start_POSTSUPERSCRIPT italic_s italic_i italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l26">
<span class="ltx_tag ltx_tag_listingline">26:</span>     <math alttext="A\leftarrow P_{\theta}^{query}(O,Q)" class="ltx_Math" display="inline" id="algx1.l26.m1.2"><semantics id="algx1.l26.m1.2a"><mrow id="algx1.l26.m1.2.3" xref="algx1.l26.m1.2.3.cmml"><mi id="algx1.l26.m1.2.3.2" xref="algx1.l26.m1.2.3.2.cmml">A</mi><mo id="algx1.l26.m1.2.3.1" stretchy="false" xref="algx1.l26.m1.2.3.1.cmml">←</mo><mrow id="algx1.l26.m1.2.3.3" xref="algx1.l26.m1.2.3.3.cmml"><msubsup id="algx1.l26.m1.2.3.3.2" xref="algx1.l26.m1.2.3.3.2.cmml"><mi id="algx1.l26.m1.2.3.3.2.2.2" xref="algx1.l26.m1.2.3.3.2.2.2.cmml">P</mi><mi id="algx1.l26.m1.2.3.3.2.2.3" xref="algx1.l26.m1.2.3.3.2.2.3.cmml">θ</mi><mrow id="algx1.l26.m1.2.3.3.2.3" xref="algx1.l26.m1.2.3.3.2.3.cmml"><mi id="algx1.l26.m1.2.3.3.2.3.2" xref="algx1.l26.m1.2.3.3.2.3.2.cmml">q</mi><mo id="algx1.l26.m1.2.3.3.2.3.1" xref="algx1.l26.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l26.m1.2.3.3.2.3.3" xref="algx1.l26.m1.2.3.3.2.3.3.cmml">u</mi><mo id="algx1.l26.m1.2.3.3.2.3.1a" xref="algx1.l26.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l26.m1.2.3.3.2.3.4" xref="algx1.l26.m1.2.3.3.2.3.4.cmml">e</mi><mo id="algx1.l26.m1.2.3.3.2.3.1b" xref="algx1.l26.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l26.m1.2.3.3.2.3.5" xref="algx1.l26.m1.2.3.3.2.3.5.cmml">r</mi><mo id="algx1.l26.m1.2.3.3.2.3.1c" xref="algx1.l26.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx1.l26.m1.2.3.3.2.3.6" xref="algx1.l26.m1.2.3.3.2.3.6.cmml">y</mi></mrow></msubsup><mo id="algx1.l26.m1.2.3.3.1" xref="algx1.l26.m1.2.3.3.1.cmml">⁢</mo><mrow id="algx1.l26.m1.2.3.3.3.2" xref="algx1.l26.m1.2.3.3.3.1.cmml"><mo id="algx1.l26.m1.2.3.3.3.2.1" stretchy="false" xref="algx1.l26.m1.2.3.3.3.1.cmml">(</mo><mi id="algx1.l26.m1.1.1" xref="algx1.l26.m1.1.1.cmml">O</mi><mo id="algx1.l26.m1.2.3.3.3.2.2" xref="algx1.l26.m1.2.3.3.3.1.cmml">,</mo><mi id="algx1.l26.m1.2.2" xref="algx1.l26.m1.2.2.cmml">Q</mi><mo id="algx1.l26.m1.2.3.3.3.2.3" stretchy="false" xref="algx1.l26.m1.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l26.m1.2b"><apply id="algx1.l26.m1.2.3.cmml" xref="algx1.l26.m1.2.3"><ci id="algx1.l26.m1.2.3.1.cmml" xref="algx1.l26.m1.2.3.1">←</ci><ci id="algx1.l26.m1.2.3.2.cmml" xref="algx1.l26.m1.2.3.2">𝐴</ci><apply id="algx1.l26.m1.2.3.3.cmml" xref="algx1.l26.m1.2.3.3"><times id="algx1.l26.m1.2.3.3.1.cmml" xref="algx1.l26.m1.2.3.3.1"></times><apply id="algx1.l26.m1.2.3.3.2.cmml" xref="algx1.l26.m1.2.3.3.2"><csymbol cd="ambiguous" id="algx1.l26.m1.2.3.3.2.1.cmml" xref="algx1.l26.m1.2.3.3.2">superscript</csymbol><apply id="algx1.l26.m1.2.3.3.2.2.cmml" xref="algx1.l26.m1.2.3.3.2"><csymbol cd="ambiguous" id="algx1.l26.m1.2.3.3.2.2.1.cmml" xref="algx1.l26.m1.2.3.3.2">subscript</csymbol><ci id="algx1.l26.m1.2.3.3.2.2.2.cmml" xref="algx1.l26.m1.2.3.3.2.2.2">𝑃</ci><ci id="algx1.l26.m1.2.3.3.2.2.3.cmml" xref="algx1.l26.m1.2.3.3.2.2.3">𝜃</ci></apply><apply id="algx1.l26.m1.2.3.3.2.3.cmml" xref="algx1.l26.m1.2.3.3.2.3"><times id="algx1.l26.m1.2.3.3.2.3.1.cmml" xref="algx1.l26.m1.2.3.3.2.3.1"></times><ci id="algx1.l26.m1.2.3.3.2.3.2.cmml" xref="algx1.l26.m1.2.3.3.2.3.2">𝑞</ci><ci id="algx1.l26.m1.2.3.3.2.3.3.cmml" xref="algx1.l26.m1.2.3.3.2.3.3">𝑢</ci><ci id="algx1.l26.m1.2.3.3.2.3.4.cmml" xref="algx1.l26.m1.2.3.3.2.3.4">𝑒</ci><ci id="algx1.l26.m1.2.3.3.2.3.5.cmml" xref="algx1.l26.m1.2.3.3.2.3.5">𝑟</ci><ci id="algx1.l26.m1.2.3.3.2.3.6.cmml" xref="algx1.l26.m1.2.3.3.2.3.6">𝑦</ci></apply></apply><interval closure="open" id="algx1.l26.m1.2.3.3.3.1.cmml" xref="algx1.l26.m1.2.3.3.3.2"><ci id="algx1.l26.m1.1.1.cmml" xref="algx1.l26.m1.1.1">𝑂</ci><ci id="algx1.l26.m1.2.2.cmml" xref="algx1.l26.m1.2.2">𝑄</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l26.m1.2c">A\leftarrow P_{\theta}^{query}(O,Q)</annotation><annotation encoding="application/x-llamapun" id="algx1.l26.m1.2d">italic_A ← italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT ( italic_O , italic_Q )</annotation></semantics></math> <span class="ltx_text" id="algx1.l26.4" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l26.1.m1.1"><semantics id="algx1.l26.1.m1.1a"><mo id="algx1.l26.1.m1.1.1" xref="algx1.l26.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l26.1.m1.1b"><ci id="algx1.l26.1.m1.1.1.cmml" xref="algx1.l26.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l26.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l26.1.m1.1d">▷</annotation></semantics></math> Make new query proposal <math alttext="A" class="ltx_Math" display="inline" id="algx1.l26.2.m2.1"><semantics id="algx1.l26.2.m2.1a"><mi id="algx1.l26.2.m2.1.1" xref="algx1.l26.2.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="algx1.l26.2.m2.1b"><ci id="algx1.l26.2.m2.1.1.cmml" xref="algx1.l26.2.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l26.2.m2.1c">A</annotation><annotation encoding="application/x-llamapun" id="algx1.l26.2.m2.1d">italic_A</annotation></semantics></math> based on <math alttext="O" class="ltx_Math" display="inline" id="algx1.l26.3.m3.1"><semantics id="algx1.l26.3.m3.1a"><mi id="algx1.l26.3.m3.1.1" xref="algx1.l26.3.m3.1.1.cmml">O</mi><annotation-xml encoding="MathML-Content" id="algx1.l26.3.m3.1b"><ci id="algx1.l26.3.m3.1.1.cmml" xref="algx1.l26.3.m3.1.1">𝑂</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l26.3.m3.1c">O</annotation><annotation encoding="application/x-llamapun" id="algx1.l26.3.m3.1d">italic_O</annotation></semantics></math> and <math alttext="Q" class="ltx_Math" display="inline" id="algx1.l26.4.m4.1"><semantics id="algx1.l26.4.m4.1a"><mi id="algx1.l26.4.m4.1.1" xref="algx1.l26.4.m4.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx1.l26.4.m4.1b"><ci id="algx1.l26.4.m4.1.1.cmml" xref="algx1.l26.4.m4.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l26.4.m4.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx1.l26.4.m4.1d">italic_Q</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l27">
<span class="ltx_tag ltx_tag_listingline">27:</span>     <math alttext="D\leftarrow R_{bm25}(A)" class="ltx_Math" display="inline" id="algx1.l27.m1.1"><semantics id="algx1.l27.m1.1a"><mrow id="algx1.l27.m1.1.2" xref="algx1.l27.m1.1.2.cmml"><mi id="algx1.l27.m1.1.2.2" xref="algx1.l27.m1.1.2.2.cmml">D</mi><mo id="algx1.l27.m1.1.2.1" stretchy="false" xref="algx1.l27.m1.1.2.1.cmml">←</mo><mrow id="algx1.l27.m1.1.2.3" xref="algx1.l27.m1.1.2.3.cmml"><msub id="algx1.l27.m1.1.2.3.2" xref="algx1.l27.m1.1.2.3.2.cmml"><mi id="algx1.l27.m1.1.2.3.2.2" xref="algx1.l27.m1.1.2.3.2.2.cmml">R</mi><mrow id="algx1.l27.m1.1.2.3.2.3" xref="algx1.l27.m1.1.2.3.2.3.cmml"><mi id="algx1.l27.m1.1.2.3.2.3.2" xref="algx1.l27.m1.1.2.3.2.3.2.cmml">b</mi><mo id="algx1.l27.m1.1.2.3.2.3.1" xref="algx1.l27.m1.1.2.3.2.3.1.cmml">⁢</mo><mi id="algx1.l27.m1.1.2.3.2.3.3" xref="algx1.l27.m1.1.2.3.2.3.3.cmml">m</mi><mo id="algx1.l27.m1.1.2.3.2.3.1a" xref="algx1.l27.m1.1.2.3.2.3.1.cmml">⁢</mo><mn id="algx1.l27.m1.1.2.3.2.3.4" xref="algx1.l27.m1.1.2.3.2.3.4.cmml">25</mn></mrow></msub><mo id="algx1.l27.m1.1.2.3.1" xref="algx1.l27.m1.1.2.3.1.cmml">⁢</mo><mrow id="algx1.l27.m1.1.2.3.3.2" xref="algx1.l27.m1.1.2.3.cmml"><mo id="algx1.l27.m1.1.2.3.3.2.1" stretchy="false" xref="algx1.l27.m1.1.2.3.cmml">(</mo><mi id="algx1.l27.m1.1.1" xref="algx1.l27.m1.1.1.cmml">A</mi><mo id="algx1.l27.m1.1.2.3.3.2.2" stretchy="false" xref="algx1.l27.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l27.m1.1b"><apply id="algx1.l27.m1.1.2.cmml" xref="algx1.l27.m1.1.2"><ci id="algx1.l27.m1.1.2.1.cmml" xref="algx1.l27.m1.1.2.1">←</ci><ci id="algx1.l27.m1.1.2.2.cmml" xref="algx1.l27.m1.1.2.2">𝐷</ci><apply id="algx1.l27.m1.1.2.3.cmml" xref="algx1.l27.m1.1.2.3"><times id="algx1.l27.m1.1.2.3.1.cmml" xref="algx1.l27.m1.1.2.3.1"></times><apply id="algx1.l27.m1.1.2.3.2.cmml" xref="algx1.l27.m1.1.2.3.2"><csymbol cd="ambiguous" id="algx1.l27.m1.1.2.3.2.1.cmml" xref="algx1.l27.m1.1.2.3.2">subscript</csymbol><ci id="algx1.l27.m1.1.2.3.2.2.cmml" xref="algx1.l27.m1.1.2.3.2.2">𝑅</ci><apply id="algx1.l27.m1.1.2.3.2.3.cmml" xref="algx1.l27.m1.1.2.3.2.3"><times id="algx1.l27.m1.1.2.3.2.3.1.cmml" xref="algx1.l27.m1.1.2.3.2.3.1"></times><ci id="algx1.l27.m1.1.2.3.2.3.2.cmml" xref="algx1.l27.m1.1.2.3.2.3.2">𝑏</ci><ci id="algx1.l27.m1.1.2.3.2.3.3.cmml" xref="algx1.l27.m1.1.2.3.2.3.3">𝑚</ci><cn id="algx1.l27.m1.1.2.3.2.3.4.cmml" type="integer" xref="algx1.l27.m1.1.2.3.2.3.4">25</cn></apply></apply><ci id="algx1.l27.m1.1.1.cmml" xref="algx1.l27.m1.1.1">𝐴</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l27.m1.1c">D\leftarrow R_{bm25}(A)</annotation><annotation encoding="application/x-llamapun" id="algx1.l27.m1.1d">italic_D ← italic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT ( italic_A )</annotation></semantics></math> <span class="ltx_text" id="algx1.l27.3" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l27.1.m1.1"><semantics id="algx1.l27.1.m1.1a"><mo id="algx1.l27.1.m1.1.1" xref="algx1.l27.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l27.1.m1.1b"><ci id="algx1.l27.1.m1.1.1.cmml" xref="algx1.l27.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l27.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l27.1.m1.1d">▷</annotation></semantics></math> Invoke <math alttext="\mathcal{R}_{bm25}" class="ltx_Math" display="inline" id="algx1.l27.2.m2.1"><semantics id="algx1.l27.2.m2.1a"><msub id="algx1.l27.2.m2.1.1" xref="algx1.l27.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l27.2.m2.1.1.2" xref="algx1.l27.2.m2.1.1.2.cmml">ℛ</mi><mrow id="algx1.l27.2.m2.1.1.3" xref="algx1.l27.2.m2.1.1.3.cmml"><mi id="algx1.l27.2.m2.1.1.3.2" xref="algx1.l27.2.m2.1.1.3.2.cmml">b</mi><mo id="algx1.l27.2.m2.1.1.3.1" xref="algx1.l27.2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx1.l27.2.m2.1.1.3.3" xref="algx1.l27.2.m2.1.1.3.3.cmml">m</mi><mo id="algx1.l27.2.m2.1.1.3.1a" xref="algx1.l27.2.m2.1.1.3.1.cmml">⁢</mo><mn id="algx1.l27.2.m2.1.1.3.4" xref="algx1.l27.2.m2.1.1.3.4.cmml">25</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l27.2.m2.1b"><apply id="algx1.l27.2.m2.1.1.cmml" xref="algx1.l27.2.m2.1.1"><csymbol cd="ambiguous" id="algx1.l27.2.m2.1.1.1.cmml" xref="algx1.l27.2.m2.1.1">subscript</csymbol><ci id="algx1.l27.2.m2.1.1.2.cmml" xref="algx1.l27.2.m2.1.1.2">ℛ</ci><apply id="algx1.l27.2.m2.1.1.3.cmml" xref="algx1.l27.2.m2.1.1.3"><times id="algx1.l27.2.m2.1.1.3.1.cmml" xref="algx1.l27.2.m2.1.1.3.1"></times><ci id="algx1.l27.2.m2.1.1.3.2.cmml" xref="algx1.l27.2.m2.1.1.3.2">𝑏</ci><ci id="algx1.l27.2.m2.1.1.3.3.cmml" xref="algx1.l27.2.m2.1.1.3.3">𝑚</ci><cn id="algx1.l27.2.m2.1.1.3.4.cmml" type="integer" xref="algx1.l27.2.m2.1.1.3.4">25</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l27.2.m2.1c">\mathcal{R}_{bm25}</annotation><annotation encoding="application/x-llamapun" id="algx1.l27.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT</annotation></semantics></math> to retrieve documents according to <math alttext="A" class="ltx_Math" display="inline" id="algx1.l27.3.m3.1"><semantics id="algx1.l27.3.m3.1a"><mi id="algx1.l27.3.m3.1.1" xref="algx1.l27.3.m3.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="algx1.l27.3.m3.1b"><ci id="algx1.l27.3.m3.1.1.cmml" xref="algx1.l27.3.m3.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l27.3.m3.1c">A</annotation><annotation encoding="application/x-llamapun" id="algx1.l27.3.m3.1d">italic_A</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l28">
<span class="ltx_tag ltx_tag_listingline">28:</span>     <math alttext="R,F\leftarrow P_{\theta}^{eval}(D\cup O_{d}^{anc},Q)" class="ltx_Math" display="inline" id="algx1.l28.m1.4"><semantics id="algx1.l28.m1.4a"><mrow id="algx1.l28.m1.4.4" xref="algx1.l28.m1.4.4.cmml"><mrow id="algx1.l28.m1.4.4.3.2" xref="algx1.l28.m1.4.4.3.1.cmml"><mi id="algx1.l28.m1.2.2" xref="algx1.l28.m1.2.2.cmml">R</mi><mo id="algx1.l28.m1.4.4.3.2.1" xref="algx1.l28.m1.4.4.3.1.cmml">,</mo><mi id="algx1.l28.m1.3.3" xref="algx1.l28.m1.3.3.cmml">F</mi></mrow><mo id="algx1.l28.m1.4.4.2" stretchy="false" xref="algx1.l28.m1.4.4.2.cmml">←</mo><mrow id="algx1.l28.m1.4.4.1" xref="algx1.l28.m1.4.4.1.cmml"><msubsup id="algx1.l28.m1.4.4.1.3" xref="algx1.l28.m1.4.4.1.3.cmml"><mi id="algx1.l28.m1.4.4.1.3.2.2" xref="algx1.l28.m1.4.4.1.3.2.2.cmml">P</mi><mi id="algx1.l28.m1.4.4.1.3.2.3" xref="algx1.l28.m1.4.4.1.3.2.3.cmml">θ</mi><mrow id="algx1.l28.m1.4.4.1.3.3" xref="algx1.l28.m1.4.4.1.3.3.cmml"><mi id="algx1.l28.m1.4.4.1.3.3.2" xref="algx1.l28.m1.4.4.1.3.3.2.cmml">e</mi><mo id="algx1.l28.m1.4.4.1.3.3.1" xref="algx1.l28.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.m1.4.4.1.3.3.3" xref="algx1.l28.m1.4.4.1.3.3.3.cmml">v</mi><mo id="algx1.l28.m1.4.4.1.3.3.1a" xref="algx1.l28.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.m1.4.4.1.3.3.4" xref="algx1.l28.m1.4.4.1.3.3.4.cmml">a</mi><mo id="algx1.l28.m1.4.4.1.3.3.1b" xref="algx1.l28.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.m1.4.4.1.3.3.5" xref="algx1.l28.m1.4.4.1.3.3.5.cmml">l</mi></mrow></msubsup><mo id="algx1.l28.m1.4.4.1.2" xref="algx1.l28.m1.4.4.1.2.cmml">⁢</mo><mrow id="algx1.l28.m1.4.4.1.1.1" xref="algx1.l28.m1.4.4.1.1.2.cmml"><mo id="algx1.l28.m1.4.4.1.1.1.2" stretchy="false" xref="algx1.l28.m1.4.4.1.1.2.cmml">(</mo><mrow id="algx1.l28.m1.4.4.1.1.1.1" xref="algx1.l28.m1.4.4.1.1.1.1.cmml"><mi id="algx1.l28.m1.4.4.1.1.1.1.2" xref="algx1.l28.m1.4.4.1.1.1.1.2.cmml">D</mi><mo id="algx1.l28.m1.4.4.1.1.1.1.1" xref="algx1.l28.m1.4.4.1.1.1.1.1.cmml">∪</mo><msubsup id="algx1.l28.m1.4.4.1.1.1.1.3" xref="algx1.l28.m1.4.4.1.1.1.1.3.cmml"><mi id="algx1.l28.m1.4.4.1.1.1.1.3.2.2" xref="algx1.l28.m1.4.4.1.1.1.1.3.2.2.cmml">O</mi><mi id="algx1.l28.m1.4.4.1.1.1.1.3.2.3" xref="algx1.l28.m1.4.4.1.1.1.1.3.2.3.cmml">d</mi><mrow id="algx1.l28.m1.4.4.1.1.1.1.3.3" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.cmml"><mi id="algx1.l28.m1.4.4.1.1.1.1.3.3.2" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.2.cmml">a</mi><mo id="algx1.l28.m1.4.4.1.1.1.1.3.3.1" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.m1.4.4.1.1.1.1.3.3.3" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.3.cmml">n</mi><mo id="algx1.l28.m1.4.4.1.1.1.1.3.3.1a" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.m1.4.4.1.1.1.1.3.3.4" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><mo id="algx1.l28.m1.4.4.1.1.1.3" xref="algx1.l28.m1.4.4.1.1.2.cmml">,</mo><mi id="algx1.l28.m1.1.1" xref="algx1.l28.m1.1.1.cmml">Q</mi><mo id="algx1.l28.m1.4.4.1.1.1.4" stretchy="false" xref="algx1.l28.m1.4.4.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l28.m1.4b"><apply id="algx1.l28.m1.4.4.cmml" xref="algx1.l28.m1.4.4"><ci id="algx1.l28.m1.4.4.2.cmml" xref="algx1.l28.m1.4.4.2">←</ci><list id="algx1.l28.m1.4.4.3.1.cmml" xref="algx1.l28.m1.4.4.3.2"><ci id="algx1.l28.m1.2.2.cmml" xref="algx1.l28.m1.2.2">𝑅</ci><ci id="algx1.l28.m1.3.3.cmml" xref="algx1.l28.m1.3.3">𝐹</ci></list><apply id="algx1.l28.m1.4.4.1.cmml" xref="algx1.l28.m1.4.4.1"><times id="algx1.l28.m1.4.4.1.2.cmml" xref="algx1.l28.m1.4.4.1.2"></times><apply id="algx1.l28.m1.4.4.1.3.cmml" xref="algx1.l28.m1.4.4.1.3"><csymbol cd="ambiguous" id="algx1.l28.m1.4.4.1.3.1.cmml" xref="algx1.l28.m1.4.4.1.3">superscript</csymbol><apply id="algx1.l28.m1.4.4.1.3.2.cmml" xref="algx1.l28.m1.4.4.1.3"><csymbol cd="ambiguous" id="algx1.l28.m1.4.4.1.3.2.1.cmml" xref="algx1.l28.m1.4.4.1.3">subscript</csymbol><ci id="algx1.l28.m1.4.4.1.3.2.2.cmml" xref="algx1.l28.m1.4.4.1.3.2.2">𝑃</ci><ci id="algx1.l28.m1.4.4.1.3.2.3.cmml" xref="algx1.l28.m1.4.4.1.3.2.3">𝜃</ci></apply><apply id="algx1.l28.m1.4.4.1.3.3.cmml" xref="algx1.l28.m1.4.4.1.3.3"><times id="algx1.l28.m1.4.4.1.3.3.1.cmml" xref="algx1.l28.m1.4.4.1.3.3.1"></times><ci id="algx1.l28.m1.4.4.1.3.3.2.cmml" xref="algx1.l28.m1.4.4.1.3.3.2">𝑒</ci><ci id="algx1.l28.m1.4.4.1.3.3.3.cmml" xref="algx1.l28.m1.4.4.1.3.3.3">𝑣</ci><ci id="algx1.l28.m1.4.4.1.3.3.4.cmml" xref="algx1.l28.m1.4.4.1.3.3.4">𝑎</ci><ci id="algx1.l28.m1.4.4.1.3.3.5.cmml" xref="algx1.l28.m1.4.4.1.3.3.5">𝑙</ci></apply></apply><interval closure="open" id="algx1.l28.m1.4.4.1.1.2.cmml" xref="algx1.l28.m1.4.4.1.1.1"><apply id="algx1.l28.m1.4.4.1.1.1.1.cmml" xref="algx1.l28.m1.4.4.1.1.1.1"><union id="algx1.l28.m1.4.4.1.1.1.1.1.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.1"></union><ci id="algx1.l28.m1.4.4.1.1.1.1.2.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.2">𝐷</ci><apply id="algx1.l28.m1.4.4.1.1.1.1.3.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l28.m1.4.4.1.1.1.1.3.1.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3">superscript</csymbol><apply id="algx1.l28.m1.4.4.1.1.1.1.3.2.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l28.m1.4.4.1.1.1.1.3.2.1.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3">subscript</csymbol><ci id="algx1.l28.m1.4.4.1.1.1.1.3.2.2.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.2.2">𝑂</ci><ci id="algx1.l28.m1.4.4.1.1.1.1.3.2.3.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.2.3">𝑑</ci></apply><apply id="algx1.l28.m1.4.4.1.1.1.1.3.3.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.3"><times id="algx1.l28.m1.4.4.1.1.1.1.3.3.1.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.1"></times><ci id="algx1.l28.m1.4.4.1.1.1.1.3.3.2.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.2">𝑎</ci><ci id="algx1.l28.m1.4.4.1.1.1.1.3.3.3.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.3">𝑛</ci><ci id="algx1.l28.m1.4.4.1.1.1.1.3.3.4.cmml" xref="algx1.l28.m1.4.4.1.1.1.1.3.3.4">𝑐</ci></apply></apply></apply><ci id="algx1.l28.m1.1.1.cmml" xref="algx1.l28.m1.1.1">𝑄</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.m1.4c">R,F\leftarrow P_{\theta}^{eval}(D\cup O_{d}^{anc},Q)</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.m1.4d">italic_R , italic_F ← italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT ( italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT , italic_Q )</annotation></semantics></math> <span class="ltx_text" id="algx1.l28.5" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l28.1.m1.1"><semantics id="algx1.l28.1.m1.1a"><mo id="algx1.l28.1.m1.1.1" xref="algx1.l28.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l28.1.m1.1b"><ci id="algx1.l28.1.m1.1.1.cmml" xref="algx1.l28.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.1.m1.1d">▷</annotation></semantics></math> Get reward score <math alttext="R" class="ltx_Math" display="inline" id="algx1.l28.2.m2.1"><semantics id="algx1.l28.2.m2.1a"><mi id="algx1.l28.2.m2.1.1" xref="algx1.l28.2.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx1.l28.2.m2.1b"><ci id="algx1.l28.2.m2.1.1.cmml" xref="algx1.l28.2.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.2.m2.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.2.m2.1d">italic_R</annotation></semantics></math> and descriptional feedback <math alttext="O_{f}" class="ltx_Math" display="inline" id="algx1.l28.3.m3.1"><semantics id="algx1.l28.3.m3.1a"><msub id="algx1.l28.3.m3.1.1" xref="algx1.l28.3.m3.1.1.cmml"><mi id="algx1.l28.3.m3.1.1.2" xref="algx1.l28.3.m3.1.1.2.cmml">O</mi><mi id="algx1.l28.3.m3.1.1.3" xref="algx1.l28.3.m3.1.1.3.cmml">f</mi></msub><annotation-xml encoding="MathML-Content" id="algx1.l28.3.m3.1b"><apply id="algx1.l28.3.m3.1.1.cmml" xref="algx1.l28.3.m3.1.1"><csymbol cd="ambiguous" id="algx1.l28.3.m3.1.1.1.cmml" xref="algx1.l28.3.m3.1.1">subscript</csymbol><ci id="algx1.l28.3.m3.1.1.2.cmml" xref="algx1.l28.3.m3.1.1.2">𝑂</ci><ci id="algx1.l28.3.m3.1.1.3.cmml" xref="algx1.l28.3.m3.1.1.3">𝑓</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.3.m3.1c">O_{f}</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.3.m3.1d">italic_O start_POSTSUBSCRIPT italic_f end_POSTSUBSCRIPT</annotation></semantics></math> for currently retrieved documents <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx1.l28.4.m4.1"><semantics id="algx1.l28.4.m4.1a"><mrow id="algx1.l28.4.m4.1.1" xref="algx1.l28.4.m4.1.1.cmml"><mi id="algx1.l28.4.m4.1.1.2" xref="algx1.l28.4.m4.1.1.2.cmml">D</mi><mo id="algx1.l28.4.m4.1.1.1" xref="algx1.l28.4.m4.1.1.1.cmml">∪</mo><msubsup id="algx1.l28.4.m4.1.1.3" xref="algx1.l28.4.m4.1.1.3.cmml"><mi id="algx1.l28.4.m4.1.1.3.2.2" xref="algx1.l28.4.m4.1.1.3.2.2.cmml">O</mi><mi id="algx1.l28.4.m4.1.1.3.2.3" xref="algx1.l28.4.m4.1.1.3.2.3.cmml">d</mi><mrow id="algx1.l28.4.m4.1.1.3.3" xref="algx1.l28.4.m4.1.1.3.3.cmml"><mi id="algx1.l28.4.m4.1.1.3.3.2" xref="algx1.l28.4.m4.1.1.3.3.2.cmml">a</mi><mo id="algx1.l28.4.m4.1.1.3.3.1" xref="algx1.l28.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.4.m4.1.1.3.3.3" xref="algx1.l28.4.m4.1.1.3.3.3.cmml">n</mi><mo id="algx1.l28.4.m4.1.1.3.3.1a" xref="algx1.l28.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l28.4.m4.1.1.3.3.4" xref="algx1.l28.4.m4.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx1.l28.4.m4.1b"><apply id="algx1.l28.4.m4.1.1.cmml" xref="algx1.l28.4.m4.1.1"><union id="algx1.l28.4.m4.1.1.1.cmml" xref="algx1.l28.4.m4.1.1.1"></union><ci id="algx1.l28.4.m4.1.1.2.cmml" xref="algx1.l28.4.m4.1.1.2">𝐷</ci><apply id="algx1.l28.4.m4.1.1.3.cmml" xref="algx1.l28.4.m4.1.1.3"><csymbol cd="ambiguous" id="algx1.l28.4.m4.1.1.3.1.cmml" xref="algx1.l28.4.m4.1.1.3">superscript</csymbol><apply id="algx1.l28.4.m4.1.1.3.2.cmml" xref="algx1.l28.4.m4.1.1.3"><csymbol cd="ambiguous" id="algx1.l28.4.m4.1.1.3.2.1.cmml" xref="algx1.l28.4.m4.1.1.3">subscript</csymbol><ci id="algx1.l28.4.m4.1.1.3.2.2.cmml" xref="algx1.l28.4.m4.1.1.3.2.2">𝑂</ci><ci id="algx1.l28.4.m4.1.1.3.2.3.cmml" xref="algx1.l28.4.m4.1.1.3.2.3">𝑑</ci></apply><apply id="algx1.l28.4.m4.1.1.3.3.cmml" xref="algx1.l28.4.m4.1.1.3.3"><times id="algx1.l28.4.m4.1.1.3.3.1.cmml" xref="algx1.l28.4.m4.1.1.3.3.1"></times><ci id="algx1.l28.4.m4.1.1.3.3.2.cmml" xref="algx1.l28.4.m4.1.1.3.3.2">𝑎</ci><ci id="algx1.l28.4.m4.1.1.3.3.3.cmml" xref="algx1.l28.4.m4.1.1.3.3.3">𝑛</ci><ci id="algx1.l28.4.m4.1.1.3.3.4.cmml" xref="algx1.l28.4.m4.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.4.m4.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.4.m4.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="Q" class="ltx_Math" display="inline" id="algx1.l28.5.m5.1"><semantics id="algx1.l28.5.m5.1a"><mi id="algx1.l28.5.m5.1.1" xref="algx1.l28.5.m5.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx1.l28.5.m5.1b"><ci id="algx1.l28.5.m5.1.1.cmml" xref="algx1.l28.5.m5.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l28.5.m5.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx1.l28.5.m5.1d">italic_Q</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l29">
<span class="ltx_tag ltx_tag_listingline">29:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l29.3">if</span> <math alttext="R" class="ltx_Math" display="inline" id="algx1.l29.m1.1"><semantics id="algx1.l29.m1.1a"><mi id="algx1.l29.m1.1.1" xref="algx1.l29.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx1.l29.m1.1b"><ci id="algx1.l29.m1.1.1.cmml" xref="algx1.l29.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l29.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx1.l29.m1.1d">italic_R</annotation></semantics></math> == 5 <span class="ltx_text ltx_font_bold" id="algx1.l29.4">then</span> <span class="ltx_text" id="algx1.l29.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l29.1.m1.1"><semantics id="algx1.l29.1.m1.1a"><mo id="algx1.l29.1.m1.1.1" xref="algx1.l29.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l29.1.m1.1b"><ci id="algx1.l29.1.m1.1.1.cmml" xref="algx1.l29.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l29.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l29.1.m1.1d">▷</annotation></semantics></math> Stop early if <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx1.l29.2.m2.1"><semantics id="algx1.l29.2.m2.1a"><mrow id="algx1.l29.2.m2.1.1" xref="algx1.l29.2.m2.1.1.cmml"><mi id="algx1.l29.2.m2.1.1.2" xref="algx1.l29.2.m2.1.1.2.cmml">D</mi><mo id="algx1.l29.2.m2.1.1.1" xref="algx1.l29.2.m2.1.1.1.cmml">∪</mo><msubsup id="algx1.l29.2.m2.1.1.3" xref="algx1.l29.2.m2.1.1.3.cmml"><mi id="algx1.l29.2.m2.1.1.3.2.2" xref="algx1.l29.2.m2.1.1.3.2.2.cmml">O</mi><mi id="algx1.l29.2.m2.1.1.3.2.3" xref="algx1.l29.2.m2.1.1.3.2.3.cmml">d</mi><mrow id="algx1.l29.2.m2.1.1.3.3" xref="algx1.l29.2.m2.1.1.3.3.cmml"><mi id="algx1.l29.2.m2.1.1.3.3.2" xref="algx1.l29.2.m2.1.1.3.3.2.cmml">a</mi><mo id="algx1.l29.2.m2.1.1.3.3.1" xref="algx1.l29.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l29.2.m2.1.1.3.3.3" xref="algx1.l29.2.m2.1.1.3.3.3.cmml">n</mi><mo id="algx1.l29.2.m2.1.1.3.3.1a" xref="algx1.l29.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l29.2.m2.1.1.3.3.4" xref="algx1.l29.2.m2.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx1.l29.2.m2.1b"><apply id="algx1.l29.2.m2.1.1.cmml" xref="algx1.l29.2.m2.1.1"><union id="algx1.l29.2.m2.1.1.1.cmml" xref="algx1.l29.2.m2.1.1.1"></union><ci id="algx1.l29.2.m2.1.1.2.cmml" xref="algx1.l29.2.m2.1.1.2">𝐷</ci><apply id="algx1.l29.2.m2.1.1.3.cmml" xref="algx1.l29.2.m2.1.1.3"><csymbol cd="ambiguous" id="algx1.l29.2.m2.1.1.3.1.cmml" xref="algx1.l29.2.m2.1.1.3">superscript</csymbol><apply id="algx1.l29.2.m2.1.1.3.2.cmml" xref="algx1.l29.2.m2.1.1.3"><csymbol cd="ambiguous" id="algx1.l29.2.m2.1.1.3.2.1.cmml" xref="algx1.l29.2.m2.1.1.3">subscript</csymbol><ci id="algx1.l29.2.m2.1.1.3.2.2.cmml" xref="algx1.l29.2.m2.1.1.3.2.2">𝑂</ci><ci id="algx1.l29.2.m2.1.1.3.2.3.cmml" xref="algx1.l29.2.m2.1.1.3.2.3">𝑑</ci></apply><apply id="algx1.l29.2.m2.1.1.3.3.cmml" xref="algx1.l29.2.m2.1.1.3.3"><times id="algx1.l29.2.m2.1.1.3.3.1.cmml" xref="algx1.l29.2.m2.1.1.3.3.1"></times><ci id="algx1.l29.2.m2.1.1.3.3.2.cmml" xref="algx1.l29.2.m2.1.1.3.3.2">𝑎</ci><ci id="algx1.l29.2.m2.1.1.3.3.3.cmml" xref="algx1.l29.2.m2.1.1.3.3.3">𝑛</ci><ci id="algx1.l29.2.m2.1.1.3.3.4.cmml" xref="algx1.l29.2.m2.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l29.2.m2.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx1.l29.2.m2.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> receive highest score in 5-point rubrics
</span>
</div>
<div class="ltx_listingline" id="algx1.l30">
<span class="ltx_tag ltx_tag_listingline">30:</span>         <span class="ltx_text ltx_font_bold" id="algx1.l30.1">break</span>
</div>
<div class="ltx_listingline" id="algx1.l31">
<span class="ltx_tag ltx_tag_listingline">31:</span>     <span class="ltx_text ltx_font_bold" id="algx1.l31.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l31.2">if</span>
</div>
<div class="ltx_listingline" id="algx1.l32">
<span class="ltx_tag ltx_tag_listingline">32:</span>
</div>
<div class="ltx_listingline" id="algx1.l33">
<span class="ltx_tag ltx_tag_listingline">33:</span>     <math alttext="C^{\prime}=\text{create\_new\_child}(Q,A,R,O)" class="ltx_Math" display="inline" id="algx1.l33.m1.4"><semantics id="algx1.l33.m1.4a"><mrow id="algx1.l33.m1.4.5" xref="algx1.l33.m1.4.5.cmml"><msup id="algx1.l33.m1.4.5.2" xref="algx1.l33.m1.4.5.2.cmml"><mi id="algx1.l33.m1.4.5.2.2" xref="algx1.l33.m1.4.5.2.2.cmml">C</mi><mo id="algx1.l33.m1.4.5.2.3" xref="algx1.l33.m1.4.5.2.3.cmml">′</mo></msup><mo id="algx1.l33.m1.4.5.1" xref="algx1.l33.m1.4.5.1.cmml">=</mo><mrow id="algx1.l33.m1.4.5.3" xref="algx1.l33.m1.4.5.3.cmml"><mtext id="algx1.l33.m1.4.5.3.2" xref="algx1.l33.m1.4.5.3.2a.cmml">create_new_child</mtext><mo id="algx1.l33.m1.4.5.3.1" xref="algx1.l33.m1.4.5.3.1.cmml">⁢</mo><mrow id="algx1.l33.m1.4.5.3.3.2" xref="algx1.l33.m1.4.5.3.3.1.cmml"><mo id="algx1.l33.m1.4.5.3.3.2.1" stretchy="false" xref="algx1.l33.m1.4.5.3.3.1.cmml">(</mo><mi id="algx1.l33.m1.1.1" xref="algx1.l33.m1.1.1.cmml">Q</mi><mo id="algx1.l33.m1.4.5.3.3.2.2" xref="algx1.l33.m1.4.5.3.3.1.cmml">,</mo><mi id="algx1.l33.m1.2.2" xref="algx1.l33.m1.2.2.cmml">A</mi><mo id="algx1.l33.m1.4.5.3.3.2.3" xref="algx1.l33.m1.4.5.3.3.1.cmml">,</mo><mi id="algx1.l33.m1.3.3" xref="algx1.l33.m1.3.3.cmml">R</mi><mo id="algx1.l33.m1.4.5.3.3.2.4" xref="algx1.l33.m1.4.5.3.3.1.cmml">,</mo><mi id="algx1.l33.m1.4.4" xref="algx1.l33.m1.4.4.cmml">O</mi><mo id="algx1.l33.m1.4.5.3.3.2.5" stretchy="false" xref="algx1.l33.m1.4.5.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l33.m1.4b"><apply id="algx1.l33.m1.4.5.cmml" xref="algx1.l33.m1.4.5"><eq id="algx1.l33.m1.4.5.1.cmml" xref="algx1.l33.m1.4.5.1"></eq><apply id="algx1.l33.m1.4.5.2.cmml" xref="algx1.l33.m1.4.5.2"><csymbol cd="ambiguous" id="algx1.l33.m1.4.5.2.1.cmml" xref="algx1.l33.m1.4.5.2">superscript</csymbol><ci id="algx1.l33.m1.4.5.2.2.cmml" xref="algx1.l33.m1.4.5.2.2">𝐶</ci><ci id="algx1.l33.m1.4.5.2.3.cmml" xref="algx1.l33.m1.4.5.2.3">′</ci></apply><apply id="algx1.l33.m1.4.5.3.cmml" xref="algx1.l33.m1.4.5.3"><times id="algx1.l33.m1.4.5.3.1.cmml" xref="algx1.l33.m1.4.5.3.1"></times><ci id="algx1.l33.m1.4.5.3.2a.cmml" xref="algx1.l33.m1.4.5.3.2"><mtext id="algx1.l33.m1.4.5.3.2.cmml" xref="algx1.l33.m1.4.5.3.2">create_new_child</mtext></ci><vector id="algx1.l33.m1.4.5.3.3.1.cmml" xref="algx1.l33.m1.4.5.3.3.2"><ci id="algx1.l33.m1.1.1.cmml" xref="algx1.l33.m1.1.1">𝑄</ci><ci id="algx1.l33.m1.2.2.cmml" xref="algx1.l33.m1.2.2">𝐴</ci><ci id="algx1.l33.m1.3.3.cmml" xref="algx1.l33.m1.3.3">𝑅</ci><ci id="algx1.l33.m1.4.4.cmml" xref="algx1.l33.m1.4.4">𝑂</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l33.m1.4c">C^{\prime}=\text{create\_new\_child}(Q,A,R,O)</annotation><annotation encoding="application/x-llamapun" id="algx1.l33.m1.4d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT = create_new_child ( italic_Q , italic_A , italic_R , italic_O )</annotation></semantics></math> <span class="ltx_text" id="algx1.l33.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l33.1.m1.1"><semantics id="algx1.l33.1.m1.1a"><mo id="algx1.l33.1.m1.1.1" xref="algx1.l33.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l33.1.m1.1b"><ci id="algx1.l33.1.m1.1.1.cmml" xref="algx1.l33.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l33.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l33.1.m1.1d">▷</annotation></semantics></math> create a new child node for <math alttext="C" class="ltx_Math" display="inline" id="algx1.l33.2.m2.1"><semantics id="algx1.l33.2.m2.1a"><mi id="algx1.l33.2.m2.1.1" xref="algx1.l33.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l33.2.m2.1b"><ci id="algx1.l33.2.m2.1.1.cmml" xref="algx1.l33.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l33.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l33.2.m2.1d">italic_C</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l34">
<span class="ltx_tag ltx_tag_listingline">34:</span>     Add <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="algx1.l34.m1.1"><semantics id="algx1.l34.m1.1a"><msup id="algx1.l34.m1.1.1" xref="algx1.l34.m1.1.1.cmml"><mi id="algx1.l34.m1.1.1.2" xref="algx1.l34.m1.1.1.2.cmml">C</mi><mo id="algx1.l34.m1.1.1.3" xref="algx1.l34.m1.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="algx1.l34.m1.1b"><apply id="algx1.l34.m1.1.1.cmml" xref="algx1.l34.m1.1.1"><csymbol cd="ambiguous" id="algx1.l34.m1.1.1.1.cmml" xref="algx1.l34.m1.1.1">superscript</csymbol><ci id="algx1.l34.m1.1.1.2.cmml" xref="algx1.l34.m1.1.1.2">𝐶</ci><ci id="algx1.l34.m1.1.1.3.cmml" xref="algx1.l34.m1.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l34.m1.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="algx1.l34.m1.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> to children nodes of <math alttext="C" class="ltx_Math" display="inline" id="algx1.l34.m2.1"><semantics id="algx1.l34.m2.1a"><mi id="algx1.l34.m2.1.1" xref="algx1.l34.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l34.m2.1b"><ci id="algx1.l34.m2.1.1.cmml" xref="algx1.l34.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l34.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l34.m2.1d">italic_C</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l35">
<span class="ltx_tag ltx_tag_listingline">35:</span>     <span class="ltx_text ltx_font_bold ltx_font_italic" id="algx1.l35.1">——————Backpropagation——————</span>
</div>
<div class="ltx_listingline" id="algx1.l36">
<span class="ltx_tag ltx_tag_listingline">36:</span>     <math alttext="\text{back\_propagate}(C)" class="ltx_Math" display="inline" id="algx1.l36.m1.1"><semantics id="algx1.l36.m1.1a"><mrow id="algx1.l36.m1.1.2" xref="algx1.l36.m1.1.2.cmml"><mtext id="algx1.l36.m1.1.2.2" xref="algx1.l36.m1.1.2.2a.cmml">back_propagate</mtext><mo id="algx1.l36.m1.1.2.1" xref="algx1.l36.m1.1.2.1.cmml">⁢</mo><mrow id="algx1.l36.m1.1.2.3.2" xref="algx1.l36.m1.1.2.cmml"><mo id="algx1.l36.m1.1.2.3.2.1" stretchy="false" xref="algx1.l36.m1.1.2.cmml">(</mo><mi id="algx1.l36.m1.1.1" xref="algx1.l36.m1.1.1.cmml">C</mi><mo id="algx1.l36.m1.1.2.3.2.2" stretchy="false" xref="algx1.l36.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l36.m1.1b"><apply id="algx1.l36.m1.1.2.cmml" xref="algx1.l36.m1.1.2"><times id="algx1.l36.m1.1.2.1.cmml" xref="algx1.l36.m1.1.2.1"></times><ci id="algx1.l36.m1.1.2.2a.cmml" xref="algx1.l36.m1.1.2.2"><mtext id="algx1.l36.m1.1.2.2.cmml" xref="algx1.l36.m1.1.2.2">back_propagate</mtext></ci><ci id="algx1.l36.m1.1.1.cmml" xref="algx1.l36.m1.1.1">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l36.m1.1c">\text{back\_propagate}(C)</annotation><annotation encoding="application/x-llamapun" id="algx1.l36.m1.1d">back_propagate ( italic_C )</annotation></semantics></math> <span class="ltx_text" id="algx1.l36.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l36.1.m1.1"><semantics id="algx1.l36.1.m1.1a"><mo id="algx1.l36.1.m1.1.1" xref="algx1.l36.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l36.1.m1.1b"><ci id="algx1.l36.1.m1.1.1.cmml" xref="algx1.l36.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l36.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l36.1.m1.1d">▷</annotation></semantics></math> Update value of parent nodes using new score from <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="algx1.l36.2.m2.1"><semantics id="algx1.l36.2.m2.1a"><msup id="algx1.l36.2.m2.1.1" xref="algx1.l36.2.m2.1.1.cmml"><mi id="algx1.l36.2.m2.1.1.2" xref="algx1.l36.2.m2.1.1.2.cmml">C</mi><mo id="algx1.l36.2.m2.1.1.3" xref="algx1.l36.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="algx1.l36.2.m2.1b"><apply id="algx1.l36.2.m2.1.1.cmml" xref="algx1.l36.2.m2.1.1"><csymbol cd="ambiguous" id="algx1.l36.2.m2.1.1.1.cmml" xref="algx1.l36.2.m2.1.1">superscript</csymbol><ci id="algx1.l36.2.m2.1.1.2.cmml" xref="algx1.l36.2.m2.1.1.2">𝐶</ci><ci id="algx1.l36.2.m2.1.1.3.cmml" xref="algx1.l36.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l36.2.m2.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="algx1.l36.2.m2.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l37">
<span class="ltx_tag ltx_tag_listingline">37:</span><span class="ltx_text ltx_font_bold" id="algx1.l37.1">end</span> <span class="ltx_text ltx_font_bold" id="algx1.l37.2">for</span>
</div>
<div class="ltx_listingline" id="algx1.l38">
<span class="ltx_tag ltx_tag_listingline">38:</span><math alttext="C=\text{get\_best\_node}(T_{Q})" class="ltx_Math" display="inline" id="algx1.l38.m1.1"><semantics id="algx1.l38.m1.1a"><mrow id="algx1.l38.m1.1.1" xref="algx1.l38.m1.1.1.cmml"><mi id="algx1.l38.m1.1.1.3" xref="algx1.l38.m1.1.1.3.cmml">C</mi><mo id="algx1.l38.m1.1.1.2" xref="algx1.l38.m1.1.1.2.cmml">=</mo><mrow id="algx1.l38.m1.1.1.1" xref="algx1.l38.m1.1.1.1.cmml"><mtext id="algx1.l38.m1.1.1.1.3" xref="algx1.l38.m1.1.1.1.3a.cmml">get_best_node</mtext><mo id="algx1.l38.m1.1.1.1.2" xref="algx1.l38.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx1.l38.m1.1.1.1.1.1" xref="algx1.l38.m1.1.1.1.1.1.1.cmml"><mo id="algx1.l38.m1.1.1.1.1.1.2" stretchy="false" xref="algx1.l38.m1.1.1.1.1.1.1.cmml">(</mo><msub id="algx1.l38.m1.1.1.1.1.1.1" xref="algx1.l38.m1.1.1.1.1.1.1.cmml"><mi id="algx1.l38.m1.1.1.1.1.1.1.2" xref="algx1.l38.m1.1.1.1.1.1.1.2.cmml">T</mi><mi id="algx1.l38.m1.1.1.1.1.1.1.3" xref="algx1.l38.m1.1.1.1.1.1.1.3.cmml">Q</mi></msub><mo id="algx1.l38.m1.1.1.1.1.1.3" stretchy="false" xref="algx1.l38.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l38.m1.1b"><apply id="algx1.l38.m1.1.1.cmml" xref="algx1.l38.m1.1.1"><eq id="algx1.l38.m1.1.1.2.cmml" xref="algx1.l38.m1.1.1.2"></eq><ci id="algx1.l38.m1.1.1.3.cmml" xref="algx1.l38.m1.1.1.3">𝐶</ci><apply id="algx1.l38.m1.1.1.1.cmml" xref="algx1.l38.m1.1.1.1"><times id="algx1.l38.m1.1.1.1.2.cmml" xref="algx1.l38.m1.1.1.1.2"></times><ci id="algx1.l38.m1.1.1.1.3a.cmml" xref="algx1.l38.m1.1.1.1.3"><mtext id="algx1.l38.m1.1.1.1.3.cmml" xref="algx1.l38.m1.1.1.1.3">get_best_node</mtext></ci><apply id="algx1.l38.m1.1.1.1.1.1.1.cmml" xref="algx1.l38.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l38.m1.1.1.1.1.1.1.1.cmml" xref="algx1.l38.m1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l38.m1.1.1.1.1.1.1.2.cmml" xref="algx1.l38.m1.1.1.1.1.1.1.2">𝑇</ci><ci id="algx1.l38.m1.1.1.1.1.1.1.3.cmml" xref="algx1.l38.m1.1.1.1.1.1.1.3">𝑄</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l38.m1.1c">C=\text{get\_best\_node}(T_{Q})</annotation><annotation encoding="application/x-llamapun" id="algx1.l38.m1.1d">italic_C = get_best_node ( italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT )</annotation></semantics></math> <span class="ltx_text" id="algx1.l38.3" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l38.1.m1.1"><semantics id="algx1.l38.1.m1.1a"><mo id="algx1.l38.1.m1.1.1" xref="algx1.l38.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l38.1.m1.1b"><ci id="algx1.l38.1.m1.1.1.cmml" xref="algx1.l38.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l38.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l38.1.m1.1d">▷</annotation></semantics></math> Fetch the node with the highest <math alttext="R" class="ltx_Math" display="inline" id="algx1.l38.2.m2.1"><semantics id="algx1.l38.2.m2.1a"><mi id="algx1.l38.2.m2.1.1" xref="algx1.l38.2.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx1.l38.2.m2.1b"><ci id="algx1.l38.2.m2.1.1.cmml" xref="algx1.l38.2.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l38.2.m2.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx1.l38.2.m2.1d">italic_R</annotation></semantics></math> in <math alttext="T_{Q}" class="ltx_Math" display="inline" id="algx1.l38.3.m3.1"><semantics id="algx1.l38.3.m3.1a"><msub id="algx1.l38.3.m3.1.1" xref="algx1.l38.3.m3.1.1.cmml"><mi id="algx1.l38.3.m3.1.1.2" xref="algx1.l38.3.m3.1.1.2.cmml">T</mi><mi id="algx1.l38.3.m3.1.1.3" xref="algx1.l38.3.m3.1.1.3.cmml">Q</mi></msub><annotation-xml encoding="MathML-Content" id="algx1.l38.3.m3.1b"><apply id="algx1.l38.3.m3.1.1.cmml" xref="algx1.l38.3.m3.1.1"><csymbol cd="ambiguous" id="algx1.l38.3.m3.1.1.1.cmml" xref="algx1.l38.3.m3.1.1">subscript</csymbol><ci id="algx1.l38.3.m3.1.1.2.cmml" xref="algx1.l38.3.m3.1.1.2">𝑇</ci><ci id="algx1.l38.3.m3.1.1.3.cmml" xref="algx1.l38.3.m3.1.1.3">𝑄</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l38.3.m3.1c">T_{Q}</annotation><annotation encoding="application/x-llamapun" id="algx1.l38.3.m3.1d">italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx1.l39">
<span class="ltx_tag ltx_tag_listingline">39:</span><span class="ltx_text ltx_font_bold" id="algx1.l39.3">return</span> <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx1.l39.m1.1"><semantics id="algx1.l39.m1.1a"><mrow id="algx1.l39.m1.1.1" xref="algx1.l39.m1.1.1.cmml"><mi id="algx1.l39.m1.1.1.2" xref="algx1.l39.m1.1.1.2.cmml">D</mi><mo id="algx1.l39.m1.1.1.1" xref="algx1.l39.m1.1.1.1.cmml">∪</mo><msubsup id="algx1.l39.m1.1.1.3" xref="algx1.l39.m1.1.1.3.cmml"><mi id="algx1.l39.m1.1.1.3.2.2" xref="algx1.l39.m1.1.1.3.2.2.cmml">O</mi><mi id="algx1.l39.m1.1.1.3.2.3" xref="algx1.l39.m1.1.1.3.2.3.cmml">d</mi><mrow id="algx1.l39.m1.1.1.3.3" xref="algx1.l39.m1.1.1.3.3.cmml"><mi id="algx1.l39.m1.1.1.3.3.2" xref="algx1.l39.m1.1.1.3.3.2.cmml">a</mi><mo id="algx1.l39.m1.1.1.3.3.1" xref="algx1.l39.m1.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l39.m1.1.1.3.3.3" xref="algx1.l39.m1.1.1.3.3.3.cmml">n</mi><mo id="algx1.l39.m1.1.1.3.3.1a" xref="algx1.l39.m1.1.1.3.3.1.cmml">⁢</mo><mi id="algx1.l39.m1.1.1.3.3.4" xref="algx1.l39.m1.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx1.l39.m1.1b"><apply id="algx1.l39.m1.1.1.cmml" xref="algx1.l39.m1.1.1"><union id="algx1.l39.m1.1.1.1.cmml" xref="algx1.l39.m1.1.1.1"></union><ci id="algx1.l39.m1.1.1.2.cmml" xref="algx1.l39.m1.1.1.2">𝐷</ci><apply id="algx1.l39.m1.1.1.3.cmml" xref="algx1.l39.m1.1.1.3"><csymbol cd="ambiguous" id="algx1.l39.m1.1.1.3.1.cmml" xref="algx1.l39.m1.1.1.3">superscript</csymbol><apply id="algx1.l39.m1.1.1.3.2.cmml" xref="algx1.l39.m1.1.1.3"><csymbol cd="ambiguous" id="algx1.l39.m1.1.1.3.2.1.cmml" xref="algx1.l39.m1.1.1.3">subscript</csymbol><ci id="algx1.l39.m1.1.1.3.2.2.cmml" xref="algx1.l39.m1.1.1.3.2.2">𝑂</ci><ci id="algx1.l39.m1.1.1.3.2.3.cmml" xref="algx1.l39.m1.1.1.3.2.3">𝑑</ci></apply><apply id="algx1.l39.m1.1.1.3.3.cmml" xref="algx1.l39.m1.1.1.3.3"><times id="algx1.l39.m1.1.1.3.3.1.cmml" xref="algx1.l39.m1.1.1.3.3.1"></times><ci id="algx1.l39.m1.1.1.3.3.2.cmml" xref="algx1.l39.m1.1.1.3.3.2">𝑎</ci><ci id="algx1.l39.m1.1.1.3.3.3.cmml" xref="algx1.l39.m1.1.1.3.3.3">𝑛</ci><ci id="algx1.l39.m1.1.1.3.3.4.cmml" xref="algx1.l39.m1.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l39.m1.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx1.l39.m1.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> from <math alttext="C" class="ltx_Math" display="inline" id="algx1.l39.m2.1"><semantics id="algx1.l39.m2.1a"><mi id="algx1.l39.m2.1.1" xref="algx1.l39.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l39.m2.1b"><ci id="algx1.l39.m2.1.1.cmml" xref="algx1.l39.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l39.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l39.m2.1d">italic_C</annotation></semantics></math> <span class="ltx_text" id="algx1.l39.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l39.1.m1.1"><semantics id="algx1.l39.1.m1.1a"><mo id="algx1.l39.1.m1.1.1" xref="algx1.l39.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l39.1.m1.1b"><ci id="algx1.l39.1.m1.1.1.cmml" xref="algx1.l39.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l39.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l39.1.m1.1d">▷</annotation></semantics></math> Return all retrieved documents in <math alttext="C" class="ltx_Math" display="inline" id="algx1.l39.2.m2.1"><semantics id="algx1.l39.2.m2.1a"><mi id="algx1.l39.2.m2.1.1" xref="algx1.l39.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx1.l39.2.m2.1b"><ci id="algx1.l39.2.m2.1.1.cmml" xref="algx1.l39.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l39.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx1.l39.2.m2.1d">italic_C</annotation></semantics></math>
</span>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.3 </span>Self-Reflection</h3>
<div class="ltx_para" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.2">Compared with prompt for <math alttext="P_{\theta}^{query}" class="ltx_Math" display="inline" id="A3.SS3.p1.1.m1.1"><semantics id="A3.SS3.p1.1.m1.1a"><msubsup id="A3.SS3.p1.1.m1.1.1" xref="A3.SS3.p1.1.m1.1.1.cmml"><mi id="A3.SS3.p1.1.m1.1.1.2.2" xref="A3.SS3.p1.1.m1.1.1.2.2.cmml">P</mi><mi id="A3.SS3.p1.1.m1.1.1.2.3" xref="A3.SS3.p1.1.m1.1.1.2.3.cmml">θ</mi><mrow id="A3.SS3.p1.1.m1.1.1.3" xref="A3.SS3.p1.1.m1.1.1.3.cmml"><mi id="A3.SS3.p1.1.m1.1.1.3.2" xref="A3.SS3.p1.1.m1.1.1.3.2.cmml">q</mi><mo id="A3.SS3.p1.1.m1.1.1.3.1" xref="A3.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.1.m1.1.1.3.3" xref="A3.SS3.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="A3.SS3.p1.1.m1.1.1.3.1a" xref="A3.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.1.m1.1.1.3.4" xref="A3.SS3.p1.1.m1.1.1.3.4.cmml">e</mi><mo id="A3.SS3.p1.1.m1.1.1.3.1b" xref="A3.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.1.m1.1.1.3.5" xref="A3.SS3.p1.1.m1.1.1.3.5.cmml">r</mi><mo id="A3.SS3.p1.1.m1.1.1.3.1c" xref="A3.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.1.m1.1.1.3.6" xref="A3.SS3.p1.1.m1.1.1.3.6.cmml">y</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="A3.SS3.p1.1.m1.1b"><apply id="A3.SS3.p1.1.m1.1.1.cmml" xref="A3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.SS3.p1.1.m1.1.1.1.cmml" xref="A3.SS3.p1.1.m1.1.1">superscript</csymbol><apply id="A3.SS3.p1.1.m1.1.1.2.cmml" xref="A3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.SS3.p1.1.m1.1.1.2.1.cmml" xref="A3.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="A3.SS3.p1.1.m1.1.1.2.2.cmml" xref="A3.SS3.p1.1.m1.1.1.2.2">𝑃</ci><ci id="A3.SS3.p1.1.m1.1.1.2.3.cmml" xref="A3.SS3.p1.1.m1.1.1.2.3">𝜃</ci></apply><apply id="A3.SS3.p1.1.m1.1.1.3.cmml" xref="A3.SS3.p1.1.m1.1.1.3"><times id="A3.SS3.p1.1.m1.1.1.3.1.cmml" xref="A3.SS3.p1.1.m1.1.1.3.1"></times><ci id="A3.SS3.p1.1.m1.1.1.3.2.cmml" xref="A3.SS3.p1.1.m1.1.1.3.2">𝑞</ci><ci id="A3.SS3.p1.1.m1.1.1.3.3.cmml" xref="A3.SS3.p1.1.m1.1.1.3.3">𝑢</ci><ci id="A3.SS3.p1.1.m1.1.1.3.4.cmml" xref="A3.SS3.p1.1.m1.1.1.3.4">𝑒</ci><ci id="A3.SS3.p1.1.m1.1.1.3.5.cmml" xref="A3.SS3.p1.1.m1.1.1.3.5">𝑟</ci><ci id="A3.SS3.p1.1.m1.1.1.3.6.cmml" xref="A3.SS3.p1.1.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS3.p1.1.m1.1c">P_{\theta}^{query}</annotation><annotation encoding="application/x-llamapun" id="A3.SS3.p1.1.m1.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUPERSCRIPT</annotation></semantics></math> in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#S3.T2" title="Table 2 ‣ 3.1.2 Query Proposer for Efficiently Searching ‣ 3.1 Self-Rewarding Tree Search ‣ 3 Method ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a>, prompt for <math alttext="P_{\theta}^{reflect}" class="ltx_Math" display="inline" id="A3.SS3.p1.2.m2.1"><semantics id="A3.SS3.p1.2.m2.1a"><msubsup id="A3.SS3.p1.2.m2.1.1" xref="A3.SS3.p1.2.m2.1.1.cmml"><mi id="A3.SS3.p1.2.m2.1.1.2.2" xref="A3.SS3.p1.2.m2.1.1.2.2.cmml">P</mi><mi id="A3.SS3.p1.2.m2.1.1.2.3" xref="A3.SS3.p1.2.m2.1.1.2.3.cmml">θ</mi><mrow id="A3.SS3.p1.2.m2.1.1.3" xref="A3.SS3.p1.2.m2.1.1.3.cmml"><mi id="A3.SS3.p1.2.m2.1.1.3.2" xref="A3.SS3.p1.2.m2.1.1.3.2.cmml">r</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.3" xref="A3.SS3.p1.2.m2.1.1.3.3.cmml">e</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1a" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.4" xref="A3.SS3.p1.2.m2.1.1.3.4.cmml">f</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1b" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.5" xref="A3.SS3.p1.2.m2.1.1.3.5.cmml">l</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1c" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.6" xref="A3.SS3.p1.2.m2.1.1.3.6.cmml">e</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1d" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.7" xref="A3.SS3.p1.2.m2.1.1.3.7.cmml">c</mi><mo id="A3.SS3.p1.2.m2.1.1.3.1e" xref="A3.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A3.SS3.p1.2.m2.1.1.3.8" xref="A3.SS3.p1.2.m2.1.1.3.8.cmml">t</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="A3.SS3.p1.2.m2.1b"><apply id="A3.SS3.p1.2.m2.1.1.cmml" xref="A3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A3.SS3.p1.2.m2.1.1.1.cmml" xref="A3.SS3.p1.2.m2.1.1">superscript</csymbol><apply id="A3.SS3.p1.2.m2.1.1.2.cmml" xref="A3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A3.SS3.p1.2.m2.1.1.2.1.cmml" xref="A3.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="A3.SS3.p1.2.m2.1.1.2.2.cmml" xref="A3.SS3.p1.2.m2.1.1.2.2">𝑃</ci><ci id="A3.SS3.p1.2.m2.1.1.2.3.cmml" xref="A3.SS3.p1.2.m2.1.1.2.3">𝜃</ci></apply><apply id="A3.SS3.p1.2.m2.1.1.3.cmml" xref="A3.SS3.p1.2.m2.1.1.3"><times id="A3.SS3.p1.2.m2.1.1.3.1.cmml" xref="A3.SS3.p1.2.m2.1.1.3.1"></times><ci id="A3.SS3.p1.2.m2.1.1.3.2.cmml" xref="A3.SS3.p1.2.m2.1.1.3.2">𝑟</ci><ci id="A3.SS3.p1.2.m2.1.1.3.3.cmml" xref="A3.SS3.p1.2.m2.1.1.3.3">𝑒</ci><ci id="A3.SS3.p1.2.m2.1.1.3.4.cmml" xref="A3.SS3.p1.2.m2.1.1.3.4">𝑓</ci><ci id="A3.SS3.p1.2.m2.1.1.3.5.cmml" xref="A3.SS3.p1.2.m2.1.1.3.5">𝑙</ci><ci id="A3.SS3.p1.2.m2.1.1.3.6.cmml" xref="A3.SS3.p1.2.m2.1.1.3.6">𝑒</ci><ci id="A3.SS3.p1.2.m2.1.1.3.7.cmml" xref="A3.SS3.p1.2.m2.1.1.3.7">𝑐</ci><ci id="A3.SS3.p1.2.m2.1.1.3.8.cmml" xref="A3.SS3.p1.2.m2.1.1.3.8">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS3.p1.2.m2.1c">P_{\theta}^{reflect}</annotation><annotation encoding="application/x-llamapun" id="A3.SS3.p1.2.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_r italic_e italic_f italic_l italic_e italic_c italic_t end_POSTSUPERSCRIPT</annotation></semantics></math> in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#A3.T11" title="Table 11 ‣ C.3 Self-Reflection ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">11</span></a> removes all feedback from sibling nodes. Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.11258v1#alg2" title="Algorithm 2 ‣ C.3 Self-Reflection ‣ Appendix C Implementation Details ‣ Enhancing Biomedical Knowledge Retrieval-Augmented Generation with Self-Rewarding Tree Search and Proximal Policy Optimization"><span class="ltx_text ltx_ref_tag">2</span></a> shows a detailed implementation of the self-reflection process, node selection, and backpropagation operation is removed compared to SeRTS. All other configurations of the self-reflection process remain unchanged.</p>
</div>
<figure class="ltx_table" id="A3.T11">
<p class="ltx_p ltx_align_center" id="A3.T11.3"><span class="ltx_text" id="A3.T11.3.3"><span class="ltx_text" id="A3.T11.3.3.3" style="background-color:#FFF5EB;">
<span class="ltx_tabular ltx_align_middle" id="A3.T11.3.3.3.3">
<span class="ltx_tbody">
<span class="ltx_tr" id="A3.T11.1.1.1.1.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.1.1.1.1.1.1.1">
<span class="ltx_p" id="A3.T11.1.1.1.1.1.1.1.1" style="width:204.9pt;">You are a medical expert, and you are tasked with searching for as much useful knowledge from a database of medical paper abstracts as possible to address the user’s question. The question is stated as follows: <span class="ltx_text ltx_font_bold" id="A3.T11.1.1.1.1.1.1.1.1.1">{<math alttext="Q" class="ltx_Math" display="inline" id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1a"><mi id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1.1" mathbackground="#FFF5EB" xref="A3.T11.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1b"><ci id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A3.T11.1.1.1.1.1.1.1.1.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="A3.T11.1.1.1.1.1.1.1.1.1.m1.1d">italic_Q</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.4.1">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.4.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.4.1.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.4.1.1.1.1" style="width:204.9pt;">You are given the BM25 retriever as the search tool. According to previous query proposals and proposals’ corresponding feedback and suggestions, give one single better query for the retriever to further search for extra information needed for answering the given question.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.5.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.5.2.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.5.2.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.5.2.1.1.1" style="width:204.9pt;">Information already known is as follows:&lt;retrieved_info&gt;</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.2.2.2.2.2">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.2.2.2.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.2.2.2.2.2.1.1">
<span class="ltx_p" id="A3.T11.2.2.2.2.2.1.1.1" style="width:204.9pt;">    Query and its reasoning for Abstracts: <span class="ltx_text ltx_font_bold" id="A3.T11.2.2.2.2.2.1.1.1.1">{<math alttext="O^{anc}_{q}" class="ltx_Math" display="inline" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1"><semantics id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1a"><msubsup id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.cmml"><mi id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.2" mathbackground="#FFF5EB" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.2.cmml">O</mi><mi id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.3" mathbackground="#FFF5EB" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.3.cmml">q</mi><mrow id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.cmml"><mi id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.2" mathbackground="#FFF5EB" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.2.cmml">a</mi><mo id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.3" mathbackground="#FFF5EB" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.3.cmml">n</mi><mo id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1a" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.4" mathbackground="#FFF5EB" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1b"><apply id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.1.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1">subscript</csymbol><apply id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.1.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1">superscript</csymbol><ci id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.2.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.2">𝑂</ci><apply id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3"><times id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.1"></times><ci id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.2.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.2">𝑎</ci><ci id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.3.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.3">𝑛</ci><ci id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.4.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.3.cmml" xref="A3.T11.2.2.2.2.2.1.1.1.1.m1.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1c">O^{anc}_{q}</annotation><annotation encoding="application/x-llamapun" id="A3.T11.2.2.2.2.2.1.1.1.1.m1.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.3.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.3.1.1.1" style="width:204.9pt;">    Retrieved Abstracts: <span class="ltx_text ltx_font_bold" id="A3.T11.3.3.3.3.3.1.1.1.1">{<math alttext="O^{anc}_{d}" class="ltx_Math" display="inline" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1"><semantics id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1a"><msubsup id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.cmml"><mi id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.2" mathbackground="#FFF5EB" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.2.cmml">O</mi><mi id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.3" mathbackground="#FFF5EB" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.3.cmml">d</mi><mrow id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.cmml"><mi id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.2" mathbackground="#FFF5EB" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.2.cmml">a</mi><mo id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.3" mathbackground="#FFF5EB" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.3.cmml">n</mi><mo id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1a" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.4" mathbackground="#FFF5EB" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1b"><apply id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.1.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1">subscript</csymbol><apply id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.1.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1">superscript</csymbol><ci id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.2.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.2">𝑂</ci><apply id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3"><times id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.1"></times><ci id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.2.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.2">𝑎</ci><ci id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.3.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.3">𝑛</ci><ci id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.4.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.3.cmml" xref="A3.T11.3.3.3.3.3.1.1.1.1.m1.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1c">O^{anc}_{d}</annotation><annotation encoding="application/x-llamapun" id="A3.T11.3.3.3.3.3.1.1.1.1.m1.1d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>}</span></span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.6.3">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.6.3.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.6.3.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.6.3.1.1.1" style="width:204.9pt;">&lt;/retrieved_info&gt;</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.7.4">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.7.4.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.7.4.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.7.4.1.1.1" style="width:204.9pt;">After examining the information above, justify your decision, in up to 100 words.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.8.5">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.8.5.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.8.5.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.8.5.1.1.1" style="width:204.9pt;">Hints:</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.9.6">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.9.6.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.9.6.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.9.6.1.1.1" style="width:204.9pt;">1. Use simple keywords as queries if no information is retrieved.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.10.7">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.10.7.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.10.7.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.10.7.1.1.1" style="width:204.9pt;">2. You can take one step at a time, subdivide the original question, and search for information on the sub-questions.</span>
</span></span></span>
<span class="ltx_tr" id="A3.T11.3.3.3.3.11.8">
<span class="ltx_td ltx_align_justify ltx_align_top" id="A3.T11.3.3.3.3.11.8.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T11.3.3.3.3.11.8.1.1">
<span class="ltx_p" id="A3.T11.3.3.3.3.11.8.1.1.1" style="width:204.9pt;">Conclude with the query for the paper abstracts using the format: "&lt;query&gt; Query Here &lt;/query&gt;".</span>
</span></span></span>
</span>
</span></span></span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 11: </span>Prompt for Self-Reflect Query Proposer <math alttext="P^{reflect}_{\theta}" class="ltx_Math" display="inline" id="A3.T11.5.m1.1"><semantics id="A3.T11.5.m1.1b"><msubsup id="A3.T11.5.m1.1.1" xref="A3.T11.5.m1.1.1.cmml"><mi id="A3.T11.5.m1.1.1.2.2" xref="A3.T11.5.m1.1.1.2.2.cmml">P</mi><mi id="A3.T11.5.m1.1.1.3" xref="A3.T11.5.m1.1.1.3.cmml">θ</mi><mrow id="A3.T11.5.m1.1.1.2.3" xref="A3.T11.5.m1.1.1.2.3.cmml"><mi id="A3.T11.5.m1.1.1.2.3.2" xref="A3.T11.5.m1.1.1.2.3.2.cmml">r</mi><mo id="A3.T11.5.m1.1.1.2.3.1" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.3" xref="A3.T11.5.m1.1.1.2.3.3.cmml">e</mi><mo id="A3.T11.5.m1.1.1.2.3.1b" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.4" xref="A3.T11.5.m1.1.1.2.3.4.cmml">f</mi><mo id="A3.T11.5.m1.1.1.2.3.1c" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.5" xref="A3.T11.5.m1.1.1.2.3.5.cmml">l</mi><mo id="A3.T11.5.m1.1.1.2.3.1d" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.6" xref="A3.T11.5.m1.1.1.2.3.6.cmml">e</mi><mo id="A3.T11.5.m1.1.1.2.3.1e" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.7" xref="A3.T11.5.m1.1.1.2.3.7.cmml">c</mi><mo id="A3.T11.5.m1.1.1.2.3.1f" xref="A3.T11.5.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.T11.5.m1.1.1.2.3.8" xref="A3.T11.5.m1.1.1.2.3.8.cmml">t</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="A3.T11.5.m1.1c"><apply id="A3.T11.5.m1.1.1.cmml" xref="A3.T11.5.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.5.m1.1.1.1.cmml" xref="A3.T11.5.m1.1.1">subscript</csymbol><apply id="A3.T11.5.m1.1.1.2.cmml" xref="A3.T11.5.m1.1.1"><csymbol cd="ambiguous" id="A3.T11.5.m1.1.1.2.1.cmml" xref="A3.T11.5.m1.1.1">superscript</csymbol><ci id="A3.T11.5.m1.1.1.2.2.cmml" xref="A3.T11.5.m1.1.1.2.2">𝑃</ci><apply id="A3.T11.5.m1.1.1.2.3.cmml" xref="A3.T11.5.m1.1.1.2.3"><times id="A3.T11.5.m1.1.1.2.3.1.cmml" xref="A3.T11.5.m1.1.1.2.3.1"></times><ci id="A3.T11.5.m1.1.1.2.3.2.cmml" xref="A3.T11.5.m1.1.1.2.3.2">𝑟</ci><ci id="A3.T11.5.m1.1.1.2.3.3.cmml" xref="A3.T11.5.m1.1.1.2.3.3">𝑒</ci><ci id="A3.T11.5.m1.1.1.2.3.4.cmml" xref="A3.T11.5.m1.1.1.2.3.4">𝑓</ci><ci id="A3.T11.5.m1.1.1.2.3.5.cmml" xref="A3.T11.5.m1.1.1.2.3.5">𝑙</ci><ci id="A3.T11.5.m1.1.1.2.3.6.cmml" xref="A3.T11.5.m1.1.1.2.3.6">𝑒</ci><ci id="A3.T11.5.m1.1.1.2.3.7.cmml" xref="A3.T11.5.m1.1.1.2.3.7">𝑐</ci><ci id="A3.T11.5.m1.1.1.2.3.8.cmml" xref="A3.T11.5.m1.1.1.2.3.8">𝑡</ci></apply></apply><ci id="A3.T11.5.m1.1.1.3.cmml" xref="A3.T11.5.m1.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.T11.5.m1.1d">P^{reflect}_{\theta}</annotation><annotation encoding="application/x-llamapun" id="A3.T11.5.m1.1e">italic_P start_POSTSUPERSCRIPT italic_r italic_e italic_f italic_l italic_e italic_c italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math>.</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg2.2.1.1">Algorithm 2</span> </span> The Self-Reflection Algorithm.</figcaption>
<div class="ltx_listing ltx_listing" id="alg2.3">
<div class="ltx_listingline" id="algx2.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="algx2.l1.1">Input:</span> question <math alttext="Q" class="ltx_Math" display="inline" id="algx2.l1.m1.1"><semantics id="algx2.l1.m1.1a"><mi id="algx2.l1.m1.1.1" xref="algx2.l1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m1.1b"><ci id="algx2.l1.m1.1.1.cmml" xref="algx2.l1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m1.1d">italic_Q</annotation></semantics></math>, self-reflect query proposer <math alttext="P_{\theta}^{reflect}" class="ltx_Math" display="inline" id="algx2.l1.m2.1"><semantics id="algx2.l1.m2.1a"><msubsup id="algx2.l1.m2.1.1" xref="algx2.l1.m2.1.1.cmml"><mi id="algx2.l1.m2.1.1.2.2" xref="algx2.l1.m2.1.1.2.2.cmml">P</mi><mi id="algx2.l1.m2.1.1.2.3" xref="algx2.l1.m2.1.1.2.3.cmml">θ</mi><mrow id="algx2.l1.m2.1.1.3" xref="algx2.l1.m2.1.1.3.cmml"><mi id="algx2.l1.m2.1.1.3.2" xref="algx2.l1.m2.1.1.3.2.cmml">r</mi><mo id="algx2.l1.m2.1.1.3.1" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.3" xref="algx2.l1.m2.1.1.3.3.cmml">e</mi><mo id="algx2.l1.m2.1.1.3.1a" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.4" xref="algx2.l1.m2.1.1.3.4.cmml">f</mi><mo id="algx2.l1.m2.1.1.3.1b" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.5" xref="algx2.l1.m2.1.1.3.5.cmml">l</mi><mo id="algx2.l1.m2.1.1.3.1c" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.6" xref="algx2.l1.m2.1.1.3.6.cmml">e</mi><mo id="algx2.l1.m2.1.1.3.1d" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.7" xref="algx2.l1.m2.1.1.3.7.cmml">c</mi><mo id="algx2.l1.m2.1.1.3.1e" xref="algx2.l1.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m2.1.1.3.8" xref="algx2.l1.m2.1.1.3.8.cmml">t</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx2.l1.m2.1b"><apply id="algx2.l1.m2.1.1.cmml" xref="algx2.l1.m2.1.1"><csymbol cd="ambiguous" id="algx2.l1.m2.1.1.1.cmml" xref="algx2.l1.m2.1.1">superscript</csymbol><apply id="algx2.l1.m2.1.1.2.cmml" xref="algx2.l1.m2.1.1"><csymbol cd="ambiguous" id="algx2.l1.m2.1.1.2.1.cmml" xref="algx2.l1.m2.1.1">subscript</csymbol><ci id="algx2.l1.m2.1.1.2.2.cmml" xref="algx2.l1.m2.1.1.2.2">𝑃</ci><ci id="algx2.l1.m2.1.1.2.3.cmml" xref="algx2.l1.m2.1.1.2.3">𝜃</ci></apply><apply id="algx2.l1.m2.1.1.3.cmml" xref="algx2.l1.m2.1.1.3"><times id="algx2.l1.m2.1.1.3.1.cmml" xref="algx2.l1.m2.1.1.3.1"></times><ci id="algx2.l1.m2.1.1.3.2.cmml" xref="algx2.l1.m2.1.1.3.2">𝑟</ci><ci id="algx2.l1.m2.1.1.3.3.cmml" xref="algx2.l1.m2.1.1.3.3">𝑒</ci><ci id="algx2.l1.m2.1.1.3.4.cmml" xref="algx2.l1.m2.1.1.3.4">𝑓</ci><ci id="algx2.l1.m2.1.1.3.5.cmml" xref="algx2.l1.m2.1.1.3.5">𝑙</ci><ci id="algx2.l1.m2.1.1.3.6.cmml" xref="algx2.l1.m2.1.1.3.6">𝑒</ci><ci id="algx2.l1.m2.1.1.3.7.cmml" xref="algx2.l1.m2.1.1.3.7">𝑐</ci><ci id="algx2.l1.m2.1.1.3.8.cmml" xref="algx2.l1.m2.1.1.3.8">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m2.1c">P_{\theta}^{reflect}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m2.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_r italic_e italic_f italic_l italic_e italic_c italic_t end_POSTSUPERSCRIPT</annotation></semantics></math>, evaluator <math alttext="P_{\theta}^{eval}" class="ltx_Math" display="inline" id="algx2.l1.m3.1"><semantics id="algx2.l1.m3.1a"><msubsup id="algx2.l1.m3.1.1" xref="algx2.l1.m3.1.1.cmml"><mi id="algx2.l1.m3.1.1.2.2" xref="algx2.l1.m3.1.1.2.2.cmml">P</mi><mi id="algx2.l1.m3.1.1.2.3" xref="algx2.l1.m3.1.1.2.3.cmml">θ</mi><mrow id="algx2.l1.m3.1.1.3" xref="algx2.l1.m3.1.1.3.cmml"><mi id="algx2.l1.m3.1.1.3.2" xref="algx2.l1.m3.1.1.3.2.cmml">e</mi><mo id="algx2.l1.m3.1.1.3.1" xref="algx2.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m3.1.1.3.3" xref="algx2.l1.m3.1.1.3.3.cmml">v</mi><mo id="algx2.l1.m3.1.1.3.1a" xref="algx2.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m3.1.1.3.4" xref="algx2.l1.m3.1.1.3.4.cmml">a</mi><mo id="algx2.l1.m3.1.1.3.1b" xref="algx2.l1.m3.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m3.1.1.3.5" xref="algx2.l1.m3.1.1.3.5.cmml">l</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx2.l1.m3.1b"><apply id="algx2.l1.m3.1.1.cmml" xref="algx2.l1.m3.1.1"><csymbol cd="ambiguous" id="algx2.l1.m3.1.1.1.cmml" xref="algx2.l1.m3.1.1">superscript</csymbol><apply id="algx2.l1.m3.1.1.2.cmml" xref="algx2.l1.m3.1.1"><csymbol cd="ambiguous" id="algx2.l1.m3.1.1.2.1.cmml" xref="algx2.l1.m3.1.1">subscript</csymbol><ci id="algx2.l1.m3.1.1.2.2.cmml" xref="algx2.l1.m3.1.1.2.2">𝑃</ci><ci id="algx2.l1.m3.1.1.2.3.cmml" xref="algx2.l1.m3.1.1.2.3">𝜃</ci></apply><apply id="algx2.l1.m3.1.1.3.cmml" xref="algx2.l1.m3.1.1.3"><times id="algx2.l1.m3.1.1.3.1.cmml" xref="algx2.l1.m3.1.1.3.1"></times><ci id="algx2.l1.m3.1.1.3.2.cmml" xref="algx2.l1.m3.1.1.3.2">𝑒</ci><ci id="algx2.l1.m3.1.1.3.3.cmml" xref="algx2.l1.m3.1.1.3.3">𝑣</ci><ci id="algx2.l1.m3.1.1.3.4.cmml" xref="algx2.l1.m3.1.1.3.4">𝑎</ci><ci id="algx2.l1.m3.1.1.3.5.cmml" xref="algx2.l1.m3.1.1.3.5">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m3.1c">P_{\theta}^{eval}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m3.1d">italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>, max_simluation number <math alttext="Sim" class="ltx_Math" display="inline" id="algx2.l1.m4.1"><semantics id="algx2.l1.m4.1a"><mrow id="algx2.l1.m4.1.1" xref="algx2.l1.m4.1.1.cmml"><mi id="algx2.l1.m4.1.1.2" xref="algx2.l1.m4.1.1.2.cmml">S</mi><mo id="algx2.l1.m4.1.1.1" xref="algx2.l1.m4.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m4.1.1.3" xref="algx2.l1.m4.1.1.3.cmml">i</mi><mo id="algx2.l1.m4.1.1.1a" xref="algx2.l1.m4.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m4.1.1.4" xref="algx2.l1.m4.1.1.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="algx2.l1.m4.1b"><apply id="algx2.l1.m4.1.1.cmml" xref="algx2.l1.m4.1.1"><times id="algx2.l1.m4.1.1.1.cmml" xref="algx2.l1.m4.1.1.1"></times><ci id="algx2.l1.m4.1.1.2.cmml" xref="algx2.l1.m4.1.1.2">𝑆</ci><ci id="algx2.l1.m4.1.1.3.cmml" xref="algx2.l1.m4.1.1.3">𝑖</ci><ci id="algx2.l1.m4.1.1.4.cmml" xref="algx2.l1.m4.1.1.4">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m4.1c">Sim</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m4.1d">italic_S italic_i italic_m</annotation></semantics></math>, max_branch_number <math alttext="b" class="ltx_Math" display="inline" id="algx2.l1.m5.1"><semantics id="algx2.l1.m5.1a"><mi id="algx2.l1.m5.1.1" xref="algx2.l1.m5.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m5.1b"><ci id="algx2.l1.m5.1.1.cmml" xref="algx2.l1.m5.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m5.1c">b</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m5.1d">italic_b</annotation></semantics></math>, max_depth <math alttext="Depth" class="ltx_Math" display="inline" id="algx2.l1.m6.1"><semantics id="algx2.l1.m6.1a"><mrow id="algx2.l1.m6.1.1" xref="algx2.l1.m6.1.1.cmml"><mi id="algx2.l1.m6.1.1.2" xref="algx2.l1.m6.1.1.2.cmml">D</mi><mo id="algx2.l1.m6.1.1.1" xref="algx2.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m6.1.1.3" xref="algx2.l1.m6.1.1.3.cmml">e</mi><mo id="algx2.l1.m6.1.1.1a" xref="algx2.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m6.1.1.4" xref="algx2.l1.m6.1.1.4.cmml">p</mi><mo id="algx2.l1.m6.1.1.1b" xref="algx2.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m6.1.1.5" xref="algx2.l1.m6.1.1.5.cmml">t</mi><mo id="algx2.l1.m6.1.1.1c" xref="algx2.l1.m6.1.1.1.cmml">⁢</mo><mi id="algx2.l1.m6.1.1.6" xref="algx2.l1.m6.1.1.6.cmml">h</mi></mrow><annotation-xml encoding="MathML-Content" id="algx2.l1.m6.1b"><apply id="algx2.l1.m6.1.1.cmml" xref="algx2.l1.m6.1.1"><times id="algx2.l1.m6.1.1.1.cmml" xref="algx2.l1.m6.1.1.1"></times><ci id="algx2.l1.m6.1.1.2.cmml" xref="algx2.l1.m6.1.1.2">𝐷</ci><ci id="algx2.l1.m6.1.1.3.cmml" xref="algx2.l1.m6.1.1.3">𝑒</ci><ci id="algx2.l1.m6.1.1.4.cmml" xref="algx2.l1.m6.1.1.4">𝑝</ci><ci id="algx2.l1.m6.1.1.5.cmml" xref="algx2.l1.m6.1.1.5">𝑡</ci><ci id="algx2.l1.m6.1.1.6.cmml" xref="algx2.l1.m6.1.1.6">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m6.1c">Depth</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m6.1d">italic_D italic_e italic_p italic_t italic_h</annotation></semantics></math>, BM25_retriever <math alttext="\mathcal{R}_{bm25}" class="ltx_Math" display="inline" id="algx2.l1.m7.1"><semantics id="algx2.l1.m7.1a"><msub id="algx2.l1.m7.1.1" xref="algx2.l1.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l1.m7.1.1.2" xref="algx2.l1.m7.1.1.2.cmml">ℛ</mi><mrow id="algx2.l1.m7.1.1.3" xref="algx2.l1.m7.1.1.3.cmml"><mi id="algx2.l1.m7.1.1.3.2" xref="algx2.l1.m7.1.1.3.2.cmml">b</mi><mo id="algx2.l1.m7.1.1.3.1" xref="algx2.l1.m7.1.1.3.1.cmml">⁢</mo><mi id="algx2.l1.m7.1.1.3.3" xref="algx2.l1.m7.1.1.3.3.cmml">m</mi><mo id="algx2.l1.m7.1.1.3.1a" xref="algx2.l1.m7.1.1.3.1.cmml">⁢</mo><mn id="algx2.l1.m7.1.1.3.4" xref="algx2.l1.m7.1.1.3.4.cmml">25</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l1.m7.1b"><apply id="algx2.l1.m7.1.1.cmml" xref="algx2.l1.m7.1.1"><csymbol cd="ambiguous" id="algx2.l1.m7.1.1.1.cmml" xref="algx2.l1.m7.1.1">subscript</csymbol><ci id="algx2.l1.m7.1.1.2.cmml" xref="algx2.l1.m7.1.1.2">ℛ</ci><apply id="algx2.l1.m7.1.1.3.cmml" xref="algx2.l1.m7.1.1.3"><times id="algx2.l1.m7.1.1.3.1.cmml" xref="algx2.l1.m7.1.1.3.1"></times><ci id="algx2.l1.m7.1.1.3.2.cmml" xref="algx2.l1.m7.1.1.3.2">𝑏</ci><ci id="algx2.l1.m7.1.1.3.3.cmml" xref="algx2.l1.m7.1.1.3.3">𝑚</ci><cn id="algx2.l1.m7.1.1.3.4.cmml" type="integer" xref="algx2.l1.m7.1.1.3.4">25</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m7.1c">\mathcal{R}_{bm25}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m7.1d">caligraphic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="algx2.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span><math alttext="T_{Q}\leftarrow\text{Initialize\_tree}(Q)" class="ltx_Math" display="inline" id="algx2.l2.m1.1"><semantics id="algx2.l2.m1.1a"><mrow id="algx2.l2.m1.1.2" xref="algx2.l2.m1.1.2.cmml"><msub id="algx2.l2.m1.1.2.2" xref="algx2.l2.m1.1.2.2.cmml"><mi id="algx2.l2.m1.1.2.2.2" xref="algx2.l2.m1.1.2.2.2.cmml">T</mi><mi id="algx2.l2.m1.1.2.2.3" xref="algx2.l2.m1.1.2.2.3.cmml">Q</mi></msub><mo id="algx2.l2.m1.1.2.1" stretchy="false" xref="algx2.l2.m1.1.2.1.cmml">←</mo><mrow id="algx2.l2.m1.1.2.3" xref="algx2.l2.m1.1.2.3.cmml"><mtext id="algx2.l2.m1.1.2.3.2" xref="algx2.l2.m1.1.2.3.2a.cmml">Initialize_tree</mtext><mo id="algx2.l2.m1.1.2.3.1" xref="algx2.l2.m1.1.2.3.1.cmml">⁢</mo><mrow id="algx2.l2.m1.1.2.3.3.2" xref="algx2.l2.m1.1.2.3.cmml"><mo id="algx2.l2.m1.1.2.3.3.2.1" stretchy="false" xref="algx2.l2.m1.1.2.3.cmml">(</mo><mi id="algx2.l2.m1.1.1" xref="algx2.l2.m1.1.1.cmml">Q</mi><mo id="algx2.l2.m1.1.2.3.3.2.2" stretchy="false" xref="algx2.l2.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l2.m1.1b"><apply id="algx2.l2.m1.1.2.cmml" xref="algx2.l2.m1.1.2"><ci id="algx2.l2.m1.1.2.1.cmml" xref="algx2.l2.m1.1.2.1">←</ci><apply id="algx2.l2.m1.1.2.2.cmml" xref="algx2.l2.m1.1.2.2"><csymbol cd="ambiguous" id="algx2.l2.m1.1.2.2.1.cmml" xref="algx2.l2.m1.1.2.2">subscript</csymbol><ci id="algx2.l2.m1.1.2.2.2.cmml" xref="algx2.l2.m1.1.2.2.2">𝑇</ci><ci id="algx2.l2.m1.1.2.2.3.cmml" xref="algx2.l2.m1.1.2.2.3">𝑄</ci></apply><apply id="algx2.l2.m1.1.2.3.cmml" xref="algx2.l2.m1.1.2.3"><times id="algx2.l2.m1.1.2.3.1.cmml" xref="algx2.l2.m1.1.2.3.1"></times><ci id="algx2.l2.m1.1.2.3.2a.cmml" xref="algx2.l2.m1.1.2.3.2"><mtext id="algx2.l2.m1.1.2.3.2.cmml" xref="algx2.l2.m1.1.2.3.2">Initialize_tree</mtext></ci><ci id="algx2.l2.m1.1.1.cmml" xref="algx2.l2.m1.1.1">𝑄</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l2.m1.1c">T_{Q}\leftarrow\text{Initialize\_tree}(Q)</annotation><annotation encoding="application/x-llamapun" id="algx2.l2.m1.1d">italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT ← Initialize_tree ( italic_Q )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span><span class="ltx_text ltx_font_bold" id="algx2.l3.1">for</span> <math alttext="i" class="ltx_Math" display="inline" id="algx2.l3.m1.1"><semantics id="algx2.l3.m1.1a"><mi id="algx2.l3.m1.1.1" xref="algx2.l3.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="algx2.l3.m1.1b"><ci id="algx2.l3.m1.1.1.cmml" xref="algx2.l3.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l3.m1.1c">i</annotation><annotation encoding="application/x-llamapun" id="algx2.l3.m1.1d">italic_i</annotation></semantics></math> in range(<math alttext="Sim" class="ltx_Math" display="inline" id="algx2.l3.m2.1"><semantics id="algx2.l3.m2.1a"><mrow id="algx2.l3.m2.1.1" xref="algx2.l3.m2.1.1.cmml"><mi id="algx2.l3.m2.1.1.2" xref="algx2.l3.m2.1.1.2.cmml">S</mi><mo id="algx2.l3.m2.1.1.1" xref="algx2.l3.m2.1.1.1.cmml">⁢</mo><mi id="algx2.l3.m2.1.1.3" xref="algx2.l3.m2.1.1.3.cmml">i</mi><mo id="algx2.l3.m2.1.1.1a" xref="algx2.l3.m2.1.1.1.cmml">⁢</mo><mi id="algx2.l3.m2.1.1.4" xref="algx2.l3.m2.1.1.4.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="algx2.l3.m2.1b"><apply id="algx2.l3.m2.1.1.cmml" xref="algx2.l3.m2.1.1"><times id="algx2.l3.m2.1.1.1.cmml" xref="algx2.l3.m2.1.1.1"></times><ci id="algx2.l3.m2.1.1.2.cmml" xref="algx2.l3.m2.1.1.2">𝑆</ci><ci id="algx2.l3.m2.1.1.3.cmml" xref="algx2.l3.m2.1.1.3">𝑖</ci><ci id="algx2.l3.m2.1.1.4.cmml" xref="algx2.l3.m2.1.1.4">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l3.m2.1c">Sim</annotation><annotation encoding="application/x-llamapun" id="algx2.l3.m2.1d">italic_S italic_i italic_m</annotation></semantics></math>) <span class="ltx_text ltx_font_bold" id="algx2.l3.2">do</span>
</div>
<div class="ltx_listingline" id="algx2.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <math alttext="C\leftarrow\text{root}(T_{q})" class="ltx_Math" display="inline" id="algx2.l4.m1.1"><semantics id="algx2.l4.m1.1a"><mrow id="algx2.l4.m1.1.1" xref="algx2.l4.m1.1.1.cmml"><mi id="algx2.l4.m1.1.1.3" xref="algx2.l4.m1.1.1.3.cmml">C</mi><mo id="algx2.l4.m1.1.1.2" stretchy="false" xref="algx2.l4.m1.1.1.2.cmml">←</mo><mrow id="algx2.l4.m1.1.1.1" xref="algx2.l4.m1.1.1.1.cmml"><mtext id="algx2.l4.m1.1.1.1.3" xref="algx2.l4.m1.1.1.1.3a.cmml">root</mtext><mo id="algx2.l4.m1.1.1.1.2" xref="algx2.l4.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l4.m1.1.1.1.1.1" xref="algx2.l4.m1.1.1.1.1.1.1.cmml"><mo id="algx2.l4.m1.1.1.1.1.1.2" stretchy="false" xref="algx2.l4.m1.1.1.1.1.1.1.cmml">(</mo><msub id="algx2.l4.m1.1.1.1.1.1.1" xref="algx2.l4.m1.1.1.1.1.1.1.cmml"><mi id="algx2.l4.m1.1.1.1.1.1.1.2" xref="algx2.l4.m1.1.1.1.1.1.1.2.cmml">T</mi><mi id="algx2.l4.m1.1.1.1.1.1.1.3" xref="algx2.l4.m1.1.1.1.1.1.1.3.cmml">q</mi></msub><mo id="algx2.l4.m1.1.1.1.1.1.3" stretchy="false" xref="algx2.l4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l4.m1.1b"><apply id="algx2.l4.m1.1.1.cmml" xref="algx2.l4.m1.1.1"><ci id="algx2.l4.m1.1.1.2.cmml" xref="algx2.l4.m1.1.1.2">←</ci><ci id="algx2.l4.m1.1.1.3.cmml" xref="algx2.l4.m1.1.1.3">𝐶</ci><apply id="algx2.l4.m1.1.1.1.cmml" xref="algx2.l4.m1.1.1.1"><times id="algx2.l4.m1.1.1.1.2.cmml" xref="algx2.l4.m1.1.1.1.2"></times><ci id="algx2.l4.m1.1.1.1.3a.cmml" xref="algx2.l4.m1.1.1.1.3"><mtext id="algx2.l4.m1.1.1.1.3.cmml" xref="algx2.l4.m1.1.1.1.3">root</mtext></ci><apply id="algx2.l4.m1.1.1.1.1.1.1.cmml" xref="algx2.l4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l4.m1.1.1.1.1.1.1.1.cmml" xref="algx2.l4.m1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l4.m1.1.1.1.1.1.1.2.cmml" xref="algx2.l4.m1.1.1.1.1.1.1.2">𝑇</ci><ci id="algx2.l4.m1.1.1.1.1.1.1.3.cmml" xref="algx2.l4.m1.1.1.1.1.1.1.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l4.m1.1c">C\leftarrow\text{root}(T_{q})</annotation><annotation encoding="application/x-llamapun" id="algx2.l4.m1.1d">italic_C ← root ( italic_T start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>     <span class="ltx_text ltx_font_bold ltx_font_italic" id="algx2.l5.1">————Expansion &amp; Evaluation————</span>
</div>
<div class="ltx_listingline" id="algx2.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <math alttext="O^{anc}_{q}\leftarrow\bigcup_{k\in\text{ancestors}(C)}A_{k}:\text{query %
proposals from all $C$'s ancestor nodes}" class="ltx_Math" display="inline" id="algx2.l6.m1.2"><semantics id="algx2.l6.m1.2a"><mrow id="algx2.l6.m1.2.3" xref="algx2.l6.m1.2.3.cmml"><mrow id="algx2.l6.m1.2.3.2" xref="algx2.l6.m1.2.3.2.cmml"><msubsup id="algx2.l6.m1.2.3.2.2" xref="algx2.l6.m1.2.3.2.2.cmml"><mi id="algx2.l6.m1.2.3.2.2.2.2" xref="algx2.l6.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx2.l6.m1.2.3.2.2.3" xref="algx2.l6.m1.2.3.2.2.3.cmml">q</mi><mrow id="algx2.l6.m1.2.3.2.2.2.3" xref="algx2.l6.m1.2.3.2.2.2.3.cmml"><mi id="algx2.l6.m1.2.3.2.2.2.3.2" xref="algx2.l6.m1.2.3.2.2.2.3.2.cmml">a</mi><mo id="algx2.l6.m1.2.3.2.2.2.3.1" xref="algx2.l6.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l6.m1.2.3.2.2.2.3.3" xref="algx2.l6.m1.2.3.2.2.2.3.3.cmml">n</mi><mo id="algx2.l6.m1.2.3.2.2.2.3.1a" xref="algx2.l6.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l6.m1.2.3.2.2.2.3.4" xref="algx2.l6.m1.2.3.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx2.l6.m1.2.3.2.1" rspace="0.111em" stretchy="false" xref="algx2.l6.m1.2.3.2.1.cmml">←</mo><mrow id="algx2.l6.m1.2.3.2.3" xref="algx2.l6.m1.2.3.2.3.cmml"><msub id="algx2.l6.m1.2.3.2.3.1" xref="algx2.l6.m1.2.3.2.3.1.cmml"><mo id="algx2.l6.m1.2.3.2.3.1.2" xref="algx2.l6.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx2.l6.m1.2.2.1" xref="algx2.l6.m1.2.2.1.cmml"><mi id="algx2.l6.m1.2.2.1.3" xref="algx2.l6.m1.2.2.1.3.cmml">k</mi><mo id="algx2.l6.m1.2.2.1.2" xref="algx2.l6.m1.2.2.1.2.cmml">∈</mo><mrow id="algx2.l6.m1.2.2.1.4" xref="algx2.l6.m1.2.2.1.4.cmml"><mtext id="algx2.l6.m1.2.2.1.4.2" xref="algx2.l6.m1.2.2.1.4.2a.cmml">ancestors</mtext><mo id="algx2.l6.m1.2.2.1.4.1" xref="algx2.l6.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx2.l6.m1.2.2.1.4.3.2" xref="algx2.l6.m1.2.2.1.4.cmml"><mo id="algx2.l6.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx2.l6.m1.2.2.1.4.cmml">(</mo><mi id="algx2.l6.m1.2.2.1.1" xref="algx2.l6.m1.2.2.1.1.cmml">C</mi><mo id="algx2.l6.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx2.l6.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx2.l6.m1.2.3.2.3.2" xref="algx2.l6.m1.2.3.2.3.2.cmml"><mi id="algx2.l6.m1.2.3.2.3.2.2" xref="algx2.l6.m1.2.3.2.3.2.2.cmml">A</mi><mi id="algx2.l6.m1.2.3.2.3.2.3" xref="algx2.l6.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx2.l6.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx2.l6.m1.2.3.1.cmml">:</mo><mrow id="algx2.l6.m1.1.1.1" xref="algx2.l6.m1.1.1.1c.cmml"><mtext id="algx2.l6.m1.1.1.1a" xref="algx2.l6.m1.1.1.1c.cmml">query proposals from all </mtext><mi id="algx2.l6.m1.1.1.1.m1.1.1" xref="algx2.l6.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx2.l6.m1.1.1.1b" xref="algx2.l6.m1.1.1.1c.cmml">’s ancestor nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l6.m1.2b"><apply id="algx2.l6.m1.2.3.cmml" xref="algx2.l6.m1.2.3"><ci id="algx2.l6.m1.2.3.1.cmml" xref="algx2.l6.m1.2.3.1">:</ci><apply id="algx2.l6.m1.2.3.2.cmml" xref="algx2.l6.m1.2.3.2"><ci id="algx2.l6.m1.2.3.2.1.cmml" xref="algx2.l6.m1.2.3.2.1">←</ci><apply id="algx2.l6.m1.2.3.2.2.cmml" xref="algx2.l6.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx2.l6.m1.2.3.2.2.1.cmml" xref="algx2.l6.m1.2.3.2.2">subscript</csymbol><apply id="algx2.l6.m1.2.3.2.2.2.cmml" xref="algx2.l6.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx2.l6.m1.2.3.2.2.2.1.cmml" xref="algx2.l6.m1.2.3.2.2">superscript</csymbol><ci id="algx2.l6.m1.2.3.2.2.2.2.cmml" xref="algx2.l6.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx2.l6.m1.2.3.2.2.2.3.cmml" xref="algx2.l6.m1.2.3.2.2.2.3"><times id="algx2.l6.m1.2.3.2.2.2.3.1.cmml" xref="algx2.l6.m1.2.3.2.2.2.3.1"></times><ci id="algx2.l6.m1.2.3.2.2.2.3.2.cmml" xref="algx2.l6.m1.2.3.2.2.2.3.2">𝑎</ci><ci id="algx2.l6.m1.2.3.2.2.2.3.3.cmml" xref="algx2.l6.m1.2.3.2.2.2.3.3">𝑛</ci><ci id="algx2.l6.m1.2.3.2.2.2.3.4.cmml" xref="algx2.l6.m1.2.3.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx2.l6.m1.2.3.2.2.3.cmml" xref="algx2.l6.m1.2.3.2.2.3">𝑞</ci></apply><apply id="algx2.l6.m1.2.3.2.3.cmml" xref="algx2.l6.m1.2.3.2.3"><apply id="algx2.l6.m1.2.3.2.3.1.cmml" xref="algx2.l6.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx2.l6.m1.2.3.2.3.1.1.cmml" xref="algx2.l6.m1.2.3.2.3.1">subscript</csymbol><union id="algx2.l6.m1.2.3.2.3.1.2.cmml" xref="algx2.l6.m1.2.3.2.3.1.2"></union><apply id="algx2.l6.m1.2.2.1.cmml" xref="algx2.l6.m1.2.2.1"><in id="algx2.l6.m1.2.2.1.2.cmml" xref="algx2.l6.m1.2.2.1.2"></in><ci id="algx2.l6.m1.2.2.1.3.cmml" xref="algx2.l6.m1.2.2.1.3">𝑘</ci><apply id="algx2.l6.m1.2.2.1.4.cmml" xref="algx2.l6.m1.2.2.1.4"><times id="algx2.l6.m1.2.2.1.4.1.cmml" xref="algx2.l6.m1.2.2.1.4.1"></times><ci id="algx2.l6.m1.2.2.1.4.2a.cmml" xref="algx2.l6.m1.2.2.1.4.2"><mtext id="algx2.l6.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx2.l6.m1.2.2.1.4.2">ancestors</mtext></ci><ci id="algx2.l6.m1.2.2.1.1.cmml" xref="algx2.l6.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx2.l6.m1.2.3.2.3.2.cmml" xref="algx2.l6.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx2.l6.m1.2.3.2.3.2.1.cmml" xref="algx2.l6.m1.2.3.2.3.2">subscript</csymbol><ci id="algx2.l6.m1.2.3.2.3.2.2.cmml" xref="algx2.l6.m1.2.3.2.3.2.2">𝐴</ci><ci id="algx2.l6.m1.2.3.2.3.2.3.cmml" xref="algx2.l6.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx2.l6.m1.1.1.1c.cmml" xref="algx2.l6.m1.1.1.1"><mrow id="algx2.l6.m1.1.1.1.cmml" xref="algx2.l6.m1.1.1.1"><mtext id="algx2.l6.m1.1.1.1a.cmml" xref="algx2.l6.m1.1.1.1">query proposals from all </mtext><mi id="algx2.l6.m1.1.1.1.m1.1.1.cmml" xref="algx2.l6.m1.1.1.1.m1.1.1">C</mi><mtext id="algx2.l6.m1.1.1.1b.cmml" xref="algx2.l6.m1.1.1.1">’s ancestor nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l6.m1.2c">O^{anc}_{q}\leftarrow\bigcup_{k\in\text{ancestors}(C)}A_{k}:\text{query %
proposals from all $C$'s ancestor nodes}</annotation><annotation encoding="application/x-llamapun" id="algx2.l6.m1.2d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ ancestors ( italic_C ) end_POSTSUBSCRIPT italic_A start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : query proposals from all italic_C ’s ancestor nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>     <math alttext="O^{anc}_{d}\leftarrow\bigcup_{k\in\text{ancestors}(C)}D_{k}:\text{retrieved %
documents from all $C$'s ancestor nodes}" class="ltx_Math" display="inline" id="algx2.l7.m1.2"><semantics id="algx2.l7.m1.2a"><mrow id="algx2.l7.m1.2.3" xref="algx2.l7.m1.2.3.cmml"><mrow id="algx2.l7.m1.2.3.2" xref="algx2.l7.m1.2.3.2.cmml"><msubsup id="algx2.l7.m1.2.3.2.2" xref="algx2.l7.m1.2.3.2.2.cmml"><mi id="algx2.l7.m1.2.3.2.2.2.2" xref="algx2.l7.m1.2.3.2.2.2.2.cmml">O</mi><mi id="algx2.l7.m1.2.3.2.2.3" xref="algx2.l7.m1.2.3.2.2.3.cmml">d</mi><mrow id="algx2.l7.m1.2.3.2.2.2.3" xref="algx2.l7.m1.2.3.2.2.2.3.cmml"><mi id="algx2.l7.m1.2.3.2.2.2.3.2" xref="algx2.l7.m1.2.3.2.2.2.3.2.cmml">a</mi><mo id="algx2.l7.m1.2.3.2.2.2.3.1" xref="algx2.l7.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l7.m1.2.3.2.2.2.3.3" xref="algx2.l7.m1.2.3.2.2.2.3.3.cmml">n</mi><mo id="algx2.l7.m1.2.3.2.2.2.3.1a" xref="algx2.l7.m1.2.3.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l7.m1.2.3.2.2.2.3.4" xref="algx2.l7.m1.2.3.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx2.l7.m1.2.3.2.1" rspace="0.111em" stretchy="false" xref="algx2.l7.m1.2.3.2.1.cmml">←</mo><mrow id="algx2.l7.m1.2.3.2.3" xref="algx2.l7.m1.2.3.2.3.cmml"><msub id="algx2.l7.m1.2.3.2.3.1" xref="algx2.l7.m1.2.3.2.3.1.cmml"><mo id="algx2.l7.m1.2.3.2.3.1.2" xref="algx2.l7.m1.2.3.2.3.1.2.cmml">⋃</mo><mrow id="algx2.l7.m1.2.2.1" xref="algx2.l7.m1.2.2.1.cmml"><mi id="algx2.l7.m1.2.2.1.3" xref="algx2.l7.m1.2.2.1.3.cmml">k</mi><mo id="algx2.l7.m1.2.2.1.2" xref="algx2.l7.m1.2.2.1.2.cmml">∈</mo><mrow id="algx2.l7.m1.2.2.1.4" xref="algx2.l7.m1.2.2.1.4.cmml"><mtext id="algx2.l7.m1.2.2.1.4.2" xref="algx2.l7.m1.2.2.1.4.2a.cmml">ancestors</mtext><mo id="algx2.l7.m1.2.2.1.4.1" xref="algx2.l7.m1.2.2.1.4.1.cmml">⁢</mo><mrow id="algx2.l7.m1.2.2.1.4.3.2" xref="algx2.l7.m1.2.2.1.4.cmml"><mo id="algx2.l7.m1.2.2.1.4.3.2.1" stretchy="false" xref="algx2.l7.m1.2.2.1.4.cmml">(</mo><mi id="algx2.l7.m1.2.2.1.1" xref="algx2.l7.m1.2.2.1.1.cmml">C</mi><mo id="algx2.l7.m1.2.2.1.4.3.2.2" stretchy="false" xref="algx2.l7.m1.2.2.1.4.cmml">)</mo></mrow></mrow></mrow></msub><msub id="algx2.l7.m1.2.3.2.3.2" xref="algx2.l7.m1.2.3.2.3.2.cmml"><mi id="algx2.l7.m1.2.3.2.3.2.2" xref="algx2.l7.m1.2.3.2.3.2.2.cmml">D</mi><mi id="algx2.l7.m1.2.3.2.3.2.3" xref="algx2.l7.m1.2.3.2.3.2.3.cmml">k</mi></msub></mrow></mrow><mo id="algx2.l7.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="algx2.l7.m1.2.3.1.cmml">:</mo><mrow id="algx2.l7.m1.1.1.1" xref="algx2.l7.m1.1.1.1c.cmml"><mtext id="algx2.l7.m1.1.1.1a" xref="algx2.l7.m1.1.1.1c.cmml">retrieved documents from all </mtext><mi id="algx2.l7.m1.1.1.1.m1.1.1" xref="algx2.l7.m1.1.1.1.m1.1.1.cmml">C</mi><mtext id="algx2.l7.m1.1.1.1b" xref="algx2.l7.m1.1.1.1c.cmml">’s ancestor nodes</mtext></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l7.m1.2b"><apply id="algx2.l7.m1.2.3.cmml" xref="algx2.l7.m1.2.3"><ci id="algx2.l7.m1.2.3.1.cmml" xref="algx2.l7.m1.2.3.1">:</ci><apply id="algx2.l7.m1.2.3.2.cmml" xref="algx2.l7.m1.2.3.2"><ci id="algx2.l7.m1.2.3.2.1.cmml" xref="algx2.l7.m1.2.3.2.1">←</ci><apply id="algx2.l7.m1.2.3.2.2.cmml" xref="algx2.l7.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx2.l7.m1.2.3.2.2.1.cmml" xref="algx2.l7.m1.2.3.2.2">subscript</csymbol><apply id="algx2.l7.m1.2.3.2.2.2.cmml" xref="algx2.l7.m1.2.3.2.2"><csymbol cd="ambiguous" id="algx2.l7.m1.2.3.2.2.2.1.cmml" xref="algx2.l7.m1.2.3.2.2">superscript</csymbol><ci id="algx2.l7.m1.2.3.2.2.2.2.cmml" xref="algx2.l7.m1.2.3.2.2.2.2">𝑂</ci><apply id="algx2.l7.m1.2.3.2.2.2.3.cmml" xref="algx2.l7.m1.2.3.2.2.2.3"><times id="algx2.l7.m1.2.3.2.2.2.3.1.cmml" xref="algx2.l7.m1.2.3.2.2.2.3.1"></times><ci id="algx2.l7.m1.2.3.2.2.2.3.2.cmml" xref="algx2.l7.m1.2.3.2.2.2.3.2">𝑎</ci><ci id="algx2.l7.m1.2.3.2.2.2.3.3.cmml" xref="algx2.l7.m1.2.3.2.2.2.3.3">𝑛</ci><ci id="algx2.l7.m1.2.3.2.2.2.3.4.cmml" xref="algx2.l7.m1.2.3.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx2.l7.m1.2.3.2.2.3.cmml" xref="algx2.l7.m1.2.3.2.2.3">𝑑</ci></apply><apply id="algx2.l7.m1.2.3.2.3.cmml" xref="algx2.l7.m1.2.3.2.3"><apply id="algx2.l7.m1.2.3.2.3.1.cmml" xref="algx2.l7.m1.2.3.2.3.1"><csymbol cd="ambiguous" id="algx2.l7.m1.2.3.2.3.1.1.cmml" xref="algx2.l7.m1.2.3.2.3.1">subscript</csymbol><union id="algx2.l7.m1.2.3.2.3.1.2.cmml" xref="algx2.l7.m1.2.3.2.3.1.2"></union><apply id="algx2.l7.m1.2.2.1.cmml" xref="algx2.l7.m1.2.2.1"><in id="algx2.l7.m1.2.2.1.2.cmml" xref="algx2.l7.m1.2.2.1.2"></in><ci id="algx2.l7.m1.2.2.1.3.cmml" xref="algx2.l7.m1.2.2.1.3">𝑘</ci><apply id="algx2.l7.m1.2.2.1.4.cmml" xref="algx2.l7.m1.2.2.1.4"><times id="algx2.l7.m1.2.2.1.4.1.cmml" xref="algx2.l7.m1.2.2.1.4.1"></times><ci id="algx2.l7.m1.2.2.1.4.2a.cmml" xref="algx2.l7.m1.2.2.1.4.2"><mtext id="algx2.l7.m1.2.2.1.4.2.cmml" mathsize="70%" xref="algx2.l7.m1.2.2.1.4.2">ancestors</mtext></ci><ci id="algx2.l7.m1.2.2.1.1.cmml" xref="algx2.l7.m1.2.2.1.1">𝐶</ci></apply></apply></apply><apply id="algx2.l7.m1.2.3.2.3.2.cmml" xref="algx2.l7.m1.2.3.2.3.2"><csymbol cd="ambiguous" id="algx2.l7.m1.2.3.2.3.2.1.cmml" xref="algx2.l7.m1.2.3.2.3.2">subscript</csymbol><ci id="algx2.l7.m1.2.3.2.3.2.2.cmml" xref="algx2.l7.m1.2.3.2.3.2.2">𝐷</ci><ci id="algx2.l7.m1.2.3.2.3.2.3.cmml" xref="algx2.l7.m1.2.3.2.3.2.3">𝑘</ci></apply></apply></apply><ci id="algx2.l7.m1.1.1.1c.cmml" xref="algx2.l7.m1.1.1.1"><mrow id="algx2.l7.m1.1.1.1.cmml" xref="algx2.l7.m1.1.1.1"><mtext id="algx2.l7.m1.1.1.1a.cmml" xref="algx2.l7.m1.1.1.1">retrieved documents from all </mtext><mi id="algx2.l7.m1.1.1.1.m1.1.1.cmml" xref="algx2.l7.m1.1.1.1.m1.1.1">C</mi><mtext id="algx2.l7.m1.1.1.1b.cmml" xref="algx2.l7.m1.1.1.1">’s ancestor nodes</mtext></mrow></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l7.m1.2c">O^{anc}_{d}\leftarrow\bigcup_{k\in\text{ancestors}(C)}D_{k}:\text{retrieved %
documents from all $C$'s ancestor nodes}</annotation><annotation encoding="application/x-llamapun" id="algx2.l7.m1.2d">italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT ← ⋃ start_POSTSUBSCRIPT italic_k ∈ ancestors ( italic_C ) end_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT : retrieved documents from all italic_C ’s ancestor nodes</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <math alttext="O\leftarrow(O^{anc}_{q},O^{anc}_{d})" class="ltx_Math" display="inline" id="algx2.l8.m1.2"><semantics id="algx2.l8.m1.2a"><mrow id="algx2.l8.m1.2.2" xref="algx2.l8.m1.2.2.cmml"><mi id="algx2.l8.m1.2.2.4" xref="algx2.l8.m1.2.2.4.cmml">O</mi><mo id="algx2.l8.m1.2.2.3" stretchy="false" xref="algx2.l8.m1.2.2.3.cmml">←</mo><mrow id="algx2.l8.m1.2.2.2.2" xref="algx2.l8.m1.2.2.2.3.cmml"><mo id="algx2.l8.m1.2.2.2.2.3" stretchy="false" xref="algx2.l8.m1.2.2.2.3.cmml">(</mo><msubsup id="algx2.l8.m1.1.1.1.1.1" xref="algx2.l8.m1.1.1.1.1.1.cmml"><mi id="algx2.l8.m1.1.1.1.1.1.2.2" xref="algx2.l8.m1.1.1.1.1.1.2.2.cmml">O</mi><mi id="algx2.l8.m1.1.1.1.1.1.3" xref="algx2.l8.m1.1.1.1.1.1.3.cmml">q</mi><mrow id="algx2.l8.m1.1.1.1.1.1.2.3" xref="algx2.l8.m1.1.1.1.1.1.2.3.cmml"><mi id="algx2.l8.m1.1.1.1.1.1.2.3.2" xref="algx2.l8.m1.1.1.1.1.1.2.3.2.cmml">a</mi><mo id="algx2.l8.m1.1.1.1.1.1.2.3.1" xref="algx2.l8.m1.1.1.1.1.1.2.3.1.cmml">⁢</mo><mi id="algx2.l8.m1.1.1.1.1.1.2.3.3" xref="algx2.l8.m1.1.1.1.1.1.2.3.3.cmml">n</mi><mo id="algx2.l8.m1.1.1.1.1.1.2.3.1a" xref="algx2.l8.m1.1.1.1.1.1.2.3.1.cmml">⁢</mo><mi id="algx2.l8.m1.1.1.1.1.1.2.3.4" xref="algx2.l8.m1.1.1.1.1.1.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx2.l8.m1.2.2.2.2.4" xref="algx2.l8.m1.2.2.2.3.cmml">,</mo><msubsup id="algx2.l8.m1.2.2.2.2.2" xref="algx2.l8.m1.2.2.2.2.2.cmml"><mi id="algx2.l8.m1.2.2.2.2.2.2.2" xref="algx2.l8.m1.2.2.2.2.2.2.2.cmml">O</mi><mi id="algx2.l8.m1.2.2.2.2.2.3" xref="algx2.l8.m1.2.2.2.2.2.3.cmml">d</mi><mrow id="algx2.l8.m1.2.2.2.2.2.2.3" xref="algx2.l8.m1.2.2.2.2.2.2.3.cmml"><mi id="algx2.l8.m1.2.2.2.2.2.2.3.2" xref="algx2.l8.m1.2.2.2.2.2.2.3.2.cmml">a</mi><mo id="algx2.l8.m1.2.2.2.2.2.2.3.1" xref="algx2.l8.m1.2.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l8.m1.2.2.2.2.2.2.3.3" xref="algx2.l8.m1.2.2.2.2.2.2.3.3.cmml">n</mi><mo id="algx2.l8.m1.2.2.2.2.2.2.3.1a" xref="algx2.l8.m1.2.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="algx2.l8.m1.2.2.2.2.2.2.3.4" xref="algx2.l8.m1.2.2.2.2.2.2.3.4.cmml">c</mi></mrow></msubsup><mo id="algx2.l8.m1.2.2.2.2.5" stretchy="false" xref="algx2.l8.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l8.m1.2b"><apply id="algx2.l8.m1.2.2.cmml" xref="algx2.l8.m1.2.2"><ci id="algx2.l8.m1.2.2.3.cmml" xref="algx2.l8.m1.2.2.3">←</ci><ci id="algx2.l8.m1.2.2.4.cmml" xref="algx2.l8.m1.2.2.4">𝑂</ci><interval closure="open" id="algx2.l8.m1.2.2.2.3.cmml" xref="algx2.l8.m1.2.2.2.2"><apply id="algx2.l8.m1.1.1.1.1.1.cmml" xref="algx2.l8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l8.m1.1.1.1.1.1.1.cmml" xref="algx2.l8.m1.1.1.1.1.1">subscript</csymbol><apply id="algx2.l8.m1.1.1.1.1.1.2.cmml" xref="algx2.l8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l8.m1.1.1.1.1.1.2.1.cmml" xref="algx2.l8.m1.1.1.1.1.1">superscript</csymbol><ci id="algx2.l8.m1.1.1.1.1.1.2.2.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.2">𝑂</ci><apply id="algx2.l8.m1.1.1.1.1.1.2.3.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.3"><times id="algx2.l8.m1.1.1.1.1.1.2.3.1.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.3.1"></times><ci id="algx2.l8.m1.1.1.1.1.1.2.3.2.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.3.2">𝑎</ci><ci id="algx2.l8.m1.1.1.1.1.1.2.3.3.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.3.3">𝑛</ci><ci id="algx2.l8.m1.1.1.1.1.1.2.3.4.cmml" xref="algx2.l8.m1.1.1.1.1.1.2.3.4">𝑐</ci></apply></apply><ci id="algx2.l8.m1.1.1.1.1.1.3.cmml" xref="algx2.l8.m1.1.1.1.1.1.3">𝑞</ci></apply><apply id="algx2.l8.m1.2.2.2.2.2.cmml" xref="algx2.l8.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="algx2.l8.m1.2.2.2.2.2.1.cmml" xref="algx2.l8.m1.2.2.2.2.2">subscript</csymbol><apply id="algx2.l8.m1.2.2.2.2.2.2.cmml" xref="algx2.l8.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="algx2.l8.m1.2.2.2.2.2.2.1.cmml" xref="algx2.l8.m1.2.2.2.2.2">superscript</csymbol><ci id="algx2.l8.m1.2.2.2.2.2.2.2.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.2">𝑂</ci><apply id="algx2.l8.m1.2.2.2.2.2.2.3.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.3"><times id="algx2.l8.m1.2.2.2.2.2.2.3.1.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.3.1"></times><ci id="algx2.l8.m1.2.2.2.2.2.2.3.2.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.3.2">𝑎</ci><ci id="algx2.l8.m1.2.2.2.2.2.2.3.3.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.3.3">𝑛</ci><ci id="algx2.l8.m1.2.2.2.2.2.2.3.4.cmml" xref="algx2.l8.m1.2.2.2.2.2.2.3.4">𝑐</ci></apply></apply><ci id="algx2.l8.m1.2.2.2.2.2.3.cmml" xref="algx2.l8.m1.2.2.2.2.2.3">𝑑</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l8.m1.2c">O\leftarrow(O^{anc}_{q},O^{anc}_{d})</annotation><annotation encoding="application/x-llamapun" id="algx2.l8.m1.2d">italic_O ← ( italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , italic_O start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <math alttext="A\leftarrow P_{\theta}^{reflect}(O,Q)" class="ltx_Math" display="inline" id="algx2.l9.m1.2"><semantics id="algx2.l9.m1.2a"><mrow id="algx2.l9.m1.2.3" xref="algx2.l9.m1.2.3.cmml"><mi id="algx2.l9.m1.2.3.2" xref="algx2.l9.m1.2.3.2.cmml">A</mi><mo id="algx2.l9.m1.2.3.1" stretchy="false" xref="algx2.l9.m1.2.3.1.cmml">←</mo><mrow id="algx2.l9.m1.2.3.3" xref="algx2.l9.m1.2.3.3.cmml"><msubsup id="algx2.l9.m1.2.3.3.2" xref="algx2.l9.m1.2.3.3.2.cmml"><mi id="algx2.l9.m1.2.3.3.2.2.2" xref="algx2.l9.m1.2.3.3.2.2.2.cmml">P</mi><mi id="algx2.l9.m1.2.3.3.2.2.3" xref="algx2.l9.m1.2.3.3.2.2.3.cmml">θ</mi><mrow id="algx2.l9.m1.2.3.3.2.3" xref="algx2.l9.m1.2.3.3.2.3.cmml"><mi id="algx2.l9.m1.2.3.3.2.3.2" xref="algx2.l9.m1.2.3.3.2.3.2.cmml">r</mi><mo id="algx2.l9.m1.2.3.3.2.3.1" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.3" xref="algx2.l9.m1.2.3.3.2.3.3.cmml">e</mi><mo id="algx2.l9.m1.2.3.3.2.3.1a" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.4" xref="algx2.l9.m1.2.3.3.2.3.4.cmml">f</mi><mo id="algx2.l9.m1.2.3.3.2.3.1b" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.5" xref="algx2.l9.m1.2.3.3.2.3.5.cmml">l</mi><mo id="algx2.l9.m1.2.3.3.2.3.1c" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.6" xref="algx2.l9.m1.2.3.3.2.3.6.cmml">e</mi><mo id="algx2.l9.m1.2.3.3.2.3.1d" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.7" xref="algx2.l9.m1.2.3.3.2.3.7.cmml">c</mi><mo id="algx2.l9.m1.2.3.3.2.3.1e" xref="algx2.l9.m1.2.3.3.2.3.1.cmml">⁢</mo><mi id="algx2.l9.m1.2.3.3.2.3.8" xref="algx2.l9.m1.2.3.3.2.3.8.cmml">t</mi></mrow></msubsup><mo id="algx2.l9.m1.2.3.3.1" xref="algx2.l9.m1.2.3.3.1.cmml">⁢</mo><mrow id="algx2.l9.m1.2.3.3.3.2" xref="algx2.l9.m1.2.3.3.3.1.cmml"><mo id="algx2.l9.m1.2.3.3.3.2.1" stretchy="false" xref="algx2.l9.m1.2.3.3.3.1.cmml">(</mo><mi id="algx2.l9.m1.1.1" xref="algx2.l9.m1.1.1.cmml">O</mi><mo id="algx2.l9.m1.2.3.3.3.2.2" xref="algx2.l9.m1.2.3.3.3.1.cmml">,</mo><mi id="algx2.l9.m1.2.2" xref="algx2.l9.m1.2.2.cmml">Q</mi><mo id="algx2.l9.m1.2.3.3.3.2.3" stretchy="false" xref="algx2.l9.m1.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l9.m1.2b"><apply id="algx2.l9.m1.2.3.cmml" xref="algx2.l9.m1.2.3"><ci id="algx2.l9.m1.2.3.1.cmml" xref="algx2.l9.m1.2.3.1">←</ci><ci id="algx2.l9.m1.2.3.2.cmml" xref="algx2.l9.m1.2.3.2">𝐴</ci><apply id="algx2.l9.m1.2.3.3.cmml" xref="algx2.l9.m1.2.3.3"><times id="algx2.l9.m1.2.3.3.1.cmml" xref="algx2.l9.m1.2.3.3.1"></times><apply id="algx2.l9.m1.2.3.3.2.cmml" xref="algx2.l9.m1.2.3.3.2"><csymbol cd="ambiguous" id="algx2.l9.m1.2.3.3.2.1.cmml" xref="algx2.l9.m1.2.3.3.2">superscript</csymbol><apply id="algx2.l9.m1.2.3.3.2.2.cmml" xref="algx2.l9.m1.2.3.3.2"><csymbol cd="ambiguous" id="algx2.l9.m1.2.3.3.2.2.1.cmml" xref="algx2.l9.m1.2.3.3.2">subscript</csymbol><ci id="algx2.l9.m1.2.3.3.2.2.2.cmml" xref="algx2.l9.m1.2.3.3.2.2.2">𝑃</ci><ci id="algx2.l9.m1.2.3.3.2.2.3.cmml" xref="algx2.l9.m1.2.3.3.2.2.3">𝜃</ci></apply><apply id="algx2.l9.m1.2.3.3.2.3.cmml" xref="algx2.l9.m1.2.3.3.2.3"><times id="algx2.l9.m1.2.3.3.2.3.1.cmml" xref="algx2.l9.m1.2.3.3.2.3.1"></times><ci id="algx2.l9.m1.2.3.3.2.3.2.cmml" xref="algx2.l9.m1.2.3.3.2.3.2">𝑟</ci><ci id="algx2.l9.m1.2.3.3.2.3.3.cmml" xref="algx2.l9.m1.2.3.3.2.3.3">𝑒</ci><ci id="algx2.l9.m1.2.3.3.2.3.4.cmml" xref="algx2.l9.m1.2.3.3.2.3.4">𝑓</ci><ci id="algx2.l9.m1.2.3.3.2.3.5.cmml" xref="algx2.l9.m1.2.3.3.2.3.5">𝑙</ci><ci id="algx2.l9.m1.2.3.3.2.3.6.cmml" xref="algx2.l9.m1.2.3.3.2.3.6">𝑒</ci><ci id="algx2.l9.m1.2.3.3.2.3.7.cmml" xref="algx2.l9.m1.2.3.3.2.3.7">𝑐</ci><ci id="algx2.l9.m1.2.3.3.2.3.8.cmml" xref="algx2.l9.m1.2.3.3.2.3.8">𝑡</ci></apply></apply><interval closure="open" id="algx2.l9.m1.2.3.3.3.1.cmml" xref="algx2.l9.m1.2.3.3.3.2"><ci id="algx2.l9.m1.1.1.cmml" xref="algx2.l9.m1.1.1">𝑂</ci><ci id="algx2.l9.m1.2.2.cmml" xref="algx2.l9.m1.2.2">𝑄</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.m1.2c">A\leftarrow P_{\theta}^{reflect}(O,Q)</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.m1.2d">italic_A ← italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_r italic_e italic_f italic_l italic_e italic_c italic_t end_POSTSUPERSCRIPT ( italic_O , italic_Q )</annotation></semantics></math> <span class="ltx_text" id="algx2.l9.4" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l9.1.m1.1"><semantics id="algx2.l9.1.m1.1a"><mo id="algx2.l9.1.m1.1.1" xref="algx2.l9.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l9.1.m1.1b"><ci id="algx2.l9.1.m1.1.1.cmml" xref="algx2.l9.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.1.m1.1d">▷</annotation></semantics></math> Make new query proposal <math alttext="A" class="ltx_Math" display="inline" id="algx2.l9.2.m2.1"><semantics id="algx2.l9.2.m2.1a"><mi id="algx2.l9.2.m2.1.1" xref="algx2.l9.2.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="algx2.l9.2.m2.1b"><ci id="algx2.l9.2.m2.1.1.cmml" xref="algx2.l9.2.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.2.m2.1c">A</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.2.m2.1d">italic_A</annotation></semantics></math> based on <math alttext="O" class="ltx_Math" display="inline" id="algx2.l9.3.m3.1"><semantics id="algx2.l9.3.m3.1a"><mi id="algx2.l9.3.m3.1.1" xref="algx2.l9.3.m3.1.1.cmml">O</mi><annotation-xml encoding="MathML-Content" id="algx2.l9.3.m3.1b"><ci id="algx2.l9.3.m3.1.1.cmml" xref="algx2.l9.3.m3.1.1">𝑂</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.3.m3.1c">O</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.3.m3.1d">italic_O</annotation></semantics></math> and <math alttext="Q" class="ltx_Math" display="inline" id="algx2.l9.4.m4.1"><semantics id="algx2.l9.4.m4.1a"><mi id="algx2.l9.4.m4.1.1" xref="algx2.l9.4.m4.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx2.l9.4.m4.1b"><ci id="algx2.l9.4.m4.1.1.cmml" xref="algx2.l9.4.m4.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.4.m4.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.4.m4.1d">italic_Q</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx2.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <math alttext="D\leftarrow\mathcal{R}_{bm25}(A)" class="ltx_Math" display="inline" id="algx2.l10.m1.1"><semantics id="algx2.l10.m1.1a"><mrow id="algx2.l10.m1.1.2" xref="algx2.l10.m1.1.2.cmml"><mi id="algx2.l10.m1.1.2.2" xref="algx2.l10.m1.1.2.2.cmml">D</mi><mo id="algx2.l10.m1.1.2.1" stretchy="false" xref="algx2.l10.m1.1.2.1.cmml">←</mo><mrow id="algx2.l10.m1.1.2.3" xref="algx2.l10.m1.1.2.3.cmml"><msub id="algx2.l10.m1.1.2.3.2" xref="algx2.l10.m1.1.2.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l10.m1.1.2.3.2.2" xref="algx2.l10.m1.1.2.3.2.2.cmml">ℛ</mi><mrow id="algx2.l10.m1.1.2.3.2.3" xref="algx2.l10.m1.1.2.3.2.3.cmml"><mi id="algx2.l10.m1.1.2.3.2.3.2" xref="algx2.l10.m1.1.2.3.2.3.2.cmml">b</mi><mo id="algx2.l10.m1.1.2.3.2.3.1" xref="algx2.l10.m1.1.2.3.2.3.1.cmml">⁢</mo><mi id="algx2.l10.m1.1.2.3.2.3.3" xref="algx2.l10.m1.1.2.3.2.3.3.cmml">m</mi><mo id="algx2.l10.m1.1.2.3.2.3.1a" xref="algx2.l10.m1.1.2.3.2.3.1.cmml">⁢</mo><mn id="algx2.l10.m1.1.2.3.2.3.4" xref="algx2.l10.m1.1.2.3.2.3.4.cmml">25</mn></mrow></msub><mo id="algx2.l10.m1.1.2.3.1" xref="algx2.l10.m1.1.2.3.1.cmml">⁢</mo><mrow id="algx2.l10.m1.1.2.3.3.2" xref="algx2.l10.m1.1.2.3.cmml"><mo id="algx2.l10.m1.1.2.3.3.2.1" stretchy="false" xref="algx2.l10.m1.1.2.3.cmml">(</mo><mi id="algx2.l10.m1.1.1" xref="algx2.l10.m1.1.1.cmml">A</mi><mo id="algx2.l10.m1.1.2.3.3.2.2" stretchy="false" xref="algx2.l10.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l10.m1.1b"><apply id="algx2.l10.m1.1.2.cmml" xref="algx2.l10.m1.1.2"><ci id="algx2.l10.m1.1.2.1.cmml" xref="algx2.l10.m1.1.2.1">←</ci><ci id="algx2.l10.m1.1.2.2.cmml" xref="algx2.l10.m1.1.2.2">𝐷</ci><apply id="algx2.l10.m1.1.2.3.cmml" xref="algx2.l10.m1.1.2.3"><times id="algx2.l10.m1.1.2.3.1.cmml" xref="algx2.l10.m1.1.2.3.1"></times><apply id="algx2.l10.m1.1.2.3.2.cmml" xref="algx2.l10.m1.1.2.3.2"><csymbol cd="ambiguous" id="algx2.l10.m1.1.2.3.2.1.cmml" xref="algx2.l10.m1.1.2.3.2">subscript</csymbol><ci id="algx2.l10.m1.1.2.3.2.2.cmml" xref="algx2.l10.m1.1.2.3.2.2">ℛ</ci><apply id="algx2.l10.m1.1.2.3.2.3.cmml" xref="algx2.l10.m1.1.2.3.2.3"><times id="algx2.l10.m1.1.2.3.2.3.1.cmml" xref="algx2.l10.m1.1.2.3.2.3.1"></times><ci id="algx2.l10.m1.1.2.3.2.3.2.cmml" xref="algx2.l10.m1.1.2.3.2.3.2">𝑏</ci><ci id="algx2.l10.m1.1.2.3.2.3.3.cmml" xref="algx2.l10.m1.1.2.3.2.3.3">𝑚</ci><cn id="algx2.l10.m1.1.2.3.2.3.4.cmml" type="integer" xref="algx2.l10.m1.1.2.3.2.3.4">25</cn></apply></apply><ci id="algx2.l10.m1.1.1.cmml" xref="algx2.l10.m1.1.1">𝐴</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l10.m1.1c">D\leftarrow\mathcal{R}_{bm25}(A)</annotation><annotation encoding="application/x-llamapun" id="algx2.l10.m1.1d">italic_D ← caligraphic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT ( italic_A )</annotation></semantics></math><span class="ltx_text" id="algx2.l10.3" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l10.1.m1.1"><semantics id="algx2.l10.1.m1.1a"><mo id="algx2.l10.1.m1.1.1" xref="algx2.l10.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l10.1.m1.1b"><ci id="algx2.l10.1.m1.1.1.cmml" xref="algx2.l10.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l10.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l10.1.m1.1d">▷</annotation></semantics></math> Invoke <math alttext="R_{bm25}" class="ltx_Math" display="inline" id="algx2.l10.2.m2.1"><semantics id="algx2.l10.2.m2.1a"><msub id="algx2.l10.2.m2.1.1" xref="algx2.l10.2.m2.1.1.cmml"><mi id="algx2.l10.2.m2.1.1.2" xref="algx2.l10.2.m2.1.1.2.cmml">R</mi><mrow id="algx2.l10.2.m2.1.1.3" xref="algx2.l10.2.m2.1.1.3.cmml"><mi id="algx2.l10.2.m2.1.1.3.2" xref="algx2.l10.2.m2.1.1.3.2.cmml">b</mi><mo id="algx2.l10.2.m2.1.1.3.1" xref="algx2.l10.2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l10.2.m2.1.1.3.3" xref="algx2.l10.2.m2.1.1.3.3.cmml">m</mi><mo id="algx2.l10.2.m2.1.1.3.1a" xref="algx2.l10.2.m2.1.1.3.1.cmml">⁢</mo><mn id="algx2.l10.2.m2.1.1.3.4" xref="algx2.l10.2.m2.1.1.3.4.cmml">25</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l10.2.m2.1b"><apply id="algx2.l10.2.m2.1.1.cmml" xref="algx2.l10.2.m2.1.1"><csymbol cd="ambiguous" id="algx2.l10.2.m2.1.1.1.cmml" xref="algx2.l10.2.m2.1.1">subscript</csymbol><ci id="algx2.l10.2.m2.1.1.2.cmml" xref="algx2.l10.2.m2.1.1.2">𝑅</ci><apply id="algx2.l10.2.m2.1.1.3.cmml" xref="algx2.l10.2.m2.1.1.3"><times id="algx2.l10.2.m2.1.1.3.1.cmml" xref="algx2.l10.2.m2.1.1.3.1"></times><ci id="algx2.l10.2.m2.1.1.3.2.cmml" xref="algx2.l10.2.m2.1.1.3.2">𝑏</ci><ci id="algx2.l10.2.m2.1.1.3.3.cmml" xref="algx2.l10.2.m2.1.1.3.3">𝑚</ci><cn id="algx2.l10.2.m2.1.1.3.4.cmml" type="integer" xref="algx2.l10.2.m2.1.1.3.4">25</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l10.2.m2.1c">R_{bm25}</annotation><annotation encoding="application/x-llamapun" id="algx2.l10.2.m2.1d">italic_R start_POSTSUBSCRIPT italic_b italic_m 25 end_POSTSUBSCRIPT</annotation></semantics></math> to retrieve documents according to <math alttext="A" class="ltx_Math" display="inline" id="algx2.l10.3.m3.1"><semantics id="algx2.l10.3.m3.1a"><mi id="algx2.l10.3.m3.1.1" xref="algx2.l10.3.m3.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="algx2.l10.3.m3.1b"><ci id="algx2.l10.3.m3.1.1.cmml" xref="algx2.l10.3.m3.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l10.3.m3.1c">A</annotation><annotation encoding="application/x-llamapun" id="algx2.l10.3.m3.1d">italic_A</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx2.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>     <math alttext="R,F\leftarrow P_{\theta}^{eval}(D\cup O_{d}^{anc},Q)" class="ltx_Math" display="inline" id="algx2.l11.m1.4"><semantics id="algx2.l11.m1.4a"><mrow id="algx2.l11.m1.4.4" xref="algx2.l11.m1.4.4.cmml"><mrow id="algx2.l11.m1.4.4.3.2" xref="algx2.l11.m1.4.4.3.1.cmml"><mi id="algx2.l11.m1.2.2" xref="algx2.l11.m1.2.2.cmml">R</mi><mo id="algx2.l11.m1.4.4.3.2.1" xref="algx2.l11.m1.4.4.3.1.cmml">,</mo><mi id="algx2.l11.m1.3.3" xref="algx2.l11.m1.3.3.cmml">F</mi></mrow><mo id="algx2.l11.m1.4.4.2" stretchy="false" xref="algx2.l11.m1.4.4.2.cmml">←</mo><mrow id="algx2.l11.m1.4.4.1" xref="algx2.l11.m1.4.4.1.cmml"><msubsup id="algx2.l11.m1.4.4.1.3" xref="algx2.l11.m1.4.4.1.3.cmml"><mi id="algx2.l11.m1.4.4.1.3.2.2" xref="algx2.l11.m1.4.4.1.3.2.2.cmml">P</mi><mi id="algx2.l11.m1.4.4.1.3.2.3" xref="algx2.l11.m1.4.4.1.3.2.3.cmml">θ</mi><mrow id="algx2.l11.m1.4.4.1.3.3" xref="algx2.l11.m1.4.4.1.3.3.cmml"><mi id="algx2.l11.m1.4.4.1.3.3.2" xref="algx2.l11.m1.4.4.1.3.3.2.cmml">e</mi><mo id="algx2.l11.m1.4.4.1.3.3.1" xref="algx2.l11.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.4.4.1.3.3.3" xref="algx2.l11.m1.4.4.1.3.3.3.cmml">v</mi><mo id="algx2.l11.m1.4.4.1.3.3.1a" xref="algx2.l11.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.4.4.1.3.3.4" xref="algx2.l11.m1.4.4.1.3.3.4.cmml">a</mi><mo id="algx2.l11.m1.4.4.1.3.3.1b" xref="algx2.l11.m1.4.4.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.4.4.1.3.3.5" xref="algx2.l11.m1.4.4.1.3.3.5.cmml">l</mi></mrow></msubsup><mo id="algx2.l11.m1.4.4.1.2" xref="algx2.l11.m1.4.4.1.2.cmml">⁢</mo><mrow id="algx2.l11.m1.4.4.1.1.1" xref="algx2.l11.m1.4.4.1.1.2.cmml"><mo id="algx2.l11.m1.4.4.1.1.1.2" stretchy="false" xref="algx2.l11.m1.4.4.1.1.2.cmml">(</mo><mrow id="algx2.l11.m1.4.4.1.1.1.1" xref="algx2.l11.m1.4.4.1.1.1.1.cmml"><mi id="algx2.l11.m1.4.4.1.1.1.1.2" xref="algx2.l11.m1.4.4.1.1.1.1.2.cmml">D</mi><mo id="algx2.l11.m1.4.4.1.1.1.1.1" xref="algx2.l11.m1.4.4.1.1.1.1.1.cmml">∪</mo><msubsup id="algx2.l11.m1.4.4.1.1.1.1.3" xref="algx2.l11.m1.4.4.1.1.1.1.3.cmml"><mi id="algx2.l11.m1.4.4.1.1.1.1.3.2.2" xref="algx2.l11.m1.4.4.1.1.1.1.3.2.2.cmml">O</mi><mi id="algx2.l11.m1.4.4.1.1.1.1.3.2.3" xref="algx2.l11.m1.4.4.1.1.1.1.3.2.3.cmml">d</mi><mrow id="algx2.l11.m1.4.4.1.1.1.1.3.3" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.cmml"><mi id="algx2.l11.m1.4.4.1.1.1.1.3.3.2" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.2.cmml">a</mi><mo id="algx2.l11.m1.4.4.1.1.1.1.3.3.1" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.4.4.1.1.1.1.3.3.3" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.3.cmml">n</mi><mo id="algx2.l11.m1.4.4.1.1.1.1.3.3.1a" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.4.4.1.1.1.1.3.3.4" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><mo id="algx2.l11.m1.4.4.1.1.1.3" xref="algx2.l11.m1.4.4.1.1.2.cmml">,</mo><mi id="algx2.l11.m1.1.1" xref="algx2.l11.m1.1.1.cmml">Q</mi><mo id="algx2.l11.m1.4.4.1.1.1.4" stretchy="false" xref="algx2.l11.m1.4.4.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l11.m1.4b"><apply id="algx2.l11.m1.4.4.cmml" xref="algx2.l11.m1.4.4"><ci id="algx2.l11.m1.4.4.2.cmml" xref="algx2.l11.m1.4.4.2">←</ci><list id="algx2.l11.m1.4.4.3.1.cmml" xref="algx2.l11.m1.4.4.3.2"><ci id="algx2.l11.m1.2.2.cmml" xref="algx2.l11.m1.2.2">𝑅</ci><ci id="algx2.l11.m1.3.3.cmml" xref="algx2.l11.m1.3.3">𝐹</ci></list><apply id="algx2.l11.m1.4.4.1.cmml" xref="algx2.l11.m1.4.4.1"><times id="algx2.l11.m1.4.4.1.2.cmml" xref="algx2.l11.m1.4.4.1.2"></times><apply id="algx2.l11.m1.4.4.1.3.cmml" xref="algx2.l11.m1.4.4.1.3"><csymbol cd="ambiguous" id="algx2.l11.m1.4.4.1.3.1.cmml" xref="algx2.l11.m1.4.4.1.3">superscript</csymbol><apply id="algx2.l11.m1.4.4.1.3.2.cmml" xref="algx2.l11.m1.4.4.1.3"><csymbol cd="ambiguous" id="algx2.l11.m1.4.4.1.3.2.1.cmml" xref="algx2.l11.m1.4.4.1.3">subscript</csymbol><ci id="algx2.l11.m1.4.4.1.3.2.2.cmml" xref="algx2.l11.m1.4.4.1.3.2.2">𝑃</ci><ci id="algx2.l11.m1.4.4.1.3.2.3.cmml" xref="algx2.l11.m1.4.4.1.3.2.3">𝜃</ci></apply><apply id="algx2.l11.m1.4.4.1.3.3.cmml" xref="algx2.l11.m1.4.4.1.3.3"><times id="algx2.l11.m1.4.4.1.3.3.1.cmml" xref="algx2.l11.m1.4.4.1.3.3.1"></times><ci id="algx2.l11.m1.4.4.1.3.3.2.cmml" xref="algx2.l11.m1.4.4.1.3.3.2">𝑒</ci><ci id="algx2.l11.m1.4.4.1.3.3.3.cmml" xref="algx2.l11.m1.4.4.1.3.3.3">𝑣</ci><ci id="algx2.l11.m1.4.4.1.3.3.4.cmml" xref="algx2.l11.m1.4.4.1.3.3.4">𝑎</ci><ci id="algx2.l11.m1.4.4.1.3.3.5.cmml" xref="algx2.l11.m1.4.4.1.3.3.5">𝑙</ci></apply></apply><interval closure="open" id="algx2.l11.m1.4.4.1.1.2.cmml" xref="algx2.l11.m1.4.4.1.1.1"><apply id="algx2.l11.m1.4.4.1.1.1.1.cmml" xref="algx2.l11.m1.4.4.1.1.1.1"><union id="algx2.l11.m1.4.4.1.1.1.1.1.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.1"></union><ci id="algx2.l11.m1.4.4.1.1.1.1.2.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.2">𝐷</ci><apply id="algx2.l11.m1.4.4.1.1.1.1.3.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3"><csymbol cd="ambiguous" id="algx2.l11.m1.4.4.1.1.1.1.3.1.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3">superscript</csymbol><apply id="algx2.l11.m1.4.4.1.1.1.1.3.2.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3"><csymbol cd="ambiguous" id="algx2.l11.m1.4.4.1.1.1.1.3.2.1.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3">subscript</csymbol><ci id="algx2.l11.m1.4.4.1.1.1.1.3.2.2.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.2.2">𝑂</ci><ci id="algx2.l11.m1.4.4.1.1.1.1.3.2.3.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.2.3">𝑑</ci></apply><apply id="algx2.l11.m1.4.4.1.1.1.1.3.3.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.3"><times id="algx2.l11.m1.4.4.1.1.1.1.3.3.1.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.1"></times><ci id="algx2.l11.m1.4.4.1.1.1.1.3.3.2.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.2">𝑎</ci><ci id="algx2.l11.m1.4.4.1.1.1.1.3.3.3.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.3">𝑛</ci><ci id="algx2.l11.m1.4.4.1.1.1.1.3.3.4.cmml" xref="algx2.l11.m1.4.4.1.1.1.1.3.3.4">𝑐</ci></apply></apply></apply><ci id="algx2.l11.m1.1.1.cmml" xref="algx2.l11.m1.1.1">𝑄</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.m1.4c">R,F\leftarrow P_{\theta}^{eval}(D\cup O_{d}^{anc},Q)</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.m1.4d">italic_R , italic_F ← italic_P start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_e italic_v italic_a italic_l end_POSTSUPERSCRIPT ( italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT , italic_Q )</annotation></semantics></math><span class="ltx_text" id="algx2.l11.5" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l11.1.m1.1"><semantics id="algx2.l11.1.m1.1a"><mo id="algx2.l11.1.m1.1.1" xref="algx2.l11.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l11.1.m1.1b"><ci id="algx2.l11.1.m1.1.1.cmml" xref="algx2.l11.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.1.m1.1d">▷</annotation></semantics></math> Get reward score <math alttext="R" class="ltx_Math" display="inline" id="algx2.l11.2.m2.1"><semantics id="algx2.l11.2.m2.1a"><mi id="algx2.l11.2.m2.1.1" xref="algx2.l11.2.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx2.l11.2.m2.1b"><ci id="algx2.l11.2.m2.1.1.cmml" xref="algx2.l11.2.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.2.m2.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.2.m2.1d">italic_R</annotation></semantics></math> and descriptional feedback <math alttext="F" class="ltx_Math" display="inline" id="algx2.l11.3.m3.1"><semantics id="algx2.l11.3.m3.1a"><mi id="algx2.l11.3.m3.1.1" xref="algx2.l11.3.m3.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="algx2.l11.3.m3.1b"><ci id="algx2.l11.3.m3.1.1.cmml" xref="algx2.l11.3.m3.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.3.m3.1c">F</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.3.m3.1d">italic_F</annotation></semantics></math> for currently retrieved documents <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx2.l11.4.m4.1"><semantics id="algx2.l11.4.m4.1a"><mrow id="algx2.l11.4.m4.1.1" xref="algx2.l11.4.m4.1.1.cmml"><mi id="algx2.l11.4.m4.1.1.2" xref="algx2.l11.4.m4.1.1.2.cmml">D</mi><mo id="algx2.l11.4.m4.1.1.1" xref="algx2.l11.4.m4.1.1.1.cmml">∪</mo><msubsup id="algx2.l11.4.m4.1.1.3" xref="algx2.l11.4.m4.1.1.3.cmml"><mi id="algx2.l11.4.m4.1.1.3.2.2" xref="algx2.l11.4.m4.1.1.3.2.2.cmml">O</mi><mi id="algx2.l11.4.m4.1.1.3.2.3" xref="algx2.l11.4.m4.1.1.3.2.3.cmml">d</mi><mrow id="algx2.l11.4.m4.1.1.3.3" xref="algx2.l11.4.m4.1.1.3.3.cmml"><mi id="algx2.l11.4.m4.1.1.3.3.2" xref="algx2.l11.4.m4.1.1.3.3.2.cmml">a</mi><mo id="algx2.l11.4.m4.1.1.3.3.1" xref="algx2.l11.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.4.m4.1.1.3.3.3" xref="algx2.l11.4.m4.1.1.3.3.3.cmml">n</mi><mo id="algx2.l11.4.m4.1.1.3.3.1a" xref="algx2.l11.4.m4.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l11.4.m4.1.1.3.3.4" xref="algx2.l11.4.m4.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx2.l11.4.m4.1b"><apply id="algx2.l11.4.m4.1.1.cmml" xref="algx2.l11.4.m4.1.1"><union id="algx2.l11.4.m4.1.1.1.cmml" xref="algx2.l11.4.m4.1.1.1"></union><ci id="algx2.l11.4.m4.1.1.2.cmml" xref="algx2.l11.4.m4.1.1.2">𝐷</ci><apply id="algx2.l11.4.m4.1.1.3.cmml" xref="algx2.l11.4.m4.1.1.3"><csymbol cd="ambiguous" id="algx2.l11.4.m4.1.1.3.1.cmml" xref="algx2.l11.4.m4.1.1.3">superscript</csymbol><apply id="algx2.l11.4.m4.1.1.3.2.cmml" xref="algx2.l11.4.m4.1.1.3"><csymbol cd="ambiguous" id="algx2.l11.4.m4.1.1.3.2.1.cmml" xref="algx2.l11.4.m4.1.1.3">subscript</csymbol><ci id="algx2.l11.4.m4.1.1.3.2.2.cmml" xref="algx2.l11.4.m4.1.1.3.2.2">𝑂</ci><ci id="algx2.l11.4.m4.1.1.3.2.3.cmml" xref="algx2.l11.4.m4.1.1.3.2.3">𝑑</ci></apply><apply id="algx2.l11.4.m4.1.1.3.3.cmml" xref="algx2.l11.4.m4.1.1.3.3"><times id="algx2.l11.4.m4.1.1.3.3.1.cmml" xref="algx2.l11.4.m4.1.1.3.3.1"></times><ci id="algx2.l11.4.m4.1.1.3.3.2.cmml" xref="algx2.l11.4.m4.1.1.3.3.2">𝑎</ci><ci id="algx2.l11.4.m4.1.1.3.3.3.cmml" xref="algx2.l11.4.m4.1.1.3.3.3">𝑛</ci><ci id="algx2.l11.4.m4.1.1.3.3.4.cmml" xref="algx2.l11.4.m4.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.4.m4.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.4.m4.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="Q" class="ltx_Math" display="inline" id="algx2.l11.5.m5.1"><semantics id="algx2.l11.5.m5.1a"><mi id="algx2.l11.5.m5.1.1" xref="algx2.l11.5.m5.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="algx2.l11.5.m5.1b"><ci id="algx2.l11.5.m5.1.1.cmml" xref="algx2.l11.5.m5.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.5.m5.1c">Q</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.5.m5.1d">italic_Q</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx2.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span>     <span class="ltx_text ltx_font_bold" id="algx2.l12.3">if</span> <math alttext="R" class="ltx_Math" display="inline" id="algx2.l12.m1.1"><semantics id="algx2.l12.m1.1a"><mi id="algx2.l12.m1.1.1" xref="algx2.l12.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx2.l12.m1.1b"><ci id="algx2.l12.m1.1.1.cmml" xref="algx2.l12.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l12.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx2.l12.m1.1d">italic_R</annotation></semantics></math> == 5 <span class="ltx_text ltx_font_bold" id="algx2.l12.4">then</span> <span class="ltx_text" id="algx2.l12.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l12.1.m1.1"><semantics id="algx2.l12.1.m1.1a"><mo id="algx2.l12.1.m1.1.1" xref="algx2.l12.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l12.1.m1.1b"><ci id="algx2.l12.1.m1.1.1.cmml" xref="algx2.l12.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l12.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l12.1.m1.1d">▷</annotation></semantics></math> Stop early if <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx2.l12.2.m2.1"><semantics id="algx2.l12.2.m2.1a"><mrow id="algx2.l12.2.m2.1.1" xref="algx2.l12.2.m2.1.1.cmml"><mi id="algx2.l12.2.m2.1.1.2" xref="algx2.l12.2.m2.1.1.2.cmml">D</mi><mo id="algx2.l12.2.m2.1.1.1" xref="algx2.l12.2.m2.1.1.1.cmml">∪</mo><msubsup id="algx2.l12.2.m2.1.1.3" xref="algx2.l12.2.m2.1.1.3.cmml"><mi id="algx2.l12.2.m2.1.1.3.2.2" xref="algx2.l12.2.m2.1.1.3.2.2.cmml">O</mi><mi id="algx2.l12.2.m2.1.1.3.2.3" xref="algx2.l12.2.m2.1.1.3.2.3.cmml">d</mi><mrow id="algx2.l12.2.m2.1.1.3.3" xref="algx2.l12.2.m2.1.1.3.3.cmml"><mi id="algx2.l12.2.m2.1.1.3.3.2" xref="algx2.l12.2.m2.1.1.3.3.2.cmml">a</mi><mo id="algx2.l12.2.m2.1.1.3.3.1" xref="algx2.l12.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l12.2.m2.1.1.3.3.3" xref="algx2.l12.2.m2.1.1.3.3.3.cmml">n</mi><mo id="algx2.l12.2.m2.1.1.3.3.1a" xref="algx2.l12.2.m2.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l12.2.m2.1.1.3.3.4" xref="algx2.l12.2.m2.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx2.l12.2.m2.1b"><apply id="algx2.l12.2.m2.1.1.cmml" xref="algx2.l12.2.m2.1.1"><union id="algx2.l12.2.m2.1.1.1.cmml" xref="algx2.l12.2.m2.1.1.1"></union><ci id="algx2.l12.2.m2.1.1.2.cmml" xref="algx2.l12.2.m2.1.1.2">𝐷</ci><apply id="algx2.l12.2.m2.1.1.3.cmml" xref="algx2.l12.2.m2.1.1.3"><csymbol cd="ambiguous" id="algx2.l12.2.m2.1.1.3.1.cmml" xref="algx2.l12.2.m2.1.1.3">superscript</csymbol><apply id="algx2.l12.2.m2.1.1.3.2.cmml" xref="algx2.l12.2.m2.1.1.3"><csymbol cd="ambiguous" id="algx2.l12.2.m2.1.1.3.2.1.cmml" xref="algx2.l12.2.m2.1.1.3">subscript</csymbol><ci id="algx2.l12.2.m2.1.1.3.2.2.cmml" xref="algx2.l12.2.m2.1.1.3.2.2">𝑂</ci><ci id="algx2.l12.2.m2.1.1.3.2.3.cmml" xref="algx2.l12.2.m2.1.1.3.2.3">𝑑</ci></apply><apply id="algx2.l12.2.m2.1.1.3.3.cmml" xref="algx2.l12.2.m2.1.1.3.3"><times id="algx2.l12.2.m2.1.1.3.3.1.cmml" xref="algx2.l12.2.m2.1.1.3.3.1"></times><ci id="algx2.l12.2.m2.1.1.3.3.2.cmml" xref="algx2.l12.2.m2.1.1.3.3.2">𝑎</ci><ci id="algx2.l12.2.m2.1.1.3.3.3.cmml" xref="algx2.l12.2.m2.1.1.3.3.3">𝑛</ci><ci id="algx2.l12.2.m2.1.1.3.3.4.cmml" xref="algx2.l12.2.m2.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l12.2.m2.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx2.l12.2.m2.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> receive highest score in 5-point rubrics
</span>
</div>
<div class="ltx_listingline" id="algx2.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>         <span class="ltx_text ltx_font_bold" id="algx2.l13.1">break</span>
</div>
<div class="ltx_listingline" id="algx2.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>     <span class="ltx_text ltx_font_bold" id="algx2.l14.1">end</span> <span class="ltx_text ltx_font_bold" id="algx2.l14.2">if</span>
</div>
<div class="ltx_listingline" id="algx2.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>
</div>
<div class="ltx_listingline" id="algx2.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span>     <math alttext="C^{\prime}=\text{create\_new\_child}(Q,A,R,O)" class="ltx_Math" display="inline" id="algx2.l16.m1.4"><semantics id="algx2.l16.m1.4a"><mrow id="algx2.l16.m1.4.5" xref="algx2.l16.m1.4.5.cmml"><msup id="algx2.l16.m1.4.5.2" xref="algx2.l16.m1.4.5.2.cmml"><mi id="algx2.l16.m1.4.5.2.2" xref="algx2.l16.m1.4.5.2.2.cmml">C</mi><mo id="algx2.l16.m1.4.5.2.3" xref="algx2.l16.m1.4.5.2.3.cmml">′</mo></msup><mo id="algx2.l16.m1.4.5.1" xref="algx2.l16.m1.4.5.1.cmml">=</mo><mrow id="algx2.l16.m1.4.5.3" xref="algx2.l16.m1.4.5.3.cmml"><mtext id="algx2.l16.m1.4.5.3.2" xref="algx2.l16.m1.4.5.3.2a.cmml">create_new_child</mtext><mo id="algx2.l16.m1.4.5.3.1" xref="algx2.l16.m1.4.5.3.1.cmml">⁢</mo><mrow id="algx2.l16.m1.4.5.3.3.2" xref="algx2.l16.m1.4.5.3.3.1.cmml"><mo id="algx2.l16.m1.4.5.3.3.2.1" stretchy="false" xref="algx2.l16.m1.4.5.3.3.1.cmml">(</mo><mi id="algx2.l16.m1.1.1" xref="algx2.l16.m1.1.1.cmml">Q</mi><mo id="algx2.l16.m1.4.5.3.3.2.2" xref="algx2.l16.m1.4.5.3.3.1.cmml">,</mo><mi id="algx2.l16.m1.2.2" xref="algx2.l16.m1.2.2.cmml">A</mi><mo id="algx2.l16.m1.4.5.3.3.2.3" xref="algx2.l16.m1.4.5.3.3.1.cmml">,</mo><mi id="algx2.l16.m1.3.3" xref="algx2.l16.m1.3.3.cmml">R</mi><mo id="algx2.l16.m1.4.5.3.3.2.4" xref="algx2.l16.m1.4.5.3.3.1.cmml">,</mo><mi id="algx2.l16.m1.4.4" xref="algx2.l16.m1.4.4.cmml">O</mi><mo id="algx2.l16.m1.4.5.3.3.2.5" stretchy="false" xref="algx2.l16.m1.4.5.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l16.m1.4b"><apply id="algx2.l16.m1.4.5.cmml" xref="algx2.l16.m1.4.5"><eq id="algx2.l16.m1.4.5.1.cmml" xref="algx2.l16.m1.4.5.1"></eq><apply id="algx2.l16.m1.4.5.2.cmml" xref="algx2.l16.m1.4.5.2"><csymbol cd="ambiguous" id="algx2.l16.m1.4.5.2.1.cmml" xref="algx2.l16.m1.4.5.2">superscript</csymbol><ci id="algx2.l16.m1.4.5.2.2.cmml" xref="algx2.l16.m1.4.5.2.2">𝐶</ci><ci id="algx2.l16.m1.4.5.2.3.cmml" xref="algx2.l16.m1.4.5.2.3">′</ci></apply><apply id="algx2.l16.m1.4.5.3.cmml" xref="algx2.l16.m1.4.5.3"><times id="algx2.l16.m1.4.5.3.1.cmml" xref="algx2.l16.m1.4.5.3.1"></times><ci id="algx2.l16.m1.4.5.3.2a.cmml" xref="algx2.l16.m1.4.5.3.2"><mtext id="algx2.l16.m1.4.5.3.2.cmml" xref="algx2.l16.m1.4.5.3.2">create_new_child</mtext></ci><vector id="algx2.l16.m1.4.5.3.3.1.cmml" xref="algx2.l16.m1.4.5.3.3.2"><ci id="algx2.l16.m1.1.1.cmml" xref="algx2.l16.m1.1.1">𝑄</ci><ci id="algx2.l16.m1.2.2.cmml" xref="algx2.l16.m1.2.2">𝐴</ci><ci id="algx2.l16.m1.3.3.cmml" xref="algx2.l16.m1.3.3">𝑅</ci><ci id="algx2.l16.m1.4.4.cmml" xref="algx2.l16.m1.4.4">𝑂</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l16.m1.4c">C^{\prime}=\text{create\_new\_child}(Q,A,R,O)</annotation><annotation encoding="application/x-llamapun" id="algx2.l16.m1.4d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT = create_new_child ( italic_Q , italic_A , italic_R , italic_O )</annotation></semantics></math> <span class="ltx_text" id="algx2.l16.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l16.1.m1.1"><semantics id="algx2.l16.1.m1.1a"><mo id="algx2.l16.1.m1.1.1" xref="algx2.l16.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l16.1.m1.1b"><ci id="algx2.l16.1.m1.1.1.cmml" xref="algx2.l16.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l16.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l16.1.m1.1d">▷</annotation></semantics></math> create a new child node for <math alttext="C" class="ltx_Math" display="inline" id="algx2.l16.2.m2.1"><semantics id="algx2.l16.2.m2.1a"><mi id="algx2.l16.2.m2.1.1" xref="algx2.l16.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx2.l16.2.m2.1b"><ci id="algx2.l16.2.m2.1.1.cmml" xref="algx2.l16.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l16.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx2.l16.2.m2.1d">italic_C</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx2.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span>     Add <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="algx2.l17.m1.1"><semantics id="algx2.l17.m1.1a"><msup id="algx2.l17.m1.1.1" xref="algx2.l17.m1.1.1.cmml"><mi id="algx2.l17.m1.1.1.2" xref="algx2.l17.m1.1.1.2.cmml">C</mi><mo id="algx2.l17.m1.1.1.3" xref="algx2.l17.m1.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="algx2.l17.m1.1b"><apply id="algx2.l17.m1.1.1.cmml" xref="algx2.l17.m1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m1.1.1.1.cmml" xref="algx2.l17.m1.1.1">superscript</csymbol><ci id="algx2.l17.m1.1.1.2.cmml" xref="algx2.l17.m1.1.1.2">𝐶</ci><ci id="algx2.l17.m1.1.1.3.cmml" xref="algx2.l17.m1.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l17.m1.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="algx2.l17.m1.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> to children nodes of <math alttext="C" class="ltx_Math" display="inline" id="algx2.l17.m2.1"><semantics id="algx2.l17.m2.1a"><mi id="algx2.l17.m2.1.1" xref="algx2.l17.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx2.l17.m2.1b"><ci id="algx2.l17.m2.1.1.cmml" xref="algx2.l17.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l17.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx2.l17.m2.1d">italic_C</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l18">
<span class="ltx_tag ltx_tag_listingline">18:</span><span class="ltx_text ltx_font_bold" id="algx2.l18.1">end</span> <span class="ltx_text ltx_font_bold" id="algx2.l18.2">for</span>
</div>
<div class="ltx_listingline" id="algx2.l19">
<span class="ltx_tag ltx_tag_listingline">19:</span><math alttext="C=\text{get\_best\_node}(T_{Q})" class="ltx_Math" display="inline" id="algx2.l19.m1.1"><semantics id="algx2.l19.m1.1a"><mrow id="algx2.l19.m1.1.1" xref="algx2.l19.m1.1.1.cmml"><mi id="algx2.l19.m1.1.1.3" xref="algx2.l19.m1.1.1.3.cmml">C</mi><mo id="algx2.l19.m1.1.1.2" xref="algx2.l19.m1.1.1.2.cmml">=</mo><mrow id="algx2.l19.m1.1.1.1" xref="algx2.l19.m1.1.1.1.cmml"><mtext id="algx2.l19.m1.1.1.1.3" xref="algx2.l19.m1.1.1.1.3a.cmml">get_best_node</mtext><mo id="algx2.l19.m1.1.1.1.2" xref="algx2.l19.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l19.m1.1.1.1.1.1" xref="algx2.l19.m1.1.1.1.1.1.1.cmml"><mo id="algx2.l19.m1.1.1.1.1.1.2" stretchy="false" xref="algx2.l19.m1.1.1.1.1.1.1.cmml">(</mo><msub id="algx2.l19.m1.1.1.1.1.1.1" xref="algx2.l19.m1.1.1.1.1.1.1.cmml"><mi id="algx2.l19.m1.1.1.1.1.1.1.2" xref="algx2.l19.m1.1.1.1.1.1.1.2.cmml">T</mi><mi id="algx2.l19.m1.1.1.1.1.1.1.3" xref="algx2.l19.m1.1.1.1.1.1.1.3.cmml">Q</mi></msub><mo id="algx2.l19.m1.1.1.1.1.1.3" stretchy="false" xref="algx2.l19.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l19.m1.1b"><apply id="algx2.l19.m1.1.1.cmml" xref="algx2.l19.m1.1.1"><eq id="algx2.l19.m1.1.1.2.cmml" xref="algx2.l19.m1.1.1.2"></eq><ci id="algx2.l19.m1.1.1.3.cmml" xref="algx2.l19.m1.1.1.3">𝐶</ci><apply id="algx2.l19.m1.1.1.1.cmml" xref="algx2.l19.m1.1.1.1"><times id="algx2.l19.m1.1.1.1.2.cmml" xref="algx2.l19.m1.1.1.1.2"></times><ci id="algx2.l19.m1.1.1.1.3a.cmml" xref="algx2.l19.m1.1.1.1.3"><mtext id="algx2.l19.m1.1.1.1.3.cmml" xref="algx2.l19.m1.1.1.1.3">get_best_node</mtext></ci><apply id="algx2.l19.m1.1.1.1.1.1.1.cmml" xref="algx2.l19.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l19.m1.1.1.1.1.1.1.1.cmml" xref="algx2.l19.m1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l19.m1.1.1.1.1.1.1.2.cmml" xref="algx2.l19.m1.1.1.1.1.1.1.2">𝑇</ci><ci id="algx2.l19.m1.1.1.1.1.1.1.3.cmml" xref="algx2.l19.m1.1.1.1.1.1.1.3">𝑄</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.m1.1c">C=\text{get\_best\_node}(T_{Q})</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.m1.1d">italic_C = get_best_node ( italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT )</annotation></semantics></math> <span class="ltx_text" id="algx2.l19.3" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l19.1.m1.1"><semantics id="algx2.l19.1.m1.1a"><mo id="algx2.l19.1.m1.1.1" xref="algx2.l19.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l19.1.m1.1b"><ci id="algx2.l19.1.m1.1.1.cmml" xref="algx2.l19.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.1.m1.1d">▷</annotation></semantics></math> Fetch the node with the highest <math alttext="R" class="ltx_Math" display="inline" id="algx2.l19.2.m2.1"><semantics id="algx2.l19.2.m2.1a"><mi id="algx2.l19.2.m2.1.1" xref="algx2.l19.2.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="algx2.l19.2.m2.1b"><ci id="algx2.l19.2.m2.1.1.cmml" xref="algx2.l19.2.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.2.m2.1c">R</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.2.m2.1d">italic_R</annotation></semantics></math> in <math alttext="T_{Q}" class="ltx_Math" display="inline" id="algx2.l19.3.m3.1"><semantics id="algx2.l19.3.m3.1a"><msub id="algx2.l19.3.m3.1.1" xref="algx2.l19.3.m3.1.1.cmml"><mi id="algx2.l19.3.m3.1.1.2" xref="algx2.l19.3.m3.1.1.2.cmml">T</mi><mi id="algx2.l19.3.m3.1.1.3" xref="algx2.l19.3.m3.1.1.3.cmml">Q</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l19.3.m3.1b"><apply id="algx2.l19.3.m3.1.1.cmml" xref="algx2.l19.3.m3.1.1"><csymbol cd="ambiguous" id="algx2.l19.3.m3.1.1.1.cmml" xref="algx2.l19.3.m3.1.1">subscript</csymbol><ci id="algx2.l19.3.m3.1.1.2.cmml" xref="algx2.l19.3.m3.1.1.2">𝑇</ci><ci id="algx2.l19.3.m3.1.1.3.cmml" xref="algx2.l19.3.m3.1.1.3">𝑄</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.3.m3.1c">T_{Q}</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.3.m3.1d">italic_T start_POSTSUBSCRIPT italic_Q end_POSTSUBSCRIPT</annotation></semantics></math>
</span>
</div>
<div class="ltx_listingline" id="algx2.l20">
<span class="ltx_tag ltx_tag_listingline">20:</span><span class="ltx_text ltx_font_bold" id="algx2.l20.3">return</span> <math alttext="D\cup O_{d}^{anc}" class="ltx_Math" display="inline" id="algx2.l20.m1.1"><semantics id="algx2.l20.m1.1a"><mrow id="algx2.l20.m1.1.1" xref="algx2.l20.m1.1.1.cmml"><mi id="algx2.l20.m1.1.1.2" xref="algx2.l20.m1.1.1.2.cmml">D</mi><mo id="algx2.l20.m1.1.1.1" xref="algx2.l20.m1.1.1.1.cmml">∪</mo><msubsup id="algx2.l20.m1.1.1.3" xref="algx2.l20.m1.1.1.3.cmml"><mi id="algx2.l20.m1.1.1.3.2.2" xref="algx2.l20.m1.1.1.3.2.2.cmml">O</mi><mi id="algx2.l20.m1.1.1.3.2.3" xref="algx2.l20.m1.1.1.3.2.3.cmml">d</mi><mrow id="algx2.l20.m1.1.1.3.3" xref="algx2.l20.m1.1.1.3.3.cmml"><mi id="algx2.l20.m1.1.1.3.3.2" xref="algx2.l20.m1.1.1.3.3.2.cmml">a</mi><mo id="algx2.l20.m1.1.1.3.3.1" xref="algx2.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l20.m1.1.1.3.3.3" xref="algx2.l20.m1.1.1.3.3.3.cmml">n</mi><mo id="algx2.l20.m1.1.1.3.3.1a" xref="algx2.l20.m1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l20.m1.1.1.3.3.4" xref="algx2.l20.m1.1.1.3.3.4.cmml">c</mi></mrow></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx2.l20.m1.1b"><apply id="algx2.l20.m1.1.1.cmml" xref="algx2.l20.m1.1.1"><union id="algx2.l20.m1.1.1.1.cmml" xref="algx2.l20.m1.1.1.1"></union><ci id="algx2.l20.m1.1.1.2.cmml" xref="algx2.l20.m1.1.1.2">𝐷</ci><apply id="algx2.l20.m1.1.1.3.cmml" xref="algx2.l20.m1.1.1.3"><csymbol cd="ambiguous" id="algx2.l20.m1.1.1.3.1.cmml" xref="algx2.l20.m1.1.1.3">superscript</csymbol><apply id="algx2.l20.m1.1.1.3.2.cmml" xref="algx2.l20.m1.1.1.3"><csymbol cd="ambiguous" id="algx2.l20.m1.1.1.3.2.1.cmml" xref="algx2.l20.m1.1.1.3">subscript</csymbol><ci id="algx2.l20.m1.1.1.3.2.2.cmml" xref="algx2.l20.m1.1.1.3.2.2">𝑂</ci><ci id="algx2.l20.m1.1.1.3.2.3.cmml" xref="algx2.l20.m1.1.1.3.2.3">𝑑</ci></apply><apply id="algx2.l20.m1.1.1.3.3.cmml" xref="algx2.l20.m1.1.1.3.3"><times id="algx2.l20.m1.1.1.3.3.1.cmml" xref="algx2.l20.m1.1.1.3.3.1"></times><ci id="algx2.l20.m1.1.1.3.3.2.cmml" xref="algx2.l20.m1.1.1.3.3.2">𝑎</ci><ci id="algx2.l20.m1.1.1.3.3.3.cmml" xref="algx2.l20.m1.1.1.3.3.3">𝑛</ci><ci id="algx2.l20.m1.1.1.3.3.4.cmml" xref="algx2.l20.m1.1.1.3.3.4">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.m1.1c">D\cup O_{d}^{anc}</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.m1.1d">italic_D ∪ italic_O start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_n italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> from <math alttext="C" class="ltx_Math" display="inline" id="algx2.l20.m2.1"><semantics id="algx2.l20.m2.1a"><mi id="algx2.l20.m2.1.1" xref="algx2.l20.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx2.l20.m2.1b"><ci id="algx2.l20.m2.1.1.cmml" xref="algx2.l20.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.m2.1d">italic_C</annotation></semantics></math> <span class="ltx_text" id="algx2.l20.2" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx2.l20.1.m1.1"><semantics id="algx2.l20.1.m1.1a"><mo id="algx2.l20.1.m1.1.1" xref="algx2.l20.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx2.l20.1.m1.1b"><ci id="algx2.l20.1.m1.1.1.cmml" xref="algx2.l20.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.1.m1.1d">▷</annotation></semantics></math> Return all retrieved documents in <math alttext="C" class="ltx_Math" display="inline" id="algx2.l20.2.m2.1"><semantics id="algx2.l20.2.m2.1a"><mi id="algx2.l20.2.m2.1.1" xref="algx2.l20.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="algx2.l20.2.m2.1b"><ci id="algx2.l20.2.m2.1.1.cmml" xref="algx2.l20.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.2.m2.1c">C</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.2.m2.1d">italic_C</annotation></semantics></math>
</span>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="A3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.4 </span>LoRA PPO Finetuning</h3>
<div class="ltx_para" id="A3.SS4.p1">
<p class="ltx_p" id="A3.SS4.p1.1">For PPO fine-tuning, we utilize the LoRA and PPO implementations from the peft and trl Python packages, following the official training script<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/huggingface/trl/blob/main/examples/research_projects/stack_llama/scripts/rl_training.py" title="">https://github.com/huggingface/trl/blob/main/examples/research_projects/stack_llama/scripts/rl_training.py</a></span></span></span>. The fine-tuning process is completed on a single Nvidia A6000 GPU within 2 hours. The lora_target_modules is set to <span class="ltx_text ltx_font_italic" id="A3.SS4.p1.1.1">"["q_proj", "v_proj"]"</span>, with lora_r as 16, lora_alpha as 32, and lora_dropout as 0.05. The micro_batch_size is 1, batch_size is 8, and num_epochs is 1. For optimization, we set the learning_rate to 1.41e-5, the reward baseline to 3.75, and the random seed to 0.</p>
</div>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Mon Jun 17 06:30:47 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
