<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts</title>
<!--Generated on Thu May 30 09:31:53 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2405.19893v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S1" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S2" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S2.SS1" title="In 2 Related work ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Retrieval-Augmented Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S2.SS2" title="In 2 Related work ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Task-Oriented Summarization</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>The proposed approach</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS1" title="In 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Overview</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS2" title="In 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>A Tale of Two “Models”</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS2.SSS1" title="In 3.2 A Tale of Two “Models” ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.1 </span>Similarity Model as an Off-the-shelf Retriever</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS2.SSS2" title="In 3.2 A Tale of Two “Models” ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.2 </span>LLM’s Supervision Empowered Utility Model</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS2.SSS3" title="In 3.2 A Tale of Two “Models” ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.3 </span>Reunion of Similarity- and Utility- oriented Thoughts</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS3" title="In 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Pursuit of Compactness-oriented Thoughts</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS3.SSS1" title="In 3.3 Pursuit of Compactness-oriented Thoughts ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.1 </span>Distilling from Strong Teacher Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS3.SSS2" title="In 3.3 Pursuit of Compactness-oriented Thoughts ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.2 </span>Alignment via End-task Feedback</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS4" title="In 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Knowledge-augmented Generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1" title="In 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Experimental Setup</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1.SSS1" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.1 </span>Tasks and Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1.SSS2" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.2 </span>Baselines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1.SSS3" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1.3 </span>Settings</span></a>
<ol class="ltx_toclist ltx_toclist_subsubsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1.SSS3.Px1" title="In 4.1.3 Settings ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Training details.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS1.SSS3.Px2" title="In 4.1.3 Settings ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Retrieval details.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2" title="In 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Results and Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS1" title="In 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2.1 </span>Main Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2" title="In 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2.2 </span>Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_subsubsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2.Px1" title="In 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Ablation study.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2.Px2" title="In 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Passage window size matters in utility model performance!</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2.Px3" title="In 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Impact of selective retrieval.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2.Px4" title="In 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">The impact of LLMs on utility modeling.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.SS2.SSS2.Px5" title="In 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title">Investigation into task-adaptive summarizer.</span></a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S5" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S6" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1" title="In Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Appendix</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.SS1" title="In Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Prompt Template</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.SS1.SSS1" title="In A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.1 </span>Utility Model Training Prompt</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.SS1.SSS2" title="In A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.2 </span>Task-adaptive Summarizer Training and Inference Prompt</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.SS1.SSS3" title="In A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.3 </span>Knowledge-augmented Generation Prompt</span></a></li>
</ol>
</li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Chunjing Gan Dan Yang Binbin Hu Hanxiao Zhang  Siyuan Li Ziqi Liu 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id1.1.id1">Yue Shen Lin Ju Zhiqiang Zhang Jinjie Gu Lei Liang Jun Zhou<span class="ltx_note ltx_role_footnotemark" id="footnotex1"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_note_type">footnotemark: </span><span class="ltx_tag ltx_tag_note"><span class="ltx_text ltx_font_medium" id="footnotex1.1.1.1">2</span></span></span></span></span>
<br class="ltx_break"/>Ant Group 
<br class="ltx_break"/>jun.zhoujun@antgroup.com
</span>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id2.id1">In recent years, large language models (LLMs) have made remarkable achievements in various domains. However, the untimeliness and cost of knowledge updates coupled with hallucination issues of LLMs have curtailed their applications in knowledge-intensive tasks, where retrieval-augmented generation (RAG) can be of help. Nevertheless, existing retrieval-augmented models typically use similarity as a bridge between queries and documents and follow a retrieve-then-read procedure.
In this work, we argue that similarity is not always the “panacea” and totally relying on similarity would sometimes degrade the performance of retrieval-augmented generation.
To this end, we propose <span class="ltx_text ltx_font_bold ltx_font_smallcaps" id="id2.id1.1">MetRag</span>, a <span class="ltx_text ltx_font_bold" id="id2.id1.2">M</span>ulti–lay<span class="ltx_text ltx_font_bold" id="id2.id1.3">E</span>red <span class="ltx_text ltx_font_bold" id="id2.id1.4">T</span>houghts enhanced <span class="ltx_text ltx_font_bold" id="id2.id1.5">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="id2.id1.6">A</span>ugmented <span class="ltx_text ltx_font_bold" id="id2.id1.7">G</span>eneration framework.
To begin with, beyond existing similarity-oriented thought, we embrace a small-scale utility model that draws supervision from an LLM for utility-oriented thought and further come up with a “smarter” model by comprehensively combining the similarity- and utility-oriented thoughts.
Furthermore, given the fact that the retrieved document set tends to be huge and using them in isolation makes it difficult to capture the commonalities and characteristics among them, we propose to make an LLM as a task-adaptive summarizer to endow retrieval-augmented generation with compactness-oriented thought.
Finally, with multi-layered thoughts from the precedent stages, an LLM is called for knowledge-augmented generation.
Extensive experiments on knowledge-intensive tasks have demonstrated the superiority of <span class="ltx_text ltx_font_smallcaps" id="id2.id1.8">MetRag</span>.</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">In recent years, large language models (LLMs) such as ChatGPT <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib15" title="">2023a</a>)</cite>, GPT4 <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib16" title="">2023b</a>)</cite>, Llama <cite class="ltx_cite ltx_citemacro_cite">Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib22" title="">2023</a>)</cite> have made remarkable achievements in a variety of tasks due to their marvelous capability in language comprehension and generation <cite class="ltx_cite ltx_citemacro_cite">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib26" title="">2023</a>)</cite>.
However, the untimeliness and cost of knowledge updates <cite class="ltx_cite ltx_citemacro_cite">Kasai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib12" title="">2022</a>)</cite> together with hallucinations issues of LLMs <cite class="ltx_cite ltx_citemacro_cite">Rawte et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib19" title="">2023</a>)</cite> have curtailed their applications in knowledge-intensive tasks to a large extent <cite class="ltx_cite ltx_citemacro_cite">Mallen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib14" title="">2023</a>)</cite>, where retrieval-augmented generation (RAG) approaches that prepending documents to the query without updating the underlying language models would come in handy <cite class="ltx_cite ltx_citemacro_cite">Ram et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib18" title="">2023</a>); Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib1" title="">2023a</a>)</cite>.
Nevertheless, existing retrieval-augmented generation approaches are typically similarity-based <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib10" title="">2023</a>)</cite>, <em class="ltx_emph ltx_font_italic" id="S1.p1.1.1">i.e.,</em> they retrieve documents from external corpus based on similarity. Then, the retrieved documents are prepended as context for LLMs at once or independently for generation augmentation <cite class="ltx_cite ltx_citemacro_cite">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib21" title="">2023</a>)</cite>. In total, these approaches have been found to outperform purely parametric
LLMs <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib10" title="">2023</a>)</cite>, especially in some knowledge-intensive generation tasks <cite class="ltx_cite ltx_citemacro_cite">Kwiatkowski et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib13" title="">2019</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">In this work, we argue that similarity is not always the “panacea” for retrieval-augmented generation and totally relying on similarity would sometimes degrade the performance.
As is shown in the upper part of Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#footnote1" title="footnote 1 ‣ Figure 1 ‣ 1 Introduction ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">1</span></a>, when a user types in the query “Tell me about author George RR Martin”, a similarity-driven retrieval system would rank the documents in a given corpus according to similarity metrics, <em class="ltx_emph ltx_font_italic" id="S1.p2.1.1">i.e.,</em> the semantic relevance or TF-IDF based metric <cite class="ltx_cite ltx_citemacro_cite">Robertson and Zaragoza (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib20" title="">2009</a>)</cite>. Even though the retrieved documents barely provide useful information, <em class="ltx_emph ltx_font_italic" id="S1.p2.1.2">e.g.,</em> “George RR Martin is an author”, it would rank higher due to high similarity score and the document that states the publications “The Song of Ice and Fire” of George RR Martin with higher information gain would rank lower due to inadequate low similarity score. Besides, given the fact that the retrieved documents are often more than one, using them in isolation due to the context limitation of LLMs <cite class="ltx_cite ltx_citemacro_cite">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib21" title="">2023</a>)</cite> or simply aggregating the Top-<math alttext="k" class="ltx_Math" display="inline" id="S1.p2.1.m1.1"><semantics id="S1.p2.1.m1.1a"><mi id="S1.p2.1.m1.1.1" xref="S1.p2.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S1.p2.1.m1.1b"><ci id="S1.p2.1.m1.1.1.cmml" xref="S1.p2.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S1.p2.1.m1.1d">italic_k</annotation></semantics></math> document without considering the relationships between them makes it difficult to capture the commonalities and characteristics among them and even confuse LLMs due to excessive text length thus incurring information loss and probably performance degradation <cite class="ltx_cite ltx_citemacro_cite">Mallen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib14" title="">2023</a>)</cite>.</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="337" id="S1.F1.g1" src="x1.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>A toy example illustrating the difference between similarity and utility, where the score of similarity model is given by BGE<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://github.com/FlagOpen/FlagEmbedding</span></span></span>. Can we reunite the virtues of both worlds and come up with a better model?</figcaption>
</figure>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Given the above limitations in current approaches, beyond similarity we aim to endow retrieval-augmented generation with multi-layered thoughts (<em class="ltx_emph ltx_font_italic" id="S1.p3.1.1">i.e.,</em> utility- and compactness-oriented thoughts) for performance boosting.
However, the solution is quite non-trivial, which needs to tackle the following essential challenges:
(<span class="ltx_text ltx_font_bold" id="S1.p3.1.2">C1</span>) To train a model that is capable of perceiving utility-oriented thoughts rather than solely similarity, external labeled data is required.
However, it is hard to obtain external labeled data for guiding the learning process with explicit supervision. Though LLMs can serve as data annotators and come up with high-quality corpus for model training and have demonstrated their tremendous capability in many circumstances, the innate uncontrollable and instability characteristics would sometimes deteriorate the performance.
(<span class="ltx_text ltx_font_bold" id="S1.p3.1.3">C2</span>) With high-quality retrieved documents, to reduce the burden that dozens of documents impose on LLMs and better capture the commonalities and characteristics between retrieved documents, document summarization is plausible. However, simple summarization cannot guarantee that the most important information <em class="ltx_emph ltx_font_italic" id="S1.p3.1.4">w.r.t.</em> the input query can be retained, hence there is need to train a summarization model that aligns with the task itself thus possessing compactness-oriented thoughts.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">To this end, we propose <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.1">MetRag</span>.
In particular, with an LLM serves as supervision on document utility <em class="ltx_emph ltx_font_italic" id="S1.p4.1.2">w.r.t.</em> the input query, we come up with a utility model that aligns itself with the LLM’s feedback such that beyond similarity it is also equipped with utility-oriented thoughts.
Considering that an LLM is strong most of time but sometimes would go out of control, yet dense retrievers trained on labelled corpus remain stable with relevance guarantee, though sometimes useless, we further combine similarity- and utility-oriented thoughts and takes the output of a similarity model and a utility model into consideration (<span class="ltx_text ltx_font_bold" id="S1.p4.1.3">C1</span>), as depicted in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#footnote1" title="footnote 1 ‣ Figure 1 ‣ 1 Introduction ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">1</span></a>.
Furthermore, to endow the summarization model with compactness-oriented thoughts, we first distill the summary ability from a strong teacher model (<em class="ltx_emph ltx_font_italic" id="S1.p4.1.4">e.g.,</em> GPT4). Afterwards with multiple generated summaries, a subsequent reward model is utilized to further constrain the summarization model to align with the end task (<span class="ltx_text ltx_font_bold" id="S1.p4.1.5">C2</span>).
With the multi-layered thoughts derived from the precedent stages, an LLM is called for knowledge-augmented generation.
At last, we evaluate the proposed <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.6">MetRag</span> on multiple knowledge-extensive tasks, extensive experiments and analysis have demonstrated the superiority of the proposed method.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related work</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Retrieval-Augmented Generation</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">Retrieval-Augmented Generation (RAG) approaches <cite class="ltx_cite ltx_citemacro_cite">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib6" title="">2023</a>); Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib1" title="">2023a</a>); Ram et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib18" title="">2023</a>)</cite> tend to enhance LLMs following a retrieve-then-read pipeline when given the input query, which first retrieve a set of documents from the external corpus, and then utilize the retrieved documents as side information for an LLM to make the final prediction. This pipeline has demonstrated their superior performance, especially in knowledge-intensive tasks by fine-tuning or directly prepending to LLMs <cite class="ltx_cite ltx_citemacro_cite">Hu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib8" title="">2022</a>); Izacard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib9" title="">2023</a>)</cite>.
However, the essence of RAG is the quality of retrieved passages, yet plenty of existing approaches rely on similarity-based retrieval <cite class="ltx_cite ltx_citemacro_cite">Xu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib24" title="">2023</a>); Mallen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib14" title="">2023</a>)</cite> that tend to ignore the underlying utility of associated passages. Though Self-RAG, REPLUG <cite class="ltx_cite ltx_citemacro_cite">Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib2" title="">2023b</a>); Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib21" title="">2023</a>)</cite> have made progress in introducing the power of LLMs in augmenting retrieval ability and even achieve adaptive retrieval, purely depending on the capability of LLMs can
be dangerous since the innate “uncontrollable” characteristics of LLMs would sometimes degrade the performance. Furthermore, they tend to ignore the potential inner relationships among retrieved passages and utilize them in isolation, which deteriorate the performance.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Task-Oriented Summarization</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Large language models (LLMs) <cite class="ltx_cite ltx_citemacro_cite">Zhao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib25" title="">2023</a>); OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib15" title="">2023a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib16" title="">b</a>)</cite> have made remarkable achievements in a variety of domains such as question answering, and summarization. However, calling large-scale commercial LLMs are of high cost and may induce data leakage issue, hence many approaches have been devoted to distilling the ability of large-scale LLMs (<em class="ltx_emph ltx_font_italic" id="S2.SS2.p1.1.1">e.g.,</em> ChatGPT <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib15" title="">2023a</a>)</cite>) to small-scale LLMs (<em class="ltx_emph ltx_font_italic" id="S2.SS2.p1.1.2">e.g.,</em> Llama2 <cite class="ltx_cite ltx_citemacro_cite">Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib22" title="">2023</a>)</cite>) and enhance their capabilities for downstream tasks, <em class="ltx_emph ltx_font_italic" id="S2.SS2.p1.1.3">e.g.,</em> generate high-quality summary through distillation <cite class="ltx_cite ltx_citemacro_cite">Jung et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib11" title="">2023</a>)</cite>. However, for knowledge-intensive tasks, simple summarization is far from optimized because it cannot ensure that the most important information relevant to the input query is retained, hence it is necessary to generate the summary associated with downstream tasks. Though RECOMP <cite class="ltx_cite ltx_citemacro_cite">Xu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib24" title="">2023</a>)</cite> has made its step to train the summarization model for enhancing performance in tasks such as question answer and language modeling, it purely designs intricate samples and performs distillation without further aligning strategy for performance boosting, which downgrades its performance in applications.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>The proposed approach</h2>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="466" id="S3.F2.g1" src="x2.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>The proposed <span class="ltx_text ltx_font_smallcaps" id="S3.F2.2.1">MetRag</span> framework, where we endow retrieval-augmented generation with multi-layered thoughts from Stage I and II, and utilize the derived knowledge in Stage III for answer generation.</figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Overview</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">In this work, we propose <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p1.1.1">MetRag</span>, as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.F2" title="Figure 2 ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">2</span></a>. <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p1.1.2">MetRag</span> endows retrieval-augmented generation with multi-layered thoughts by firstly embracing LLM’s supervision for utility-oriented thoughts and combining similarity and utility of documents for performance boosting (<span class="ltx_text ltx_font_bold" id="S3.SS1.p1.1.3">I</span>, detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS2" title="3.2 A Tale of Two “Models” ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3.2</span></a>) and further pursuing compactness-oriented thoughts via a task-adaptive summarizer (<span class="ltx_text ltx_font_bold" id="S3.SS1.p1.1.4">II</span>, detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS3" title="3.3 Pursuit of Compactness-oriented Thoughts ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3.3</span></a>), finally incorporating the derived multi-layered thoughts for answer generation (<span class="ltx_text ltx_font_bold" id="S3.SS1.p1.1.5">III</span>, detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S3.SS4" title="3.4 Knowledge-augmented Generation ‣ 3 The proposed approach ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3.4</span></a>).</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>A Tale of Two “Models”</h3>
<section class="ltx_subsubsection" id="S3.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1 </span>Similarity Model as an Off-the-shelf Retriever</h4>
<div class="ltx_para" id="S3.SS2.SSS1.p1">
<p class="ltx_p" id="S3.SS2.SSS1.p1.6">Given an input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.1.m1.1"><semantics id="S3.SS2.SSS1.p1.1.m1.1a"><mi id="S3.SS2.SSS1.p1.1.m1.1.1" xref="S3.SS2.SSS1.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.1.m1.1b"><ci id="S3.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.1.m1.1d">italic_q</annotation></semantics></math>, an off-the-shelf dense retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.2.m2.1"><semantics id="S3.SS2.SSS1.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p1.2.m2.1.1" xref="S3.SS2.SSS1.p1.2.m2.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.2.m2.1b"><ci id="S3.SS2.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p1.2.m2.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.2.m2.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.2.m2.1d">caligraphic_R</annotation></semantics></math> is incorporated to map the input to a low-dimensional embedding <math alttext="\mathbf{E}(\cdot)" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.3.m3.1"><semantics id="S3.SS2.SSS1.p1.3.m3.1a"><mrow id="S3.SS2.SSS1.p1.3.m3.1.2" xref="S3.SS2.SSS1.p1.3.m3.1.2.cmml"><mi id="S3.SS2.SSS1.p1.3.m3.1.2.2" xref="S3.SS2.SSS1.p1.3.m3.1.2.2.cmml">𝐄</mi><mo id="S3.SS2.SSS1.p1.3.m3.1.2.1" xref="S3.SS2.SSS1.p1.3.m3.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.SSS1.p1.3.m3.1.2.3.2" xref="S3.SS2.SSS1.p1.3.m3.1.2.cmml"><mo id="S3.SS2.SSS1.p1.3.m3.1.2.3.2.1" stretchy="false" xref="S3.SS2.SSS1.p1.3.m3.1.2.cmml">(</mo><mo id="S3.SS2.SSS1.p1.3.m3.1.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.3.m3.1.1.cmml">⋅</mo><mo id="S3.SS2.SSS1.p1.3.m3.1.2.3.2.2" stretchy="false" xref="S3.SS2.SSS1.p1.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.3.m3.1b"><apply id="S3.SS2.SSS1.p1.3.m3.1.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.2"><times id="S3.SS2.SSS1.p1.3.m3.1.2.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.2.1"></times><ci id="S3.SS2.SSS1.p1.3.m3.1.2.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.2.2">𝐄</ci><ci id="S3.SS2.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.3.m3.1c">\mathbf{E}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.3.m3.1d">bold_E ( ⋅ )</annotation></semantics></math> such that we can efficiently retrieve relevant documents <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS1.p1.6.1">w.r.t.</em> query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.4.m4.1"><semantics id="S3.SS2.SSS1.p1.4.m4.1a"><mi id="S3.SS2.SSS1.p1.4.m4.1.1" xref="S3.SS2.SSS1.p1.4.m4.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.4.m4.1b"><ci id="S3.SS2.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.4.m4.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.4.m4.1d">italic_q</annotation></semantics></math> from a given corpus <math alttext="\mathcal{D}=\{d_{1},d_{2},...,d_{n}\}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.5.m5.4"><semantics id="S3.SS2.SSS1.p1.5.m5.4a"><mrow id="S3.SS2.SSS1.p1.5.m5.4.4" xref="S3.SS2.SSS1.p1.5.m5.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p1.5.m5.4.4.5" xref="S3.SS2.SSS1.p1.5.m5.4.4.5.cmml">𝒟</mi><mo id="S3.SS2.SSS1.p1.5.m5.4.4.4" xref="S3.SS2.SSS1.p1.5.m5.4.4.4.cmml">=</mo><mrow id="S3.SS2.SSS1.p1.5.m5.4.4.3.3" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml"><mo id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.4" stretchy="false" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml">{</mo><msub id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.cmml"><mi id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.2" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.2.cmml">d</mi><mn id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.3" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.5" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml">,</mo><msub id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.cmml"><mi id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.2" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.2.cmml">d</mi><mn id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.3" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.6" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml">,</mo><mi id="S3.SS2.SSS1.p1.5.m5.1.1" mathvariant="normal" xref="S3.SS2.SSS1.p1.5.m5.1.1.cmml">…</mi><mo id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.7" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml">,</mo><msub id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.cmml"><mi id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.2" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.2.cmml">d</mi><mi id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.3" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.3.cmml">n</mi></msub><mo id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.8" stretchy="false" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.5.m5.4b"><apply id="S3.SS2.SSS1.p1.5.m5.4.4.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4"><eq id="S3.SS2.SSS1.p1.5.m5.4.4.4.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.4"></eq><ci id="S3.SS2.SSS1.p1.5.m5.4.4.5.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.5">𝒟</ci><set id="S3.SS2.SSS1.p1.5.m5.4.4.3.4.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3"><apply id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1">subscript</csymbol><ci id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.2">𝑑</ci><cn id="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS2.SSS1.p1.5.m5.2.2.1.1.1.3">1</cn></apply><apply id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2">subscript</csymbol><ci id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.2">𝑑</ci><cn id="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.3.cmml" type="integer" xref="S3.SS2.SSS1.p1.5.m5.3.3.2.2.2.3">2</cn></apply><ci id="S3.SS2.SSS1.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">…</ci><apply id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3">subscript</csymbol><ci id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.2">𝑑</ci><ci id="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.3.cmml" xref="S3.SS2.SSS1.p1.5.m5.4.4.3.3.3.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.5.m5.4c">\mathcal{D}=\{d_{1},d_{2},...,d_{n}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.5.m5.4d">caligraphic_D = { italic_d start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_d start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , … , italic_d start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> via a predefined similarity metric <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.6.m6.1"><semantics id="S3.SS2.SSS1.p1.6.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p1.6.m6.1.1" xref="S3.SS2.SSS1.p1.6.m6.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.6.m6.1b"><ci id="S3.SS2.SSS1.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.6.m6.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.6.m6.1d">caligraphic_M</annotation></semantics></math> (which could be cosine similarity and so on), where the similarity score between the query and document can be computed as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="s(q,d)=\mathcal{M}(\mathbf{E}(q),\mathbf{E}(d))" class="ltx_Math" display="block" id="S3.E1.m1.6"><semantics id="S3.E1.m1.6a"><mrow id="S3.E1.m1.6.6" xref="S3.E1.m1.6.6.cmml"><mrow id="S3.E1.m1.6.6.4" xref="S3.E1.m1.6.6.4.cmml"><mi id="S3.E1.m1.6.6.4.2" xref="S3.E1.m1.6.6.4.2.cmml">s</mi><mo id="S3.E1.m1.6.6.4.1" xref="S3.E1.m1.6.6.4.1.cmml">⁢</mo><mrow id="S3.E1.m1.6.6.4.3.2" xref="S3.E1.m1.6.6.4.3.1.cmml"><mo id="S3.E1.m1.6.6.4.3.2.1" stretchy="false" xref="S3.E1.m1.6.6.4.3.1.cmml">(</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">q</mi><mo id="S3.E1.m1.6.6.4.3.2.2" xref="S3.E1.m1.6.6.4.3.1.cmml">,</mo><mi id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">d</mi><mo id="S3.E1.m1.6.6.4.3.2.3" stretchy="false" xref="S3.E1.m1.6.6.4.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.6.6.3" xref="S3.E1.m1.6.6.3.cmml">=</mo><mrow id="S3.E1.m1.6.6.2" xref="S3.E1.m1.6.6.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.6.6.2.4" xref="S3.E1.m1.6.6.2.4.cmml">ℳ</mi><mo id="S3.E1.m1.6.6.2.3" xref="S3.E1.m1.6.6.2.3.cmml">⁢</mo><mrow id="S3.E1.m1.6.6.2.2.2" xref="S3.E1.m1.6.6.2.2.3.cmml"><mo id="S3.E1.m1.6.6.2.2.2.3" stretchy="false" xref="S3.E1.m1.6.6.2.2.3.cmml">(</mo><mrow id="S3.E1.m1.5.5.1.1.1.1" xref="S3.E1.m1.5.5.1.1.1.1.cmml"><mi id="S3.E1.m1.5.5.1.1.1.1.2" xref="S3.E1.m1.5.5.1.1.1.1.2.cmml">𝐄</mi><mo id="S3.E1.m1.5.5.1.1.1.1.1" xref="S3.E1.m1.5.5.1.1.1.1.1.cmml">⁢</mo><mrow id="S3.E1.m1.5.5.1.1.1.1.3.2" xref="S3.E1.m1.5.5.1.1.1.1.cmml"><mo id="S3.E1.m1.5.5.1.1.1.1.3.2.1" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.1.cmml">(</mo><mi id="S3.E1.m1.3.3" xref="S3.E1.m1.3.3.cmml">q</mi><mo id="S3.E1.m1.5.5.1.1.1.1.3.2.2" stretchy="false" xref="S3.E1.m1.5.5.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.6.6.2.2.2.4" xref="S3.E1.m1.6.6.2.2.3.cmml">,</mo><mrow id="S3.E1.m1.6.6.2.2.2.2" xref="S3.E1.m1.6.6.2.2.2.2.cmml"><mi id="S3.E1.m1.6.6.2.2.2.2.2" xref="S3.E1.m1.6.6.2.2.2.2.2.cmml">𝐄</mi><mo id="S3.E1.m1.6.6.2.2.2.2.1" xref="S3.E1.m1.6.6.2.2.2.2.1.cmml">⁢</mo><mrow id="S3.E1.m1.6.6.2.2.2.2.3.2" xref="S3.E1.m1.6.6.2.2.2.2.cmml"><mo id="S3.E1.m1.6.6.2.2.2.2.3.2.1" stretchy="false" xref="S3.E1.m1.6.6.2.2.2.2.cmml">(</mo><mi id="S3.E1.m1.4.4" xref="S3.E1.m1.4.4.cmml">d</mi><mo id="S3.E1.m1.6.6.2.2.2.2.3.2.2" stretchy="false" xref="S3.E1.m1.6.6.2.2.2.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.6.6.2.2.2.5" stretchy="false" xref="S3.E1.m1.6.6.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.6b"><apply id="S3.E1.m1.6.6.cmml" xref="S3.E1.m1.6.6"><eq id="S3.E1.m1.6.6.3.cmml" xref="S3.E1.m1.6.6.3"></eq><apply id="S3.E1.m1.6.6.4.cmml" xref="S3.E1.m1.6.6.4"><times id="S3.E1.m1.6.6.4.1.cmml" xref="S3.E1.m1.6.6.4.1"></times><ci id="S3.E1.m1.6.6.4.2.cmml" xref="S3.E1.m1.6.6.4.2">𝑠</ci><interval closure="open" id="S3.E1.m1.6.6.4.3.1.cmml" xref="S3.E1.m1.6.6.4.3.2"><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">𝑞</ci><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">𝑑</ci></interval></apply><apply id="S3.E1.m1.6.6.2.cmml" xref="S3.E1.m1.6.6.2"><times id="S3.E1.m1.6.6.2.3.cmml" xref="S3.E1.m1.6.6.2.3"></times><ci id="S3.E1.m1.6.6.2.4.cmml" xref="S3.E1.m1.6.6.2.4">ℳ</ci><interval closure="open" id="S3.E1.m1.6.6.2.2.3.cmml" xref="S3.E1.m1.6.6.2.2.2"><apply id="S3.E1.m1.5.5.1.1.1.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1"><times id="S3.E1.m1.5.5.1.1.1.1.1.cmml" xref="S3.E1.m1.5.5.1.1.1.1.1"></times><ci id="S3.E1.m1.5.5.1.1.1.1.2.cmml" xref="S3.E1.m1.5.5.1.1.1.1.2">𝐄</ci><ci id="S3.E1.m1.3.3.cmml" xref="S3.E1.m1.3.3">𝑞</ci></apply><apply id="S3.E1.m1.6.6.2.2.2.2.cmml" xref="S3.E1.m1.6.6.2.2.2.2"><times id="S3.E1.m1.6.6.2.2.2.2.1.cmml" xref="S3.E1.m1.6.6.2.2.2.2.1"></times><ci id="S3.E1.m1.6.6.2.2.2.2.2.cmml" xref="S3.E1.m1.6.6.2.2.2.2.2">𝐄</ci><ci id="S3.E1.m1.4.4.cmml" xref="S3.E1.m1.4.4">𝑑</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.6c">s(q,d)=\mathcal{M}(\mathbf{E}(q),\mathbf{E}(d))</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.6d">italic_s ( italic_q , italic_d ) = caligraphic_M ( bold_E ( italic_q ) , bold_E ( italic_d ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.SSS1.p1.9">With the derived similarity scores, the Top-<math alttext="k" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.7.m1.1"><semantics id="S3.SS2.SSS1.p1.7.m1.1a"><mi id="S3.SS2.SSS1.p1.7.m1.1.1" xref="S3.SS2.SSS1.p1.7.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.7.m1.1b"><ci id="S3.SS2.SSS1.p1.7.m1.1.1.cmml" xref="S3.SS2.SSS1.p1.7.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.7.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.7.m1.1d">italic_k</annotation></semantics></math> documents <math alttext="\mathcal{D^{*}}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.8.m2.1"><semantics id="S3.SS2.SSS1.p1.8.m2.1a"><msup id="S3.SS2.SSS1.p1.8.m2.1.1" xref="S3.SS2.SSS1.p1.8.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p1.8.m2.1.1.2" xref="S3.SS2.SSS1.p1.8.m2.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.SSS1.p1.8.m2.1.1.3" xref="S3.SS2.SSS1.p1.8.m2.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.8.m2.1b"><apply id="S3.SS2.SSS1.p1.8.m2.1.1.cmml" xref="S3.SS2.SSS1.p1.8.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.8.m2.1.1.1.cmml" xref="S3.SS2.SSS1.p1.8.m2.1.1">superscript</csymbol><ci id="S3.SS2.SSS1.p1.8.m2.1.1.2.cmml" xref="S3.SS2.SSS1.p1.8.m2.1.1.2">𝒟</ci><times id="S3.SS2.SSS1.p1.8.m2.1.1.3.cmml" xref="S3.SS2.SSS1.p1.8.m2.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.8.m2.1c">\mathcal{D^{*}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.8.m2.1d">caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math> that have the highest similarity scores <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS1.p1.9.1">w.r.t.</em> input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.9.m3.1"><semantics id="S3.SS2.SSS1.p1.9.m3.1a"><mi id="S3.SS2.SSS1.p1.9.m3.1.1" xref="S3.SS2.SSS1.p1.9.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.9.m3.1b"><ci id="S3.SS2.SSS1.p1.9.m3.1.1.cmml" xref="S3.SS2.SSS1.p1.9.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.9.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.9.m3.1d">italic_q</annotation></semantics></math> are retrieved for enhancing follow-up tasks.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2 </span>LLM’s Supervision Empowered Utility Model</h4>
<div class="ltx_para" id="S3.SS2.SSS2.p1">
<p class="ltx_p" id="S3.SS2.SSS2.p1.1">In this work, we argue that similarity is not always the “panacea” for information retrieval and totally relying on similarity would sometimes degrade the performance of retrieval-augmented generation approaches. As is illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#footnote1" title="footnote 1 ‣ Figure 1 ‣ 1 Introduction ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">1</span></a>, document with higher information gain to the input query would rank lower due to inadequate low similarity score. Inspired by the great success of LLMs in a variety of tasks, we aim to incorporate an LLM for supervision on document utility (In this paper, we define the utility of one document <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS2.p1.1.1">w.r.t.</em> a question by its usefulness in assisting an LLM to answer this question, which is modelled by the normalization of the probability of generating correct answers with a specific LLM.) <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS2.p1.1.2">w.r.t.</em> the input query to endow the retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.1.m1.1"><semantics id="S3.SS2.SSS2.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p1.1.m1.1.1" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b"><ci id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.1.m1.1d">caligraphic_R</annotation></semantics></math> with utility-oriented thoughts.</p>
</div>
<div class="ltx_para" id="S3.SS2.SSS2.p2">
<p class="ltx_p" id="S3.SS2.SSS2.p2.6">To start with, given the Top-<math alttext="n" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.1.m1.1"><semantics id="S3.SS2.SSS2.p2.1.m1.1a"><mi id="S3.SS2.SSS2.p2.1.m1.1.1" xref="S3.SS2.SSS2.p2.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.1.m1.1b"><ci id="S3.SS2.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.1.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.1.m1.1d">italic_n</annotation></semantics></math> documents set <math alttext="\mathcal{D^{\bullet}}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.2.m2.1"><semantics id="S3.SS2.SSS2.p2.2.m2.1a"><msup id="S3.SS2.SSS2.p2.2.m2.1.1" xref="S3.SS2.SSS2.p2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.2.m2.1.1.2" xref="S3.SS2.SSS2.p2.2.m2.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.SSS2.p2.2.m2.1.1.3" xref="S3.SS2.SSS2.p2.2.m2.1.1.3.cmml">∙</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.2.m2.1b"><apply id="S3.SS2.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.1.1.2">𝒟</ci><ci id="S3.SS2.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.1.1.3">∙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.2.m2.1c">\mathcal{D^{\bullet}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.2.m2.1d">caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT</annotation></semantics></math> (<math alttext="\mathcal{D}^{\bullet}\subseteq\mathcal{D^{*}}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.3.m3.1"><semantics id="S3.SS2.SSS2.p2.3.m3.1a"><mrow id="S3.SS2.SSS2.p2.3.m3.1.1" xref="S3.SS2.SSS2.p2.3.m3.1.1.cmml"><msup id="S3.SS2.SSS2.p2.3.m3.1.1.2" xref="S3.SS2.SSS2.p2.3.m3.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.3.m3.1.1.2.2" xref="S3.SS2.SSS2.p2.3.m3.1.1.2.2.cmml">𝒟</mi><mo id="S3.SS2.SSS2.p2.3.m3.1.1.2.3" xref="S3.SS2.SSS2.p2.3.m3.1.1.2.3.cmml">∙</mo></msup><mo id="S3.SS2.SSS2.p2.3.m3.1.1.1" xref="S3.SS2.SSS2.p2.3.m3.1.1.1.cmml">⊆</mo><msup id="S3.SS2.SSS2.p2.3.m3.1.1.3" xref="S3.SS2.SSS2.p2.3.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.3.m3.1.1.3.2" xref="S3.SS2.SSS2.p2.3.m3.1.1.3.2.cmml">𝒟</mi><mo id="S3.SS2.SSS2.p2.3.m3.1.1.3.3" xref="S3.SS2.SSS2.p2.3.m3.1.1.3.3.cmml">∗</mo></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.3.m3.1b"><apply id="S3.SS2.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1"><subset id="S3.SS2.SSS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.1"></subset><apply id="S3.SS2.SSS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.3.m3.1.1.2.1.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.2">superscript</csymbol><ci id="S3.SS2.SSS2.p2.3.m3.1.1.2.2.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.2.2">𝒟</ci><ci id="S3.SS2.SSS2.p2.3.m3.1.1.2.3.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.2.3">∙</ci></apply><apply id="S3.SS2.SSS2.p2.3.m3.1.1.3.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.3.m3.1.1.3.1.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.3">superscript</csymbol><ci id="S3.SS2.SSS2.p2.3.m3.1.1.3.2.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.3.2">𝒟</ci><times id="S3.SS2.SSS2.p2.3.m3.1.1.3.3.cmml" xref="S3.SS2.SSS2.p2.3.m3.1.1.3.3"></times></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.3.m3.1c">\mathcal{D}^{\bullet}\subseteq\mathcal{D^{*}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.3.m3.1d">caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT ⊆ caligraphic_D start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>) that a retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.4.m4.1"><semantics id="S3.SS2.SSS2.p2.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.4.m4.1.1" xref="S3.SS2.SSS2.p2.4.m4.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.4.m4.1b"><ci id="S3.SS2.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS2.SSS2.p2.4.m4.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.4.m4.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.4.m4.1d">caligraphic_R</annotation></semantics></math> considers most similar to the input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.5.m5.1"><semantics id="S3.SS2.SSS2.p2.5.m5.1a"><mi id="S3.SS2.SSS2.p2.5.m5.1.1" xref="S3.SS2.SSS2.p2.5.m5.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.5.m5.1b"><ci id="S3.SS2.SSS2.p2.5.m5.1.1.cmml" xref="S3.SS2.SSS2.p2.5.m5.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.5.m5.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.5.m5.1d">italic_q</annotation></semantics></math>, the approximated similarity likelihood of each document <math alttext="d" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.6.m6.1"><semantics id="S3.SS2.SSS2.p2.6.m6.1a"><mi id="S3.SS2.SSS2.p2.6.m6.1.1" xref="S3.SS2.SSS2.p2.6.m6.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.6.m6.1b"><ci id="S3.SS2.SSS2.p2.6.m6.1.1.cmml" xref="S3.SS2.SSS2.p2.6.m6.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.6.m6.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.6.m6.1d">italic_d</annotation></semantics></math> can be formalized as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbf{P}_{\mathcal{R}}(d|q)=\frac{e^{\mathcal{M}(q,d)/\tau}}{\sum_{d\in%
\mathcal{D}^{\bullet}}e^{\mathcal{M}(q,d)/\tau}}," class="ltx_Math" display="block" id="S3.E2.m1.5"><semantics id="S3.E2.m1.5a"><mrow id="S3.E2.m1.5.5.1" xref="S3.E2.m1.5.5.1.1.cmml"><mrow id="S3.E2.m1.5.5.1.1" xref="S3.E2.m1.5.5.1.1.cmml"><mrow id="S3.E2.m1.5.5.1.1.1" xref="S3.E2.m1.5.5.1.1.1.cmml"><msub id="S3.E2.m1.5.5.1.1.1.3" xref="S3.E2.m1.5.5.1.1.1.3.cmml"><mi id="S3.E2.m1.5.5.1.1.1.3.2" xref="S3.E2.m1.5.5.1.1.1.3.2.cmml">𝐏</mi><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.5.5.1.1.1.3.3" xref="S3.E2.m1.5.5.1.1.1.3.3.cmml">ℛ</mi></msub><mo id="S3.E2.m1.5.5.1.1.1.2" xref="S3.E2.m1.5.5.1.1.1.2.cmml">⁢</mo><mrow id="S3.E2.m1.5.5.1.1.1.1.1" xref="S3.E2.m1.5.5.1.1.1.1.1.1.cmml"><mo id="S3.E2.m1.5.5.1.1.1.1.1.2" stretchy="false" xref="S3.E2.m1.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E2.m1.5.5.1.1.1.1.1.1" xref="S3.E2.m1.5.5.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.5.5.1.1.1.1.1.1.2" xref="S3.E2.m1.5.5.1.1.1.1.1.1.2.cmml">d</mi><mo fence="false" id="S3.E2.m1.5.5.1.1.1.1.1.1.1" xref="S3.E2.m1.5.5.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E2.m1.5.5.1.1.1.1.1.1.3" xref="S3.E2.m1.5.5.1.1.1.1.1.1.3.cmml">q</mi></mrow><mo id="S3.E2.m1.5.5.1.1.1.1.1.3" stretchy="false" xref="S3.E2.m1.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.5.5.1.1.2" xref="S3.E2.m1.5.5.1.1.2.cmml">=</mo><mfrac id="S3.E2.m1.4.4" xref="S3.E2.m1.4.4.cmml"><msup id="S3.E2.m1.2.2.2" xref="S3.E2.m1.2.2.2.cmml"><mi id="S3.E2.m1.2.2.2.4" xref="S3.E2.m1.2.2.2.4.cmml">e</mi><mrow id="S3.E2.m1.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.cmml"><mrow id="S3.E2.m1.2.2.2.2.2.4" xref="S3.E2.m1.2.2.2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.2.2.2.2.2.4.2" xref="S3.E2.m1.2.2.2.2.2.4.2.cmml">ℳ</mi><mo id="S3.E2.m1.2.2.2.2.2.4.1" xref="S3.E2.m1.2.2.2.2.2.4.1.cmml">⁢</mo><mrow id="S3.E2.m1.2.2.2.2.2.4.3.2" xref="S3.E2.m1.2.2.2.2.2.4.3.1.cmml"><mo id="S3.E2.m1.2.2.2.2.2.4.3.2.1" stretchy="false" xref="S3.E2.m1.2.2.2.2.2.4.3.1.cmml">(</mo><mi id="S3.E2.m1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.cmml">q</mi><mo id="S3.E2.m1.2.2.2.2.2.4.3.2.2" xref="S3.E2.m1.2.2.2.2.2.4.3.1.cmml">,</mo><mi id="S3.E2.m1.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.cmml">d</mi><mo id="S3.E2.m1.2.2.2.2.2.4.3.2.3" stretchy="false" xref="S3.E2.m1.2.2.2.2.2.4.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.2.2.2.2.2.3" xref="S3.E2.m1.2.2.2.2.2.3.cmml">/</mo><mi id="S3.E2.m1.2.2.2.2.2.5" xref="S3.E2.m1.2.2.2.2.2.5.cmml">τ</mi></mrow></msup><mrow id="S3.E2.m1.4.4.4" xref="S3.E2.m1.4.4.4.cmml"><msub id="S3.E2.m1.4.4.4.3" xref="S3.E2.m1.4.4.4.3.cmml"><mo id="S3.E2.m1.4.4.4.3.2" xref="S3.E2.m1.4.4.4.3.2.cmml">∑</mo><mrow id="S3.E2.m1.4.4.4.3.3" xref="S3.E2.m1.4.4.4.3.3.cmml"><mi id="S3.E2.m1.4.4.4.3.3.2" xref="S3.E2.m1.4.4.4.3.3.2.cmml">d</mi><mo id="S3.E2.m1.4.4.4.3.3.1" xref="S3.E2.m1.4.4.4.3.3.1.cmml">∈</mo><msup id="S3.E2.m1.4.4.4.3.3.3" xref="S3.E2.m1.4.4.4.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.4.4.4.3.3.3.2" xref="S3.E2.m1.4.4.4.3.3.3.2.cmml">𝒟</mi><mo id="S3.E2.m1.4.4.4.3.3.3.3" xref="S3.E2.m1.4.4.4.3.3.3.3.cmml">∙</mo></msup></mrow></msub><msup id="S3.E2.m1.4.4.4.4" xref="S3.E2.m1.4.4.4.4.cmml"><mi id="S3.E2.m1.4.4.4.4.2" xref="S3.E2.m1.4.4.4.4.2.cmml">e</mi><mrow id="S3.E2.m1.4.4.4.2.2" xref="S3.E2.m1.4.4.4.2.2.cmml"><mrow id="S3.E2.m1.4.4.4.2.2.4" xref="S3.E2.m1.4.4.4.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.4.4.4.2.2.4.2" xref="S3.E2.m1.4.4.4.2.2.4.2.cmml">ℳ</mi><mo id="S3.E2.m1.4.4.4.2.2.4.1" xref="S3.E2.m1.4.4.4.2.2.4.1.cmml">⁢</mo><mrow id="S3.E2.m1.4.4.4.2.2.4.3.2" xref="S3.E2.m1.4.4.4.2.2.4.3.1.cmml"><mo id="S3.E2.m1.4.4.4.2.2.4.3.2.1" stretchy="false" xref="S3.E2.m1.4.4.4.2.2.4.3.1.cmml">(</mo><mi id="S3.E2.m1.3.3.3.1.1.1" xref="S3.E2.m1.3.3.3.1.1.1.cmml">q</mi><mo id="S3.E2.m1.4.4.4.2.2.4.3.2.2" xref="S3.E2.m1.4.4.4.2.2.4.3.1.cmml">,</mo><mi id="S3.E2.m1.4.4.4.2.2.2" xref="S3.E2.m1.4.4.4.2.2.2.cmml">d</mi><mo id="S3.E2.m1.4.4.4.2.2.4.3.2.3" stretchy="false" xref="S3.E2.m1.4.4.4.2.2.4.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.4.4.4.2.2.3" xref="S3.E2.m1.4.4.4.2.2.3.cmml">/</mo><mi id="S3.E2.m1.4.4.4.2.2.5" xref="S3.E2.m1.4.4.4.2.2.5.cmml">τ</mi></mrow></msup></mrow></mfrac></mrow><mo id="S3.E2.m1.5.5.1.2" xref="S3.E2.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.5b"><apply id="S3.E2.m1.5.5.1.1.cmml" xref="S3.E2.m1.5.5.1"><eq id="S3.E2.m1.5.5.1.1.2.cmml" xref="S3.E2.m1.5.5.1.1.2"></eq><apply id="S3.E2.m1.5.5.1.1.1.cmml" xref="S3.E2.m1.5.5.1.1.1"><times id="S3.E2.m1.5.5.1.1.1.2.cmml" xref="S3.E2.m1.5.5.1.1.1.2"></times><apply id="S3.E2.m1.5.5.1.1.1.3.cmml" xref="S3.E2.m1.5.5.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.1.1.1.3.1.cmml" xref="S3.E2.m1.5.5.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.5.5.1.1.1.3.2.cmml" xref="S3.E2.m1.5.5.1.1.1.3.2">𝐏</ci><ci id="S3.E2.m1.5.5.1.1.1.3.3.cmml" xref="S3.E2.m1.5.5.1.1.1.3.3">ℛ</ci></apply><apply id="S3.E2.m1.5.5.1.1.1.1.1.1.cmml" xref="S3.E2.m1.5.5.1.1.1.1.1"><csymbol cd="latexml" id="S3.E2.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.5.5.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E2.m1.5.5.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.5.5.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.E2.m1.5.5.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.5.5.1.1.1.1.1.1.3">𝑞</ci></apply></apply><apply id="S3.E2.m1.4.4.cmml" xref="S3.E2.m1.4.4"><divide id="S3.E2.m1.4.4.5.cmml" xref="S3.E2.m1.4.4"></divide><apply id="S3.E2.m1.2.2.2.cmml" xref="S3.E2.m1.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2">superscript</csymbol><ci id="S3.E2.m1.2.2.2.4.cmml" xref="S3.E2.m1.2.2.2.4">𝑒</ci><apply id="S3.E2.m1.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2"><divide id="S3.E2.m1.2.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2.3"></divide><apply id="S3.E2.m1.2.2.2.2.2.4.cmml" xref="S3.E2.m1.2.2.2.2.2.4"><times id="S3.E2.m1.2.2.2.2.2.4.1.cmml" xref="S3.E2.m1.2.2.2.2.2.4.1"></times><ci id="S3.E2.m1.2.2.2.2.2.4.2.cmml" xref="S3.E2.m1.2.2.2.2.2.4.2">ℳ</ci><interval closure="open" id="S3.E2.m1.2.2.2.2.2.4.3.1.cmml" xref="S3.E2.m1.2.2.2.2.2.4.3.2"><ci id="S3.E2.m1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1">𝑞</ci><ci id="S3.E2.m1.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2">𝑑</ci></interval></apply><ci id="S3.E2.m1.2.2.2.2.2.5.cmml" xref="S3.E2.m1.2.2.2.2.2.5">𝜏</ci></apply></apply><apply id="S3.E2.m1.4.4.4.cmml" xref="S3.E2.m1.4.4.4"><apply id="S3.E2.m1.4.4.4.3.cmml" xref="S3.E2.m1.4.4.4.3"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.4.3.1.cmml" xref="S3.E2.m1.4.4.4.3">subscript</csymbol><sum id="S3.E2.m1.4.4.4.3.2.cmml" xref="S3.E2.m1.4.4.4.3.2"></sum><apply id="S3.E2.m1.4.4.4.3.3.cmml" xref="S3.E2.m1.4.4.4.3.3"><in id="S3.E2.m1.4.4.4.3.3.1.cmml" xref="S3.E2.m1.4.4.4.3.3.1"></in><ci id="S3.E2.m1.4.4.4.3.3.2.cmml" xref="S3.E2.m1.4.4.4.3.3.2">𝑑</ci><apply id="S3.E2.m1.4.4.4.3.3.3.cmml" xref="S3.E2.m1.4.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.4.3.3.3.1.cmml" xref="S3.E2.m1.4.4.4.3.3.3">superscript</csymbol><ci id="S3.E2.m1.4.4.4.3.3.3.2.cmml" xref="S3.E2.m1.4.4.4.3.3.3.2">𝒟</ci><ci id="S3.E2.m1.4.4.4.3.3.3.3.cmml" xref="S3.E2.m1.4.4.4.3.3.3.3">∙</ci></apply></apply></apply><apply id="S3.E2.m1.4.4.4.4.cmml" xref="S3.E2.m1.4.4.4.4"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.4.4.1.cmml" xref="S3.E2.m1.4.4.4.4">superscript</csymbol><ci id="S3.E2.m1.4.4.4.4.2.cmml" xref="S3.E2.m1.4.4.4.4.2">𝑒</ci><apply id="S3.E2.m1.4.4.4.2.2.cmml" xref="S3.E2.m1.4.4.4.2.2"><divide id="S3.E2.m1.4.4.4.2.2.3.cmml" xref="S3.E2.m1.4.4.4.2.2.3"></divide><apply id="S3.E2.m1.4.4.4.2.2.4.cmml" xref="S3.E2.m1.4.4.4.2.2.4"><times id="S3.E2.m1.4.4.4.2.2.4.1.cmml" xref="S3.E2.m1.4.4.4.2.2.4.1"></times><ci id="S3.E2.m1.4.4.4.2.2.4.2.cmml" xref="S3.E2.m1.4.4.4.2.2.4.2">ℳ</ci><interval closure="open" id="S3.E2.m1.4.4.4.2.2.4.3.1.cmml" xref="S3.E2.m1.4.4.4.2.2.4.3.2"><ci id="S3.E2.m1.3.3.3.1.1.1.cmml" xref="S3.E2.m1.3.3.3.1.1.1">𝑞</ci><ci id="S3.E2.m1.4.4.4.2.2.2.cmml" xref="S3.E2.m1.4.4.4.2.2.2">𝑑</ci></interval></apply><ci id="S3.E2.m1.4.4.4.2.2.5.cmml" xref="S3.E2.m1.4.4.4.2.2.5">𝜏</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.5c">\mathbf{P}_{\mathcal{R}}(d|q)=\frac{e^{\mathcal{M}(q,d)/\tau}}{\sum_{d\in%
\mathcal{D}^{\bullet}}e^{\mathcal{M}(q,d)/\tau}},</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.5d">bold_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT ( italic_d | italic_q ) = divide start_ARG italic_e start_POSTSUPERSCRIPT caligraphic_M ( italic_q , italic_d ) / italic_τ end_POSTSUPERSCRIPT end_ARG start_ARG ∑ start_POSTSUBSCRIPT italic_d ∈ caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT italic_e start_POSTSUPERSCRIPT caligraphic_M ( italic_q , italic_d ) / italic_τ end_POSTSUPERSCRIPT end_ARG ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.SSS2.p2.13">where <math alttext="\tau" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.7.m1.1"><semantics id="S3.SS2.SSS2.p2.7.m1.1a"><mi id="S3.SS2.SSS2.p2.7.m1.1.1" xref="S3.SS2.SSS2.p2.7.m1.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.7.m1.1b"><ci id="S3.SS2.SSS2.p2.7.m1.1.1.cmml" xref="S3.SS2.SSS2.p2.7.m1.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.7.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.7.m1.1d">italic_τ</annotation></semantics></math> is the temperature hyperparameter that controls the smoothness of probability distribution, with a higher <math alttext="\tau" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.8.m2.1"><semantics id="S3.SS2.SSS2.p2.8.m2.1a"><mi id="S3.SS2.SSS2.p2.8.m2.1.1" xref="S3.SS2.SSS2.p2.8.m2.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.8.m2.1b"><ci id="S3.SS2.SSS2.p2.8.m2.1.1.cmml" xref="S3.SS2.SSS2.p2.8.m2.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.8.m2.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.8.m2.1d">italic_τ</annotation></semantics></math> produces a softer probability distribution while a lower <math alttext="\tau" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.9.m3.1"><semantics id="S3.SS2.SSS2.p2.9.m3.1a"><mi id="S3.SS2.SSS2.p2.9.m3.1.1" xref="S3.SS2.SSS2.p2.9.m3.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.9.m3.1b"><ci id="S3.SS2.SSS2.p2.9.m3.1.1.cmml" xref="S3.SS2.SSS2.p2.9.m3.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.9.m3.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.9.m3.1d">italic_τ</annotation></semantics></math> results in a "harder" max operation and <math alttext="\mathcal{D}^{\bullet}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.10.m4.1"><semantics id="S3.SS2.SSS2.p2.10.m4.1a"><msup id="S3.SS2.SSS2.p2.10.m4.1.1" xref="S3.SS2.SSS2.p2.10.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.10.m4.1.1.2" xref="S3.SS2.SSS2.p2.10.m4.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.SSS2.p2.10.m4.1.1.3" xref="S3.SS2.SSS2.p2.10.m4.1.1.3.cmml">∙</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.10.m4.1b"><apply id="S3.SS2.SSS2.p2.10.m4.1.1.cmml" xref="S3.SS2.SSS2.p2.10.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.10.m4.1.1.1.cmml" xref="S3.SS2.SSS2.p2.10.m4.1.1">superscript</csymbol><ci id="S3.SS2.SSS2.p2.10.m4.1.1.2.cmml" xref="S3.SS2.SSS2.p2.10.m4.1.1.2">𝒟</ci><ci id="S3.SS2.SSS2.p2.10.m4.1.1.3.cmml" xref="S3.SS2.SSS2.p2.10.m4.1.1.3">∙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.10.m4.1c">\mathcal{D}^{\bullet}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.10.m4.1d">caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT</annotation></semantics></math> denotes the documents pool for model training.
To endow the retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.11.m5.1"><semantics id="S3.SS2.SSS2.p2.11.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p2.11.m5.1.1" xref="S3.SS2.SSS2.p2.11.m5.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.11.m5.1b"><ci id="S3.SS2.SSS2.p2.11.m5.1.1.cmml" xref="S3.SS2.SSS2.p2.11.m5.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.11.m5.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.11.m5.1d">caligraphic_R</annotation></semantics></math> with LLM’s insights on retrieval utility, we further incorporate an LLM as the supervision signal on document utility of <math alttext="d" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.12.m6.1"><semantics id="S3.SS2.SSS2.p2.12.m6.1a"><mi id="S3.SS2.SSS2.p2.12.m6.1.1" xref="S3.SS2.SSS2.p2.12.m6.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.12.m6.1b"><ci id="S3.SS2.SSS2.p2.12.m6.1.1.cmml" xref="S3.SS2.SSS2.p2.12.m6.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.12.m6.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.12.m6.1d">italic_d</annotation></semantics></math> <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS2.p2.13.1">w.r.t.</em> the input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p2.13.m7.1"><semantics id="S3.SS2.SSS2.p2.13.m7.1a"><mi id="S3.SS2.SSS2.p2.13.m7.1.1" xref="S3.SS2.SSS2.p2.13.m7.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.13.m7.1b"><ci id="S3.SS2.SSS2.p2.13.m7.1.1.cmml" xref="S3.SS2.SSS2.p2.13.m7.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.13.m7.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p2.13.m7.1d">italic_q</annotation></semantics></math> such that beyond similarity the trained utility model can take the utility a document provides into consideration, which we can formalize as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbf{P}_{\mathcal{U}}(d|q,y)=\frac{e^{\mathbf{P}_{\textit{LLM}}(y|q,d)/\tau%
}}{\sum_{d\in\mathcal{D}^{\bullet}}e^{\mathbf{P}_{\textit{LLM}}(y|q,d)/\tau}}." class="ltx_Math" display="block" id="S3.E3.m1.9"><semantics id="S3.E3.m1.9a"><mrow id="S3.E3.m1.9.9.1" xref="S3.E3.m1.9.9.1.1.cmml"><mrow id="S3.E3.m1.9.9.1.1" xref="S3.E3.m1.9.9.1.1.cmml"><mrow id="S3.E3.m1.9.9.1.1.1" xref="S3.E3.m1.9.9.1.1.1.cmml"><msub id="S3.E3.m1.9.9.1.1.1.3" xref="S3.E3.m1.9.9.1.1.1.3.cmml"><mi id="S3.E3.m1.9.9.1.1.1.3.2" xref="S3.E3.m1.9.9.1.1.1.3.2.cmml">𝐏</mi><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.9.9.1.1.1.3.3" xref="S3.E3.m1.9.9.1.1.1.3.3.cmml">𝒰</mi></msub><mo id="S3.E3.m1.9.9.1.1.1.2" xref="S3.E3.m1.9.9.1.1.1.2.cmml">⁢</mo><mrow id="S3.E3.m1.9.9.1.1.1.1.1" xref="S3.E3.m1.9.9.1.1.1.1.1.1.cmml"><mo id="S3.E3.m1.9.9.1.1.1.1.1.2" stretchy="false" xref="S3.E3.m1.9.9.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E3.m1.9.9.1.1.1.1.1.1" xref="S3.E3.m1.9.9.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.9.9.1.1.1.1.1.1.2" xref="S3.E3.m1.9.9.1.1.1.1.1.1.2.cmml">d</mi><mo fence="false" id="S3.E3.m1.9.9.1.1.1.1.1.1.1" xref="S3.E3.m1.9.9.1.1.1.1.1.1.1.cmml">|</mo><mrow id="S3.E3.m1.9.9.1.1.1.1.1.1.3.2" xref="S3.E3.m1.9.9.1.1.1.1.1.1.3.1.cmml"><mi id="S3.E3.m1.7.7" xref="S3.E3.m1.7.7.cmml">q</mi><mo id="S3.E3.m1.9.9.1.1.1.1.1.1.3.2.1" xref="S3.E3.m1.9.9.1.1.1.1.1.1.3.1.cmml">,</mo><mi id="S3.E3.m1.8.8" xref="S3.E3.m1.8.8.cmml">y</mi></mrow></mrow><mo id="S3.E3.m1.9.9.1.1.1.1.1.3" stretchy="false" xref="S3.E3.m1.9.9.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.9.9.1.1.2" xref="S3.E3.m1.9.9.1.1.2.cmml">=</mo><mfrac id="S3.E3.m1.6.6" xref="S3.E3.m1.6.6.cmml"><msup id="S3.E3.m1.3.3.3" xref="S3.E3.m1.3.3.3.cmml"><mi id="S3.E3.m1.3.3.3.5" xref="S3.E3.m1.3.3.3.5.cmml">e</mi><mrow id="S3.E3.m1.3.3.3.3.3" xref="S3.E3.m1.3.3.3.3.3.cmml"><mrow id="S3.E3.m1.3.3.3.3.3.3" xref="S3.E3.m1.3.3.3.3.3.3.cmml"><msub id="S3.E3.m1.3.3.3.3.3.3.3" xref="S3.E3.m1.3.3.3.3.3.3.3.cmml"><mi id="S3.E3.m1.3.3.3.3.3.3.3.2" xref="S3.E3.m1.3.3.3.3.3.3.3.2.cmml">𝐏</mi><mtext class="ltx_mathvariant_italic" id="S3.E3.m1.3.3.3.3.3.3.3.3" xref="S3.E3.m1.3.3.3.3.3.3.3.3a.cmml">LLM</mtext></msub><mo id="S3.E3.m1.3.3.3.3.3.3.2" xref="S3.E3.m1.3.3.3.3.3.3.2.cmml">⁢</mo><mrow id="S3.E3.m1.3.3.3.3.3.3.1.1" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.cmml"><mo id="S3.E3.m1.3.3.3.3.3.3.1.1.2" stretchy="false" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.cmml">(</mo><mrow id="S3.E3.m1.3.3.3.3.3.3.1.1.1" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.cmml"><mi id="S3.E3.m1.3.3.3.3.3.3.1.1.1.2" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E3.m1.3.3.3.3.3.3.1.1.1.1" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.1.cmml">|</mo><mrow id="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.2" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.1.cmml"><mi id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml">q</mi><mo id="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.2.1" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.1.cmml">,</mo><mi id="S3.E3.m1.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.cmml">d</mi></mrow></mrow><mo id="S3.E3.m1.3.3.3.3.3.3.1.1.3" stretchy="false" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.3.3.3.3.3.4" xref="S3.E3.m1.3.3.3.3.3.4.cmml">/</mo><mi id="S3.E3.m1.3.3.3.3.3.5" xref="S3.E3.m1.3.3.3.3.3.5.cmml">τ</mi></mrow></msup><mrow id="S3.E3.m1.6.6.6" xref="S3.E3.m1.6.6.6.cmml"><msub id="S3.E3.m1.6.6.6.4" xref="S3.E3.m1.6.6.6.4.cmml"><mo id="S3.E3.m1.6.6.6.4.2" xref="S3.E3.m1.6.6.6.4.2.cmml">∑</mo><mrow id="S3.E3.m1.6.6.6.4.3" xref="S3.E3.m1.6.6.6.4.3.cmml"><mi id="S3.E3.m1.6.6.6.4.3.2" xref="S3.E3.m1.6.6.6.4.3.2.cmml">d</mi><mo id="S3.E3.m1.6.6.6.4.3.1" xref="S3.E3.m1.6.6.6.4.3.1.cmml">∈</mo><msup id="S3.E3.m1.6.6.6.4.3.3" xref="S3.E3.m1.6.6.6.4.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.6.6.6.4.3.3.2" xref="S3.E3.m1.6.6.6.4.3.3.2.cmml">𝒟</mi><mo id="S3.E3.m1.6.6.6.4.3.3.3" xref="S3.E3.m1.6.6.6.4.3.3.3.cmml">∙</mo></msup></mrow></msub><msup id="S3.E3.m1.6.6.6.5" xref="S3.E3.m1.6.6.6.5.cmml"><mi id="S3.E3.m1.6.6.6.5.2" xref="S3.E3.m1.6.6.6.5.2.cmml">e</mi><mrow id="S3.E3.m1.6.6.6.3.3" xref="S3.E3.m1.6.6.6.3.3.cmml"><mrow id="S3.E3.m1.6.6.6.3.3.3" xref="S3.E3.m1.6.6.6.3.3.3.cmml"><msub id="S3.E3.m1.6.6.6.3.3.3.3" xref="S3.E3.m1.6.6.6.3.3.3.3.cmml"><mi id="S3.E3.m1.6.6.6.3.3.3.3.2" xref="S3.E3.m1.6.6.6.3.3.3.3.2.cmml">𝐏</mi><mtext class="ltx_mathvariant_italic" id="S3.E3.m1.6.6.6.3.3.3.3.3" xref="S3.E3.m1.6.6.6.3.3.3.3.3a.cmml">LLM</mtext></msub><mo id="S3.E3.m1.6.6.6.3.3.3.2" xref="S3.E3.m1.6.6.6.3.3.3.2.cmml">⁢</mo><mrow id="S3.E3.m1.6.6.6.3.3.3.1.1" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.cmml"><mo id="S3.E3.m1.6.6.6.3.3.3.1.1.2" stretchy="false" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.cmml">(</mo><mrow id="S3.E3.m1.6.6.6.3.3.3.1.1.1" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.cmml"><mi id="S3.E3.m1.6.6.6.3.3.3.1.1.1.2" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E3.m1.6.6.6.3.3.3.1.1.1.1" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.1.cmml">|</mo><mrow id="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.2" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.1.cmml"><mi id="S3.E3.m1.4.4.4.1.1.1" xref="S3.E3.m1.4.4.4.1.1.1.cmml">q</mi><mo id="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.2.1" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.1.cmml">,</mo><mi id="S3.E3.m1.5.5.5.2.2.2" xref="S3.E3.m1.5.5.5.2.2.2.cmml">d</mi></mrow></mrow><mo id="S3.E3.m1.6.6.6.3.3.3.1.1.3" stretchy="false" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.6.6.6.3.3.4" xref="S3.E3.m1.6.6.6.3.3.4.cmml">/</mo><mi id="S3.E3.m1.6.6.6.3.3.5" xref="S3.E3.m1.6.6.6.3.3.5.cmml">τ</mi></mrow></msup></mrow></mfrac></mrow><mo id="S3.E3.m1.9.9.1.2" lspace="0em" xref="S3.E3.m1.9.9.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.9b"><apply id="S3.E3.m1.9.9.1.1.cmml" xref="S3.E3.m1.9.9.1"><eq id="S3.E3.m1.9.9.1.1.2.cmml" xref="S3.E3.m1.9.9.1.1.2"></eq><apply id="S3.E3.m1.9.9.1.1.1.cmml" xref="S3.E3.m1.9.9.1.1.1"><times id="S3.E3.m1.9.9.1.1.1.2.cmml" xref="S3.E3.m1.9.9.1.1.1.2"></times><apply id="S3.E3.m1.9.9.1.1.1.3.cmml" xref="S3.E3.m1.9.9.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.9.9.1.1.1.3.1.cmml" xref="S3.E3.m1.9.9.1.1.1.3">subscript</csymbol><ci id="S3.E3.m1.9.9.1.1.1.3.2.cmml" xref="S3.E3.m1.9.9.1.1.1.3.2">𝐏</ci><ci id="S3.E3.m1.9.9.1.1.1.3.3.cmml" xref="S3.E3.m1.9.9.1.1.1.3.3">𝒰</ci></apply><apply id="S3.E3.m1.9.9.1.1.1.1.1.1.cmml" xref="S3.E3.m1.9.9.1.1.1.1.1"><csymbol cd="latexml" id="S3.E3.m1.9.9.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.9.9.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E3.m1.9.9.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.9.9.1.1.1.1.1.1.2">𝑑</ci><list id="S3.E3.m1.9.9.1.1.1.1.1.1.3.1.cmml" xref="S3.E3.m1.9.9.1.1.1.1.1.1.3.2"><ci id="S3.E3.m1.7.7.cmml" xref="S3.E3.m1.7.7">𝑞</ci><ci id="S3.E3.m1.8.8.cmml" xref="S3.E3.m1.8.8">𝑦</ci></list></apply></apply><apply id="S3.E3.m1.6.6.cmml" xref="S3.E3.m1.6.6"><divide id="S3.E3.m1.6.6.7.cmml" xref="S3.E3.m1.6.6"></divide><apply id="S3.E3.m1.3.3.3.cmml" xref="S3.E3.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.4.cmml" xref="S3.E3.m1.3.3.3">superscript</csymbol><ci id="S3.E3.m1.3.3.3.5.cmml" xref="S3.E3.m1.3.3.3.5">𝑒</ci><apply id="S3.E3.m1.3.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3.3"><divide id="S3.E3.m1.3.3.3.3.3.4.cmml" xref="S3.E3.m1.3.3.3.3.3.4"></divide><apply id="S3.E3.m1.3.3.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3.3.3"><times id="S3.E3.m1.3.3.3.3.3.3.2.cmml" xref="S3.E3.m1.3.3.3.3.3.3.2"></times><apply id="S3.E3.m1.3.3.3.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.3.3.3.3.1.cmml" xref="S3.E3.m1.3.3.3.3.3.3.3">subscript</csymbol><ci id="S3.E3.m1.3.3.3.3.3.3.3.2.cmml" xref="S3.E3.m1.3.3.3.3.3.3.3.2">𝐏</ci><ci id="S3.E3.m1.3.3.3.3.3.3.3.3a.cmml" xref="S3.E3.m1.3.3.3.3.3.3.3.3"><mtext class="ltx_mathvariant_italic" id="S3.E3.m1.3.3.3.3.3.3.3.3.cmml" mathsize="50%" xref="S3.E3.m1.3.3.3.3.3.3.3.3">LLM</mtext></ci></apply><apply id="S3.E3.m1.3.3.3.3.3.3.1.1.1.cmml" xref="S3.E3.m1.3.3.3.3.3.3.1.1"><csymbol cd="latexml" id="S3.E3.m1.3.3.3.3.3.3.1.1.1.1.cmml" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.1">conditional</csymbol><ci id="S3.E3.m1.3.3.3.3.3.3.1.1.1.2.cmml" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.2">𝑦</ci><list id="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.1.cmml" xref="S3.E3.m1.3.3.3.3.3.3.1.1.1.3.2"><ci id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">𝑞</ci><ci id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2">𝑑</ci></list></apply></apply><ci id="S3.E3.m1.3.3.3.3.3.5.cmml" xref="S3.E3.m1.3.3.3.3.3.5">𝜏</ci></apply></apply><apply id="S3.E3.m1.6.6.6.cmml" xref="S3.E3.m1.6.6.6"><apply id="S3.E3.m1.6.6.6.4.cmml" xref="S3.E3.m1.6.6.6.4"><csymbol cd="ambiguous" id="S3.E3.m1.6.6.6.4.1.cmml" xref="S3.E3.m1.6.6.6.4">subscript</csymbol><sum id="S3.E3.m1.6.6.6.4.2.cmml" xref="S3.E3.m1.6.6.6.4.2"></sum><apply id="S3.E3.m1.6.6.6.4.3.cmml" xref="S3.E3.m1.6.6.6.4.3"><in id="S3.E3.m1.6.6.6.4.3.1.cmml" xref="S3.E3.m1.6.6.6.4.3.1"></in><ci id="S3.E3.m1.6.6.6.4.3.2.cmml" xref="S3.E3.m1.6.6.6.4.3.2">𝑑</ci><apply id="S3.E3.m1.6.6.6.4.3.3.cmml" xref="S3.E3.m1.6.6.6.4.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.6.6.6.4.3.3.1.cmml" xref="S3.E3.m1.6.6.6.4.3.3">superscript</csymbol><ci id="S3.E3.m1.6.6.6.4.3.3.2.cmml" xref="S3.E3.m1.6.6.6.4.3.3.2">𝒟</ci><ci id="S3.E3.m1.6.6.6.4.3.3.3.cmml" xref="S3.E3.m1.6.6.6.4.3.3.3">∙</ci></apply></apply></apply><apply id="S3.E3.m1.6.6.6.5.cmml" xref="S3.E3.m1.6.6.6.5"><csymbol cd="ambiguous" id="S3.E3.m1.6.6.6.5.1.cmml" xref="S3.E3.m1.6.6.6.5">superscript</csymbol><ci id="S3.E3.m1.6.6.6.5.2.cmml" xref="S3.E3.m1.6.6.6.5.2">𝑒</ci><apply id="S3.E3.m1.6.6.6.3.3.cmml" xref="S3.E3.m1.6.6.6.3.3"><divide id="S3.E3.m1.6.6.6.3.3.4.cmml" xref="S3.E3.m1.6.6.6.3.3.4"></divide><apply id="S3.E3.m1.6.6.6.3.3.3.cmml" xref="S3.E3.m1.6.6.6.3.3.3"><times id="S3.E3.m1.6.6.6.3.3.3.2.cmml" xref="S3.E3.m1.6.6.6.3.3.3.2"></times><apply id="S3.E3.m1.6.6.6.3.3.3.3.cmml" xref="S3.E3.m1.6.6.6.3.3.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.6.6.6.3.3.3.3.1.cmml" xref="S3.E3.m1.6.6.6.3.3.3.3">subscript</csymbol><ci id="S3.E3.m1.6.6.6.3.3.3.3.2.cmml" xref="S3.E3.m1.6.6.6.3.3.3.3.2">𝐏</ci><ci id="S3.E3.m1.6.6.6.3.3.3.3.3a.cmml" xref="S3.E3.m1.6.6.6.3.3.3.3.3"><mtext class="ltx_mathvariant_italic" id="S3.E3.m1.6.6.6.3.3.3.3.3.cmml" mathsize="50%" xref="S3.E3.m1.6.6.6.3.3.3.3.3">LLM</mtext></ci></apply><apply id="S3.E3.m1.6.6.6.3.3.3.1.1.1.cmml" xref="S3.E3.m1.6.6.6.3.3.3.1.1"><csymbol cd="latexml" id="S3.E3.m1.6.6.6.3.3.3.1.1.1.1.cmml" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.1">conditional</csymbol><ci id="S3.E3.m1.6.6.6.3.3.3.1.1.1.2.cmml" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.2">𝑦</ci><list id="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.1.cmml" xref="S3.E3.m1.6.6.6.3.3.3.1.1.1.3.2"><ci id="S3.E3.m1.4.4.4.1.1.1.cmml" xref="S3.E3.m1.4.4.4.1.1.1">𝑞</ci><ci id="S3.E3.m1.5.5.5.2.2.2.cmml" xref="S3.E3.m1.5.5.5.2.2.2">𝑑</ci></list></apply></apply><ci id="S3.E3.m1.6.6.6.3.3.5.cmml" xref="S3.E3.m1.6.6.6.3.3.5">𝜏</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.9c">\mathbf{P}_{\mathcal{U}}(d|q,y)=\frac{e^{\mathbf{P}_{\textit{LLM}}(y|q,d)/\tau%
}}{\sum_{d\in\mathcal{D}^{\bullet}}e^{\mathbf{P}_{\textit{LLM}}(y|q,d)/\tau}}.</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.9d">bold_P start_POSTSUBSCRIPT caligraphic_U end_POSTSUBSCRIPT ( italic_d | italic_q , italic_y ) = divide start_ARG italic_e start_POSTSUPERSCRIPT bold_P start_POSTSUBSCRIPT LLM end_POSTSUBSCRIPT ( italic_y | italic_q , italic_d ) / italic_τ end_POSTSUPERSCRIPT end_ARG start_ARG ∑ start_POSTSUBSCRIPT italic_d ∈ caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT italic_e start_POSTSUPERSCRIPT bold_P start_POSTSUBSCRIPT LLM end_POSTSUBSCRIPT ( italic_y | italic_q , italic_d ) / italic_τ end_POSTSUPERSCRIPT end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS2.SSS2.p3">
<p class="ltx_p" id="S3.SS2.SSS2.p3.6">Finally, we break down the barriers of both sides and push the similarity distribution toward LLM-supervision enhanced utility distribution by minimizing the KL-divergence of these two distributions as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathcal{L}_{\textit{U}}=\frac{1}{\left|\mathcal{Q}\right|}\sum_{q\in\mathcal{%
Q}}\mathbf{KL}({\mathbf{P}_{\mathcal{R}}(\cdot)}_{d\in{\mathcal{D}^{\bullet}}}%
||{\mathbf{P}_{\mathcal{U}}(\cdot)}_{d\in{\mathcal{D}^{\bullet}}})," class="ltx_math_unparsed" display="block" id="S3.E4.m1.3"><semantics id="S3.E4.m1.3a"><mrow id="S3.E4.m1.3b"><msub id="S3.E4.m1.3.4"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.4.2">ℒ</mi><mtext class="ltx_mathvariant_italic" id="S3.E4.m1.3.4.3">U</mtext></msub><mo id="S3.E4.m1.3.5">=</mo><mfrac id="S3.E4.m1.1.1"><mn id="S3.E4.m1.1.1.3">1</mn><mrow id="S3.E4.m1.1.1.1.3"><mo id="S3.E4.m1.1.1.1.3.1">|</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.1.1.1.1">𝒬</mi><mo id="S3.E4.m1.1.1.1.3.2">|</mo></mrow></mfrac><munder id="S3.E4.m1.3.6"><mo id="S3.E4.m1.3.6.2" movablelimits="false">∑</mo><mrow id="S3.E4.m1.3.6.3"><mi id="S3.E4.m1.3.6.3.2">q</mi><mo id="S3.E4.m1.3.6.3.1">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.6.3.3">𝒬</mi></mrow></munder><mi id="S3.E4.m1.3.7">𝐊𝐋</mi><mrow id="S3.E4.m1.3.8"><mo id="S3.E4.m1.3.8.1" stretchy="false">(</mo><msub id="S3.E4.m1.3.8.2"><mi id="S3.E4.m1.3.8.2.2">𝐏</mi><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.8.2.3">ℛ</mi></msub><msub id="S3.E4.m1.3.8.3"><mrow id="S3.E4.m1.3.8.3.2"><mo id="S3.E4.m1.3.8.3.2.1" stretchy="false">(</mo><mo id="S3.E4.m1.2.2" lspace="0em" rspace="0em">⋅</mo><mo id="S3.E4.m1.3.8.3.2.2" stretchy="false">)</mo></mrow><mrow id="S3.E4.m1.3.8.3.3"><mi id="S3.E4.m1.3.8.3.3.2">d</mi><mo id="S3.E4.m1.3.8.3.3.1">∈</mo><msup id="S3.E4.m1.3.8.3.3.3"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.8.3.3.3.2">𝒟</mi><mo id="S3.E4.m1.3.8.3.3.3.3">∙</mo></msup></mrow></msub><mo fence="false" id="S3.E4.m1.3.8.4" rspace="0.167em" stretchy="false">|</mo><mo fence="false" id="S3.E4.m1.3.8.5" rspace="0.167em" stretchy="false">|</mo><msub id="S3.E4.m1.3.8.6"><mi id="S3.E4.m1.3.8.6.2">𝐏</mi><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.8.6.3">𝒰</mi></msub><msub id="S3.E4.m1.3.8.7"><mrow id="S3.E4.m1.3.8.7.2"><mo id="S3.E4.m1.3.8.7.2.1" stretchy="false">(</mo><mo id="S3.E4.m1.3.3" lspace="0em" rspace="0em">⋅</mo><mo id="S3.E4.m1.3.8.7.2.2" stretchy="false">)</mo></mrow><mrow id="S3.E4.m1.3.8.7.3"><mi id="S3.E4.m1.3.8.7.3.2">d</mi><mo id="S3.E4.m1.3.8.7.3.1">∈</mo><msup id="S3.E4.m1.3.8.7.3.3"><mi class="ltx_font_mathcaligraphic" id="S3.E4.m1.3.8.7.3.3.2">𝒟</mi><mo id="S3.E4.m1.3.8.7.3.3.3">∙</mo></msup></mrow></msub><mo id="S3.E4.m1.3.8.8" stretchy="false">)</mo></mrow><mo id="S3.E4.m1.3.9">,</mo></mrow><annotation encoding="application/x-tex" id="S3.E4.m1.3c">\mathcal{L}_{\textit{U}}=\frac{1}{\left|\mathcal{Q}\right|}\sum_{q\in\mathcal{%
Q}}\mathbf{KL}({\mathbf{P}_{\mathcal{R}}(\cdot)}_{d\in{\mathcal{D}^{\bullet}}}%
||{\mathbf{P}_{\mathcal{U}}(\cdot)}_{d\in{\mathcal{D}^{\bullet}}}),</annotation><annotation encoding="application/x-llamapun" id="S3.E4.m1.3d">caligraphic_L start_POSTSUBSCRIPT U end_POSTSUBSCRIPT = divide start_ARG 1 end_ARG start_ARG | caligraphic_Q | end_ARG ∑ start_POSTSUBSCRIPT italic_q ∈ caligraphic_Q end_POSTSUBSCRIPT bold_KL ( bold_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT ( ⋅ ) start_POSTSUBSCRIPT italic_d ∈ caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT | | bold_P start_POSTSUBSCRIPT caligraphic_U end_POSTSUBSCRIPT ( ⋅ ) start_POSTSUBSCRIPT italic_d ∈ caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT end_POSTSUBSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.SSS2.p3.5">where <math alttext="\mathcal{Q}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p3.1.m1.1"><semantics id="S3.SS2.SSS2.p3.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p3.1.m1.1.1" xref="S3.SS2.SSS2.p3.1.m1.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p3.1.m1.1b"><ci id="S3.SS2.SSS2.p3.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p3.1.m1.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p3.1.m1.1c">\mathcal{Q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p3.1.m1.1d">caligraphic_Q</annotation></semantics></math> is a set of queries. Due to the reason that the LLM is served as the external supervision, during training the parameter of the LLM is frozen and we only update the parameters of retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p3.2.m2.1"><semantics id="S3.SS2.SSS2.p3.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p3.2.m2.1.1" xref="S3.SS2.SSS2.p3.2.m2.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p3.2.m2.1b"><ci id="S3.SS2.SSS2.p3.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p3.2.m2.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p3.2.m2.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p3.2.m2.1d">caligraphic_R</annotation></semantics></math> and finally come up with the utility model <math alttext="\mathcal{U}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p3.3.m3.1"><semantics id="S3.SS2.SSS2.p3.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p3.3.m3.1.1" xref="S3.SS2.SSS2.p3.3.m3.1.1.cmml">𝒰</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p3.3.m3.1b"><ci id="S3.SS2.SSS2.p3.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p3.3.m3.1.1">𝒰</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p3.3.m3.1c">\mathcal{U}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p3.3.m3.1d">caligraphic_U</annotation></semantics></math>, thus the overall optimization process remains lightweight. Besides, we further add an empty string <math alttext="es" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p3.4.m4.1"><semantics id="S3.SS2.SSS2.p3.4.m4.1a"><mrow id="S3.SS2.SSS2.p3.4.m4.1.1" xref="S3.SS2.SSS2.p3.4.m4.1.1.cmml"><mi id="S3.SS2.SSS2.p3.4.m4.1.1.2" xref="S3.SS2.SSS2.p3.4.m4.1.1.2.cmml">e</mi><mo id="S3.SS2.SSS2.p3.4.m4.1.1.1" xref="S3.SS2.SSS2.p3.4.m4.1.1.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p3.4.m4.1.1.3" xref="S3.SS2.SSS2.p3.4.m4.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p3.4.m4.1b"><apply id="S3.SS2.SSS2.p3.4.m4.1.1.cmml" xref="S3.SS2.SSS2.p3.4.m4.1.1"><times id="S3.SS2.SSS2.p3.4.m4.1.1.1.cmml" xref="S3.SS2.SSS2.p3.4.m4.1.1.1"></times><ci id="S3.SS2.SSS2.p3.4.m4.1.1.2.cmml" xref="S3.SS2.SSS2.p3.4.m4.1.1.2">𝑒</ci><ci id="S3.SS2.SSS2.p3.4.m4.1.1.3.cmml" xref="S3.SS2.SSS2.p3.4.m4.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p3.4.m4.1c">es</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p3.4.m4.1d">italic_e italic_s</annotation></semantics></math> to <math alttext="\mathcal{D}^{\bullet}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p3.5.m5.1"><semantics id="S3.SS2.SSS2.p3.5.m5.1a"><msup id="S3.SS2.SSS2.p3.5.m5.1.1" xref="S3.SS2.SSS2.p3.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p3.5.m5.1.1.2" xref="S3.SS2.SSS2.p3.5.m5.1.1.2.cmml">𝒟</mi><mo id="S3.SS2.SSS2.p3.5.m5.1.1.3" xref="S3.SS2.SSS2.p3.5.m5.1.1.3.cmml">∙</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p3.5.m5.1b"><apply id="S3.SS2.SSS2.p3.5.m5.1.1.cmml" xref="S3.SS2.SSS2.p3.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p3.5.m5.1.1.1.cmml" xref="S3.SS2.SSS2.p3.5.m5.1.1">superscript</csymbol><ci id="S3.SS2.SSS2.p3.5.m5.1.1.2.cmml" xref="S3.SS2.SSS2.p3.5.m5.1.1.2">𝒟</ci><ci id="S3.SS2.SSS2.p3.5.m5.1.1.3.cmml" xref="S3.SS2.SSS2.p3.5.m5.1.1.3">∙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p3.5.m5.1c">\mathcal{D}^{\bullet}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p3.5.m5.1d">caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT</annotation></semantics></math> in the training process to enable the utility model with the ability to judge whether introducing a document for a query can promote the utility or not thus achieving selective retrieval.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS2.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.3 </span>Reunion of Similarity- and Utility- oriented Thoughts</h4>
<div class="ltx_para" id="S3.SS2.SSS3.p1">
<p class="ltx_p" id="S3.SS2.SSS3.p1.3">Considering that an LLM would sometimes go out of control and produces unreliable supervision signals which degrade the model performance sometimes yet dense retrievers trained on accurately labelled corpus remain stable with relevance guarantee, though sometimes useless, we further combine similarity- and utility-oriented thoughts and take the output of a similarity model into consideration via an integration strategy <math alttext="\mathcal{I}(\cdot)" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.1.m1.1"><semantics id="S3.SS2.SSS3.p1.1.m1.1a"><mrow id="S3.SS2.SSS3.p1.1.m1.1.2" xref="S3.SS2.SSS3.p1.1.m1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.1.m1.1.2.2" xref="S3.SS2.SSS3.p1.1.m1.1.2.2.cmml">ℐ</mi><mo id="S3.SS2.SSS3.p1.1.m1.1.2.1" xref="S3.SS2.SSS3.p1.1.m1.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.SSS3.p1.1.m1.1.2.3.2" xref="S3.SS2.SSS3.p1.1.m1.1.2.cmml"><mo id="S3.SS2.SSS3.p1.1.m1.1.2.3.2.1" stretchy="false" xref="S3.SS2.SSS3.p1.1.m1.1.2.cmml">(</mo><mo id="S3.SS2.SSS3.p1.1.m1.1.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.1.m1.1.1.cmml">⋅</mo><mo id="S3.SS2.SSS3.p1.1.m1.1.2.3.2.2" stretchy="false" xref="S3.SS2.SSS3.p1.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.1.m1.1b"><apply id="S3.SS2.SSS3.p1.1.m1.1.2.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.2"><times id="S3.SS2.SSS3.p1.1.m1.1.2.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.2.1"></times><ci id="S3.SS2.SSS3.p1.1.m1.1.2.2.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.2.2">ℐ</ci><ci id="S3.SS2.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.1.m1.1c">\mathcal{I}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.1.m1.1d">caligraphic_I ( ⋅ )</annotation></semantics></math>. Therefore, the final score between document <math alttext="d" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.2.m2.1"><semantics id="S3.SS2.SSS3.p1.2.m2.1a"><mi id="S3.SS2.SSS3.p1.2.m2.1.1" xref="S3.SS2.SSS3.p1.2.m2.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.2.m2.1b"><ci id="S3.SS2.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.2.m2.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.2.m2.1d">italic_d</annotation></semantics></math> and the input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.3.m3.1"><semantics id="S3.SS2.SSS3.p1.3.m3.1a"><mi id="S3.SS2.SSS3.p1.3.m3.1.1" xref="S3.SS2.SSS3.p1.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.3.m3.1b"><ci id="S3.SS2.SSS3.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.3.m3.1d">italic_q</annotation></semantics></math> can be defined as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\begin{split}f(q,d)&amp;=\mathcal{I}(\mathcal{R}(q,d),\mathcal{U}(q,d))\\
&amp;=\begin{cases}1.0,\quad\mathcal{R}(q,d)\geq\zeta^{\mathcal{R}}(k^{\mathcal{R}%
})\\
1.0,\quad\mathcal{U}(q,d)\geq\zeta^{\mathcal{U}}(k^{\mathcal{U}})\\
0.0,\quad\text{otherwise}\end{cases}\end{split}" class="ltx_Math" display="block" id="S3.E5.m1.32"><semantics id="S3.E5.m1.32a"><mtable columnspacing="0pt" displaystyle="true" id="S3.E5.m1.32.32.4" rowspacing="0pt" xref="S3.E5.m1.30.30.2.cmml"><mtr id="S3.E5.m1.32.32.4a" xref="S3.E5.m1.30.30.2.cmml"><mtd class="ltx_align_right" columnalign="right" id="S3.E5.m1.32.32.4b" xref="S3.E5.m1.30.30.2.cmml"><mrow id="S3.E5.m1.9.9.9.6.6" xref="S3.E5.m1.30.30.2.cmml"><mi id="S3.E5.m1.4.4.4.1.1.1" xref="S3.E5.m1.4.4.4.1.1.1.cmml">f</mi><mo id="S3.E5.m1.9.9.9.6.6.7" xref="S3.E5.m1.30.30.2a.cmml">⁢</mo><mrow id="S3.E5.m1.9.9.9.6.6.8" xref="S3.E5.m1.30.30.2.cmml"><mo id="S3.E5.m1.5.5.5.2.2.2" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">(</mo><mi id="S3.E5.m1.6.6.6.3.3.3" xref="S3.E5.m1.6.6.6.3.3.3.cmml">q</mi><mo id="S3.E5.m1.7.7.7.4.4.4" xref="S3.E5.m1.30.30.2a.cmml">,</mo><mi id="S3.E5.m1.8.8.8.5.5.5" xref="S3.E5.m1.8.8.8.5.5.5.cmml">d</mi><mo id="S3.E5.m1.9.9.9.6.6.6" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">)</mo></mrow></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.32.32.4c" xref="S3.E5.m1.30.30.2.cmml"><mrow id="S3.E5.m1.32.32.4.30.25.19" xref="S3.E5.m1.30.30.2.cmml"><mi id="S3.E5.m1.32.32.4.30.25.19.20" xref="S3.E5.m1.30.30.2a.cmml"></mi><mo id="S3.E5.m1.10.10.10.7.1.1" xref="S3.E5.m1.10.10.10.7.1.1.cmml">=</mo><mrow id="S3.E5.m1.32.32.4.30.25.19.19" xref="S3.E5.m1.30.30.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.11.11.11.8.2.2" xref="S3.E5.m1.11.11.11.8.2.2.cmml">ℐ</mi><mo id="S3.E5.m1.32.32.4.30.25.19.19.3" xref="S3.E5.m1.30.30.2a.cmml">⁢</mo><mrow id="S3.E5.m1.32.32.4.30.25.19.19.2.2" xref="S3.E5.m1.30.30.2.cmml"><mo id="S3.E5.m1.12.12.12.9.3.3" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">(</mo><mrow id="S3.E5.m1.31.31.3.29.24.18.18.1.1.1" xref="S3.E5.m1.30.30.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.13.13.13.10.4.4" xref="S3.E5.m1.13.13.13.10.4.4.cmml">ℛ</mi><mo id="S3.E5.m1.31.31.3.29.24.18.18.1.1.1.1" xref="S3.E5.m1.30.30.2a.cmml">⁢</mo><mrow id="S3.E5.m1.31.31.3.29.24.18.18.1.1.1.2" xref="S3.E5.m1.30.30.2.cmml"><mo id="S3.E5.m1.14.14.14.11.5.5" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">(</mo><mi id="S3.E5.m1.15.15.15.12.6.6" xref="S3.E5.m1.15.15.15.12.6.6.cmml">q</mi><mo id="S3.E5.m1.16.16.16.13.7.7" xref="S3.E5.m1.30.30.2a.cmml">,</mo><mi id="S3.E5.m1.17.17.17.14.8.8" xref="S3.E5.m1.17.17.17.14.8.8.cmml">d</mi><mo id="S3.E5.m1.18.18.18.15.9.9" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.19.19.19.16.10.10" xref="S3.E5.m1.30.30.2a.cmml">,</mo><mrow id="S3.E5.m1.32.32.4.30.25.19.19.2.2.2" xref="S3.E5.m1.30.30.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.20.20.20.17.11.11" xref="S3.E5.m1.20.20.20.17.11.11.cmml">𝒰</mi><mo id="S3.E5.m1.32.32.4.30.25.19.19.2.2.2.1" xref="S3.E5.m1.30.30.2a.cmml">⁢</mo><mrow id="S3.E5.m1.32.32.4.30.25.19.19.2.2.2.2" xref="S3.E5.m1.30.30.2.cmml"><mo id="S3.E5.m1.21.21.21.18.12.12" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">(</mo><mi id="S3.E5.m1.22.22.22.19.13.13" xref="S3.E5.m1.22.22.22.19.13.13.cmml">q</mi><mo id="S3.E5.m1.23.23.23.20.14.14" xref="S3.E5.m1.30.30.2a.cmml">,</mo><mi id="S3.E5.m1.24.24.24.21.15.15" xref="S3.E5.m1.24.24.24.21.15.15.cmml">d</mi><mo id="S3.E5.m1.25.25.25.22.16.16" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.26.26.26.23.17.17" stretchy="false" xref="S3.E5.m1.30.30.2a.cmml">)</mo></mrow></mrow></mrow></mtd></mtr><mtr id="S3.E5.m1.32.32.4d" xref="S3.E5.m1.30.30.2.cmml"><mtd id="S3.E5.m1.32.32.4e" xref="S3.E5.m1.30.30.2a.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.32.32.4f" xref="S3.E5.m1.30.30.2.cmml"><mrow id="S3.E5.m1.28.28.28.5.5" xref="S3.E5.m1.30.30.2.cmml"><mi id="S3.E5.m1.28.28.28.5.5.6" xref="S3.E5.m1.30.30.2a.cmml"></mi><mo id="S3.E5.m1.27.27.27.4.4.4" xref="S3.E5.m1.27.27.27.4.4.4.cmml">=</mo><mrow id="S3.E5.m1.3.3.3.3.3.3" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mo id="S3.E5.m1.3.3.3.3.3.3.4" xref="S3.E5.m1.28.28.28.5.5.5.1.1.cmml">{</mo><mtable columnspacing="5pt" displaystyle="true" id="S3.E5.m1.3.3.3.3.3.3.3" rowspacing="0pt" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mtr id="S3.E5.m1.3.3.3.3.3.3.3a" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.3.3.3.3.3.3.3b" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.2.cmml"><mn id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.3.cmml">1.0</mn><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.2" rspace="1.167em" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.2.cmml">,</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.2.cmml">ℛ</mi><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.1.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.2.1" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.1.cmml">(</mo><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.1.cmml">q</mi><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.2.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.1.cmml">,</mo><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.2.cmml">d</mi><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.2.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.6" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.6.cmml">≥</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.cmml"><msup id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.2.cmml">ζ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.3.cmml">ℛ</mi></msup><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.2.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.cmml">(</mo><msup id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.3.cmml">ℛ</mi></msup><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.cmml">)</mo></mrow></mrow></mrow></mtd><mtd id="S3.E5.m1.3.3.3.3.3.3.3c" xref="S3.E5.m1.28.28.28.5.5.5.1.1.cmml"></mtd></mtr><mtr id="S3.E5.m1.3.3.3.3.3.3.3d" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.3.3.3.3.3.3.3e" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.cmml"><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.2.cmml"><mn id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.3" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.3.cmml">1.0</mn><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.2" rspace="1.167em" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.2.cmml">,</mo><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.2.cmml">𝒰</mi><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.1.cmml">⁢</mo><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.1.cmml"><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.2.1" stretchy="false" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.1.cmml">(</mo><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.1.cmml">q</mi><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.2.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.1.cmml">,</mo><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.2.cmml">d</mi><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.2.3" stretchy="false" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.6" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.6.cmml">≥</mo><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.cmml"><msup id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.cmml"><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.2.cmml">ζ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.3" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.3.cmml">𝒰</mi></msup><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.2.cmml">⁢</mo><mrow id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.cmml"><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.2" stretchy="false" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.cmml">(</mo><msup id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.cmml"><mi id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.2" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.3" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.3.cmml">𝒰</mi></msup><mo id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.3" stretchy="false" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.cmml">)</mo></mrow></mrow></mrow></mtd><mtd id="S3.E5.m1.3.3.3.3.3.3.3f" xref="S3.E5.m1.28.28.28.5.5.5.1.1.cmml"></mtd></mtr><mtr id="S3.E5.m1.3.3.3.3.3.3.3g" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S3.E5.m1.3.3.3.3.3.3.3h" xref="S3.E5.m1.28.28.28.5.5.5.1.cmml"><mrow id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.4" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.3.cmml"><mn id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.1" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.1.cmml">0.0</mn><mo id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.4.1" rspace="1.167em" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.3.cmml">,</mo><mtext id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2a.cmml">otherwise</mtext></mrow></mtd><mtd id="S3.E5.m1.3.3.3.3.3.3.3i" xref="S3.E5.m1.28.28.28.5.5.5.1.1.cmml"></mtd></mtr></mtable></mrow></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S3.E5.m1.32b"><apply id="S3.E5.m1.30.30.2.cmml" xref="S3.E5.m1.32.32.4"><and id="S3.E5.m1.30.30.2a.cmml" xref="S3.E5.m1.9.9.9.6.6.7"></and><apply id="S3.E5.m1.30.30.2b.cmml" xref="S3.E5.m1.32.32.4"><eq id="S3.E5.m1.10.10.10.7.1.1.cmml" xref="S3.E5.m1.10.10.10.7.1.1"></eq><apply id="S3.E5.m1.30.30.2.4.cmml" xref="S3.E5.m1.32.32.4"><times id="S3.E5.m1.30.30.2.4.1.cmml" xref="S3.E5.m1.9.9.9.6.6.7"></times><ci id="S3.E5.m1.4.4.4.1.1.1.cmml" xref="S3.E5.m1.4.4.4.1.1.1">𝑓</ci><interval closure="open" id="S3.E5.m1.30.30.2.4.3.cmml" xref="S3.E5.m1.32.32.4"><ci id="S3.E5.m1.6.6.6.3.3.3.cmml" xref="S3.E5.m1.6.6.6.3.3.3">𝑞</ci><ci id="S3.E5.m1.8.8.8.5.5.5.cmml" xref="S3.E5.m1.8.8.8.5.5.5">𝑑</ci></interval></apply><apply id="S3.E5.m1.30.30.2.2.cmml" xref="S3.E5.m1.32.32.4"><times id="S3.E5.m1.30.30.2.2.3.cmml" xref="S3.E5.m1.9.9.9.6.6.7"></times><ci id="S3.E5.m1.11.11.11.8.2.2.cmml" xref="S3.E5.m1.11.11.11.8.2.2">ℐ</ci><interval closure="open" id="S3.E5.m1.30.30.2.2.2.3.cmml" xref="S3.E5.m1.32.32.4"><apply id="S3.E5.m1.29.29.1.1.1.1.1.cmml" xref="S3.E5.m1.32.32.4"><times id="S3.E5.m1.29.29.1.1.1.1.1.1.cmml" xref="S3.E5.m1.32.32.4"></times><ci id="S3.E5.m1.13.13.13.10.4.4.cmml" xref="S3.E5.m1.13.13.13.10.4.4">ℛ</ci><interval closure="open" id="S3.E5.m1.29.29.1.1.1.1.1.3.cmml" xref="S3.E5.m1.32.32.4"><ci id="S3.E5.m1.15.15.15.12.6.6.cmml" xref="S3.E5.m1.15.15.15.12.6.6">𝑞</ci><ci id="S3.E5.m1.17.17.17.14.8.8.cmml" xref="S3.E5.m1.17.17.17.14.8.8">𝑑</ci></interval></apply><apply id="S3.E5.m1.30.30.2.2.2.2.2.cmml" xref="S3.E5.m1.32.32.4"><times id="S3.E5.m1.30.30.2.2.2.2.2.1.cmml" xref="S3.E5.m1.32.32.4"></times><ci id="S3.E5.m1.20.20.20.17.11.11.cmml" xref="S3.E5.m1.20.20.20.17.11.11">𝒰</ci><interval closure="open" id="S3.E5.m1.30.30.2.2.2.2.2.3.cmml" xref="S3.E5.m1.32.32.4"><ci id="S3.E5.m1.22.22.22.19.13.13.cmml" xref="S3.E5.m1.22.22.22.19.13.13">𝑞</ci><ci id="S3.E5.m1.24.24.24.21.15.15.cmml" xref="S3.E5.m1.24.24.24.21.15.15">𝑑</ci></interval></apply></interval></apply></apply><apply id="S3.E5.m1.30.30.2c.cmml" xref="S3.E5.m1.32.32.4"><eq id="S3.E5.m1.27.27.27.4.4.4.cmml" xref="S3.E5.m1.27.27.27.4.4.4"></eq><share href="https://arxiv.org/html/2405.19893v1#S3.E5.m1.30.30.2.2.cmml" id="S3.E5.m1.30.30.2d.cmml" xref="S3.E5.m1.9.9.9.6.6.7"></share><apply id="S3.E5.m1.28.28.28.5.5.5.1.cmml" xref="S3.E5.m1.3.3.3.3.3.3"><csymbol cd="latexml" id="S3.E5.m1.28.28.28.5.5.5.1.1.cmml" xref="S3.E5.m1.3.3.3.3.3.3.4">cases</csymbol><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1"><geq id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.6.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.6"></geq><list id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1"><cn id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" type="float" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.3">1.0</cn><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1"><times id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.1"></times><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.2">ℛ</ci><interval closure="open" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.4.1.1.3.2"><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.1">𝑞</ci><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.2">𝑑</ci></interval></apply></list><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5"><times id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.2"></times><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3">superscript</csymbol><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.2">𝜁</ci><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.3.3">ℛ</ci></apply><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1">superscript</csymbol><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.2">𝑘</ci><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.1.1.5.1.1.1.3">ℛ</ci></apply></apply></apply><ci id="S3.E5.m1.28.28.28.5.5.5.1.3a.cmml" xref="S3.E5.m1.3.3.3.3.3.3"><mtext class="ltx_mathvariant_italic" id="S3.E5.m1.28.28.28.5.5.5.1.3.cmml" xref="S3.E5.m1.3.3.3.3.3.3.4">otherwise</mtext></ci><apply id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1"><geq id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.6.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.6"></geq><list id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1"><cn id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.3.cmml" type="float" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.3">1.0</cn><apply id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1"><times id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.1"></times><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.2">𝒰</ci><interval closure="open" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.4.1.1.3.2"><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.1">𝑞</ci><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.2">𝑑</ci></interval></apply></list><apply id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5"><times id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.2"></times><apply id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3"><csymbol cd="ambiguous" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3">superscript</csymbol><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.2">𝜁</ci><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.3.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.3.3">𝒰</ci></apply><apply id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.1.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1">superscript</csymbol><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.2.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.2">𝑘</ci><ci id="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.3.cmml" xref="S3.E5.m1.2.2.2.2.2.2.2.2.1.1.5.1.1.1.3">𝒰</ci></apply></apply></apply><ci id="S3.E5.m1.28.28.28.5.5.5.1.5a.cmml" xref="S3.E5.m1.3.3.3.3.3.3"><mtext class="ltx_mathvariant_italic" id="S3.E5.m1.28.28.28.5.5.5.1.5.cmml" xref="S3.E5.m1.3.3.3.3.3.3.4">otherwise</mtext></ci><list id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.3.cmml" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.4"><cn id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.1.cmml" type="float" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.1">0.0</cn><ci id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2a.cmml" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2"><mtext id="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2.cmml" xref="S3.E5.m1.3.3.3.3.3.3.3.3.1.1.2">otherwise</mtext></ci></list><ci id="S3.E5.m1.28.28.28.5.5.5.1.7a.cmml" xref="S3.E5.m1.3.3.3.3.3.3"><mtext class="ltx_mathvariant_italic" id="S3.E5.m1.28.28.28.5.5.5.1.7.cmml" xref="S3.E5.m1.3.3.3.3.3.3.4">otherwise</mtext></ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.32c">\begin{split}f(q,d)&amp;=\mathcal{I}(\mathcal{R}(q,d),\mathcal{U}(q,d))\\
&amp;=\begin{cases}1.0,\quad\mathcal{R}(q,d)\geq\zeta^{\mathcal{R}}(k^{\mathcal{R}%
})\\
1.0,\quad\mathcal{U}(q,d)\geq\zeta^{\mathcal{U}}(k^{\mathcal{U}})\\
0.0,\quad\text{otherwise}\end{cases}\end{split}</annotation><annotation encoding="application/x-llamapun" id="S3.E5.m1.32d">start_ROW start_CELL italic_f ( italic_q , italic_d ) end_CELL start_CELL = caligraphic_I ( caligraphic_R ( italic_q , italic_d ) , caligraphic_U ( italic_q , italic_d ) ) end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL = { start_ROW start_CELL 1.0 , caligraphic_R ( italic_q , italic_d ) ≥ italic_ζ start_POSTSUPERSCRIPT caligraphic_R end_POSTSUPERSCRIPT ( italic_k start_POSTSUPERSCRIPT caligraphic_R end_POSTSUPERSCRIPT ) end_CELL start_CELL end_CELL end_ROW start_ROW start_CELL 1.0 , caligraphic_U ( italic_q , italic_d ) ≥ italic_ζ start_POSTSUPERSCRIPT caligraphic_U end_POSTSUPERSCRIPT ( italic_k start_POSTSUPERSCRIPT caligraphic_U end_POSTSUPERSCRIPT ) end_CELL start_CELL end_CELL end_ROW start_ROW start_CELL 0.0 , otherwise end_CELL start_CELL end_CELL end_ROW end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.SSS3.p1.10">where <math alttext="\zeta^{\mathcal{R}}(k^{\mathcal{R}})" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.4.m1.1"><semantics id="S3.SS2.SSS3.p1.4.m1.1a"><mrow id="S3.SS2.SSS3.p1.4.m1.1.1" xref="S3.SS2.SSS3.p1.4.m1.1.1.cmml"><msup id="S3.SS2.SSS3.p1.4.m1.1.1.3" xref="S3.SS2.SSS3.p1.4.m1.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.4.m1.1.1.3.2" xref="S3.SS2.SSS3.p1.4.m1.1.1.3.2.cmml">ζ</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.4.m1.1.1.3.3" xref="S3.SS2.SSS3.p1.4.m1.1.1.3.3.cmml">ℛ</mi></msup><mo id="S3.SS2.SSS3.p1.4.m1.1.1.2" xref="S3.SS2.SSS3.p1.4.m1.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.SSS3.p1.4.m1.1.1.1.1" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.cmml"><mo id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.cmml">(</mo><msup id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.2" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.3" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.3.cmml">ℛ</mi></msup><mo id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.4.m1.1b"><apply id="S3.SS2.SSS3.p1.4.m1.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1"><times id="S3.SS2.SSS3.p1.4.m1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.2"></times><apply id="S3.SS2.SSS3.p1.4.m1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.4.m1.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.3">superscript</csymbol><ci id="S3.SS2.SSS3.p1.4.m1.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.3.2">𝜁</ci><ci id="S3.SS2.SSS3.p1.4.m1.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.3.3">ℛ</ci></apply><apply id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.2">𝑘</ci><ci id="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.4.m1.1.1.1.1.1.3">ℛ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.4.m1.1c">\zeta^{\mathcal{R}}(k^{\mathcal{R}})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.4.m1.1d">italic_ζ start_POSTSUPERSCRIPT caligraphic_R end_POSTSUPERSCRIPT ( italic_k start_POSTSUPERSCRIPT caligraphic_R end_POSTSUPERSCRIPT )</annotation></semantics></math> and <math alttext="\zeta^{\mathcal{U}}(k^{\mathcal{U}})" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.5.m2.1"><semantics id="S3.SS2.SSS3.p1.5.m2.1a"><mrow id="S3.SS2.SSS3.p1.5.m2.1.1" xref="S3.SS2.SSS3.p1.5.m2.1.1.cmml"><msup id="S3.SS2.SSS3.p1.5.m2.1.1.3" xref="S3.SS2.SSS3.p1.5.m2.1.1.3.cmml"><mi id="S3.SS2.SSS3.p1.5.m2.1.1.3.2" xref="S3.SS2.SSS3.p1.5.m2.1.1.3.2.cmml">ζ</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.5.m2.1.1.3.3" xref="S3.SS2.SSS3.p1.5.m2.1.1.3.3.cmml">𝒰</mi></msup><mo id="S3.SS2.SSS3.p1.5.m2.1.1.2" xref="S3.SS2.SSS3.p1.5.m2.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.SSS3.p1.5.m2.1.1.1.1" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.cmml"><mo id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.cmml">(</mo><msup id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.2" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.3" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.3.cmml">𝒰</mi></msup><mo id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.5.m2.1b"><apply id="S3.SS2.SSS3.p1.5.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1"><times id="S3.SS2.SSS3.p1.5.m2.1.1.2.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.2"></times><apply id="S3.SS2.SSS3.p1.5.m2.1.1.3.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.5.m2.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.3">superscript</csymbol><ci id="S3.SS2.SSS3.p1.5.m2.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.3.2">𝜁</ci><ci id="S3.SS2.SSS3.p1.5.m2.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.3.3">𝒰</ci></apply><apply id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.2">𝑘</ci><ci id="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.5.m2.1.1.1.1.1.3">𝒰</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.5.m2.1c">\zeta^{\mathcal{U}}(k^{\mathcal{U}})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.5.m2.1d">italic_ζ start_POSTSUPERSCRIPT caligraphic_U end_POSTSUPERSCRIPT ( italic_k start_POSTSUPERSCRIPT caligraphic_U end_POSTSUPERSCRIPT )</annotation></semantics></math> find value of the <math alttext="k^{\mathcal{R}}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.6.m3.1"><semantics id="S3.SS2.SSS3.p1.6.m3.1a"><msup id="S3.SS2.SSS3.p1.6.m3.1.1" xref="S3.SS2.SSS3.p1.6.m3.1.1.cmml"><mi id="S3.SS2.SSS3.p1.6.m3.1.1.2" xref="S3.SS2.SSS3.p1.6.m3.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.6.m3.1.1.3" xref="S3.SS2.SSS3.p1.6.m3.1.1.3.cmml">ℛ</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.6.m3.1b"><apply id="S3.SS2.SSS3.p1.6.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.6.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.6.m3.1.1.1.cmml" xref="S3.SS2.SSS3.p1.6.m3.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.6.m3.1.1.2.cmml" xref="S3.SS2.SSS3.p1.6.m3.1.1.2">𝑘</ci><ci id="S3.SS2.SSS3.p1.6.m3.1.1.3.cmml" xref="S3.SS2.SSS3.p1.6.m3.1.1.3">ℛ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.6.m3.1c">k^{\mathcal{R}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.6.m3.1d">italic_k start_POSTSUPERSCRIPT caligraphic_R end_POSTSUPERSCRIPT</annotation></semantics></math>-largest similarity score and <math alttext="k^{\mathcal{U}}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.7.m4.1"><semantics id="S3.SS2.SSS3.p1.7.m4.1a"><msup id="S3.SS2.SSS3.p1.7.m4.1.1" xref="S3.SS2.SSS3.p1.7.m4.1.1.cmml"><mi id="S3.SS2.SSS3.p1.7.m4.1.1.2" xref="S3.SS2.SSS3.p1.7.m4.1.1.2.cmml">k</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.7.m4.1.1.3" xref="S3.SS2.SSS3.p1.7.m4.1.1.3.cmml">𝒰</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.7.m4.1b"><apply id="S3.SS2.SSS3.p1.7.m4.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m4.1.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m4.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.7.m4.1.1.2.cmml" xref="S3.SS2.SSS3.p1.7.m4.1.1.2">𝑘</ci><ci id="S3.SS2.SSS3.p1.7.m4.1.1.3.cmml" xref="S3.SS2.SSS3.p1.7.m4.1.1.3">𝒰</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.7.m4.1c">k^{\mathcal{U}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.7.m4.1d">italic_k start_POSTSUPERSCRIPT caligraphic_U end_POSTSUPERSCRIPT</annotation></semantics></math>-largest utility score among retrieved documents through similarity and utility, respectively. Finally, only documents with <math alttext="f(q,d)=1.0" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.8.m5.2"><semantics id="S3.SS2.SSS3.p1.8.m5.2a"><mrow id="S3.SS2.SSS3.p1.8.m5.2.3" xref="S3.SS2.SSS3.p1.8.m5.2.3.cmml"><mrow id="S3.SS2.SSS3.p1.8.m5.2.3.2" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.cmml"><mi id="S3.SS2.SSS3.p1.8.m5.2.3.2.2" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.2.cmml">f</mi><mo id="S3.SS2.SSS3.p1.8.m5.2.3.2.1" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.1.cmml">⁢</mo><mrow id="S3.SS2.SSS3.p1.8.m5.2.3.2.3.2" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.3.1.cmml"><mo id="S3.SS2.SSS3.p1.8.m5.2.3.2.3.2.1" stretchy="false" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.3.1.cmml">(</mo><mi id="S3.SS2.SSS3.p1.8.m5.1.1" xref="S3.SS2.SSS3.p1.8.m5.1.1.cmml">q</mi><mo id="S3.SS2.SSS3.p1.8.m5.2.3.2.3.2.2" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.3.1.cmml">,</mo><mi id="S3.SS2.SSS3.p1.8.m5.2.2" xref="S3.SS2.SSS3.p1.8.m5.2.2.cmml">d</mi><mo id="S3.SS2.SSS3.p1.8.m5.2.3.2.3.2.3" stretchy="false" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.3.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.SSS3.p1.8.m5.2.3.1" xref="S3.SS2.SSS3.p1.8.m5.2.3.1.cmml">=</mo><mn id="S3.SS2.SSS3.p1.8.m5.2.3.3" xref="S3.SS2.SSS3.p1.8.m5.2.3.3.cmml">1.0</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.8.m5.2b"><apply id="S3.SS2.SSS3.p1.8.m5.2.3.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3"><eq id="S3.SS2.SSS3.p1.8.m5.2.3.1.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3.1"></eq><apply id="S3.SS2.SSS3.p1.8.m5.2.3.2.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3.2"><times id="S3.SS2.SSS3.p1.8.m5.2.3.2.1.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.1"></times><ci id="S3.SS2.SSS3.p1.8.m5.2.3.2.2.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.2">𝑓</ci><interval closure="open" id="S3.SS2.SSS3.p1.8.m5.2.3.2.3.1.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.3.2.3.2"><ci id="S3.SS2.SSS3.p1.8.m5.1.1.cmml" xref="S3.SS2.SSS3.p1.8.m5.1.1">𝑞</ci><ci id="S3.SS2.SSS3.p1.8.m5.2.2.cmml" xref="S3.SS2.SSS3.p1.8.m5.2.2">𝑑</ci></interval></apply><cn id="S3.SS2.SSS3.p1.8.m5.2.3.3.cmml" type="float" xref="S3.SS2.SSS3.p1.8.m5.2.3.3">1.0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.8.m5.2c">f(q,d)=1.0</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.8.m5.2d">italic_f ( italic_q , italic_d ) = 1.0</annotation></semantics></math> are permitted to proceed to the subsequent stages. With the derived final score, we can easily obtain the current documents set <math alttext="\mathcal{D}^{\Delta}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.9.m6.1"><semantics id="S3.SS2.SSS3.p1.9.m6.1a"><msup id="S3.SS2.SSS3.p1.9.m6.1.1" xref="S3.SS2.SSS3.p1.9.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS3.p1.9.m6.1.1.2" xref="S3.SS2.SSS3.p1.9.m6.1.1.2.cmml">𝒟</mi><mi id="S3.SS2.SSS3.p1.9.m6.1.1.3" mathvariant="normal" xref="S3.SS2.SSS3.p1.9.m6.1.1.3.cmml">Δ</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.9.m6.1b"><apply id="S3.SS2.SSS3.p1.9.m6.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.9.m6.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m6.1.1">superscript</csymbol><ci id="S3.SS2.SSS3.p1.9.m6.1.1.2.cmml" xref="S3.SS2.SSS3.p1.9.m6.1.1.2">𝒟</ci><ci id="S3.SS2.SSS3.p1.9.m6.1.1.3.cmml" xref="S3.SS2.SSS3.p1.9.m6.1.1.3">Δ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.9.m6.1c">\mathcal{D}^{\Delta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.9.m6.1d">caligraphic_D start_POSTSUPERSCRIPT roman_Δ end_POSTSUPERSCRIPT</annotation></semantics></math> <em class="ltx_emph ltx_font_italic" id="S3.SS2.SSS3.p1.10.1">w.r.t.</em> input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.10.m7.1"><semantics id="S3.SS2.SSS3.p1.10.m7.1a"><mi id="S3.SS2.SSS3.p1.10.m7.1.1" xref="S3.SS2.SSS3.p1.10.m7.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.10.m7.1b"><ci id="S3.SS2.SSS3.p1.10.m7.1.1.cmml" xref="S3.SS2.SSS3.p1.10.m7.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.10.m7.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS3.p1.10.m7.1d">italic_q</annotation></semantics></math> for follow-up tasks.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Pursuit of Compactness-oriented Thoughts</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">Given the fact that the retrieved documents are often more than one, using them in isolation due to the context limitation of LLMs or simply aggregating the Top-<math alttext="k" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><mi id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><ci id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_k</annotation></semantics></math> document without considering the relationships between them makes it difficult to capture the commonalities and characteristics among them and even confuse LLMs thus incurring information loss and probably performance degradation, where text summarization can be of help.
However, simple summarization cannot ensure that the most important information relevant to the input query is retained, therefore it is necessary to train a summarization model that aligns with the task itself. Hence, we propose the <span class="ltx_text ltx_font_bold" id="S3.SS3.p1.1.1">Task-adaptive Summarizer</span>, which not only reduces the computational costs in end tasks but also relieves the burden of LLMs to identify relevant information in a large chunk of retrieved documents to obtain compactness-oriented thoughts.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS3.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.1 </span>Distilling from Strong Teacher Models</h4>
<div class="ltx_para" id="S3.SS3.SSS1.p1">
<p class="ltx_p" id="S3.SS3.SSS1.p1.7">To initiate the summarization process, we design instructions via randomly sampled queries and retrieved documents.
To start with, given query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.1.m1.1"><semantics id="S3.SS3.SSS1.p1.1.m1.1a"><mi id="S3.SS3.SSS1.p1.1.m1.1.1" xref="S3.SS3.SSS1.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.1.m1.1b"><ci id="S3.SS3.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS1.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.1.m1.1d">italic_q</annotation></semantics></math>, we harness the expertise of a sophisticated teacher model <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.2.m2.1"><semantics id="S3.SS3.SSS1.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p1.2.m2.1.1" xref="S3.SS3.SSS1.p1.2.m2.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.2.m2.1b"><ci id="S3.SS3.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS1.p1.2.m2.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.2.m2.1c">\mathcal{T}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.2.m2.1d">caligraphic_T</annotation></semantics></math>, <em class="ltx_emph ltx_font_italic" id="S3.SS3.SSS1.p1.7.1">e.g.,</em> GPT4, to extract summarization proficiencies that facilitate the creation of a preliminary summary <math alttext="\mathbb{S}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.3.m3.1"><semantics id="S3.SS3.SSS1.p1.3.m3.1a"><msub id="S3.SS3.SSS1.p1.3.m3.1.1" xref="S3.SS3.SSS1.p1.3.m3.1.1.cmml"><mi id="S3.SS3.SSS1.p1.3.m3.1.1.2" xref="S3.SS3.SSS1.p1.3.m3.1.1.2.cmml">𝕊</mi><mi id="S3.SS3.SSS1.p1.3.m3.1.1.3" xref="S3.SS3.SSS1.p1.3.m3.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.3.m3.1b"><apply id="S3.SS3.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.3.m3.1.1.1.cmml" xref="S3.SS3.SSS1.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.3.m3.1.1.2.cmml" xref="S3.SS3.SSS1.p1.3.m3.1.1.2">𝕊</ci><ci id="S3.SS3.SSS1.p1.3.m3.1.1.3.cmml" xref="S3.SS3.SSS1.p1.3.m3.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.3.m3.1c">\mathbb{S}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.3.m3.1d">blackboard_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> and compile an initial corpus <math alttext="\mathcal{C}_{\mathcal{I}}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.4.m4.1"><semantics id="S3.SS3.SSS1.p1.4.m4.1a"><msub id="S3.SS3.SSS1.p1.4.m4.1.1" xref="S3.SS3.SSS1.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p1.4.m4.1.1.2" xref="S3.SS3.SSS1.p1.4.m4.1.1.2.cmml">𝒞</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p1.4.m4.1.1.3" xref="S3.SS3.SSS1.p1.4.m4.1.1.3.cmml">ℐ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.4.m4.1b"><apply id="S3.SS3.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS3.SSS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.4.m4.1.1.1.cmml" xref="S3.SS3.SSS1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.4.m4.1.1.2.cmml" xref="S3.SS3.SSS1.p1.4.m4.1.1.2">𝒞</ci><ci id="S3.SS3.SSS1.p1.4.m4.1.1.3.cmml" xref="S3.SS3.SSS1.p1.4.m4.1.1.3">ℐ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.4.m4.1c">\mathcal{C}_{\mathcal{I}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.4.m4.1d">caligraphic_C start_POSTSUBSCRIPT caligraphic_I end_POSTSUBSCRIPT</annotation></semantics></math> consisting of Instruction-Summary pairs
<math alttext="\left\langle\mathbb{I}_{q}^{s},\mathbb{S}_{q}\right\rangle" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.5.m5.2"><semantics id="S3.SS3.SSS1.p1.5.m5.2a"><mrow id="S3.SS3.SSS1.p1.5.m5.2.2.2" xref="S3.SS3.SSS1.p1.5.m5.2.2.3.cmml"><mo id="S3.SS3.SSS1.p1.5.m5.2.2.2.3" xref="S3.SS3.SSS1.p1.5.m5.2.2.3.cmml">⟨</mo><msubsup id="S3.SS3.SSS1.p1.5.m5.1.1.1.1" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.cmml"><mi id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.2" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.2.cmml">𝕀</mi><mi id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.3" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.3.cmml">q</mi><mi id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.3" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.3.cmml">s</mi></msubsup><mo id="S3.SS3.SSS1.p1.5.m5.2.2.2.4" xref="S3.SS3.SSS1.p1.5.m5.2.2.3.cmml">,</mo><msub id="S3.SS3.SSS1.p1.5.m5.2.2.2.2" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2.cmml"><mi id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.2" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2.2.cmml">𝕊</mi><mi id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.3" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2.3.cmml">q</mi></msub><mo id="S3.SS3.SSS1.p1.5.m5.2.2.2.5" xref="S3.SS3.SSS1.p1.5.m5.2.2.3.cmml">⟩</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.5.m5.2b"><list id="S3.SS3.SSS1.p1.5.m5.2.2.3.cmml" xref="S3.SS3.SSS1.p1.5.m5.2.2.2"><apply id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.1.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1">superscript</csymbol><apply id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.2">𝕀</ci><ci id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.2.3">𝑞</ci></apply><ci id="S3.SS3.SSS1.p1.5.m5.1.1.1.1.3.cmml" xref="S3.SS3.SSS1.p1.5.m5.1.1.1.1.3">𝑠</ci></apply><apply id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.cmml" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.1.cmml" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2">subscript</csymbol><ci id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.2.cmml" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2.2">𝕊</ci><ci id="S3.SS3.SSS1.p1.5.m5.2.2.2.2.3.cmml" xref="S3.SS3.SSS1.p1.5.m5.2.2.2.2.3">𝑞</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.5.m5.2c">\left\langle\mathbb{I}_{q}^{s},\mathbb{S}_{q}\right\rangle</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.5.m5.2d">⟨ blackboard_I start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT , blackboard_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ⟩</annotation></semantics></math>, where <math alttext="\mathbb{I}_{q}^{s}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.6.m6.1"><semantics id="S3.SS3.SSS1.p1.6.m6.1a"><msubsup id="S3.SS3.SSS1.p1.6.m6.1.1" xref="S3.SS3.SSS1.p1.6.m6.1.1.cmml"><mi id="S3.SS3.SSS1.p1.6.m6.1.1.2.2" xref="S3.SS3.SSS1.p1.6.m6.1.1.2.2.cmml">𝕀</mi><mi id="S3.SS3.SSS1.p1.6.m6.1.1.2.3" xref="S3.SS3.SSS1.p1.6.m6.1.1.2.3.cmml">q</mi><mi id="S3.SS3.SSS1.p1.6.m6.1.1.3" xref="S3.SS3.SSS1.p1.6.m6.1.1.3.cmml">s</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.6.m6.1b"><apply id="S3.SS3.SSS1.p1.6.m6.1.1.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.6.m6.1.1.1.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1">superscript</csymbol><apply id="S3.SS3.SSS1.p1.6.m6.1.1.2.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.6.m6.1.1.2.1.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.6.m6.1.1.2.2.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1.2.2">𝕀</ci><ci id="S3.SS3.SSS1.p1.6.m6.1.1.2.3.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1.2.3">𝑞</ci></apply><ci id="S3.SS3.SSS1.p1.6.m6.1.1.3.cmml" xref="S3.SS3.SSS1.p1.6.m6.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.6.m6.1c">\mathbb{I}_{q}^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.6.m6.1d">blackboard_I start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="\mathbb{S}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.7.m7.1"><semantics id="S3.SS3.SSS1.p1.7.m7.1a"><msub id="S3.SS3.SSS1.p1.7.m7.1.1" xref="S3.SS3.SSS1.p1.7.m7.1.1.cmml"><mi id="S3.SS3.SSS1.p1.7.m7.1.1.2" xref="S3.SS3.SSS1.p1.7.m7.1.1.2.cmml">𝕊</mi><mi id="S3.SS3.SSS1.p1.7.m7.1.1.3" xref="S3.SS3.SSS1.p1.7.m7.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.7.m7.1b"><apply id="S3.SS3.SSS1.p1.7.m7.1.1.cmml" xref="S3.SS3.SSS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.7.m7.1.1.1.cmml" xref="S3.SS3.SSS1.p1.7.m7.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.7.m7.1.1.2.cmml" xref="S3.SS3.SSS1.p1.7.m7.1.1.2">𝕊</ci><ci id="S3.SS3.SSS1.p1.7.m7.1.1.3.cmml" xref="S3.SS3.SSS1.p1.7.m7.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.7.m7.1c">\mathbb{S}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.7.m7.1d">blackboard_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> are defined as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbb{I}_{q}^{s}=\textsc{Template}(\mathbb{I}^{s},q,[d_{q}^{1},d_{q}^{2},%
\cdots,d_{q}^{n}])," class="ltx_Math" display="block" id="S3.E6.m1.3"><semantics id="S3.E6.m1.3a"><mrow id="S3.E6.m1.3.3.1" xref="S3.E6.m1.3.3.1.1.cmml"><mrow id="S3.E6.m1.3.3.1.1" xref="S3.E6.m1.3.3.1.1.cmml"><msubsup id="S3.E6.m1.3.3.1.1.4" xref="S3.E6.m1.3.3.1.1.4.cmml"><mi id="S3.E6.m1.3.3.1.1.4.2.2" xref="S3.E6.m1.3.3.1.1.4.2.2.cmml">𝕀</mi><mi id="S3.E6.m1.3.3.1.1.4.2.3" xref="S3.E6.m1.3.3.1.1.4.2.3.cmml">q</mi><mi id="S3.E6.m1.3.3.1.1.4.3" xref="S3.E6.m1.3.3.1.1.4.3.cmml">s</mi></msubsup><mo id="S3.E6.m1.3.3.1.1.3" xref="S3.E6.m1.3.3.1.1.3.cmml">=</mo><mrow id="S3.E6.m1.3.3.1.1.2" xref="S3.E6.m1.3.3.1.1.2.cmml"><mtext class="ltx_font_smallcaps" id="S3.E6.m1.3.3.1.1.2.4" xref="S3.E6.m1.3.3.1.1.2.4a.cmml">Template</mtext><mo id="S3.E6.m1.3.3.1.1.2.3" xref="S3.E6.m1.3.3.1.1.2.3.cmml">⁢</mo><mrow id="S3.E6.m1.3.3.1.1.2.2.2" xref="S3.E6.m1.3.3.1.1.2.2.3.cmml"><mo id="S3.E6.m1.3.3.1.1.2.2.2.3" stretchy="false" xref="S3.E6.m1.3.3.1.1.2.2.3.cmml">(</mo><msup id="S3.E6.m1.3.3.1.1.1.1.1.1" xref="S3.E6.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.3.3.1.1.1.1.1.1.2" xref="S3.E6.m1.3.3.1.1.1.1.1.1.2.cmml">𝕀</mi><mi id="S3.E6.m1.3.3.1.1.1.1.1.1.3" xref="S3.E6.m1.3.3.1.1.1.1.1.1.3.cmml">s</mi></msup><mo id="S3.E6.m1.3.3.1.1.2.2.2.4" xref="S3.E6.m1.3.3.1.1.2.2.3.cmml">,</mo><mi id="S3.E6.m1.2.2" xref="S3.E6.m1.2.2.cmml">q</mi><mo id="S3.E6.m1.3.3.1.1.2.2.2.5" xref="S3.E6.m1.3.3.1.1.2.2.3.cmml">,</mo><mrow id="S3.E6.m1.3.3.1.1.2.2.2.2.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml"><mo id="S3.E6.m1.3.3.1.1.2.2.2.2.3.4" stretchy="false" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml">[</mo><msubsup id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.cmml"><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.2" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.2.cmml">d</mi><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.3.cmml">q</mi><mn id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.3.cmml">1</mn></msubsup><mo id="S3.E6.m1.3.3.1.1.2.2.2.2.3.5" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml">,</mo><msubsup id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.cmml"><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.2" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.2.cmml">d</mi><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.3.cmml">q</mi><mn id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.3.cmml">2</mn></msubsup><mo id="S3.E6.m1.3.3.1.1.2.2.2.2.3.6" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml">,</mo><mi id="S3.E6.m1.1.1" mathvariant="normal" xref="S3.E6.m1.1.1.cmml">⋯</mi><mo id="S3.E6.m1.3.3.1.1.2.2.2.2.3.7" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml">,</mo><msubsup id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.cmml"><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.2" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.2.cmml">d</mi><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.3.cmml">q</mi><mi id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.3" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.3.cmml">n</mi></msubsup><mo id="S3.E6.m1.3.3.1.1.2.2.2.2.3.8" stretchy="false" xref="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml">]</mo></mrow><mo id="S3.E6.m1.3.3.1.1.2.2.2.6" stretchy="false" xref="S3.E6.m1.3.3.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E6.m1.3.3.1.2" xref="S3.E6.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.3b"><apply id="S3.E6.m1.3.3.1.1.cmml" xref="S3.E6.m1.3.3.1"><eq id="S3.E6.m1.3.3.1.1.3.cmml" xref="S3.E6.m1.3.3.1.1.3"></eq><apply id="S3.E6.m1.3.3.1.1.4.cmml" xref="S3.E6.m1.3.3.1.1.4"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.4.1.cmml" xref="S3.E6.m1.3.3.1.1.4">superscript</csymbol><apply id="S3.E6.m1.3.3.1.1.4.2.cmml" xref="S3.E6.m1.3.3.1.1.4"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.4.2.1.cmml" xref="S3.E6.m1.3.3.1.1.4">subscript</csymbol><ci id="S3.E6.m1.3.3.1.1.4.2.2.cmml" xref="S3.E6.m1.3.3.1.1.4.2.2">𝕀</ci><ci id="S3.E6.m1.3.3.1.1.4.2.3.cmml" xref="S3.E6.m1.3.3.1.1.4.2.3">𝑞</ci></apply><ci id="S3.E6.m1.3.3.1.1.4.3.cmml" xref="S3.E6.m1.3.3.1.1.4.3">𝑠</ci></apply><apply id="S3.E6.m1.3.3.1.1.2.cmml" xref="S3.E6.m1.3.3.1.1.2"><times id="S3.E6.m1.3.3.1.1.2.3.cmml" xref="S3.E6.m1.3.3.1.1.2.3"></times><ci id="S3.E6.m1.3.3.1.1.2.4a.cmml" xref="S3.E6.m1.3.3.1.1.2.4"><mtext class="ltx_font_smallcaps" id="S3.E6.m1.3.3.1.1.2.4.cmml" xref="S3.E6.m1.3.3.1.1.2.4">Template</mtext></ci><vector id="S3.E6.m1.3.3.1.1.2.2.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2"><apply id="S3.E6.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E6.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.3.3.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E6.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.3.3.1.1.1.1.1.1.2">𝕀</ci><ci id="S3.E6.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.3.3.1.1.1.1.1.1.3">𝑠</ci></apply><ci id="S3.E6.m1.2.2.cmml" xref="S3.E6.m1.2.2">𝑞</ci><list id="S3.E6.m1.3.3.1.1.2.2.2.2.4.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3"><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1">superscript</csymbol><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1">subscript</csymbol><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.2">𝑑</ci><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.2.3">𝑞</ci></apply><cn id="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.3.cmml" type="integer" xref="S3.E6.m1.3.3.1.1.2.2.2.2.1.1.3">1</cn></apply><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2">superscript</csymbol><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.2">𝑑</ci><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.2.3">𝑞</ci></apply><cn id="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.E6.m1.3.3.1.1.2.2.2.2.2.2.3">2</cn></apply><ci id="S3.E6.m1.1.1.cmml" xref="S3.E6.m1.1.1">⋯</ci><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3">superscript</csymbol><apply id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.1.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3">subscript</csymbol><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.2.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.2">𝑑</ci><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.2.3">𝑞</ci></apply><ci id="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.3.cmml" xref="S3.E6.m1.3.3.1.1.2.2.2.2.3.3.3">𝑛</ci></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.3c">\mathbb{I}_{q}^{s}=\textsc{Template}(\mathbb{I}^{s},q,[d_{q}^{1},d_{q}^{2},%
\cdots,d_{q}^{n}]),</annotation><annotation encoding="application/x-llamapun" id="S3.E6.m1.3d">blackboard_I start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT = Template ( blackboard_I start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT , italic_q , [ italic_d start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT , italic_d start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT , ⋯ , italic_d start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT ] ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<table class="ltx_equation ltx_eqn_table" id="S3.E7">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbb{I}_{q}^{s}\xrightarrow{\mathcal{T}}\mathbb{S}_{q}," class="ltx_Math" display="block" id="S3.E7.m1.1"><semantics id="S3.E7.m1.1a"><mrow id="S3.E7.m1.1.1.1" xref="S3.E7.m1.1.1.1.1.cmml"><mrow id="S3.E7.m1.1.1.1.1" xref="S3.E7.m1.1.1.1.1.cmml"><msubsup id="S3.E7.m1.1.1.1.1.2" xref="S3.E7.m1.1.1.1.1.2.cmml"><mi id="S3.E7.m1.1.1.1.1.2.2.2" xref="S3.E7.m1.1.1.1.1.2.2.2.cmml">𝕀</mi><mi id="S3.E7.m1.1.1.1.1.2.2.3" xref="S3.E7.m1.1.1.1.1.2.2.3.cmml">q</mi><mi id="S3.E7.m1.1.1.1.1.2.3" xref="S3.E7.m1.1.1.1.1.2.3.cmml">s</mi></msubsup><mover accent="true" id="S3.E7.m1.1.1.1.1.1" xref="S3.E7.m1.1.1.1.1.1.cmml"><mo id="S3.E7.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E7.m1.1.1.1.1.1.2.cmml">→</mo><mo class="ltx_font_mathcaligraphic" id="S3.E7.m1.1.1.1.1.1.1" xref="S3.E7.m1.1.1.1.1.1.1.cmml">𝒯</mo></mover><msub id="S3.E7.m1.1.1.1.1.3" xref="S3.E7.m1.1.1.1.1.3.cmml"><mi id="S3.E7.m1.1.1.1.1.3.2" xref="S3.E7.m1.1.1.1.1.3.2.cmml">𝕊</mi><mi id="S3.E7.m1.1.1.1.1.3.3" xref="S3.E7.m1.1.1.1.1.3.3.cmml">q</mi></msub></mrow><mo id="S3.E7.m1.1.1.1.2" xref="S3.E7.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.1b"><apply id="S3.E7.m1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1"><apply id="S3.E7.m1.1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1.1.1"><ci id="S3.E7.m1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1.1.1.1">𝒯</ci><ci id="S3.E7.m1.1.1.1.1.1.2.cmml" xref="S3.E7.m1.1.1.1.1.1.2">→</ci></apply><apply id="S3.E7.m1.1.1.1.1.2.cmml" xref="S3.E7.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.1.1.2.1.cmml" xref="S3.E7.m1.1.1.1.1.2">superscript</csymbol><apply id="S3.E7.m1.1.1.1.1.2.2.cmml" xref="S3.E7.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.1.1.2.2.1.cmml" xref="S3.E7.m1.1.1.1.1.2">subscript</csymbol><ci id="S3.E7.m1.1.1.1.1.2.2.2.cmml" xref="S3.E7.m1.1.1.1.1.2.2.2">𝕀</ci><ci id="S3.E7.m1.1.1.1.1.2.2.3.cmml" xref="S3.E7.m1.1.1.1.1.2.2.3">𝑞</ci></apply><ci id="S3.E7.m1.1.1.1.1.2.3.cmml" xref="S3.E7.m1.1.1.1.1.2.3">𝑠</ci></apply><apply id="S3.E7.m1.1.1.1.1.3.cmml" xref="S3.E7.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.1.1.3.1.cmml" xref="S3.E7.m1.1.1.1.1.3">subscript</csymbol><ci id="S3.E7.m1.1.1.1.1.3.2.cmml" xref="S3.E7.m1.1.1.1.1.3.2">𝕊</ci><ci id="S3.E7.m1.1.1.1.1.3.3.cmml" xref="S3.E7.m1.1.1.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.1c">\mathbb{I}_{q}^{s}\xrightarrow{\mathcal{T}}\mathbb{S}_{q},</annotation><annotation encoding="application/x-llamapun" id="S3.E7.m1.1d">blackboard_I start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT start_ARROW overcaligraphic_T → end_ARROW blackboard_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS1.p1.13">where <math alttext="\mathbb{I}^{s}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.8.m1.1"><semantics id="S3.SS3.SSS1.p1.8.m1.1a"><msup id="S3.SS3.SSS1.p1.8.m1.1.1" xref="S3.SS3.SSS1.p1.8.m1.1.1.cmml"><mi id="S3.SS3.SSS1.p1.8.m1.1.1.2" xref="S3.SS3.SSS1.p1.8.m1.1.1.2.cmml">𝕀</mi><mi id="S3.SS3.SSS1.p1.8.m1.1.1.3" xref="S3.SS3.SSS1.p1.8.m1.1.1.3.cmml">s</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.8.m1.1b"><apply id="S3.SS3.SSS1.p1.8.m1.1.1.cmml" xref="S3.SS3.SSS1.p1.8.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.8.m1.1.1.1.cmml" xref="S3.SS3.SSS1.p1.8.m1.1.1">superscript</csymbol><ci id="S3.SS3.SSS1.p1.8.m1.1.1.2.cmml" xref="S3.SS3.SSS1.p1.8.m1.1.1.2">𝕀</ci><ci id="S3.SS3.SSS1.p1.8.m1.1.1.3.cmml" xref="S3.SS3.SSS1.p1.8.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.8.m1.1c">\mathbb{I}^{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.8.m1.1d">blackboard_I start_POSTSUPERSCRIPT italic_s end_POSTSUPERSCRIPT</annotation></semantics></math> is the summarization instruction, <span class="ltx_text ltx_markedasmath ltx_font_smallcaps" id="S3.SS3.SSS1.p1.13.1">Template</span> is the summarization prompt template (detailed in Section <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.SS1" title="A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">A.1</span></a>) and <math alttext="d_{q}^{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.10.m3.1"><semantics id="S3.SS3.SSS1.p1.10.m3.1a"><msubsup id="S3.SS3.SSS1.p1.10.m3.1.1" xref="S3.SS3.SSS1.p1.10.m3.1.1.cmml"><mi id="S3.SS3.SSS1.p1.10.m3.1.1.2.2" xref="S3.SS3.SSS1.p1.10.m3.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS1.p1.10.m3.1.1.2.3" xref="S3.SS3.SSS1.p1.10.m3.1.1.2.3.cmml">q</mi><mi id="S3.SS3.SSS1.p1.10.m3.1.1.3" xref="S3.SS3.SSS1.p1.10.m3.1.1.3.cmml">i</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.10.m3.1b"><apply id="S3.SS3.SSS1.p1.10.m3.1.1.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.10.m3.1.1.1.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1">superscript</csymbol><apply id="S3.SS3.SSS1.p1.10.m3.1.1.2.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.10.m3.1.1.2.1.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.10.m3.1.1.2.2.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS1.p1.10.m3.1.1.2.3.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1.2.3">𝑞</ci></apply><ci id="S3.SS3.SSS1.p1.10.m3.1.1.3.cmml" xref="S3.SS3.SSS1.p1.10.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.10.m3.1c">d_{q}^{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.10.m3.1d">italic_d start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i end_POSTSUPERSCRIPT</annotation></semantics></math> is the <math alttext="i" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.11.m4.1"><semantics id="S3.SS3.SSS1.p1.11.m4.1a"><mi id="S3.SS3.SSS1.p1.11.m4.1.1" xref="S3.SS3.SSS1.p1.11.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.11.m4.1b"><ci id="S3.SS3.SSS1.p1.11.m4.1.1.cmml" xref="S3.SS3.SSS1.p1.11.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.11.m4.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.11.m4.1d">italic_i</annotation></semantics></math>-th document retrieved for query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.12.m5.1"><semantics id="S3.SS3.SSS1.p1.12.m5.1a"><mi id="S3.SS3.SSS1.p1.12.m5.1.1" xref="S3.SS3.SSS1.p1.12.m5.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.12.m5.1b"><ci id="S3.SS3.SSS1.p1.12.m5.1.1.cmml" xref="S3.SS3.SSS1.p1.12.m5.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.12.m5.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.12.m5.1d">italic_q</annotation></semantics></math> from former stage.
Next, we apply Lora tuning to meticulously refine an open-source student model, <em class="ltx_emph ltx_font_italic" id="S3.SS3.SSS1.p1.13.2">e.g.,</em> Llama2, which results in an initial summarizer model <math alttext="\mathcal{\pi}^{\text{SFT}}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.13.m6.1"><semantics id="S3.SS3.SSS1.p1.13.m6.1a"><msup id="S3.SS3.SSS1.p1.13.m6.1.1" xref="S3.SS3.SSS1.p1.13.m6.1.1.cmml"><mi id="S3.SS3.SSS1.p1.13.m6.1.1.2" xref="S3.SS3.SSS1.p1.13.m6.1.1.2.cmml">π</mi><mtext id="S3.SS3.SSS1.p1.13.m6.1.1.3" xref="S3.SS3.SSS1.p1.13.m6.1.1.3a.cmml">SFT</mtext></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.13.m6.1b"><apply id="S3.SS3.SSS1.p1.13.m6.1.1.cmml" xref="S3.SS3.SSS1.p1.13.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.13.m6.1.1.1.cmml" xref="S3.SS3.SSS1.p1.13.m6.1.1">superscript</csymbol><ci id="S3.SS3.SSS1.p1.13.m6.1.1.2.cmml" xref="S3.SS3.SSS1.p1.13.m6.1.1.2">𝜋</ci><ci id="S3.SS3.SSS1.p1.13.m6.1.1.3a.cmml" xref="S3.SS3.SSS1.p1.13.m6.1.1.3"><mtext id="S3.SS3.SSS1.p1.13.m6.1.1.3.cmml" mathsize="70%" xref="S3.SS3.SSS1.p1.13.m6.1.1.3">SFT</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.13.m6.1c">\mathcal{\pi}^{\text{SFT}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.13.m6.1d">italic_π start_POSTSUPERSCRIPT SFT end_POSTSUPERSCRIPT</annotation></semantics></math> tailored for the end task.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.2 </span>Alignment via End-task Feedback</h4>
<div class="ltx_para" id="S3.SS3.SSS2.p1">
<p class="ltx_p" id="S3.SS3.SSS2.p1.6">To ensure the faithfulness of the summarizer to the end task, inspired by the principles of the DPO <cite class="ltx_cite ltx_citemacro_cite">Rafailov et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib17" title="">2023</a>)</cite>, we incorporate the LLM’s performance on the end task as reward for the summarizer.
With model <math alttext="\mathcal{\pi}^{\text{SFT}}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.1.m1.1"><semantics id="S3.SS3.SSS2.p1.1.m1.1a"><msup id="S3.SS3.SSS2.p1.1.m1.1.1" xref="S3.SS3.SSS2.p1.1.m1.1.1.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.1.1.2" xref="S3.SS3.SSS2.p1.1.m1.1.1.2.cmml">π</mi><mtext id="S3.SS3.SSS2.p1.1.m1.1.1.3" xref="S3.SS3.SSS2.p1.1.m1.1.1.3a.cmml">SFT</mtext></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.1.m1.1b"><apply id="S3.SS3.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.1.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1">superscript</csymbol><ci id="S3.SS3.SSS2.p1.1.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.2">𝜋</ci><ci id="S3.SS3.SSS2.p1.1.m1.1.1.3a.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3"><mtext id="S3.SS3.SSS2.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="S3.SS3.SSS2.p1.1.m1.1.1.3">SFT</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.1.m1.1c">\mathcal{\pi}^{\text{SFT}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.1.m1.1d">italic_π start_POSTSUPERSCRIPT SFT end_POSTSUPERSCRIPT</annotation></semantics></math>, given query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.2.m2.1"><semantics id="S3.SS3.SSS2.p1.2.m2.1a"><mi id="S3.SS3.SSS2.p1.2.m2.1.1" xref="S3.SS3.SSS2.p1.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.2.m2.1b"><ci id="S3.SS3.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS2.p1.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.2.m2.1d">italic_q</annotation></semantics></math> we adeptly produce concise summaries of the retrieved documents as <math alttext="\mathbb{S}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.3.m3.1"><semantics id="S3.SS3.SSS2.p1.3.m3.1a"><msub id="S3.SS3.SSS2.p1.3.m3.1.1" xref="S3.SS3.SSS2.p1.3.m3.1.1.cmml"><mi id="S3.SS3.SSS2.p1.3.m3.1.1.2" xref="S3.SS3.SSS2.p1.3.m3.1.1.2.cmml">𝕊</mi><mi id="S3.SS3.SSS2.p1.3.m3.1.1.3" xref="S3.SS3.SSS2.p1.3.m3.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.3.m3.1b"><apply id="S3.SS3.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.3.m3.1.1.1.cmml" xref="S3.SS3.SSS2.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.3.m3.1.1.2.cmml" xref="S3.SS3.SSS2.p1.3.m3.1.1.2">𝕊</ci><ci id="S3.SS3.SSS2.p1.3.m3.1.1.3.cmml" xref="S3.SS3.SSS2.p1.3.m3.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.3.m3.1c">\mathbb{S}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.3.m3.1d">blackboard_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> and generate prompt <math alttext="\mathbb{X}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.4.m4.1"><semantics id="S3.SS3.SSS2.p1.4.m4.1a"><msub id="S3.SS3.SSS2.p1.4.m4.1.1" xref="S3.SS3.SSS2.p1.4.m4.1.1.cmml"><mi id="S3.SS3.SSS2.p1.4.m4.1.1.2" xref="S3.SS3.SSS2.p1.4.m4.1.1.2.cmml">𝕏</mi><mi id="S3.SS3.SSS2.p1.4.m4.1.1.3" xref="S3.SS3.SSS2.p1.4.m4.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.4.m4.1b"><apply id="S3.SS3.SSS2.p1.4.m4.1.1.cmml" xref="S3.SS3.SSS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.4.m4.1.1.1.cmml" xref="S3.SS3.SSS2.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.4.m4.1.1.2.cmml" xref="S3.SS3.SSS2.p1.4.m4.1.1.2">𝕏</ci><ci id="S3.SS3.SSS2.p1.4.m4.1.1.3.cmml" xref="S3.SS3.SSS2.p1.4.m4.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.4.m4.1c">\mathbb{X}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.4.m4.1d">blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> to obtain end task response <math alttext="\mathbb{Y}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.5.m5.1"><semantics id="S3.SS3.SSS2.p1.5.m5.1a"><msub id="S3.SS3.SSS2.p1.5.m5.1.1" xref="S3.SS3.SSS2.p1.5.m5.1.1.cmml"><mi id="S3.SS3.SSS2.p1.5.m5.1.1.2" xref="S3.SS3.SSS2.p1.5.m5.1.1.2.cmml">𝕐</mi><mi id="S3.SS3.SSS2.p1.5.m5.1.1.3" xref="S3.SS3.SSS2.p1.5.m5.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.5.m5.1b"><apply id="S3.SS3.SSS2.p1.5.m5.1.1.cmml" xref="S3.SS3.SSS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.5.m5.1.1.1.cmml" xref="S3.SS3.SSS2.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.5.m5.1.1.2.cmml" xref="S3.SS3.SSS2.p1.5.m5.1.1.2">𝕐</ci><ci id="S3.SS3.SSS2.p1.5.m5.1.1.3.cmml" xref="S3.SS3.SSS2.p1.5.m5.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.5.m5.1c">\mathbb{Y}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.5.m5.1d">blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> and the label <math alttext="\mathbb{Z}_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.6.m6.1"><semantics id="S3.SS3.SSS2.p1.6.m6.1a"><msub id="S3.SS3.SSS2.p1.6.m6.1.1" xref="S3.SS3.SSS2.p1.6.m6.1.1.cmml"><mi id="S3.SS3.SSS2.p1.6.m6.1.1.2" xref="S3.SS3.SSS2.p1.6.m6.1.1.2.cmml">ℤ</mi><mi id="S3.SS3.SSS2.p1.6.m6.1.1.3" xref="S3.SS3.SSS2.p1.6.m6.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.6.m6.1b"><apply id="S3.SS3.SSS2.p1.6.m6.1.1.cmml" xref="S3.SS3.SSS2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.6.m6.1.1.1.cmml" xref="S3.SS3.SSS2.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.6.m6.1.1.2.cmml" xref="S3.SS3.SSS2.p1.6.m6.1.1.2">ℤ</ci><ci id="S3.SS3.SSS2.p1.6.m6.1.1.3.cmml" xref="S3.SS3.SSS2.p1.6.m6.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.6.m6.1c">\mathbb{Z}_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.6.m6.1d">blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> indicating whether the response is correct or not, which accords with the following distribution:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E8">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="p(\mathbb{Z}_{q}=1|\mathbb{X}_{q},\mathbb{Y}_{q})=\frac{1}{1+{e}^{-r^{*}(%
\mathbb{X}_{q},\mathbb{Y}_{q})}}." class="ltx_Math" display="block" id="S3.E8.m1.3"><semantics id="S3.E8.m1.3a"><mrow id="S3.E8.m1.3.3.1" xref="S3.E8.m1.3.3.1.1.cmml"><mrow id="S3.E8.m1.3.3.1.1" xref="S3.E8.m1.3.3.1.1.cmml"><mrow id="S3.E8.m1.3.3.1.1.1" xref="S3.E8.m1.3.3.1.1.1.cmml"><mi id="S3.E8.m1.3.3.1.1.1.3" xref="S3.E8.m1.3.3.1.1.1.3.cmml">p</mi><mo id="S3.E8.m1.3.3.1.1.1.2" xref="S3.E8.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="S3.E8.m1.3.3.1.1.1.1.1" xref="S3.E8.m1.3.3.1.1.1.1.1.1.cmml"><mo id="S3.E8.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S3.E8.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E8.m1.3.3.1.1.1.1.1.1" xref="S3.E8.m1.3.3.1.1.1.1.1.1.cmml"><msub id="S3.E8.m1.3.3.1.1.1.1.1.1.4" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4.cmml"><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.4.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4.2.cmml">ℤ</mi><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.4.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4.3.cmml">q</mi></msub><mo id="S3.E8.m1.3.3.1.1.1.1.1.1.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.3.cmml">=</mo><mrow id="S3.E8.m1.3.3.1.1.1.1.1.1.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.cmml"><mn id="S3.E8.m1.3.3.1.1.1.1.1.1.2.4" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.4.cmml">1</mn><mo fence="false" id="S3.E8.m1.3.3.1.1.1.1.1.1.2.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.3.cmml">|</mo><mrow id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.3.cmml"><msub id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.cmml">𝕏</mi><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.cmml">q</mi></msub><mo id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.3.cmml">,</mo><msub id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.cmml"><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.2" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.2.cmml">𝕐</mi><mi id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.3" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.3.cmml">q</mi></msub></mrow></mrow></mrow><mo id="S3.E8.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="S3.E8.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E8.m1.3.3.1.1.2" xref="S3.E8.m1.3.3.1.1.2.cmml">=</mo><mfrac id="S3.E8.m1.2.2" xref="S3.E8.m1.2.2.cmml"><mn id="S3.E8.m1.2.2.4" xref="S3.E8.m1.2.2.4.cmml">1</mn><mrow id="S3.E8.m1.2.2.2" xref="S3.E8.m1.2.2.2.cmml"><mn id="S3.E8.m1.2.2.2.4" xref="S3.E8.m1.2.2.2.4.cmml">1</mn><mo id="S3.E8.m1.2.2.2.3" xref="S3.E8.m1.2.2.2.3.cmml">+</mo><msup id="S3.E8.m1.2.2.2.5" xref="S3.E8.m1.2.2.2.5.cmml"><mi id="S3.E8.m1.2.2.2.5.2" xref="S3.E8.m1.2.2.2.5.2.cmml">e</mi><mrow id="S3.E8.m1.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.cmml"><mo id="S3.E8.m1.2.2.2.2.2a" xref="S3.E8.m1.2.2.2.2.2.cmml">−</mo><mrow id="S3.E8.m1.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.cmml"><msup id="S3.E8.m1.2.2.2.2.2.2.4" xref="S3.E8.m1.2.2.2.2.2.2.4.cmml"><mi id="S3.E8.m1.2.2.2.2.2.2.4.2" xref="S3.E8.m1.2.2.2.2.2.2.4.2.cmml">r</mi><mo id="S3.E8.m1.2.2.2.2.2.2.4.3" xref="S3.E8.m1.2.2.2.2.2.2.4.3.cmml">∗</mo></msup><mo id="S3.E8.m1.2.2.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.2.2.3.cmml">⁢</mo><mrow id="S3.E8.m1.2.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.3.cmml"><mo id="S3.E8.m1.2.2.2.2.2.2.2.2.3" stretchy="false" xref="S3.E8.m1.2.2.2.2.2.2.2.3.cmml">(</mo><msub id="S3.E8.m1.1.1.1.1.1.1.1.1.1" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E8.m1.1.1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1.2.cmml">𝕏</mi><mi id="S3.E8.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1.3.cmml">q</mi></msub><mo id="S3.E8.m1.2.2.2.2.2.2.2.2.4" xref="S3.E8.m1.2.2.2.2.2.2.2.3.cmml">,</mo><msub id="S3.E8.m1.2.2.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2.cmml"><mi id="S3.E8.m1.2.2.2.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2.2.cmml">𝕐</mi><mi id="S3.E8.m1.2.2.2.2.2.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2.3.cmml">q</mi></msub><mo id="S3.E8.m1.2.2.2.2.2.2.2.2.5" stretchy="false" xref="S3.E8.m1.2.2.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></msup></mrow></mfrac></mrow><mo id="S3.E8.m1.3.3.1.2" lspace="0em" xref="S3.E8.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E8.m1.3b"><apply id="S3.E8.m1.3.3.1.1.cmml" xref="S3.E8.m1.3.3.1"><eq id="S3.E8.m1.3.3.1.1.2.cmml" xref="S3.E8.m1.3.3.1.1.2"></eq><apply id="S3.E8.m1.3.3.1.1.1.cmml" xref="S3.E8.m1.3.3.1.1.1"><times id="S3.E8.m1.3.3.1.1.1.2.cmml" xref="S3.E8.m1.3.3.1.1.1.2"></times><ci id="S3.E8.m1.3.3.1.1.1.3.cmml" xref="S3.E8.m1.3.3.1.1.1.3">𝑝</ci><apply id="S3.E8.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1"><eq id="S3.E8.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.3"></eq><apply id="S3.E8.m1.3.3.1.1.1.1.1.1.4.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E8.m1.3.3.1.1.1.1.1.1.4.1.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.4.2.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4.2">ℤ</ci><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.4.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.4.3">𝑞</ci></apply><apply id="S3.E8.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2"><csymbol cd="latexml" id="S3.E8.m1.3.3.1.1.1.1.1.1.2.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.3">conditional</csymbol><cn id="S3.E8.m1.3.3.1.1.1.1.1.1.2.4.cmml" type="integer" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.4">1</cn><list id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2"><apply id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.2">𝕏</ci><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.1.1.1.1.3">𝑞</ci></apply><apply id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.1.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2">subscript</csymbol><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.2.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.2">𝕐</ci><ci id="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.3.cmml" xref="S3.E8.m1.3.3.1.1.1.1.1.1.2.2.2.2.3">𝑞</ci></apply></list></apply></apply></apply><apply id="S3.E8.m1.2.2.cmml" xref="S3.E8.m1.2.2"><divide id="S3.E8.m1.2.2.3.cmml" xref="S3.E8.m1.2.2"></divide><cn id="S3.E8.m1.2.2.4.cmml" type="integer" xref="S3.E8.m1.2.2.4">1</cn><apply id="S3.E8.m1.2.2.2.cmml" xref="S3.E8.m1.2.2.2"><plus id="S3.E8.m1.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.3"></plus><cn id="S3.E8.m1.2.2.2.4.cmml" type="integer" xref="S3.E8.m1.2.2.2.4">1</cn><apply id="S3.E8.m1.2.2.2.5.cmml" xref="S3.E8.m1.2.2.2.5"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.5.1.cmml" xref="S3.E8.m1.2.2.2.5">superscript</csymbol><ci id="S3.E8.m1.2.2.2.5.2.cmml" xref="S3.E8.m1.2.2.2.5.2">𝑒</ci><apply id="S3.E8.m1.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2"><minus id="S3.E8.m1.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2"></minus><apply id="S3.E8.m1.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2"><times id="S3.E8.m1.2.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.3"></times><apply id="S3.E8.m1.2.2.2.2.2.2.4.cmml" xref="S3.E8.m1.2.2.2.2.2.2.4"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.2.2.2.4.1.cmml" xref="S3.E8.m1.2.2.2.2.2.2.4">superscript</csymbol><ci id="S3.E8.m1.2.2.2.2.2.2.4.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.4.2">𝑟</ci><times id="S3.E8.m1.2.2.2.2.2.2.4.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.4.3"></times></apply><interval closure="open" id="S3.E8.m1.2.2.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2"><apply id="S3.E8.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1.2">𝕏</ci><ci id="S3.E8.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.1.1.3">𝑞</ci></apply><apply id="S3.E8.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E8.m1.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2.2">𝕐</ci><ci id="S3.E8.m1.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2.2.3">𝑞</ci></apply></interval></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E8.m1.3c">p(\mathbb{Z}_{q}=1|\mathbb{X}_{q},\mathbb{Y}_{q})=\frac{1}{1+{e}^{-r^{*}(%
\mathbb{X}_{q},\mathbb{Y}_{q})}}.</annotation><annotation encoding="application/x-llamapun" id="S3.E8.m1.3d">italic_p ( blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT = 1 | blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) = divide start_ARG 1 end_ARG start_ARG 1 + italic_e start_POSTSUPERSCRIPT - italic_r start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT ( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) end_POSTSUPERSCRIPT end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS2.p1.12">Formally, we define the training corpus of this aligning process as <math alttext="\mathcal{C}_{\mathcal{A}}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.7.m1.1"><semantics id="S3.SS3.SSS2.p1.7.m1.1a"><msub id="S3.SS3.SSS2.p1.7.m1.1.1" xref="S3.SS3.SSS2.p1.7.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p1.7.m1.1.1.2" xref="S3.SS3.SSS2.p1.7.m1.1.1.2.cmml">𝒞</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p1.7.m1.1.1.3" xref="S3.SS3.SSS2.p1.7.m1.1.1.3.cmml">𝒜</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.7.m1.1b"><apply id="S3.SS3.SSS2.p1.7.m1.1.1.cmml" xref="S3.SS3.SSS2.p1.7.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.7.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.7.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.7.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p1.7.m1.1.1.2">𝒞</ci><ci id="S3.SS3.SSS2.p1.7.m1.1.1.3.cmml" xref="S3.SS3.SSS2.p1.7.m1.1.1.3">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.7.m1.1c">\mathcal{C}_{\mathcal{A}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.7.m1.1d">caligraphic_C start_POSTSUBSCRIPT caligraphic_A end_POSTSUBSCRIPT</annotation></semantics></math> consisting of triplets <math alttext="(\mathbb{X}_{q},\mathbb{Y}_{q},\mathbb{Z}_{q})" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.8.m2.3"><semantics id="S3.SS3.SSS2.p1.8.m2.3a"><mrow id="S3.SS3.SSS2.p1.8.m2.3.3.3" xref="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml"><mo id="S3.SS3.SSS2.p1.8.m2.3.3.3.4" stretchy="false" xref="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml">(</mo><msub id="S3.SS3.SSS2.p1.8.m2.1.1.1.1" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1.cmml"><mi id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.2" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1.2.cmml">𝕏</mi><mi id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.3" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1.3.cmml">q</mi></msub><mo id="S3.SS3.SSS2.p1.8.m2.3.3.3.5" xref="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml">,</mo><msub id="S3.SS3.SSS2.p1.8.m2.2.2.2.2" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2.cmml"><mi id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.2" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2.2.cmml">𝕐</mi><mi id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.3" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2.3.cmml">q</mi></msub><mo id="S3.SS3.SSS2.p1.8.m2.3.3.3.6" xref="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml">,</mo><msub id="S3.SS3.SSS2.p1.8.m2.3.3.3.3" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3.cmml"><mi id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.2" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3.2.cmml">ℤ</mi><mi id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.3" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3.3.cmml">q</mi></msub><mo id="S3.SS3.SSS2.p1.8.m2.3.3.3.7" stretchy="false" xref="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.8.m2.3b"><vector id="S3.SS3.SSS2.p1.8.m2.3.3.4.cmml" xref="S3.SS3.SSS2.p1.8.m2.3.3.3"><apply id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.2.cmml" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1.2">𝕏</ci><ci id="S3.SS3.SSS2.p1.8.m2.1.1.1.1.3.cmml" xref="S3.SS3.SSS2.p1.8.m2.1.1.1.1.3">𝑞</ci></apply><apply id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.cmml" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.1.cmml" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.2.cmml" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2.2">𝕐</ci><ci id="S3.SS3.SSS2.p1.8.m2.2.2.2.2.3.cmml" xref="S3.SS3.SSS2.p1.8.m2.2.2.2.2.3">𝑞</ci></apply><apply id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.cmml" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.1.cmml" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.2.cmml" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3.2">ℤ</ci><ci id="S3.SS3.SSS2.p1.8.m2.3.3.3.3.3.cmml" xref="S3.SS3.SSS2.p1.8.m2.3.3.3.3.3">𝑞</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.8.m2.3c">(\mathbb{X}_{q},\mathbb{Y}_{q},\mathbb{Z}_{q})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.8.m2.3d">( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT )</annotation></semantics></math> for each query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.9.m3.1"><semantics id="S3.SS3.SSS2.p1.9.m3.1a"><mi id="S3.SS3.SSS2.p1.9.m3.1.1" xref="S3.SS3.SSS2.p1.9.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.9.m3.1b"><ci id="S3.SS3.SSS2.p1.9.m3.1.1.cmml" xref="S3.SS3.SSS2.p1.9.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.9.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.9.m3.1d">italic_q</annotation></semantics></math>.
With a reward model <math alttext="r_{\phi}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.10.m4.1"><semantics id="S3.SS3.SSS2.p1.10.m4.1a"><msub id="S3.SS3.SSS2.p1.10.m4.1.1" xref="S3.SS3.SSS2.p1.10.m4.1.1.cmml"><mi id="S3.SS3.SSS2.p1.10.m4.1.1.2" xref="S3.SS3.SSS2.p1.10.m4.1.1.2.cmml">r</mi><mi id="S3.SS3.SSS2.p1.10.m4.1.1.3" xref="S3.SS3.SSS2.p1.10.m4.1.1.3.cmml">ϕ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.10.m4.1b"><apply id="S3.SS3.SSS2.p1.10.m4.1.1.cmml" xref="S3.SS3.SSS2.p1.10.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.10.m4.1.1.1.cmml" xref="S3.SS3.SSS2.p1.10.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.10.m4.1.1.2.cmml" xref="S3.SS3.SSS2.p1.10.m4.1.1.2">𝑟</ci><ci id="S3.SS3.SSS2.p1.10.m4.1.1.3.cmml" xref="S3.SS3.SSS2.p1.10.m4.1.1.3">italic-ϕ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.10.m4.1c">r_{\phi}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.10.m4.1d">italic_r start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT</annotation></semantics></math> parameterized by <math alttext="\phi" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.11.m5.1"><semantics id="S3.SS3.SSS2.p1.11.m5.1a"><mi id="S3.SS3.SSS2.p1.11.m5.1.1" xref="S3.SS3.SSS2.p1.11.m5.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.11.m5.1b"><ci id="S3.SS3.SSS2.p1.11.m5.1.1.cmml" xref="S3.SS3.SSS2.p1.11.m5.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.11.m5.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.11.m5.1d">italic_ϕ</annotation></semantics></math> to estimate <math alttext="r^{*}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.12.m6.1"><semantics id="S3.SS3.SSS2.p1.12.m6.1a"><msup id="S3.SS3.SSS2.p1.12.m6.1.1" xref="S3.SS3.SSS2.p1.12.m6.1.1.cmml"><mi id="S3.SS3.SSS2.p1.12.m6.1.1.2" xref="S3.SS3.SSS2.p1.12.m6.1.1.2.cmml">r</mi><mo id="S3.SS3.SSS2.p1.12.m6.1.1.3" xref="S3.SS3.SSS2.p1.12.m6.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.12.m6.1b"><apply id="S3.SS3.SSS2.p1.12.m6.1.1.cmml" xref="S3.SS3.SSS2.p1.12.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.12.m6.1.1.1.cmml" xref="S3.SS3.SSS2.p1.12.m6.1.1">superscript</csymbol><ci id="S3.SS3.SSS2.p1.12.m6.1.1.2.cmml" xref="S3.SS3.SSS2.p1.12.m6.1.1.2">𝑟</ci><times id="S3.SS3.SSS2.p1.12.m6.1.1.3.cmml" xref="S3.SS3.SSS2.p1.12.m6.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.12.m6.1c">r^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.12.m6.1d">italic_r start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>, the binary classification loss can be defined as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E9">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\begin{split}\mathcal{L}_{RM}(\phi)=\sum_{(\mathbb{X}_{q},\mathbb{Y}_{q},%
\mathbb{Z}_{q})\in\mathcal{C}_{\mathcal{A}}}-\mathbb{Z}_{q}log\sigma(r_{\phi}(%
\mathbb{X}_{q},\mathbb{Y}_{q}))-\\
(1-\mathbb{Z}_{q})log\sigma(1-r_{\phi}(\mathbb{X}_{q},\mathbb{Y}_{q})),\end{split}" class="ltx_Math" display="block" id="S3.E9.m1.54"><semantics id="S3.E9.m1.54a"><mtable displaystyle="true" id="S3.E9.m1.54.54.3" rowspacing="0pt"><mtr id="S3.E9.m1.54.54.3a"><mtd class="ltx_align_right" columnalign="right" id="S3.E9.m1.54.54.3b"><mrow id="S3.E9.m1.53.53.2.52.28.28"><mrow id="S3.E9.m1.53.53.2.52.28.28.29"><msub id="S3.E9.m1.53.53.2.52.28.28.29.2"><mi class="ltx_font_mathcaligraphic" id="S3.E9.m1.1.1.1.1.1.1" xref="S3.E9.m1.1.1.1.1.1.1.cmml">ℒ</mi><mrow id="S3.E9.m1.2.2.2.2.2.2.1" xref="S3.E9.m1.2.2.2.2.2.2.1.cmml"><mi id="S3.E9.m1.2.2.2.2.2.2.1.2" xref="S3.E9.m1.2.2.2.2.2.2.1.2.cmml">R</mi><mo id="S3.E9.m1.2.2.2.2.2.2.1.1" xref="S3.E9.m1.2.2.2.2.2.2.1.1.cmml">⁢</mo><mi id="S3.E9.m1.2.2.2.2.2.2.1.3" xref="S3.E9.m1.2.2.2.2.2.2.1.3.cmml">M</mi></mrow></msub><mo id="S3.E9.m1.53.53.2.52.28.28.29.1" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.29.3"><mo id="S3.E9.m1.3.3.3.3.3.3" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><mi id="S3.E9.m1.4.4.4.4.4.4" xref="S3.E9.m1.4.4.4.4.4.4.cmml">ϕ</mi><mo id="S3.E9.m1.5.5.5.5.5.5" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E9.m1.6.6.6.6.6.6" rspace="0.111em" xref="S3.E9.m1.6.6.6.6.6.6.cmml">=</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.28"><munder id="S3.E9.m1.53.53.2.52.28.28.28.2"><mo id="S3.E9.m1.7.7.7.7.7.7" movablelimits="false" rspace="0em" xref="S3.E9.m1.7.7.7.7.7.7.cmml">∑</mo><mrow id="S3.E9.m1.8.8.8.8.8.8.1" xref="S3.E9.m1.8.8.8.8.8.8.1.cmml"><mrow id="S3.E9.m1.8.8.8.8.8.8.1.3.3" xref="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml"><mo id="S3.E9.m1.8.8.8.8.8.8.1.3.3.4" stretchy="false" xref="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml">(</mo><msub id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.cmml"><mi id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.2" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.2.cmml">𝕏</mi><mi id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.3" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.3.cmml">q</mi></msub><mo id="S3.E9.m1.8.8.8.8.8.8.1.3.3.5" xref="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml">,</mo><msub id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.cmml"><mi id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.2" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.2.cmml">𝕐</mi><mi id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.3" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.3.cmml">q</mi></msub><mo id="S3.E9.m1.8.8.8.8.8.8.1.3.3.6" xref="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml">,</mo><msub id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.cmml"><mi id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.2" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.2.cmml">ℤ</mi><mi id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.3" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.3.cmml">q</mi></msub><mo id="S3.E9.m1.8.8.8.8.8.8.1.3.3.7" stretchy="false" xref="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml">)</mo></mrow><mo id="S3.E9.m1.8.8.8.8.8.8.1.4" xref="S3.E9.m1.8.8.8.8.8.8.1.4.cmml">∈</mo><msub id="S3.E9.m1.8.8.8.8.8.8.1.5" xref="S3.E9.m1.8.8.8.8.8.8.1.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E9.m1.8.8.8.8.8.8.1.5.2" xref="S3.E9.m1.8.8.8.8.8.8.1.5.2.cmml">𝒞</mi><mi class="ltx_font_mathcaligraphic" id="S3.E9.m1.8.8.8.8.8.8.1.5.3" xref="S3.E9.m1.8.8.8.8.8.8.1.5.3.cmml">𝒜</mi></msub></mrow></munder><mo id="S3.E9.m1.9.9.9.9.9.9" lspace="0em" xref="S3.E9.m1.9.9.9.9.9.9.cmml">−</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.28.1"><mrow id="S3.E9.m1.53.53.2.52.28.28.28.1.1"><msub id="S3.E9.m1.53.53.2.52.28.28.28.1.1.3"><mi id="S3.E9.m1.10.10.10.10.10.10" xref="S3.E9.m1.10.10.10.10.10.10.cmml">ℤ</mi><mi id="S3.E9.m1.11.11.11.11.11.11.1" xref="S3.E9.m1.11.11.11.11.11.11.1.cmml">q</mi></msub><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.2" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.12.12.12.12.12.12" xref="S3.E9.m1.12.12.12.12.12.12.cmml">l</mi><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.2a" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.13.13.13.13.13.13" xref="S3.E9.m1.13.13.13.13.13.13.cmml">o</mi><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.2b" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.14.14.14.14.14.14" xref="S3.E9.m1.14.14.14.14.14.14.cmml">g</mi><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.2c" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.15.15.15.15.15.15" xref="S3.E9.m1.15.15.15.15.15.15.cmml">σ</mi><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.2d" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1"><mo id="S3.E9.m1.16.16.16.16.16.16" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1"><msub id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1.4"><mi id="S3.E9.m1.17.17.17.17.17.17" xref="S3.E9.m1.17.17.17.17.17.17.cmml">r</mi><mi id="S3.E9.m1.18.18.18.18.18.18.1" xref="S3.E9.m1.18.18.18.18.18.18.1.cmml">ϕ</mi></msub><mo id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1.3" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mrow id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1.2.2"><mo id="S3.E9.m1.19.19.19.19.19.19" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><msub id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1.1.1.1"><mi id="S3.E9.m1.20.20.20.20.20.20" xref="S3.E9.m1.20.20.20.20.20.20.cmml">𝕏</mi><mi id="S3.E9.m1.21.21.21.21.21.21.1" xref="S3.E9.m1.21.21.21.21.21.21.1.cmml">q</mi></msub><mo id="S3.E9.m1.22.22.22.22.22.22" xref="S3.E9.m1.52.52.1.1.1.cmml">,</mo><msub id="S3.E9.m1.53.53.2.52.28.28.28.1.1.1.1.1.2.2.2"><mi id="S3.E9.m1.23.23.23.23.23.23" xref="S3.E9.m1.23.23.23.23.23.23.cmml">𝕐</mi><mi id="S3.E9.m1.24.24.24.24.24.24.1" xref="S3.E9.m1.24.24.24.24.24.24.1.cmml">q</mi></msub><mo id="S3.E9.m1.25.25.25.25.25.25" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E9.m1.26.26.26.26.26.26" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E9.m1.27.27.27.27.27.27" xref="S3.E9.m1.52.52.1.1.1.cmml">−</mo></mrow></mrow></mrow></mtd></mtr><mtr id="S3.E9.m1.54.54.3c"><mtd class="ltx_align_right" columnalign="right" id="S3.E9.m1.54.54.3d"><mrow id="S3.E9.m1.54.54.3.53.25.25.25"><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1"><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.1.1"><mo id="S3.E9.m1.28.28.28.1.1.1" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.1.1.1"><mn id="S3.E9.m1.29.29.29.2.2.2" xref="S3.E9.m1.29.29.29.2.2.2.cmml">1</mn><mo id="S3.E9.m1.30.30.30.3.3.3" xref="S3.E9.m1.30.30.30.3.3.3.cmml">−</mo><msub id="S3.E9.m1.54.54.3.53.25.25.25.1.1.1.1.1"><mi id="S3.E9.m1.31.31.31.4.4.4" xref="S3.E9.m1.31.31.31.4.4.4.cmml">ℤ</mi><mi id="S3.E9.m1.32.32.32.5.5.5.1" xref="S3.E9.m1.32.32.32.5.5.5.1.cmml">q</mi></msub></mrow><mo id="S3.E9.m1.33.33.33.6.6.6" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.3" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.34.34.34.7.7.7" xref="S3.E9.m1.34.34.34.7.7.7.cmml">l</mi><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.3a" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.35.35.35.8.8.8" xref="S3.E9.m1.35.35.35.8.8.8.cmml">o</mi><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.3b" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.36.36.36.9.9.9" xref="S3.E9.m1.36.36.36.9.9.9.cmml">g</mi><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.3c" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mi id="S3.E9.m1.37.37.37.10.10.10" xref="S3.E9.m1.37.37.37.10.10.10.cmml">σ</mi><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.3d" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1"><mo id="S3.E9.m1.38.38.38.11.11.11" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1"><mn id="S3.E9.m1.39.39.39.12.12.12" xref="S3.E9.m1.39.39.39.12.12.12.cmml">1</mn><mo id="S3.E9.m1.40.40.40.13.13.13" xref="S3.E9.m1.40.40.40.13.13.13.cmml">−</mo><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.2"><msub id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.2.4"><mi id="S3.E9.m1.41.41.41.14.14.14" xref="S3.E9.m1.41.41.41.14.14.14.cmml">r</mi><mi id="S3.E9.m1.42.42.42.15.15.15.1" xref="S3.E9.m1.42.42.42.15.15.15.1.cmml">ϕ</mi></msub><mo id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.2.3" xref="S3.E9.m1.52.52.1.1.1.cmml">⁢</mo><mrow id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.2.2.2"><mo id="S3.E9.m1.43.43.43.16.16.16" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">(</mo><msub id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.1.1.1.1"><mi id="S3.E9.m1.44.44.44.17.17.17" xref="S3.E9.m1.44.44.44.17.17.17.cmml">𝕏</mi><mi id="S3.E9.m1.45.45.45.18.18.18.1" xref="S3.E9.m1.45.45.45.18.18.18.1.cmml">q</mi></msub><mo id="S3.E9.m1.46.46.46.19.19.19" xref="S3.E9.m1.52.52.1.1.1.cmml">,</mo><msub id="S3.E9.m1.54.54.3.53.25.25.25.1.2.1.1.2.2.2.2"><mi id="S3.E9.m1.47.47.47.20.20.20" xref="S3.E9.m1.47.47.47.20.20.20.cmml">𝕐</mi><mi id="S3.E9.m1.48.48.48.21.21.21.1" xref="S3.E9.m1.48.48.48.21.21.21.1.cmml">q</mi></msub><mo id="S3.E9.m1.49.49.49.22.22.22" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E9.m1.50.50.50.23.23.23" stretchy="false" xref="S3.E9.m1.52.52.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E9.m1.51.51.51.24.24.24" xref="S3.E9.m1.52.52.1.1.1.cmml">,</mo></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S3.E9.m1.54b"><apply id="S3.E9.m1.52.52.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><eq id="S3.E9.m1.6.6.6.6.6.6.cmml" xref="S3.E9.m1.6.6.6.6.6.6"></eq><apply id="S3.E9.m1.52.52.1.1.1.5.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><times id="S3.E9.m1.52.52.1.1.1.5.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"></times><apply id="S3.E9.m1.52.52.1.1.1.5.2.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.5.2.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.1.1.1.1.1.1">ℒ</ci><apply id="S3.E9.m1.2.2.2.2.2.2.1.cmml" xref="S3.E9.m1.2.2.2.2.2.2.1"><times id="S3.E9.m1.2.2.2.2.2.2.1.1.cmml" xref="S3.E9.m1.2.2.2.2.2.2.1.1"></times><ci id="S3.E9.m1.2.2.2.2.2.2.1.2.cmml" xref="S3.E9.m1.2.2.2.2.2.2.1.2">𝑅</ci><ci id="S3.E9.m1.2.2.2.2.2.2.1.3.cmml" xref="S3.E9.m1.2.2.2.2.2.2.1.3">𝑀</ci></apply></apply><ci id="S3.E9.m1.4.4.4.4.4.4.cmml" xref="S3.E9.m1.4.4.4.4.4.4">italic-ϕ</ci></apply><apply id="S3.E9.m1.52.52.1.1.1.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><minus id="S3.E9.m1.9.9.9.9.9.9.cmml" xref="S3.E9.m1.9.9.9.9.9.9"></minus><apply id="S3.E9.m1.52.52.1.1.1.3.5.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.3.5.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><sum id="S3.E9.m1.7.7.7.7.7.7.cmml" xref="S3.E9.m1.7.7.7.7.7.7"></sum><apply id="S3.E9.m1.8.8.8.8.8.8.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1"><in id="S3.E9.m1.8.8.8.8.8.8.1.4.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.4"></in><vector id="S3.E9.m1.8.8.8.8.8.8.1.3.4.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3"><apply id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1">subscript</csymbol><ci id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.2.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.2">𝕏</ci><ci id="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.3.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.1.1.1.3">𝑞</ci></apply><apply id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2"><csymbol cd="ambiguous" id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2">subscript</csymbol><ci id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.2.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.2">𝕐</ci><ci id="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.3.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.2.2.2.3">𝑞</ci></apply><apply id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3"><csymbol cd="ambiguous" id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3">subscript</csymbol><ci id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.2.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.2">ℤ</ci><ci id="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.3.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.3.3.3.3">𝑞</ci></apply></vector><apply id="S3.E9.m1.8.8.8.8.8.8.1.5.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.5"><csymbol cd="ambiguous" id="S3.E9.m1.8.8.8.8.8.8.1.5.1.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.5">subscript</csymbol><ci id="S3.E9.m1.8.8.8.8.8.8.1.5.2.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.5.2">𝒞</ci><ci id="S3.E9.m1.8.8.8.8.8.8.1.5.3.cmml" xref="S3.E9.m1.8.8.8.8.8.8.1.5.3">𝒜</ci></apply></apply></apply><apply id="S3.E9.m1.52.52.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><times id="S3.E9.m1.52.52.1.1.1.1.1.2.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"></times><apply id="S3.E9.m1.52.52.1.1.1.1.1.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.1.1.3.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.10.10.10.10.10.10.cmml" xref="S3.E9.m1.10.10.10.10.10.10">ℤ</ci><ci id="S3.E9.m1.11.11.11.11.11.11.1.cmml" xref="S3.E9.m1.11.11.11.11.11.11.1">𝑞</ci></apply><ci id="S3.E9.m1.12.12.12.12.12.12.cmml" xref="S3.E9.m1.12.12.12.12.12.12">𝑙</ci><ci id="S3.E9.m1.13.13.13.13.13.13.cmml" xref="S3.E9.m1.13.13.13.13.13.13">𝑜</ci><ci id="S3.E9.m1.14.14.14.14.14.14.cmml" xref="S3.E9.m1.14.14.14.14.14.14">𝑔</ci><ci id="S3.E9.m1.15.15.15.15.15.15.cmml" xref="S3.E9.m1.15.15.15.15.15.15">𝜎</ci><apply id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><times id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"></times><apply id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.4.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.4.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.17.17.17.17.17.17.cmml" xref="S3.E9.m1.17.17.17.17.17.17">𝑟</ci><ci id="S3.E9.m1.18.18.18.18.18.18.1.cmml" xref="S3.E9.m1.18.18.18.18.18.18.1">italic-ϕ</ci></apply><interval closure="open" id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><apply id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.20.20.20.20.20.20.cmml" xref="S3.E9.m1.20.20.20.20.20.20">𝕏</ci><ci id="S3.E9.m1.21.21.21.21.21.21.1.cmml" xref="S3.E9.m1.21.21.21.21.21.21.1">𝑞</ci></apply><apply id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.23.23.23.23.23.23.cmml" xref="S3.E9.m1.23.23.23.23.23.23">𝕐</ci><ci id="S3.E9.m1.24.24.24.24.24.24.1.cmml" xref="S3.E9.m1.24.24.24.24.24.24.1">𝑞</ci></apply></interval></apply></apply><apply id="S3.E9.m1.52.52.1.1.1.3.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><times id="S3.E9.m1.52.52.1.1.1.3.3.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"></times><apply id="S3.E9.m1.52.52.1.1.1.2.2.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><minus id="S3.E9.m1.30.30.30.3.3.3.cmml" xref="S3.E9.m1.30.30.30.3.3.3"></minus><cn id="S3.E9.m1.29.29.29.2.2.2.cmml" type="integer" xref="S3.E9.m1.29.29.29.2.2.2">1</cn><apply id="S3.E9.m1.52.52.1.1.1.2.2.1.1.1.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.2.2.1.1.1.3.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.31.31.31.4.4.4.cmml" xref="S3.E9.m1.31.31.31.4.4.4">ℤ</ci><ci id="S3.E9.m1.32.32.32.5.5.5.1.cmml" xref="S3.E9.m1.32.32.32.5.5.5.1">𝑞</ci></apply></apply><ci id="S3.E9.m1.34.34.34.7.7.7.cmml" xref="S3.E9.m1.34.34.34.7.7.7">𝑙</ci><ci id="S3.E9.m1.35.35.35.8.8.8.cmml" xref="S3.E9.m1.35.35.35.8.8.8">𝑜</ci><ci id="S3.E9.m1.36.36.36.9.9.9.cmml" xref="S3.E9.m1.36.36.36.9.9.9">𝑔</ci><ci id="S3.E9.m1.37.37.37.10.10.10.cmml" xref="S3.E9.m1.37.37.37.10.10.10">𝜎</ci><apply id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><minus id="S3.E9.m1.40.40.40.13.13.13.cmml" xref="S3.E9.m1.40.40.40.13.13.13"></minus><cn id="S3.E9.m1.39.39.39.12.12.12.cmml" type="integer" xref="S3.E9.m1.39.39.39.12.12.12">1</cn><apply id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><times id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"></times><apply id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.4.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.4.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.41.41.41.14.14.14.cmml" xref="S3.E9.m1.41.41.41.14.14.14">𝑟</ci><ci id="S3.E9.m1.42.42.42.15.15.15.1.cmml" xref="S3.E9.m1.42.42.42.15.15.15.1">italic-ϕ</ci></apply><interval closure="open" id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.2.3.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><apply id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.44.44.44.17.17.17.cmml" xref="S3.E9.m1.44.44.44.17.17.17">𝕏</ci><ci id="S3.E9.m1.45.45.45.18.18.18.1.cmml" xref="S3.E9.m1.45.45.45.18.18.18.1">𝑞</ci></apply><apply id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.2.2.2.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1"><csymbol cd="ambiguous" id="S3.E9.m1.52.52.1.1.1.3.3.2.1.1.2.2.2.2.1.cmml" xref="S3.E9.m1.53.53.2.52.28.28.29.1">subscript</csymbol><ci id="S3.E9.m1.47.47.47.20.20.20.cmml" xref="S3.E9.m1.47.47.47.20.20.20">𝕐</ci><ci id="S3.E9.m1.48.48.48.21.21.21.1.cmml" xref="S3.E9.m1.48.48.48.21.21.21.1">𝑞</ci></apply></interval></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E9.m1.54c">\begin{split}\mathcal{L}_{RM}(\phi)=\sum_{(\mathbb{X}_{q},\mathbb{Y}_{q},%
\mathbb{Z}_{q})\in\mathcal{C}_{\mathcal{A}}}-\mathbb{Z}_{q}log\sigma(r_{\phi}(%
\mathbb{X}_{q},\mathbb{Y}_{q}))-\\
(1-\mathbb{Z}_{q})log\sigma(1-r_{\phi}(\mathbb{X}_{q},\mathbb{Y}_{q})),\end{split}</annotation><annotation encoding="application/x-llamapun" id="S3.E9.m1.54d">start_ROW start_CELL caligraphic_L start_POSTSUBSCRIPT italic_R italic_M end_POSTSUBSCRIPT ( italic_ϕ ) = ∑ start_POSTSUBSCRIPT ( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) ∈ caligraphic_C start_POSTSUBSCRIPT caligraphic_A end_POSTSUBSCRIPT end_POSTSUBSCRIPT - blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT italic_l italic_o italic_g italic_σ ( italic_r start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) ) - end_CELL end_ROW start_ROW start_CELL ( 1 - blackboard_Z start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) italic_l italic_o italic_g italic_σ ( 1 - italic_r start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) ) , end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS2.p1.15">where <math alttext="\sigma" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.13.m1.1"><semantics id="S3.SS3.SSS2.p1.13.m1.1a"><mi id="S3.SS3.SSS2.p1.13.m1.1.1" xref="S3.SS3.SSS2.p1.13.m1.1.1.cmml">σ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.13.m1.1b"><ci id="S3.SS3.SSS2.p1.13.m1.1.1.cmml" xref="S3.SS3.SSS2.p1.13.m1.1.1">𝜎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.13.m1.1c">\sigma</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.13.m1.1d">italic_σ</annotation></semantics></math> is the sigmoid function.
Furthermore, we follow the concept of DPO that eschews the need to explicitly estimate the reward model by solving <math alttext="r_{\phi}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.14.m2.1"><semantics id="S3.SS3.SSS2.p1.14.m2.1a"><msub id="S3.SS3.SSS2.p1.14.m2.1.1" xref="S3.SS3.SSS2.p1.14.m2.1.1.cmml"><mi id="S3.SS3.SSS2.p1.14.m2.1.1.2" xref="S3.SS3.SSS2.p1.14.m2.1.1.2.cmml">r</mi><mi id="S3.SS3.SSS2.p1.14.m2.1.1.3" xref="S3.SS3.SSS2.p1.14.m2.1.1.3.cmml">ϕ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.14.m2.1b"><apply id="S3.SS3.SSS2.p1.14.m2.1.1.cmml" xref="S3.SS3.SSS2.p1.14.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.14.m2.1.1.1.cmml" xref="S3.SS3.SSS2.p1.14.m2.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.14.m2.1.1.2.cmml" xref="S3.SS3.SSS2.p1.14.m2.1.1.2">𝑟</ci><ci id="S3.SS3.SSS2.p1.14.m2.1.1.3.cmml" xref="S3.SS3.SSS2.p1.14.m2.1.1.3">italic-ϕ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.14.m2.1c">r_{\phi}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.14.m2.1d">italic_r start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT</annotation></semantics></math> as a function of language model policy <math alttext="{\pi}^{\theta}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.15.m3.1"><semantics id="S3.SS3.SSS2.p1.15.m3.1a"><msup id="S3.SS3.SSS2.p1.15.m3.1.1" xref="S3.SS3.SSS2.p1.15.m3.1.1.cmml"><mi id="S3.SS3.SSS2.p1.15.m3.1.1.2" xref="S3.SS3.SSS2.p1.15.m3.1.1.2.cmml">π</mi><mi id="S3.SS3.SSS2.p1.15.m3.1.1.3" xref="S3.SS3.SSS2.p1.15.m3.1.1.3.cmml">θ</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.15.m3.1b"><apply id="S3.SS3.SSS2.p1.15.m3.1.1.cmml" xref="S3.SS3.SSS2.p1.15.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.15.m3.1.1.1.cmml" xref="S3.SS3.SSS2.p1.15.m3.1.1">superscript</csymbol><ci id="S3.SS3.SSS2.p1.15.m3.1.1.2.cmml" xref="S3.SS3.SSS2.p1.15.m3.1.1.2">𝜋</ci><ci id="S3.SS3.SSS2.p1.15.m3.1.1.3.cmml" xref="S3.SS3.SSS2.p1.15.m3.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.15.m3.1c">{\pi}^{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.15.m3.1d">italic_π start_POSTSUPERSCRIPT italic_θ end_POSTSUPERSCRIPT</annotation></semantics></math>, which is formalized as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E10">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="r_{\phi}(\mathbb{X}_{q},\mathbb{Y}_{q})=\beta log\frac{{\pi}^{\theta}(\mathbb{%
Y}_{q}|\mathbb{X}_{q})}{{\pi}^{\text{SFT}}(\mathbb{Y}_{q}|\mathbb{X}_{q})}." class="ltx_Math" display="block" id="S3.E10.m1.3"><semantics id="S3.E10.m1.3a"><mrow id="S3.E10.m1.3.3.1" xref="S3.E10.m1.3.3.1.1.cmml"><mrow id="S3.E10.m1.3.3.1.1" xref="S3.E10.m1.3.3.1.1.cmml"><mrow id="S3.E10.m1.3.3.1.1.2" xref="S3.E10.m1.3.3.1.1.2.cmml"><msub id="S3.E10.m1.3.3.1.1.2.4" xref="S3.E10.m1.3.3.1.1.2.4.cmml"><mi id="S3.E10.m1.3.3.1.1.2.4.2" xref="S3.E10.m1.3.3.1.1.2.4.2.cmml">r</mi><mi id="S3.E10.m1.3.3.1.1.2.4.3" xref="S3.E10.m1.3.3.1.1.2.4.3.cmml">ϕ</mi></msub><mo id="S3.E10.m1.3.3.1.1.2.3" xref="S3.E10.m1.3.3.1.1.2.3.cmml">⁢</mo><mrow id="S3.E10.m1.3.3.1.1.2.2.2" xref="S3.E10.m1.3.3.1.1.2.2.3.cmml"><mo id="S3.E10.m1.3.3.1.1.2.2.2.3" stretchy="false" xref="S3.E10.m1.3.3.1.1.2.2.3.cmml">(</mo><msub id="S3.E10.m1.3.3.1.1.1.1.1.1" xref="S3.E10.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E10.m1.3.3.1.1.1.1.1.1.2" xref="S3.E10.m1.3.3.1.1.1.1.1.1.2.cmml">𝕏</mi><mi id="S3.E10.m1.3.3.1.1.1.1.1.1.3" xref="S3.E10.m1.3.3.1.1.1.1.1.1.3.cmml">q</mi></msub><mo id="S3.E10.m1.3.3.1.1.2.2.2.4" xref="S3.E10.m1.3.3.1.1.2.2.3.cmml">,</mo><msub id="S3.E10.m1.3.3.1.1.2.2.2.2" xref="S3.E10.m1.3.3.1.1.2.2.2.2.cmml"><mi id="S3.E10.m1.3.3.1.1.2.2.2.2.2" xref="S3.E10.m1.3.3.1.1.2.2.2.2.2.cmml">𝕐</mi><mi id="S3.E10.m1.3.3.1.1.2.2.2.2.3" xref="S3.E10.m1.3.3.1.1.2.2.2.2.3.cmml">q</mi></msub><mo id="S3.E10.m1.3.3.1.1.2.2.2.5" stretchy="false" xref="S3.E10.m1.3.3.1.1.2.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E10.m1.3.3.1.1.3" xref="S3.E10.m1.3.3.1.1.3.cmml">=</mo><mrow id="S3.E10.m1.3.3.1.1.4" xref="S3.E10.m1.3.3.1.1.4.cmml"><mi id="S3.E10.m1.3.3.1.1.4.2" xref="S3.E10.m1.3.3.1.1.4.2.cmml">β</mi><mo id="S3.E10.m1.3.3.1.1.4.1" xref="S3.E10.m1.3.3.1.1.4.1.cmml">⁢</mo><mi id="S3.E10.m1.3.3.1.1.4.3" xref="S3.E10.m1.3.3.1.1.4.3.cmml">l</mi><mo id="S3.E10.m1.3.3.1.1.4.1a" xref="S3.E10.m1.3.3.1.1.4.1.cmml">⁢</mo><mi id="S3.E10.m1.3.3.1.1.4.4" xref="S3.E10.m1.3.3.1.1.4.4.cmml">o</mi><mo id="S3.E10.m1.3.3.1.1.4.1b" xref="S3.E10.m1.3.3.1.1.4.1.cmml">⁢</mo><mi id="S3.E10.m1.3.3.1.1.4.5" xref="S3.E10.m1.3.3.1.1.4.5.cmml">g</mi><mo id="S3.E10.m1.3.3.1.1.4.1c" xref="S3.E10.m1.3.3.1.1.4.1.cmml">⁢</mo><mfrac id="S3.E10.m1.2.2" xref="S3.E10.m1.2.2.cmml"><mrow id="S3.E10.m1.1.1.1" xref="S3.E10.m1.1.1.1.cmml"><msup id="S3.E10.m1.1.1.1.3" xref="S3.E10.m1.1.1.1.3.cmml"><mi id="S3.E10.m1.1.1.1.3.2" xref="S3.E10.m1.1.1.1.3.2.cmml">π</mi><mi id="S3.E10.m1.1.1.1.3.3" xref="S3.E10.m1.1.1.1.3.3.cmml">θ</mi></msup><mo id="S3.E10.m1.1.1.1.2" xref="S3.E10.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E10.m1.1.1.1.1.1" xref="S3.E10.m1.1.1.1.1.1.1.cmml"><mo id="S3.E10.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E10.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E10.m1.1.1.1.1.1.1" xref="S3.E10.m1.1.1.1.1.1.1.cmml"><msub id="S3.E10.m1.1.1.1.1.1.1.2" xref="S3.E10.m1.1.1.1.1.1.1.2.cmml"><mi id="S3.E10.m1.1.1.1.1.1.1.2.2" xref="S3.E10.m1.1.1.1.1.1.1.2.2.cmml">𝕐</mi><mi id="S3.E10.m1.1.1.1.1.1.1.2.3" xref="S3.E10.m1.1.1.1.1.1.1.2.3.cmml">q</mi></msub><mo fence="false" id="S3.E10.m1.1.1.1.1.1.1.1" xref="S3.E10.m1.1.1.1.1.1.1.1.cmml">|</mo><msub id="S3.E10.m1.1.1.1.1.1.1.3" xref="S3.E10.m1.1.1.1.1.1.1.3.cmml"><mi id="S3.E10.m1.1.1.1.1.1.1.3.2" xref="S3.E10.m1.1.1.1.1.1.1.3.2.cmml">𝕏</mi><mi id="S3.E10.m1.1.1.1.1.1.1.3.3" xref="S3.E10.m1.1.1.1.1.1.1.3.3.cmml">q</mi></msub></mrow><mo id="S3.E10.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E10.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E10.m1.2.2.2" xref="S3.E10.m1.2.2.2.cmml"><msup id="S3.E10.m1.2.2.2.3" xref="S3.E10.m1.2.2.2.3.cmml"><mi id="S3.E10.m1.2.2.2.3.2" xref="S3.E10.m1.2.2.2.3.2.cmml">π</mi><mtext id="S3.E10.m1.2.2.2.3.3" xref="S3.E10.m1.2.2.2.3.3a.cmml">SFT</mtext></msup><mo id="S3.E10.m1.2.2.2.2" xref="S3.E10.m1.2.2.2.2.cmml">⁢</mo><mrow id="S3.E10.m1.2.2.2.1.1" xref="S3.E10.m1.2.2.2.1.1.1.cmml"><mo id="S3.E10.m1.2.2.2.1.1.2" stretchy="false" xref="S3.E10.m1.2.2.2.1.1.1.cmml">(</mo><mrow id="S3.E10.m1.2.2.2.1.1.1" xref="S3.E10.m1.2.2.2.1.1.1.cmml"><msub id="S3.E10.m1.2.2.2.1.1.1.2" xref="S3.E10.m1.2.2.2.1.1.1.2.cmml"><mi id="S3.E10.m1.2.2.2.1.1.1.2.2" xref="S3.E10.m1.2.2.2.1.1.1.2.2.cmml">𝕐</mi><mi id="S3.E10.m1.2.2.2.1.1.1.2.3" xref="S3.E10.m1.2.2.2.1.1.1.2.3.cmml">q</mi></msub><mo fence="false" id="S3.E10.m1.2.2.2.1.1.1.1" xref="S3.E10.m1.2.2.2.1.1.1.1.cmml">|</mo><msub id="S3.E10.m1.2.2.2.1.1.1.3" xref="S3.E10.m1.2.2.2.1.1.1.3.cmml"><mi id="S3.E10.m1.2.2.2.1.1.1.3.2" xref="S3.E10.m1.2.2.2.1.1.1.3.2.cmml">𝕏</mi><mi id="S3.E10.m1.2.2.2.1.1.1.3.3" xref="S3.E10.m1.2.2.2.1.1.1.3.3.cmml">q</mi></msub></mrow><mo id="S3.E10.m1.2.2.2.1.1.3" stretchy="false" xref="S3.E10.m1.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow><mo id="S3.E10.m1.3.3.1.2" lspace="0em" xref="S3.E10.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E10.m1.3b"><apply id="S3.E10.m1.3.3.1.1.cmml" xref="S3.E10.m1.3.3.1"><eq id="S3.E10.m1.3.3.1.1.3.cmml" xref="S3.E10.m1.3.3.1.1.3"></eq><apply id="S3.E10.m1.3.3.1.1.2.cmml" xref="S3.E10.m1.3.3.1.1.2"><times id="S3.E10.m1.3.3.1.1.2.3.cmml" xref="S3.E10.m1.3.3.1.1.2.3"></times><apply id="S3.E10.m1.3.3.1.1.2.4.cmml" xref="S3.E10.m1.3.3.1.1.2.4"><csymbol cd="ambiguous" id="S3.E10.m1.3.3.1.1.2.4.1.cmml" xref="S3.E10.m1.3.3.1.1.2.4">subscript</csymbol><ci id="S3.E10.m1.3.3.1.1.2.4.2.cmml" xref="S3.E10.m1.3.3.1.1.2.4.2">𝑟</ci><ci id="S3.E10.m1.3.3.1.1.2.4.3.cmml" xref="S3.E10.m1.3.3.1.1.2.4.3">italic-ϕ</ci></apply><interval closure="open" id="S3.E10.m1.3.3.1.1.2.2.3.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2"><apply id="S3.E10.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E10.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E10.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E10.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E10.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E10.m1.3.3.1.1.1.1.1.1.2">𝕏</ci><ci id="S3.E10.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E10.m1.3.3.1.1.1.1.1.1.3">𝑞</ci></apply><apply id="S3.E10.m1.3.3.1.1.2.2.2.2.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S3.E10.m1.3.3.1.1.2.2.2.2.1.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2.2">subscript</csymbol><ci id="S3.E10.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2.2.2">𝕐</ci><ci id="S3.E10.m1.3.3.1.1.2.2.2.2.3.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2.2.3">𝑞</ci></apply></interval></apply><apply id="S3.E10.m1.3.3.1.1.4.cmml" xref="S3.E10.m1.3.3.1.1.4"><times id="S3.E10.m1.3.3.1.1.4.1.cmml" xref="S3.E10.m1.3.3.1.1.4.1"></times><ci id="S3.E10.m1.3.3.1.1.4.2.cmml" xref="S3.E10.m1.3.3.1.1.4.2">𝛽</ci><ci id="S3.E10.m1.3.3.1.1.4.3.cmml" xref="S3.E10.m1.3.3.1.1.4.3">𝑙</ci><ci id="S3.E10.m1.3.3.1.1.4.4.cmml" xref="S3.E10.m1.3.3.1.1.4.4">𝑜</ci><ci id="S3.E10.m1.3.3.1.1.4.5.cmml" xref="S3.E10.m1.3.3.1.1.4.5">𝑔</ci><apply id="S3.E10.m1.2.2.cmml" xref="S3.E10.m1.2.2"><divide id="S3.E10.m1.2.2.3.cmml" xref="S3.E10.m1.2.2"></divide><apply id="S3.E10.m1.1.1.1.cmml" xref="S3.E10.m1.1.1.1"><times id="S3.E10.m1.1.1.1.2.cmml" xref="S3.E10.m1.1.1.1.2"></times><apply id="S3.E10.m1.1.1.1.3.cmml" xref="S3.E10.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E10.m1.1.1.1.3.1.cmml" xref="S3.E10.m1.1.1.1.3">superscript</csymbol><ci id="S3.E10.m1.1.1.1.3.2.cmml" xref="S3.E10.m1.1.1.1.3.2">𝜋</ci><ci id="S3.E10.m1.1.1.1.3.3.cmml" xref="S3.E10.m1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E10.m1.1.1.1.1.1.1.cmml" xref="S3.E10.m1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E10.m1.1.1.1.1.1.1.1.cmml" xref="S3.E10.m1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.E10.m1.1.1.1.1.1.1.2.cmml" xref="S3.E10.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E10.m1.1.1.1.1.1.1.2.1.cmml" xref="S3.E10.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E10.m1.1.1.1.1.1.1.2.2.cmml" xref="S3.E10.m1.1.1.1.1.1.1.2.2">𝕐</ci><ci id="S3.E10.m1.1.1.1.1.1.1.2.3.cmml" xref="S3.E10.m1.1.1.1.1.1.1.2.3">𝑞</ci></apply><apply id="S3.E10.m1.1.1.1.1.1.1.3.cmml" xref="S3.E10.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E10.m1.1.1.1.1.1.1.3.1.cmml" xref="S3.E10.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E10.m1.1.1.1.1.1.1.3.2.cmml" xref="S3.E10.m1.1.1.1.1.1.1.3.2">𝕏</ci><ci id="S3.E10.m1.1.1.1.1.1.1.3.3.cmml" xref="S3.E10.m1.1.1.1.1.1.1.3.3">𝑞</ci></apply></apply></apply><apply id="S3.E10.m1.2.2.2.cmml" xref="S3.E10.m1.2.2.2"><times id="S3.E10.m1.2.2.2.2.cmml" xref="S3.E10.m1.2.2.2.2"></times><apply id="S3.E10.m1.2.2.2.3.cmml" xref="S3.E10.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E10.m1.2.2.2.3.1.cmml" xref="S3.E10.m1.2.2.2.3">superscript</csymbol><ci id="S3.E10.m1.2.2.2.3.2.cmml" xref="S3.E10.m1.2.2.2.3.2">𝜋</ci><ci id="S3.E10.m1.2.2.2.3.3a.cmml" xref="S3.E10.m1.2.2.2.3.3"><mtext id="S3.E10.m1.2.2.2.3.3.cmml" mathsize="70%" xref="S3.E10.m1.2.2.2.3.3">SFT</mtext></ci></apply><apply id="S3.E10.m1.2.2.2.1.1.1.cmml" xref="S3.E10.m1.2.2.2.1.1"><csymbol cd="latexml" id="S3.E10.m1.2.2.2.1.1.1.1.cmml" xref="S3.E10.m1.2.2.2.1.1.1.1">conditional</csymbol><apply id="S3.E10.m1.2.2.2.1.1.1.2.cmml" xref="S3.E10.m1.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E10.m1.2.2.2.1.1.1.2.1.cmml" xref="S3.E10.m1.2.2.2.1.1.1.2">subscript</csymbol><ci id="S3.E10.m1.2.2.2.1.1.1.2.2.cmml" xref="S3.E10.m1.2.2.2.1.1.1.2.2">𝕐</ci><ci id="S3.E10.m1.2.2.2.1.1.1.2.3.cmml" xref="S3.E10.m1.2.2.2.1.1.1.2.3">𝑞</ci></apply><apply id="S3.E10.m1.2.2.2.1.1.1.3.cmml" xref="S3.E10.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E10.m1.2.2.2.1.1.1.3.1.cmml" xref="S3.E10.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E10.m1.2.2.2.1.1.1.3.2.cmml" xref="S3.E10.m1.2.2.2.1.1.1.3.2">𝕏</ci><ci id="S3.E10.m1.2.2.2.1.1.1.3.3.cmml" xref="S3.E10.m1.2.2.2.1.1.1.3.3">𝑞</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E10.m1.3c">r_{\phi}(\mathbb{X}_{q},\mathbb{Y}_{q})=\beta log\frac{{\pi}^{\theta}(\mathbb{%
Y}_{q}|\mathbb{X}_{q})}{{\pi}^{\text{SFT}}(\mathbb{Y}_{q}|\mathbb{X}_{q})}.</annotation><annotation encoding="application/x-llamapun" id="S3.E10.m1.3d">italic_r start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) = italic_β italic_l italic_o italic_g divide start_ARG italic_π start_POSTSUPERSCRIPT italic_θ end_POSTSUPERSCRIPT ( blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT | blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) end_ARG start_ARG italic_π start_POSTSUPERSCRIPT SFT end_POSTSUPERSCRIPT ( blackboard_Y start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT | blackboard_X start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ) end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Knowledge-augmented Generation</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.3">With the input query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS4.p1.1.m1.1"><semantics id="S3.SS4.p1.1.m1.1a"><mi id="S3.SS4.p1.1.m1.1.1" xref="S3.SS4.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><ci id="S3.SS4.p1.1.m1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.1.m1.1d">italic_q</annotation></semantics></math> and the external knowledge <math alttext="\mathcal{K}" class="ltx_Math" display="inline" id="S3.SS4.p1.2.m2.1"><semantics id="S3.SS4.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.2.m2.1.1" xref="S3.SS4.p1.2.m2.1.1.cmml">𝒦</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.2.m2.1b"><ci id="S3.SS4.p1.2.m2.1.1.cmml" xref="S3.SS4.p1.2.m2.1.1">𝒦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.2.m2.1c">\mathcal{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.2.m2.1d">caligraphic_K</annotation></semantics></math> derived from the former stages, we can directly call an LLM (can be fine-tuned in a supervised manner using question answering datasets), where its knowledge-augmented generation of answer <math alttext="a" class="ltx_Math" display="inline" id="S3.SS4.p1.3.m3.1"><semantics id="S3.SS4.p1.3.m3.1a"><mi id="S3.SS4.p1.3.m3.1.1" xref="S3.SS4.p1.3.m3.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.3.m3.1b"><ci id="S3.SS4.p1.3.m3.1.1.cmml" xref="S3.SS4.p1.3.m3.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.3.m3.1c">a</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.3.m3.1d">italic_a</annotation></semantics></math> can be formalized as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E11">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="a^{*}=\underset{a}{\arg\max}\;\mathbf{P}(a|q,\mathcal{K})," class="ltx_Math" display="block" id="S3.E11.m1.3"><semantics id="S3.E11.m1.3a"><mrow id="S3.E11.m1.3.3.1" xref="S3.E11.m1.3.3.1.1.cmml"><mrow id="S3.E11.m1.3.3.1.1" xref="S3.E11.m1.3.3.1.1.cmml"><msup id="S3.E11.m1.3.3.1.1.3" xref="S3.E11.m1.3.3.1.1.3.cmml"><mi id="S3.E11.m1.3.3.1.1.3.2" xref="S3.E11.m1.3.3.1.1.3.2.cmml">a</mi><mo id="S3.E11.m1.3.3.1.1.3.3" xref="S3.E11.m1.3.3.1.1.3.3.cmml">∗</mo></msup><mo id="S3.E11.m1.3.3.1.1.2" xref="S3.E11.m1.3.3.1.1.2.cmml">=</mo><mrow id="S3.E11.m1.3.3.1.1.1" xref="S3.E11.m1.3.3.1.1.1.cmml"><munder accentunder="true" id="S3.E11.m1.3.3.1.1.1.3" xref="S3.E11.m1.3.3.1.1.1.3.cmml"><mrow id="S3.E11.m1.3.3.1.1.1.3.2" xref="S3.E11.m1.3.3.1.1.1.3.2.cmml"><mi id="S3.E11.m1.3.3.1.1.1.3.2.1" xref="S3.E11.m1.3.3.1.1.1.3.2.1.cmml">arg</mi><mo id="S3.E11.m1.3.3.1.1.1.3.2a" lspace="0.167em" xref="S3.E11.m1.3.3.1.1.1.3.2.cmml">⁡</mo><mi id="S3.E11.m1.3.3.1.1.1.3.2.2" xref="S3.E11.m1.3.3.1.1.1.3.2.2.cmml">max</mi></mrow><mo id="S3.E11.m1.3.3.1.1.1.3.1" xref="S3.E11.m1.3.3.1.1.1.3.1.cmml">𝑎</mo></munder><mo id="S3.E11.m1.3.3.1.1.1.2" lspace="0.167em" xref="S3.E11.m1.3.3.1.1.1.2.cmml">⁢</mo><mi id="S3.E11.m1.3.3.1.1.1.4" xref="S3.E11.m1.3.3.1.1.1.4.cmml">𝐏</mi><mo id="S3.E11.m1.3.3.1.1.1.2a" xref="S3.E11.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="S3.E11.m1.3.3.1.1.1.1.1" xref="S3.E11.m1.3.3.1.1.1.1.1.1.cmml"><mo id="S3.E11.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S3.E11.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E11.m1.3.3.1.1.1.1.1.1" xref="S3.E11.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E11.m1.3.3.1.1.1.1.1.1.2" xref="S3.E11.m1.3.3.1.1.1.1.1.1.2.cmml">a</mi><mo fence="false" id="S3.E11.m1.3.3.1.1.1.1.1.1.1" xref="S3.E11.m1.3.3.1.1.1.1.1.1.1.cmml">|</mo><mrow id="S3.E11.m1.3.3.1.1.1.1.1.1.3.2" xref="S3.E11.m1.3.3.1.1.1.1.1.1.3.1.cmml"><mi id="S3.E11.m1.1.1" xref="S3.E11.m1.1.1.cmml">q</mi><mo id="S3.E11.m1.3.3.1.1.1.1.1.1.3.2.1" xref="S3.E11.m1.3.3.1.1.1.1.1.1.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.E11.m1.2.2" xref="S3.E11.m1.2.2.cmml">𝒦</mi></mrow></mrow><mo id="S3.E11.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="S3.E11.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E11.m1.3.3.1.2" xref="S3.E11.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E11.m1.3b"><apply id="S3.E11.m1.3.3.1.1.cmml" xref="S3.E11.m1.3.3.1"><eq id="S3.E11.m1.3.3.1.1.2.cmml" xref="S3.E11.m1.3.3.1.1.2"></eq><apply id="S3.E11.m1.3.3.1.1.3.cmml" xref="S3.E11.m1.3.3.1.1.3"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.3.1.cmml" xref="S3.E11.m1.3.3.1.1.3">superscript</csymbol><ci id="S3.E11.m1.3.3.1.1.3.2.cmml" xref="S3.E11.m1.3.3.1.1.3.2">𝑎</ci><times id="S3.E11.m1.3.3.1.1.3.3.cmml" xref="S3.E11.m1.3.3.1.1.3.3"></times></apply><apply id="S3.E11.m1.3.3.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.1"><times id="S3.E11.m1.3.3.1.1.1.2.cmml" xref="S3.E11.m1.3.3.1.1.1.2"></times><apply id="S3.E11.m1.3.3.1.1.1.3.cmml" xref="S3.E11.m1.3.3.1.1.1.3"><ci id="S3.E11.m1.3.3.1.1.1.3.1.cmml" xref="S3.E11.m1.3.3.1.1.1.3.1">𝑎</ci><apply id="S3.E11.m1.3.3.1.1.1.3.2.cmml" xref="S3.E11.m1.3.3.1.1.1.3.2"><arg id="S3.E11.m1.3.3.1.1.1.3.2.1.cmml" xref="S3.E11.m1.3.3.1.1.1.3.2.1"></arg><max id="S3.E11.m1.3.3.1.1.1.3.2.2.cmml" xref="S3.E11.m1.3.3.1.1.1.3.2.2"></max></apply></apply><ci id="S3.E11.m1.3.3.1.1.1.4.cmml" xref="S3.E11.m1.3.3.1.1.1.4">𝐏</ci><apply id="S3.E11.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.1"><csymbol cd="latexml" id="S3.E11.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E11.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E11.m1.3.3.1.1.1.1.1.1.2">𝑎</ci><list id="S3.E11.m1.3.3.1.1.1.1.1.1.3.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.1.1.3.2"><ci id="S3.E11.m1.1.1.cmml" xref="S3.E11.m1.1.1">𝑞</ci><ci id="S3.E11.m1.2.2.cmml" xref="S3.E11.m1.2.2">𝒦</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E11.m1.3c">a^{*}=\underset{a}{\arg\max}\;\mathbf{P}(a|q,\mathcal{K}),</annotation><annotation encoding="application/x-llamapun" id="S3.E11.m1.3d">italic_a start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT = underitalic_a start_ARG roman_arg roman_max end_ARG bold_P ( italic_a | italic_q , caligraphic_K ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS4.p1.10">where <math alttext="\mathbf{P}(a|q,\mathcal{K})" class="ltx_Math" display="inline" id="S3.SS4.p1.4.m1.3"><semantics id="S3.SS4.p1.4.m1.3a"><mrow id="S3.SS4.p1.4.m1.3.3" xref="S3.SS4.p1.4.m1.3.3.cmml"><mi id="S3.SS4.p1.4.m1.3.3.3" xref="S3.SS4.p1.4.m1.3.3.3.cmml">𝐏</mi><mo id="S3.SS4.p1.4.m1.3.3.2" xref="S3.SS4.p1.4.m1.3.3.2.cmml">⁢</mo><mrow id="S3.SS4.p1.4.m1.3.3.1.1" xref="S3.SS4.p1.4.m1.3.3.1.1.1.cmml"><mo id="S3.SS4.p1.4.m1.3.3.1.1.2" stretchy="false" xref="S3.SS4.p1.4.m1.3.3.1.1.1.cmml">(</mo><mrow id="S3.SS4.p1.4.m1.3.3.1.1.1" xref="S3.SS4.p1.4.m1.3.3.1.1.1.cmml"><mi id="S3.SS4.p1.4.m1.3.3.1.1.1.2" xref="S3.SS4.p1.4.m1.3.3.1.1.1.2.cmml">a</mi><mo fence="false" id="S3.SS4.p1.4.m1.3.3.1.1.1.1" xref="S3.SS4.p1.4.m1.3.3.1.1.1.1.cmml">|</mo><mrow id="S3.SS4.p1.4.m1.3.3.1.1.1.3.2" xref="S3.SS4.p1.4.m1.3.3.1.1.1.3.1.cmml"><mi id="S3.SS4.p1.4.m1.1.1" xref="S3.SS4.p1.4.m1.1.1.cmml">q</mi><mo id="S3.SS4.p1.4.m1.3.3.1.1.1.3.2.1" xref="S3.SS4.p1.4.m1.3.3.1.1.1.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.4.m1.2.2" xref="S3.SS4.p1.4.m1.2.2.cmml">𝒦</mi></mrow></mrow><mo id="S3.SS4.p1.4.m1.3.3.1.1.3" stretchy="false" xref="S3.SS4.p1.4.m1.3.3.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.4.m1.3b"><apply id="S3.SS4.p1.4.m1.3.3.cmml" xref="S3.SS4.p1.4.m1.3.3"><times id="S3.SS4.p1.4.m1.3.3.2.cmml" xref="S3.SS4.p1.4.m1.3.3.2"></times><ci id="S3.SS4.p1.4.m1.3.3.3.cmml" xref="S3.SS4.p1.4.m1.3.3.3">𝐏</ci><apply id="S3.SS4.p1.4.m1.3.3.1.1.1.cmml" xref="S3.SS4.p1.4.m1.3.3.1.1"><csymbol cd="latexml" id="S3.SS4.p1.4.m1.3.3.1.1.1.1.cmml" xref="S3.SS4.p1.4.m1.3.3.1.1.1.1">conditional</csymbol><ci id="S3.SS4.p1.4.m1.3.3.1.1.1.2.cmml" xref="S3.SS4.p1.4.m1.3.3.1.1.1.2">𝑎</ci><list id="S3.SS4.p1.4.m1.3.3.1.1.1.3.1.cmml" xref="S3.SS4.p1.4.m1.3.3.1.1.1.3.2"><ci id="S3.SS4.p1.4.m1.1.1.cmml" xref="S3.SS4.p1.4.m1.1.1">𝑞</ci><ci id="S3.SS4.p1.4.m1.2.2.cmml" xref="S3.SS4.p1.4.m1.2.2">𝒦</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.4.m1.3c">\mathbf{P}(a|q,\mathcal{K})</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.4.m1.3d">bold_P ( italic_a | italic_q , caligraphic_K )</annotation></semantics></math> is the probability of the answer <math alttext="a" class="ltx_Math" display="inline" id="S3.SS4.p1.5.m2.1"><semantics id="S3.SS4.p1.5.m2.1a"><mi id="S3.SS4.p1.5.m2.1.1" xref="S3.SS4.p1.5.m2.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.5.m2.1b"><ci id="S3.SS4.p1.5.m2.1.1.cmml" xref="S3.SS4.p1.5.m2.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.5.m2.1c">a</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.5.m2.1d">italic_a</annotation></semantics></math> given the query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS4.p1.6.m3.1"><semantics id="S3.SS4.p1.6.m3.1a"><mi id="S3.SS4.p1.6.m3.1.1" xref="S3.SS4.p1.6.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.6.m3.1b"><ci id="S3.SS4.p1.6.m3.1.1.cmml" xref="S3.SS4.p1.6.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.6.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.6.m3.1d">italic_q</annotation></semantics></math> and the external knowledge <math alttext="\mathcal{K}" class="ltx_Math" display="inline" id="S3.SS4.p1.7.m4.1"><semantics id="S3.SS4.p1.7.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.7.m4.1.1" xref="S3.SS4.p1.7.m4.1.1.cmml">𝒦</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.7.m4.1b"><ci id="S3.SS4.p1.7.m4.1.1.cmml" xref="S3.SS4.p1.7.m4.1.1">𝒦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.7.m4.1c">\mathcal{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.7.m4.1d">caligraphic_K</annotation></semantics></math>, and <math alttext="\arg\max" class="ltx_Math" display="inline" id="S3.SS4.p1.8.m5.1"><semantics id="S3.SS4.p1.8.m5.1a"><mrow id="S3.SS4.p1.8.m5.1.1" xref="S3.SS4.p1.8.m5.1.1.cmml"><mi id="S3.SS4.p1.8.m5.1.1.1" xref="S3.SS4.p1.8.m5.1.1.1.cmml">arg</mi><mo id="S3.SS4.p1.8.m5.1.1a" lspace="0.167em" xref="S3.SS4.p1.8.m5.1.1.cmml">⁡</mo><mi id="S3.SS4.p1.8.m5.1.1.2" xref="S3.SS4.p1.8.m5.1.1.2.cmml">max</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.8.m5.1b"><apply id="S3.SS4.p1.8.m5.1.1.cmml" xref="S3.SS4.p1.8.m5.1.1"><arg id="S3.SS4.p1.8.m5.1.1.1.cmml" xref="S3.SS4.p1.8.m5.1.1.1"></arg><max id="S3.SS4.p1.8.m5.1.1.2.cmml" xref="S3.SS4.p1.8.m5.1.1.2"></max></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.8.m5.1c">\arg\max</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.8.m5.1d">roman_arg roman_max</annotation></semantics></math> denotes the argument of the maximum, i.e., the answer <math alttext="a" class="ltx_Math" display="inline" id="S3.SS4.p1.9.m6.1"><semantics id="S3.SS4.p1.9.m6.1a"><mi id="S3.SS4.p1.9.m6.1.1" xref="S3.SS4.p1.9.m6.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.9.m6.1b"><ci id="S3.SS4.p1.9.m6.1.1.cmml" xref="S3.SS4.p1.9.m6.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.9.m6.1c">a</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.9.m6.1d">italic_a</annotation></semantics></math> for which <math alttext="\mathbf{P}(a|q,\mathcal{K})" class="ltx_Math" display="inline" id="S3.SS4.p1.10.m7.3"><semantics id="S3.SS4.p1.10.m7.3a"><mrow id="S3.SS4.p1.10.m7.3.3" xref="S3.SS4.p1.10.m7.3.3.cmml"><mi id="S3.SS4.p1.10.m7.3.3.3" xref="S3.SS4.p1.10.m7.3.3.3.cmml">𝐏</mi><mo id="S3.SS4.p1.10.m7.3.3.2" xref="S3.SS4.p1.10.m7.3.3.2.cmml">⁢</mo><mrow id="S3.SS4.p1.10.m7.3.3.1.1" xref="S3.SS4.p1.10.m7.3.3.1.1.1.cmml"><mo id="S3.SS4.p1.10.m7.3.3.1.1.2" stretchy="false" xref="S3.SS4.p1.10.m7.3.3.1.1.1.cmml">(</mo><mrow id="S3.SS4.p1.10.m7.3.3.1.1.1" xref="S3.SS4.p1.10.m7.3.3.1.1.1.cmml"><mi id="S3.SS4.p1.10.m7.3.3.1.1.1.2" xref="S3.SS4.p1.10.m7.3.3.1.1.1.2.cmml">a</mi><mo fence="false" id="S3.SS4.p1.10.m7.3.3.1.1.1.1" xref="S3.SS4.p1.10.m7.3.3.1.1.1.1.cmml">|</mo><mrow id="S3.SS4.p1.10.m7.3.3.1.1.1.3.2" xref="S3.SS4.p1.10.m7.3.3.1.1.1.3.1.cmml"><mi id="S3.SS4.p1.10.m7.1.1" xref="S3.SS4.p1.10.m7.1.1.cmml">q</mi><mo id="S3.SS4.p1.10.m7.3.3.1.1.1.3.2.1" xref="S3.SS4.p1.10.m7.3.3.1.1.1.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p1.10.m7.2.2" xref="S3.SS4.p1.10.m7.2.2.cmml">𝒦</mi></mrow></mrow><mo id="S3.SS4.p1.10.m7.3.3.1.1.3" stretchy="false" xref="S3.SS4.p1.10.m7.3.3.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.10.m7.3b"><apply id="S3.SS4.p1.10.m7.3.3.cmml" xref="S3.SS4.p1.10.m7.3.3"><times id="S3.SS4.p1.10.m7.3.3.2.cmml" xref="S3.SS4.p1.10.m7.3.3.2"></times><ci id="S3.SS4.p1.10.m7.3.3.3.cmml" xref="S3.SS4.p1.10.m7.3.3.3">𝐏</ci><apply id="S3.SS4.p1.10.m7.3.3.1.1.1.cmml" xref="S3.SS4.p1.10.m7.3.3.1.1"><csymbol cd="latexml" id="S3.SS4.p1.10.m7.3.3.1.1.1.1.cmml" xref="S3.SS4.p1.10.m7.3.3.1.1.1.1">conditional</csymbol><ci id="S3.SS4.p1.10.m7.3.3.1.1.1.2.cmml" xref="S3.SS4.p1.10.m7.3.3.1.1.1.2">𝑎</ci><list id="S3.SS4.p1.10.m7.3.3.1.1.1.3.1.cmml" xref="S3.SS4.p1.10.m7.3.3.1.1.1.3.2"><ci id="S3.SS4.p1.10.m7.1.1.cmml" xref="S3.SS4.p1.10.m7.1.1">𝑞</ci><ci id="S3.SS4.p1.10.m7.2.2.cmml" xref="S3.SS4.p1.10.m7.2.2">𝒦</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.10.m7.3c">\mathbf{P}(a|q,\mathcal{K})</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.10.m7.3d">bold_P ( italic_a | italic_q , caligraphic_K )</annotation></semantics></math> is maximized.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental Setup</h3>
<section class="ltx_subsubsection" id="S4.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.1 </span>Tasks and Datasets</h4>
<div class="ltx_para" id="S4.SS1.SSS1.p1">
<p class="ltx_p" id="S4.SS1.SSS1.p1.1">We evaluate our proposed <span class="ltx_text ltx_font_smallcaps" id="S4.SS1.SSS1.p1.1.1">MetRag</span> and multiple baselines on a variety of knowledge-intensive public datasets (including general Open-Domain QA: NQ, TriviaQA-unfiltered<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>As the test set is not publicly available, we follow the split setting of <cite class="ltx_cite ltx_citemacro_cite">Guu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib7" title="">2020</a>)</cite> and use 11,313 queries for testing.</span></span></span>, HotpotQA and entity-centric QA datasets: PopQA<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>We test on the long-tail subset that includes 1399 queries with less than 100 Wikipedia page views.</span></span></span>) and evaluate the performance via metrics EM (following <cite class="ltx_cite ltx_citemacro_cite">Mallen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib14" title="">2023</a>)</cite>, we evaluate the performance based on whether the gold answers are included in the model generations rather than strictly exact matching) and F1.
All experiments are conducted in a zero-shot manner, where we provide instructions and retrieved information about tasks without few-shot demonstrations <cite class="ltx_cite ltx_citemacro_cite">Wei et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib23" title="">2022</a>)</cite>.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS1.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.2 </span>Baselines</h4>
<div class="ltx_para ltx_noindent" id="S4.SS1.SSS2.p1">
<p class="ltx_p" id="S4.SS1.SSS2.p1.4"><span class="ltx_text ltx_font_bold" id="S4.SS1.SSS2.p1.4.1">Baselines without retrievals.</span>
We evaluate strong publicly available pre-trained LLMs,
ChatGLM2<math alttext="{}_{\textsc{6b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS2.p1.1.m1.1"><semantics id="S4.SS1.SSS2.p1.1.m1.1a"><msub id="S4.SS1.SSS2.p1.1.m1.1.1" xref="S4.SS1.SSS2.p1.1.m1.1.1.cmml"><mi id="S4.SS1.SSS2.p1.1.m1.1.1a" xref="S4.SS1.SSS2.p1.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.1.m1.1.1.1" xref="S4.SS1.SSS2.p1.1.m1.1.1.1a.cmml">6b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS2.p1.1.m1.1b"><apply id="S4.SS1.SSS2.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS2.p1.1.m1.1.1"><ci id="S4.SS1.SSS2.p1.1.m1.1.1.1a.cmml" xref="S4.SS1.SSS2.p1.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.1.m1.1.1.1">6b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS2.p1.1.m1.1c">{}_{\textsc{6b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS2.p1.1.m1.1d">start_FLOATSUBSCRIPT 6b end_FLOATSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">Du et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib5" title="">2022</a>)</cite>,
Llama2<math alttext="{}_{\textsc{7b},\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS2.p1.2.m2.2"><semantics id="S4.SS1.SSS2.p1.2.m2.2a"><msub id="S4.SS1.SSS2.p1.2.m2.2.2" xref="S4.SS1.SSS2.p1.2.m2.2.2.cmml"><mi id="S4.SS1.SSS2.p1.2.m2.2.2a" xref="S4.SS1.SSS2.p1.2.m2.2.2.cmml"></mi><mrow id="S4.SS1.SSS2.p1.2.m2.2.2.2.4" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.3.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.2.m2.1.1.1.1" xref="S4.SS1.SSS2.p1.2.m2.1.1.1.1a.cmml">7b</mtext><mo id="S4.SS1.SSS2.p1.2.m2.2.2.2.4.1" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.3.cmml">,</mo><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.2.m2.2.2.2.2" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.2a.cmml">13b</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS2.p1.2.m2.2b"><apply id="S4.SS1.SSS2.p1.2.m2.2.2.cmml" xref="S4.SS1.SSS2.p1.2.m2.2.2"><list id="S4.SS1.SSS2.p1.2.m2.2.2.2.3.cmml" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.4"><ci id="S4.SS1.SSS2.p1.2.m2.1.1.1.1a.cmml" xref="S4.SS1.SSS2.p1.2.m2.1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.2.m2.1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.2.m2.1.1.1.1">7b</mtext></ci><ci id="S4.SS1.SSS2.p1.2.m2.2.2.2.2a.cmml" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.2"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.2.m2.2.2.2.2.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.2.m2.2.2.2.2">13b</mtext></ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS2.p1.2.m2.2c">{}_{\textsc{7b},\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS2.p1.2.m2.2d">start_FLOATSUBSCRIPT 7b , 13b end_FLOATSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_citep">(Touvron et al., <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib22" title="">2023</a>)</cite>, Baichuan<math alttext="{}_{\textsc{7b},\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS2.p1.3.m3.2"><semantics id="S4.SS1.SSS2.p1.3.m3.2a"><msub id="S4.SS1.SSS2.p1.3.m3.2.2" xref="S4.SS1.SSS2.p1.3.m3.2.2.cmml"><mi id="S4.SS1.SSS2.p1.3.m3.2.2a" xref="S4.SS1.SSS2.p1.3.m3.2.2.cmml"></mi><mrow id="S4.SS1.SSS2.p1.3.m3.2.2.2.4" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.3.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.3.m3.1.1.1.1" xref="S4.SS1.SSS2.p1.3.m3.1.1.1.1a.cmml">7b</mtext><mo id="S4.SS1.SSS2.p1.3.m3.2.2.2.4.1" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.3.cmml">,</mo><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.3.m3.2.2.2.2" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.2a.cmml">13b</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS2.p1.3.m3.2b"><apply id="S4.SS1.SSS2.p1.3.m3.2.2.cmml" xref="S4.SS1.SSS2.p1.3.m3.2.2"><list id="S4.SS1.SSS2.p1.3.m3.2.2.2.3.cmml" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.4"><ci id="S4.SS1.SSS2.p1.3.m3.1.1.1.1a.cmml" xref="S4.SS1.SSS2.p1.3.m3.1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.3.m3.1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.3.m3.1.1.1.1">7b</mtext></ci><ci id="S4.SS1.SSS2.p1.3.m3.2.2.2.2a.cmml" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.2"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.3.m3.2.2.2.2.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.3.m3.2.2.2.2">13b</mtext></ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS2.p1.3.m3.2c">{}_{\textsc{7b},\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS2.p1.3.m3.2d">start_FLOATSUBSCRIPT 7b , 13b end_FLOATSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_citep">(Baichuan, <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib4" title="">2023</a>)</cite> and Qwen<math alttext="{}_{\textsc{7b},\textsc{14b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS2.p1.4.m4.2"><semantics id="S4.SS1.SSS2.p1.4.m4.2a"><msub id="S4.SS1.SSS2.p1.4.m4.2.2" xref="S4.SS1.SSS2.p1.4.m4.2.2.cmml"><mi id="S4.SS1.SSS2.p1.4.m4.2.2a" xref="S4.SS1.SSS2.p1.4.m4.2.2.cmml"></mi><mrow id="S4.SS1.SSS2.p1.4.m4.2.2.2.4" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.3.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.4.m4.1.1.1.1" xref="S4.SS1.SSS2.p1.4.m4.1.1.1.1a.cmml">7b</mtext><mo id="S4.SS1.SSS2.p1.4.m4.2.2.2.4.1" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.3.cmml">,</mo><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.4.m4.2.2.2.2" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.2a.cmml">14b</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS2.p1.4.m4.2b"><apply id="S4.SS1.SSS2.p1.4.m4.2.2.cmml" xref="S4.SS1.SSS2.p1.4.m4.2.2"><list id="S4.SS1.SSS2.p1.4.m4.2.2.2.3.cmml" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.4"><ci id="S4.SS1.SSS2.p1.4.m4.1.1.1.1a.cmml" xref="S4.SS1.SSS2.p1.4.m4.1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.4.m4.1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.4.m4.1.1.1.1">7b</mtext></ci><ci id="S4.SS1.SSS2.p1.4.m4.2.2.2.2a.cmml" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.2"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p1.4.m4.2.2.2.2.cmml" mathsize="70%" xref="S4.SS1.SSS2.p1.4.m4.2.2.2.2">14b</mtext></ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS2.p1.4.m4.2c">{}_{\textsc{7b},\textsc{14b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS2.p1.4.m4.2d">start_FLOATSUBSCRIPT 7b , 14b end_FLOATSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib3" title="">2023</a>)</cite>; and models trained and reinforced using private data, ChatGPT<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>We use GPT-3.5-turbo-16K in our experiment.</span></span></span> <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib15" title="">2023a</a>)</cite>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.SSS2.p2">
<p class="ltx_p" id="S4.SS1.SSS2.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.SSS2.p2.1.1">Baselines with retrievals.</span>
We evaluate models augmented with retrieval only at test time or during training. The first category includes standard RAG baselines, where an LM (<em class="ltx_emph ltx_font_italic" id="S4.SS1.SSS2.p2.1.2">e.g.,</em> Llama2<math alttext="{}_{\textsc{7b},\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS2.p2.1.m1.2"><semantics id="S4.SS1.SSS2.p2.1.m1.2a"><msub id="S4.SS1.SSS2.p2.1.m1.2.2" xref="S4.SS1.SSS2.p2.1.m1.2.2.cmml"><mi id="S4.SS1.SSS2.p2.1.m1.2.2a" xref="S4.SS1.SSS2.p2.1.m1.2.2.cmml"></mi><mrow id="S4.SS1.SSS2.p2.1.m1.2.2.2.4" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.3.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p2.1.m1.1.1.1.1" xref="S4.SS1.SSS2.p2.1.m1.1.1.1.1a.cmml">7b</mtext><mo id="S4.SS1.SSS2.p2.1.m1.2.2.2.4.1" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.3.cmml">,</mo><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p2.1.m1.2.2.2.2" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.2a.cmml">13b</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS2.p2.1.m1.2b"><apply id="S4.SS1.SSS2.p2.1.m1.2.2.cmml" xref="S4.SS1.SSS2.p2.1.m1.2.2"><list id="S4.SS1.SSS2.p2.1.m1.2.2.2.3.cmml" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.4"><ci id="S4.SS1.SSS2.p2.1.m1.1.1.1.1a.cmml" xref="S4.SS1.SSS2.p2.1.m1.1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p2.1.m1.1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS2.p2.1.m1.1.1.1.1">7b</mtext></ci><ci id="S4.SS1.SSS2.p2.1.m1.2.2.2.2a.cmml" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.2"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS2.p2.1.m1.2.2.2.2.cmml" mathsize="70%" xref="S4.SS1.SSS2.p2.1.m1.2.2.2.2">13b</mtext></ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS2.p2.1.m1.2c">{}_{\textsc{7b},\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS2.p2.1.m1.2d">start_FLOATSUBSCRIPT 7b , 13b end_FLOATSUBSCRIPT</annotation></semantics></math>) generates output given the query prepended with the top retrieved documents. The latter category includes approaches that are trained with retrieved passages, including Self-RAG <cite class="ltx_cite ltx_citemacro_cite">Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib2" title="">2023b</a>)</cite>, RECOMP <cite class="ltx_cite ltx_citemacro_cite">Xu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib24" title="">2023</a>)</cite><span class="ltx_note ltx_role_footnote" id="footnote5"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span>We report results reported in the original paper.</span></span></span>.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS1.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.3 </span>Settings</h4>
<section class="ltx_paragraph" id="S4.SS1.SSS3.Px1">
<h5 class="ltx_title ltx_title_paragraph">Training details.</h5>
<div class="ltx_para" id="S4.SS1.SSS3.Px1.p1">
<p class="ltx_p" id="S4.SS1.SSS3.Px1.p1.2">We split all train, validation and test sets of datasets following <cite class="ltx_cite ltx_citemacro_cite">Izacard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib9" title="">2023</a>); Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib2" title="">2023b</a>)</cite>.
Our training data includes randomly sampled instruction-following input-output pairs. We randomly sample 50k pairs from training sets of NQ, TriviaQA and HotpotQA to train our model in different stages with Llama2<math alttext="{}_{\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS1.SSS3.Px1.p1.1.m1.1"><semantics id="S4.SS1.SSS3.Px1.p1.1.m1.1a"><msub id="S4.SS1.SSS3.Px1.p1.1.m1.1.1" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1.cmml"><mi id="S4.SS1.SSS3.Px1.p1.1.m1.1.1a" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1a.cmml">13b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.Px1.p1.1.m1.1b"><apply id="S4.SS1.SSS3.Px1.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1"><ci id="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1a.cmml" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.SS1.SSS3.Px1.p1.1.m1.1.1.1">13b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.Px1.p1.1.m1.1c">{}_{\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS3.Px1.p1.1.m1.1d">start_FLOATSUBSCRIPT 13b end_FLOATSUBSCRIPT</annotation></semantics></math> as base LLM.
All experiments are conducted using 4 NVIDIA A100 GPUs.
We train the utility model for 5 epochs with a learning rate of 1e-5, a batch size of 16 for each device, a warm-up ratio of 0.2, the passage window size of 50 and the temperature parameter <math alttext="\tau" class="ltx_Math" display="inline" id="S4.SS1.SSS3.Px1.p1.2.m2.1"><semantics id="S4.SS1.SSS3.Px1.p1.2.m2.1a"><mi id="S4.SS1.SSS3.Px1.p1.2.m2.1.1" xref="S4.SS1.SSS3.Px1.p1.2.m2.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.Px1.p1.2.m2.1b"><ci id="S4.SS1.SSS3.Px1.p1.2.m2.1.1.cmml" xref="S4.SS1.SSS3.Px1.p1.2.m2.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.Px1.p1.2.m2.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS3.Px1.p1.2.m2.1d">italic_τ</annotation></semantics></math> set to 0.05.
For task-adaptive summarizer and generation model, we utilize open-source Llama Factory <span class="ltx_note ltx_role_footnote" id="footnote6"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>https://github.com/hiyouga/LLaMA-Factory</span></span></span> and adopt Lora tuning for 1 epoch with a learning rate of 5e-5, a batch size of 4 and a cosine learning rate scheduler.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS1.SSS3.Px2">
<h5 class="ltx_title ltx_title_paragraph">Retrieval details.</h5>
<div class="ltx_para" id="S4.SS1.SSS3.Px2.p1">
<p class="ltx_p" id="S4.SS1.SSS3.Px2.p1.2">For NQ, TriviaQA and HotpotQA, we use 2018 English Wikipedia as the external retrieval source while for PopQA, since the 2018 Wikipedia sometimes lacks articles about entities that have been added to Wikipedia recently, we use December 2020 preprocessed Wikipedia corpus as the external retrieval source. We preprocess the external corpus following <cite class="ltx_cite ltx_citemacro_cite">Izacard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib9" title="">2023</a>)</cite> <span class="ltx_note ltx_role_footnote" id="footnote7"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>https://github.com/facebookresearch/atlas</span></span></span>.
As for retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S4.SS1.SSS3.Px2.p1.1.m1.1"><semantics id="S4.SS1.SSS3.Px2.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S4.SS1.SSS3.Px2.p1.1.m1.1.1" xref="S4.SS1.SSS3.Px2.p1.1.m1.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.Px2.p1.1.m1.1b"><ci id="S4.SS1.SSS3.Px2.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS3.Px2.p1.1.m1.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.Px2.p1.1.m1.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS3.Px2.p1.1.m1.1d">caligraphic_R</annotation></semantics></math>, we incorporate BGE owing to its superior performance in a variety of benchmark leaderboards and retrieve up to 5 documents for each input query for testing, where <math alttext="\mathcal{M}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.SSS3.Px2.p1.2.m2.1"><semantics id="S4.SS1.SSS3.Px2.p1.2.m2.1a"><mrow id="S4.SS1.SSS3.Px2.p1.2.m2.1.2" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.2" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.2.cmml">ℳ</mi><mo id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.1" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.1.cmml">⁢</mo><mrow id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.3.2" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.cmml"><mo id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.3.2.1" stretchy="false" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.cmml">(</mo><mo id="S4.SS1.SSS3.Px2.p1.2.m2.1.1" lspace="0em" rspace="0em" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.1.cmml">⋅</mo><mo id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.3.2.2" stretchy="false" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.Px2.p1.2.m2.1b"><apply id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.cmml" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2"><times id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.1.cmml" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.1"></times><ci id="S4.SS1.SSS3.Px2.p1.2.m2.1.2.2.cmml" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.2.2">ℳ</ci><ci id="S4.SS1.SSS3.Px2.p1.2.m2.1.1.cmml" xref="S4.SS1.SSS3.Px2.p1.2.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.Px2.p1.2.m2.1c">\mathcal{M}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS3.Px2.p1.2.m2.1d">caligraphic_M ( ⋅ )</annotation></semantics></math> is defined as cosine similarity.</p>
</div>
</section>
</section>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Results and Analysis</h3>
<figure class="ltx_table" id="S4.T1">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Overall performance evaluation across 4 public datasets. The best results are highlighted in boldface.
</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.18">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.18.19.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S4.T1.18.19.1.1" rowspan="2" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text" id="S4.T1.18.19.1.1.1">Methods</span></th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" colspan="2" id="S4.T1.18.19.1.2" style="padding-left:10.0pt;padding-right:10.0pt;">NQ</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" colspan="2" id="S4.T1.18.19.1.3" style="padding-left:10.0pt;padding-right:10.0pt;">TriviaQA</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" colspan="2" id="S4.T1.18.19.1.4" style="padding-left:10.0pt;padding-right:10.0pt;">HotpotQA</td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.T1.18.19.1.5" style="padding-left:10.0pt;padding-right:10.0pt;">PopQA</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.20.2">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.1" style="padding-left:10.0pt;padding-right:10.0pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.2" style="padding-left:10.0pt;padding-right:10.0pt;">F1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.3" style="padding-left:10.0pt;padding-right:10.0pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.4" style="padding-left:10.0pt;padding-right:10.0pt;">F1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.5" style="padding-left:10.0pt;padding-right:10.0pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.6" style="padding-left:10.0pt;padding-right:10.0pt;">F1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T1.18.20.2.7" style="padding-left:10.0pt;padding-right:10.0pt;">EM</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.18.20.2.8" style="padding-left:10.0pt;padding-right:10.0pt;">F1</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.21.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="9" id="S4.T1.18.21.3.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baselines without retrieval</th>
</tr>
<tr class="ltx_tr" id="S4.T1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.1.1.1" style="padding-left:10.0pt;padding-right:10.0pt;">ChatGLM2<math alttext="{}_{\textsc{6B}}" class="ltx_Math" display="inline" id="S4.T1.1.1.1.m1.1"><semantics id="S4.T1.1.1.1.m1.1a"><msub id="S4.T1.1.1.1.m1.1.1" xref="S4.T1.1.1.1.m1.1.1.cmml"><mi id="S4.T1.1.1.1.m1.1.1a" xref="S4.T1.1.1.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.1.1.1.m1.1.1.1" xref="S4.T1.1.1.1.m1.1.1.1a.cmml">6B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.1.1.1.m1.1b"><apply id="S4.T1.1.1.1.m1.1.1.cmml" xref="S4.T1.1.1.1.m1.1.1"><ci id="S4.T1.1.1.1.m1.1.1.1a.cmml" xref="S4.T1.1.1.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.1.1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.1.1.1.m1.1.1.1">6B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.1.1.1.m1.1c">{}_{\textsc{6B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.1.1.1.m1.1d">start_FLOATSUBSCRIPT 6B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.2" style="padding-left:10.0pt;padding-right:10.0pt;">11.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.3" style="padding-left:10.0pt;padding-right:10.0pt;">8.80</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.4" style="padding-left:10.0pt;padding-right:10.0pt;">22.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.5" style="padding-left:10.0pt;padding-right:10.0pt;">20.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.6" style="padding-left:10.0pt;padding-right:10.0pt;">13.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.7" style="padding-left:10.0pt;padding-right:10.0pt;">14.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.1.1.8" style="padding-left:10.0pt;padding-right:10.0pt;">18.8</td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.1.9" style="padding-left:10.0pt;padding-right:10.0pt;">14.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.2.2.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.2.2.1.m1.1"><semantics id="S4.T1.2.2.1.m1.1a"><msub id="S4.T1.2.2.1.m1.1.1" xref="S4.T1.2.2.1.m1.1.1.cmml"><mi id="S4.T1.2.2.1.m1.1.1a" xref="S4.T1.2.2.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.2.2.1.m1.1.1.1" xref="S4.T1.2.2.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.2.2.1.m1.1b"><apply id="S4.T1.2.2.1.m1.1.1.cmml" xref="S4.T1.2.2.1.m1.1.1"><ci id="S4.T1.2.2.1.m1.1.1.1a.cmml" xref="S4.T1.2.2.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.2.2.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.2.2.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.2.2.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.2.2.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.2" style="padding-left:10.0pt;padding-right:10.0pt;">21.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.3" style="padding-left:10.0pt;padding-right:10.0pt;">12.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.4" style="padding-left:10.0pt;padding-right:10.0pt;">43.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.5" style="padding-left:10.0pt;padding-right:10.0pt;">29.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.6" style="padding-left:10.0pt;padding-right:10.0pt;">17.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.7" style="padding-left:10.0pt;padding-right:10.0pt;">10.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.2.2.8" style="padding-left:10.0pt;padding-right:10.0pt;">19.6</td>
<td class="ltx_td ltx_align_center" id="S4.T1.2.2.9" style="padding-left:10.0pt;padding-right:10.0pt;">3.36</td>
</tr>
<tr class="ltx_tr" id="S4.T1.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.3.3.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baichuan2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.3.3.1.m1.1"><semantics id="S4.T1.3.3.1.m1.1a"><msub id="S4.T1.3.3.1.m1.1.1" xref="S4.T1.3.3.1.m1.1.1.cmml"><mi id="S4.T1.3.3.1.m1.1.1a" xref="S4.T1.3.3.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.3.3.1.m1.1.1.1" xref="S4.T1.3.3.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.3.3.1.m1.1b"><apply id="S4.T1.3.3.1.m1.1.1.cmml" xref="S4.T1.3.3.1.m1.1.1"><ci id="S4.T1.3.3.1.m1.1.1.1a.cmml" xref="S4.T1.3.3.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.3.3.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.3.3.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.3.3.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.3.3.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.2" style="padding-left:10.0pt;padding-right:10.0pt;">18.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.3" style="padding-left:10.0pt;padding-right:10.0pt;">14.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.4" style="padding-left:10.0pt;padding-right:10.0pt;">39.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.5" style="padding-left:10.0pt;padding-right:10.0pt;">35.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.6" style="padding-left:10.0pt;padding-right:10.0pt;">18.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.7" style="padding-left:10.0pt;padding-right:10.0pt;">15.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.3.3.8" style="padding-left:10.0pt;padding-right:10.0pt;">25.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.3.3.9" style="padding-left:10.0pt;padding-right:10.0pt;">17.8</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.4.1" style="padding-left:10.0pt;padding-right:10.0pt;">Qwen<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.4.4.1.m1.1"><semantics id="S4.T1.4.4.1.m1.1a"><msub id="S4.T1.4.4.1.m1.1.1" xref="S4.T1.4.4.1.m1.1.1.cmml"><mi id="S4.T1.4.4.1.m1.1.1a" xref="S4.T1.4.4.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.4.4.1.m1.1.1.1" xref="S4.T1.4.4.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.4.4.1.m1.1b"><apply id="S4.T1.4.4.1.m1.1.1.cmml" xref="S4.T1.4.4.1.m1.1.1"><ci id="S4.T1.4.4.1.m1.1.1.1a.cmml" xref="S4.T1.4.4.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.4.4.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.4.4.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.4.4.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.4.4.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.2" style="padding-left:10.0pt;padding-right:10.0pt;">20.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.3" style="padding-left:10.0pt;padding-right:10.0pt;">17.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.4" style="padding-left:10.0pt;padding-right:10.0pt;">47.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.5" style="padding-left:10.0pt;padding-right:10.0pt;">42.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.6" style="padding-left:10.0pt;padding-right:10.0pt;">21.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.7" style="padding-left:10.0pt;padding-right:10.0pt;">19.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.4.4.8" style="padding-left:10.0pt;padding-right:10.0pt;">21.6</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.9" style="padding-left:10.0pt;padding-right:10.0pt;">15.4</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.5.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T1.5.5.1.m1.1"><semantics id="S4.T1.5.5.1.m1.1a"><msub id="S4.T1.5.5.1.m1.1.1" xref="S4.T1.5.5.1.m1.1.1.cmml"><mi id="S4.T1.5.5.1.m1.1.1a" xref="S4.T1.5.5.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.5.5.1.m1.1.1.1" xref="S4.T1.5.5.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.5.5.1.m1.1b"><apply id="S4.T1.5.5.1.m1.1.1.cmml" xref="S4.T1.5.5.1.m1.1.1"><ci id="S4.T1.5.5.1.m1.1.1.1a.cmml" xref="S4.T1.5.5.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.5.5.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.5.5.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.5.5.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.5.5.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.2" style="padding-left:10.0pt;padding-right:10.0pt;">32.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.3" style="padding-left:10.0pt;padding-right:10.0pt;">8.60</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.4" style="padding-left:10.0pt;padding-right:10.0pt;">58.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.5" style="padding-left:10.0pt;padding-right:10.0pt;">14.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.6" style="padding-left:10.0pt;padding-right:10.0pt;">24.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.7" style="padding-left:10.0pt;padding-right:10.0pt;">8.53</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.5.5.8" style="padding-left:10.0pt;padding-right:10.0pt;">19.0</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.9" style="padding-left:10.0pt;padding-right:10.0pt;">2.91</td>
</tr>
<tr class="ltx_tr" id="S4.T1.6.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.6.6.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baichuan2<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T1.6.6.1.m1.1"><semantics id="S4.T1.6.6.1.m1.1a"><msub id="S4.T1.6.6.1.m1.1.1" xref="S4.T1.6.6.1.m1.1.1.cmml"><mi id="S4.T1.6.6.1.m1.1.1a" xref="S4.T1.6.6.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.6.6.1.m1.1.1.1" xref="S4.T1.6.6.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.6.6.1.m1.1b"><apply id="S4.T1.6.6.1.m1.1.1.cmml" xref="S4.T1.6.6.1.m1.1.1"><ci id="S4.T1.6.6.1.m1.1.1.1a.cmml" xref="S4.T1.6.6.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.6.6.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.6.6.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.6.6.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.6.6.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.2" style="padding-left:10.0pt;padding-right:10.0pt;">20.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.3" style="padding-left:10.0pt;padding-right:10.0pt;">20.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.4" style="padding-left:10.0pt;padding-right:10.0pt;">46.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.5" style="padding-left:10.0pt;padding-right:10.0pt;">45.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.6" style="padding-left:10.0pt;padding-right:10.0pt;">17.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.7" style="padding-left:10.0pt;padding-right:10.0pt;">20.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.6.6.8" style="padding-left:10.0pt;padding-right:10.0pt;">23.8</td>
<td class="ltx_td ltx_align_center" id="S4.T1.6.6.9" style="padding-left:10.0pt;padding-right:10.0pt;">16.4</td>
</tr>
<tr class="ltx_tr" id="S4.T1.7.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.7.7.1" style="padding-left:10.0pt;padding-right:10.0pt;">Qwen<math alttext="{}_{\textsc{14B}}" class="ltx_Math" display="inline" id="S4.T1.7.7.1.m1.1"><semantics id="S4.T1.7.7.1.m1.1a"><msub id="S4.T1.7.7.1.m1.1.1" xref="S4.T1.7.7.1.m1.1.1.cmml"><mi id="S4.T1.7.7.1.m1.1.1a" xref="S4.T1.7.7.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.7.7.1.m1.1.1.1" xref="S4.T1.7.7.1.m1.1.1.1a.cmml">14B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.7.7.1.m1.1b"><apply id="S4.T1.7.7.1.m1.1.1.cmml" xref="S4.T1.7.7.1.m1.1.1"><ci id="S4.T1.7.7.1.m1.1.1.1a.cmml" xref="S4.T1.7.7.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.7.7.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.7.7.1.m1.1.1.1">14B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.7.7.1.m1.1c">{}_{\textsc{14B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.7.7.1.m1.1d">start_FLOATSUBSCRIPT 14B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.2" style="padding-left:10.0pt;padding-right:10.0pt;">25.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.3" style="padding-left:10.0pt;padding-right:10.0pt;">26.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.4" style="padding-left:10.0pt;padding-right:10.0pt;">53.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.5" style="padding-left:10.0pt;padding-right:10.0pt;">53.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.6" style="padding-left:10.0pt;padding-right:10.0pt;">24.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.7" style="padding-left:10.0pt;padding-right:10.0pt;">25.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.7.7.8" style="padding-left:10.0pt;padding-right:10.0pt;">19.7</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.9" style="padding-left:10.0pt;padding-right:10.0pt;">18.7</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.22.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.18.22.4.1" style="padding-left:10.0pt;padding-right:10.0pt;">ChatGPT</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.2" style="padding-left:10.0pt;padding-right:10.0pt;">37.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.3" style="padding-left:10.0pt;padding-right:10.0pt;">42.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.4" style="padding-left:10.0pt;padding-right:10.0pt;">71.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.5" style="padding-left:10.0pt;padding-right:10.0pt;">72.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.6" style="padding-left:10.0pt;padding-right:10.0pt;">27.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.7" style="padding-left:10.0pt;padding-right:10.0pt;">34.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.22.4.8" style="padding-left:10.0pt;padding-right:10.0pt;">25.2</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.22.4.9" style="padding-left:10.0pt;padding-right:10.0pt;">25.7</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.23.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" colspan="9" id="S4.T1.18.23.5.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baselines with retrieval</th>
</tr>
<tr class="ltx_tr" id="S4.T1.8.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.8.8.1" style="padding-left:10.0pt;padding-right:10.0pt;">ChatGLM2<math alttext="{}_{\textsc{6B}}" class="ltx_Math" display="inline" id="S4.T1.8.8.1.m1.1"><semantics id="S4.T1.8.8.1.m1.1a"><msub id="S4.T1.8.8.1.m1.1.1" xref="S4.T1.8.8.1.m1.1.1.cmml"><mi id="S4.T1.8.8.1.m1.1.1a" xref="S4.T1.8.8.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.8.8.1.m1.1.1.1" xref="S4.T1.8.8.1.m1.1.1.1a.cmml">6B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.8.8.1.m1.1b"><apply id="S4.T1.8.8.1.m1.1.1.cmml" xref="S4.T1.8.8.1.m1.1.1"><ci id="S4.T1.8.8.1.m1.1.1.1a.cmml" xref="S4.T1.8.8.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.8.8.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.8.8.1.m1.1.1.1">6B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.8.8.1.m1.1c">{}_{\textsc{6B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.8.8.1.m1.1d">start_FLOATSUBSCRIPT 6B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.2" style="padding-left:10.0pt;padding-right:10.0pt;">42.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.3" style="padding-left:10.0pt;padding-right:10.0pt;">28.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.4" style="padding-left:10.0pt;padding-right:10.0pt;">59.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.5" style="padding-left:10.0pt;padding-right:10.0pt;">47.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.6" style="padding-left:10.0pt;padding-right:10.0pt;">30.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.7" style="padding-left:10.0pt;padding-right:10.0pt;">27.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.8.8.8" style="padding-left:10.0pt;padding-right:10.0pt;">60.3</td>
<td class="ltx_td ltx_align_center" id="S4.T1.8.8.9" style="padding-left:10.0pt;padding-right:10.0pt;">43.7</td>
</tr>
<tr class="ltx_tr" id="S4.T1.9.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.9.9.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.9.9.1.m1.1"><semantics id="S4.T1.9.9.1.m1.1a"><msub id="S4.T1.9.9.1.m1.1.1" xref="S4.T1.9.9.1.m1.1.1.cmml"><mi id="S4.T1.9.9.1.m1.1.1a" xref="S4.T1.9.9.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.9.9.1.m1.1.1.1" xref="S4.T1.9.9.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.9.9.1.m1.1b"><apply id="S4.T1.9.9.1.m1.1.1.cmml" xref="S4.T1.9.9.1.m1.1.1"><ci id="S4.T1.9.9.1.m1.1.1.1a.cmml" xref="S4.T1.9.9.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.9.9.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.9.9.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.9.9.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.9.9.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.2" style="padding-left:10.0pt;padding-right:10.0pt;">42.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.3" style="padding-left:10.0pt;padding-right:10.0pt;">40.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.4" style="padding-left:10.0pt;padding-right:10.0pt;">65.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.5" style="padding-left:10.0pt;padding-right:10.0pt;">62.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.6" style="padding-left:10.0pt;padding-right:10.0pt;">30.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.7" style="padding-left:10.0pt;padding-right:10.0pt;">33.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.9.9.8" style="padding-left:10.0pt;padding-right:10.0pt;">60.3</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.9" style="padding-left:10.0pt;padding-right:10.0pt;">57.8</td>
</tr>
<tr class="ltx_tr" id="S4.T1.10.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.10.10.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baichuan2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.10.10.1.m1.1"><semantics id="S4.T1.10.10.1.m1.1a"><msub id="S4.T1.10.10.1.m1.1.1" xref="S4.T1.10.10.1.m1.1.1.cmml"><mi id="S4.T1.10.10.1.m1.1.1a" xref="S4.T1.10.10.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.10.10.1.m1.1.1.1" xref="S4.T1.10.10.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.10.10.1.m1.1b"><apply id="S4.T1.10.10.1.m1.1.1.cmml" xref="S4.T1.10.10.1.m1.1.1"><ci id="S4.T1.10.10.1.m1.1.1.1a.cmml" xref="S4.T1.10.10.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.10.10.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.10.10.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.10.10.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.10.10.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.2" style="padding-left:10.0pt;padding-right:10.0pt;">43.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.3" style="padding-left:10.0pt;padding-right:10.0pt;">34.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.4" style="padding-left:10.0pt;padding-right:10.0pt;">65.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.5" style="padding-left:10.0pt;padding-right:10.0pt;">54.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.6" style="padding-left:10.0pt;padding-right:10.0pt;">33.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.7" style="padding-left:10.0pt;padding-right:10.0pt;">29.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.10.10.8" style="padding-left:10.0pt;padding-right:10.0pt;">62.9</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.9" style="padding-left:10.0pt;padding-right:10.0pt;">47.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.11.11">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.11.11.1" style="padding-left:10.0pt;padding-right:10.0pt;">Qwen<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.11.11.1.m1.1"><semantics id="S4.T1.11.11.1.m1.1a"><msub id="S4.T1.11.11.1.m1.1.1" xref="S4.T1.11.11.1.m1.1.1.cmml"><mi id="S4.T1.11.11.1.m1.1.1a" xref="S4.T1.11.11.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.11.11.1.m1.1.1.1" xref="S4.T1.11.11.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.11.11.1.m1.1b"><apply id="S4.T1.11.11.1.m1.1.1.cmml" xref="S4.T1.11.11.1.m1.1.1"><ci id="S4.T1.11.11.1.m1.1.1.1a.cmml" xref="S4.T1.11.11.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.11.11.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.11.11.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.11.11.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.11.11.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.2" style="padding-left:10.0pt;padding-right:10.0pt;">43.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.3" style="padding-left:10.0pt;padding-right:10.0pt;">31.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.4" style="padding-left:10.0pt;padding-right:10.0pt;">62.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.5" style="padding-left:10.0pt;padding-right:10.0pt;">48.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.6" style="padding-left:10.0pt;padding-right:10.0pt;">30.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.7" style="padding-left:10.0pt;padding-right:10.0pt;">24.8</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.11.11.8" style="padding-left:10.0pt;padding-right:10.0pt;">40.4</td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.9" style="padding-left:10.0pt;padding-right:10.0pt;">27.3</td>
</tr>
<tr class="ltx_tr" id="S4.T1.12.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.12.12.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T1.12.12.1.m1.1"><semantics id="S4.T1.12.12.1.m1.1a"><msub id="S4.T1.12.12.1.m1.1.1" xref="S4.T1.12.12.1.m1.1.1.cmml"><mi id="S4.T1.12.12.1.m1.1.1a" xref="S4.T1.12.12.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.12.12.1.m1.1.1.1" xref="S4.T1.12.12.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.12.12.1.m1.1b"><apply id="S4.T1.12.12.1.m1.1.1.cmml" xref="S4.T1.12.12.1.m1.1.1"><ci id="S4.T1.12.12.1.m1.1.1.1a.cmml" xref="S4.T1.12.12.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.12.12.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.12.12.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.12.12.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.12.12.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.2" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.12.12.2.1">50.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.3" style="padding-left:10.0pt;padding-right:10.0pt;">21.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.4" style="padding-left:10.0pt;padding-right:10.0pt;">70.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.5" style="padding-left:10.0pt;padding-right:10.0pt;">25.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.6" style="padding-left:10.0pt;padding-right:10.0pt;">38.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.7" style="padding-left:10.0pt;padding-right:10.0pt;">17.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.12.12.8" style="padding-left:10.0pt;padding-right:10.0pt;">62.9</td>
<td class="ltx_td ltx_align_center" id="S4.T1.12.12.9" style="padding-left:10.0pt;padding-right:10.0pt;">15.1</td>
</tr>
<tr class="ltx_tr" id="S4.T1.13.13">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.13.13.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baichuan2<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T1.13.13.1.m1.1"><semantics id="S4.T1.13.13.1.m1.1a"><msub id="S4.T1.13.13.1.m1.1.1" xref="S4.T1.13.13.1.m1.1.1.cmml"><mi id="S4.T1.13.13.1.m1.1.1a" xref="S4.T1.13.13.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.13.13.1.m1.1.1.1" xref="S4.T1.13.13.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.13.13.1.m1.1b"><apply id="S4.T1.13.13.1.m1.1.1.cmml" xref="S4.T1.13.13.1.m1.1.1"><ci id="S4.T1.13.13.1.m1.1.1.1a.cmml" xref="S4.T1.13.13.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.13.13.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.13.13.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.13.13.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.13.13.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.2" style="padding-left:10.0pt;padding-right:10.0pt;">44.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.3" style="padding-left:10.0pt;padding-right:10.0pt;">41.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.4" style="padding-left:10.0pt;padding-right:10.0pt;">65.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.5" style="padding-left:10.0pt;padding-right:10.0pt;">62.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.6" style="padding-left:10.0pt;padding-right:10.0pt;">30.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.7" style="padding-left:10.0pt;padding-right:10.0pt;">32.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.13.13.8" style="padding-left:10.0pt;padding-right:10.0pt;">61.4</td>
<td class="ltx_td ltx_align_center" id="S4.T1.13.13.9" style="padding-left:10.0pt;padding-right:10.0pt;">53.1</td>
</tr>
<tr class="ltx_tr" id="S4.T1.14.14">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.14.14.1" style="padding-left:10.0pt;padding-right:10.0pt;">Qwen<math alttext="{}_{\textsc{14B}}" class="ltx_Math" display="inline" id="S4.T1.14.14.1.m1.1"><semantics id="S4.T1.14.14.1.m1.1a"><msub id="S4.T1.14.14.1.m1.1.1" xref="S4.T1.14.14.1.m1.1.1.cmml"><mi id="S4.T1.14.14.1.m1.1.1a" xref="S4.T1.14.14.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.14.14.1.m1.1.1.1" xref="S4.T1.14.14.1.m1.1.1.1a.cmml">14B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.14.14.1.m1.1b"><apply id="S4.T1.14.14.1.m1.1.1.cmml" xref="S4.T1.14.14.1.m1.1.1"><ci id="S4.T1.14.14.1.m1.1.1.1a.cmml" xref="S4.T1.14.14.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.14.14.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.14.14.1.m1.1.1.1">14B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.14.14.1.m1.1c">{}_{\textsc{14B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.14.14.1.m1.1d">start_FLOATSUBSCRIPT 14B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.2" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.14.14.2.1">50.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.3" style="padding-left:10.0pt;padding-right:10.0pt;">47.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.4" style="padding-left:10.0pt;padding-right:10.0pt;">69.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.5" style="padding-left:10.0pt;padding-right:10.0pt;">67.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.6" style="padding-left:10.0pt;padding-right:10.0pt;">39.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.7" style="padding-left:10.0pt;padding-right:10.0pt;">39.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.14.14.8" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.14.14.8.1">64.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.9" style="padding-left:10.0pt;padding-right:10.0pt;">57.6</td>
</tr>
<tr class="ltx_tr" id="S4.T1.15.15">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.15.15.1" style="padding-left:10.0pt;padding-right:10.0pt;">SELF-RAG*<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T1.15.15.1.m1.1"><semantics id="S4.T1.15.15.1.m1.1a"><msub id="S4.T1.15.15.1.m1.1.1" xref="S4.T1.15.15.1.m1.1.1.cmml"><mi id="S4.T1.15.15.1.m1.1.1a" xref="S4.T1.15.15.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.15.15.1.m1.1.1.1" xref="S4.T1.15.15.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.15.15.1.m1.1b"><apply id="S4.T1.15.15.1.m1.1.1.cmml" xref="S4.T1.15.15.1.m1.1.1"><ci id="S4.T1.15.15.1.m1.1.1.1a.cmml" xref="S4.T1.15.15.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.15.15.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.15.15.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.15.15.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.15.15.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.2" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.3" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.4" style="padding-left:10.0pt;padding-right:10.0pt;">66.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.5" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.6" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.7" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.15.15.8" style="padding-left:10.0pt;padding-right:10.0pt;">54.9</td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.9" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.16.16">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.16.16.1" style="padding-left:10.0pt;padding-right:10.0pt;">SELF-RAG*<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T1.16.16.1.m1.1"><semantics id="S4.T1.16.16.1.m1.1a"><msub id="S4.T1.16.16.1.m1.1.1" xref="S4.T1.16.16.1.m1.1.1.cmml"><mi id="S4.T1.16.16.1.m1.1.1a" xref="S4.T1.16.16.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.16.16.1.m1.1.1.1" xref="S4.T1.16.16.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.16.16.1.m1.1b"><apply id="S4.T1.16.16.1.m1.1.1.cmml" xref="S4.T1.16.16.1.m1.1.1"><ci id="S4.T1.16.16.1.m1.1.1.1a.cmml" xref="S4.T1.16.16.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.16.16.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.16.16.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.16.16.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.16.16.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.2" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.3" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.4" style="padding-left:10.0pt;padding-right:10.0pt;">69.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.5" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.6" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.7" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.16.16.8" style="padding-left:10.0pt;padding-right:10.0pt;">55.8</td>
<td class="ltx_td ltx_align_center" id="S4.T1.16.16.9" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.17.17">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.17.17.1" style="padding-left:10.0pt;padding-right:10.0pt;">RECOMP*<math alttext="{}_{\textsc{EXT}}" class="ltx_Math" display="inline" id="S4.T1.17.17.1.m1.1"><semantics id="S4.T1.17.17.1.m1.1a"><msub id="S4.T1.17.17.1.m1.1.1" xref="S4.T1.17.17.1.m1.1.1.cmml"><mi id="S4.T1.17.17.1.m1.1.1a" xref="S4.T1.17.17.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.17.17.1.m1.1.1.1" xref="S4.T1.17.17.1.m1.1.1.1a.cmml">EXT</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.17.17.1.m1.1b"><apply id="S4.T1.17.17.1.m1.1.1.cmml" xref="S4.T1.17.17.1.m1.1.1"><ci id="S4.T1.17.17.1.m1.1.1.1a.cmml" xref="S4.T1.17.17.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.17.17.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.17.17.1.m1.1.1.1">EXT</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.17.17.1.m1.1c">{}_{\textsc{EXT}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.17.17.1.m1.1d">start_FLOATSUBSCRIPT EXT end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.2" style="padding-left:10.0pt;padding-right:10.0pt;">36.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.3" style="padding-left:10.0pt;padding-right:10.0pt;">44.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.4" style="padding-left:10.0pt;padding-right:10.0pt;">59.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.5" style="padding-left:10.0pt;padding-right:10.0pt;">65.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.6" style="padding-left:10.0pt;padding-right:10.0pt;">30.4</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.7" style="padding-left:10.0pt;padding-right:10.0pt;">40.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.17.17.8" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.17.17.9" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.18">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T1.18.18.1" style="padding-left:10.0pt;padding-right:10.0pt;">RECOMP*<math alttext="{}_{\textsc{ABS}}" class="ltx_Math" display="inline" id="S4.T1.18.18.1.m1.1"><semantics id="S4.T1.18.18.1.m1.1a"><msub id="S4.T1.18.18.1.m1.1.1" xref="S4.T1.18.18.1.m1.1.1.cmml"><mi id="S4.T1.18.18.1.m1.1.1a" xref="S4.T1.18.18.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T1.18.18.1.m1.1.1.1" xref="S4.T1.18.18.1.m1.1.1.1a.cmml">ABS</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T1.18.18.1.m1.1b"><apply id="S4.T1.18.18.1.m1.1.1.cmml" xref="S4.T1.18.18.1.m1.1.1"><ci id="S4.T1.18.18.1.m1.1.1.1a.cmml" xref="S4.T1.18.18.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T1.18.18.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T1.18.18.1.m1.1.1.1">ABS</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.18.18.1.m1.1c">{}_{\textsc{ABS}}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.18.18.1.m1.1d">start_FLOATSUBSCRIPT ABS end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.2" style="padding-left:10.0pt;padding-right:10.0pt;">37.0</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.3" style="padding-left:10.0pt;padding-right:10.0pt;">45.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.4" style="padding-left:10.0pt;padding-right:10.0pt;">58.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.5" style="padding-left:10.0pt;padding-right:10.0pt;">66.3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.6" style="padding-left:10.0pt;padding-right:10.0pt;">28.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.7" style="padding-left:10.0pt;padding-right:10.0pt;">37.9</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T1.18.18.8" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.9" style="padding-left:10.0pt;padding-right:10.0pt;">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.24.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.1" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S4.T1.18.24.6.1.1">MetRag</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.2" style="padding-left:10.0pt;padding-right:10.0pt;">49.6</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.3" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.3.1">53.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.4" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.4.1">74.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.5" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.5.1">78.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.6" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.6.1">42.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.7" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.7.1">51.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" id="S4.T1.18.24.6.8" style="padding-left:10.0pt;padding-right:10.0pt;">58.8</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.T1.18.24.6.9" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.18.24.6.9.1">61.5</span></td>
</tr>
</tbody>
</table>
</figure>
<figure class="ltx_table" id="S4.T2">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>The Impact of LLMs on Utility Modeling.
</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.3">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T2.3.4.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S4.T2.3.4.1.1" rowspan="2" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text" id="S4.T2.3.4.1.1.1">LLMs</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" colspan="2" id="S4.T2.3.4.1.2" style="padding-left:10.0pt;padding-right:10.0pt;">NQ</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" colspan="2" id="S4.T2.3.4.1.3" style="padding-left:10.0pt;padding-right:10.0pt;">TriviaQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" colspan="2" id="S4.T2.3.4.1.4" style="padding-left:10.0pt;padding-right:10.0pt;">HotpotQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="2" id="S4.T2.3.4.1.5" style="padding-left:10.0pt;padding-right:10.0pt;">PopQA</th>
</tr>
<tr class="ltx_tr" id="S4.T2.3.5.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.1" style="padding-left:10.0pt;padding-right:10.0pt;">EM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.2" style="padding-left:10.0pt;padding-right:10.0pt;">F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.3" style="padding-left:10.0pt;padding-right:10.0pt;">EM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.4" style="padding-left:10.0pt;padding-right:10.0pt;">F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.5" style="padding-left:10.0pt;padding-right:10.0pt;">EM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.6" style="padding-left:10.0pt;padding-right:10.0pt;">F1</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T2.3.5.2.7" style="padding-left:10.0pt;padding-right:10.0pt;">EM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T2.3.5.2.8" style="padding-left:10.0pt;padding-right:10.0pt;">F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.1.1.1" style="padding-left:10.0pt;padding-right:10.0pt;">Baichuan2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T2.1.1.1.m1.1"><semantics id="S4.T2.1.1.1.m1.1a"><msub id="S4.T2.1.1.1.m1.1.1" xref="S4.T2.1.1.1.m1.1.1.cmml"><mi id="S4.T2.1.1.1.m1.1.1a" xref="S4.T2.1.1.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T2.1.1.1.m1.1.1.1" xref="S4.T2.1.1.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.m1.1b"><apply id="S4.T2.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.m1.1.1"><ci id="S4.T2.1.1.1.m1.1.1.1a.cmml" xref="S4.T2.1.1.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T2.1.1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T2.1.1.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.1.1.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.1.1.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.2" style="padding-left:10.0pt;padding-right:10.0pt;">32.1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.3" style="padding-left:10.0pt;padding-right:10.0pt;">36.8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.4" style="padding-left:10.0pt;padding-right:10.0pt;">63.5</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.5" style="padding-left:10.0pt;padding-right:10.0pt;">67.8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.6" style="padding-left:10.0pt;padding-right:10.0pt;">25.3</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.7" style="padding-left:10.0pt;padding-right:10.0pt;">33.2</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.1.8" style="padding-left:10.0pt;padding-right:10.0pt;">23.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.1.9" style="padding-left:10.0pt;padding-right:10.0pt;">25.1</td>
</tr>
<tr class="ltx_tr" id="S4.T2.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T2.2.2.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{7B}}" class="ltx_Math" display="inline" id="S4.T2.2.2.1.m1.1"><semantics id="S4.T2.2.2.1.m1.1a"><msub id="S4.T2.2.2.1.m1.1.1" xref="S4.T2.2.2.1.m1.1.1.cmml"><mi id="S4.T2.2.2.1.m1.1.1a" xref="S4.T2.2.2.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T2.2.2.1.m1.1.1.1" xref="S4.T2.2.2.1.m1.1.1.1a.cmml">7B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T2.2.2.1.m1.1b"><apply id="S4.T2.2.2.1.m1.1.1.cmml" xref="S4.T2.2.2.1.m1.1.1"><ci id="S4.T2.2.2.1.m1.1.1.1a.cmml" xref="S4.T2.2.2.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T2.2.2.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T2.2.2.1.m1.1.1.1">7B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.2.2.1.m1.1c">{}_{\textsc{7B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.2.2.1.m1.1d">start_FLOATSUBSCRIPT 7B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.2" style="padding-left:10.0pt;padding-right:10.0pt;">42.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.3" style="padding-left:10.0pt;padding-right:10.0pt;">46.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.4" style="padding-left:10.0pt;padding-right:10.0pt;">69.1</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.5" style="padding-left:10.0pt;padding-right:10.0pt;">73.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.6" style="padding-left:10.0pt;padding-right:10.0pt;">35.7</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.7" style="padding-left:10.0pt;padding-right:10.0pt;">45.2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.2.2.8" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.2.2.8.1">55.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.2.2.9" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.2.2.9.1">56.8</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_r" id="S4.T2.3.3.1" style="padding-left:10.0pt;padding-right:10.0pt;">Llama2<math alttext="{}_{\textsc{13B}}" class="ltx_Math" display="inline" id="S4.T2.3.3.1.m1.1"><semantics id="S4.T2.3.3.1.m1.1a"><msub id="S4.T2.3.3.1.m1.1.1" xref="S4.T2.3.3.1.m1.1.1.cmml"><mi id="S4.T2.3.3.1.m1.1.1a" xref="S4.T2.3.3.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.T2.3.3.1.m1.1.1.1" xref="S4.T2.3.3.1.m1.1.1.1a.cmml">13B</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T2.3.3.1.m1.1b"><apply id="S4.T2.3.3.1.m1.1.1.cmml" xref="S4.T2.3.3.1.m1.1.1"><ci id="S4.T2.3.3.1.m1.1.1.1a.cmml" xref="S4.T2.3.3.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.T2.3.3.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T2.3.3.1.m1.1.1.1">13B</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.3.3.1.m1.1c">{}_{\textsc{13B}}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.3.3.1.m1.1d">start_FLOATSUBSCRIPT 13B end_FLOATSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.2" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.2.1">45.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.3" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.1">49.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.4" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.4.1">71.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.5" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.5.1">76.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.6" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.6.1">38.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.7" style="padding-left:10.0pt;padding-right:10.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.7.1">47.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" id="S4.T2.3.3.8" style="padding-left:10.0pt;padding-right:10.0pt;">55.1</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.3.3.9" style="padding-left:10.0pt;padding-right:10.0pt;">56.4</td>
</tr>
</tbody>
</table>
</figure>
<section class="ltx_subsubsection" id="S4.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.1 </span>Main Results</h4>
<div class="ltx_para" id="S4.SS2.SSS1.p1">
<p class="ltx_p" id="S4.SS2.SSS1.p1.1">From the empirical results across multiple knowledge-intensive datasets, the major findings can be summarized as follows:</p>
<ul class="ltx_itemize" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">Retrieval largely improves performance.</span>
When compared against approaches without retrieval, the retrieval-augmented approaches demonstrated the superiority in EM metric even when compared to the strong baseline ChatGPT, showing the tremendous power and potential of retrieval-augmented generation. Besides, with retrieval-augmentation, even small-scale LLMs (<em class="ltx_emph ltx_font_italic" id="S4.I1.i1.p1.1.2">e.g.,</em> 7B LLMs) can achieve comparable performance <em class="ltx_emph ltx_font_italic" id="S4.I1.i1.p1.1.3">w.r.t.</em> large-scale LMs (<em class="ltx_emph ltx_font_italic" id="S4.I1.i1.p1.1.4">e.g.,</em> 13B LLMs) in terms of EM metric, showing their power in pursuit of true knowledge.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">Long-tail queries benefit more from retrieval.</span>
As depicted in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.T1" title="Table 1 ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">1</span></a>, retrieval-augmented approaches achieve most performance gain in PopQA dataset with long-tail queries while the large-scale competitive LLM ChatGPT performs worst in this dataset due to the untimely updated knowledge, which illustrates that performance degradation due to knowledge updating issues can be alleviated to a great extent by retrieval.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i3.p1">
<p class="ltx_p" id="S4.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i3.p1.1.1">Supervised Fine-tuning improves instruction following.</span>
With regard to F1 metric, we find that approaches trained with retrieved passages perform better, showcasing their ability in instruction following for abstracting concise answers (which is the case of ChatGPT with remarkable instruction following ability for zero-shot tasks). However, for approaches without supervised fine-tuning, there exists a <span class="ltx_text ltx_font_italic" id="S4.I1.i3.p1.1.2">seesaw effect</span> between EM and F1 with one focuses on answer accuracy while other focuses on the balance between exactness and conciseness (which is stated in input prompts).</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i4.p1">
<p class="ltx_p" id="S4.I1.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i4.p1.1.1">The way of incorporating external information matters!</span>
Different from approaches that directly incorporate the retrieved passages for answer generation, our proposed <span class="ltx_text ltx_font_smallcaps" id="S4.I1.i4.p1.1.2">MetRag</span> endows multi-layered thoughts to <span class="ltx_text ltx_font_italic" id="S4.I1.i4.p1.1.3">“take the essence and discard the dross”</span> so that the most useful information of retrieved passages can be abstracted and distraction information can be dropped for end tasks. Experimental results in four different datasets illustrate and verify the rationale of our proposed <span class="ltx_text ltx_font_smallcaps" id="S4.I1.i4.p1.1.4">MetRag</span>.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.2 </span>Analysis</h4>
<section class="ltx_paragraph" id="S4.SS2.SSS2.Px1">
<h5 class="ltx_title ltx_title_paragraph">Ablation study.</h5>
<div class="ltx_para" id="S4.SS2.SSS2.Px1.p1">
<p class="ltx_p" id="S4.SS2.SSS2.Px1.p1.1">We examine the effectiveness of each component in <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.SSS2.Px1.p1.1.1">MetRag</span> by preparing the following variants:
i) <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.SSS2.Px1.p1.1.2">MetRag w/o Comb</span>, which removes the combination of similarity model and utility model and degrades to the original similarity based retriever;
ii) <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.SSS2.Px1.p1.1.3">MetRag w/o AS</span>, which removes the task-adaptive summarization for information integration.
We plot the performance comparison in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.F3" title="Figure 3 ‣ Ablation study. ‣ 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3</span></a>, from which we can observe that the overall performance would drop a lot when either component is discarded, thus the effectiveness of our dedicate design is verified.
In particular, we find that the <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.SSS2.Px1.p1.1.4">MetRag w/o Comb</span> performs worst among all variants, showcasing that the augmented information, which serves as the cornerstone in retrieval-augmented generation, deserves more attention.</p>
</div>
<figure class="ltx_figure" id="S4.F3">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F3.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="298" id="S4.F3.sf1.g1" src="x3.png" width="398"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(a) </span>EM</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F3.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="298" id="S4.F3.sf2.g1" src="x4.png" width="398"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(b) </span>F1</figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Ablation study.</figcaption>
</figure>
<figure class="ltx_figure" id="S4.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="319" id="S4.F4.g1" src="x5.png" width="748"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>The influence of passage window size.</figcaption>
</figure>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS2.Px2">
<h5 class="ltx_title ltx_title_paragraph">Passage window size matters in utility model performance!</h5>
<div class="ltx_para" id="S4.SS2.SSS2.Px2.p1">
<p class="ltx_p" id="S4.SS2.SSS2.Px2.p1.1">Since the utility model plays a key role in bring in the supervision of LLMs into passage selection process, we take a closer look at how the passage window size <math alttext="\left\|\mathcal{D}^{\bullet}\right\|" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px2.p1.1.m1.1"><semantics id="S4.SS2.SSS2.Px2.p1.1.m1.1a"><mrow id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.2.cmml"><mo id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.2" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.2.1.cmml">‖</mo><msup id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.2" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.2.cmml">𝒟</mi><mo id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.3" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.3.cmml">∙</mo></msup><mo id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.3" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.2.1.cmml">‖</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px2.p1.1.m1.1b"><apply id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.2.1.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.2">norm</csymbol><apply id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1">superscript</csymbol><ci id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.2">𝒟</ci><ci id="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.3.cmml" xref="S4.SS2.SSS2.Px2.p1.1.m1.1.1.1.1.3">∙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px2.p1.1.m1.1c">\left\|\mathcal{D}^{\bullet}\right\|</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px2.p1.1.m1.1d">∥ caligraphic_D start_POSTSUPERSCRIPT ∙ end_POSTSUPERSCRIPT ∥</annotation></semantics></math> <span class="ltx_note ltx_role_footnote" id="footnote8"><sup class="ltx_note_mark">8</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">8</sup><span class="ltx_tag ltx_tag_note">8</span>Here, since the empty string <math alttext="es" class="ltx_Math" display="inline" id="footnote8.m1.1"><semantics id="footnote8.m1.1b"><mrow id="footnote8.m1.1.1" xref="footnote8.m1.1.1.cmml"><mi id="footnote8.m1.1.1.2" xref="footnote8.m1.1.1.2.cmml">e</mi><mo id="footnote8.m1.1.1.1" xref="footnote8.m1.1.1.1.cmml">⁢</mo><mi id="footnote8.m1.1.1.3" xref="footnote8.m1.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="footnote8.m1.1c"><apply id="footnote8.m1.1.1.cmml" xref="footnote8.m1.1.1"><times id="footnote8.m1.1.1.1.cmml" xref="footnote8.m1.1.1.1"></times><ci id="footnote8.m1.1.1.2.cmml" xref="footnote8.m1.1.1.2">𝑒</ci><ci id="footnote8.m1.1.1.3.cmml" xref="footnote8.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote8.m1.1d">es</annotation><annotation encoding="application/x-llamapun" id="footnote8.m1.1e">italic_e italic_s</annotation></semantics></math> is added by default, we only count the passages involved in training.</span></span></span> would influence the final performance by directly incorporating the utility model trained under different settings to the final task. Due to the space limit, we average the metrics in four datasets and present the result in Figure <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.F4" title="Figure 4 ‣ Ablation study. ‣ 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">4</span></a> and find that the model performance improves as the window size grows, which demonstrates that the growing passage window size endows more LLMs’ powers for distinguishing passage significance among diverse inputs to the utility model thus improving performance on downstream tasks. However, due to the computational burden (the model training time grows linearly with the passage window size) that a large passage window size imposes during training, there is need to balance the trade-off between performance and cost.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS2.Px3">
<h5 class="ltx_title ltx_title_paragraph">Impact of selective retrieval.</h5>
<div class="ltx_para" id="S4.SS2.SSS2.Px3.p1">
<p class="ltx_p" id="S4.SS2.SSS2.Px3.p1.2">When optimizing the utility model, we add an empty string <math alttext="es" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px3.p1.1.m1.1"><semantics id="S4.SS2.SSS2.Px3.p1.1.m1.1a"><mrow id="S4.SS2.SSS2.Px3.p1.1.m1.1.1" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.cmml"><mi id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.2" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.2.cmml">e</mi><mo id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.1" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.1.cmml">⁢</mo><mi id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.3" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px3.p1.1.m1.1b"><apply id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1"><times id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.1.cmml" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.1"></times><ci id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.2">𝑒</ci><ci id="S4.SS2.SSS2.Px3.p1.1.m1.1.1.3.cmml" xref="S4.SS2.SSS2.Px3.p1.1.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px3.p1.1.m1.1c">es</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px3.p1.1.m1.1d">italic_e italic_s</annotation></semantics></math> in the training process to leverage the knowledge of LLMs to achieve selective retrieval. Here, we conduct some case studies to examine this mechanism.
As we can see from Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.T3" title="Table 3 ‣ Impact of selective retrieval. ‣ 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3</span></a>, there are example queries that the utility model deems no retrieval and in total there are 20.9% queries which the utility model ranks the empty string <math alttext="es" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px3.p1.2.m2.1"><semantics id="S4.SS2.SSS2.Px3.p1.2.m2.1a"><mrow id="S4.SS2.SSS2.Px3.p1.2.m2.1.1" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.cmml"><mi id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.2" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.2.cmml">e</mi><mo id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.1" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.3" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.3.cmml">s</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px3.p1.2.m2.1b"><apply id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.cmml" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1"><times id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.1"></times><ci id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.2">𝑒</ci><ci id="S4.SS2.SSS2.Px3.p1.2.m2.1.1.3.cmml" xref="S4.SS2.SSS2.Px3.p1.2.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px3.p1.2.m2.1c">es</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px3.p1.2.m2.1d">italic_e italic_s</annotation></semantics></math> higher than other documents. As we can see from Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.T3" title="Table 3 ‣ Impact of selective retrieval. ‣ 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">3</span></a>, many of the listed queries are commonsense knowledge that has been memorized in LLMs’ parameters and we can easily call an LLM for the required answer instead of retrieval, which illustrates that in retrieval-augmented generation, despite the further knowledge external corpus introduces, the inherent knowledge of LLMs when deploying retrieval-based techniques is worth investigation and we believe that our work has provided a straightforward and plausible solution.
However, this design still has certain limitations, <em class="ltx_emph ltx_font_italic" id="S4.SS2.SSS2.Px3.p1.2.1">i.e.,</em> the LLM used for end task needs to be the same or stronger than the one utilized during utility model training, otherwise this mechanism may not work.</p>
</div>
<div class="ltx_para" id="S4.SS2.SSS2.Px3.p2">
<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px3.p2.1">{myverbbox}</span>
<p class="ltx_p" id="S4.SS2.SSS2.Px3.p2.2">[]<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px3.p2.2.1">\VerbContentQueriesD</span>
Is Cartagena or Chess more popular around the world?
In what country is Chalhuacocha?
What was Ian Fleming’s first Bond book?
When was catch me if you can made?
Cathay is a poetic name for which country?
Who sings sugar sugar you are my candy girl?
Who used to present I’m a celebrity now?
What county is Icknield Walk First School located in?
Where does the cell spend most of its time in the cell cycle?
What country lies to north of the Republic of Chad?
Are Vintage Life and InStyle both US-based magazines?
Who is the first president to be impeached?
Are Andrew Stevens and Charles Burnett both American?
Which Genre of Television did Charles Quinton Murphy act for?
How was President Kennedy assassinated?
Which animal is the carrier of the h1n1 virus?
What part of the body produces insulin?</p>
</div>
<figure class="ltx_table" id="S4.T3">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Queries Deemed No Retrieval by Utility Model.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T3.1" style="width:433.6pt;height:400.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(207.1pt,-191.1pt) scale(22.2369054260994,22.2369054260994) ;">
<table class="ltx_tabular ltx_align_middle" id="S4.T3.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T3.1.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_tt" id="S4.T3.1.1.1.1.1"><span class="ltx_ERROR undefined" id="S4.T3.1.1.1.1.1.1">\VerbContentQueriesD</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS2.Px4">
<h5 class="ltx_title ltx_title_paragraph">The impact of LLMs on utility modeling.</h5>
<div class="ltx_para" id="S4.SS2.SSS2.Px4.p1">
<p class="ltx_p" id="S4.SS2.SSS2.Px4.p1.8">To further analyse the impact of LLMs on utility modeling, beside Llama2<math alttext="{}_{\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.1.m1.1"><semantics id="S4.SS2.SSS2.Px4.p1.1.m1.1a"><msub id="S4.SS2.SSS2.Px4.p1.1.m1.1.1" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.1.m1.1.1a" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1a.cmml">13b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.1.m1.1b"><apply id="S4.SS2.SSS2.Px4.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1"><ci id="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.1.m1.1.1.1">13b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.1.m1.1c">{}_{\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.1.m1.1d">start_FLOATSUBSCRIPT 13b end_FLOATSUBSCRIPT</annotation></semantics></math> we also add Baichuan<math alttext="{}_{\textsc{7b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.2.m2.1"><semantics id="S4.SS2.SSS2.Px4.p1.2.m2.1a"><msub id="S4.SS2.SSS2.Px4.p1.2.m2.1.1" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.2.m2.1.1a" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1a.cmml">7b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.2.m2.1b"><apply id="S4.SS2.SSS2.Px4.p1.2.m2.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1"><ci id="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.2.m2.1.1.1">7b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.2.m2.1c">{}_{\textsc{7b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.2.m2.1d">start_FLOATSUBSCRIPT 7b end_FLOATSUBSCRIPT</annotation></semantics></math> and Llama2<math alttext="{}_{\textsc{7b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.3.m3.1"><semantics id="S4.SS2.SSS2.Px4.p1.3.m3.1a"><msub id="S4.SS2.SSS2.Px4.p1.3.m3.1.1" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.3.m3.1.1a" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1a.cmml">7b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.3.m3.1b"><apply id="S4.SS2.SSS2.Px4.p1.3.m3.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1"><ci id="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.3.m3.1.1.1">7b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.3.m3.1c">{}_{\textsc{7b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.3.m3.1d">start_FLOATSUBSCRIPT 7b end_FLOATSUBSCRIPT</annotation></semantics></math> as the base LLMs for comparison by directly incorporating the utility model trained under different settings to the final task and present the metrics in four datasets in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.T2" title="Table 2 ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">2</span></a>, from which we have two main conclusions: 1) Usually, a large-scale LLM can outperforms an LLM of smaller-scale, <em class="ltx_emph ltx_font_italic" id="S4.SS2.SSS2.Px4.p1.8.1">e.g.,</em> Llama2<math alttext="{}_{\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.4.m4.1"><semantics id="S4.SS2.SSS2.Px4.p1.4.m4.1a"><msub id="S4.SS2.SSS2.Px4.p1.4.m4.1.1" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.4.m4.1.1a" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1a.cmml">13b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.4.m4.1b"><apply id="S4.SS2.SSS2.Px4.p1.4.m4.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1"><ci id="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.4.m4.1.1.1">13b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.4.m4.1c">{}_{\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.4.m4.1d">start_FLOATSUBSCRIPT 13b end_FLOATSUBSCRIPT</annotation></semantics></math> vs Llama2<math alttext="{}_{\textsc{7b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.5.m5.1"><semantics id="S4.SS2.SSS2.Px4.p1.5.m5.1a"><msub id="S4.SS2.SSS2.Px4.p1.5.m5.1.1" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.5.m5.1.1a" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1a.cmml">7b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.5.m5.1b"><apply id="S4.SS2.SSS2.Px4.p1.5.m5.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1"><ci id="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.5.m5.1.1.1">7b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.5.m5.1c">{}_{\textsc{7b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.5.m5.1d">start_FLOATSUBSCRIPT 7b end_FLOATSUBSCRIPT</annotation></semantics></math>. Furthermore, we also find an interesting phenomenon that sometimes (<em class="ltx_emph ltx_font_italic" id="S4.SS2.SSS2.Px4.p1.8.2">e.g.,</em> PopQA dataset) the score of Llama2<math alttext="{}_{\textsc{7b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.6.m6.1"><semantics id="S4.SS2.SSS2.Px4.p1.6.m6.1a"><msub id="S4.SS2.SSS2.Px4.p1.6.m6.1.1" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.6.m6.1.1a" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1a.cmml">7b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.6.m6.1b"><apply id="S4.SS2.SSS2.Px4.p1.6.m6.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1"><ci id="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.6.m6.1.1.1">7b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.6.m6.1c">{}_{\textsc{7b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.6.m6.1d">start_FLOATSUBSCRIPT 7b end_FLOATSUBSCRIPT</annotation></semantics></math> is higher than that of Llama2<math alttext="{}_{\textsc{13b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.7.m7.1"><semantics id="S4.SS2.SSS2.Px4.p1.7.m7.1a"><msub id="S4.SS2.SSS2.Px4.p1.7.m7.1.1" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.7.m7.1.1a" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1a.cmml">13b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.7.m7.1b"><apply id="S4.SS2.SSS2.Px4.p1.7.m7.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1"><ci id="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.7.m7.1.1.1">13b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.7.m7.1c">{}_{\textsc{13b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.7.m7.1d">start_FLOATSUBSCRIPT 13b end_FLOATSUBSCRIPT</annotation></semantics></math>, which is consistent of the findings reported in Self-RAG<cite class="ltx_cite ltx_citemacro_cite">Asai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib2" title="">2023b</a>)</cite>. 2) Baichuan<math alttext="{}_{\textsc{7b}}" class="ltx_Math" display="inline" id="S4.SS2.SSS2.Px4.p1.8.m8.1"><semantics id="S4.SS2.SSS2.Px4.p1.8.m8.1a"><msub id="S4.SS2.SSS2.Px4.p1.8.m8.1.1" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1.cmml"><mi id="S4.SS2.SSS2.Px4.p1.8.m8.1.1a" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1.cmml"></mi><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1a.cmml">7b</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.Px4.p1.8.m8.1b"><apply id="S4.SS2.SSS2.Px4.p1.8.m8.1.1.cmml" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1"><ci id="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1a.cmml" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1"><mtext class="ltx_font_smallcaps" id="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1.cmml" mathsize="70%" xref="S4.SS2.SSS2.Px4.p1.8.m8.1.1.1">7b</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.Px4.p1.8.m8.1c">{}_{\textsc{7b}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS2.Px4.p1.8.m8.1d">start_FLOATSUBSCRIPT 7b end_FLOATSUBSCRIPT</annotation></semantics></math> underperforms the Llama series in our experiments, one possible reason is that it places greater emphasis on its application in specific languages such as Chinese, as is stated in its original paper<cite class="ltx_cite ltx_citemacro_cite">Baichuan (<a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#bib.bib4" title="">2023</a>)</cite>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS2.Px5">
<h5 class="ltx_title ltx_title_paragraph">Investigation into task-adaptive summarizer.</h5>
<div class="ltx_para" id="S4.SS2.SSS2.Px5.p1">
<p class="ltx_p" id="S4.SS2.SSS2.Px5.p1.1">To start with, we introduce a case study to illustrate the virtues of our task-adaptive summarizer in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#S4.T4" title="Table 4 ‣ Investigation into task-adaptive summarizer. ‣ 4.2.2 Analysis ‣ 4.2 Results and Analysis ‣ 4 Experiments ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">4</span></a>, as we can see from the table, since the original information is quite long and with a lot of distracting information, an LLM tend to get lost in a large chunk of words. However, with our task-adaptive summarizer, the most relevant information for this query is extracted thus an LLM can easily answer the question given the extracted knowledge.</p>
</div>
<div class="ltx_para" id="S4.SS2.SSS2.Px5.p2">
<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p2.1">{myverbbox}</span>
<p class="ltx_p" id="S4.SS2.SSS2.Px5.p2.2">[]<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p2.2.1">\VerbContentQueD</span>
What is Walter de la Pole’s occupation?</p>
</div>
<div class="ltx_para" id="S4.SS2.SSS2.Px5.p3">
<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p3.1">{myverbbox}</span>
<p class="ltx_p" id="S4.SS2.SSS2.Px5.p3.2">[]<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p3.2.1">\VerbContentOriD</span>
Walter de la Pole: Family Walter was the son and heir of the MP
Sir Edmund de la Pole and his second wife.
Walter de la Pole Sir Walter de la Pole (November 1371 – 1434), of
Dernford in Sawston, Cambridgeshire, was an English politician.
Richard de la Pole Richard de la Pole (1480 – 24 February 1525)
was a pretender to the English crown. Commonly nicknamed "White
Rose", he was the last Yorkist claimant to actively and openly seek
the crown of England. He lived in exile…(4203 characters)</p>
</div>
<div class="ltx_para" id="S4.SS2.SSS2.Px5.p4">
<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p4.1">{myverbbox}</span>
<p class="ltx_p" id="S4.SS2.SSS2.Px5.p4.2">[]<span class="ltx_ERROR undefined" id="S4.SS2.SSS2.Px5.p4.2.1">\VerbContentSumD</span>
Walter de la Pole was an English politician. (44 characters)</p>
</div>
<figure class="ltx_table" id="S4.T4">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Case Study: Task-adaptive Summarizer Output.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T4.1" style="width:433.6pt;height:400.7pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(158.4pt,-146.4pt) scale(3.71055117596174,3.71055117596174) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T4.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T4.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.1.1">Query</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T4.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.2.1.1"><span class="ltx_ERROR undefined" id="S4.T4.1.1.2.1.1.1">\VerbContentQueD</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.3.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.3.2.1">Original information</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.4.3">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.4.3.1"><span class="ltx_ERROR undefined" id="S4.T4.1.1.4.3.1.1">\VerbContentOriD</span></td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.5.4">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.5.4.1">Task-adaptive summary</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.6.5">
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.T4.1.1.6.5.1"><span class="ltx_ERROR undefined" id="S4.T4.1.1.6.5.1.1">\VerbContentSumD</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para" id="S4.SS2.SSS2.Px5.p5">
<p class="ltx_p" id="S4.SS2.SSS2.Px5.p5.1">In sum, the virtues of task-adaptive summarizer are two-fold.
On the one hand, by using a small-scale LLM (<em class="ltx_emph ltx_font_italic" id="S4.SS2.SSS2.Px5.p5.1.1">i.e.,</em> a 13B Llama model) as the summarizer it could speed up the inference for downstream tasks.
The summary ratio across the four datasets are 8.25%, 7.35%, 6.77% and 7.32%
respectively, which might increase a small amount of inference cost by adding the summary stage, nevertheness, since the inference cost of LLMs is linearly correlated with token number, with the knowledge derived from the summarizer, it can potentially decrease the inference cost for high-cost commercial LLMs such as GPT4.
On the other hand, it further enhances the performance by extracting the most relevant information for a given task so as to alleviate distracting information, which improves the EM and F1 metrics across the four datasets on average by 1.4% and 1.7% respectively, which further justifies our model design.</p>
</div>
</section>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">In this work, we propose <span class="ltx_text ltx_font_smallcaps" id="S5.p1.1.1">MetRag</span>, a multi–layered thoughts enhanced retrieval-augmented generation framework, which first embraces LLM’s supervision to obtain utility-oriented thoughts and combines the similarity and utility of documents for performance boosting, and further pursuits compactness-oriented thoughts via a task-adaptive summarizer.
Finally, with multi-layered thoughts from the precedent stages, an LLM is called for knowledge-augmented generation.
Extensive experiments on knowledge-intensive tasks have demonstrated the superiority of the proposed <span class="ltx_text ltx_font_smallcaps" id="S5.p1.1.2">MetRag</span>.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Limitations</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">One of the limitation of our work is that the effectiveness of utility model is highly hinges on a strong LLM’s supervision, although we have find that an LLM like LLama 7B or 13B is enough for training a satisfactory utility model. In sum, our work opens up a fresh perspective to reconsider retrieval-augmented generation, but more complex situation that require reading a large amount of material to
answer (<em class="ltx_emph ltx_font_italic" id="S6.p1.1.1">e.g.,</em> legal or medical documents) is still unresolved. Hence, extending our framework in the super-long contexts is one of the future work.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Asai et al. (2023a)</span>
<span class="ltx_bibblock">
Akari Asai, Sewon Min, Zexuan Zhong, and Danqi Chen. 2023a.

</span>
<span class="ltx_bibblock">Retrieval-based language models and applications.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">ACL (tutorial)</em>, pages 41–46.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Asai et al. (2023b)</span>
<span class="ltx_bibblock">
Akari Asai, Zeqiu Wu, Yizhong Wang, Avirup Sil, and Hannaneh Hajishirzi. 2023b.

</span>
<span class="ltx_bibblock">Self-rag: Learning to retrieve, generate, and critique through self-reflection.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">CoRR</em>, abs/2310.11511.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2023)</span>
<span class="ltx_bibblock">
Jinze Bai, Shuai Bai, Yunfei Chu, Zeyu Cui, Kai Dang, Xiaodong Deng, Yang Fan, Wenbin Ge, Yu Han, Fei Huang, Binyuan Hui, Luo Ji, Mei Li, Junyang Lin, Runji Lin, Dayiheng Liu, Gao Liu, Chengqiang Lu, Keming Lu, Jianxin Ma, Rui Men, Xingzhang Ren, Xuancheng Ren, Chuanqi Tan, Sinan Tan, Jianhong Tu, Peng Wang, Shijie Wang, Wei Wang, Shengguang Wu, Benfeng Xu, Jin Xu, An Yang, Hao Yang, Jian Yang, Shusheng Yang, Yang Yao, Bowen Yu, Hongyi Yuan, Zheng Yuan, Jianwei Zhang, Xingxuan Zhang, Yichang Zhang, Zhenru Zhang, Chang Zhou, Jingren Zhou, Xiaohuan Zhou, and Tianhang Zhu. 2023.

</span>
<span class="ltx_bibblock">Qwen technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2309.16609</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Baichuan (2023)</span>
<span class="ltx_bibblock">
Baichuan. 2023.

</span>
<span class="ltx_bibblock">Baichuan 2: Open large-scale language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">arXiv preprint arXiv:2309.10305</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Du et al. (2022)</span>
<span class="ltx_bibblock">
Zhengxiao Du, Yujie Qian, Xiao Liu, Ming Ding, Jiezhong Qiu, Zhilin Yang, and Jie Tang. 2022.

</span>
<span class="ltx_bibblock">Glm: General language model pretraining with autoregressive blank infilling.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">ACL</em>, pages 320–335.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2023)</span>
<span class="ltx_bibblock">
Yunfan Gao, Yun Xiong, Xinyu Gao, Kangxiang Jia, Jinliu Pan, Yuxi Bi, Yi Dai, Jiawei Sun, Qianyu Guo, Meng Wang, and Haofen Wang. 2023.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for large language models: A survey.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">CoRR</em>, abs/2312.10997.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guu et al. (2020)</span>
<span class="ltx_bibblock">
Kelvin Guu, Kenton Lee, Zora Tung, Panupong Pasupat, and Ming-Wei Chang. 2020.

</span>
<span class="ltx_bibblock">Retrieval augmented language model pre-training.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">ICML</em>, pages 3929–3938.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2022)</span>
<span class="ltx_bibblock">
Yushi Hu, Hang Hua, Zhengyuan Yang, Weijia Shi, Noah A. Smith, and Jiebo Luo. 2022.

</span>
<span class="ltx_bibblock">Promptcap: Prompt-guided task-aware image captioning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">CoRR</em>, abs/2211.09699.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Izacard et al. (2023)</span>
<span class="ltx_bibblock">
Gautier Izacard, Patrick S. H. Lewis, Maria Lomeli, Lucas Hosseini, Fabio Petroni, Timo Schick, Jane Dwivedi-Yu, Armand Joulin, Sebastian Riedel, and Edouard Grave. 2023.

</span>
<span class="ltx_bibblock">Atlas: Few-shot learning with retrieval augmented language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">J. Mach. Learn. Res.</em>, 24:251:1–251:43.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Zhengbao Jiang, Frank F. Xu, Luyu Gao, Zhiqing Sun, Qian Liu, Jane Dwivedi-Yu, Yiming Yang, Jamie Callan, and Graham Neubig. 2023.

</span>
<span class="ltx_bibblock">Active retrieval augmented generation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">EMNLP</em>, pages 7969–7992.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jung et al. (2023)</span>
<span class="ltx_bibblock">
Jaehun Jung, Peter West, Liwei Jiang, Faeze Brahman, Ximing Lu, Jillian Fisher, Taylor Sorensen, and Yejin Choi. 2023.

</span>
<span class="ltx_bibblock">Impossible distillation: from low-quality model to high-quality dataset &amp; model for summarization and paraphrasing.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">CoRR</em>, abs/2305.16635.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kasai et al. (2022)</span>
<span class="ltx_bibblock">
Jungo Kasai, Keisuke Sakaguchi, Yoichi Takahashi, Ronan Le Bras, Akari Asai, Xinyan Yu, Dragomir R. Radev, Noah A. Smith, Yejin Choi, and Kentaro Inui. 2022.

</span>
<span class="ltx_bibblock">Realtime QA: what’s the answer right now?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">CoRR</em>, abs/2207.13332.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kwiatkowski et al. (2019)</span>
<span class="ltx_bibblock">
Tom Kwiatkowski, Jennimaria Palomaki, Olivia Redfield, Michael Collins, Ankur P. Parikh, Chris Alberti, Danielle Epstein, Illia Polosukhin, Jacob Devlin, Kenton Lee, Kristina Toutanova, Llion Jones, Matthew Kelcey, Ming-Wei Chang, Andrew M. Dai, Jakob Uszkoreit, Quoc Le, and Slav Petrov. 2019.

</span>
<span class="ltx_bibblock">Natural questions: a benchmark for question answering research.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Trans. Assoc. Comput. Linguistics</em>, 7:452–466.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mallen et al. (2023)</span>
<span class="ltx_bibblock">
Alex Mallen, Akari Asai, Victor Zhong, Rajarshi Das, Daniel Khashabi, and Hannaneh Hajishirzi. 2023.

</span>
<span class="ltx_bibblock">When not to trust language models: Investigating effectiveness of parametric and non-parametric memories.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">ACL</em>, pages 9802–9822.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023a)</span>
<span class="ltx_bibblock">
OpenAI. 2023a.

</span>
<span class="ltx_bibblock">Chatgpt: Optimizing language models for dialogue.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023b)</span>
<span class="ltx_bibblock">
OpenAI. 2023b.

</span>
<span class="ltx_bibblock">GPT-4 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2303.08774</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rafailov et al. (2023)</span>
<span class="ltx_bibblock">
Rafael Rafailov, Archit Sharma, Eric Mitchell, Stefano Ermon, Christopher D Manning, and Chelsea Finn. 2023.

</span>
<span class="ltx_bibblock">Direct preference optimization: Your language model is secretly a reward model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:2305.18290</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ram et al. (2023)</span>
<span class="ltx_bibblock">
Ori Ram, Yoav Levine, Itay Dalmedigos, Dor Muhlgay, Amnon Shashua, Kevin Leyton-Brown, and Yoav Shoham. 2023.

</span>
<span class="ltx_bibblock">In-context retrieval-augmented language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">CoRR</em>, abs/2302.00083.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rawte et al. (2023)</span>
<span class="ltx_bibblock">
Vipula Rawte, Amit P. Sheth, and Amitava Das. 2023.

</span>
<span class="ltx_bibblock">A survey of hallucination in large foundation models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">CoRR</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Robertson and Zaragoza (2009)</span>
<span class="ltx_bibblock">
Stephen E. Robertson and Hugo Zaragoza. 2009.

</span>
<span class="ltx_bibblock">The probabilistic relevance framework: BM25 and beyond.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Found. Trends Inf. Retr.</em>, 3(4):333–389.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Rich James, Mike Lewis, Luke Zettlemoyer, and Wen-tau Yih. 2023.

</span>
<span class="ltx_bibblock">REPLUG: retrieval-augmented black-box language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">CoRR</em>, abs/2301.12652.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin R. Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, D. Bikel, Lukas Blecher, Cristian Cantón Ferrer, Moya Chen, Guillem Cucurull, David Esiobu, Jude Fernandes, Jeremy Fu, Wenyin Fu, Brian Fuller, Cynthia Gao, Vedanuj Goswami, Naman Goyal, A. Hartshorn, Saghar Hosseini, Rui Hou, Hakan Inan, Marcin Kardas, Viktor Kerkez, Madian Khabsa, Isabel M. Kloumann, A. Korenev, Punit Singh Koura, Marie-Anne Lachaux, Thibaut Lavril, Jenya Lee, Diana Liskovich, Yinghai Lu, Yuning Mao, Xavier Martinet, Todor Mihaylov, Pushkar Mishra, Igor Molybog, Yixin Nie, Andrew Poulton, Jeremy Reizenstein, Rashi Rungta, Kalyan Saladi, Alan Schelten, Ruan Silva, Eric Michael Smith, R. Subramanian, Xia Tan, Binh Tang, Ross Taylor, Adina Williams, Jian Xiang Kuan, Puxin Xu, Zhengxu Yan, Iliyan Zarov, Yuchen Zhang, Angela Fan, Melanie Kambadur, Sharan Narang, Aurelien Rodriguez, Robert Stojnic, Sergey Edunov, and Thomas Scialom. 2023.

</span>
<span class="ltx_bibblock">Llama: Open and efficient foundation language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2307.09288</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Maarten Bosma, Vincent Y. Zhao, Kelvin Guu, Adams Wei Yu, Brian Lester, Nan Du, Andrew M. Dai, and Quoc V. Le. 2022.

</span>
<span class="ltx_bibblock">Finetuned language models are zero-shot learners.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">ICLR</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023)</span>
<span class="ltx_bibblock">
Fangyuan Xu, Weijia Shi, and Eunsol Choi. 2023.

</span>
<span class="ltx_bibblock">RECOMP: improving retrieval-augmented lms with compression and selective augmentation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">CoRR</em>, abs/2310.04408.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2023)</span>
<span class="ltx_bibblock">
Wayne Xin Zhao, Kun Zhou, Junyi Li, Tianyi Tang, Xiaolei Wang, Yupeng Hou, Yingqian Min, Beichen Zhang, Junjie Zhang, Zican Dong, Yifan Du, Chen Yang, Yushuo Chen, Zhipeng Chen, Jinhao Jiang, Ruiyang Ren, Yifan Li, Xinyu Tang, Zikang Liu, Peiyu Liu, Jian-Yun Nie, and Ji-Rong Wen. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2303.18223" title="">A survey of large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2303.18223</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2023)</span>
<span class="ltx_bibblock">
Wenxuan Zhou, Sheng Zhang, Hoifung Poon, and Muhao Chen. 2023.

</span>
<span class="ltx_bibblock">Context-faithful prompting for large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">EMNLP Findings</em>, pages 14544–14556.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Appendix</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Prompt Template</h3>
<section class="ltx_subsubsection" id="A1.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.1 </span>Utility Model Training Prompt</h4>
<div class="ltx_para" id="A1.SS1.SSS1.p1">
<p class="ltx_p" id="A1.SS1.SSS1.p1.1">When training the utility model, we design different prompts so that an LLM can output its perplexity when i) answering the question with retrieved document; ii) answering the question directly. We present the prompts in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.T5" title="Table 5 ‣ A.1.1 Utility Model Training Prompt ‣ A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">5</span></a>.</p>
</div>
<div class="ltx_para" id="A1.SS1.SSS1.p2">
<span class="ltx_ERROR undefined" id="A1.SS1.SSS1.p2.1">{myverbbox}</span>
<p class="ltx_p" id="A1.SS1.SSS1.p2.2">[]<span class="ltx_ERROR undefined" id="A1.SS1.SSS1.p2.2.1">\VerbContentWithInfoD</span>
Please answer the question based on the given context. Question:
[question] The context related to the question is as follows:
[retrieved document]. Answer: [answer]

<span class="ltx_ERROR undefined" id="A1.SS1.SSS1.p2.2.2">{myverbbox}</span>[]<span class="ltx_ERROR undefined" id="A1.SS1.SSS1.p2.2.3">\VerbContentNoInfoD</span>
Please answer the question. Question: [question] Answer: [answer]</p>
</div>
<figure class="ltx_table" id="A1.T5">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Utility Model Training Prompt.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A1.T5.1" style="width:433.6pt;height:266.7pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(158.3pt,-97.4pt) scale(3.70438898422901,3.70438898422901) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A1.T5.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T5.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A1.T5.1.1.1.1.1">w/ retrieved document</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T5.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T5.1.1.2.1.1"><span class="ltx_ERROR undefined" id="A1.T5.1.1.2.1.1.1">\VerbContentWithInfoD</span></td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.1.3.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T5.1.1.3.2.1">w/o retrieved document</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.1.4.3">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="A1.T5.1.1.4.3.1"><span class="ltx_ERROR undefined" id="A1.T5.1.1.4.3.1.1">\VerbContentNoInfoD</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
</section>
<section class="ltx_subsubsection" id="A1.SS1.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.2 </span>Task-adaptive Summarizer Training and Inference Prompt</h4>
<div class="ltx_para" id="A1.SS1.SSS2.p1">
<p class="ltx_p" id="A1.SS1.SSS2.p1.1">To endow retrieval-augmented generation with compactness-oriented thought, we carefully train a task-adaptive summarizer for information integration and extraction, where we show the prompt in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.T6" title="Table 6 ‣ A.1.2 Task-adaptive Summarizer Training and Inference Prompt ‣ A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">6</span></a>.</p>
</div>
<div class="ltx_para" id="A1.SS1.SSS2.p2">
<span class="ltx_ERROR undefined" id="A1.SS1.SSS2.p2.1">{myverbbox}</span>
<p class="ltx_p" id="A1.SS1.SSS2.p2.2">[]<span class="ltx_ERROR undefined" id="A1.SS1.SSS2.p2.2.1">\VerbContentSummaryD</span>
Instruction:
You are an excellent summary generation robot. Given the following
question (Question) and texts (Docs), you need to summarize these
texts (Docs) into a concise abstract to adequately address the
corresponding question.
Question:
[question], [options if it is multiple-choice question]
Docs:
[retrieved documents]
Summary:</p>
</div>
<figure class="ltx_table" id="A1.T6">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Task-adaptive Summarizer Prompt.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A1.T6.1" style="width:433.6pt;height:400.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(207.1pt,-191.1pt) scale(22.2369054260994,22.2369054260994) ;">
<table class="ltx_tabular ltx_align_middle" id="A1.T6.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T6.1.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_tt" id="A1.T6.1.1.1.1.1"><span class="ltx_ERROR undefined" id="A1.T6.1.1.1.1.1.1">\VerbContentSummaryD</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
</section>
<section class="ltx_subsubsection" id="A1.SS1.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.3 </span>Knowledge-augmented Generation Prompt</h4>
<div class="ltx_para" id="A1.SS1.SSS3.p1">
<p class="ltx_p" id="A1.SS1.SSS3.p1.1">We show the prompt for generating the final answer in Table <a class="ltx_ref" href="https://arxiv.org/html/2405.19893v1#A1.T7" title="Table 7 ‣ A.1.3 Knowledge-augmented Generation Prompt ‣ A.1 Prompt Template ‣ Appendix A Appendix ‣ Similarity is Not All You Need: Endowing Retrieval-Augmented Generation with Multi–layered Thoughts"><span class="ltx_text ltx_ref_tag">7</span></a>.</p>
</div>
<div class="ltx_para" id="A1.SS1.SSS3.p2">
<span class="ltx_ERROR undefined" id="A1.SS1.SSS3.p2.1">{myverbbox}</span>
<p class="ltx_p" id="A1.SS1.SSS3.p2.2">[]<span class="ltx_ERROR undefined" id="A1.SS1.SSS3.p2.2.1">\VerbContentQAD</span>
Instruction:
You are an AI assistant for answering questions. Based on the given
question (Question) and the corresponding information (Info), please
provide the correct answer as concise as possible according to the
info and your commonsense.
Info:
[retrieved documents / summary]
Question:
[question]
Answer:
Please answer the question in the form of 2 or 3 words.</p>
</div>
<figure class="ltx_table" id="A1.T7">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Knowledge-augmented Generation Prompt.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A1.T7.1" style="width:433.6pt;height:400.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(207.1pt,-191.1pt) scale(22.2369054260994,22.2369054260994) ;">
<table class="ltx_tabular ltx_align_middle" id="A1.T7.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T7.1.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_tt" id="A1.T7.1.1.1.1.1"><span class="ltx_ERROR undefined" id="A1.T7.1.1.1.1.1.1">\VerbContentQAD</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu May 30 09:31:53 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
