<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Learning Retrieval Augmentation for Personalized Dialogue Generation</title>
<!--Generated on Thu Jun 27 02:31:51 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2406.18847v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S1" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S2" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S2.SS1" title="In 2 Related Work ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Personalized Dialogue Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S2.SS2" title="In 2 Related Work ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Retrieval-Augmented Text Generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Methodology</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS1" title="In 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Task Formulation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS2" title="In 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>The Architecture</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS2.SSS0.Px1" title="In 3.2 The Architecture ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title">Retriever</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS2.SSS0.Px2" title="In 3.2 The Architecture ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title">Generator</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3" title="In 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Training Process</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS1" title="In 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.1 </span>Supervised Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS2" title="In 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.2 </span>Learning Retrieval Augmentation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS3" title="In 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.3 </span>Retrieval Candidate Augmentation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS4" title="In 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.4 </span>Training Retrieval-Augmented Generator</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS5" title="In 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.5 </span>Retriever-Generator Joint Training</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS4" title="In 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Inference Process</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiment</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS1" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS2" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Retrieval Corpus</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS3" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Experimental Settings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS4" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Evaluation Metric</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS5" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.5 </span>Baseline</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.SS6" title="In 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.6 </span>Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Ablation Studies</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.SS1" title="In 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Analysis on Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.SS2" title="In 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Number of the Candidates</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.SS3" title="In 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>Candidate Augmentation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.SS4" title="In 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.4 </span>Training Strategy</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S6" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1" title="In Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Appendix</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS1" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Detail Settings for Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS2" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.2 </span>Query Analysis</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS3" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3 </span>Evaluation Results on CONVIAI2 Revised Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS4" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.4 </span>Case Study</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS5" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.5 </span>Comparison to Traditional Knowledge Dialogue Approaches</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS5.SSS1" title="In A.5 Comparison to Traditional Knowledge Dialogue Approaches ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.5.1 </span>ITDD Experimental Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS5.SSS2" title="In A.5 Comparison to Traditional Knowledge Dialogue Approaches ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.5.2 </span>Comparison Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS6" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.6 </span>Complete Training Procedure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS7" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.7 </span>Pre-process ROCStory Coprus</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS8" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.8 </span>Extended Evaluation Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS9" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.9 </span>Additional Related Work on Large Language Models (LLMs)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS10" title="In Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.10 </span>Human Evaluation</span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\useunder</span>
<p class="ltx_p" id="p1.2"><span class="ltx_text ltx_ulem_uline" id="p1.2.1"></span><span class="ltx_ERROR undefined" id="p1.2.2">\ul</span></p>
</div>
<h1 class="ltx_title ltx_title_document">Learning Retrieval Augmentation for Personalized Dialogue Generation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Qiushi Huang<sup class="ltx_sup" id="id1.1.id1">1,2</sup>, Shuai Fu<sup class="ltx_sup" id="id2.2.id2">2</sup>, Xubo Liu<sup class="ltx_sup" id="id3.3.id3">1</sup>,Wenwu Wang<sup class="ltx_sup" id="id4.4.id4">1</sup>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id5.5.id5">Tom Ko<sup class="ltx_sup" id="id5.5.id5.1"><span class="ltx_text ltx_font_medium" id="id5.5.id5.1.1">3</span></sup>, Yu Zhang<sup class="ltx_sup" id="id5.5.id5.2"><span class="ltx_text ltx_font_medium" id="id5.5.id5.2.1">2</span></sup> , Lilian Tang<sup class="ltx_sup" id="id5.5.id5.3"><span class="ltx_text ltx_font_medium" id="id5.5.id5.3.1">1*</span></sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id5.5.id5.4"><span class="ltx_text ltx_font_medium" id="id5.5.id5.4.1">1</span></sup>University of Surrey,
<sup class="ltx_sup" id="id5.5.id5.5"><span class="ltx_text ltx_font_medium" id="id5.5.id5.5.1">2</span></sup>Southern University of Science and Technology,
<sup class="ltx_sup" id="id5.5.id5.6"><span class="ltx_text ltx_font_medium" id="id5.5.id5.6.1">3</span></sup>ByteDance AI Lab
<br class="ltx_break"/>{qiushi.huang, xubo.liu, w.wang, h.tang}@surrey.ac.uk, 
<br class="ltx_break"/>{fus.akhasi, tomkocse, yu.zhang.ust}@gmail.com
</span>
</span><span class="ltx_author_notes"><span class="ltx_text ltx_font_bold" id="id6.6.id1">  Corresponding authors.</span></span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id7.id1">Personalized dialogue generation, focusing on generating highly tailored responses by leveraging persona profiles and dialogue context, has gained significant attention in conversational AI applications. However, persona profiles, a prevalent setting in current personalized dialogue datasets, typically composed of merely four to five sentences, may not offer comprehensive descriptions of the persona about the agent, posing a challenge to generate truly personalized dialogues. To handle this problem, we propose <span class="ltx_text ltx_font_bold" id="id7.id1.1">L</span>earning Retrieval <span class="ltx_text ltx_font_bold" id="id7.id1.2">A</span>ugmentation for <span class="ltx_text ltx_font_bold" id="id7.id1.3">P</span>ersonalized <span class="ltx_text ltx_font_bold" id="id7.id1.4">D</span>ial<span class="ltx_text ltx_font_bold" id="id7.id1.5">O</span>gue <span class="ltx_text ltx_font_bold" id="id7.id1.6">G</span>eneration (<span class="ltx_text ltx_font_bold" id="id7.id1.7">LAPDOG</span>), which studies the potential of leveraging external knowledge for persona dialogue generation. Specifically, the proposed LAPDOG model consists of a story retriever and a dialogue generator. The story retriever uses a given persona profile as queries to retrieve relevant information from the story document, which serves as a supplementary context to augment the persona profile. The dialogue generator utilizes both the dialogue history and the augmented persona profile to generate personalized responses. For optimization, we adopt a joint training framework that collaboratively learns the story retriever and dialogue generator, where the story retriever is optimized towards desired ultimate metrics (e.g., BLEU) to retrieve content for the dialogue generator to generate personalized responses. Experiments conducted on the CONVAI2 dataset with ROCStory as a supplementary data source show that the proposed LAPDOG method substantially outperforms the baselines, indicating the effectiveness of the proposed method.
The LAPDOG model code is publicly available for further exploration. <span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://github.com/hqsiswiliam/LAPDOG</span></span></span></p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Personalized dialogue generation <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib25" title="">2018</a>); Dinan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib4" title="">2019</a>)</cite>, which prompts an agent to generate consistent responses based on historical dialogue context and given persona profiles, has recently drawn substantial attention in many applications.
For instance, such an agent could effectively adapt to different roles such as a customer service representative by tailoring its responses to specific customer needs based on its persona and improving customer interaction and satisfaction. Besides, personalized responses can foster a sense of human-like interaction in social platforms, thereby enriching the user experience.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">The persona profiles contain background sentences describing the agent (e.g., <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">I like to go hunting.</span>) and play a crucial role in customizing the dialogue. Ideally, a persona profile should be as comprehensive as possible, containing diverse and detailed descriptions of an agent. However, these persona profiles, typically consisting of only four to five sentences, do not provide comprehensive descriptions for the persona of the agent. Such lack of depth and diversity in the persona descriptions impedes existing methods <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib13" title="">2020</a>); Song et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib23" title="">2021</a>); Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib5" title="">2022</a>)</cite> from generating highly personalized and contextually rich responses, though they have shown capabilities in producing grammatically correct and human-like responses.
In essence, those models are restricted by the static and limited persona profile. Hence, those models fail to dynamically incorporate more intensive extra personalized profiles when decoding the responses.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Though the given persona profile is limited, there are many external textual resources to describe personality and daily life circumstances. Hence, it is intuitive to ask: <em class="ltx_emph ltx_font_italic" id="S1.p3.1.1">can we use other related datasets to enrich the details of the persona profile?</em>
This key question has not been thoroughly explored in existing methods, which primarily rely on the persona profile and dialogue context alone.
An immediate issue is which types of external datasets could be used.
A promising source is story data since they encompass diverse life events, personality traits, motivations, and experiences, which can contribute to a more detailed and realistic persona. For example, given the persona sentence as "<span class="ltx_text ltx_font_italic" id="S1.p3.1.2">I like to work on vintage cars.</span>", potential retrieved stories’ titles can be "<span class="ltx_text ltx_font_italic" id="S1.p3.1.3">Antique Car Show</span>" and "<span class="ltx_text ltx_font_italic" id="S1.p3.1.4">Mechanic</span>", the details of the story content can be found in the appendix (Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T7" title="Table 7 ‣ A.3 Evaluation Results on CONVIAI2 Revised Dataset ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">7</span></a>). Furthermore, the clear and inherent structure in stories can enhance the consistency of the persona. In this work, we choose story data to facilitate the generation of more engaging and contextually meaningful dialogues.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">Given the external knowledge (e.g., story data), how to infuse it into the process of personalized dialogue generation straightforwardly remains challenging. The first hurdle is the lack of explicit annotations for retrieval, which are the key to selecting relevant and helpful content to augment persona profiles. In addition, the criterion for assessing the efficacy of these contents remains unclear. For instance, retrieval-augmented generation (RAG) <cite class="ltx_cite ltx_citemacro_cite">Lewis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib10" title="">2020</a>)</cite> is based on predicted probability distribution, which may not directly align with the objective of generating personalized responses. Moreover, simply tuning dense retriever <cite class="ltx_cite ltx_citemacro_cite">Karpukhin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib9" title="">2020</a>)</cite> in a RAG’s paradigm may result in suboptimal retrieval outcomes as the retriever is inclined to consistently select similar passages for all queries, which may impede the further expansion of the persona profile details.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">In this paper, we give the first try to utilize the story data as external knowledge for the personalized dialogue generation task and propose a <span class="ltx_text ltx_font_bold" id="S1.p5.1.1">L</span>earning Retrieval <span class="ltx_text ltx_font_bold" id="S1.p5.1.2">A</span>ugmentation for <span class="ltx_text ltx_font_bold" id="S1.p5.1.3">P</span>ersonalized <span class="ltx_text ltx_font_bold" id="S1.p5.1.4">D</span>ial<span class="ltx_text ltx_font_bold" id="S1.p5.1.5">O</span>gue <span class="ltx_text ltx_font_bold" id="S1.p5.1.6">G</span>eneration (<span class="ltx_text ltx_font_bold" id="S1.p5.1.7">LAPDOG</span>) framework. Specifically, the proposed model LAPDOG, consisting of a retriever to retrieve helpful information to enrich the persona and a generator to generate dialogues, is an end-to-end learnable retrieval methodology for integrating additional contextual information into personalized dialogue generation.
LAPDOG utilizes non-differentiable metrics (e.g., BLEU, F1, and ROUGE-L) to guide the training of the retriever by aligning the retriever scores to these desired metrics, thereby facilitating the generation of relevant and diverse personalized responses. To ensure diversity in the retrieval process, we design a retrieval candidate augmentation during training, which prevents consistently selecting similar passages for all queries and provides a broader range of contextual inputs for the dialogue generator. In addition to the retrieved content, the persona information and dialogue context are also integrated into the dialogue generator. Furthermore, LAPDOG adopts a cooperative framework wherein the retriever and generator are jointly trained. This process enables LAPDOG to generate personalized responses that are coherent, contextually rich, and in line with the persona of the agent. Unlike other retrieval models <cite class="ltx_cite ltx_citemacro_cite">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib27" title="">2022</a>); Santhanam et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib20" title="">2022</a>)</cite> that rely on annotated retrieval datasets, our method retrieves the supplementary context in an end-to-end, unsupervised manner, which can be seamlessly extended to other suitable text sources.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">We conduct experiments on the CONVAI2 dataset <cite class="ltx_cite ltx_citemacro_cite">Dinan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib4" title="">2019</a>)</cite>, which is widely recognized and extensively studied in the field of personalized dialogue generation <cite class="ltx_cite ltx_citemacro_cite">Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib5" title="">2022</a>); Song et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib23" title="">2021</a>); Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib13" title="">2020</a>)</cite>, and the ROCStory dataset <cite class="ltx_cite ltx_citemacro_cite">Mostafazadeh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib14" title="">2016</a>)</cite> acts as external knowledge.
Experiments demonstrate the positive impact of learnable retrieval augmentation on performance. Quantitatively, the proposed LAPDOG method consistently yields improvements over the baseline models with varying model sizes. Moreover, the retrieved contents offer insights into the rationale behind the generation ability of the generator.
Comprehensive ablation studies demonstrate that joint objective guidance outperforms each individual objective and provides insights into the size of retrieval candidates and the use of different metrics.</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">Overall, our contributions can be summarized as follows.</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We present a novel LAPDOG model for personalized dialogue generation to retrieve relevant contents in external knowledge to the persona using the non-differentiable objective.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We introduce candidate augmentation as a means to enhance learning retrieval augmentation, resulting in improved performance and increased diversity of candidate selections during the inference process.
</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">The proposed LAPDOG framework significantly enhances the performance over baselines, showing promising potential for learnable retrieval augmentation on personalized dialogue generation. Our code and pre-trained model will be open-sourced.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Personalized Dialogue Generation</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">Based on the PersonaChat dataset <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib25" title="">2018</a>)</cite>, <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib4" title="">Dinan et al.</a></cite> curate the CONVAI2 dataset, which contains a brief persona with four to five sentences for each interlocutor.
This unique dataset has become a standard benchmark for the personalized dialogue generation task and built on this dataset, there are numerous studies, each of which approaches personalized dialogue generation from diverse perspectives. For example, <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib24" title="">Wolf et al.</a></cite> proposes a fine-tuning model based on the GPT2 model <cite class="ltx_cite ltx_citemacro_cite">Radford et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib18" title="">2019</a>)</cite>. <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib23" title="">Song et al.</a></cite> integrates three BERT models <cite class="ltx_cite ltx_citemacro_cite">Devlin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib3" title="">2019</a>)</cite> via reinforcement learning to generate responses. <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib13" title="">Liu et al.</a></cite> propose a transmitter and receiver model, which utilizes reinforcement learning with manually designed rewards for further refinement, for the personalized dialogue generation task.<cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib2" title="">Cao et al.</a></cite> adopt model-agnostic data augmentation to use language models, such as GPT2 and BERT <cite class="ltx_cite ltx_citemacro_cite">Devlin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib3" title="">2019</a>)</cite>, to augment the training set with pseudo training data. <cite class="ltx_cite ltx_citemacro_citeauthor"><a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib5" title="">Huang et al.</a></cite> devise an adaptive attention mechanism to integrate information from persona and context encoders seamlessly. In contrast to the aforementioned models, the proposed LAPDOG method introduces an end-to-end dense retriever framework to simultaneously augment the input of the generator from external data source and tune the retriever.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Retrieval-Augmented Text Generation</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">There are some works to incorporate retrievers into their respective models via different integration strategies to enhance text generation tasks. For instance, DocPrompting <cite class="ltx_cite ltx_citemacro_cite">Zhou et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib27" title="">2022</a>)</cite> curated a retrieval annotation dataset to train a retriever to retrieve and do input augmentation for code generation. Toolformer <cite class="ltx_cite ltx_citemacro_cite">Schick et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib21" title="">2023</a>)</cite> bootstraps retrieval-annotated data, which performs fine-tuning on language models for the retrieval-augmentation ability. FLARE <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib8" title="">2023</a>)</cite> extends the Toolformer to large language models such as <cite class="ltx_cite ltx_citemacro_cite">Ouyang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib15" title="">2022</a>)</cite> with special-designed prompts. RePlug <cite class="ltx_cite ltx_citemacro_cite">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib22" title="">2023</a>)</cite> further refines the retriever by distilling the knowledge from the language model’s probability. RAG <cite class="ltx_cite ltx_citemacro_cite">Lewis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib10" title="">2020</a>)</cite> jointly trains the retriever and language model, which updates the retriever by the language model’s probability. Different from those models, the proposed LAPDOG model is designed specifically for personalized dialogue generation with a focus on optimizing desired objectives rather than the language model’s probability distribution. Since RePlug, Toolformer, and FLARE are based on large language models or their API calls, we do not include them in the comparison to LAPDOG. Compared with other models, we do not rely on retrieval annotations or bootstrapped retrieval annotations. The training objectives are directly computed from a comparison between the generated text and ground truth, rather than relying on training probabilities that are not always aligned with the desired metrics. Additionally, we introduce a candidate augmentation to avoid the limitations of a confined candidate set. This broadens the scope of potential dialogues and better captures the richness and diversity of an agent’s persona.</p>
</div>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="374" id="S2.F1.g1" src="x1.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>An illustration of the two-stage training process in the proposed LAPDOG model. </figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methodology</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">In this section, we introduce the proposed LAPDOG model.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Task Formulation</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.14">In a persona-based conversation session denoted by <math alttext="C=\{P,U\}" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.2"><semantics id="S3.SS1.p1.1.m1.2a"><mrow id="S3.SS1.p1.1.m1.2.3" xref="S3.SS1.p1.1.m1.2.3.cmml"><mi id="S3.SS1.p1.1.m1.2.3.2" xref="S3.SS1.p1.1.m1.2.3.2.cmml">C</mi><mo id="S3.SS1.p1.1.m1.2.3.1" xref="S3.SS1.p1.1.m1.2.3.1.cmml">=</mo><mrow id="S3.SS1.p1.1.m1.2.3.3.2" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml"><mo id="S3.SS1.p1.1.m1.2.3.3.2.1" stretchy="false" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">{</mo><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">P</mi><mo id="S3.SS1.p1.1.m1.2.3.3.2.2" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">,</mo><mi id="S3.SS1.p1.1.m1.2.2" xref="S3.SS1.p1.1.m1.2.2.cmml">U</mi><mo id="S3.SS1.p1.1.m1.2.3.3.2.3" stretchy="false" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.2b"><apply id="S3.SS1.p1.1.m1.2.3.cmml" xref="S3.SS1.p1.1.m1.2.3"><eq id="S3.SS1.p1.1.m1.2.3.1.cmml" xref="S3.SS1.p1.1.m1.2.3.1"></eq><ci id="S3.SS1.p1.1.m1.2.3.2.cmml" xref="S3.SS1.p1.1.m1.2.3.2">𝐶</ci><set id="S3.SS1.p1.1.m1.2.3.3.1.cmml" xref="S3.SS1.p1.1.m1.2.3.3.2"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝑃</ci><ci id="S3.SS1.p1.1.m1.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2">𝑈</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.2c">C=\{P,U\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.2d">italic_C = { italic_P , italic_U }</annotation></semantics></math>, the persona <math alttext="P=\{p_{1},\ldots,p_{e}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.3"><semantics id="S3.SS1.p1.2.m2.3a"><mrow id="S3.SS1.p1.2.m2.3.3" xref="S3.SS1.p1.2.m2.3.3.cmml"><mi id="S3.SS1.p1.2.m2.3.3.4" xref="S3.SS1.p1.2.m2.3.3.4.cmml">P</mi><mo id="S3.SS1.p1.2.m2.3.3.3" xref="S3.SS1.p1.2.m2.3.3.3.cmml">=</mo><mrow id="S3.SS1.p1.2.m2.3.3.2.2" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml"><mo id="S3.SS1.p1.2.m2.3.3.2.2.3" stretchy="false" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">{</mo><msub id="S3.SS1.p1.2.m2.2.2.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.2.m2.2.2.1.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml">p</mi><mn id="S3.SS1.p1.2.m2.2.2.1.1.1.3" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.2.m2.3.3.2.2.4" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">,</mo><mi id="S3.SS1.p1.2.m2.1.1" mathvariant="normal" xref="S3.SS1.p1.2.m2.1.1.cmml">…</mi><mo id="S3.SS1.p1.2.m2.3.3.2.2.5" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">,</mo><msub id="S3.SS1.p1.2.m2.3.3.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.cmml">p</mi><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml">e</mi></msub><mo id="S3.SS1.p1.2.m2.3.3.2.2.6" stretchy="false" xref="S3.SS1.p1.2.m2.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.3b"><apply id="S3.SS1.p1.2.m2.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3"><eq id="S3.SS1.p1.2.m2.3.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3.3"></eq><ci id="S3.SS1.p1.2.m2.3.3.4.cmml" xref="S3.SS1.p1.2.m2.3.3.4">𝑃</ci><set id="S3.SS1.p1.2.m2.3.3.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><apply id="S3.SS1.p1.2.m2.2.2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2">𝑝</ci><cn id="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3">1</cn></apply><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">…</ci><apply id="S3.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2">𝑝</ci><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3">𝑒</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.3c">P=\{p_{1},\ldots,p_{e}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.3d">italic_P = { italic_p start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_p start_POSTSUBSCRIPT italic_e end_POSTSUBSCRIPT }</annotation></semantics></math> consists of <math alttext="e" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><mi id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">e</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">𝑒</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">e</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">italic_e</annotation></semantics></math> profile sentences providing background information about a machine interlocutor <math alttext="m" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><mi id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><ci id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">m</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">italic_m</annotation></semantics></math> and the dialogue context <math alttext="U=\{u_{h,1},u_{m,1},...,u_{h,n}\}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m5.10"><semantics id="S3.SS1.p1.5.m5.10a"><mrow id="S3.SS1.p1.5.m5.10.10" xref="S3.SS1.p1.5.m5.10.10.cmml"><mi id="S3.SS1.p1.5.m5.10.10.5" xref="S3.SS1.p1.5.m5.10.10.5.cmml">U</mi><mo id="S3.SS1.p1.5.m5.10.10.4" xref="S3.SS1.p1.5.m5.10.10.4.cmml">=</mo><mrow id="S3.SS1.p1.5.m5.10.10.3.3" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml"><mo id="S3.SS1.p1.5.m5.10.10.3.3.4" stretchy="false" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml">{</mo><msub id="S3.SS1.p1.5.m5.8.8.1.1.1" xref="S3.SS1.p1.5.m5.8.8.1.1.1.cmml"><mi id="S3.SS1.p1.5.m5.8.8.1.1.1.2" xref="S3.SS1.p1.5.m5.8.8.1.1.1.2.cmml">u</mi><mrow id="S3.SS1.p1.5.m5.2.2.2.4" xref="S3.SS1.p1.5.m5.2.2.2.3.cmml"><mi id="S3.SS1.p1.5.m5.1.1.1.1" xref="S3.SS1.p1.5.m5.1.1.1.1.cmml">h</mi><mo id="S3.SS1.p1.5.m5.2.2.2.4.1" xref="S3.SS1.p1.5.m5.2.2.2.3.cmml">,</mo><mn id="S3.SS1.p1.5.m5.2.2.2.2" xref="S3.SS1.p1.5.m5.2.2.2.2.cmml">1</mn></mrow></msub><mo id="S3.SS1.p1.5.m5.10.10.3.3.5" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml">,</mo><msub id="S3.SS1.p1.5.m5.9.9.2.2.2" xref="S3.SS1.p1.5.m5.9.9.2.2.2.cmml"><mi id="S3.SS1.p1.5.m5.9.9.2.2.2.2" xref="S3.SS1.p1.5.m5.9.9.2.2.2.2.cmml">u</mi><mrow id="S3.SS1.p1.5.m5.4.4.2.4" xref="S3.SS1.p1.5.m5.4.4.2.3.cmml"><mi id="S3.SS1.p1.5.m5.3.3.1.1" xref="S3.SS1.p1.5.m5.3.3.1.1.cmml">m</mi><mo id="S3.SS1.p1.5.m5.4.4.2.4.1" xref="S3.SS1.p1.5.m5.4.4.2.3.cmml">,</mo><mn id="S3.SS1.p1.5.m5.4.4.2.2" xref="S3.SS1.p1.5.m5.4.4.2.2.cmml">1</mn></mrow></msub><mo id="S3.SS1.p1.5.m5.10.10.3.3.6" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml">,</mo><mi id="S3.SS1.p1.5.m5.7.7" mathvariant="normal" xref="S3.SS1.p1.5.m5.7.7.cmml">…</mi><mo id="S3.SS1.p1.5.m5.10.10.3.3.7" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml">,</mo><msub id="S3.SS1.p1.5.m5.10.10.3.3.3" xref="S3.SS1.p1.5.m5.10.10.3.3.3.cmml"><mi id="S3.SS1.p1.5.m5.10.10.3.3.3.2" xref="S3.SS1.p1.5.m5.10.10.3.3.3.2.cmml">u</mi><mrow id="S3.SS1.p1.5.m5.6.6.2.4" xref="S3.SS1.p1.5.m5.6.6.2.3.cmml"><mi id="S3.SS1.p1.5.m5.5.5.1.1" xref="S3.SS1.p1.5.m5.5.5.1.1.cmml">h</mi><mo id="S3.SS1.p1.5.m5.6.6.2.4.1" xref="S3.SS1.p1.5.m5.6.6.2.3.cmml">,</mo><mi id="S3.SS1.p1.5.m5.6.6.2.2" xref="S3.SS1.p1.5.m5.6.6.2.2.cmml">n</mi></mrow></msub><mo id="S3.SS1.p1.5.m5.10.10.3.3.8" stretchy="false" xref="S3.SS1.p1.5.m5.10.10.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.10b"><apply id="S3.SS1.p1.5.m5.10.10.cmml" xref="S3.SS1.p1.5.m5.10.10"><eq id="S3.SS1.p1.5.m5.10.10.4.cmml" xref="S3.SS1.p1.5.m5.10.10.4"></eq><ci id="S3.SS1.p1.5.m5.10.10.5.cmml" xref="S3.SS1.p1.5.m5.10.10.5">𝑈</ci><set id="S3.SS1.p1.5.m5.10.10.3.4.cmml" xref="S3.SS1.p1.5.m5.10.10.3.3"><apply id="S3.SS1.p1.5.m5.8.8.1.1.1.cmml" xref="S3.SS1.p1.5.m5.8.8.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.8.8.1.1.1.1.cmml" xref="S3.SS1.p1.5.m5.8.8.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m5.8.8.1.1.1.2.cmml" xref="S3.SS1.p1.5.m5.8.8.1.1.1.2">𝑢</ci><list id="S3.SS1.p1.5.m5.2.2.2.3.cmml" xref="S3.SS1.p1.5.m5.2.2.2.4"><ci id="S3.SS1.p1.5.m5.1.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1">ℎ</ci><cn id="S3.SS1.p1.5.m5.2.2.2.2.cmml" type="integer" xref="S3.SS1.p1.5.m5.2.2.2.2">1</cn></list></apply><apply id="S3.SS1.p1.5.m5.9.9.2.2.2.cmml" xref="S3.SS1.p1.5.m5.9.9.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.9.9.2.2.2.1.cmml" xref="S3.SS1.p1.5.m5.9.9.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.5.m5.9.9.2.2.2.2.cmml" xref="S3.SS1.p1.5.m5.9.9.2.2.2.2">𝑢</ci><list id="S3.SS1.p1.5.m5.4.4.2.3.cmml" xref="S3.SS1.p1.5.m5.4.4.2.4"><ci id="S3.SS1.p1.5.m5.3.3.1.1.cmml" xref="S3.SS1.p1.5.m5.3.3.1.1">𝑚</ci><cn id="S3.SS1.p1.5.m5.4.4.2.2.cmml" type="integer" xref="S3.SS1.p1.5.m5.4.4.2.2">1</cn></list></apply><ci id="S3.SS1.p1.5.m5.7.7.cmml" xref="S3.SS1.p1.5.m5.7.7">…</ci><apply id="S3.SS1.p1.5.m5.10.10.3.3.3.cmml" xref="S3.SS1.p1.5.m5.10.10.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.10.10.3.3.3.1.cmml" xref="S3.SS1.p1.5.m5.10.10.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.5.m5.10.10.3.3.3.2.cmml" xref="S3.SS1.p1.5.m5.10.10.3.3.3.2">𝑢</ci><list id="S3.SS1.p1.5.m5.6.6.2.3.cmml" xref="S3.SS1.p1.5.m5.6.6.2.4"><ci id="S3.SS1.p1.5.m5.5.5.1.1.cmml" xref="S3.SS1.p1.5.m5.5.5.1.1">ℎ</ci><ci id="S3.SS1.p1.5.m5.6.6.2.2.cmml" xref="S3.SS1.p1.5.m5.6.6.2.2">𝑛</ci></list></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.10c">U=\{u_{h,1},u_{m,1},...,u_{h,n}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m5.10d">italic_U = { italic_u start_POSTSUBSCRIPT italic_h , 1 end_POSTSUBSCRIPT , italic_u start_POSTSUBSCRIPT italic_m , 1 end_POSTSUBSCRIPT , … , italic_u start_POSTSUBSCRIPT italic_h , italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> encompasses the exchange of utterances between a human interlocutor <math alttext="h" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m6.1"><semantics id="S3.SS1.p1.6.m6.1a"><mi id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><ci id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">h</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m6.1d">italic_h</annotation></semantics></math> and the machine interlocutor <math alttext="m" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m7.1"><semantics id="S3.SS1.p1.7.m7.1a"><mi id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><ci id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">m</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m7.1d">italic_m</annotation></semantics></math>. In the task of persona-based dialogue generation, the persona <math alttext="P" class="ltx_Math" display="inline" id="S3.SS1.p1.8.m8.1"><semantics id="S3.SS1.p1.8.m8.1a"><mi id="S3.SS1.p1.8.m8.1.1" xref="S3.SS1.p1.8.m8.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.8.m8.1b"><ci id="S3.SS1.p1.8.m8.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m8.1c">P</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.8.m8.1d">italic_P</annotation></semantics></math> is used to characterize the machine interlocutor <math alttext="m" class="ltx_Math" display="inline" id="S3.SS1.p1.9.m9.1"><semantics id="S3.SS1.p1.9.m9.1a"><mi id="S3.SS1.p1.9.m9.1.1" xref="S3.SS1.p1.9.m9.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m9.1b"><ci id="S3.SS1.p1.9.m9.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m9.1c">m</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.9.m9.1d">italic_m</annotation></semantics></math>, but it contains only four to five sentences, i.e., <math alttext="4\leq e\leq 5" class="ltx_Math" display="inline" id="S3.SS1.p1.10.m10.1"><semantics id="S3.SS1.p1.10.m10.1a"><mrow id="S3.SS1.p1.10.m10.1.1" xref="S3.SS1.p1.10.m10.1.1.cmml"><mn id="S3.SS1.p1.10.m10.1.1.2" xref="S3.SS1.p1.10.m10.1.1.2.cmml">4</mn><mo id="S3.SS1.p1.10.m10.1.1.3" xref="S3.SS1.p1.10.m10.1.1.3.cmml">≤</mo><mi id="S3.SS1.p1.10.m10.1.1.4" xref="S3.SS1.p1.10.m10.1.1.4.cmml">e</mi><mo id="S3.SS1.p1.10.m10.1.1.5" xref="S3.SS1.p1.10.m10.1.1.5.cmml">≤</mo><mn id="S3.SS1.p1.10.m10.1.1.6" xref="S3.SS1.p1.10.m10.1.1.6.cmml">5</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.10.m10.1b"><apply id="S3.SS1.p1.10.m10.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1"><and id="S3.SS1.p1.10.m10.1.1a.cmml" xref="S3.SS1.p1.10.m10.1.1"></and><apply id="S3.SS1.p1.10.m10.1.1b.cmml" xref="S3.SS1.p1.10.m10.1.1"><leq id="S3.SS1.p1.10.m10.1.1.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3"></leq><cn id="S3.SS1.p1.10.m10.1.1.2.cmml" type="integer" xref="S3.SS1.p1.10.m10.1.1.2">4</cn><ci id="S3.SS1.p1.10.m10.1.1.4.cmml" xref="S3.SS1.p1.10.m10.1.1.4">𝑒</ci></apply><apply id="S3.SS1.p1.10.m10.1.1c.cmml" xref="S3.SS1.p1.10.m10.1.1"><leq id="S3.SS1.p1.10.m10.1.1.5.cmml" xref="S3.SS1.p1.10.m10.1.1.5"></leq><share href="https://arxiv.org/html/2406.18847v1#S3.SS1.p1.10.m10.1.1.4.cmml" id="S3.SS1.p1.10.m10.1.1d.cmml" xref="S3.SS1.p1.10.m10.1.1"></share><cn id="S3.SS1.p1.10.m10.1.1.6.cmml" type="integer" xref="S3.SS1.p1.10.m10.1.1.6">5</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.10.m10.1c">4\leq e\leq 5</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.10.m10.1d">4 ≤ italic_e ≤ 5</annotation></semantics></math>. The conversation always starts by the human interlocutor <math alttext="h" class="ltx_Math" display="inline" id="S3.SS1.p1.11.m11.1"><semantics id="S3.SS1.p1.11.m11.1a"><mi id="S3.SS1.p1.11.m11.1.1" xref="S3.SS1.p1.11.m11.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.11.m11.1b"><ci id="S3.SS1.p1.11.m11.1.1.cmml" xref="S3.SS1.p1.11.m11.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.11.m11.1c">h</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.11.m11.1d">italic_h</annotation></semantics></math>. The primary objective of this task is to generate the response <math alttext="r=u_{m,n}" class="ltx_Math" display="inline" id="S3.SS1.p1.12.m12.2"><semantics id="S3.SS1.p1.12.m12.2a"><mrow id="S3.SS1.p1.12.m12.2.3" xref="S3.SS1.p1.12.m12.2.3.cmml"><mi id="S3.SS1.p1.12.m12.2.3.2" xref="S3.SS1.p1.12.m12.2.3.2.cmml">r</mi><mo id="S3.SS1.p1.12.m12.2.3.1" xref="S3.SS1.p1.12.m12.2.3.1.cmml">=</mo><msub id="S3.SS1.p1.12.m12.2.3.3" xref="S3.SS1.p1.12.m12.2.3.3.cmml"><mi id="S3.SS1.p1.12.m12.2.3.3.2" xref="S3.SS1.p1.12.m12.2.3.3.2.cmml">u</mi><mrow id="S3.SS1.p1.12.m12.2.2.2.4" xref="S3.SS1.p1.12.m12.2.2.2.3.cmml"><mi id="S3.SS1.p1.12.m12.1.1.1.1" xref="S3.SS1.p1.12.m12.1.1.1.1.cmml">m</mi><mo id="S3.SS1.p1.12.m12.2.2.2.4.1" xref="S3.SS1.p1.12.m12.2.2.2.3.cmml">,</mo><mi id="S3.SS1.p1.12.m12.2.2.2.2" xref="S3.SS1.p1.12.m12.2.2.2.2.cmml">n</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.12.m12.2b"><apply id="S3.SS1.p1.12.m12.2.3.cmml" xref="S3.SS1.p1.12.m12.2.3"><eq id="S3.SS1.p1.12.m12.2.3.1.cmml" xref="S3.SS1.p1.12.m12.2.3.1"></eq><ci id="S3.SS1.p1.12.m12.2.3.2.cmml" xref="S3.SS1.p1.12.m12.2.3.2">𝑟</ci><apply id="S3.SS1.p1.12.m12.2.3.3.cmml" xref="S3.SS1.p1.12.m12.2.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.2.3.3.1.cmml" xref="S3.SS1.p1.12.m12.2.3.3">subscript</csymbol><ci id="S3.SS1.p1.12.m12.2.3.3.2.cmml" xref="S3.SS1.p1.12.m12.2.3.3.2">𝑢</ci><list id="S3.SS1.p1.12.m12.2.2.2.3.cmml" xref="S3.SS1.p1.12.m12.2.2.2.4"><ci id="S3.SS1.p1.12.m12.1.1.1.1.cmml" xref="S3.SS1.p1.12.m12.1.1.1.1">𝑚</ci><ci id="S3.SS1.p1.12.m12.2.2.2.2.cmml" xref="S3.SS1.p1.12.m12.2.2.2.2">𝑛</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.12.m12.2c">r=u_{m,n}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.12.m12.2d">italic_r = italic_u start_POSTSUBSCRIPT italic_m , italic_n end_POSTSUBSCRIPT</annotation></semantics></math> based on the given persona <math alttext="P" class="ltx_Math" display="inline" id="S3.SS1.p1.13.m13.1"><semantics id="S3.SS1.p1.13.m13.1a"><mi id="S3.SS1.p1.13.m13.1.1" xref="S3.SS1.p1.13.m13.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.13.m13.1b"><ci id="S3.SS1.p1.13.m13.1.1.cmml" xref="S3.SS1.p1.13.m13.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.13.m13.1c">P</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.13.m13.1d">italic_P</annotation></semantics></math> and dialogue context <math alttext="U" class="ltx_Math" display="inline" id="S3.SS1.p1.14.m14.1"><semantics id="S3.SS1.p1.14.m14.1a"><mi id="S3.SS1.p1.14.m14.1.1" xref="S3.SS1.p1.14.m14.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.14.m14.1b"><ci id="S3.SS1.p1.14.m14.1.1.cmml" xref="S3.SS1.p1.14.m14.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.14.m14.1c">U</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.14.m14.1d">italic_U</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.4">The persona <math alttext="P" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">P</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">italic_P</annotation></semantics></math> is short and hence cannot give a full characterization for the background information. To enrich the persona, we utilize a retrieval corpus <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">caligraphic_D</annotation></semantics></math> consisting of stories from a story dataset (e.g., ROCStory <cite class="ltx_cite ltx_citemacro_cite">Mostafazadeh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib14" title="">2016</a>)</cite>).
Note that there is no explicit annotation between <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><ci id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">caligraphic_D</annotation></semantics></math> and <math alttext="P" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.1"><semantics id="S3.SS1.p2.4.m4.1a"><mi id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><ci id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">P</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.1d">italic_P</annotation></semantics></math>, necessitating an alternative approach to evaluate the usefulness of the retrieval content.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>The Architecture</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S2.F1" title="Figure 1 ‣ 2.2 Retrieval-Augmented Text Generation ‣ 2 Related Work ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">1</span></a>, the architecture of the LAPDOG model consists of a generator, which adopts a transformer-based encoder-decoder structure, to generate dialogues and a dual-encoder retriever to efficiently obtain relevant information from an external story corpus.</p>
</div>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Retriever</h5>
<div class="ltx_para" id="S3.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px1.p1.1">Based on <cite class="ltx_cite ltx_citemacro_cite">Karpukhin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib9" title="">2020</a>)</cite>, the retriever adopts a transformer-based encoder to embed the query and the story corpus, respectively.
The retriever then calculates the dot product similarity score between the query and each story via their average pooled embeddings. Stories with the <math alttext="K" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S3.SS2.SSS0.Px1.p1.1.m1.1a"><mi id="S3.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.1.m1.1b"><ci id="S3.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.1.m1.1d">italic_K</annotation></semantics></math> highest similarity scores are retrieved.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Generator</h5>
<div class="ltx_para" id="S3.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px2.p1.1">The generator takes a transformer-based encoder-decoder architecture to generate the response from the persona, dialogue history, and retrieved contents. To integrate the retrieved contents with the persona and dialogue history, we leverage the Fusion-in-Decoder (FiD) technique <cite class="ltx_cite ltx_citemacro_cite">Izacard and Grave (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib7" title="">2021</a>)</cite>. Specifically, each retrieved story is combined with the persona and context and individually encoded. The resulting encoded contexts are concatenated and cross-attended in the decoder to generate the final response.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Training Process</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">It is straightforward to directly train the generator and retriever using the generator’s probability distribution in a way similar to the RAG method. However, this strategy does not work well since the retriever would trap into a fixed candidate set and the predicted probability distribution is not always aligned with the desired objectives in the personalized dialogue generation task. Hence, as depicted in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S2.F1" title="Figure 1 ‣ 2.2 Retrieval-Augmented Text Generation ‣ 2 Related Work ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">1</span></a>, the LAPDOG model adopts a two-stage training procedure.
In the first stage, the training process starts with supervised training for the generator (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS1" title="3.3.1 Supervised Training ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.1</span></a>).
In the second stage, the framework starts to tune the retriever and learn the retrieval augmentation jointly. To learn retrieval augmentation (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS2" title="3.3.2 Learning Retrieval Augmentation ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.2</span></a>), the retriever’s loss is computed from the evaluation metrics between the output of the generator and the ground truth. During the process of learning retrieval augmentation, to prevent the retriever from stagnating around a limited set of candidates, we design the retrieval candidate augmentation (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS3" title="3.3.3 Retrieval Candidate Augmentation ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.3</span></a>), a method ensuring diversity in the retrieval process. Afterward, we enrich the input of the generator with retrieval-enhanced data and compute a generator loss based on the augmented input (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS4" title="3.3.4 Training Retrieval-Augmented Generator ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.4</span></a>). Finally, we combine losses from both the generator and retriever to jointly train the two components (refer to Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS5" title="3.3.5 Retriever-Generator Joint Training ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.5</span></a>).
In the following sections, we introduce each part in detail.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS3.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.1 </span>Supervised Training</h4>
<div class="ltx_para" id="S3.SS3.SSS1.p1">
<p class="ltx_p" id="S3.SS3.SSS1.p1.3">First, we train a generator that accepts persona <math alttext="P" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.1.m1.1"><semantics id="S3.SS3.SSS1.p1.1.m1.1a"><mi id="S3.SS3.SSS1.p1.1.m1.1.1" xref="S3.SS3.SSS1.p1.1.m1.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.1.m1.1b"><ci id="S3.SS3.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS1.p1.1.m1.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.1.m1.1c">P</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.1.m1.1d">italic_P</annotation></semantics></math> and context <math alttext="U" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.2.m2.1"><semantics id="S3.SS3.SSS1.p1.2.m2.1a"><mi id="S3.SS3.SSS1.p1.2.m2.1.1" xref="S3.SS3.SSS1.p1.2.m2.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.2.m2.1b"><ci id="S3.SS3.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS1.p1.2.m2.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.2.m2.1c">U</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.2.m2.1d">italic_U</annotation></semantics></math> as input, and the ground-truth response <math alttext="r" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.3.m3.1"><semantics id="S3.SS3.SSS1.p1.3.m3.1a"><mi id="S3.SS3.SSS1.p1.3.m3.1.1" xref="S3.SS3.SSS1.p1.3.m3.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.3.m3.1b"><ci id="S3.SS3.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS1.p1.3.m3.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.3.m3.1c">r</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.3.m3.1d">italic_r</annotation></semantics></math> as the target without involving any retrieval results. Hence, this stage is to minimize the negative log-likelihood, which is formulated as</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E1">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E1X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\mathcal{L}_{NLL}" class="ltx_Math" display="inline" id="S3.E1X.2.1.1.m1.1"><semantics id="S3.E1X.2.1.1.m1.1a"><msub id="S3.E1X.2.1.1.m1.1.1" xref="S3.E1X.2.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1X.2.1.1.m1.1.1.2" xref="S3.E1X.2.1.1.m1.1.1.2.cmml">ℒ</mi><mrow id="S3.E1X.2.1.1.m1.1.1.3" xref="S3.E1X.2.1.1.m1.1.1.3.cmml"><mi id="S3.E1X.2.1.1.m1.1.1.3.2" xref="S3.E1X.2.1.1.m1.1.1.3.2.cmml">N</mi><mo id="S3.E1X.2.1.1.m1.1.1.3.1" xref="S3.E1X.2.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.E1X.2.1.1.m1.1.1.3.3" xref="S3.E1X.2.1.1.m1.1.1.3.3.cmml">L</mi><mo id="S3.E1X.2.1.1.m1.1.1.3.1a" xref="S3.E1X.2.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.E1X.2.1.1.m1.1.1.3.4" xref="S3.E1X.2.1.1.m1.1.1.3.4.cmml">L</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.E1X.2.1.1.m1.1b"><apply id="S3.E1X.2.1.1.m1.1.1.cmml" xref="S3.E1X.2.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.E1X.2.1.1.m1.1.1.1.cmml" xref="S3.E1X.2.1.1.m1.1.1">subscript</csymbol><ci id="S3.E1X.2.1.1.m1.1.1.2.cmml" xref="S3.E1X.2.1.1.m1.1.1.2">ℒ</ci><apply id="S3.E1X.2.1.1.m1.1.1.3.cmml" xref="S3.E1X.2.1.1.m1.1.1.3"><times id="S3.E1X.2.1.1.m1.1.1.3.1.cmml" xref="S3.E1X.2.1.1.m1.1.1.3.1"></times><ci id="S3.E1X.2.1.1.m1.1.1.3.2.cmml" xref="S3.E1X.2.1.1.m1.1.1.3.2">𝑁</ci><ci id="S3.E1X.2.1.1.m1.1.1.3.3.cmml" xref="S3.E1X.2.1.1.m1.1.1.3.3">𝐿</ci><ci id="S3.E1X.2.1.1.m1.1.1.3.4.cmml" xref="S3.E1X.2.1.1.m1.1.1.3.4">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1X.2.1.1.m1.1c">\displaystyle\mathcal{L}_{NLL}</annotation><annotation encoding="application/x-llamapun" id="S3.E1X.2.1.1.m1.1d">caligraphic_L start_POSTSUBSCRIPT italic_N italic_L italic_L end_POSTSUBSCRIPT</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=-\log(\mathcal{G}_{\theta}(r|P,U))" class="ltx_Math" display="inline" id="S3.E1X.3.2.2.m1.4"><semantics id="S3.E1X.3.2.2.m1.4a"><mrow id="S3.E1X.3.2.2.m1.4.4" xref="S3.E1X.3.2.2.m1.4.4.cmml"><mi id="S3.E1X.3.2.2.m1.4.4.3" xref="S3.E1X.3.2.2.m1.4.4.3.cmml"></mi><mo id="S3.E1X.3.2.2.m1.4.4.2" xref="S3.E1X.3.2.2.m1.4.4.2.cmml">=</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1" xref="S3.E1X.3.2.2.m1.4.4.1.cmml"><mo id="S3.E1X.3.2.2.m1.4.4.1a" rspace="0.167em" xref="S3.E1X.3.2.2.m1.4.4.1.cmml">−</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml"><mi id="S3.E1X.3.2.2.m1.3.3" xref="S3.E1X.3.2.2.m1.3.3.cmml">log</mi><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1a" xref="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml">⁡</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml"><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.2" stretchy="false" xref="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml">(</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.cmml"><msub id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.2" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.2.cmml">𝒢</mi><mi id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.3" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.2" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">r</mi><mo fence="false" id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml">|</mo><mrow id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.2" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.1.cmml"><mi id="S3.E1X.3.2.2.m1.1.1" xref="S3.E1X.3.2.2.m1.1.1.cmml">P</mi><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.2.1" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.1.cmml">,</mo><mi id="S3.E1X.3.2.2.m1.2.2" xref="S3.E1X.3.2.2.m1.2.2.cmml">U</mi></mrow></mrow><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.3" stretchy="false" xref="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1X.3.2.2.m1.4b"><apply id="S3.E1X.3.2.2.m1.4.4.cmml" xref="S3.E1X.3.2.2.m1.4.4"><eq id="S3.E1X.3.2.2.m1.4.4.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.2"></eq><csymbol cd="latexml" id="S3.E1X.3.2.2.m1.4.4.3.cmml" xref="S3.E1X.3.2.2.m1.4.4.3">absent</csymbol><apply id="S3.E1X.3.2.2.m1.4.4.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1"><minus id="S3.E1X.3.2.2.m1.4.4.1.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.1"></minus><apply id="S3.E1X.3.2.2.m1.4.4.1.1.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1"><log id="S3.E1X.3.2.2.m1.3.3.cmml" xref="S3.E1X.3.2.2.m1.3.3"></log><apply id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1"><times id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.2"></times><apply id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.2">𝒢</ci><ci id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.3.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2">𝑟</ci><list id="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E1X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.2"><ci id="S3.E1X.3.2.2.m1.1.1.cmml" xref="S3.E1X.3.2.2.m1.1.1">𝑃</ci><ci id="S3.E1X.3.2.2.m1.2.2.cmml" xref="S3.E1X.3.2.2.m1.2.2">𝑈</ci></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1X.3.2.2.m1.4c">\displaystyle=-\log(\mathcal{G}_{\theta}(r|P,U))</annotation><annotation encoding="application/x-llamapun" id="S3.E1X.3.2.2.m1.4d">= - roman_log ( caligraphic_G start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_r | italic_P , italic_U ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(1)</span></td>
</tr>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E1Xa">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=-\sum_{i=1}^{|r|}\log(\mathcal{G}_{\theta}(r_{t}|P,U,r_{&lt;t}))," class="ltx_Math" display="inline" id="S3.E1Xa.2.1.1.m1.5"><semantics id="S3.E1Xa.2.1.1.m1.5a"><mrow id="S3.E1Xa.2.1.1.m1.5.5.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.cmml"><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.cmml"><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.3.cmml"></mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.2.cmml">=</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.cmml"><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1a" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.cmml">−</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.cmml"><mstyle displaystyle="true" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml"><munderover id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2a" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml"><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2" movablelimits="false" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.cmml"><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mrow id="S3.E1Xa.2.1.1.m1.1.1.1.3" xref="S3.E1Xa.2.1.1.m1.1.1.1.2.cmml"><mo id="S3.E1Xa.2.1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.E1Xa.2.1.1.m1.1.1.1.2.1.cmml">|</mo><mi id="S3.E1Xa.2.1.1.m1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.1.1.1.1.cmml">r</mi><mo id="S3.E1Xa.2.1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.E1Xa.2.1.1.m1.1.1.1.2.1.cmml">|</mo></mrow></munderover></mstyle><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml"><mi id="S3.E1Xa.2.1.1.m1.4.4" xref="S3.E1Xa.2.1.1.m1.4.4.cmml">log</mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1a" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml"><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">(</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2.cmml">𝒢</mi><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml">r</mi><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">t</mi></msub><mo fence="false" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.cmml">|</mo><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E1Xa.2.1.1.m1.2.2" xref="S3.E1Xa.2.1.1.m1.2.2.cmml">P</mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E1Xa.2.1.1.m1.3.3" xref="S3.E1Xa.2.1.1.m1.3.3.cmml">U</mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">,</mo><msub id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">r</mi><mrow id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">t</mi></mrow></msub></mrow></mrow><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S3.E1Xa.2.1.1.m1.5.5.1.2" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1Xa.2.1.1.m1.5b"><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1"><eq id="S3.E1Xa.2.1.1.m1.5.5.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.2"></eq><csymbol cd="latexml" id="S3.E1Xa.2.1.1.m1.5.5.1.1.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.3">absent</csymbol><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1"><minus id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1"></minus><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1"><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2">superscript</csymbol><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2">subscript</csymbol><sum id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2"></sum><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3"><eq id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1"></eq><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2">𝑖</ci><cn id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3.cmml" type="integer" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3">1</cn></apply></apply><apply id="S3.E1Xa.2.1.1.m1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.1.1.1.3"><abs id="S3.E1Xa.2.1.1.m1.1.1.1.2.1.cmml" xref="S3.E1Xa.2.1.1.m1.1.1.1.3.1"></abs><ci id="S3.E1Xa.2.1.1.m1.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.1.1.1.1">𝑟</ci></apply></apply><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1"><log id="S3.E1Xa.2.1.1.m1.4.4.cmml" xref="S3.E1Xa.2.1.1.m1.4.4"></log><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1"><times id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2"></times><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2">𝒢</ci><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2">conditional</csymbol><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.2">𝑟</ci><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.3">𝑡</ci></apply><list id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1"><ci id="S3.E1Xa.2.1.1.m1.2.2.cmml" xref="S3.E1Xa.2.1.1.m1.2.2">𝑃</ci><ci id="S3.E1Xa.2.1.1.m1.3.3.cmml" xref="S3.E1Xa.2.1.1.m1.3.3">𝑈</ci><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑟</ci><apply id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3"><lt id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E1Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></list></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1Xa.2.1.1.m1.5c">\displaystyle=-\sum_{i=1}^{|r|}\log(\mathcal{G}_{\theta}(r_{t}|P,U,r_{&lt;t})),</annotation><annotation encoding="application/x-llamapun" id="S3.E1Xa.2.1.1.m1.5d">= - ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT | italic_r | end_POSTSUPERSCRIPT roman_log ( caligraphic_G start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_P , italic_U , italic_r start_POSTSUBSCRIPT &lt; italic_t end_POSTSUBSCRIPT ) ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS1.p1.11">where <math alttext="r_{t}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.4.m1.1"><semantics id="S3.SS3.SSS1.p1.4.m1.1a"><msub id="S3.SS3.SSS1.p1.4.m1.1.1" xref="S3.SS3.SSS1.p1.4.m1.1.1.cmml"><mi id="S3.SS3.SSS1.p1.4.m1.1.1.2" xref="S3.SS3.SSS1.p1.4.m1.1.1.2.cmml">r</mi><mi id="S3.SS3.SSS1.p1.4.m1.1.1.3" xref="S3.SS3.SSS1.p1.4.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.4.m1.1b"><apply id="S3.SS3.SSS1.p1.4.m1.1.1.cmml" xref="S3.SS3.SSS1.p1.4.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.4.m1.1.1.1.cmml" xref="S3.SS3.SSS1.p1.4.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.4.m1.1.1.2.cmml" xref="S3.SS3.SSS1.p1.4.m1.1.1.2">𝑟</ci><ci id="S3.SS3.SSS1.p1.4.m1.1.1.3.cmml" xref="S3.SS3.SSS1.p1.4.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.4.m1.1c">r_{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.4.m1.1d">italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> denotes the <math alttext="t" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.5.m2.1"><semantics id="S3.SS3.SSS1.p1.5.m2.1a"><mi id="S3.SS3.SSS1.p1.5.m2.1.1" xref="S3.SS3.SSS1.p1.5.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.5.m2.1b"><ci id="S3.SS3.SSS1.p1.5.m2.1.1.cmml" xref="S3.SS3.SSS1.p1.5.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.5.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.5.m2.1d">italic_t</annotation></semantics></math>-th token in <math alttext="r" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.6.m3.1"><semantics id="S3.SS3.SSS1.p1.6.m3.1a"><mi id="S3.SS3.SSS1.p1.6.m3.1.1" xref="S3.SS3.SSS1.p1.6.m3.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.6.m3.1b"><ci id="S3.SS3.SSS1.p1.6.m3.1.1.cmml" xref="S3.SS3.SSS1.p1.6.m3.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.6.m3.1c">r</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.6.m3.1d">italic_r</annotation></semantics></math>, <math alttext="r_{&lt;t}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.7.m4.1"><semantics id="S3.SS3.SSS1.p1.7.m4.1a"><msub id="S3.SS3.SSS1.p1.7.m4.1.1" xref="S3.SS3.SSS1.p1.7.m4.1.1.cmml"><mi id="S3.SS3.SSS1.p1.7.m4.1.1.2" xref="S3.SS3.SSS1.p1.7.m4.1.1.2.cmml">r</mi><mrow id="S3.SS3.SSS1.p1.7.m4.1.1.3" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.cmml"><mi id="S3.SS3.SSS1.p1.7.m4.1.1.3.2" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.2.cmml"></mi><mo id="S3.SS3.SSS1.p1.7.m4.1.1.3.1" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.1.cmml">&lt;</mo><mi id="S3.SS3.SSS1.p1.7.m4.1.1.3.3" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.3.cmml">t</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.7.m4.1b"><apply id="S3.SS3.SSS1.p1.7.m4.1.1.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.7.m4.1.1.1.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p1.7.m4.1.1.2.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1.2">𝑟</ci><apply id="S3.SS3.SSS1.p1.7.m4.1.1.3.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1.3"><lt id="S3.SS3.SSS1.p1.7.m4.1.1.3.1.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.1"></lt><csymbol cd="latexml" id="S3.SS3.SSS1.p1.7.m4.1.1.3.2.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.2">absent</csymbol><ci id="S3.SS3.SSS1.p1.7.m4.1.1.3.3.cmml" xref="S3.SS3.SSS1.p1.7.m4.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.7.m4.1c">r_{&lt;t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.7.m4.1d">italic_r start_POSTSUBSCRIPT &lt; italic_t end_POSTSUBSCRIPT</annotation></semantics></math> denotes the sequence containing the first to (<math alttext="t-1" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.8.m5.1"><semantics id="S3.SS3.SSS1.p1.8.m5.1a"><mrow id="S3.SS3.SSS1.p1.8.m5.1.1" xref="S3.SS3.SSS1.p1.8.m5.1.1.cmml"><mi id="S3.SS3.SSS1.p1.8.m5.1.1.2" xref="S3.SS3.SSS1.p1.8.m5.1.1.2.cmml">t</mi><mo id="S3.SS3.SSS1.p1.8.m5.1.1.1" xref="S3.SS3.SSS1.p1.8.m5.1.1.1.cmml">−</mo><mn id="S3.SS3.SSS1.p1.8.m5.1.1.3" xref="S3.SS3.SSS1.p1.8.m5.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.8.m5.1b"><apply id="S3.SS3.SSS1.p1.8.m5.1.1.cmml" xref="S3.SS3.SSS1.p1.8.m5.1.1"><minus id="S3.SS3.SSS1.p1.8.m5.1.1.1.cmml" xref="S3.SS3.SSS1.p1.8.m5.1.1.1"></minus><ci id="S3.SS3.SSS1.p1.8.m5.1.1.2.cmml" xref="S3.SS3.SSS1.p1.8.m5.1.1.2">𝑡</ci><cn id="S3.SS3.SSS1.p1.8.m5.1.1.3.cmml" type="integer" xref="S3.SS3.SSS1.p1.8.m5.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.8.m5.1c">t-1</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.8.m5.1d">italic_t - 1</annotation></semantics></math>)-th tokens in <math alttext="r" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.9.m6.1"><semantics id="S3.SS3.SSS1.p1.9.m6.1a"><mi id="S3.SS3.SSS1.p1.9.m6.1.1" xref="S3.SS3.SSS1.p1.9.m6.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.9.m6.1b"><ci id="S3.SS3.SSS1.p1.9.m6.1.1.cmml" xref="S3.SS3.SSS1.p1.9.m6.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.9.m6.1c">r</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.9.m6.1d">italic_r</annotation></semantics></math>, <math alttext="\mathcal{G}_{\theta}(\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.10.m7.1"><semantics id="S3.SS3.SSS1.p1.10.m7.1a"><mrow id="S3.SS3.SSS1.p1.10.m7.1.2" xref="S3.SS3.SSS1.p1.10.m7.1.2.cmml"><msub id="S3.SS3.SSS1.p1.10.m7.1.2.2" xref="S3.SS3.SSS1.p1.10.m7.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p1.10.m7.1.2.2.2" xref="S3.SS3.SSS1.p1.10.m7.1.2.2.2.cmml">𝒢</mi><mi id="S3.SS3.SSS1.p1.10.m7.1.2.2.3" xref="S3.SS3.SSS1.p1.10.m7.1.2.2.3.cmml">θ</mi></msub><mo id="S3.SS3.SSS1.p1.10.m7.1.2.1" xref="S3.SS3.SSS1.p1.10.m7.1.2.1.cmml">⁢</mo><mrow id="S3.SS3.SSS1.p1.10.m7.1.2.3.2" xref="S3.SS3.SSS1.p1.10.m7.1.2.cmml"><mo id="S3.SS3.SSS1.p1.10.m7.1.2.3.2.1" stretchy="false" xref="S3.SS3.SSS1.p1.10.m7.1.2.cmml">(</mo><mo id="S3.SS3.SSS1.p1.10.m7.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS1.p1.10.m7.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS1.p1.10.m7.1.2.3.2.2" stretchy="false" xref="S3.SS3.SSS1.p1.10.m7.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.10.m7.1b"><apply id="S3.SS3.SSS1.p1.10.m7.1.2.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2"><times id="S3.SS3.SSS1.p1.10.m7.1.2.1.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2.1"></times><apply id="S3.SS3.SSS1.p1.10.m7.1.2.2.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p1.10.m7.1.2.2.1.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2.2">subscript</csymbol><ci id="S3.SS3.SSS1.p1.10.m7.1.2.2.2.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2.2.2">𝒢</ci><ci id="S3.SS3.SSS1.p1.10.m7.1.2.2.3.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.2.2.3">𝜃</ci></apply><ci id="S3.SS3.SSS1.p1.10.m7.1.1.cmml" xref="S3.SS3.SSS1.p1.10.m7.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.10.m7.1c">\mathcal{G}_{\theta}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.10.m7.1d">caligraphic_G start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> denotes the predicted probability distribution of the generator, and <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p1.11.m8.1"><semantics id="S3.SS3.SSS1.p1.11.m8.1a"><mi id="S3.SS3.SSS1.p1.11.m8.1.1" xref="S3.SS3.SSS1.p1.11.m8.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p1.11.m8.1b"><ci id="S3.SS3.SSS1.p1.11.m8.1.1.cmml" xref="S3.SS3.SSS1.p1.11.m8.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p1.11.m8.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p1.11.m8.1d">italic_θ</annotation></semantics></math> denotes parameters of the generator.</p>
</div>
<div class="ltx_para" id="S3.SS3.SSS1.p2">
<p class="ltx_p" id="S3.SS3.SSS1.p2.1">After supervised training, we obtain a supervised tuned generator denoted by <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S3.SS3.SSS1.p2.1.m1.1"><semantics id="S3.SS3.SSS1.p2.1.m1.1a"><msub id="S3.SS3.SSS1.p2.1.m1.1.1" xref="S3.SS3.SSS1.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p2.1.m1.1.1.2" xref="S3.SS3.SSS1.p2.1.m1.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS1.p2.1.m1.1.1.3" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.cmml"><mi id="S3.SS3.SSS1.p2.1.m1.1.1.3.2" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS1.p2.1.m1.1.1.3.1" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS1.p2.1.m1.1.1.3.3" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS1.p2.1.m1.1.1.3.1a" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS1.p2.1.m1.1.1.3.4" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p2.1.m1.1b"><apply id="S3.SS3.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.1.m1.1.1.1.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p2.1.m1.1.1.2.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.2">𝒢</ci><apply id="S3.SS3.SSS1.p2.1.m1.1.1.3.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.3"><times id="S3.SS3.SSS1.p2.1.m1.1.1.3.1.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.1"></times><ci id="S3.SS3.SSS1.p2.1.m1.1.1.3.2.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS1.p2.1.m1.1.1.3.3.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS1.p2.1.m1.1.1.3.4.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p2.1.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS1.p2.1.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.2 </span>Learning Retrieval Augmentation</h4>
<div class="ltx_para" id="S3.SS3.SSS2.p1">
<p class="ltx_p" id="S3.SS3.SSS2.p1.1">Intuitively, with the retrieval content as an augmentation, the goal is to improve the generated content in terms of desired metrics. However, it is hard to build direct connections between retrieval contents and the quality of the final generated response to update the retriever. To achieve that, we use the trained generator <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p1.1.m1.1"><semantics id="S3.SS3.SSS2.p1.1.m1.1a"><msub id="S3.SS3.SSS2.p1.1.m1.1.1" xref="S3.SS3.SSS2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p1.1.m1.1.1.2" xref="S3.SS3.SSS2.p1.1.m1.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS2.p1.1.m1.1.1.3" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.1.1.3.2" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS2.p1.1.m1.1.1.3.1" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p1.1.m1.1.1.3.3" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS2.p1.1.m1.1.1.3.1a" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p1.1.m1.1.1.3.4" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.1.m1.1b"><apply id="S3.SS3.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.1.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.1.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.2">𝒢</ci><apply id="S3.SS3.SSS2.p1.1.m1.1.1.3.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3"><times id="S3.SS3.SSS2.p1.1.m1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.1"></times><ci id="S3.SS3.SSS2.p1.1.m1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS2.p1.1.m1.1.1.3.3.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS2.p1.1.m1.1.1.3.4.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.1.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p1.1.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> as an evaluator to give feedback.</p>
</div>
<div class="ltx_para" id="S3.SS3.SSS2.p2">
<p class="ltx_p" id="S3.SS3.SSS2.p2.6">Specifically, given the metric values from the trained generator <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.1.m1.1"><semantics id="S3.SS3.SSS2.p2.1.m1.1a"><msub id="S3.SS3.SSS2.p2.1.m1.1.1" xref="S3.SS3.SSS2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.1.m1.1.1.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS2.p2.1.m1.1.1.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS2.p2.1.m1.1.1.3.1" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS2.p2.1.m1.1.1.3.1a" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.4" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.1.m1.1b"><apply id="S3.SS3.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.2">𝒢</ci><apply id="S3.SS3.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3"><times id="S3.SS3.SSS2.p2.1.m1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.1"></times><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.4.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.1.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.1.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>, we use those metric values as feedback to guide the update of the retriever. In other words, if the generator <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.2.m2.1"><semantics id="S3.SS3.SSS2.p2.2.m2.1a"><msub id="S3.SS3.SSS2.p2.2.m2.1.1" xref="S3.SS3.SSS2.p2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.2.m2.1.1.2" xref="S3.SS3.SSS2.p2.2.m2.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS2.p2.2.m2.1.1.3" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.2.m2.1.1.3.2" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS2.p2.2.m2.1.1.3.1" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.2.m2.1.1.3.3" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS2.p2.2.m2.1.1.3.1a" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.2.m2.1.1.3.4" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.2.m2.1b"><apply id="S3.SS3.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.2">𝒢</ci><apply id="S3.SS3.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3"><times id="S3.SS3.SSS2.p2.2.m2.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.1"></times><ci id="S3.SS3.SSS2.p2.2.m2.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS2.p2.2.m2.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS2.p2.2.m2.1.1.3.4.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.2.m2.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.2.m2.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> finds that the retrieved story <math alttext="d_{i}\in D_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.3.m3.1"><semantics id="S3.SS3.SSS2.p2.3.m3.1a"><mrow id="S3.SS3.SSS2.p2.3.m3.1.1" xref="S3.SS3.SSS2.p2.3.m3.1.1.cmml"><msub id="S3.SS3.SSS2.p2.3.m3.1.1.2" xref="S3.SS3.SSS2.p2.3.m3.1.1.2.cmml"><mi id="S3.SS3.SSS2.p2.3.m3.1.1.2.2" xref="S3.SS3.SSS2.p2.3.m3.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.3.m3.1.1.2.3" xref="S3.SS3.SSS2.p2.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS2.p2.3.m3.1.1.1" xref="S3.SS3.SSS2.p2.3.m3.1.1.1.cmml">∈</mo><msub id="S3.SS3.SSS2.p2.3.m3.1.1.3" xref="S3.SS3.SSS2.p2.3.m3.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.3.m3.1.1.3.2" xref="S3.SS3.SSS2.p2.3.m3.1.1.3.2.cmml">D</mi><mi id="S3.SS3.SSS2.p2.3.m3.1.1.3.3" xref="S3.SS3.SSS2.p2.3.m3.1.1.3.3.cmml">q</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.3.m3.1b"><apply id="S3.SS3.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1"><in id="S3.SS3.SSS2.p2.3.m3.1.1.1.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.1"></in><apply id="S3.SS3.SSS2.p2.3.m3.1.1.2.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.3.m3.1.1.2.1.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.2">subscript</csymbol><ci id="S3.SS3.SSS2.p2.3.m3.1.1.2.2.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.3.m3.1.1.2.3.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS2.p2.3.m3.1.1.3.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.3.m3.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS2.p2.3.m3.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.3.2">𝐷</ci><ci id="S3.SS3.SSS2.p2.3.m3.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.3.m3.1c">d_{i}\in D_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.3.m3.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> is useful to improve the performance in terms of the given metrics, we should encourage the retriever to rank the score of <math alttext="d_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.4.m4.1"><semantics id="S3.SS3.SSS2.p2.4.m4.1a"><msub id="S3.SS3.SSS2.p2.4.m4.1.1" xref="S3.SS3.SSS2.p2.4.m4.1.1.cmml"><mi id="S3.SS3.SSS2.p2.4.m4.1.1.2" xref="S3.SS3.SSS2.p2.4.m4.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.4.m4.1.1.3" xref="S3.SS3.SSS2.p2.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.4.m4.1b"><apply id="S3.SS3.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS3.SSS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.4.m4.1.1.1.cmml" xref="S3.SS3.SSS2.p2.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.4.m4.1.1.2.cmml" xref="S3.SS3.SSS2.p2.4.m4.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.4.m4.1.1.3.cmml" xref="S3.SS3.SSS2.p2.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.4.m4.1c">d_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.4.m4.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> to be higher. In this way, we can let the model decide the usefulness of the retrieval content and avoid relying on the retrieval annotations between query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.5.m5.1"><semantics id="S3.SS3.SSS2.p2.5.m5.1a"><mi id="S3.SS3.SSS2.p2.5.m5.1.1" xref="S3.SS3.SSS2.p2.5.m5.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.5.m5.1b"><ci id="S3.SS3.SSS2.p2.5.m5.1.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.5.m5.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.5.m5.1d">italic_q</annotation></semantics></math> and story <math alttext="d_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.6.m6.1"><semantics id="S3.SS3.SSS2.p2.6.m6.1a"><msub id="S3.SS3.SSS2.p2.6.m6.1.1" xref="S3.SS3.SSS2.p2.6.m6.1.1.cmml"><mi id="S3.SS3.SSS2.p2.6.m6.1.1.2" xref="S3.SS3.SSS2.p2.6.m6.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.6.m6.1.1.3" xref="S3.SS3.SSS2.p2.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.6.m6.1b"><apply id="S3.SS3.SSS2.p2.6.m6.1.1.cmml" xref="S3.SS3.SSS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.6.m6.1.1.1.cmml" xref="S3.SS3.SSS2.p2.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.6.m6.1.1.2.cmml" xref="S3.SS3.SSS2.p2.6.m6.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.6.m6.1.1.3.cmml" xref="S3.SS3.SSS2.p2.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.6.m6.1c">d_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.6.m6.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. However, since the whole generation and metric calculation process is hard or even impossible to be differentiate, we cannot directly perform gradient descent with respect to the calculated metrics to update the retriever. To solve this problem, instead we transform the metric values into a probability distribution as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="p_{i}=\frac{\exp\left(\frac{1}{\tau_{g}}\text{M}(y,\text{Gen}(\mathcal{G}_{sup%
},(d_{i},P,U))\right)}{\sum_{c=1}^{K}\exp\left(\frac{1}{\tau_{g}}\text{M}(y,%
\text{Gen}(\mathcal{G}_{sup},(d_{c},P,U))\right)}," class="ltx_math_unparsed" display="block" id="S3.Ex1.m1.7"><semantics id="S3.Ex1.m1.7a"><mrow id="S3.Ex1.m1.7.7.1"><mrow id="S3.Ex1.m1.7.7.1.1"><msub id="S3.Ex1.m1.7.7.1.1.2"><mi id="S3.Ex1.m1.7.7.1.1.2.2">p</mi><mi id="S3.Ex1.m1.7.7.1.1.2.3">i</mi></msub><mo id="S3.Ex1.m1.7.7.1.1.1">=</mo><mfrac id="S3.Ex1.m1.6.6"><mrow id="S3.Ex1.m1.3.3.3"><mi id="S3.Ex1.m1.3.3.3.4">exp</mi><mrow id="S3.Ex1.m1.3.3.3.5"><mo id="S3.Ex1.m1.3.3.3.5.1">(</mo><mfrac id="S3.Ex1.m1.3.3.3.5.2"><mn id="S3.Ex1.m1.3.3.3.5.2.2">1</mn><msub id="S3.Ex1.m1.3.3.3.5.2.3"><mi id="S3.Ex1.m1.3.3.3.5.2.3.2">τ</mi><mi id="S3.Ex1.m1.3.3.3.5.2.3.3">g</mi></msub></mfrac><mtext id="S3.Ex1.m1.3.3.3.5.3">M</mtext><mrow id="S3.Ex1.m1.3.3.3.5.4"><mo id="S3.Ex1.m1.3.3.3.5.4.1" stretchy="false">(</mo><mi id="S3.Ex1.m1.3.3.3.3">y</mi><mo id="S3.Ex1.m1.3.3.3.5.4.2">,</mo><mtext id="S3.Ex1.m1.3.3.3.5.4.3">Gen</mtext><mrow id="S3.Ex1.m1.3.3.3.5.4.4"><mo id="S3.Ex1.m1.3.3.3.5.4.4.1" stretchy="false">(</mo><msub id="S3.Ex1.m1.3.3.3.5.4.4.2"><mi class="ltx_font_mathcaligraphic" id="S3.Ex1.m1.3.3.3.5.4.4.2.2">𝒢</mi><mrow id="S3.Ex1.m1.3.3.3.5.4.4.2.3"><mi id="S3.Ex1.m1.3.3.3.5.4.4.2.3.2">s</mi><mo id="S3.Ex1.m1.3.3.3.5.4.4.2.3.1">⁢</mo><mi id="S3.Ex1.m1.3.3.3.5.4.4.2.3.3">u</mi><mo id="S3.Ex1.m1.3.3.3.5.4.4.2.3.1a">⁢</mo><mi id="S3.Ex1.m1.3.3.3.5.4.4.2.3.4">p</mi></mrow></msub><mo id="S3.Ex1.m1.3.3.3.5.4.4.3">,</mo><mrow id="S3.Ex1.m1.3.3.3.5.4.4.4"><mo id="S3.Ex1.m1.3.3.3.5.4.4.4.1" stretchy="false">(</mo><msub id="S3.Ex1.m1.3.3.3.5.4.4.4.2"><mi id="S3.Ex1.m1.3.3.3.5.4.4.4.2.2">d</mi><mi id="S3.Ex1.m1.3.3.3.5.4.4.4.2.3">i</mi></msub><mo id="S3.Ex1.m1.3.3.3.5.4.4.4.3">,</mo><mi id="S3.Ex1.m1.1.1.1.1">P</mi><mo id="S3.Ex1.m1.3.3.3.5.4.4.4.4">,</mo><mi id="S3.Ex1.m1.2.2.2.2">U</mi><mo id="S3.Ex1.m1.3.3.3.5.4.4.4.5" stretchy="false">)</mo></mrow><mo id="S3.Ex1.m1.3.3.3.5.4.4.5" stretchy="false">)</mo></mrow><mo id="S3.Ex1.m1.3.3.3.5.4.5">)</mo></mrow></mrow></mrow><mrow id="S3.Ex1.m1.6.6.6"><msubsup id="S3.Ex1.m1.6.6.6.4"><mo id="S3.Ex1.m1.6.6.6.4.2.2">∑</mo><mrow id="S3.Ex1.m1.6.6.6.4.2.3"><mi id="S3.Ex1.m1.6.6.6.4.2.3.2">c</mi><mo id="S3.Ex1.m1.6.6.6.4.2.3.1">=</mo><mn id="S3.Ex1.m1.6.6.6.4.2.3.3">1</mn></mrow><mi id="S3.Ex1.m1.6.6.6.4.3">K</mi></msubsup><mi id="S3.Ex1.m1.6.6.6.5">exp</mi><mrow id="S3.Ex1.m1.6.6.6.6"><mo id="S3.Ex1.m1.6.6.6.6.1">(</mo><mfrac id="S3.Ex1.m1.6.6.6.6.2"><mn id="S3.Ex1.m1.6.6.6.6.2.2">1</mn><msub id="S3.Ex1.m1.6.6.6.6.2.3"><mi id="S3.Ex1.m1.6.6.6.6.2.3.2">τ</mi><mi id="S3.Ex1.m1.6.6.6.6.2.3.3">g</mi></msub></mfrac><mtext id="S3.Ex1.m1.6.6.6.6.3">M</mtext><mrow id="S3.Ex1.m1.6.6.6.6.4"><mo id="S3.Ex1.m1.6.6.6.6.4.1" stretchy="false">(</mo><mi id="S3.Ex1.m1.6.6.6.3">y</mi><mo id="S3.Ex1.m1.6.6.6.6.4.2">,</mo><mtext id="S3.Ex1.m1.6.6.6.6.4.3">Gen</mtext><mrow id="S3.Ex1.m1.6.6.6.6.4.4"><mo id="S3.Ex1.m1.6.6.6.6.4.4.1" stretchy="false">(</mo><msub id="S3.Ex1.m1.6.6.6.6.4.4.2"><mi class="ltx_font_mathcaligraphic" id="S3.Ex1.m1.6.6.6.6.4.4.2.2">𝒢</mi><mrow id="S3.Ex1.m1.6.6.6.6.4.4.2.3"><mi id="S3.Ex1.m1.6.6.6.6.4.4.2.3.2">s</mi><mo id="S3.Ex1.m1.6.6.6.6.4.4.2.3.1">⁢</mo><mi id="S3.Ex1.m1.6.6.6.6.4.4.2.3.3">u</mi><mo id="S3.Ex1.m1.6.6.6.6.4.4.2.3.1a">⁢</mo><mi id="S3.Ex1.m1.6.6.6.6.4.4.2.3.4">p</mi></mrow></msub><mo id="S3.Ex1.m1.6.6.6.6.4.4.3">,</mo><mrow id="S3.Ex1.m1.6.6.6.6.4.4.4"><mo id="S3.Ex1.m1.6.6.6.6.4.4.4.1" stretchy="false">(</mo><msub id="S3.Ex1.m1.6.6.6.6.4.4.4.2"><mi id="S3.Ex1.m1.6.6.6.6.4.4.4.2.2">d</mi><mi id="S3.Ex1.m1.6.6.6.6.4.4.4.2.3">c</mi></msub><mo id="S3.Ex1.m1.6.6.6.6.4.4.4.3">,</mo><mi id="S3.Ex1.m1.4.4.4.1">P</mi><mo id="S3.Ex1.m1.6.6.6.6.4.4.4.4">,</mo><mi id="S3.Ex1.m1.5.5.5.2">U</mi><mo id="S3.Ex1.m1.6.6.6.6.4.4.4.5" stretchy="false">)</mo></mrow><mo id="S3.Ex1.m1.6.6.6.6.4.4.5" stretchy="false">)</mo></mrow><mo id="S3.Ex1.m1.6.6.6.6.4.5">)</mo></mrow></mrow></mrow></mfrac></mrow><mo id="S3.Ex1.m1.7.7.1.2">,</mo></mrow><annotation encoding="application/x-tex" id="S3.Ex1.m1.7b">p_{i}=\frac{\exp\left(\frac{1}{\tau_{g}}\text{M}(y,\text{Gen}(\mathcal{G}_{sup%
},(d_{i},P,U))\right)}{\sum_{c=1}^{K}\exp\left(\frac{1}{\tau_{g}}\text{M}(y,%
\text{Gen}(\mathcal{G}_{sup},(d_{c},P,U))\right)},</annotation><annotation encoding="application/x-llamapun" id="S3.Ex1.m1.7c">italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = divide start_ARG roman_exp ( divide start_ARG 1 end_ARG start_ARG italic_τ start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT end_ARG M ( italic_y , Gen ( caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT , ( italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_P , italic_U ) ) ) end_ARG start_ARG ∑ start_POSTSUBSCRIPT italic_c = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT roman_exp ( divide start_ARG 1 end_ARG start_ARG italic_τ start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT end_ARG M ( italic_y , Gen ( caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT , ( italic_d start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT , italic_P , italic_U ) ) ) end_ARG ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS2.p2.28">where <math alttext="\text{M}(y,\hat{y})" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.7.m1.2"><semantics id="S3.SS3.SSS2.p2.7.m1.2a"><mrow id="S3.SS3.SSS2.p2.7.m1.2.3" xref="S3.SS3.SSS2.p2.7.m1.2.3.cmml"><mtext id="S3.SS3.SSS2.p2.7.m1.2.3.2" xref="S3.SS3.SSS2.p2.7.m1.2.3.2a.cmml">M</mtext><mo id="S3.SS3.SSS2.p2.7.m1.2.3.1" xref="S3.SS3.SSS2.p2.7.m1.2.3.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.7.m1.2.3.3.2" xref="S3.SS3.SSS2.p2.7.m1.2.3.3.1.cmml"><mo id="S3.SS3.SSS2.p2.7.m1.2.3.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.7.m1.2.3.3.1.cmml">(</mo><mi id="S3.SS3.SSS2.p2.7.m1.1.1" xref="S3.SS3.SSS2.p2.7.m1.1.1.cmml">y</mi><mo id="S3.SS3.SSS2.p2.7.m1.2.3.3.2.2" xref="S3.SS3.SSS2.p2.7.m1.2.3.3.1.cmml">,</mo><mover accent="true" id="S3.SS3.SSS2.p2.7.m1.2.2" xref="S3.SS3.SSS2.p2.7.m1.2.2.cmml"><mi id="S3.SS3.SSS2.p2.7.m1.2.2.2" xref="S3.SS3.SSS2.p2.7.m1.2.2.2.cmml">y</mi><mo id="S3.SS3.SSS2.p2.7.m1.2.2.1" xref="S3.SS3.SSS2.p2.7.m1.2.2.1.cmml">^</mo></mover><mo id="S3.SS3.SSS2.p2.7.m1.2.3.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.7.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.7.m1.2b"><apply id="S3.SS3.SSS2.p2.7.m1.2.3.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.3"><times id="S3.SS3.SSS2.p2.7.m1.2.3.1.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.3.1"></times><ci id="S3.SS3.SSS2.p2.7.m1.2.3.2a.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.3.2"><mtext id="S3.SS3.SSS2.p2.7.m1.2.3.2.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.3.2">M</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.7.m1.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.3.3.2"><ci id="S3.SS3.SSS2.p2.7.m1.1.1.cmml" xref="S3.SS3.SSS2.p2.7.m1.1.1">𝑦</ci><apply id="S3.SS3.SSS2.p2.7.m1.2.2.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.2"><ci id="S3.SS3.SSS2.p2.7.m1.2.2.1.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.2.1">^</ci><ci id="S3.SS3.SSS2.p2.7.m1.2.2.2.cmml" xref="S3.SS3.SSS2.p2.7.m1.2.2.2">𝑦</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.7.m1.2c">\text{M}(y,\hat{y})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.7.m1.2d">M ( italic_y , over^ start_ARG italic_y end_ARG )</annotation></semantics></math> denotes a metric function to evaluate the quality of the generated text <math alttext="\hat{y}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.8.m2.1"><semantics id="S3.SS3.SSS2.p2.8.m2.1a"><mover accent="true" id="S3.SS3.SSS2.p2.8.m2.1.1" xref="S3.SS3.SSS2.p2.8.m2.1.1.cmml"><mi id="S3.SS3.SSS2.p2.8.m2.1.1.2" xref="S3.SS3.SSS2.p2.8.m2.1.1.2.cmml">y</mi><mo id="S3.SS3.SSS2.p2.8.m2.1.1.1" xref="S3.SS3.SSS2.p2.8.m2.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.8.m2.1b"><apply id="S3.SS3.SSS2.p2.8.m2.1.1.cmml" xref="S3.SS3.SSS2.p2.8.m2.1.1"><ci id="S3.SS3.SSS2.p2.8.m2.1.1.1.cmml" xref="S3.SS3.SSS2.p2.8.m2.1.1.1">^</ci><ci id="S3.SS3.SSS2.p2.8.m2.1.1.2.cmml" xref="S3.SS3.SSS2.p2.8.m2.1.1.2">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.8.m2.1c">\hat{y}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.8.m2.1d">over^ start_ARG italic_y end_ARG</annotation></semantics></math> given the ground truth <math alttext="y" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.9.m3.1"><semantics id="S3.SS3.SSS2.p2.9.m3.1a"><mi id="S3.SS3.SSS2.p2.9.m3.1.1" xref="S3.SS3.SSS2.p2.9.m3.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.9.m3.1b"><ci id="S3.SS3.SSS2.p2.9.m3.1.1.cmml" xref="S3.SS3.SSS2.p2.9.m3.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.9.m3.1c">y</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.9.m3.1d">italic_y</annotation></semantics></math>, <math alttext="\text{Gen}(\mathcal{G}_{sup},(d_{i},P,U))" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.10.m4.4"><semantics id="S3.SS3.SSS2.p2.10.m4.4a"><mrow id="S3.SS3.SSS2.p2.10.m4.4.4" xref="S3.SS3.SSS2.p2.10.m4.4.4.cmml"><mtext id="S3.SS3.SSS2.p2.10.m4.4.4.4" xref="S3.SS3.SSS2.p2.10.m4.4.4.4a.cmml">Gen</mtext><mo id="S3.SS3.SSS2.p2.10.m4.4.4.3" xref="S3.SS3.SSS2.p2.10.m4.4.4.3.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.10.m4.4.4.2.2" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.3.cmml"><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.3.cmml">(</mo><msub id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.2" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.2" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.3" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1a" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.4" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.4.cmml">p</mi></mrow></msub><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.4" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.3.cmml">,</mo><mrow id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml"><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.2" stretchy="false" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml">(</mo><msub id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.cmml"><mi id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.2" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.3" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.3" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml">,</mo><mi id="S3.SS3.SSS2.p2.10.m4.1.1" xref="S3.SS3.SSS2.p2.10.m4.1.1.cmml">P</mi><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.4" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml">,</mo><mi id="S3.SS3.SSS2.p2.10.m4.2.2" xref="S3.SS3.SSS2.p2.10.m4.2.2.cmml">U</mi><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.5" stretchy="false" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml">)</mo></mrow><mo id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.5" stretchy="false" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.10.m4.4b"><apply id="S3.SS3.SSS2.p2.10.m4.4.4.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4"><times id="S3.SS3.SSS2.p2.10.m4.4.4.3.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.3"></times><ci id="S3.SS3.SSS2.p2.10.m4.4.4.4a.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.4"><mtext id="S3.SS3.SSS2.p2.10.m4.4.4.4.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.4">Gen</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.10.m4.4.4.2.3.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2"><apply id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.2">𝒢</ci><apply id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3"><times id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.1"></times><ci id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.4.cmml" xref="S3.SS3.SSS2.p2.10.m4.3.3.1.1.1.3.4">𝑝</ci></apply></apply><vector id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.2.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1"><apply id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.2.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.3.cmml" xref="S3.SS3.SSS2.p2.10.m4.4.4.2.2.2.1.1.3">𝑖</ci></apply><ci id="S3.SS3.SSS2.p2.10.m4.1.1.cmml" xref="S3.SS3.SSS2.p2.10.m4.1.1">𝑃</ci><ci id="S3.SS3.SSS2.p2.10.m4.2.2.cmml" xref="S3.SS3.SSS2.p2.10.m4.2.2">𝑈</ci></vector></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.10.m4.4c">\text{Gen}(\mathcal{G}_{sup},(d_{i},P,U))</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.10.m4.4d">Gen ( caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT , ( italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_P , italic_U ) )</annotation></semantics></math> denotes the decoded text generated by <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.11.m5.1"><semantics id="S3.SS3.SSS2.p2.11.m5.1a"><msub id="S3.SS3.SSS2.p2.11.m5.1.1" xref="S3.SS3.SSS2.p2.11.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.11.m5.1.1.2" xref="S3.SS3.SSS2.p2.11.m5.1.1.2.cmml">𝒢</mi><mrow id="S3.SS3.SSS2.p2.11.m5.1.1.3" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.11.m5.1.1.3.2" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.2.cmml">s</mi><mo id="S3.SS3.SSS2.p2.11.m5.1.1.3.1" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.11.m5.1.1.3.3" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS2.p2.11.m5.1.1.3.1a" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS2.p2.11.m5.1.1.3.4" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.11.m5.1b"><apply id="S3.SS3.SSS2.p2.11.m5.1.1.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.11.m5.1.1.1.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.11.m5.1.1.2.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.2">𝒢</ci><apply id="S3.SS3.SSS2.p2.11.m5.1.1.3.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.3"><times id="S3.SS3.SSS2.p2.11.m5.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.1"></times><ci id="S3.SS3.SSS2.p2.11.m5.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.2">𝑠</ci><ci id="S3.SS3.SSS2.p2.11.m5.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS2.p2.11.m5.1.1.3.4.cmml" xref="S3.SS3.SSS2.p2.11.m5.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.11.m5.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.11.m5.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> given <math alttext="(d_{i},P,U)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.12.m6.3"><semantics id="S3.SS3.SSS2.p2.12.m6.3a"><mrow id="S3.SS3.SSS2.p2.12.m6.3.3.1" xref="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml"><mo id="S3.SS3.SSS2.p2.12.m6.3.3.1.2" stretchy="false" xref="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml">(</mo><msub id="S3.SS3.SSS2.p2.12.m6.3.3.1.1" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1.cmml"><mi id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.2" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.3" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS2.p2.12.m6.3.3.1.3" xref="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml">,</mo><mi id="S3.SS3.SSS2.p2.12.m6.1.1" xref="S3.SS3.SSS2.p2.12.m6.1.1.cmml">P</mi><mo id="S3.SS3.SSS2.p2.12.m6.3.3.1.4" xref="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml">,</mo><mi id="S3.SS3.SSS2.p2.12.m6.2.2" xref="S3.SS3.SSS2.p2.12.m6.2.2.cmml">U</mi><mo id="S3.SS3.SSS2.p2.12.m6.3.3.1.5" stretchy="false" xref="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.12.m6.3b"><vector id="S3.SS3.SSS2.p2.12.m6.3.3.2.cmml" xref="S3.SS3.SSS2.p2.12.m6.3.3.1"><apply id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.cmml" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.1.cmml" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.2.cmml" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.12.m6.3.3.1.1.3.cmml" xref="S3.SS3.SSS2.p2.12.m6.3.3.1.1.3">𝑖</ci></apply><ci id="S3.SS3.SSS2.p2.12.m6.1.1.cmml" xref="S3.SS3.SSS2.p2.12.m6.1.1">𝑃</ci><ci id="S3.SS3.SSS2.p2.12.m6.2.2.cmml" xref="S3.SS3.SSS2.p2.12.m6.2.2">𝑈</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.12.m6.3c">(d_{i},P,U)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.12.m6.3d">( italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_P , italic_U )</annotation></semantics></math> as the input, and <math alttext="\tau_{g}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.13.m7.1"><semantics id="S3.SS3.SSS2.p2.13.m7.1a"><msub id="S3.SS3.SSS2.p2.13.m7.1.1" xref="S3.SS3.SSS2.p2.13.m7.1.1.cmml"><mi id="S3.SS3.SSS2.p2.13.m7.1.1.2" xref="S3.SS3.SSS2.p2.13.m7.1.1.2.cmml">τ</mi><mi id="S3.SS3.SSS2.p2.13.m7.1.1.3" xref="S3.SS3.SSS2.p2.13.m7.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.13.m7.1b"><apply id="S3.SS3.SSS2.p2.13.m7.1.1.cmml" xref="S3.SS3.SSS2.p2.13.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.13.m7.1.1.1.cmml" xref="S3.SS3.SSS2.p2.13.m7.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.13.m7.1.1.2.cmml" xref="S3.SS3.SSS2.p2.13.m7.1.1.2">𝜏</ci><ci id="S3.SS3.SSS2.p2.13.m7.1.1.3.cmml" xref="S3.SS3.SSS2.p2.13.m7.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.13.m7.1c">\tau_{g}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.13.m7.1d">italic_τ start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math> is a temperature hyperparameter to control the sensitivity of the metric.
Here the metric function satisfies that a higher value of <math alttext="\text{M}(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.14.m8.2"><semantics id="S3.SS3.SSS2.p2.14.m8.2a"><mrow id="S3.SS3.SSS2.p2.14.m8.2.3" xref="S3.SS3.SSS2.p2.14.m8.2.3.cmml"><mtext id="S3.SS3.SSS2.p2.14.m8.2.3.2" xref="S3.SS3.SSS2.p2.14.m8.2.3.2a.cmml">M</mtext><mo id="S3.SS3.SSS2.p2.14.m8.2.3.1" xref="S3.SS3.SSS2.p2.14.m8.2.3.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.14.m8.2.3.3.2" xref="S3.SS3.SSS2.p2.14.m8.2.3.3.1.cmml"><mo id="S3.SS3.SSS2.p2.14.m8.2.3.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.14.m8.2.3.3.1.cmml">(</mo><mo id="S3.SS3.SSS2.p2.14.m8.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.14.m8.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.14.m8.2.3.3.2.2" rspace="0em" xref="S3.SS3.SSS2.p2.14.m8.2.3.3.1.cmml">,</mo><mo id="S3.SS3.SSS2.p2.14.m8.2.2" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.14.m8.2.2.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.14.m8.2.3.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.14.m8.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.14.m8.2b"><apply id="S3.SS3.SSS2.p2.14.m8.2.3.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.3"><times id="S3.SS3.SSS2.p2.14.m8.2.3.1.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.3.1"></times><ci id="S3.SS3.SSS2.p2.14.m8.2.3.2a.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.3.2"><mtext id="S3.SS3.SSS2.p2.14.m8.2.3.2.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.3.2">M</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.14.m8.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.3.3.2"><ci id="S3.SS3.SSS2.p2.14.m8.1.1.cmml" xref="S3.SS3.SSS2.p2.14.m8.1.1">⋅</ci><ci id="S3.SS3.SSS2.p2.14.m8.2.2.cmml" xref="S3.SS3.SSS2.p2.14.m8.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.14.m8.2c">\text{M}(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.14.m8.2d">M ( ⋅ , ⋅ )</annotation></semantics></math> indicates better performance. If a smaller value of <math alttext="\text{M}(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.15.m9.2"><semantics id="S3.SS3.SSS2.p2.15.m9.2a"><mrow id="S3.SS3.SSS2.p2.15.m9.2.3" xref="S3.SS3.SSS2.p2.15.m9.2.3.cmml"><mtext id="S3.SS3.SSS2.p2.15.m9.2.3.2" xref="S3.SS3.SSS2.p2.15.m9.2.3.2a.cmml">M</mtext><mo id="S3.SS3.SSS2.p2.15.m9.2.3.1" xref="S3.SS3.SSS2.p2.15.m9.2.3.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.15.m9.2.3.3.2" xref="S3.SS3.SSS2.p2.15.m9.2.3.3.1.cmml"><mo id="S3.SS3.SSS2.p2.15.m9.2.3.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.15.m9.2.3.3.1.cmml">(</mo><mo id="S3.SS3.SSS2.p2.15.m9.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.15.m9.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.15.m9.2.3.3.2.2" rspace="0em" xref="S3.SS3.SSS2.p2.15.m9.2.3.3.1.cmml">,</mo><mo id="S3.SS3.SSS2.p2.15.m9.2.2" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.15.m9.2.2.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.15.m9.2.3.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.15.m9.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.15.m9.2b"><apply id="S3.SS3.SSS2.p2.15.m9.2.3.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.3"><times id="S3.SS3.SSS2.p2.15.m9.2.3.1.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.3.1"></times><ci id="S3.SS3.SSS2.p2.15.m9.2.3.2a.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.3.2"><mtext id="S3.SS3.SSS2.p2.15.m9.2.3.2.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.3.2">M</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.15.m9.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.3.3.2"><ci id="S3.SS3.SSS2.p2.15.m9.1.1.cmml" xref="S3.SS3.SSS2.p2.15.m9.1.1">⋅</ci><ci id="S3.SS3.SSS2.p2.15.m9.2.2.cmml" xref="S3.SS3.SSS2.p2.15.m9.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.15.m9.2c">\text{M}(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.15.m9.2d">M ( ⋅ , ⋅ )</annotation></semantics></math> indicates better performance, we can replace <math alttext="\text{M}(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.16.m10.2"><semantics id="S3.SS3.SSS2.p2.16.m10.2a"><mrow id="S3.SS3.SSS2.p2.16.m10.2.3" xref="S3.SS3.SSS2.p2.16.m10.2.3.cmml"><mtext id="S3.SS3.SSS2.p2.16.m10.2.3.2" xref="S3.SS3.SSS2.p2.16.m10.2.3.2a.cmml">M</mtext><mo id="S3.SS3.SSS2.p2.16.m10.2.3.1" xref="S3.SS3.SSS2.p2.16.m10.2.3.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.16.m10.2.3.3.2" xref="S3.SS3.SSS2.p2.16.m10.2.3.3.1.cmml"><mo id="S3.SS3.SSS2.p2.16.m10.2.3.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.16.m10.2.3.3.1.cmml">(</mo><mo id="S3.SS3.SSS2.p2.16.m10.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.16.m10.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.16.m10.2.3.3.2.2" rspace="0em" xref="S3.SS3.SSS2.p2.16.m10.2.3.3.1.cmml">,</mo><mo id="S3.SS3.SSS2.p2.16.m10.2.2" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.16.m10.2.2.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.16.m10.2.3.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.16.m10.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.16.m10.2b"><apply id="S3.SS3.SSS2.p2.16.m10.2.3.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.3"><times id="S3.SS3.SSS2.p2.16.m10.2.3.1.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.3.1"></times><ci id="S3.SS3.SSS2.p2.16.m10.2.3.2a.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.3.2"><mtext id="S3.SS3.SSS2.p2.16.m10.2.3.2.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.3.2">M</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.16.m10.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.3.3.2"><ci id="S3.SS3.SSS2.p2.16.m10.1.1.cmml" xref="S3.SS3.SSS2.p2.16.m10.1.1">⋅</ci><ci id="S3.SS3.SSS2.p2.16.m10.2.2.cmml" xref="S3.SS3.SSS2.p2.16.m10.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.16.m10.2c">\text{M}(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.16.m10.2d">M ( ⋅ , ⋅ )</annotation></semantics></math> with <math alttext="-\text{M}(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.17.m11.2"><semantics id="S3.SS3.SSS2.p2.17.m11.2a"><mrow id="S3.SS3.SSS2.p2.17.m11.2.3" xref="S3.SS3.SSS2.p2.17.m11.2.3.cmml"><mo id="S3.SS3.SSS2.p2.17.m11.2.3a" xref="S3.SS3.SSS2.p2.17.m11.2.3.cmml">−</mo><mrow id="S3.SS3.SSS2.p2.17.m11.2.3.2" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.cmml"><mtext id="S3.SS3.SSS2.p2.17.m11.2.3.2.2" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.2a.cmml">M</mtext><mo id="S3.SS3.SSS2.p2.17.m11.2.3.2.1" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.17.m11.2.3.2.3.2" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.3.1.cmml"><mo id="S3.SS3.SSS2.p2.17.m11.2.3.2.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.3.1.cmml">(</mo><mo id="S3.SS3.SSS2.p2.17.m11.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.17.m11.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.17.m11.2.3.2.3.2.2" rspace="0em" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.3.1.cmml">,</mo><mo id="S3.SS3.SSS2.p2.17.m11.2.2" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.17.m11.2.2.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.17.m11.2.3.2.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.17.m11.2b"><apply id="S3.SS3.SSS2.p2.17.m11.2.3.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3"><minus id="S3.SS3.SSS2.p2.17.m11.2.3.1.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3"></minus><apply id="S3.SS3.SSS2.p2.17.m11.2.3.2.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3.2"><times id="S3.SS3.SSS2.p2.17.m11.2.3.2.1.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.1"></times><ci id="S3.SS3.SSS2.p2.17.m11.2.3.2.2a.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.2"><mtext id="S3.SS3.SSS2.p2.17.m11.2.3.2.2.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.2">M</mtext></ci><interval closure="open" id="S3.SS3.SSS2.p2.17.m11.2.3.2.3.1.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.3.2.3.2"><ci id="S3.SS3.SSS2.p2.17.m11.1.1.cmml" xref="S3.SS3.SSS2.p2.17.m11.1.1">⋅</ci><ci id="S3.SS3.SSS2.p2.17.m11.2.2.cmml" xref="S3.SS3.SSS2.p2.17.m11.2.2">⋅</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.17.m11.2c">-\text{M}(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.17.m11.2d">- M ( ⋅ , ⋅ )</annotation></semantics></math> in the calculation of <math alttext="p_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.18.m12.1"><semantics id="S3.SS3.SSS2.p2.18.m12.1a"><msub id="S3.SS3.SSS2.p2.18.m12.1.1" xref="S3.SS3.SSS2.p2.18.m12.1.1.cmml"><mi id="S3.SS3.SSS2.p2.18.m12.1.1.2" xref="S3.SS3.SSS2.p2.18.m12.1.1.2.cmml">p</mi><mi id="S3.SS3.SSS2.p2.18.m12.1.1.3" xref="S3.SS3.SSS2.p2.18.m12.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.18.m12.1b"><apply id="S3.SS3.SSS2.p2.18.m12.1.1.cmml" xref="S3.SS3.SSS2.p2.18.m12.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.18.m12.1.1.1.cmml" xref="S3.SS3.SSS2.p2.18.m12.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.18.m12.1.1.2.cmml" xref="S3.SS3.SSS2.p2.18.m12.1.1.2">𝑝</ci><ci id="S3.SS3.SSS2.p2.18.m12.1.1.3.cmml" xref="S3.SS3.SSS2.p2.18.m12.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.18.m12.1c">p_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.18.m12.1d">italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. It is easy to see that a useful <math alttext="d_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.19.m13.1"><semantics id="S3.SS3.SSS2.p2.19.m13.1a"><msub id="S3.SS3.SSS2.p2.19.m13.1.1" xref="S3.SS3.SSS2.p2.19.m13.1.1.cmml"><mi id="S3.SS3.SSS2.p2.19.m13.1.1.2" xref="S3.SS3.SSS2.p2.19.m13.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.19.m13.1.1.3" xref="S3.SS3.SSS2.p2.19.m13.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.19.m13.1b"><apply id="S3.SS3.SSS2.p2.19.m13.1.1.cmml" xref="S3.SS3.SSS2.p2.19.m13.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.19.m13.1.1.1.cmml" xref="S3.SS3.SSS2.p2.19.m13.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.19.m13.1.1.2.cmml" xref="S3.SS3.SSS2.p2.19.m13.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.19.m13.1.1.3.cmml" xref="S3.SS3.SSS2.p2.19.m13.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.19.m13.1c">d_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.19.m13.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> will have a large <math alttext="p_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.20.m14.1"><semantics id="S3.SS3.SSS2.p2.20.m14.1a"><msub id="S3.SS3.SSS2.p2.20.m14.1.1" xref="S3.SS3.SSS2.p2.20.m14.1.1.cmml"><mi id="S3.SS3.SSS2.p2.20.m14.1.1.2" xref="S3.SS3.SSS2.p2.20.m14.1.1.2.cmml">p</mi><mi id="S3.SS3.SSS2.p2.20.m14.1.1.3" xref="S3.SS3.SSS2.p2.20.m14.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.20.m14.1b"><apply id="S3.SS3.SSS2.p2.20.m14.1.1.cmml" xref="S3.SS3.SSS2.p2.20.m14.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.20.m14.1.1.1.cmml" xref="S3.SS3.SSS2.p2.20.m14.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.20.m14.1.1.2.cmml" xref="S3.SS3.SSS2.p2.20.m14.1.1.2">𝑝</ci><ci id="S3.SS3.SSS2.p2.20.m14.1.1.3.cmml" xref="S3.SS3.SSS2.p2.20.m14.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.20.m14.1c">p_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.20.m14.1d">italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and hence <math alttext="p_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.21.m15.1"><semantics id="S3.SS3.SSS2.p2.21.m15.1a"><msub id="S3.SS3.SSS2.p2.21.m15.1.1" xref="S3.SS3.SSS2.p2.21.m15.1.1.cmml"><mi id="S3.SS3.SSS2.p2.21.m15.1.1.2" xref="S3.SS3.SSS2.p2.21.m15.1.1.2.cmml">p</mi><mi id="S3.SS3.SSS2.p2.21.m15.1.1.3" xref="S3.SS3.SSS2.p2.21.m15.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.21.m15.1b"><apply id="S3.SS3.SSS2.p2.21.m15.1.1.cmml" xref="S3.SS3.SSS2.p2.21.m15.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.21.m15.1.1.1.cmml" xref="S3.SS3.SSS2.p2.21.m15.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.21.m15.1.1.2.cmml" xref="S3.SS3.SSS2.p2.21.m15.1.1.2">𝑝</ci><ci id="S3.SS3.SSS2.p2.21.m15.1.1.3.cmml" xref="S3.SS3.SSS2.p2.21.m15.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.21.m15.1c">p_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.21.m15.1d">italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> can be used as a supervised signal to guide the learning of the retriever. That is, we could make the similarity score returned by the retriever close to <math alttext="P_{\mathcal{R}}=\{p_{i}\}_{i=1}^{K}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.22.m16.1"><semantics id="S3.SS3.SSS2.p2.22.m16.1a"><mrow id="S3.SS3.SSS2.p2.22.m16.1.1" xref="S3.SS3.SSS2.p2.22.m16.1.1.cmml"><msub id="S3.SS3.SSS2.p2.22.m16.1.1.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.22.m16.1.1.3.2" xref="S3.SS3.SSS2.p2.22.m16.1.1.3.2.cmml">P</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.22.m16.1.1.3.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.3.3.cmml">ℛ</mi></msub><mo id="S3.SS3.SSS2.p2.22.m16.1.1.2" xref="S3.SS3.SSS2.p2.22.m16.1.1.2.cmml">=</mo><msubsup id="S3.SS3.SSS2.p2.22.m16.1.1.1" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.cmml"><mrow id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.2.cmml"><mo id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.2.cmml">{</mo><msub id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.2" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.2.cmml">p</mi><mi id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.2" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.2.cmml">i</mi><mo id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.1" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.SS3.SSS2.p2.22.m16.1.1.1.3" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.3.cmml">K</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.22.m16.1b"><apply id="S3.SS3.SSS2.p2.22.m16.1.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1"><eq id="S3.SS3.SSS2.p2.22.m16.1.1.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.2"></eq><apply id="S3.SS3.SSS2.p2.22.m16.1.1.3.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.22.m16.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS2.p2.22.m16.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.3.2">𝑃</ci><ci id="S3.SS3.SSS2.p2.22.m16.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.3.3">ℛ</ci></apply><apply id="S3.SS3.SSS2.p2.22.m16.1.1.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.22.m16.1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1">superscript</csymbol><apply id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1">subscript</csymbol><set id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1"><apply id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.2">𝑝</ci><ci id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3"><eq id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.1"></eq><ci id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.2">𝑖</ci><cn id="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS3.SSS2.p2.22.m16.1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.22.m16.1.1.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.22.m16.1c">P_{\mathcal{R}}=\{p_{i}\}_{i=1}^{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.22.m16.1d">italic_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT = { italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>.
Formally, suppose we have top-<math alttext="K" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.23.m17.1"><semantics id="S3.SS3.SSS2.p2.23.m17.1a"><mi id="S3.SS3.SSS2.p2.23.m17.1.1" xref="S3.SS3.SSS2.p2.23.m17.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.23.m17.1b"><ci id="S3.SS3.SSS2.p2.23.m17.1.1.cmml" xref="S3.SS3.SSS2.p2.23.m17.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.23.m17.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.23.m17.1d">italic_K</annotation></semantics></math> retrieval stories <math alttext="D_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.24.m18.1"><semantics id="S3.SS3.SSS2.p2.24.m18.1a"><msub id="S3.SS3.SSS2.p2.24.m18.1.1" xref="S3.SS3.SSS2.p2.24.m18.1.1.cmml"><mi id="S3.SS3.SSS2.p2.24.m18.1.1.2" xref="S3.SS3.SSS2.p2.24.m18.1.1.2.cmml">D</mi><mi id="S3.SS3.SSS2.p2.24.m18.1.1.3" xref="S3.SS3.SSS2.p2.24.m18.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.24.m18.1b"><apply id="S3.SS3.SSS2.p2.24.m18.1.1.cmml" xref="S3.SS3.SSS2.p2.24.m18.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.24.m18.1.1.1.cmml" xref="S3.SS3.SSS2.p2.24.m18.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.24.m18.1.1.2.cmml" xref="S3.SS3.SSS2.p2.24.m18.1.1.2">𝐷</ci><ci id="S3.SS3.SSS2.p2.24.m18.1.1.3.cmml" xref="S3.SS3.SSS2.p2.24.m18.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.24.m18.1c">D_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.24.m18.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> with its retrieval scores <math alttext="S_{q}\in\mathbb{R}^{K}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.25.m19.1"><semantics id="S3.SS3.SSS2.p2.25.m19.1a"><mrow id="S3.SS3.SSS2.p2.25.m19.1.1" xref="S3.SS3.SSS2.p2.25.m19.1.1.cmml"><msub id="S3.SS3.SSS2.p2.25.m19.1.1.2" xref="S3.SS3.SSS2.p2.25.m19.1.1.2.cmml"><mi id="S3.SS3.SSS2.p2.25.m19.1.1.2.2" xref="S3.SS3.SSS2.p2.25.m19.1.1.2.2.cmml">S</mi><mi id="S3.SS3.SSS2.p2.25.m19.1.1.2.3" xref="S3.SS3.SSS2.p2.25.m19.1.1.2.3.cmml">q</mi></msub><mo id="S3.SS3.SSS2.p2.25.m19.1.1.1" xref="S3.SS3.SSS2.p2.25.m19.1.1.1.cmml">∈</mo><msup id="S3.SS3.SSS2.p2.25.m19.1.1.3" xref="S3.SS3.SSS2.p2.25.m19.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.25.m19.1.1.3.2" xref="S3.SS3.SSS2.p2.25.m19.1.1.3.2.cmml">ℝ</mi><mi id="S3.SS3.SSS2.p2.25.m19.1.1.3.3" xref="S3.SS3.SSS2.p2.25.m19.1.1.3.3.cmml">K</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.25.m19.1b"><apply id="S3.SS3.SSS2.p2.25.m19.1.1.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1"><in id="S3.SS3.SSS2.p2.25.m19.1.1.1.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.1"></in><apply id="S3.SS3.SSS2.p2.25.m19.1.1.2.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.25.m19.1.1.2.1.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.2">subscript</csymbol><ci id="S3.SS3.SSS2.p2.25.m19.1.1.2.2.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.2.2">𝑆</ci><ci id="S3.SS3.SSS2.p2.25.m19.1.1.2.3.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.2.3">𝑞</ci></apply><apply id="S3.SS3.SSS2.p2.25.m19.1.1.3.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.25.m19.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.3">superscript</csymbol><ci id="S3.SS3.SSS2.p2.25.m19.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.3.2">ℝ</ci><ci id="S3.SS3.SSS2.p2.25.m19.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.25.m19.1.1.3.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.25.m19.1c">S_{q}\in\mathbb{R}^{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.25.m19.1d">italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ∈ blackboard_R start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math> with respect to the query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.26.m20.1"><semantics id="S3.SS3.SSS2.p2.26.m20.1a"><mi id="S3.SS3.SSS2.p2.26.m20.1.1" xref="S3.SS3.SSS2.p2.26.m20.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.26.m20.1b"><ci id="S3.SS3.SSS2.p2.26.m20.1.1.cmml" xref="S3.SS3.SSS2.p2.26.m20.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.26.m20.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.26.m20.1d">italic_q</annotation></semantics></math>, we can minimize the KL divergence between <math alttext="S_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.27.m21.1"><semantics id="S3.SS3.SSS2.p2.27.m21.1a"><msub id="S3.SS3.SSS2.p2.27.m21.1.1" xref="S3.SS3.SSS2.p2.27.m21.1.1.cmml"><mi id="S3.SS3.SSS2.p2.27.m21.1.1.2" xref="S3.SS3.SSS2.p2.27.m21.1.1.2.cmml">S</mi><mi id="S3.SS3.SSS2.p2.27.m21.1.1.3" xref="S3.SS3.SSS2.p2.27.m21.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.27.m21.1b"><apply id="S3.SS3.SSS2.p2.27.m21.1.1.cmml" xref="S3.SS3.SSS2.p2.27.m21.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.27.m21.1.1.1.cmml" xref="S3.SS3.SSS2.p2.27.m21.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.27.m21.1.1.2.cmml" xref="S3.SS3.SSS2.p2.27.m21.1.1.2">𝑆</ci><ci id="S3.SS3.SSS2.p2.27.m21.1.1.3.cmml" xref="S3.SS3.SSS2.p2.27.m21.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.27.m21.1c">S_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.27.m21.1d">italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="P_{\mathcal{R}}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.28.m22.1"><semantics id="S3.SS3.SSS2.p2.28.m22.1a"><msub id="S3.SS3.SSS2.p2.28.m22.1.1" xref="S3.SS3.SSS2.p2.28.m22.1.1.cmml"><mi id="S3.SS3.SSS2.p2.28.m22.1.1.2" xref="S3.SS3.SSS2.p2.28.m22.1.1.2.cmml">P</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.28.m22.1.1.3" xref="S3.SS3.SSS2.p2.28.m22.1.1.3.cmml">ℛ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.28.m22.1b"><apply id="S3.SS3.SSS2.p2.28.m22.1.1.cmml" xref="S3.SS3.SSS2.p2.28.m22.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.28.m22.1.1.1.cmml" xref="S3.SS3.SSS2.p2.28.m22.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.28.m22.1.1.2.cmml" xref="S3.SS3.SSS2.p2.28.m22.1.1.2">𝑃</ci><ci id="S3.SS3.SSS2.p2.28.m22.1.1.3.cmml" xref="S3.SS3.SSS2.p2.28.m22.1.1.3">ℛ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.28.m22.1c">P_{\mathcal{R}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.28.m22.1d">italic_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT</annotation></semantics></math> as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathcal{L}_{\mathcal{R}}=\mathrm{KL}(P_{\mathcal{R}},\sigma(S_{q}/\tau_{s}))," class="ltx_Math" display="block" id="S3.E2.m1.1"><semantics id="S3.E2.m1.1a"><mrow id="S3.E2.m1.1.1.1" xref="S3.E2.m1.1.1.1.1.cmml"><mrow id="S3.E2.m1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.cmml"><msub id="S3.E2.m1.1.1.1.1.4" xref="S3.E2.m1.1.1.1.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.1.1.1.1.4.2" xref="S3.E2.m1.1.1.1.1.4.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.1.1.1.1.4.3" xref="S3.E2.m1.1.1.1.1.4.3.cmml">ℛ</mi></msub><mo id="S3.E2.m1.1.1.1.1.3" xref="S3.E2.m1.1.1.1.1.3.cmml">=</mo><mrow id="S3.E2.m1.1.1.1.1.2" xref="S3.E2.m1.1.1.1.1.2.cmml"><mi id="S3.E2.m1.1.1.1.1.2.4" xref="S3.E2.m1.1.1.1.1.2.4.cmml">KL</mi><mo id="S3.E2.m1.1.1.1.1.2.3" xref="S3.E2.m1.1.1.1.1.2.3.cmml">⁢</mo><mrow id="S3.E2.m1.1.1.1.1.2.2.2" xref="S3.E2.m1.1.1.1.1.2.2.3.cmml"><mo id="S3.E2.m1.1.1.1.1.2.2.2.3" stretchy="false" xref="S3.E2.m1.1.1.1.1.2.2.3.cmml">(</mo><msub id="S3.E2.m1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.1.1.1.1.1.1.1.1.2" xref="S3.E2.m1.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.1.1.1.1.1.1.1.1.3.cmml">ℛ</mi></msub><mo id="S3.E2.m1.1.1.1.1.2.2.2.4" xref="S3.E2.m1.1.1.1.1.2.2.3.cmml">,</mo><mrow id="S3.E2.m1.1.1.1.1.2.2.2.2" xref="S3.E2.m1.1.1.1.1.2.2.2.2.cmml"><mi id="S3.E2.m1.1.1.1.1.2.2.2.2.3" xref="S3.E2.m1.1.1.1.1.2.2.2.2.3.cmml">σ</mi><mo id="S3.E2.m1.1.1.1.1.2.2.2.2.2" xref="S3.E2.m1.1.1.1.1.2.2.2.2.2.cmml">⁢</mo><mrow id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.cmml"><mo id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.2" stretchy="false" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.cmml"><msub id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.cmml"><mi id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.2" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.cmml">S</mi><mi id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.3" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.cmml">q</mi></msub><mo id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.1" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.1.cmml">/</mo><msub id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.cmml"><mi id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.2" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.2.cmml">τ</mi><mi id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.3" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.3.cmml">s</mi></msub></mrow><mo id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.3" stretchy="false" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.1.1.1.1.2.2.2.5" stretchy="false" xref="S3.E2.m1.1.1.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E2.m1.1.1.1.2" xref="S3.E2.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.1b"><apply id="S3.E2.m1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1"><eq id="S3.E2.m1.1.1.1.1.3.cmml" xref="S3.E2.m1.1.1.1.1.3"></eq><apply id="S3.E2.m1.1.1.1.1.4.cmml" xref="S3.E2.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.4.1.cmml" xref="S3.E2.m1.1.1.1.1.4">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.4.2.cmml" xref="S3.E2.m1.1.1.1.1.4.2">ℒ</ci><ci id="S3.E2.m1.1.1.1.1.4.3.cmml" xref="S3.E2.m1.1.1.1.1.4.3">ℛ</ci></apply><apply id="S3.E2.m1.1.1.1.1.2.cmml" xref="S3.E2.m1.1.1.1.1.2"><times id="S3.E2.m1.1.1.1.1.2.3.cmml" xref="S3.E2.m1.1.1.1.1.2.3"></times><ci id="S3.E2.m1.1.1.1.1.2.4.cmml" xref="S3.E2.m1.1.1.1.1.2.4">KL</ci><interval closure="open" id="S3.E2.m1.1.1.1.1.2.2.3.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2"><apply id="S3.E2.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="S3.E2.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.1.1.1.1.1.1.1.1.3">ℛ</ci></apply><apply id="S3.E2.m1.1.1.1.1.2.2.2.2.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2"><times id="S3.E2.m1.1.1.1.1.2.2.2.2.2.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.2"></times><ci id="S3.E2.m1.1.1.1.1.2.2.2.2.3.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.3">𝜎</ci><apply id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1"><divide id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.1"></divide><apply id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.1.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.2">𝑆</ci><ci id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.2.3">𝑞</ci></apply><apply id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.1.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.2.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.2">𝜏</ci><ci id="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.3.cmml" xref="S3.E2.m1.1.1.1.1.2.2.2.2.1.1.1.3.3">𝑠</ci></apply></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.1c">\mathcal{L}_{\mathcal{R}}=\mathrm{KL}(P_{\mathcal{R}},\sigma(S_{q}/\tau_{s})),</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.1d">caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT = roman_KL ( italic_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT , italic_σ ( italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT / italic_τ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT ) ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS2.p2.32">where <math alttext="\mathrm{KL}(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.29.m1.2"><semantics id="S3.SS3.SSS2.p2.29.m1.2a"><mrow id="S3.SS3.SSS2.p2.29.m1.2.3" xref="S3.SS3.SSS2.p2.29.m1.2.3.cmml"><mi id="S3.SS3.SSS2.p2.29.m1.2.3.2" xref="S3.SS3.SSS2.p2.29.m1.2.3.2.cmml">KL</mi><mo id="S3.SS3.SSS2.p2.29.m1.2.3.1" xref="S3.SS3.SSS2.p2.29.m1.2.3.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.29.m1.2.3.3.2" xref="S3.SS3.SSS2.p2.29.m1.2.3.3.1.cmml"><mo id="S3.SS3.SSS2.p2.29.m1.2.3.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.29.m1.2.3.3.1.cmml">(</mo><mo id="S3.SS3.SSS2.p2.29.m1.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.29.m1.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.29.m1.2.3.3.2.2" rspace="0em" xref="S3.SS3.SSS2.p2.29.m1.2.3.3.1.cmml">,</mo><mo id="S3.SS3.SSS2.p2.29.m1.2.2" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.29.m1.2.2.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.29.m1.2.3.3.2.3" stretchy="false" xref="S3.SS3.SSS2.p2.29.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.29.m1.2b"><apply id="S3.SS3.SSS2.p2.29.m1.2.3.cmml" xref="S3.SS3.SSS2.p2.29.m1.2.3"><times id="S3.SS3.SSS2.p2.29.m1.2.3.1.cmml" xref="S3.SS3.SSS2.p2.29.m1.2.3.1"></times><ci id="S3.SS3.SSS2.p2.29.m1.2.3.2.cmml" xref="S3.SS3.SSS2.p2.29.m1.2.3.2">KL</ci><interval closure="open" id="S3.SS3.SSS2.p2.29.m1.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.29.m1.2.3.3.2"><ci id="S3.SS3.SSS2.p2.29.m1.1.1.cmml" xref="S3.SS3.SSS2.p2.29.m1.1.1">⋅</ci><ci id="S3.SS3.SSS2.p2.29.m1.2.2.cmml" xref="S3.SS3.SSS2.p2.29.m1.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.29.m1.2c">\mathrm{KL}(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.29.m1.2d">roman_KL ( ⋅ , ⋅ )</annotation></semantics></math> denotes the KL divergence, <math alttext="\sigma(\cdot)" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.30.m2.1"><semantics id="S3.SS3.SSS2.p2.30.m2.1a"><mrow id="S3.SS3.SSS2.p2.30.m2.1.2" xref="S3.SS3.SSS2.p2.30.m2.1.2.cmml"><mi id="S3.SS3.SSS2.p2.30.m2.1.2.2" xref="S3.SS3.SSS2.p2.30.m2.1.2.2.cmml">σ</mi><mo id="S3.SS3.SSS2.p2.30.m2.1.2.1" xref="S3.SS3.SSS2.p2.30.m2.1.2.1.cmml">⁢</mo><mrow id="S3.SS3.SSS2.p2.30.m2.1.2.3.2" xref="S3.SS3.SSS2.p2.30.m2.1.2.cmml"><mo id="S3.SS3.SSS2.p2.30.m2.1.2.3.2.1" stretchy="false" xref="S3.SS3.SSS2.p2.30.m2.1.2.cmml">(</mo><mo id="S3.SS3.SSS2.p2.30.m2.1.1" lspace="0em" rspace="0em" xref="S3.SS3.SSS2.p2.30.m2.1.1.cmml">⋅</mo><mo id="S3.SS3.SSS2.p2.30.m2.1.2.3.2.2" stretchy="false" xref="S3.SS3.SSS2.p2.30.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.30.m2.1b"><apply id="S3.SS3.SSS2.p2.30.m2.1.2.cmml" xref="S3.SS3.SSS2.p2.30.m2.1.2"><times id="S3.SS3.SSS2.p2.30.m2.1.2.1.cmml" xref="S3.SS3.SSS2.p2.30.m2.1.2.1"></times><ci id="S3.SS3.SSS2.p2.30.m2.1.2.2.cmml" xref="S3.SS3.SSS2.p2.30.m2.1.2.2">𝜎</ci><ci id="S3.SS3.SSS2.p2.30.m2.1.1.cmml" xref="S3.SS3.SSS2.p2.30.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.30.m2.1c">\sigma(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.30.m2.1d">italic_σ ( ⋅ )</annotation></semantics></math> denotes the softmax function, and <math alttext="\tau_{s}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.31.m3.1"><semantics id="S3.SS3.SSS2.p2.31.m3.1a"><msub id="S3.SS3.SSS2.p2.31.m3.1.1" xref="S3.SS3.SSS2.p2.31.m3.1.1.cmml"><mi id="S3.SS3.SSS2.p2.31.m3.1.1.2" xref="S3.SS3.SSS2.p2.31.m3.1.1.2.cmml">τ</mi><mi id="S3.SS3.SSS2.p2.31.m3.1.1.3" xref="S3.SS3.SSS2.p2.31.m3.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.31.m3.1b"><apply id="S3.SS3.SSS2.p2.31.m3.1.1.cmml" xref="S3.SS3.SSS2.p2.31.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.31.m3.1.1.1.cmml" xref="S3.SS3.SSS2.p2.31.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.31.m3.1.1.2.cmml" xref="S3.SS3.SSS2.p2.31.m3.1.1.2">𝜏</ci><ci id="S3.SS3.SSS2.p2.31.m3.1.1.3.cmml" xref="S3.SS3.SSS2.p2.31.m3.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.31.m3.1c">\tau_{s}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.31.m3.1d">italic_τ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> is a temperature hyperparameter to control the sensitivity of the similarity scores. Combining <math alttext="\mathcal{L}_{\mathcal{R}}" class="ltx_Math" display="inline" id="S3.SS3.SSS2.p2.32.m4.1"><semantics id="S3.SS3.SSS2.p2.32.m4.1a"><msub id="S3.SS3.SSS2.p2.32.m4.1.1" xref="S3.SS3.SSS2.p2.32.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.32.m4.1.1.2" xref="S3.SS3.SSS2.p2.32.m4.1.1.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS2.p2.32.m4.1.1.3" xref="S3.SS3.SSS2.p2.32.m4.1.1.3.cmml">ℛ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.32.m4.1b"><apply id="S3.SS3.SSS2.p2.32.m4.1.1.cmml" xref="S3.SS3.SSS2.p2.32.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.32.m4.1.1.1.cmml" xref="S3.SS3.SSS2.p2.32.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.32.m4.1.1.2.cmml" xref="S3.SS3.SSS2.p2.32.m4.1.1.2">ℒ</ci><ci id="S3.SS3.SSS2.p2.32.m4.1.1.3.cmml" xref="S3.SS3.SSS2.p2.32.m4.1.1.3">ℛ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.32.m4.1c">\mathcal{L}_{\mathcal{R}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS2.p2.32.m4.1d">caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT</annotation></semantics></math> with the retrieval candidate augmentation introduced in the next section, we can update the retriever.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.3 </span>Retrieval Candidate Augmentation</h4>
<div class="ltx_para" id="S3.SS3.SSS3.p1">
<p class="ltx_p" id="S3.SS3.SSS3.p1.3">During the training process, there is a risk that the retriever gets stuck in a local optimum and consistently retrieves a fixed set or a narrow range of candidates. Consequently, the generator fails to learn from the retriever and disregards the retrieved content. To address this challenge, we design retrieval candidate augmentation to incorporate randomly sampled stories to encourage the framework to explore a wider range of candidates. Specifically, we first replace each <math alttext="d_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.1.m1.1"><semantics id="S3.SS3.SSS3.p1.1.m1.1a"><msub id="S3.SS3.SSS3.p1.1.m1.1.1" xref="S3.SS3.SSS3.p1.1.m1.1.1.cmml"><mi id="S3.SS3.SSS3.p1.1.m1.1.1.2" xref="S3.SS3.SSS3.p1.1.m1.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS3.p1.1.m1.1.1.3" xref="S3.SS3.SSS3.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.1.m1.1b"><apply id="S3.SS3.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.1.m1.1.1.2">𝑑</ci><ci id="S3.SS3.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.1.m1.1c">d_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.1.m1.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> with a randomly selected candidate <math alttext="d_{i}^{aug}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.2.m2.1"><semantics id="S3.SS3.SSS3.p1.2.m2.1a"><msubsup id="S3.SS3.SSS3.p1.2.m2.1.1" xref="S3.SS3.SSS3.p1.2.m2.1.1.cmml"><mi id="S3.SS3.SSS3.p1.2.m2.1.1.2.2" xref="S3.SS3.SSS3.p1.2.m2.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS3.p1.2.m2.1.1.2.3" xref="S3.SS3.SSS3.p1.2.m2.1.1.2.3.cmml">i</mi><mrow id="S3.SS3.SSS3.p1.2.m2.1.1.3" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.2.m2.1.1.3.2" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.2.m2.1.1.3.1" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.2.m2.1.1.3.3" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.2.m2.1.1.3.1a" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.2.m2.1.1.3.4" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.2.m2.1b"><apply id="S3.SS3.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.2.m2.1.1.1.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.2.m2.1.1.2.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.2.m2.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.2.m2.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS3.p1.2.m2.1.1.2.3.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS3.p1.2.m2.1.1.3.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.3"><times id="S3.SS3.SSS3.p1.2.m2.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.2.m2.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.2.m2.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.2.m2.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.2.m2.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.2.m2.1c">d_{i}^{aug}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.2.m2.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> at a probability of <math alttext="\rho" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.3.m3.1"><semantics id="S3.SS3.SSS3.p1.3.m3.1a"><mi id="S3.SS3.SSS3.p1.3.m3.1.1" xref="S3.SS3.SSS3.p1.3.m3.1.1.cmml">ρ</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.3.m3.1b"><ci id="S3.SS3.SSS3.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS3.p1.3.m3.1.1">𝜌</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.3.m3.1c">\rho</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.3.m3.1d">italic_ρ</annotation></semantics></math> as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="d_{i}^{aug}=\text{CandAug}(d_{i},\rho);d_{i}\in D_{q}," class="ltx_Math" display="block" id="S3.Ex2.m1.2"><semantics id="S3.Ex2.m1.2a"><mrow id="S3.Ex2.m1.2.2.1"><mrow id="S3.Ex2.m1.2.2.1.1.2" xref="S3.Ex2.m1.2.2.1.1.3.cmml"><mrow id="S3.Ex2.m1.2.2.1.1.1.1" xref="S3.Ex2.m1.2.2.1.1.1.1.cmml"><msubsup id="S3.Ex2.m1.2.2.1.1.1.1.3" xref="S3.Ex2.m1.2.2.1.1.1.1.3.cmml"><mi id="S3.Ex2.m1.2.2.1.1.1.1.3.2.2" xref="S3.Ex2.m1.2.2.1.1.1.1.3.2.2.cmml">d</mi><mi id="S3.Ex2.m1.2.2.1.1.1.1.3.2.3" xref="S3.Ex2.m1.2.2.1.1.1.1.3.2.3.cmml">i</mi><mrow id="S3.Ex2.m1.2.2.1.1.1.1.3.3" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.cmml"><mi id="S3.Ex2.m1.2.2.1.1.1.1.3.3.2" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.2.cmml">a</mi><mo id="S3.Ex2.m1.2.2.1.1.1.1.3.3.1" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.Ex2.m1.2.2.1.1.1.1.3.3.3" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.3.cmml">u</mi><mo id="S3.Ex2.m1.2.2.1.1.1.1.3.3.1a" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.Ex2.m1.2.2.1.1.1.1.3.3.4" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.Ex2.m1.2.2.1.1.1.1.2" xref="S3.Ex2.m1.2.2.1.1.1.1.2.cmml">=</mo><mrow id="S3.Ex2.m1.2.2.1.1.1.1.1" xref="S3.Ex2.m1.2.2.1.1.1.1.1.cmml"><mtext id="S3.Ex2.m1.2.2.1.1.1.1.1.3" xref="S3.Ex2.m1.2.2.1.1.1.1.1.3a.cmml">CandAug</mtext><mo id="S3.Ex2.m1.2.2.1.1.1.1.1.2" xref="S3.Ex2.m1.2.2.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml"><mo id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml">(</mo><msub id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mi id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.2.cmml">d</mi><mi id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.3" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.Ex2.m1.1.1" xref="S3.Ex2.m1.1.1.cmml">ρ</mi><mo id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.4" stretchy="false" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex2.m1.2.2.1.1.2.3" xref="S3.Ex2.m1.2.2.1.1.3a.cmml">;</mo><mrow id="S3.Ex2.m1.2.2.1.1.2.2" xref="S3.Ex2.m1.2.2.1.1.2.2.cmml"><msub id="S3.Ex2.m1.2.2.1.1.2.2.2" xref="S3.Ex2.m1.2.2.1.1.2.2.2.cmml"><mi id="S3.Ex2.m1.2.2.1.1.2.2.2.2" xref="S3.Ex2.m1.2.2.1.1.2.2.2.2.cmml">d</mi><mi id="S3.Ex2.m1.2.2.1.1.2.2.2.3" xref="S3.Ex2.m1.2.2.1.1.2.2.2.3.cmml">i</mi></msub><mo id="S3.Ex2.m1.2.2.1.1.2.2.1" xref="S3.Ex2.m1.2.2.1.1.2.2.1.cmml">∈</mo><msub id="S3.Ex2.m1.2.2.1.1.2.2.3" xref="S3.Ex2.m1.2.2.1.1.2.2.3.cmml"><mi id="S3.Ex2.m1.2.2.1.1.2.2.3.2" xref="S3.Ex2.m1.2.2.1.1.2.2.3.2.cmml">D</mi><mi id="S3.Ex2.m1.2.2.1.1.2.2.3.3" xref="S3.Ex2.m1.2.2.1.1.2.2.3.3.cmml">q</mi></msub></mrow></mrow><mo id="S3.Ex2.m1.2.2.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex2.m1.2b"><apply id="S3.Ex2.m1.2.2.1.1.3.cmml" xref="S3.Ex2.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.3a.cmml" xref="S3.Ex2.m1.2.2.1.1.2.3">formulae-sequence</csymbol><apply id="S3.Ex2.m1.2.2.1.1.1.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1"><eq id="S3.Ex2.m1.2.2.1.1.1.1.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.2"></eq><apply id="S3.Ex2.m1.2.2.1.1.1.1.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.1.1.3.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3">superscript</csymbol><apply id="S3.Ex2.m1.2.2.1.1.1.1.3.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.1.1.3.2.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3">subscript</csymbol><ci id="S3.Ex2.m1.2.2.1.1.1.1.3.2.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.2.2">𝑑</ci><ci id="S3.Ex2.m1.2.2.1.1.1.1.3.2.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.2.3">𝑖</ci></apply><apply id="S3.Ex2.m1.2.2.1.1.1.1.3.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3"><times id="S3.Ex2.m1.2.2.1.1.1.1.3.3.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.1"></times><ci id="S3.Ex2.m1.2.2.1.1.1.1.3.3.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.2">𝑎</ci><ci id="S3.Ex2.m1.2.2.1.1.1.1.3.3.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.3">𝑢</ci><ci id="S3.Ex2.m1.2.2.1.1.1.1.3.3.4.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.3.3.4">𝑔</ci></apply></apply><apply id="S3.Ex2.m1.2.2.1.1.1.1.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1"><times id="S3.Ex2.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.2"></times><ci id="S3.Ex2.m1.2.2.1.1.1.1.1.3a.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.3"><mtext id="S3.Ex2.m1.2.2.1.1.1.1.1.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.3">CandAug</mtext></ci><interval closure="open" id="S3.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1"><apply id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.2">𝑑</ci><ci id="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex2.m1.2.2.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><ci id="S3.Ex2.m1.1.1.cmml" xref="S3.Ex2.m1.1.1">𝜌</ci></interval></apply></apply><apply id="S3.Ex2.m1.2.2.1.1.2.2.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2"><in id="S3.Ex2.m1.2.2.1.1.2.2.1.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.1"></in><apply id="S3.Ex2.m1.2.2.1.1.2.2.2.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.2.2.2.1.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.2">subscript</csymbol><ci id="S3.Ex2.m1.2.2.1.1.2.2.2.2.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.2.2">𝑑</ci><ci id="S3.Ex2.m1.2.2.1.1.2.2.2.3.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.2.3">𝑖</ci></apply><apply id="S3.Ex2.m1.2.2.1.1.2.2.3.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.2.2.1.1.2.2.3.1.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.3">subscript</csymbol><ci id="S3.Ex2.m1.2.2.1.1.2.2.3.2.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.3.2">𝐷</ci><ci id="S3.Ex2.m1.2.2.1.1.2.2.3.3.cmml" xref="S3.Ex2.m1.2.2.1.1.2.2.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex2.m1.2c">d_{i}^{aug}=\text{CandAug}(d_{i},\rho);d_{i}\in D_{q},</annotation><annotation encoding="application/x-llamapun" id="S3.Ex2.m1.2d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = CandAug ( italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ρ ) ; italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS3.p1.12">where <math alttext="D_{q}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.4.m1.1"><semantics id="S3.SS3.SSS3.p1.4.m1.1a"><msub id="S3.SS3.SSS3.p1.4.m1.1.1" xref="S3.SS3.SSS3.p1.4.m1.1.1.cmml"><mi id="S3.SS3.SSS3.p1.4.m1.1.1.2" xref="S3.SS3.SSS3.p1.4.m1.1.1.2.cmml">D</mi><mi id="S3.SS3.SSS3.p1.4.m1.1.1.3" xref="S3.SS3.SSS3.p1.4.m1.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.4.m1.1b"><apply id="S3.SS3.SSS3.p1.4.m1.1.1.cmml" xref="S3.SS3.SSS3.p1.4.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.4.m1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.4.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.4.m1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.4.m1.1.1.2">𝐷</ci><ci id="S3.SS3.SSS3.p1.4.m1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.4.m1.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.4.m1.1c">D_{q}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.4.m1.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> denotes the set of retrieval stories, and forms a perturbed set <math alttext="D_{q}^{aug}=\{d_{i}^{aug}\}_{i=1}^{K}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.5.m2.1"><semantics id="S3.SS3.SSS3.p1.5.m2.1a"><mrow id="S3.SS3.SSS3.p1.5.m2.1.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.cmml"><msubsup id="S3.SS3.SSS3.p1.5.m2.1.1.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.2.2.cmml">D</mi><mi id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.2.3.cmml">q</mi><mrow id="S3.SS3.SSS3.p1.5.m2.1.1.3.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.cmml"><mi id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1a" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.4" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.SS3.SSS3.p1.5.m2.1.1.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.2.cmml">=</mo><msubsup id="S3.SS3.SSS3.p1.5.m2.1.1.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.cmml"><mrow id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.2.cmml"><mo id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.3.cmml">i</mi><mrow id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1a" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.4" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.2" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.2.cmml">i</mi><mo id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.1" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="S3.SS3.SSS3.p1.5.m2.1.1.1.3" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.3.cmml">K</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.5.m2.1b"><apply id="S3.SS3.SSS3.p1.5.m2.1.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1"><eq id="S3.SS3.SSS3.p1.5.m2.1.1.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.2"></eq><apply id="S3.SS3.SSS3.p1.5.m2.1.1.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3">superscript</csymbol><apply id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.2.2">𝐷</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.3.2.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.2.3">𝑞</ci></apply><apply id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3"><times id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.1"></times><ci id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.3.3.4.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.3.3.4">𝑔</ci></apply></apply><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1">subscript</csymbol><set id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1"><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3"><times id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.1.1.1.3.4">𝑔</ci></apply></apply></set><apply id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3"><eq id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.1"></eq><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.2">𝑖</ci><cn id="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS3.SSS3.p1.5.m2.1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.5.m2.1.1.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.5.m2.1c">D_{q}^{aug}=\{d_{i}^{aug}\}_{i=1}^{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.5.m2.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = { italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>. Then we can compute the dot product similarity between the query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.6.m3.1"><semantics id="S3.SS3.SSS3.p1.6.m3.1a"><mi id="S3.SS3.SSS3.p1.6.m3.1.1" xref="S3.SS3.SSS3.p1.6.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.6.m3.1b"><ci id="S3.SS3.SSS3.p1.6.m3.1.1.cmml" xref="S3.SS3.SSS3.p1.6.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.6.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.6.m3.1d">italic_q</annotation></semantics></math> and each <math alttext="d_{i}^{aug}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.7.m4.1"><semantics id="S3.SS3.SSS3.p1.7.m4.1a"><msubsup id="S3.SS3.SSS3.p1.7.m4.1.1" xref="S3.SS3.SSS3.p1.7.m4.1.1.cmml"><mi id="S3.SS3.SSS3.p1.7.m4.1.1.2.2" xref="S3.SS3.SSS3.p1.7.m4.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS3.p1.7.m4.1.1.2.3" xref="S3.SS3.SSS3.p1.7.m4.1.1.2.3.cmml">i</mi><mrow id="S3.SS3.SSS3.p1.7.m4.1.1.3" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.7.m4.1.1.3.2" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.7.m4.1.1.3.1" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.7.m4.1.1.3.3" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.7.m4.1.1.3.1a" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.7.m4.1.1.3.4" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.7.m4.1b"><apply id="S3.SS3.SSS3.p1.7.m4.1.1.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.7.m4.1.1.1.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.7.m4.1.1.2.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.7.m4.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.7.m4.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS3.p1.7.m4.1.1.2.3.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS3.p1.7.m4.1.1.3.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.3"><times id="S3.SS3.SSS3.p1.7.m4.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.7.m4.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.7.m4.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.7.m4.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.7.m4.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.7.m4.1c">d_{i}^{aug}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.7.m4.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> as the retrieval scores <math alttext="S_{q}^{aug}=\{s_{q,i}^{aug}\}_{i=1}^{K}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.8.m5.3"><semantics id="S3.SS3.SSS3.p1.8.m5.3a"><mrow id="S3.SS3.SSS3.p1.8.m5.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.cmml"><msubsup id="S3.SS3.SSS3.p1.8.m5.3.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.2.2.cmml">S</mi><mi id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.2.3.cmml">q</mi><mrow id="S3.SS3.SSS3.p1.8.m5.3.3.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1a" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.4" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.SS3.SSS3.p1.8.m5.3.3.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.2.cmml">=</mo><msubsup id="S3.SS3.SSS3.p1.8.m5.3.3.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.cmml"><mrow id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.2.cmml"><mo id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.2.cmml">{</mo><msubsup id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.2.cmml">s</mi><mrow id="S3.SS3.SSS3.p1.8.m5.2.2.2.4" xref="S3.SS3.SSS3.p1.8.m5.2.2.2.3.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.1.1.1.1" xref="S3.SS3.SSS3.p1.8.m5.1.1.1.1.cmml">q</mi><mo id="S3.SS3.SSS3.p1.8.m5.2.2.2.4.1" xref="S3.SS3.SSS3.p1.8.m5.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS3.p1.8.m5.2.2.2.2" xref="S3.SS3.SSS3.p1.8.m5.2.2.2.2.cmml">i</mi></mrow><mrow id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1a" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.4" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.2" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.2.cmml">i</mi><mo id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.1" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.1.cmml">=</mo><mn id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.3.cmml">1</mn></mrow><mi id="S3.SS3.SSS3.p1.8.m5.3.3.1.3" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.3.cmml">K</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.8.m5.3b"><apply id="S3.SS3.SSS3.p1.8.m5.3.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3"><eq id="S3.SS3.SSS3.p1.8.m5.3.3.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.2"></eq><apply id="S3.SS3.SSS3.p1.8.m5.3.3.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.3.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3">superscript</csymbol><apply id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3">subscript</csymbol><ci id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.2.2">𝑆</ci><ci id="S3.SS3.SSS3.p1.8.m5.3.3.3.2.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.2.3">𝑞</ci></apply><apply id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3"><times id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.1"></times><ci id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.8.m5.3.3.3.3.4.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.3.3.4">𝑔</ci></apply></apply><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.1.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1">subscript</csymbol><set id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1"><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.2.2">𝑠</ci><list id="S3.SS3.SSS3.p1.8.m5.2.2.2.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.2.2.2.4"><ci id="S3.SS3.SSS3.p1.8.m5.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.1.1.1.1">𝑞</ci><ci id="S3.SS3.SSS3.p1.8.m5.2.2.2.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.2.2.2.2">𝑖</ci></list></apply><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3"><times id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.1.1.1.3.4">𝑔</ci></apply></apply></set><apply id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3"><eq id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.1"></eq><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.2">𝑖</ci><cn id="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.3.cmml" type="integer" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.1.3.3">1</cn></apply></apply><ci id="S3.SS3.SSS3.p1.8.m5.3.3.1.3.cmml" xref="S3.SS3.SSS3.p1.8.m5.3.3.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.8.m5.3c">S_{q}^{aug}=\{s_{q,i}^{aug}\}_{i=1}^{K}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.8.m5.3d">italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = { italic_s start_POSTSUBSCRIPT italic_q , italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>, where <math alttext="s_{q,i}^{aug}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.9.m6.2"><semantics id="S3.SS3.SSS3.p1.9.m6.2a"><msubsup id="S3.SS3.SSS3.p1.9.m6.2.3" xref="S3.SS3.SSS3.p1.9.m6.2.3.cmml"><mi id="S3.SS3.SSS3.p1.9.m6.2.3.2.2" xref="S3.SS3.SSS3.p1.9.m6.2.3.2.2.cmml">s</mi><mrow id="S3.SS3.SSS3.p1.9.m6.2.2.2.4" xref="S3.SS3.SSS3.p1.9.m6.2.2.2.3.cmml"><mi id="S3.SS3.SSS3.p1.9.m6.1.1.1.1" xref="S3.SS3.SSS3.p1.9.m6.1.1.1.1.cmml">q</mi><mo id="S3.SS3.SSS3.p1.9.m6.2.2.2.4.1" xref="S3.SS3.SSS3.p1.9.m6.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS3.p1.9.m6.2.2.2.2" xref="S3.SS3.SSS3.p1.9.m6.2.2.2.2.cmml">i</mi></mrow><mrow id="S3.SS3.SSS3.p1.9.m6.2.3.3" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.cmml"><mi id="S3.SS3.SSS3.p1.9.m6.2.3.3.2" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.9.m6.2.3.3.1" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.9.m6.2.3.3.3" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.9.m6.2.3.3.1a" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.9.m6.2.3.3.4" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.9.m6.2b"><apply id="S3.SS3.SSS3.p1.9.m6.2.3.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.9.m6.2.3.1.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3">superscript</csymbol><apply id="S3.SS3.SSS3.p1.9.m6.2.3.2.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.9.m6.2.3.2.1.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3">subscript</csymbol><ci id="S3.SS3.SSS3.p1.9.m6.2.3.2.2.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.2.2">𝑠</ci><list id="S3.SS3.SSS3.p1.9.m6.2.2.2.3.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.2.2.4"><ci id="S3.SS3.SSS3.p1.9.m6.1.1.1.1.cmml" xref="S3.SS3.SSS3.p1.9.m6.1.1.1.1">𝑞</ci><ci id="S3.SS3.SSS3.p1.9.m6.2.2.2.2.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.2.2.2">𝑖</ci></list></apply><apply id="S3.SS3.SSS3.p1.9.m6.2.3.3.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.3"><times id="S3.SS3.SSS3.p1.9.m6.2.3.3.1.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.1"></times><ci id="S3.SS3.SSS3.p1.9.m6.2.3.3.2.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.9.m6.2.3.3.3.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.9.m6.2.3.3.4.cmml" xref="S3.SS3.SSS3.p1.9.m6.2.3.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.9.m6.2c">s_{q,i}^{aug}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.9.m6.2d">italic_s start_POSTSUBSCRIPT italic_q , italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> denotes the dot product similarity between <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.10.m7.1"><semantics id="S3.SS3.SSS3.p1.10.m7.1a"><mi id="S3.SS3.SSS3.p1.10.m7.1.1" xref="S3.SS3.SSS3.p1.10.m7.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.10.m7.1b"><ci id="S3.SS3.SSS3.p1.10.m7.1.1.cmml" xref="S3.SS3.SSS3.p1.10.m7.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.10.m7.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.10.m7.1d">italic_q</annotation></semantics></math> and <math alttext="d_{i}^{aug}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.11.m8.1"><semantics id="S3.SS3.SSS3.p1.11.m8.1a"><msubsup id="S3.SS3.SSS3.p1.11.m8.1.1" xref="S3.SS3.SSS3.p1.11.m8.1.1.cmml"><mi id="S3.SS3.SSS3.p1.11.m8.1.1.2.2" xref="S3.SS3.SSS3.p1.11.m8.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS3.p1.11.m8.1.1.2.3" xref="S3.SS3.SSS3.p1.11.m8.1.1.2.3.cmml">i</mi><mrow id="S3.SS3.SSS3.p1.11.m8.1.1.3" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.11.m8.1.1.3.2" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.11.m8.1.1.3.1" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.11.m8.1.1.3.3" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.11.m8.1.1.3.1a" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.11.m8.1.1.3.4" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.11.m8.1b"><apply id="S3.SS3.SSS3.p1.11.m8.1.1.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.11.m8.1.1.1.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.11.m8.1.1.2.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.11.m8.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.11.m8.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS3.p1.11.m8.1.1.2.3.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS3.p1.11.m8.1.1.3.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.3"><times id="S3.SS3.SSS3.p1.11.m8.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.11.m8.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.11.m8.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.11.m8.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.11.m8.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.11.m8.1c">d_{i}^{aug}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.11.m8.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math>. Then we can apply the learning retrieval augmentation to <math alttext="S_{q}^{aug}" class="ltx_Math" display="inline" id="S3.SS3.SSS3.p1.12.m9.1"><semantics id="S3.SS3.SSS3.p1.12.m9.1a"><msubsup id="S3.SS3.SSS3.p1.12.m9.1.1" xref="S3.SS3.SSS3.p1.12.m9.1.1.cmml"><mi id="S3.SS3.SSS3.p1.12.m9.1.1.2.2" xref="S3.SS3.SSS3.p1.12.m9.1.1.2.2.cmml">S</mi><mi id="S3.SS3.SSS3.p1.12.m9.1.1.2.3" xref="S3.SS3.SSS3.p1.12.m9.1.1.2.3.cmml">q</mi><mrow id="S3.SS3.SSS3.p1.12.m9.1.1.3" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.cmml"><mi id="S3.SS3.SSS3.p1.12.m9.1.1.3.2" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.2.cmml">a</mi><mo id="S3.SS3.SSS3.p1.12.m9.1.1.3.1" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.12.m9.1.1.3.3" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.3.cmml">u</mi><mo id="S3.SS3.SSS3.p1.12.m9.1.1.3.1a" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.SSS3.p1.12.m9.1.1.3.4" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS3.p1.12.m9.1b"><apply id="S3.SS3.SSS3.p1.12.m9.1.1.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.12.m9.1.1.1.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1">superscript</csymbol><apply id="S3.SS3.SSS3.p1.12.m9.1.1.2.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS3.p1.12.m9.1.1.2.1.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1">subscript</csymbol><ci id="S3.SS3.SSS3.p1.12.m9.1.1.2.2.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.2.2">𝑆</ci><ci id="S3.SS3.SSS3.p1.12.m9.1.1.2.3.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.2.3">𝑞</ci></apply><apply id="S3.SS3.SSS3.p1.12.m9.1.1.3.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.3"><times id="S3.SS3.SSS3.p1.12.m9.1.1.3.1.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.1"></times><ci id="S3.SS3.SSS3.p1.12.m9.1.1.3.2.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.2">𝑎</ci><ci id="S3.SS3.SSS3.p1.12.m9.1.1.3.3.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.3">𝑢</ci><ci id="S3.SS3.SSS3.p1.12.m9.1.1.3.4.cmml" xref="S3.SS3.SSS3.p1.12.m9.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS3.p1.12.m9.1c">S_{q}^{aug}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS3.p1.12.m9.1d">italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> and based on Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.E2" title="In 3.3.2 Learning Retrieval Augmentation ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">2</span></a>) minimize the following loss to update the retriever as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathcal{L}_{\mathcal{R}}^{aug}=\text{KL}(P_{\mathcal{R}},\sigma(S_{q}^{aug}/%
\tau_{s}))." class="ltx_Math" display="block" id="S3.Ex3.m1.1"><semantics id="S3.Ex3.m1.1a"><mrow id="S3.Ex3.m1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.cmml"><mrow id="S3.Ex3.m1.1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.cmml"><msubsup id="S3.Ex3.m1.1.1.1.1.4" xref="S3.Ex3.m1.1.1.1.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.Ex3.m1.1.1.1.1.4.2.2" xref="S3.Ex3.m1.1.1.1.1.4.2.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.Ex3.m1.1.1.1.1.4.2.3" xref="S3.Ex3.m1.1.1.1.1.4.2.3.cmml">ℛ</mi><mrow id="S3.Ex3.m1.1.1.1.1.4.3" xref="S3.Ex3.m1.1.1.1.1.4.3.cmml"><mi id="S3.Ex3.m1.1.1.1.1.4.3.2" xref="S3.Ex3.m1.1.1.1.1.4.3.2.cmml">a</mi><mo id="S3.Ex3.m1.1.1.1.1.4.3.1" xref="S3.Ex3.m1.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.4.3.3" xref="S3.Ex3.m1.1.1.1.1.4.3.3.cmml">u</mi><mo id="S3.Ex3.m1.1.1.1.1.4.3.1a" xref="S3.Ex3.m1.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.4.3.4" xref="S3.Ex3.m1.1.1.1.1.4.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.Ex3.m1.1.1.1.1.3" xref="S3.Ex3.m1.1.1.1.1.3.cmml">=</mo><mrow id="S3.Ex3.m1.1.1.1.1.2" xref="S3.Ex3.m1.1.1.1.1.2.cmml"><mtext id="S3.Ex3.m1.1.1.1.1.2.4" xref="S3.Ex3.m1.1.1.1.1.2.4a.cmml">KL</mtext><mo id="S3.Ex3.m1.1.1.1.1.2.3" xref="S3.Ex3.m1.1.1.1.1.2.3.cmml">⁢</mo><mrow id="S3.Ex3.m1.1.1.1.1.2.2.2" xref="S3.Ex3.m1.1.1.1.1.2.2.3.cmml"><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.3" stretchy="false" xref="S3.Ex3.m1.1.1.1.1.2.2.3.cmml">(</mo><msub id="S3.Ex3.m1.1.1.1.1.1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.Ex3.m1.1.1.1.1.1.1.1.1.2" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi class="ltx_font_mathcaligraphic" id="S3.Ex3.m1.1.1.1.1.1.1.1.1.3" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1.3.cmml">ℛ</mi></msub><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.4" xref="S3.Ex3.m1.1.1.1.1.2.2.3.cmml">,</mo><mrow id="S3.Ex3.m1.1.1.1.1.2.2.2.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.cmml"><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.3.cmml">σ</mi><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.2.cmml">⁢</mo><mrow id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.cmml"><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.2" stretchy="false" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.cmml"><msubsup id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.cmml"><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.2.cmml">S</mi><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.3.cmml">q</mi><mrow id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.cmml"><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.2.cmml">a</mi><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.3.cmml">u</mi><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1a" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.4" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.1" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.1.cmml">/</mo><msub id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.cmml"><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.2" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.2.cmml">τ</mi><mi id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.3" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.3.cmml">s</mi></msub></mrow><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.3" stretchy="false" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.Ex3.m1.1.1.1.1.2.2.2.5" stretchy="false" xref="S3.Ex3.m1.1.1.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex3.m1.1.1.1.2" lspace="0em" xref="S3.Ex3.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex3.m1.1b"><apply id="S3.Ex3.m1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1"><eq id="S3.Ex3.m1.1.1.1.1.3.cmml" xref="S3.Ex3.m1.1.1.1.1.3"></eq><apply id="S3.Ex3.m1.1.1.1.1.4.cmml" xref="S3.Ex3.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.4.1.cmml" xref="S3.Ex3.m1.1.1.1.1.4">superscript</csymbol><apply id="S3.Ex3.m1.1.1.1.1.4.2.cmml" xref="S3.Ex3.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.4.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.4">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.4.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.4.2.2">ℒ</ci><ci id="S3.Ex3.m1.1.1.1.1.4.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.4.2.3">ℛ</ci></apply><apply id="S3.Ex3.m1.1.1.1.1.4.3.cmml" xref="S3.Ex3.m1.1.1.1.1.4.3"><times id="S3.Ex3.m1.1.1.1.1.4.3.1.cmml" xref="S3.Ex3.m1.1.1.1.1.4.3.1"></times><ci id="S3.Ex3.m1.1.1.1.1.4.3.2.cmml" xref="S3.Ex3.m1.1.1.1.1.4.3.2">𝑎</ci><ci id="S3.Ex3.m1.1.1.1.1.4.3.3.cmml" xref="S3.Ex3.m1.1.1.1.1.4.3.3">𝑢</ci><ci id="S3.Ex3.m1.1.1.1.1.4.3.4.cmml" xref="S3.Ex3.m1.1.1.1.1.4.3.4">𝑔</ci></apply></apply><apply id="S3.Ex3.m1.1.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2"><times id="S3.Ex3.m1.1.1.1.1.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.3"></times><ci id="S3.Ex3.m1.1.1.1.1.2.4a.cmml" xref="S3.Ex3.m1.1.1.1.1.2.4"><mtext id="S3.Ex3.m1.1.1.1.1.2.4.cmml" xref="S3.Ex3.m1.1.1.1.1.2.4">KL</mtext></ci><interval closure="open" id="S3.Ex3.m1.1.1.1.1.2.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2"><apply id="S3.Ex3.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="S3.Ex3.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex3.m1.1.1.1.1.1.1.1.1.3">ℛ</ci></apply><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2"><times id="S3.Ex3.m1.1.1.1.1.2.2.2.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.2"></times><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.3">𝜎</ci><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1"><divide id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.1"></divide><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2">superscript</csymbol><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.2">𝑆</ci><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.2.3">𝑞</ci></apply><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3"><times id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.1"></times><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.2">𝑎</ci><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.3">𝑢</ci><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.4.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.2.3.4">𝑔</ci></apply></apply><apply id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.1.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.2.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.2">𝜏</ci><ci id="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.3.cmml" xref="S3.Ex3.m1.1.1.1.1.2.2.2.2.1.1.1.3.3">𝑠</ci></apply></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex3.m1.1c">\mathcal{L}_{\mathcal{R}}^{aug}=\text{KL}(P_{\mathcal{R}},\sigma(S_{q}^{aug}/%
\tau_{s})).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex3.m1.1d">caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = KL ( italic_P start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT , italic_σ ( italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT / italic_τ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT ) ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS4">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.4 </span>Training Retrieval-Augmented Generator</h4>
<div class="ltx_para" id="S3.SS3.SSS4.p1">
<p class="ltx_p" id="S3.SS3.SSS4.p1.1">With the retrieval content obtained by the retriever, we hope to generate the response more accurately and hence we can further supervised train the generator in a way similar to the first stage (i.e., Section <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.SS3.SSS1" title="3.3.1 Supervised Training ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3.3.1</span></a>). Specifically, we can minimize the negative log-likelihood of the response given the persona, dialogue context, and retrieval content as</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E3">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E3X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\mathcal{L}_{\mathcal{G}}" class="ltx_Math" display="inline" id="S3.E3X.2.1.1.m1.1"><semantics id="S3.E3X.2.1.1.m1.1a"><msub id="S3.E3X.2.1.1.m1.1.1" xref="S3.E3X.2.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3X.2.1.1.m1.1.1.2" xref="S3.E3X.2.1.1.m1.1.1.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E3X.2.1.1.m1.1.1.3" xref="S3.E3X.2.1.1.m1.1.1.3.cmml">𝒢</mi></msub><annotation-xml encoding="MathML-Content" id="S3.E3X.2.1.1.m1.1b"><apply id="S3.E3X.2.1.1.m1.1.1.cmml" xref="S3.E3X.2.1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.E3X.2.1.1.m1.1.1.1.cmml" xref="S3.E3X.2.1.1.m1.1.1">subscript</csymbol><ci id="S3.E3X.2.1.1.m1.1.1.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.2">ℒ</ci><ci id="S3.E3X.2.1.1.m1.1.1.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.3">𝒢</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3X.2.1.1.m1.1c">\displaystyle\mathcal{L}_{\mathcal{G}}</annotation><annotation encoding="application/x-llamapun" id="S3.E3X.2.1.1.m1.1d">caligraphic_L start_POSTSUBSCRIPT caligraphic_G end_POSTSUBSCRIPT</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=-\log(\mathcal{G}_{\theta}(r|P,U,D_{p}^{aug}))" class="ltx_Math" display="inline" id="S3.E3X.3.2.2.m1.4"><semantics id="S3.E3X.3.2.2.m1.4a"><mrow id="S3.E3X.3.2.2.m1.4.4" xref="S3.E3X.3.2.2.m1.4.4.cmml"><mi id="S3.E3X.3.2.2.m1.4.4.3" xref="S3.E3X.3.2.2.m1.4.4.3.cmml"></mi><mo id="S3.E3X.3.2.2.m1.4.4.2" xref="S3.E3X.3.2.2.m1.4.4.2.cmml">=</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1" xref="S3.E3X.3.2.2.m1.4.4.1.cmml"><mo id="S3.E3X.3.2.2.m1.4.4.1a" rspace="0.167em" xref="S3.E3X.3.2.2.m1.4.4.1.cmml">−</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml"><mi id="S3.E3X.3.2.2.m1.3.3" xref="S3.E3X.3.2.2.m1.3.3.cmml">log</mi><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1a" xref="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml">⁡</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml"><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.2" stretchy="false" xref="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml">(</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.cmml"><msub id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.2.cmml">𝒢</mi><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml">r</mi><mo fence="false" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">|</mo><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E3X.3.2.2.m1.1.1" xref="S3.E3X.3.2.2.m1.1.1.cmml">P</mi><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E3X.3.2.2.m1.2.2" xref="S3.E3X.3.2.2.m1.2.2.cmml">U</mi><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml">,</mo><msubsup id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml">D</mi><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">p</mi><mrow id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">u</mi><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1a" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.4" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.4.cmml">g</mi></mrow></msubsup></mrow></mrow><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.3" stretchy="false" xref="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E3X.3.2.2.m1.4b"><apply id="S3.E3X.3.2.2.m1.4.4.cmml" xref="S3.E3X.3.2.2.m1.4.4"><eq id="S3.E3X.3.2.2.m1.4.4.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.2"></eq><csymbol cd="latexml" id="S3.E3X.3.2.2.m1.4.4.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.3">absent</csymbol><apply id="S3.E3X.3.2.2.m1.4.4.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1"><minus id="S3.E3X.3.2.2.m1.4.4.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1"></minus><apply id="S3.E3X.3.2.2.m1.4.4.1.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1"><log id="S3.E3X.3.2.2.m1.3.3.cmml" xref="S3.E3X.3.2.2.m1.3.3"></log><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1"><times id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.2"></times><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.2">𝒢</ci><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.2">conditional</csymbol><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.3">𝑟</ci><list id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1"><ci id="S3.E3X.3.2.2.m1.1.1.cmml" xref="S3.E3X.3.2.2.m1.1.1">𝑃</ci><ci id="S3.E3X.3.2.2.m1.2.2.cmml" xref="S3.E3X.3.2.2.m1.2.2">𝑈</ci><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.2">𝐷</ci><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2.3">𝑝</ci></apply><apply id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3"><times id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.1"></times><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.3">𝑢</ci><ci id="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.4.cmml" xref="S3.E3X.3.2.2.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3.4">𝑔</ci></apply></apply></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3X.3.2.2.m1.4c">\displaystyle=-\log(\mathcal{G}_{\theta}(r|P,U,D_{p}^{aug}))</annotation><annotation encoding="application/x-llamapun" id="S3.E3X.3.2.2.m1.4d">= - roman_log ( caligraphic_G start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_r | italic_P , italic_U , italic_D start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(3)</span></td>
</tr>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E3Xa">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=-\sum_{i=1}^{|r|}\log(\mathcal{G}_{\theta}(r_{t}|P,U,D_{P}^{aug}%
,r_{&lt;t}))." class="ltx_Math" display="inline" id="S3.E3Xa.2.1.1.m1.5"><semantics id="S3.E3Xa.2.1.1.m1.5a"><mrow id="S3.E3Xa.2.1.1.m1.5.5.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.cmml"><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.3.cmml"></mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.2.cmml">=</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.cmml"><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1a" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.cmml">−</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.cmml"><mstyle displaystyle="true" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml"><munderover id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2a" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml"><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2" movablelimits="false" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mrow id="S3.E3Xa.2.1.1.m1.1.1.1.3" xref="S3.E3Xa.2.1.1.m1.1.1.1.2.cmml"><mo id="S3.E3Xa.2.1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.E3Xa.2.1.1.m1.1.1.1.2.1.cmml">|</mo><mi id="S3.E3Xa.2.1.1.m1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.1.1.1.1.cmml">r</mi><mo id="S3.E3Xa.2.1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.E3Xa.2.1.1.m1.1.1.1.2.1.cmml">|</mo></mrow></munderover></mstyle><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml"><mi id="S3.E3Xa.2.1.1.m1.4.4" xref="S3.E3Xa.2.1.1.m1.4.4.cmml">log</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1a" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml"><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">(</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2.cmml">𝒢</mi><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3.cmml">θ</mi></msub><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml">r</mi><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml">t</mi></msub><mo fence="false" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.cmml">|</mo><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S3.E3Xa.2.1.1.m1.2.2" xref="S3.E3Xa.2.1.1.m1.2.2.cmml">P</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><mi id="S3.E3Xa.2.1.1.m1.3.3" xref="S3.E3Xa.2.1.1.m1.3.3.cmml">U</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.4" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><msubsup id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml">D</mi><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">P</mi><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">u</mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1a" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.4" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.5" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><msub id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">r</mi><mrow id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml"><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.2" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.2.cmml"></mi><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.1" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.1.cmml">&lt;</mo><mi id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.3" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.3.cmml">t</mi></mrow></msub></mrow></mrow><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S3.E3Xa.2.1.1.m1.5.5.1.2" lspace="0em" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3Xa.2.1.1.m1.5b"><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1"><eq id="S3.E3Xa.2.1.1.m1.5.5.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.2"></eq><csymbol cd="latexml" id="S3.E3Xa.2.1.1.m1.5.5.1.1.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.3">absent</csymbol><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1"><minus id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1"></minus><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1"><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2">superscript</csymbol><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2">subscript</csymbol><sum id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.2"></sum><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3"><eq id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.1"></eq><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.2">𝑖</ci><cn id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3.cmml" type="integer" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.2.2.3.3">1</cn></apply></apply><apply id="S3.E3Xa.2.1.1.m1.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.1.1.1.3"><abs id="S3.E3Xa.2.1.1.m1.1.1.1.2.1.cmml" xref="S3.E3Xa.2.1.1.m1.1.1.1.3.1"></abs><ci id="S3.E3Xa.2.1.1.m1.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.1.1.1.1">𝑟</ci></apply></apply><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1"><log id="S3.E3Xa.2.1.1.m1.4.4.cmml" xref="S3.E3Xa.2.1.1.m1.4.4"></log><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1"><times id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.2"></times><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.2">𝒢</ci><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.3.3">𝜃</ci></apply><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.3">conditional</csymbol><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.2">𝑟</ci><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.4.3">𝑡</ci></apply><list id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2"><ci id="S3.E3Xa.2.1.1.m1.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.2.2">𝑃</ci><ci id="S3.E3Xa.2.1.1.m1.3.3.cmml" xref="S3.E3Xa.2.1.1.m1.3.3">𝑈</ci><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2">𝐷</ci><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3">𝑃</ci></apply><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3"><times id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.1"></times><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.3">𝑢</ci><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.4.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.4">𝑔</ci></apply></apply><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2">𝑟</ci><apply id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3"><lt id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.1.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.1"></lt><csymbol cd="latexml" id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.2.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.2">absent</csymbol><ci id="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.3.cmml" xref="S3.E3Xa.2.1.1.m1.5.5.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.3">𝑡</ci></apply></apply></list></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3Xa.2.1.1.m1.5c">\displaystyle=-\sum_{i=1}^{|r|}\log(\mathcal{G}_{\theta}(r_{t}|P,U,D_{P}^{aug}%
,r_{&lt;t})).</annotation><annotation encoding="application/x-llamapun" id="S3.E3Xa.2.1.1.m1.5d">= - ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT | italic_r | end_POSTSUPERSCRIPT roman_log ( caligraphic_G start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_r start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_P , italic_U , italic_D start_POSTSUBSCRIPT italic_P end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT , italic_r start_POSTSUBSCRIPT &lt; italic_t end_POSTSUBSCRIPT ) ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS4.p1.2">It is easy to see that Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.E3" title="In 3.3.4 Training Retrieval-Augmented Generator ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3</span></a>) is similar to Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.E1" title="In 3.3.1 Supervised Training ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">1</span></a>) with additionally inputting the retrieval content.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS5">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.5 </span>Retriever-Generator Joint Training</h4>
<div class="ltx_para" id="S3.SS3.SSS5.p1">
<p class="ltx_p" id="S3.SS3.SSS5.p1.1">At the final stage, we aim to jointly train the retriever and generator to further improve them. Specifically, we minimize the sum of the losses of the two components as</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E4">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E4X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\mathcal{L}" class="ltx_Math" display="inline" id="S3.E4X.2.1.1.m1.1"><semantics id="S3.E4X.2.1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.E4X.2.1.1.m1.1.1" xref="S3.E4X.2.1.1.m1.1.1.cmml">ℒ</mi><annotation-xml encoding="MathML-Content" id="S3.E4X.2.1.1.m1.1b"><ci id="S3.E4X.2.1.1.m1.1.1.cmml" xref="S3.E4X.2.1.1.m1.1.1">ℒ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.E4X.2.1.1.m1.1c">\displaystyle\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="S3.E4X.2.1.1.m1.1d">caligraphic_L</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=\mathcal{L}_{\mathcal{R}}^{aug}+\mathcal{L}_{\mathcal{G}}." class="ltx_Math" display="inline" id="S3.E4X.3.2.2.m1.1"><semantics id="S3.E4X.3.2.2.m1.1a"><mrow id="S3.E4X.3.2.2.m1.1.1.1" xref="S3.E4X.3.2.2.m1.1.1.1.1.cmml"><mrow id="S3.E4X.3.2.2.m1.1.1.1.1" xref="S3.E4X.3.2.2.m1.1.1.1.1.cmml"><mi id="S3.E4X.3.2.2.m1.1.1.1.1.2" xref="S3.E4X.3.2.2.m1.1.1.1.1.2.cmml"></mi><mo id="S3.E4X.3.2.2.m1.1.1.1.1.1" xref="S3.E4X.3.2.2.m1.1.1.1.1.1.cmml">=</mo><mrow id="S3.E4X.3.2.2.m1.1.1.1.1.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.cmml"><msubsup id="S3.E4X.3.2.2.m1.1.1.1.1.3.2" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.2" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.3.cmml">ℛ</mi><mrow id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.cmml"><mi id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.2" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.2.cmml">a</mi><mo id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.3.cmml">u</mi><mo id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1a" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.4" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.4.cmml">g</mi></mrow></msubsup><mo id="S3.E4X.3.2.2.m1.1.1.1.1.3.1" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.1.cmml">+</mo><msub id="S3.E4X.3.2.2.m1.1.1.1.1.3.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.2" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.3" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3.3.cmml">𝒢</mi></msub></mrow></mrow><mo id="S3.E4X.3.2.2.m1.1.1.1.2" lspace="0em" xref="S3.E4X.3.2.2.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E4X.3.2.2.m1.1b"><apply id="S3.E4X.3.2.2.m1.1.1.1.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1"><eq id="S3.E4X.3.2.2.m1.1.1.1.1.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.1"></eq><csymbol cd="latexml" id="S3.E4X.3.2.2.m1.1.1.1.1.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.2">absent</csymbol><apply id="S3.E4X.3.2.2.m1.1.1.1.1.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3"><plus id="S3.E4X.3.2.2.m1.1.1.1.1.3.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.1"></plus><apply id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2">superscript</csymbol><apply id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.2">ℒ</ci><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.2.3">ℛ</ci></apply><apply id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3"><times id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.1"></times><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.2">𝑎</ci><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.3">𝑢</ci><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.4.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.2.3.4">𝑔</ci></apply></apply><apply id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.1.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.2.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3.2">ℒ</ci><ci id="S3.E4X.3.2.2.m1.1.1.1.1.3.3.3.cmml" xref="S3.E4X.3.2.2.m1.1.1.1.1.3.3.3">𝒢</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4X.3.2.2.m1.1c">\displaystyle=\mathcal{L}_{\mathcal{R}}^{aug}+\mathcal{L}_{\mathcal{G}}.</annotation><annotation encoding="application/x-llamapun" id="S3.E4X.3.2.2.m1.1d">= caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT + caligraphic_L start_POSTSUBSCRIPT caligraphic_G end_POSTSUBSCRIPT .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(4)</span></td>
</tr>
</tbody>
</table>
<p class="ltx_p" id="S3.SS3.SSS5.p1.2">In Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S3.E4" title="In 3.3.5 Retriever-Generator Joint Training ‣ 3.3 Training Process ‣ 3 Methodology ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">4</span></a>), the two loss functions are treated equally. Generally speaking, introducing and tuning a weighting hyperparameter between the two losses may result in better performance but it incurs computational costs when tuning it. For simplicity, we did not introduce this hyperparameter and this could be left for future study.</p>
</div>
<div class="ltx_para" id="S3.SS3.SSS5.p2">
<p class="ltx_p" id="S3.SS3.SSS5.p2.1">To summarize, Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#alg2" title="Algorithm 2 ‣ A.3 Evaluation Results on CONVIAI2 Revised Dataset ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">2</span></a> in the appendix describes the complete two-stage training process.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Inference Process</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">During inference, stories from the ROCStory dataset are fetched in alignment with the provided persona and then integrated into the dialogue context using the Fusion-in-Decoder (FiD) technique <cite class="ltx_cite ltx_citemacro_cite">Izacard and Grave (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib7" title="">2021</a>)</cite>. Each combination of story, persona, and context is individually encoded. These encoded contexts are concatenated and processed via cross-attention in the decoder to produce the final response in an auto-regressive fashion. Additional experiments evaluating the effects of various query combinations, such as persona+context and context alone, are detailed in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS2" title="A.2 Query Analysis ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">A.2</span></a> to highlight their impact on performance.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiment</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">In this section, we empirically evaluate the proposed LAPDOG model.</p>
</div>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Dataset</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">ConvAI2 <cite class="ltx_cite ltx_citemacro_cite">Dinan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib4" title="">2019</a>)</cite> is a dialogue dataset collected from the crowd, featuring 8939/1000 multi-turn conversations that rely on 1155/100 persona descriptions for the train/dev splits. Each persona is succinctly depicted by approximately 5 profile sentences. Paired workers engaged in interactive conversations based on predefined personas.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Retrieval Corpus</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Given the absence of a paired annotated retrieval corpus connected to ConvAI2, we employ ROCStory <cite class="ltx_cite ltx_citemacro_cite">Mostafazadeh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib14" title="">2016</a>)</cite> as an auxiliary retrieval dataset. Our aim is for the narratives within this dataset to serve as supplemental content to the existing personas within the dialogue. We have undertaken pre-processing of the ROCStory to align the narrative style more closely with persona representation, including changes like transforming ‘he’ to ‘I’ and ‘does’ to ‘do’. The detailed pre-processing is listed in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.SS7" title="A.7 Pre-process ROCStory Coprus ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">A.7</span></a>. Statically, there are 98,161 stories within the corpus, and each story is composed of <math alttext="5" class="ltx_markedasmath" display="inline" id="S4.SS2.p1.1.m1.1.1.m1.1"><semantics id="S4.SS2.p1.1.m1.1.1.m1.1a"><mn id="S4.SS2.p1.1.m1.1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.m1.1.1.cmml">5</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1.1.m1.1b"><cn id="S4.SS2.p1.1.m1.1.1.m1.1.1.cmml" type="integer" xref="S4.SS2.p1.1.m1.1.1.m1.1.1">5</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1.1.m1.1c">5</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.m1.1.1.m1.1d">5</annotation></semantics></math> sentences.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Experimental Settings</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.4">We employ T5 series models <cite class="ltx_cite ltx_citemacro_cite">Raffel et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib19" title="">2020</a>)</cite> (small, base, XL) as the foundational model used for the generator. We initialize our generator with pre-trained weights from T5 and subsequently fine-tune it on the CONVAI2 dataset as <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S4.SS3.p1.1.m1.1"><semantics id="S4.SS3.p1.1.m1.1a"><msub id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.1.m1.1.1.2" xref="S4.SS3.p1.1.m1.1.1.2.cmml">𝒢</mi><mrow id="S4.SS3.p1.1.m1.1.1.3" xref="S4.SS3.p1.1.m1.1.1.3.cmml"><mi id="S4.SS3.p1.1.m1.1.1.3.2" xref="S4.SS3.p1.1.m1.1.1.3.2.cmml">s</mi><mo id="S4.SS3.p1.1.m1.1.1.3.1" xref="S4.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS3.p1.1.m1.1.1.3.3" xref="S4.SS3.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.SS3.p1.1.m1.1.1.3.1a" xref="S4.SS3.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS3.p1.1.m1.1.1.3.4" xref="S4.SS3.p1.1.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b"><apply id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.1.m1.1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S4.SS3.p1.1.m1.1.1.2.cmml" xref="S4.SS3.p1.1.m1.1.1.2">𝒢</ci><apply id="S4.SS3.p1.1.m1.1.1.3.cmml" xref="S4.SS3.p1.1.m1.1.1.3"><times id="S4.SS3.p1.1.m1.1.1.3.1.cmml" xref="S4.SS3.p1.1.m1.1.1.3.1"></times><ci id="S4.SS3.p1.1.m1.1.1.3.2.cmml" xref="S4.SS3.p1.1.m1.1.1.3.2">𝑠</ci><ci id="S4.SS3.p1.1.m1.1.1.3.3.cmml" xref="S4.SS3.p1.1.m1.1.1.3.3">𝑢</ci><ci id="S4.SS3.p1.1.m1.1.1.3.4.cmml" xref="S4.SS3.p1.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.1.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>. The dense retriever is initialized with Contriever <cite class="ltx_cite ltx_citemacro_cite">Izacard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib6" title="">2021</a>)</cite>, a dual-encoder retriever that shares a similar encoder structure to BERT <cite class="ltx_cite ltx_citemacro_cite">Devlin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib3" title="">2019</a>)</cite>. We performed fine-tuning on both the retriever and generator using <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S4.SS3.p1.2.m2.1"><semantics id="S4.SS3.p1.2.m2.1a"><msub id="S4.SS3.p1.2.m2.1.1" xref="S4.SS3.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.2.m2.1.1.2" xref="S4.SS3.p1.2.m2.1.1.2.cmml">𝒢</mi><mrow id="S4.SS3.p1.2.m2.1.1.3" xref="S4.SS3.p1.2.m2.1.1.3.cmml"><mi id="S4.SS3.p1.2.m2.1.1.3.2" xref="S4.SS3.p1.2.m2.1.1.3.2.cmml">s</mi><mo id="S4.SS3.p1.2.m2.1.1.3.1" xref="S4.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS3.p1.2.m2.1.1.3.3" xref="S4.SS3.p1.2.m2.1.1.3.3.cmml">u</mi><mo id="S4.SS3.p1.2.m2.1.1.3.1a" xref="S4.SS3.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS3.p1.2.m2.1.1.3.4" xref="S4.SS3.p1.2.m2.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.2.m2.1b"><apply id="S4.SS3.p1.2.m2.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.2.m2.1.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="S4.SS3.p1.2.m2.1.1.2.cmml" xref="S4.SS3.p1.2.m2.1.1.2">𝒢</ci><apply id="S4.SS3.p1.2.m2.1.1.3.cmml" xref="S4.SS3.p1.2.m2.1.1.3"><times id="S4.SS3.p1.2.m2.1.1.3.1.cmml" xref="S4.SS3.p1.2.m2.1.1.3.1"></times><ci id="S4.SS3.p1.2.m2.1.1.3.2.cmml" xref="S4.SS3.p1.2.m2.1.1.3.2">𝑠</ci><ci id="S4.SS3.p1.2.m2.1.1.3.3.cmml" xref="S4.SS3.p1.2.m2.1.1.3.3">𝑢</ci><ci id="S4.SS3.p1.2.m2.1.1.3.4.cmml" xref="S4.SS3.p1.2.m2.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.2.m2.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.2.m2.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>, with a learning rate of <math alttext="5\text{\times}{10}^{-4}" class="ltx_markedasmath" display="inline" id="S4.SS3.p1.3.m3.1.1.m1.3"><semantics id="S4.SS3.p1.3.m3.1.1.m1.3a"><mrow id="S4.SS3.p1.3.m3.1.1.m1.3.3.3" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml"><mn id="S4.SS3.p1.3.m3.1.1.m1.1.1.1.1.1.1.1" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml">5</mn><mtext id="S4.SS3.p1.3.m3.1.1.m1.2.2.2.2.2.2.2" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml">×</mtext><msup id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.3.3.3.3" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml"><mn id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.3.3.3.3.2" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml">10</mn><mrow id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.3.3.3.3.3.2" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml"><mo id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.3.3.3.3.3.2a" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml">−</mo><mn id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.3.3.3.3.3.2.2" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.3.m3.1.1.m1.3b"><csymbol cd="latexml" id="S4.SS3.p1.3.m3.1.1.m1.3.3.3.cmml" xref="S4.SS3.p1.3.m3.1.1.m1.3.3.3">5E-4</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.3.m3.1.1.m1.3c">5\text{\times}{10}^{-4}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.3.m3.1.1.m1.3d">start_ARG 5 end_ARG start_ARG times end_ARG start_ARG power start_ARG 10 end_ARG start_ARG - 4 end_ARG end_ARG</annotation></semantics></math> and <math alttext="\rho=0.5" class="ltx_Math" display="inline" id="S4.SS3.p1.4.m4.1"><semantics id="S4.SS3.p1.4.m4.1a"><mrow id="S4.SS3.p1.4.m4.1.1" xref="S4.SS3.p1.4.m4.1.1.cmml"><mi id="S4.SS3.p1.4.m4.1.1.2" xref="S4.SS3.p1.4.m4.1.1.2.cmml">ρ</mi><mo id="S4.SS3.p1.4.m4.1.1.1" xref="S4.SS3.p1.4.m4.1.1.1.cmml">=</mo><mn id="S4.SS3.p1.4.m4.1.1.3" xref="S4.SS3.p1.4.m4.1.1.3.cmml">0.5</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.4.m4.1b"><apply id="S4.SS3.p1.4.m4.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1"><eq id="S4.SS3.p1.4.m4.1.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1.1"></eq><ci id="S4.SS3.p1.4.m4.1.1.2.cmml" xref="S4.SS3.p1.4.m4.1.1.2">𝜌</ci><cn id="S4.SS3.p1.4.m4.1.1.3.cmml" type="float" xref="S4.SS3.p1.4.m4.1.1.3">0.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.4.m4.1c">\rho=0.5</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.4.m4.1d">italic_ρ = 0.5</annotation></semantics></math>. We further tune for learning retrieval augmentation based on the supervised foundation models in one epoch. We use persona profile as the query to retrieve the relevant stories.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Evaluation Metric</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">LAPDOG aims to optimize for some generation metrics to enhance the dialogue quality. The evaluation comprises three metrics. The first metric is F1, which computes the harmonic mean of precision and recall on a word level between the generated text and the ground truth. The second metric is BLEU <cite class="ltx_cite ltx_citemacro_cite">Papineni et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib16" title="">2002</a>); Post (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib17" title="">2018</a>)</cite>, an <math alttext="n" class="ltx_Math" display="inline" id="S4.SS4.p1.1.m1.1"><semantics id="S4.SS4.p1.1.m1.1a"><mi id="S4.SS4.p1.1.m1.1.1" xref="S4.SS4.p1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.1.m1.1b"><ci id="S4.SS4.p1.1.m1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.1.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.p1.1.m1.1d">italic_n</annotation></semantics></math>-gram precision-based measure that quantifies the overlap between the generated text and the ground truth by penalizing for overly long or short outputs. The third metric is ROUGE-L <cite class="ltx_cite ltx_citemacro_cite">Lin (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib12" title="">2004</a>)</cite>, a variant of ROUGE that considers the longest common subsequence between the generated text and the ground truth, to effectively measure sentence-level structural similarity. With those metrics, we ensure a comprehensive assessment of the quality of generated dialogues. To enhance the aforementioned three metrics, we sum these three metrics together as the overall metric to train the LAPDOG model.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.5 </span>Baseline</h3>
<div class="ltx_para" id="S4.SS5.p1">
<p class="ltx_p" id="S4.SS5.p1.7">To compare the enhancement between different retrieval-augmentation approaches, we compared the results with the following baselines. First, we compare the LAPGOG with T5<math alttext="{}_{sup}^{S/B/XL}" class="ltx_Math" display="inline" id="S4.SS5.p1.1.m1.1"><semantics id="S4.SS5.p1.1.m1.1a"><mmultiscripts id="S4.SS5.p1.1.m1.1.1" xref="S4.SS5.p1.1.m1.1.1.cmml"><mi id="S4.SS5.p1.1.m1.1.1.2.2" xref="S4.SS5.p1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.SS5.p1.1.m1.1.1a" xref="S4.SS5.p1.1.m1.1.1.cmml"></mprescripts><mrow id="S4.SS5.p1.1.m1.1.1b" xref="S4.SS5.p1.1.m1.1.1.cmml"></mrow><mrow id="S4.SS5.p1.1.m1.1.1.3" xref="S4.SS5.p1.1.m1.1.1.3.cmml"><mrow id="S4.SS5.p1.1.m1.1.1.3.2" xref="S4.SS5.p1.1.m1.1.1.3.2.cmml"><mi id="S4.SS5.p1.1.m1.1.1.3.2.2" xref="S4.SS5.p1.1.m1.1.1.3.2.2.cmml">S</mi><mo id="S4.SS5.p1.1.m1.1.1.3.2.1" xref="S4.SS5.p1.1.m1.1.1.3.2.1.cmml">/</mo><mi id="S4.SS5.p1.1.m1.1.1.3.2.3" xref="S4.SS5.p1.1.m1.1.1.3.2.3.cmml">B</mi><mo id="S4.SS5.p1.1.m1.1.1.3.2.1a" xref="S4.SS5.p1.1.m1.1.1.3.2.1.cmml">/</mo><mi id="S4.SS5.p1.1.m1.1.1.3.2.4" xref="S4.SS5.p1.1.m1.1.1.3.2.4.cmml">X</mi></mrow><mo id="S4.SS5.p1.1.m1.1.1.3.1" xref="S4.SS5.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.1.m1.1.1.3.3" xref="S4.SS5.p1.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="S4.SS5.p1.1.m1.1.1.2.3" xref="S4.SS5.p1.1.m1.1.1.2.3.cmml"><mi id="S4.SS5.p1.1.m1.1.1.2.3.2" xref="S4.SS5.p1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="S4.SS5.p1.1.m1.1.1.2.3.1" xref="S4.SS5.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.1.m1.1.1.2.3.3" xref="S4.SS5.p1.1.m1.1.1.2.3.3.cmml">u</mi><mo id="S4.SS5.p1.1.m1.1.1.2.3.1a" xref="S4.SS5.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.1.m1.1.1.2.3.4" xref="S4.SS5.p1.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="S4.SS5.p1.1.m1.1.1c" xref="S4.SS5.p1.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.1.m1.1b"><apply id="S4.SS5.p1.1.m1.1.1.cmml" xref="S4.SS5.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.1.m1.1.1.1.cmml" xref="S4.SS5.p1.1.m1.1.1">superscript</csymbol><apply id="S4.SS5.p1.1.m1.1.1.2.cmml" xref="S4.SS5.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.1.m1.1.1.2.1.cmml" xref="S4.SS5.p1.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="S4.SS5.p1.1.m1.1.1.2.2.cmml" xref="S4.SS5.p1.1.m1.1.1.2.2">absent</csymbol><apply id="S4.SS5.p1.1.m1.1.1.2.3.cmml" xref="S4.SS5.p1.1.m1.1.1.2.3"><times id="S4.SS5.p1.1.m1.1.1.2.3.1.cmml" xref="S4.SS5.p1.1.m1.1.1.2.3.1"></times><ci id="S4.SS5.p1.1.m1.1.1.2.3.2.cmml" xref="S4.SS5.p1.1.m1.1.1.2.3.2">𝑠</ci><ci id="S4.SS5.p1.1.m1.1.1.2.3.3.cmml" xref="S4.SS5.p1.1.m1.1.1.2.3.3">𝑢</ci><ci id="S4.SS5.p1.1.m1.1.1.2.3.4.cmml" xref="S4.SS5.p1.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="S4.SS5.p1.1.m1.1.1.3.cmml" xref="S4.SS5.p1.1.m1.1.1.3"><times id="S4.SS5.p1.1.m1.1.1.3.1.cmml" xref="S4.SS5.p1.1.m1.1.1.3.1"></times><apply id="S4.SS5.p1.1.m1.1.1.3.2.cmml" xref="S4.SS5.p1.1.m1.1.1.3.2"><divide id="S4.SS5.p1.1.m1.1.1.3.2.1.cmml" xref="S4.SS5.p1.1.m1.1.1.3.2.1"></divide><ci id="S4.SS5.p1.1.m1.1.1.3.2.2.cmml" xref="S4.SS5.p1.1.m1.1.1.3.2.2">𝑆</ci><ci id="S4.SS5.p1.1.m1.1.1.3.2.3.cmml" xref="S4.SS5.p1.1.m1.1.1.3.2.3">𝐵</ci><ci id="S4.SS5.p1.1.m1.1.1.3.2.4.cmml" xref="S4.SS5.p1.1.m1.1.1.3.2.4">𝑋</ci></apply><ci id="S4.SS5.p1.1.m1.1.1.3.3.cmml" xref="S4.SS5.p1.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.1.m1.1c">{}_{sup}^{S/B/XL}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_S / italic_B / italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math> models, where <math alttext="S/B/XL" class="ltx_Math" display="inline" id="S4.SS5.p1.2.m2.1"><semantics id="S4.SS5.p1.2.m2.1a"><mrow id="S4.SS5.p1.2.m2.1.1" xref="S4.SS5.p1.2.m2.1.1.cmml"><mrow id="S4.SS5.p1.2.m2.1.1.2" xref="S4.SS5.p1.2.m2.1.1.2.cmml"><mi id="S4.SS5.p1.2.m2.1.1.2.2" xref="S4.SS5.p1.2.m2.1.1.2.2.cmml">S</mi><mo id="S4.SS5.p1.2.m2.1.1.2.1" xref="S4.SS5.p1.2.m2.1.1.2.1.cmml">/</mo><mi id="S4.SS5.p1.2.m2.1.1.2.3" xref="S4.SS5.p1.2.m2.1.1.2.3.cmml">B</mi><mo id="S4.SS5.p1.2.m2.1.1.2.1a" xref="S4.SS5.p1.2.m2.1.1.2.1.cmml">/</mo><mi id="S4.SS5.p1.2.m2.1.1.2.4" xref="S4.SS5.p1.2.m2.1.1.2.4.cmml">X</mi></mrow><mo id="S4.SS5.p1.2.m2.1.1.1" xref="S4.SS5.p1.2.m2.1.1.1.cmml">⁢</mo><mi id="S4.SS5.p1.2.m2.1.1.3" xref="S4.SS5.p1.2.m2.1.1.3.cmml">L</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.2.m2.1b"><apply id="S4.SS5.p1.2.m2.1.1.cmml" xref="S4.SS5.p1.2.m2.1.1"><times id="S4.SS5.p1.2.m2.1.1.1.cmml" xref="S4.SS5.p1.2.m2.1.1.1"></times><apply id="S4.SS5.p1.2.m2.1.1.2.cmml" xref="S4.SS5.p1.2.m2.1.1.2"><divide id="S4.SS5.p1.2.m2.1.1.2.1.cmml" xref="S4.SS5.p1.2.m2.1.1.2.1"></divide><ci id="S4.SS5.p1.2.m2.1.1.2.2.cmml" xref="S4.SS5.p1.2.m2.1.1.2.2">𝑆</ci><ci id="S4.SS5.p1.2.m2.1.1.2.3.cmml" xref="S4.SS5.p1.2.m2.1.1.2.3">𝐵</ci><ci id="S4.SS5.p1.2.m2.1.1.2.4.cmml" xref="S4.SS5.p1.2.m2.1.1.2.4">𝑋</ci></apply><ci id="S4.SS5.p1.2.m2.1.1.3.cmml" xref="S4.SS5.p1.2.m2.1.1.3">𝐿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.2.m2.1c">S/B/XL</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.2.m2.1d">italic_S / italic_B / italic_X italic_L</annotation></semantics></math> indicates the model size <span class="ltx_text ltx_font_italic" id="S4.SS5.p1.7.1">small, base, XL</span> respectively. T5<math alttext="{}_{sup}^{S/B/XL}" class="ltx_Math" display="inline" id="S4.SS5.p1.3.m3.1"><semantics id="S4.SS5.p1.3.m3.1a"><mmultiscripts id="S4.SS5.p1.3.m3.1.1" xref="S4.SS5.p1.3.m3.1.1.cmml"><mi id="S4.SS5.p1.3.m3.1.1.2.2" xref="S4.SS5.p1.3.m3.1.1.2.2.cmml"></mi><mprescripts id="S4.SS5.p1.3.m3.1.1a" xref="S4.SS5.p1.3.m3.1.1.cmml"></mprescripts><mrow id="S4.SS5.p1.3.m3.1.1b" xref="S4.SS5.p1.3.m3.1.1.cmml"></mrow><mrow id="S4.SS5.p1.3.m3.1.1.3" xref="S4.SS5.p1.3.m3.1.1.3.cmml"><mrow id="S4.SS5.p1.3.m3.1.1.3.2" xref="S4.SS5.p1.3.m3.1.1.3.2.cmml"><mi id="S4.SS5.p1.3.m3.1.1.3.2.2" xref="S4.SS5.p1.3.m3.1.1.3.2.2.cmml">S</mi><mo id="S4.SS5.p1.3.m3.1.1.3.2.1" xref="S4.SS5.p1.3.m3.1.1.3.2.1.cmml">/</mo><mi id="S4.SS5.p1.3.m3.1.1.3.2.3" xref="S4.SS5.p1.3.m3.1.1.3.2.3.cmml">B</mi><mo id="S4.SS5.p1.3.m3.1.1.3.2.1a" xref="S4.SS5.p1.3.m3.1.1.3.2.1.cmml">/</mo><mi id="S4.SS5.p1.3.m3.1.1.3.2.4" xref="S4.SS5.p1.3.m3.1.1.3.2.4.cmml">X</mi></mrow><mo id="S4.SS5.p1.3.m3.1.1.3.1" xref="S4.SS5.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.3.m3.1.1.3.3" xref="S4.SS5.p1.3.m3.1.1.3.3.cmml">L</mi></mrow><mrow id="S4.SS5.p1.3.m3.1.1.2.3" xref="S4.SS5.p1.3.m3.1.1.2.3.cmml"><mi id="S4.SS5.p1.3.m3.1.1.2.3.2" xref="S4.SS5.p1.3.m3.1.1.2.3.2.cmml">s</mi><mo id="S4.SS5.p1.3.m3.1.1.2.3.1" xref="S4.SS5.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.3.m3.1.1.2.3.3" xref="S4.SS5.p1.3.m3.1.1.2.3.3.cmml">u</mi><mo id="S4.SS5.p1.3.m3.1.1.2.3.1a" xref="S4.SS5.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.3.m3.1.1.2.3.4" xref="S4.SS5.p1.3.m3.1.1.2.3.4.cmml">p</mi></mrow><mrow id="S4.SS5.p1.3.m3.1.1c" xref="S4.SS5.p1.3.m3.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.3.m3.1b"><apply id="S4.SS5.p1.3.m3.1.1.cmml" xref="S4.SS5.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.3.m3.1.1.1.cmml" xref="S4.SS5.p1.3.m3.1.1">superscript</csymbol><apply id="S4.SS5.p1.3.m3.1.1.2.cmml" xref="S4.SS5.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.3.m3.1.1.2.1.cmml" xref="S4.SS5.p1.3.m3.1.1">subscript</csymbol><csymbol cd="latexml" id="S4.SS5.p1.3.m3.1.1.2.2.cmml" xref="S4.SS5.p1.3.m3.1.1.2.2">absent</csymbol><apply id="S4.SS5.p1.3.m3.1.1.2.3.cmml" xref="S4.SS5.p1.3.m3.1.1.2.3"><times id="S4.SS5.p1.3.m3.1.1.2.3.1.cmml" xref="S4.SS5.p1.3.m3.1.1.2.3.1"></times><ci id="S4.SS5.p1.3.m3.1.1.2.3.2.cmml" xref="S4.SS5.p1.3.m3.1.1.2.3.2">𝑠</ci><ci id="S4.SS5.p1.3.m3.1.1.2.3.3.cmml" xref="S4.SS5.p1.3.m3.1.1.2.3.3">𝑢</ci><ci id="S4.SS5.p1.3.m3.1.1.2.3.4.cmml" xref="S4.SS5.p1.3.m3.1.1.2.3.4">𝑝</ci></apply></apply><apply id="S4.SS5.p1.3.m3.1.1.3.cmml" xref="S4.SS5.p1.3.m3.1.1.3"><times id="S4.SS5.p1.3.m3.1.1.3.1.cmml" xref="S4.SS5.p1.3.m3.1.1.3.1"></times><apply id="S4.SS5.p1.3.m3.1.1.3.2.cmml" xref="S4.SS5.p1.3.m3.1.1.3.2"><divide id="S4.SS5.p1.3.m3.1.1.3.2.1.cmml" xref="S4.SS5.p1.3.m3.1.1.3.2.1"></divide><ci id="S4.SS5.p1.3.m3.1.1.3.2.2.cmml" xref="S4.SS5.p1.3.m3.1.1.3.2.2">𝑆</ci><ci id="S4.SS5.p1.3.m3.1.1.3.2.3.cmml" xref="S4.SS5.p1.3.m3.1.1.3.2.3">𝐵</ci><ci id="S4.SS5.p1.3.m3.1.1.3.2.4.cmml" xref="S4.SS5.p1.3.m3.1.1.3.2.4">𝑋</ci></apply><ci id="S4.SS5.p1.3.m3.1.1.3.3.cmml" xref="S4.SS5.p1.3.m3.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.3.m3.1c">{}_{sup}^{S/B/XL}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.3.m3.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_S / italic_B / italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math> serves as the foundation models <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="S4.SS5.p1.4.m4.1"><semantics id="S4.SS5.p1.4.m4.1a"><msub id="S4.SS5.p1.4.m4.1.1" xref="S4.SS5.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS5.p1.4.m4.1.1.2" xref="S4.SS5.p1.4.m4.1.1.2.cmml">𝒢</mi><mrow id="S4.SS5.p1.4.m4.1.1.3" xref="S4.SS5.p1.4.m4.1.1.3.cmml"><mi id="S4.SS5.p1.4.m4.1.1.3.2" xref="S4.SS5.p1.4.m4.1.1.3.2.cmml">s</mi><mo id="S4.SS5.p1.4.m4.1.1.3.1" xref="S4.SS5.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.4.m4.1.1.3.3" xref="S4.SS5.p1.4.m4.1.1.3.3.cmml">u</mi><mo id="S4.SS5.p1.4.m4.1.1.3.1a" xref="S4.SS5.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.4.m4.1.1.3.4" xref="S4.SS5.p1.4.m4.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.4.m4.1b"><apply id="S4.SS5.p1.4.m4.1.1.cmml" xref="S4.SS5.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.4.m4.1.1.1.cmml" xref="S4.SS5.p1.4.m4.1.1">subscript</csymbol><ci id="S4.SS5.p1.4.m4.1.1.2.cmml" xref="S4.SS5.p1.4.m4.1.1.2">𝒢</ci><apply id="S4.SS5.p1.4.m4.1.1.3.cmml" xref="S4.SS5.p1.4.m4.1.1.3"><times id="S4.SS5.p1.4.m4.1.1.3.1.cmml" xref="S4.SS5.p1.4.m4.1.1.3.1"></times><ci id="S4.SS5.p1.4.m4.1.1.3.2.cmml" xref="S4.SS5.p1.4.m4.1.1.3.2">𝑠</ci><ci id="S4.SS5.p1.4.m4.1.1.3.3.cmml" xref="S4.SS5.p1.4.m4.1.1.3.3">𝑢</ci><ci id="S4.SS5.p1.4.m4.1.1.3.4.cmml" xref="S4.SS5.p1.4.m4.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.4.m4.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.4.m4.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>. We also add a fixed retriever <math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.SS5.p1.5.m5.1"><semantics id="S4.SS5.p1.5.m5.1a"><msub id="S4.SS5.p1.5.m5.1.1" xref="S4.SS5.p1.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS5.p1.5.m5.1.1.2" xref="S4.SS5.p1.5.m5.1.1.2.cmml">ℛ</mi><mrow id="S4.SS5.p1.5.m5.1.1.3" xref="S4.SS5.p1.5.m5.1.1.3.cmml"><mi id="S4.SS5.p1.5.m5.1.1.3.2" xref="S4.SS5.p1.5.m5.1.1.3.2.cmml">f</mi><mo id="S4.SS5.p1.5.m5.1.1.3.1" xref="S4.SS5.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.5.m5.1.1.3.3" xref="S4.SS5.p1.5.m5.1.1.3.3.cmml">i</mi><mo id="S4.SS5.p1.5.m5.1.1.3.1a" xref="S4.SS5.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.5.m5.1.1.3.4" xref="S4.SS5.p1.5.m5.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.5.m5.1b"><apply id="S4.SS5.p1.5.m5.1.1.cmml" xref="S4.SS5.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.5.m5.1.1.1.cmml" xref="S4.SS5.p1.5.m5.1.1">subscript</csymbol><ci id="S4.SS5.p1.5.m5.1.1.2.cmml" xref="S4.SS5.p1.5.m5.1.1.2">ℛ</ci><apply id="S4.SS5.p1.5.m5.1.1.3.cmml" xref="S4.SS5.p1.5.m5.1.1.3"><times id="S4.SS5.p1.5.m5.1.1.3.1.cmml" xref="S4.SS5.p1.5.m5.1.1.3.1"></times><ci id="S4.SS5.p1.5.m5.1.1.3.2.cmml" xref="S4.SS5.p1.5.m5.1.1.3.2">𝑓</ci><ci id="S4.SS5.p1.5.m5.1.1.3.3.cmml" xref="S4.SS5.p1.5.m5.1.1.3.3">𝑖</ci><ci id="S4.SS5.p1.5.m5.1.1.3.4.cmml" xref="S4.SS5.p1.5.m5.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.5.m5.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.5.m5.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math> initialized from Contriever to validate the effectiveness of tuned and untuned retrievers.
Meanwhile, we utilized the reinforcement learning tuning (T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS5.p1.6.m6.1"><semantics id="S4.SS5.p1.6.m6.1a"><mmultiscripts id="S4.SS5.p1.6.m6.1.1" xref="S4.SS5.p1.6.m6.1.1.cmml"><mi id="S4.SS5.p1.6.m6.1.1.2.2" xref="S4.SS5.p1.6.m6.1.1.2.2.cmml"></mi><mprescripts id="S4.SS5.p1.6.m6.1.1a" xref="S4.SS5.p1.6.m6.1.1.cmml"></mprescripts><mrow id="S4.SS5.p1.6.m6.1.1.3" xref="S4.SS5.p1.6.m6.1.1.3.cmml"><mi id="S4.SS5.p1.6.m6.1.1.3.2" xref="S4.SS5.p1.6.m6.1.1.3.2.cmml">S</mi><mo id="S4.SS5.p1.6.m6.1.1.3.1" xref="S4.SS5.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.6.m6.1.1.3.3" xref="S4.SS5.p1.6.m6.1.1.3.3.cmml">u</mi><mo id="S4.SS5.p1.6.m6.1.1.3.1a" xref="S4.SS5.p1.6.m6.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.6.m6.1.1.3.4" xref="S4.SS5.p1.6.m6.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS5.p1.6.m6.1.1b" xref="S4.SS5.p1.6.m6.1.1.cmml"></mrow><mrow id="S4.SS5.p1.6.m6.1.1c" xref="S4.SS5.p1.6.m6.1.1.cmml"></mrow><mi id="S4.SS5.p1.6.m6.1.1.2.3" xref="S4.SS5.p1.6.m6.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.6.m6.1b"><apply id="S4.SS5.p1.6.m6.1.1.cmml" xref="S4.SS5.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.6.m6.1.1.1.cmml" xref="S4.SS5.p1.6.m6.1.1">subscript</csymbol><apply id="S4.SS5.p1.6.m6.1.1.2.cmml" xref="S4.SS5.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.6.m6.1.1.2.1.cmml" xref="S4.SS5.p1.6.m6.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS5.p1.6.m6.1.1.2.2.cmml" xref="S4.SS5.p1.6.m6.1.1.2.2">absent</csymbol><ci id="S4.SS5.p1.6.m6.1.1.2.3.cmml" xref="S4.SS5.p1.6.m6.1.1.2.3">𝑆</ci></apply><apply id="S4.SS5.p1.6.m6.1.1.3.cmml" xref="S4.SS5.p1.6.m6.1.1.3"><times id="S4.SS5.p1.6.m6.1.1.3.1.cmml" xref="S4.SS5.p1.6.m6.1.1.3.1"></times><ci id="S4.SS5.p1.6.m6.1.1.3.2.cmml" xref="S4.SS5.p1.6.m6.1.1.3.2">𝑆</ci><ci id="S4.SS5.p1.6.m6.1.1.3.3.cmml" xref="S4.SS5.p1.6.m6.1.1.3.3">𝑢</ci><ci id="S4.SS5.p1.6.m6.1.1.3.4.cmml" xref="S4.SS5.p1.6.m6.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.6.m6.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.6.m6.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.SS5.p1.7.m7.1"><semantics id="S4.SS5.p1.7.m7.1a"><msub id="S4.SS5.p1.7.m7.1.1" xref="S4.SS5.p1.7.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS5.p1.7.m7.1.1.2" xref="S4.SS5.p1.7.m7.1.1.2.cmml">ℛ</mi><mrow id="S4.SS5.p1.7.m7.1.1.3" xref="S4.SS5.p1.7.m7.1.1.3.cmml"><mi id="S4.SS5.p1.7.m7.1.1.3.2" xref="S4.SS5.p1.7.m7.1.1.3.2.cmml">f</mi><mo id="S4.SS5.p1.7.m7.1.1.3.1" xref="S4.SS5.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.7.m7.1.1.3.3" xref="S4.SS5.p1.7.m7.1.1.3.3.cmml">i</mi><mo id="S4.SS5.p1.7.m7.1.1.3.1a" xref="S4.SS5.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="S4.SS5.p1.7.m7.1.1.3.4" xref="S4.SS5.p1.7.m7.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS5.p1.7.m7.1b"><apply id="S4.SS5.p1.7.m7.1.1.cmml" xref="S4.SS5.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS5.p1.7.m7.1.1.1.cmml" xref="S4.SS5.p1.7.m7.1.1">subscript</csymbol><ci id="S4.SS5.p1.7.m7.1.1.2.cmml" xref="S4.SS5.p1.7.m7.1.1.2">ℛ</ci><apply id="S4.SS5.p1.7.m7.1.1.3.cmml" xref="S4.SS5.p1.7.m7.1.1.3"><times id="S4.SS5.p1.7.m7.1.1.3.1.cmml" xref="S4.SS5.p1.7.m7.1.1.3.1"></times><ci id="S4.SS5.p1.7.m7.1.1.3.2.cmml" xref="S4.SS5.p1.7.m7.1.1.3.2">𝑓</ci><ci id="S4.SS5.p1.7.m7.1.1.3.3.cmml" xref="S4.SS5.p1.7.m7.1.1.3.3">𝑖</ci><ci id="S4.SS5.p1.7.m7.1.1.3.4.cmml" xref="S4.SS5.p1.7.m7.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS5.p1.7.m7.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.SS5.p1.7.m7.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>+RL) as one baseline, where the reward is set as the desired objective. Lastly, we introduce the RAG tuning that updates the retriever based on the generator’s training output probabilities instead of the desired metric, which is to validate the direct and indirect metric tuning for the objective.</p>
</div>
<figure class="ltx_table" id="S4.T1">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.19">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.4.4.5">Model</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.4.6">F1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.4.7">BLEU</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.4.8">ROUGE-L</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.1.1">F1<sub class="ltx_sub" id="S4.T1.1.1.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.1.1.1.1.1">↑</span></sub>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.2">BLEU<sub class="ltx_sub" id="S4.T1.2.2.2.1"><span class="ltx_text ltx_font_italic" id="S4.T1.2.2.2.1.1">↑</span></sub>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.3">ROUGE-L<sub class="ltx_sub" id="S4.T1.3.3.3.1"><span class="ltx_text ltx_font_italic" id="S4.T1.3.3.3.1.1">↑</span></sub>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.4.4.4">AVG<sub class="ltx_sub" id="S4.T1.4.4.4.1"><span class="ltx_text ltx_font_italic" id="S4.T1.4.4.4.1.1">↑</span></sub>
</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.5.5.1">T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.5.5.1.m1.1"><semantics id="S4.T1.5.5.1.m1.1a"><mmultiscripts id="S4.T1.5.5.1.m1.1.1" xref="S4.T1.5.5.1.m1.1.1.cmml"><mi id="S4.T1.5.5.1.m1.1.1.2.2" xref="S4.T1.5.5.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.5.5.1.m1.1.1a" xref="S4.T1.5.5.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.5.5.1.m1.1.1.3" xref="S4.T1.5.5.1.m1.1.1.3.cmml"><mi id="S4.T1.5.5.1.m1.1.1.3.2" xref="S4.T1.5.5.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.5.5.1.m1.1.1.3.1" xref="S4.T1.5.5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.5.5.1.m1.1.1.3.3" xref="S4.T1.5.5.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.5.5.1.m1.1.1.3.1a" xref="S4.T1.5.5.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.5.5.1.m1.1.1.3.4" xref="S4.T1.5.5.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.5.5.1.m1.1.1b" xref="S4.T1.5.5.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.5.5.1.m1.1.1c" xref="S4.T1.5.5.1.m1.1.1.cmml"></mrow><mi id="S4.T1.5.5.1.m1.1.1.2.3" xref="S4.T1.5.5.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.5.5.1.m1.1b"><apply id="S4.T1.5.5.1.m1.1.1.cmml" xref="S4.T1.5.5.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.5.5.1.m1.1.1.1.cmml" xref="S4.T1.5.5.1.m1.1.1">subscript</csymbol><apply id="S4.T1.5.5.1.m1.1.1.2.cmml" xref="S4.T1.5.5.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.5.5.1.m1.1.1.2.1.cmml" xref="S4.T1.5.5.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.5.5.1.m1.1.1.2.2.cmml" xref="S4.T1.5.5.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.5.5.1.m1.1.1.2.3.cmml" xref="S4.T1.5.5.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.T1.5.5.1.m1.1.1.3.cmml" xref="S4.T1.5.5.1.m1.1.1.3"><times id="S4.T1.5.5.1.m1.1.1.3.1.cmml" xref="S4.T1.5.5.1.m1.1.1.3.1"></times><ci id="S4.T1.5.5.1.m1.1.1.3.2.cmml" xref="S4.T1.5.5.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.5.5.1.m1.1.1.3.3.cmml" xref="S4.T1.5.5.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.5.5.1.m1.1.1.3.4.cmml" xref="S4.T1.5.5.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.5.5.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.5.5.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.2">13.90</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.3">3.03</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.4">14.15</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.5">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.6">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.7">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.5.8">0.00%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.7.7.2">T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.6.6.1.m1.1"><semantics id="S4.T1.6.6.1.m1.1a"><mmultiscripts id="S4.T1.6.6.1.m1.1.1" xref="S4.T1.6.6.1.m1.1.1.cmml"><mi id="S4.T1.6.6.1.m1.1.1.2.2" xref="S4.T1.6.6.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.6.6.1.m1.1.1a" xref="S4.T1.6.6.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.6.6.1.m1.1.1.3" xref="S4.T1.6.6.1.m1.1.1.3.cmml"><mi id="S4.T1.6.6.1.m1.1.1.3.2" xref="S4.T1.6.6.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.6.6.1.m1.1.1.3.1" xref="S4.T1.6.6.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.6.6.1.m1.1.1.3.3" xref="S4.T1.6.6.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.6.6.1.m1.1.1.3.1a" xref="S4.T1.6.6.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.6.6.1.m1.1.1.3.4" xref="S4.T1.6.6.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.6.6.1.m1.1.1b" xref="S4.T1.6.6.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.6.6.1.m1.1.1c" xref="S4.T1.6.6.1.m1.1.1.cmml"></mrow><mi id="S4.T1.6.6.1.m1.1.1.2.3" xref="S4.T1.6.6.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.6.6.1.m1.1b"><apply id="S4.T1.6.6.1.m1.1.1.cmml" xref="S4.T1.6.6.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.6.6.1.m1.1.1.1.cmml" xref="S4.T1.6.6.1.m1.1.1">subscript</csymbol><apply id="S4.T1.6.6.1.m1.1.1.2.cmml" xref="S4.T1.6.6.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.6.6.1.m1.1.1.2.1.cmml" xref="S4.T1.6.6.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.6.6.1.m1.1.1.2.2.cmml" xref="S4.T1.6.6.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.6.6.1.m1.1.1.2.3.cmml" xref="S4.T1.6.6.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.T1.6.6.1.m1.1.1.3.cmml" xref="S4.T1.6.6.1.m1.1.1.3"><times id="S4.T1.6.6.1.m1.1.1.3.1.cmml" xref="S4.T1.6.6.1.m1.1.1.3.1"></times><ci id="S4.T1.6.6.1.m1.1.1.3.2.cmml" xref="S4.T1.6.6.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.6.6.1.m1.1.1.3.3.cmml" xref="S4.T1.6.6.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.6.6.1.m1.1.1.3.4.cmml" xref="S4.T1.6.6.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.6.6.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.6.6.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.T1.7.7.2.m2.1"><semantics id="S4.T1.7.7.2.m2.1a"><msub id="S4.T1.7.7.2.m2.1.1" xref="S4.T1.7.7.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.T1.7.7.2.m2.1.1.2" xref="S4.T1.7.7.2.m2.1.1.2.cmml">ℛ</mi><mrow id="S4.T1.7.7.2.m2.1.1.3" xref="S4.T1.7.7.2.m2.1.1.3.cmml"><mi id="S4.T1.7.7.2.m2.1.1.3.2" xref="S4.T1.7.7.2.m2.1.1.3.2.cmml">f</mi><mo id="S4.T1.7.7.2.m2.1.1.3.1" xref="S4.T1.7.7.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.7.7.2.m2.1.1.3.3" xref="S4.T1.7.7.2.m2.1.1.3.3.cmml">i</mi><mo id="S4.T1.7.7.2.m2.1.1.3.1a" xref="S4.T1.7.7.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.7.7.2.m2.1.1.3.4" xref="S4.T1.7.7.2.m2.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.T1.7.7.2.m2.1b"><apply id="S4.T1.7.7.2.m2.1.1.cmml" xref="S4.T1.7.7.2.m2.1.1"><csymbol cd="ambiguous" id="S4.T1.7.7.2.m2.1.1.1.cmml" xref="S4.T1.7.7.2.m2.1.1">subscript</csymbol><ci id="S4.T1.7.7.2.m2.1.1.2.cmml" xref="S4.T1.7.7.2.m2.1.1.2">ℛ</ci><apply id="S4.T1.7.7.2.m2.1.1.3.cmml" xref="S4.T1.7.7.2.m2.1.1.3"><times id="S4.T1.7.7.2.m2.1.1.3.1.cmml" xref="S4.T1.7.7.2.m2.1.1.3.1"></times><ci id="S4.T1.7.7.2.m2.1.1.3.2.cmml" xref="S4.T1.7.7.2.m2.1.1.3.2">𝑓</ci><ci id="S4.T1.7.7.2.m2.1.1.3.3.cmml" xref="S4.T1.7.7.2.m2.1.1.3.3">𝑖</ci><ci id="S4.T1.7.7.2.m2.1.1.3.4.cmml" xref="S4.T1.7.7.2.m2.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.7.7.2.m2.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.7.7.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.3">14.09</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.4">3.08</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.5">14.00</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.6">1.37%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.7">1.59%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.8">-1.03%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.7.7.9">0.64%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.9.9.2">T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.8.8.1.m1.1"><semantics id="S4.T1.8.8.1.m1.1a"><mmultiscripts id="S4.T1.8.8.1.m1.1.1" xref="S4.T1.8.8.1.m1.1.1.cmml"><mi id="S4.T1.8.8.1.m1.1.1.2.2" xref="S4.T1.8.8.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.8.8.1.m1.1.1a" xref="S4.T1.8.8.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.8.8.1.m1.1.1.3" xref="S4.T1.8.8.1.m1.1.1.3.cmml"><mi id="S4.T1.8.8.1.m1.1.1.3.2" xref="S4.T1.8.8.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.8.8.1.m1.1.1.3.1" xref="S4.T1.8.8.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.8.8.1.m1.1.1.3.3" xref="S4.T1.8.8.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.8.8.1.m1.1.1.3.1a" xref="S4.T1.8.8.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.8.8.1.m1.1.1.3.4" xref="S4.T1.8.8.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.8.8.1.m1.1.1b" xref="S4.T1.8.8.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.8.8.1.m1.1.1c" xref="S4.T1.8.8.1.m1.1.1.cmml"></mrow><mi id="S4.T1.8.8.1.m1.1.1.2.3" xref="S4.T1.8.8.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.8.8.1.m1.1b"><apply id="S4.T1.8.8.1.m1.1.1.cmml" xref="S4.T1.8.8.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.8.8.1.m1.1.1.1.cmml" xref="S4.T1.8.8.1.m1.1.1">subscript</csymbol><apply id="S4.T1.8.8.1.m1.1.1.2.cmml" xref="S4.T1.8.8.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.8.8.1.m1.1.1.2.1.cmml" xref="S4.T1.8.8.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.8.8.1.m1.1.1.2.2.cmml" xref="S4.T1.8.8.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.8.8.1.m1.1.1.2.3.cmml" xref="S4.T1.8.8.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.T1.8.8.1.m1.1.1.3.cmml" xref="S4.T1.8.8.1.m1.1.1.3"><times id="S4.T1.8.8.1.m1.1.1.3.1.cmml" xref="S4.T1.8.8.1.m1.1.1.3.1"></times><ci id="S4.T1.8.8.1.m1.1.1.3.2.cmml" xref="S4.T1.8.8.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.8.8.1.m1.1.1.3.3.cmml" xref="S4.T1.8.8.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.8.8.1.m1.1.1.3.4.cmml" xref="S4.T1.8.8.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.8.8.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.8.8.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.T1.9.9.2.m2.1"><semantics id="S4.T1.9.9.2.m2.1a"><msub id="S4.T1.9.9.2.m2.1.1" xref="S4.T1.9.9.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.T1.9.9.2.m2.1.1.2" xref="S4.T1.9.9.2.m2.1.1.2.cmml">ℛ</mi><mrow id="S4.T1.9.9.2.m2.1.1.3" xref="S4.T1.9.9.2.m2.1.1.3.cmml"><mi id="S4.T1.9.9.2.m2.1.1.3.2" xref="S4.T1.9.9.2.m2.1.1.3.2.cmml">f</mi><mo id="S4.T1.9.9.2.m2.1.1.3.1" xref="S4.T1.9.9.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.9.9.2.m2.1.1.3.3" xref="S4.T1.9.9.2.m2.1.1.3.3.cmml">i</mi><mo id="S4.T1.9.9.2.m2.1.1.3.1a" xref="S4.T1.9.9.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.9.9.2.m2.1.1.3.4" xref="S4.T1.9.9.2.m2.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.T1.9.9.2.m2.1b"><apply id="S4.T1.9.9.2.m2.1.1.cmml" xref="S4.T1.9.9.2.m2.1.1"><csymbol cd="ambiguous" id="S4.T1.9.9.2.m2.1.1.1.cmml" xref="S4.T1.9.9.2.m2.1.1">subscript</csymbol><ci id="S4.T1.9.9.2.m2.1.1.2.cmml" xref="S4.T1.9.9.2.m2.1.1.2">ℛ</ci><apply id="S4.T1.9.9.2.m2.1.1.3.cmml" xref="S4.T1.9.9.2.m2.1.1.3"><times id="S4.T1.9.9.2.m2.1.1.3.1.cmml" xref="S4.T1.9.9.2.m2.1.1.3.1"></times><ci id="S4.T1.9.9.2.m2.1.1.3.2.cmml" xref="S4.T1.9.9.2.m2.1.1.3.2">𝑓</ci><ci id="S4.T1.9.9.2.m2.1.1.3.3.cmml" xref="S4.T1.9.9.2.m2.1.1.3.3">𝑖</ci><ci id="S4.T1.9.9.2.m2.1.1.3.4.cmml" xref="S4.T1.9.9.2.m2.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.9.9.2.m2.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.9.9.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>+RL</th>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.3">2.50</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.4">0.21</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.5">5.49</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.6">-81.98%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.7">-93.07%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.8">-61.22%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.9.9.9">-78.76%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.10.10.1">T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.10.10.1.m1.1"><semantics id="S4.T1.10.10.1.m1.1a"><mmultiscripts id="S4.T1.10.10.1.m1.1.1" xref="S4.T1.10.10.1.m1.1.1.cmml"><mi id="S4.T1.10.10.1.m1.1.1.2.2" xref="S4.T1.10.10.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.10.10.1.m1.1.1a" xref="S4.T1.10.10.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.10.10.1.m1.1.1.3" xref="S4.T1.10.10.1.m1.1.1.3.cmml"><mi id="S4.T1.10.10.1.m1.1.1.3.2" xref="S4.T1.10.10.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.10.10.1.m1.1.1.3.1" xref="S4.T1.10.10.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.10.10.1.m1.1.1.3.3" xref="S4.T1.10.10.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.10.10.1.m1.1.1.3.1a" xref="S4.T1.10.10.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.10.10.1.m1.1.1.3.4" xref="S4.T1.10.10.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.10.10.1.m1.1.1b" xref="S4.T1.10.10.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.10.10.1.m1.1.1c" xref="S4.T1.10.10.1.m1.1.1.cmml"></mrow><mi id="S4.T1.10.10.1.m1.1.1.2.3" xref="S4.T1.10.10.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.10.10.1.m1.1b"><apply id="S4.T1.10.10.1.m1.1.1.cmml" xref="S4.T1.10.10.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.10.10.1.m1.1.1.1.cmml" xref="S4.T1.10.10.1.m1.1.1">subscript</csymbol><apply id="S4.T1.10.10.1.m1.1.1.2.cmml" xref="S4.T1.10.10.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.10.10.1.m1.1.1.2.1.cmml" xref="S4.T1.10.10.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.10.10.1.m1.1.1.2.2.cmml" xref="S4.T1.10.10.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.10.10.1.m1.1.1.2.3.cmml" xref="S4.T1.10.10.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.T1.10.10.1.m1.1.1.3.cmml" xref="S4.T1.10.10.1.m1.1.1.3"><times id="S4.T1.10.10.1.m1.1.1.3.1.cmml" xref="S4.T1.10.10.1.m1.1.1.3.1"></times><ci id="S4.T1.10.10.1.m1.1.1.3.2.cmml" xref="S4.T1.10.10.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.10.10.1.m1.1.1.3.3.cmml" xref="S4.T1.10.10.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.10.10.1.m1.1.1.3.4.cmml" xref="S4.T1.10.10.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.10.10.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.10.10.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+RAG</th>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.2">14.20</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.3">2.94</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.4">14.10</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.5">2.14%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.6">-2.84%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.7">-0.35%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.10.10.8">-0.35%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.11.11.1">T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.11.11.1.m1.1"><semantics id="S4.T1.11.11.1.m1.1a"><mmultiscripts id="S4.T1.11.11.1.m1.1.1" xref="S4.T1.11.11.1.m1.1.1.cmml"><mi id="S4.T1.11.11.1.m1.1.1.2.2" xref="S4.T1.11.11.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.11.11.1.m1.1.1a" xref="S4.T1.11.11.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.11.11.1.m1.1.1.3" xref="S4.T1.11.11.1.m1.1.1.3.cmml"><mi id="S4.T1.11.11.1.m1.1.1.3.2" xref="S4.T1.11.11.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.11.11.1.m1.1.1.3.1" xref="S4.T1.11.11.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.11.11.1.m1.1.1.3.3" xref="S4.T1.11.11.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.11.11.1.m1.1.1.3.1a" xref="S4.T1.11.11.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.11.11.1.m1.1.1.3.4" xref="S4.T1.11.11.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.11.11.1.m1.1.1b" xref="S4.T1.11.11.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.11.11.1.m1.1.1c" xref="S4.T1.11.11.1.m1.1.1.cmml"></mrow><mi id="S4.T1.11.11.1.m1.1.1.2.3" xref="S4.T1.11.11.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.11.11.1.m1.1b"><apply id="S4.T1.11.11.1.m1.1.1.cmml" xref="S4.T1.11.11.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.11.11.1.m1.1.1.1.cmml" xref="S4.T1.11.11.1.m1.1.1">subscript</csymbol><apply id="S4.T1.11.11.1.m1.1.1.2.cmml" xref="S4.T1.11.11.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.11.11.1.m1.1.1.2.1.cmml" xref="S4.T1.11.11.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.11.11.1.m1.1.1.2.2.cmml" xref="S4.T1.11.11.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.11.11.1.m1.1.1.2.3.cmml" xref="S4.T1.11.11.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.T1.11.11.1.m1.1.1.3.cmml" xref="S4.T1.11.11.1.m1.1.1.3"><times id="S4.T1.11.11.1.m1.1.1.3.1.cmml" xref="S4.T1.11.11.1.m1.1.1.3.1"></times><ci id="S4.T1.11.11.1.m1.1.1.3.2.cmml" xref="S4.T1.11.11.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.11.11.1.m1.1.1.3.3.cmml" xref="S4.T1.11.11.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.11.11.1.m1.1.1.3.4.cmml" xref="S4.T1.11.11.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.11.11.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.11.11.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.2"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.2.1">14.62</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.3"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.3.1">3.23</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.4"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.4.1">14.44</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.5"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.5.1">5.17%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.6"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.6.1">6.57%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.7"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.7.1">2.07%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.11.11.8"><span class="ltx_text ltx_font_bold" id="S4.T1.11.11.8.1">4.60%</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.12.12.1">T5<math alttext="{}^{B}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.12.12.1.m1.1"><semantics id="S4.T1.12.12.1.m1.1a"><mmultiscripts id="S4.T1.12.12.1.m1.1.1" xref="S4.T1.12.12.1.m1.1.1.cmml"><mi id="S4.T1.12.12.1.m1.1.1.2.2" xref="S4.T1.12.12.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.12.12.1.m1.1.1a" xref="S4.T1.12.12.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.12.12.1.m1.1.1.3" xref="S4.T1.12.12.1.m1.1.1.3.cmml"><mi id="S4.T1.12.12.1.m1.1.1.3.2" xref="S4.T1.12.12.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.12.12.1.m1.1.1.3.1" xref="S4.T1.12.12.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.12.12.1.m1.1.1.3.3" xref="S4.T1.12.12.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.12.12.1.m1.1.1.3.1a" xref="S4.T1.12.12.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.12.12.1.m1.1.1.3.4" xref="S4.T1.12.12.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.12.12.1.m1.1.1b" xref="S4.T1.12.12.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.12.12.1.m1.1.1c" xref="S4.T1.12.12.1.m1.1.1.cmml"></mrow><mi id="S4.T1.12.12.1.m1.1.1.2.3" xref="S4.T1.12.12.1.m1.1.1.2.3.cmml">B</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.12.12.1.m1.1b"><apply id="S4.T1.12.12.1.m1.1.1.cmml" xref="S4.T1.12.12.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.12.12.1.m1.1.1.1.cmml" xref="S4.T1.12.12.1.m1.1.1">subscript</csymbol><apply id="S4.T1.12.12.1.m1.1.1.2.cmml" xref="S4.T1.12.12.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.12.12.1.m1.1.1.2.1.cmml" xref="S4.T1.12.12.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.12.12.1.m1.1.1.2.2.cmml" xref="S4.T1.12.12.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.12.12.1.m1.1.1.2.3.cmml" xref="S4.T1.12.12.1.m1.1.1.2.3">𝐵</ci></apply><apply id="S4.T1.12.12.1.m1.1.1.3.cmml" xref="S4.T1.12.12.1.m1.1.1.3"><times id="S4.T1.12.12.1.m1.1.1.3.1.cmml" xref="S4.T1.12.12.1.m1.1.1.3.1"></times><ci id="S4.T1.12.12.1.m1.1.1.3.2.cmml" xref="S4.T1.12.12.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.12.12.1.m1.1.1.3.3.cmml" xref="S4.T1.12.12.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.12.12.1.m1.1.1.3.4.cmml" xref="S4.T1.12.12.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.12.12.1.m1.1c">{}^{B}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.12.12.1.m1.1d">start_FLOATSUPERSCRIPT italic_B end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.2">15.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.3">3.42</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.4">14.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.5">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.6">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.7">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.12.12.8">0.00%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.14.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.14.14.2">T5<math alttext="{}^{B}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.13.13.1.m1.1"><semantics id="S4.T1.13.13.1.m1.1a"><mmultiscripts id="S4.T1.13.13.1.m1.1.1" xref="S4.T1.13.13.1.m1.1.1.cmml"><mi id="S4.T1.13.13.1.m1.1.1.2.2" xref="S4.T1.13.13.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.13.13.1.m1.1.1a" xref="S4.T1.13.13.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.13.13.1.m1.1.1.3" xref="S4.T1.13.13.1.m1.1.1.3.cmml"><mi id="S4.T1.13.13.1.m1.1.1.3.2" xref="S4.T1.13.13.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.13.13.1.m1.1.1.3.1" xref="S4.T1.13.13.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.13.13.1.m1.1.1.3.3" xref="S4.T1.13.13.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.13.13.1.m1.1.1.3.1a" xref="S4.T1.13.13.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.13.13.1.m1.1.1.3.4" xref="S4.T1.13.13.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.13.13.1.m1.1.1b" xref="S4.T1.13.13.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.13.13.1.m1.1.1c" xref="S4.T1.13.13.1.m1.1.1.cmml"></mrow><mi id="S4.T1.13.13.1.m1.1.1.2.3" xref="S4.T1.13.13.1.m1.1.1.2.3.cmml">B</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.13.13.1.m1.1b"><apply id="S4.T1.13.13.1.m1.1.1.cmml" xref="S4.T1.13.13.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.13.13.1.m1.1.1.1.cmml" xref="S4.T1.13.13.1.m1.1.1">subscript</csymbol><apply id="S4.T1.13.13.1.m1.1.1.2.cmml" xref="S4.T1.13.13.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.13.13.1.m1.1.1.2.1.cmml" xref="S4.T1.13.13.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.13.13.1.m1.1.1.2.2.cmml" xref="S4.T1.13.13.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.13.13.1.m1.1.1.2.3.cmml" xref="S4.T1.13.13.1.m1.1.1.2.3">𝐵</ci></apply><apply id="S4.T1.13.13.1.m1.1.1.3.cmml" xref="S4.T1.13.13.1.m1.1.1.3"><times id="S4.T1.13.13.1.m1.1.1.3.1.cmml" xref="S4.T1.13.13.1.m1.1.1.3.1"></times><ci id="S4.T1.13.13.1.m1.1.1.3.2.cmml" xref="S4.T1.13.13.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.13.13.1.m1.1.1.3.3.cmml" xref="S4.T1.13.13.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.13.13.1.m1.1.1.3.4.cmml" xref="S4.T1.13.13.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.13.13.1.m1.1c">{}^{B}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.13.13.1.m1.1d">start_FLOATSUPERSCRIPT italic_B end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.T1.14.14.2.m2.1"><semantics id="S4.T1.14.14.2.m2.1a"><msub id="S4.T1.14.14.2.m2.1.1" xref="S4.T1.14.14.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.T1.14.14.2.m2.1.1.2" xref="S4.T1.14.14.2.m2.1.1.2.cmml">ℛ</mi><mrow id="S4.T1.14.14.2.m2.1.1.3" xref="S4.T1.14.14.2.m2.1.1.3.cmml"><mi id="S4.T1.14.14.2.m2.1.1.3.2" xref="S4.T1.14.14.2.m2.1.1.3.2.cmml">f</mi><mo id="S4.T1.14.14.2.m2.1.1.3.1" xref="S4.T1.14.14.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.14.14.2.m2.1.1.3.3" xref="S4.T1.14.14.2.m2.1.1.3.3.cmml">i</mi><mo id="S4.T1.14.14.2.m2.1.1.3.1a" xref="S4.T1.14.14.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.14.14.2.m2.1.1.3.4" xref="S4.T1.14.14.2.m2.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.T1.14.14.2.m2.1b"><apply id="S4.T1.14.14.2.m2.1.1.cmml" xref="S4.T1.14.14.2.m2.1.1"><csymbol cd="ambiguous" id="S4.T1.14.14.2.m2.1.1.1.cmml" xref="S4.T1.14.14.2.m2.1.1">subscript</csymbol><ci id="S4.T1.14.14.2.m2.1.1.2.cmml" xref="S4.T1.14.14.2.m2.1.1.2">ℛ</ci><apply id="S4.T1.14.14.2.m2.1.1.3.cmml" xref="S4.T1.14.14.2.m2.1.1.3"><times id="S4.T1.14.14.2.m2.1.1.3.1.cmml" xref="S4.T1.14.14.2.m2.1.1.3.1"></times><ci id="S4.T1.14.14.2.m2.1.1.3.2.cmml" xref="S4.T1.14.14.2.m2.1.1.3.2">𝑓</ci><ci id="S4.T1.14.14.2.m2.1.1.3.3.cmml" xref="S4.T1.14.14.2.m2.1.1.3.3">𝑖</ci><ci id="S4.T1.14.14.2.m2.1.1.3.4.cmml" xref="S4.T1.14.14.2.m2.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.14.14.2.m2.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.14.14.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.3">14.36</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.4">3.34</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.5">15.05</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.6">-7.18%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.7">-2.31%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.8">0.82%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.14.14.9">-2.89%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.1">T5<math alttext="{}^{B}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.15.15.1.m1.1"><semantics id="S4.T1.15.15.1.m1.1a"><mmultiscripts id="S4.T1.15.15.1.m1.1.1" xref="S4.T1.15.15.1.m1.1.1.cmml"><mi id="S4.T1.15.15.1.m1.1.1.2.2" xref="S4.T1.15.15.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.15.15.1.m1.1.1a" xref="S4.T1.15.15.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.15.15.1.m1.1.1.3" xref="S4.T1.15.15.1.m1.1.1.3.cmml"><mi id="S4.T1.15.15.1.m1.1.1.3.2" xref="S4.T1.15.15.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.15.15.1.m1.1.1.3.1" xref="S4.T1.15.15.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.15.15.1.m1.1.1.3.3" xref="S4.T1.15.15.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.15.15.1.m1.1.1.3.1a" xref="S4.T1.15.15.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.15.15.1.m1.1.1.3.4" xref="S4.T1.15.15.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.15.15.1.m1.1.1b" xref="S4.T1.15.15.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.15.15.1.m1.1.1c" xref="S4.T1.15.15.1.m1.1.1.cmml"></mrow><mi id="S4.T1.15.15.1.m1.1.1.2.3" xref="S4.T1.15.15.1.m1.1.1.2.3.cmml">B</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.15.15.1.m1.1b"><apply id="S4.T1.15.15.1.m1.1.1.cmml" xref="S4.T1.15.15.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.15.15.1.m1.1.1.1.cmml" xref="S4.T1.15.15.1.m1.1.1">subscript</csymbol><apply id="S4.T1.15.15.1.m1.1.1.2.cmml" xref="S4.T1.15.15.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.15.15.1.m1.1.1.2.1.cmml" xref="S4.T1.15.15.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.15.15.1.m1.1.1.2.2.cmml" xref="S4.T1.15.15.1.m1.1.1.2.2">absent</csymbol><ci id="S4.T1.15.15.1.m1.1.1.2.3.cmml" xref="S4.T1.15.15.1.m1.1.1.2.3">𝐵</ci></apply><apply id="S4.T1.15.15.1.m1.1.1.3.cmml" xref="S4.T1.15.15.1.m1.1.1.3"><times id="S4.T1.15.15.1.m1.1.1.3.1.cmml" xref="S4.T1.15.15.1.m1.1.1.3.1"></times><ci id="S4.T1.15.15.1.m1.1.1.3.2.cmml" xref="S4.T1.15.15.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.15.15.1.m1.1.1.3.3.cmml" xref="S4.T1.15.15.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.15.15.1.m1.1.1.3.4.cmml" xref="S4.T1.15.15.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.15.15.1.m1.1c">{}^{B}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.15.15.1.m1.1d">start_FLOATSUPERSCRIPT italic_B end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.2"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.2.1">16.08</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.3"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.3.1">3.53</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.4"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.4.1">15.33</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.5"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.5.1">3.94%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.6"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.6.1">3.21%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.7"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.7.1">2.67%</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.15.15.8"><span class="ltx_text ltx_font_bold" id="S4.T1.15.15.8.1">3.27%</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.16.16">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.16.16.1">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.16.16.1.m1.1"><semantics id="S4.T1.16.16.1.m1.1a"><mmultiscripts id="S4.T1.16.16.1.m1.1.1" xref="S4.T1.16.16.1.m1.1.1.cmml"><mi id="S4.T1.16.16.1.m1.1.1.2.2" xref="S4.T1.16.16.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.16.16.1.m1.1.1a" xref="S4.T1.16.16.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.16.16.1.m1.1.1.3" xref="S4.T1.16.16.1.m1.1.1.3.cmml"><mi id="S4.T1.16.16.1.m1.1.1.3.2" xref="S4.T1.16.16.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.16.16.1.m1.1.1.3.1" xref="S4.T1.16.16.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.16.16.1.m1.1.1.3.3" xref="S4.T1.16.16.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.16.16.1.m1.1.1.3.1a" xref="S4.T1.16.16.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.16.16.1.m1.1.1.3.4" xref="S4.T1.16.16.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.16.16.1.m1.1.1b" xref="S4.T1.16.16.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.16.16.1.m1.1.1c" xref="S4.T1.16.16.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.16.16.1.m1.1.1.2.3" xref="S4.T1.16.16.1.m1.1.1.2.3.cmml"><mi id="S4.T1.16.16.1.m1.1.1.2.3.2" xref="S4.T1.16.16.1.m1.1.1.2.3.2.cmml">X</mi><mo id="S4.T1.16.16.1.m1.1.1.2.3.1" xref="S4.T1.16.16.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.T1.16.16.1.m1.1.1.2.3.3" xref="S4.T1.16.16.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.16.16.1.m1.1b"><apply id="S4.T1.16.16.1.m1.1.1.cmml" xref="S4.T1.16.16.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.16.16.1.m1.1.1.1.cmml" xref="S4.T1.16.16.1.m1.1.1">subscript</csymbol><apply id="S4.T1.16.16.1.m1.1.1.2.cmml" xref="S4.T1.16.16.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.16.16.1.m1.1.1.2.1.cmml" xref="S4.T1.16.16.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.16.16.1.m1.1.1.2.2.cmml" xref="S4.T1.16.16.1.m1.1.1.2.2">absent</csymbol><apply id="S4.T1.16.16.1.m1.1.1.2.3.cmml" xref="S4.T1.16.16.1.m1.1.1.2.3"><times id="S4.T1.16.16.1.m1.1.1.2.3.1.cmml" xref="S4.T1.16.16.1.m1.1.1.2.3.1"></times><ci id="S4.T1.16.16.1.m1.1.1.2.3.2.cmml" xref="S4.T1.16.16.1.m1.1.1.2.3.2">𝑋</ci><ci id="S4.T1.16.16.1.m1.1.1.2.3.3.cmml" xref="S4.T1.16.16.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="S4.T1.16.16.1.m1.1.1.3.cmml" xref="S4.T1.16.16.1.m1.1.1.3"><times id="S4.T1.16.16.1.m1.1.1.3.1.cmml" xref="S4.T1.16.16.1.m1.1.1.3.1"></times><ci id="S4.T1.16.16.1.m1.1.1.3.2.cmml" xref="S4.T1.16.16.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.16.16.1.m1.1.1.3.3.cmml" xref="S4.T1.16.16.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.16.16.1.m1.1.1.3.4.cmml" xref="S4.T1.16.16.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.16.16.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.16.16.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.2">16.22</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.3">3.55</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.4">15.55</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.5">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.6">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.7">0.00%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.16.16.8">0.00%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.18.18">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.18.18.2">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.17.17.1.m1.1"><semantics id="S4.T1.17.17.1.m1.1a"><mmultiscripts id="S4.T1.17.17.1.m1.1.1" xref="S4.T1.17.17.1.m1.1.1.cmml"><mi id="S4.T1.17.17.1.m1.1.1.2.2" xref="S4.T1.17.17.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.17.17.1.m1.1.1a" xref="S4.T1.17.17.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.17.17.1.m1.1.1.3" xref="S4.T1.17.17.1.m1.1.1.3.cmml"><mi id="S4.T1.17.17.1.m1.1.1.3.2" xref="S4.T1.17.17.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.17.17.1.m1.1.1.3.1" xref="S4.T1.17.17.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.17.17.1.m1.1.1.3.3" xref="S4.T1.17.17.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.17.17.1.m1.1.1.3.1a" xref="S4.T1.17.17.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.17.17.1.m1.1.1.3.4" xref="S4.T1.17.17.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.17.17.1.m1.1.1b" xref="S4.T1.17.17.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.17.17.1.m1.1.1c" xref="S4.T1.17.17.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.17.17.1.m1.1.1.2.3" xref="S4.T1.17.17.1.m1.1.1.2.3.cmml"><mi id="S4.T1.17.17.1.m1.1.1.2.3.2" xref="S4.T1.17.17.1.m1.1.1.2.3.2.cmml">X</mi><mo id="S4.T1.17.17.1.m1.1.1.2.3.1" xref="S4.T1.17.17.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.T1.17.17.1.m1.1.1.2.3.3" xref="S4.T1.17.17.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.17.17.1.m1.1b"><apply id="S4.T1.17.17.1.m1.1.1.cmml" xref="S4.T1.17.17.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.17.17.1.m1.1.1.1.cmml" xref="S4.T1.17.17.1.m1.1.1">subscript</csymbol><apply id="S4.T1.17.17.1.m1.1.1.2.cmml" xref="S4.T1.17.17.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.17.17.1.m1.1.1.2.1.cmml" xref="S4.T1.17.17.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.17.17.1.m1.1.1.2.2.cmml" xref="S4.T1.17.17.1.m1.1.1.2.2">absent</csymbol><apply id="S4.T1.17.17.1.m1.1.1.2.3.cmml" xref="S4.T1.17.17.1.m1.1.1.2.3"><times id="S4.T1.17.17.1.m1.1.1.2.3.1.cmml" xref="S4.T1.17.17.1.m1.1.1.2.3.1"></times><ci id="S4.T1.17.17.1.m1.1.1.2.3.2.cmml" xref="S4.T1.17.17.1.m1.1.1.2.3.2">𝑋</ci><ci id="S4.T1.17.17.1.m1.1.1.2.3.3.cmml" xref="S4.T1.17.17.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="S4.T1.17.17.1.m1.1.1.3.cmml" xref="S4.T1.17.17.1.m1.1.1.3"><times id="S4.T1.17.17.1.m1.1.1.3.1.cmml" xref="S4.T1.17.17.1.m1.1.1.3.1"></times><ci id="S4.T1.17.17.1.m1.1.1.3.2.cmml" xref="S4.T1.17.17.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.17.17.1.m1.1.1.3.3.cmml" xref="S4.T1.17.17.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.17.17.1.m1.1.1.3.4.cmml" xref="S4.T1.17.17.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.17.17.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.17.17.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.T1.18.18.2.m2.1"><semantics id="S4.T1.18.18.2.m2.1a"><msub id="S4.T1.18.18.2.m2.1.1" xref="S4.T1.18.18.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.T1.18.18.2.m2.1.1.2" xref="S4.T1.18.18.2.m2.1.1.2.cmml">ℛ</mi><mrow id="S4.T1.18.18.2.m2.1.1.3" xref="S4.T1.18.18.2.m2.1.1.3.cmml"><mi id="S4.T1.18.18.2.m2.1.1.3.2" xref="S4.T1.18.18.2.m2.1.1.3.2.cmml">f</mi><mo id="S4.T1.18.18.2.m2.1.1.3.1" xref="S4.T1.18.18.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.18.18.2.m2.1.1.3.3" xref="S4.T1.18.18.2.m2.1.1.3.3.cmml">i</mi><mo id="S4.T1.18.18.2.m2.1.1.3.1a" xref="S4.T1.18.18.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.18.18.2.m2.1.1.3.4" xref="S4.T1.18.18.2.m2.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.T1.18.18.2.m2.1b"><apply id="S4.T1.18.18.2.m2.1.1.cmml" xref="S4.T1.18.18.2.m2.1.1"><csymbol cd="ambiguous" id="S4.T1.18.18.2.m2.1.1.1.cmml" xref="S4.T1.18.18.2.m2.1.1">subscript</csymbol><ci id="S4.T1.18.18.2.m2.1.1.2.cmml" xref="S4.T1.18.18.2.m2.1.1.2">ℛ</ci><apply id="S4.T1.18.18.2.m2.1.1.3.cmml" xref="S4.T1.18.18.2.m2.1.1.3"><times id="S4.T1.18.18.2.m2.1.1.3.1.cmml" xref="S4.T1.18.18.2.m2.1.1.3.1"></times><ci id="S4.T1.18.18.2.m2.1.1.3.2.cmml" xref="S4.T1.18.18.2.m2.1.1.3.2">𝑓</ci><ci id="S4.T1.18.18.2.m2.1.1.3.3.cmml" xref="S4.T1.18.18.2.m2.1.1.3.3">𝑖</ci><ci id="S4.T1.18.18.2.m2.1.1.3.4.cmml" xref="S4.T1.18.18.2.m2.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.18.18.2.m2.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.18.18.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.3">16.27</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.4">3.36</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.5">15.02</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.6">0.31%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.7">-5.32%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.8">-3.41%</td>
<td class="ltx_td ltx_align_center" id="S4.T1.18.18.9">-2.81%</td>
</tr>
<tr class="ltx_tr" id="S4.T1.19.19">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="S4.T1.19.19.1">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="S4.T1.19.19.1.m1.1"><semantics id="S4.T1.19.19.1.m1.1a"><mmultiscripts id="S4.T1.19.19.1.m1.1.1" xref="S4.T1.19.19.1.m1.1.1.cmml"><mi id="S4.T1.19.19.1.m1.1.1.2.2" xref="S4.T1.19.19.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.T1.19.19.1.m1.1.1a" xref="S4.T1.19.19.1.m1.1.1.cmml"></mprescripts><mrow id="S4.T1.19.19.1.m1.1.1.3" xref="S4.T1.19.19.1.m1.1.1.3.cmml"><mi id="S4.T1.19.19.1.m1.1.1.3.2" xref="S4.T1.19.19.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.T1.19.19.1.m1.1.1.3.1" xref="S4.T1.19.19.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.19.19.1.m1.1.1.3.3" xref="S4.T1.19.19.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.T1.19.19.1.m1.1.1.3.1a" xref="S4.T1.19.19.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.T1.19.19.1.m1.1.1.3.4" xref="S4.T1.19.19.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.T1.19.19.1.m1.1.1b" xref="S4.T1.19.19.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.19.19.1.m1.1.1c" xref="S4.T1.19.19.1.m1.1.1.cmml"></mrow><mrow id="S4.T1.19.19.1.m1.1.1.2.3" xref="S4.T1.19.19.1.m1.1.1.2.3.cmml"><mi id="S4.T1.19.19.1.m1.1.1.2.3.2" xref="S4.T1.19.19.1.m1.1.1.2.3.2.cmml">X</mi><mo id="S4.T1.19.19.1.m1.1.1.2.3.1" xref="S4.T1.19.19.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="S4.T1.19.19.1.m1.1.1.2.3.3" xref="S4.T1.19.19.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.T1.19.19.1.m1.1b"><apply id="S4.T1.19.19.1.m1.1.1.cmml" xref="S4.T1.19.19.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.19.19.1.m1.1.1.1.cmml" xref="S4.T1.19.19.1.m1.1.1">subscript</csymbol><apply id="S4.T1.19.19.1.m1.1.1.2.cmml" xref="S4.T1.19.19.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T1.19.19.1.m1.1.1.2.1.cmml" xref="S4.T1.19.19.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.T1.19.19.1.m1.1.1.2.2.cmml" xref="S4.T1.19.19.1.m1.1.1.2.2">absent</csymbol><apply id="S4.T1.19.19.1.m1.1.1.2.3.cmml" xref="S4.T1.19.19.1.m1.1.1.2.3"><times id="S4.T1.19.19.1.m1.1.1.2.3.1.cmml" xref="S4.T1.19.19.1.m1.1.1.2.3.1"></times><ci id="S4.T1.19.19.1.m1.1.1.2.3.2.cmml" xref="S4.T1.19.19.1.m1.1.1.2.3.2">𝑋</ci><ci id="S4.T1.19.19.1.m1.1.1.2.3.3.cmml" xref="S4.T1.19.19.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="S4.T1.19.19.1.m1.1.1.3.cmml" xref="S4.T1.19.19.1.m1.1.1.3"><times id="S4.T1.19.19.1.m1.1.1.3.1.cmml" xref="S4.T1.19.19.1.m1.1.1.3.1"></times><ci id="S4.T1.19.19.1.m1.1.1.3.2.cmml" xref="S4.T1.19.19.1.m1.1.1.3.2">𝑆</ci><ci id="S4.T1.19.19.1.m1.1.1.3.3.cmml" xref="S4.T1.19.19.1.m1.1.1.3.3">𝑢</ci><ci id="S4.T1.19.19.1.m1.1.1.3.4.cmml" xref="S4.T1.19.19.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.19.19.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.T1.19.19.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.2"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.2.1">17.11</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.3"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.3.1">3.56</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.4"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.4.1">15.64</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.5"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.5.1">5.49%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.6"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.6.1">0.30%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.7"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.7.1">0.56%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.19.19.8"><span class="ltx_text ltx_font_bold" id="S4.T1.19.19.8.1">2.11%</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span>Experimental results of various methods based on language models with varying sizes. <sub class="ltx_sub" id="S4.T1.23.1"><span class="ltx_text ltx_font_italic" id="S4.T1.23.1.1">↑</span></sub> denotes the relative improvement over the supervised foundation model. The best result under each setting is shown in bold.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.6 </span>Results</h3>
<div class="ltx_para" id="S4.SS6.p1">
<p class="ltx_p" id="S4.SS6.p1.3">The T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p1.1.m1.1"><semantics id="S4.SS6.p1.1.m1.1a"><mmultiscripts id="S4.SS6.p1.1.m1.1.1" xref="S4.SS6.p1.1.m1.1.1.cmml"><mi id="S4.SS6.p1.1.m1.1.1.2.2" xref="S4.SS6.p1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p1.1.m1.1.1a" xref="S4.SS6.p1.1.m1.1.1.cmml"></mprescripts><mrow id="S4.SS6.p1.1.m1.1.1.3" xref="S4.SS6.p1.1.m1.1.1.3.cmml"><mi id="S4.SS6.p1.1.m1.1.1.3.2" xref="S4.SS6.p1.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p1.1.m1.1.1.3.1" xref="S4.SS6.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.1.m1.1.1.3.3" xref="S4.SS6.p1.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p1.1.m1.1.1.3.1a" xref="S4.SS6.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.1.m1.1.1.3.4" xref="S4.SS6.p1.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p1.1.m1.1.1b" xref="S4.SS6.p1.1.m1.1.1.cmml"></mrow><mrow id="S4.SS6.p1.1.m1.1.1c" xref="S4.SS6.p1.1.m1.1.1.cmml"></mrow><mi id="S4.SS6.p1.1.m1.1.1.2.3" xref="S4.SS6.p1.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p1.1.m1.1b"><apply id="S4.SS6.p1.1.m1.1.1.cmml" xref="S4.SS6.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p1.1.m1.1.1.1.cmml" xref="S4.SS6.p1.1.m1.1.1">subscript</csymbol><apply id="S4.SS6.p1.1.m1.1.1.2.cmml" xref="S4.SS6.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p1.1.m1.1.1.2.1.cmml" xref="S4.SS6.p1.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p1.1.m1.1.1.2.2.cmml" xref="S4.SS6.p1.1.m1.1.1.2.2">absent</csymbol><ci id="S4.SS6.p1.1.m1.1.1.2.3.cmml" xref="S4.SS6.p1.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.SS6.p1.1.m1.1.1.3.cmml" xref="S4.SS6.p1.1.m1.1.1.3"><times id="S4.SS6.p1.1.m1.1.1.3.1.cmml" xref="S4.SS6.p1.1.m1.1.1.3.1"></times><ci id="S4.SS6.p1.1.m1.1.1.3.2.cmml" xref="S4.SS6.p1.1.m1.1.1.3.2">𝑆</ci><ci id="S4.SS6.p1.1.m1.1.1.3.3.cmml" xref="S4.SS6.p1.1.m1.1.1.3.3">𝑢</ci><ci id="S4.SS6.p1.1.m1.1.1.3.4.cmml" xref="S4.SS6.p1.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p1.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p1.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> model forms our baseline. Augmenting it with a fixed retriever, T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p1.2.m2.1"><semantics id="S4.SS6.p1.2.m2.1a"><mmultiscripts id="S4.SS6.p1.2.m2.1.1" xref="S4.SS6.p1.2.m2.1.1.cmml"><mi id="S4.SS6.p1.2.m2.1.1.2.2" xref="S4.SS6.p1.2.m2.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p1.2.m2.1.1a" xref="S4.SS6.p1.2.m2.1.1.cmml"></mprescripts><mrow id="S4.SS6.p1.2.m2.1.1.3" xref="S4.SS6.p1.2.m2.1.1.3.cmml"><mi id="S4.SS6.p1.2.m2.1.1.3.2" xref="S4.SS6.p1.2.m2.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p1.2.m2.1.1.3.1" xref="S4.SS6.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.2.m2.1.1.3.3" xref="S4.SS6.p1.2.m2.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p1.2.m2.1.1.3.1a" xref="S4.SS6.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.2.m2.1.1.3.4" xref="S4.SS6.p1.2.m2.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p1.2.m2.1.1b" xref="S4.SS6.p1.2.m2.1.1.cmml"></mrow><mrow id="S4.SS6.p1.2.m2.1.1c" xref="S4.SS6.p1.2.m2.1.1.cmml"></mrow><mi id="S4.SS6.p1.2.m2.1.1.2.3" xref="S4.SS6.p1.2.m2.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p1.2.m2.1b"><apply id="S4.SS6.p1.2.m2.1.1.cmml" xref="S4.SS6.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p1.2.m2.1.1.1.cmml" xref="S4.SS6.p1.2.m2.1.1">subscript</csymbol><apply id="S4.SS6.p1.2.m2.1.1.2.cmml" xref="S4.SS6.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p1.2.m2.1.1.2.1.cmml" xref="S4.SS6.p1.2.m2.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p1.2.m2.1.1.2.2.cmml" xref="S4.SS6.p1.2.m2.1.1.2.2">absent</csymbol><ci id="S4.SS6.p1.2.m2.1.1.2.3.cmml" xref="S4.SS6.p1.2.m2.1.1.2.3">𝑆</ci></apply><apply id="S4.SS6.p1.2.m2.1.1.3.cmml" xref="S4.SS6.p1.2.m2.1.1.3"><times id="S4.SS6.p1.2.m2.1.1.3.1.cmml" xref="S4.SS6.p1.2.m2.1.1.3.1"></times><ci id="S4.SS6.p1.2.m2.1.1.3.2.cmml" xref="S4.SS6.p1.2.m2.1.1.3.2">𝑆</ci><ci id="S4.SS6.p1.2.m2.1.1.3.3.cmml" xref="S4.SS6.p1.2.m2.1.1.3.3">𝑢</ci><ci id="S4.SS6.p1.2.m2.1.1.3.4.cmml" xref="S4.SS6.p1.2.m2.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p1.2.m2.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p1.2.m2.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.SS6.p1.3.m3.1"><semantics id="S4.SS6.p1.3.m3.1a"><msub id="S4.SS6.p1.3.m3.1.1" xref="S4.SS6.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS6.p1.3.m3.1.1.2" xref="S4.SS6.p1.3.m3.1.1.2.cmml">ℛ</mi><mrow id="S4.SS6.p1.3.m3.1.1.3" xref="S4.SS6.p1.3.m3.1.1.3.cmml"><mi id="S4.SS6.p1.3.m3.1.1.3.2" xref="S4.SS6.p1.3.m3.1.1.3.2.cmml">f</mi><mo id="S4.SS6.p1.3.m3.1.1.3.1" xref="S4.SS6.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.3.m3.1.1.3.3" xref="S4.SS6.p1.3.m3.1.1.3.3.cmml">i</mi><mo id="S4.SS6.p1.3.m3.1.1.3.1a" xref="S4.SS6.p1.3.m3.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p1.3.m3.1.1.3.4" xref="S4.SS6.p1.3.m3.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS6.p1.3.m3.1b"><apply id="S4.SS6.p1.3.m3.1.1.cmml" xref="S4.SS6.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS6.p1.3.m3.1.1.1.cmml" xref="S4.SS6.p1.3.m3.1.1">subscript</csymbol><ci id="S4.SS6.p1.3.m3.1.1.2.cmml" xref="S4.SS6.p1.3.m3.1.1.2">ℛ</ci><apply id="S4.SS6.p1.3.m3.1.1.3.cmml" xref="S4.SS6.p1.3.m3.1.1.3"><times id="S4.SS6.p1.3.m3.1.1.3.1.cmml" xref="S4.SS6.p1.3.m3.1.1.3.1"></times><ci id="S4.SS6.p1.3.m3.1.1.3.2.cmml" xref="S4.SS6.p1.3.m3.1.1.3.2">𝑓</ci><ci id="S4.SS6.p1.3.m3.1.1.3.3.cmml" xref="S4.SS6.p1.3.m3.1.1.3.3">𝑖</ci><ci id="S4.SS6.p1.3.m3.1.1.3.4.cmml" xref="S4.SS6.p1.3.m3.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p1.3.m3.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p1.3.m3.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>, shows a slight improvement in F1 and BLEU scores but a small decrease in the ROUGE-L score. This indicates a moderate enhancement in both F1 and BLEU, though the decrease in ROUGE-L suggests a trade-off in terms of capturing long-distance dependencies.</p>
</div>
<div class="ltx_para" id="S4.SS6.p2">
<p class="ltx_p" id="S4.SS6.p2.2">The results for reinforcement learning tuning, T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p2.1.m1.1"><semantics id="S4.SS6.p2.1.m1.1a"><mmultiscripts id="S4.SS6.p2.1.m1.1.1" xref="S4.SS6.p2.1.m1.1.1.cmml"><mi id="S4.SS6.p2.1.m1.1.1.2.2" xref="S4.SS6.p2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p2.1.m1.1.1a" xref="S4.SS6.p2.1.m1.1.1.cmml"></mprescripts><mrow id="S4.SS6.p2.1.m1.1.1.3" xref="S4.SS6.p2.1.m1.1.1.3.cmml"><mi id="S4.SS6.p2.1.m1.1.1.3.2" xref="S4.SS6.p2.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p2.1.m1.1.1.3.1" xref="S4.SS6.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p2.1.m1.1.1.3.3" xref="S4.SS6.p2.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p2.1.m1.1.1.3.1a" xref="S4.SS6.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p2.1.m1.1.1.3.4" xref="S4.SS6.p2.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p2.1.m1.1.1b" xref="S4.SS6.p2.1.m1.1.1.cmml"></mrow><mrow id="S4.SS6.p2.1.m1.1.1c" xref="S4.SS6.p2.1.m1.1.1.cmml"></mrow><mi id="S4.SS6.p2.1.m1.1.1.2.3" xref="S4.SS6.p2.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p2.1.m1.1b"><apply id="S4.SS6.p2.1.m1.1.1.cmml" xref="S4.SS6.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p2.1.m1.1.1.1.cmml" xref="S4.SS6.p2.1.m1.1.1">subscript</csymbol><apply id="S4.SS6.p2.1.m1.1.1.2.cmml" xref="S4.SS6.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p2.1.m1.1.1.2.1.cmml" xref="S4.SS6.p2.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p2.1.m1.1.1.2.2.cmml" xref="S4.SS6.p2.1.m1.1.1.2.2">absent</csymbol><ci id="S4.SS6.p2.1.m1.1.1.2.3.cmml" xref="S4.SS6.p2.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.SS6.p2.1.m1.1.1.3.cmml" xref="S4.SS6.p2.1.m1.1.1.3"><times id="S4.SS6.p2.1.m1.1.1.3.1.cmml" xref="S4.SS6.p2.1.m1.1.1.3.1"></times><ci id="S4.SS6.p2.1.m1.1.1.3.2.cmml" xref="S4.SS6.p2.1.m1.1.1.3.2">𝑆</ci><ci id="S4.SS6.p2.1.m1.1.1.3.3.cmml" xref="S4.SS6.p2.1.m1.1.1.3.3">𝑢</ci><ci id="S4.SS6.p2.1.m1.1.1.3.4.cmml" xref="S4.SS6.p2.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p2.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p2.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}_{fix}" class="ltx_Math" display="inline" id="S4.SS6.p2.2.m2.1"><semantics id="S4.SS6.p2.2.m2.1a"><msub id="S4.SS6.p2.2.m2.1.1" xref="S4.SS6.p2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS6.p2.2.m2.1.1.2" xref="S4.SS6.p2.2.m2.1.1.2.cmml">ℛ</mi><mrow id="S4.SS6.p2.2.m2.1.1.3" xref="S4.SS6.p2.2.m2.1.1.3.cmml"><mi id="S4.SS6.p2.2.m2.1.1.3.2" xref="S4.SS6.p2.2.m2.1.1.3.2.cmml">f</mi><mo id="S4.SS6.p2.2.m2.1.1.3.1" xref="S4.SS6.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p2.2.m2.1.1.3.3" xref="S4.SS6.p2.2.m2.1.1.3.3.cmml">i</mi><mo id="S4.SS6.p2.2.m2.1.1.3.1a" xref="S4.SS6.p2.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p2.2.m2.1.1.3.4" xref="S4.SS6.p2.2.m2.1.1.3.4.cmml">x</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS6.p2.2.m2.1b"><apply id="S4.SS6.p2.2.m2.1.1.cmml" xref="S4.SS6.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p2.2.m2.1.1.1.cmml" xref="S4.SS6.p2.2.m2.1.1">subscript</csymbol><ci id="S4.SS6.p2.2.m2.1.1.2.cmml" xref="S4.SS6.p2.2.m2.1.1.2">ℛ</ci><apply id="S4.SS6.p2.2.m2.1.1.3.cmml" xref="S4.SS6.p2.2.m2.1.1.3"><times id="S4.SS6.p2.2.m2.1.1.3.1.cmml" xref="S4.SS6.p2.2.m2.1.1.3.1"></times><ci id="S4.SS6.p2.2.m2.1.1.3.2.cmml" xref="S4.SS6.p2.2.m2.1.1.3.2">𝑓</ci><ci id="S4.SS6.p2.2.m2.1.1.3.3.cmml" xref="S4.SS6.p2.2.m2.1.1.3.3">𝑖</ci><ci id="S4.SS6.p2.2.m2.1.1.3.4.cmml" xref="S4.SS6.p2.2.m2.1.1.3.4">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p2.2.m2.1c">\mathcal{R}_{fix}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p2.2.m2.1d">caligraphic_R start_POSTSUBSCRIPT italic_f italic_i italic_x end_POSTSUBSCRIPT</annotation></semantics></math>+RL, exhibit a significant degradation across all metrics, indicating that this method might be not so effective for this task. This could be due to the challenge of setting an appropriate reward function for reinforcement learning.</p>
</div>
<div class="ltx_para" id="S4.SS6.p3">
<p class="ltx_p" id="S4.SS6.p3.2">The T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p3.1.m1.1"><semantics id="S4.SS6.p3.1.m1.1a"><mmultiscripts id="S4.SS6.p3.1.m1.1.1" xref="S4.SS6.p3.1.m1.1.1.cmml"><mi id="S4.SS6.p3.1.m1.1.1.2.2" xref="S4.SS6.p3.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p3.1.m1.1.1a" xref="S4.SS6.p3.1.m1.1.1.cmml"></mprescripts><mrow id="S4.SS6.p3.1.m1.1.1.3" xref="S4.SS6.p3.1.m1.1.1.3.cmml"><mi id="S4.SS6.p3.1.m1.1.1.3.2" xref="S4.SS6.p3.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p3.1.m1.1.1.3.1" xref="S4.SS6.p3.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p3.1.m1.1.1.3.3" xref="S4.SS6.p3.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p3.1.m1.1.1.3.1a" xref="S4.SS6.p3.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p3.1.m1.1.1.3.4" xref="S4.SS6.p3.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p3.1.m1.1.1b" xref="S4.SS6.p3.1.m1.1.1.cmml"></mrow><mrow id="S4.SS6.p3.1.m1.1.1c" xref="S4.SS6.p3.1.m1.1.1.cmml"></mrow><mi id="S4.SS6.p3.1.m1.1.1.2.3" xref="S4.SS6.p3.1.m1.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p3.1.m1.1b"><apply id="S4.SS6.p3.1.m1.1.1.cmml" xref="S4.SS6.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p3.1.m1.1.1.1.cmml" xref="S4.SS6.p3.1.m1.1.1">subscript</csymbol><apply id="S4.SS6.p3.1.m1.1.1.2.cmml" xref="S4.SS6.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p3.1.m1.1.1.2.1.cmml" xref="S4.SS6.p3.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p3.1.m1.1.1.2.2.cmml" xref="S4.SS6.p3.1.m1.1.1.2.2">absent</csymbol><ci id="S4.SS6.p3.1.m1.1.1.2.3.cmml" xref="S4.SS6.p3.1.m1.1.1.2.3">𝑆</ci></apply><apply id="S4.SS6.p3.1.m1.1.1.3.cmml" xref="S4.SS6.p3.1.m1.1.1.3"><times id="S4.SS6.p3.1.m1.1.1.3.1.cmml" xref="S4.SS6.p3.1.m1.1.1.3.1"></times><ci id="S4.SS6.p3.1.m1.1.1.3.2.cmml" xref="S4.SS6.p3.1.m1.1.1.3.2">𝑆</ci><ci id="S4.SS6.p3.1.m1.1.1.3.3.cmml" xref="S4.SS6.p3.1.m1.1.1.3.3">𝑢</ci><ci id="S4.SS6.p3.1.m1.1.1.3.4.cmml" xref="S4.SS6.p3.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p3.1.m1.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p3.1.m1.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+RAG model slightly outperforms the baseline model in terms of F1 but performs worse in terms of BLEU and ROUGE-L. This suggests that while the model seems to generate more correct words, there may be a compromise on the overall grammatical and semantic quality of the generated text. In contrast, the LAPDOG-enhanced model, T5<math alttext="{}^{S}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p3.2.m2.1"><semantics id="S4.SS6.p3.2.m2.1a"><mmultiscripts id="S4.SS6.p3.2.m2.1.1" xref="S4.SS6.p3.2.m2.1.1.cmml"><mi id="S4.SS6.p3.2.m2.1.1.2.2" xref="S4.SS6.p3.2.m2.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p3.2.m2.1.1a" xref="S4.SS6.p3.2.m2.1.1.cmml"></mprescripts><mrow id="S4.SS6.p3.2.m2.1.1.3" xref="S4.SS6.p3.2.m2.1.1.3.cmml"><mi id="S4.SS6.p3.2.m2.1.1.3.2" xref="S4.SS6.p3.2.m2.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p3.2.m2.1.1.3.1" xref="S4.SS6.p3.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p3.2.m2.1.1.3.3" xref="S4.SS6.p3.2.m2.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p3.2.m2.1.1.3.1a" xref="S4.SS6.p3.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p3.2.m2.1.1.3.4" xref="S4.SS6.p3.2.m2.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p3.2.m2.1.1b" xref="S4.SS6.p3.2.m2.1.1.cmml"></mrow><mrow id="S4.SS6.p3.2.m2.1.1c" xref="S4.SS6.p3.2.m2.1.1.cmml"></mrow><mi id="S4.SS6.p3.2.m2.1.1.2.3" xref="S4.SS6.p3.2.m2.1.1.2.3.cmml">S</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p3.2.m2.1b"><apply id="S4.SS6.p3.2.m2.1.1.cmml" xref="S4.SS6.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p3.2.m2.1.1.1.cmml" xref="S4.SS6.p3.2.m2.1.1">subscript</csymbol><apply id="S4.SS6.p3.2.m2.1.1.2.cmml" xref="S4.SS6.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p3.2.m2.1.1.2.1.cmml" xref="S4.SS6.p3.2.m2.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p3.2.m2.1.1.2.2.cmml" xref="S4.SS6.p3.2.m2.1.1.2.2">absent</csymbol><ci id="S4.SS6.p3.2.m2.1.1.2.3.cmml" xref="S4.SS6.p3.2.m2.1.1.2.3">𝑆</ci></apply><apply id="S4.SS6.p3.2.m2.1.1.3.cmml" xref="S4.SS6.p3.2.m2.1.1.3"><times id="S4.SS6.p3.2.m2.1.1.3.1.cmml" xref="S4.SS6.p3.2.m2.1.1.3.1"></times><ci id="S4.SS6.p3.2.m2.1.1.3.2.cmml" xref="S4.SS6.p3.2.m2.1.1.3.2">𝑆</ci><ci id="S4.SS6.p3.2.m2.1.1.3.3.cmml" xref="S4.SS6.p3.2.m2.1.1.3.3">𝑢</ci><ci id="S4.SS6.p3.2.m2.1.1.3.4.cmml" xref="S4.SS6.p3.2.m2.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p3.2.m2.1c">{}^{S}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p3.2.m2.1d">start_FLOATSUPERSCRIPT italic_S end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+LAPDOG, shows the highest improvements in all metrics among small models. This indicates that LAPDOG significantly enhances the ability to generate high-quality text and captures the desired metrics more effectively than other models.</p>
</div>
<div class="ltx_para" id="S4.SS6.p4">
<p class="ltx_p" id="S4.SS6.p4.2">For larger models, similar
phenomena are observed. LAPDOG consistently delivers the best improvements over the base model, no matter whether it is T5<math alttext="{}^{B}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p4.1.m1.1"><semantics id="S4.SS6.p4.1.m1.1a"><mmultiscripts id="S4.SS6.p4.1.m1.1.1" xref="S4.SS6.p4.1.m1.1.1.cmml"><mi id="S4.SS6.p4.1.m1.1.1.2.2" xref="S4.SS6.p4.1.m1.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p4.1.m1.1.1a" xref="S4.SS6.p4.1.m1.1.1.cmml"></mprescripts><mrow id="S4.SS6.p4.1.m1.1.1.3" xref="S4.SS6.p4.1.m1.1.1.3.cmml"><mi id="S4.SS6.p4.1.m1.1.1.3.2" xref="S4.SS6.p4.1.m1.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p4.1.m1.1.1.3.1" xref="S4.SS6.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p4.1.m1.1.1.3.3" xref="S4.SS6.p4.1.m1.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p4.1.m1.1.1.3.1a" xref="S4.SS6.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p4.1.m1.1.1.3.4" xref="S4.SS6.p4.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p4.1.m1.1.1b" xref="S4.SS6.p4.1.m1.1.1.cmml"></mrow><mrow id="S4.SS6.p4.1.m1.1.1c" xref="S4.SS6.p4.1.m1.1.1.cmml"></mrow><mi id="S4.SS6.p4.1.m1.1.1.2.3" xref="S4.SS6.p4.1.m1.1.1.2.3.cmml">B</mi></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p4.1.m1.1b"><apply id="S4.SS6.p4.1.m1.1.1.cmml" xref="S4.SS6.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p4.1.m1.1.1.1.cmml" xref="S4.SS6.p4.1.m1.1.1">subscript</csymbol><apply id="S4.SS6.p4.1.m1.1.1.2.cmml" xref="S4.SS6.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS6.p4.1.m1.1.1.2.1.cmml" xref="S4.SS6.p4.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p4.1.m1.1.1.2.2.cmml" xref="S4.SS6.p4.1.m1.1.1.2.2">absent</csymbol><ci id="S4.SS6.p4.1.m1.1.1.2.3.cmml" xref="S4.SS6.p4.1.m1.1.1.2.3">𝐵</ci></apply><apply id="S4.SS6.p4.1.m1.1.1.3.cmml" xref="S4.SS6.p4.1.m1.1.1.3"><times id="S4.SS6.p4.1.m1.1.1.3.1.cmml" xref="S4.SS6.p4.1.m1.1.1.3.1"></times><ci id="S4.SS6.p4.1.m1.1.1.3.2.cmml" xref="S4.SS6.p4.1.m1.1.1.3.2">𝑆</ci><ci id="S4.SS6.p4.1.m1.1.1.3.3.cmml" xref="S4.SS6.p4.1.m1.1.1.3.3">𝑢</ci><ci id="S4.SS6.p4.1.m1.1.1.3.4.cmml" xref="S4.SS6.p4.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p4.1.m1.1c">{}^{B}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p4.1.m1.1d">start_FLOATSUPERSCRIPT italic_B end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> or T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="S4.SS6.p4.2.m2.1"><semantics id="S4.SS6.p4.2.m2.1a"><mmultiscripts id="S4.SS6.p4.2.m2.1.1" xref="S4.SS6.p4.2.m2.1.1.cmml"><mi id="S4.SS6.p4.2.m2.1.1.2.2" xref="S4.SS6.p4.2.m2.1.1.2.2.cmml"></mi><mprescripts id="S4.SS6.p4.2.m2.1.1a" xref="S4.SS6.p4.2.m2.1.1.cmml"></mprescripts><mrow id="S4.SS6.p4.2.m2.1.1.3" xref="S4.SS6.p4.2.m2.1.1.3.cmml"><mi id="S4.SS6.p4.2.m2.1.1.3.2" xref="S4.SS6.p4.2.m2.1.1.3.2.cmml">S</mi><mo id="S4.SS6.p4.2.m2.1.1.3.1" xref="S4.SS6.p4.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p4.2.m2.1.1.3.3" xref="S4.SS6.p4.2.m2.1.1.3.3.cmml">u</mi><mo id="S4.SS6.p4.2.m2.1.1.3.1a" xref="S4.SS6.p4.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S4.SS6.p4.2.m2.1.1.3.4" xref="S4.SS6.p4.2.m2.1.1.3.4.cmml">p</mi></mrow><mrow id="S4.SS6.p4.2.m2.1.1b" xref="S4.SS6.p4.2.m2.1.1.cmml"></mrow><mrow id="S4.SS6.p4.2.m2.1.1c" xref="S4.SS6.p4.2.m2.1.1.cmml"></mrow><mrow id="S4.SS6.p4.2.m2.1.1.2.3" xref="S4.SS6.p4.2.m2.1.1.2.3.cmml"><mi id="S4.SS6.p4.2.m2.1.1.2.3.2" xref="S4.SS6.p4.2.m2.1.1.2.3.2.cmml">X</mi><mo id="S4.SS6.p4.2.m2.1.1.2.3.1" xref="S4.SS6.p4.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="S4.SS6.p4.2.m2.1.1.2.3.3" xref="S4.SS6.p4.2.m2.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="S4.SS6.p4.2.m2.1b"><apply id="S4.SS6.p4.2.m2.1.1.cmml" xref="S4.SS6.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p4.2.m2.1.1.1.cmml" xref="S4.SS6.p4.2.m2.1.1">subscript</csymbol><apply id="S4.SS6.p4.2.m2.1.1.2.cmml" xref="S4.SS6.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS6.p4.2.m2.1.1.2.1.cmml" xref="S4.SS6.p4.2.m2.1.1">superscript</csymbol><csymbol cd="latexml" id="S4.SS6.p4.2.m2.1.1.2.2.cmml" xref="S4.SS6.p4.2.m2.1.1.2.2">absent</csymbol><apply id="S4.SS6.p4.2.m2.1.1.2.3.cmml" xref="S4.SS6.p4.2.m2.1.1.2.3"><times id="S4.SS6.p4.2.m2.1.1.2.3.1.cmml" xref="S4.SS6.p4.2.m2.1.1.2.3.1"></times><ci id="S4.SS6.p4.2.m2.1.1.2.3.2.cmml" xref="S4.SS6.p4.2.m2.1.1.2.3.2">𝑋</ci><ci id="S4.SS6.p4.2.m2.1.1.2.3.3.cmml" xref="S4.SS6.p4.2.m2.1.1.2.3.3">𝐿</ci></apply></apply><apply id="S4.SS6.p4.2.m2.1.1.3.cmml" xref="S4.SS6.p4.2.m2.1.1.3"><times id="S4.SS6.p4.2.m2.1.1.3.1.cmml" xref="S4.SS6.p4.2.m2.1.1.3.1"></times><ci id="S4.SS6.p4.2.m2.1.1.3.2.cmml" xref="S4.SS6.p4.2.m2.1.1.3.2">𝑆</ci><ci id="S4.SS6.p4.2.m2.1.1.3.3.cmml" xref="S4.SS6.p4.2.m2.1.1.3.3">𝑢</ci><ci id="S4.SS6.p4.2.m2.1.1.3.4.cmml" xref="S4.SS6.p4.2.m2.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS6.p4.2.m2.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="S4.SS6.p4.2.m2.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>. This suggests that the efficacy of LAPDOG is not confined to smaller models and scales well with the model size.</p>
</div>
<figure class="ltx_table" id="S4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t" id="S4.T2.1.1.1.1">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T2.1.1.1.2">BLEU</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T2.1.1.1.3">ROUGE-L</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S4.T2.1.1.1.4">F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.2.1.1">LAPDOG</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.2">3.23</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.3">14.44</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.4">14.62</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.3.2.1">w/o BLEU</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.2">3.07</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.3">14.35</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.4">14.29</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.4.3.1">w/o F1</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.2">2.87</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.3">13.88</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.4">13.88</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="S4.T2.1.5.4.1">w/o ROUGE-L</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.5.4.2">2.96</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.5.4.3">14.12</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.5.4.4">13.99</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Ablation study with respect to the use of metrics in the LAPDOG model.</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Ablation Studies</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">We conduct ablation studies with respect to the metrics, the number of candidates, candidate augmentation, and training strategy, respectively.</p>
</div>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Analysis on Metrics</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">To understand the individual contribution of each metric, we perform ablation experiments by successively removing one metric from the combined optimization process with results shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S4.T2" title="Table 2 ‣ 4.6 Results ‣ 4 Experiment ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">2</span></a>. When we remove BLEU, the performance experiences a slight drop across all metrics with BLEU decreasing to 3.07, ROUGE-L to 14.35, and F1 to 14.29, suggesting that BLEU contributes to a more precise matching of response generation. Moreover, when we exclude F1, we see a more significant reduction in the performance, indicating the crucial role of F1 to ensure the overlap of words between the generated responses and the ground truth. Lastly, the removal of ROUGE-L also results in a decrease in the performance across all three metrics, showing its essential role in evaluating the coherence of generated dialogues. In summary, each metric contributes uniquely to the optimization process, and their combination in LAPDOG provides a more comprehensive guide for the generation of high-quality, personalized dialogues.</p>
</div>
<figure class="ltx_figure" id="S5.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="449" id="S5.F2.g1" src="extracted/5694542/figures/k.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Ablation study with respect to the number of candidates <math alttext="K" class="ltx_Math" display="inline" id="S5.F2.2.m1.1"><semantics id="S5.F2.2.m1.1b"><mi id="S5.F2.2.m1.1.1" xref="S5.F2.2.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.F2.2.m1.1c"><ci id="S5.F2.2.m1.1.1.cmml" xref="S5.F2.2.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.F2.2.m1.1d">K</annotation><annotation encoding="application/x-llamapun" id="S5.F2.2.m1.1e">italic_K</annotation></semantics></math>.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Number of the Candidates</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.2">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.F2" title="Figure 2 ‣ 5.1 Analysis on Metrics ‣ 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">2</span></a>, where <math alttext="K" class="ltx_Math" display="inline" id="S5.SS2.p1.1.m1.1"><semantics id="S5.SS2.p1.1.m1.1a"><mi id="S5.SS2.p1.1.m1.1.1" xref="S5.SS2.p1.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.1.m1.1b"><ci id="S5.SS2.p1.1.m1.1.1.cmml" xref="S5.SS2.p1.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.1.m1.1d">italic_K</annotation></semantics></math> increases from 2 to 6, we observe a consistent improvement in all metrics (i.e., BLEU, ROUGE-L, and F1).
Generally, increasing the number of retrieval candidates improves the performance of the model, as evidenced by the improvements in the BLEU, ROUGE-L, and F1 scores.
Interestingly, it is observed that the model performance does not monotonically increase with the number of candidates. The performance fluctuates as <math alttext="K" class="ltx_Math" display="inline" id="S5.SS2.p1.2.m2.1"><semantics id="S5.SS2.p1.2.m2.1a"><mi id="S5.SS2.p1.2.m2.1.1" xref="S5.SS2.p1.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.2.m2.1b"><ci id="S5.SS2.p1.2.m2.1.1.cmml" xref="S5.SS2.p1.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.2.m2.1d">italic_K</annotation></semantics></math> varies, implying that the number of retrieval candidates needs to be carefully selected. Too few candidates may not provide enough information for generating responses, while too many ones may introduce irrelevant information, which could potentially confuse the model.</p>
</div>
<figure class="ltx_figure" id="S5.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="239" id="S5.F3.g1" src="extracted/5694542/figures/retrieval_diversity.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Comparison of the unique number of stories retrieved by different models.</figcaption>
</figure>
<figure class="ltx_table" id="S5.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S5.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S5.T3.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t" id="S5.T3.1.2.1.1">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.1.2.1.2">BLEU</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.1.2.1.3">ROUGE-L</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S5.T3.1.2.1.4">F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S5.T3.1.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.1.3.1.1">LAPDOG</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.1.2">3.23</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.1.3">14.44</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.1.4">14.62</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.4.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.1.4.2.1">w/o CandAug</th>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.2.2">3.14</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.2.3">14.19</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.2.4">14.43</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="S5.T3.1.1.1">LAPDOG<sub class="ltx_sub" id="S5.T3.1.1.1.1"><span class="ltx_text ltx_font_italic" id="S5.T3.1.1.1.1.1">scratch</span></sub>
</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.1.2">2.95</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.1.3">13.90</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.1.4">14.23</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Ablation study on the candidate augmentation and training strategy.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>Candidate Augmentation</h3>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">The influence of candidate augmentation is explored in two aspects: quantitative performance and the diversity of retrieved stories. Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.T3" title="Table 3 ‣ 5.2 Number of the Candidates ‣ 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3</span></a> provides a comparison between the performance of the LAPDOG model with and without candidate augmentation. The incorporation of candidate augmentation leads to superior performance across all three evaluation metrics. Specifically, LAPDOG without candidate augmentation attains slightly lower scores in all three metrics. This indicates that the inclusion of candidate augmentation enhances the overall performance of our model, confirming its crucial role in the proposed LAPDOG model.</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">To further investigate the impact of candidate augmentation to the retrieval diversity, we count the number of unique stories retrieved during testing. As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.F3" title="Figure 3 ‣ 5.2 Number of the Candidates ‣ 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, the LAPDOG method with candidate augmentation retrieves 1570 unique stories, whereas without it, the model only retrieves 738 unique stories. This result implies that candidate augmentation significantly contributes to the retrieval diversity. Other methods like RAG and fixed retriever manage to retrieve 25 and 1351 unique stories, respectively. This underlines the effectiveness of the proposed candidate augmentation approach in enhancing the diversity of the retrieval process, which in turn can help generate more personalized and contextually rich responses.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.4 </span>Training Strategy</h3>
<div class="ltx_para" id="S5.SS4.p1">
<p class="ltx_p" id="S5.SS4.p1.1">In contrast to the two-stage training process, we perform an ablation study by training LAPDOG from scratch, bypassing the first stage. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#S5.T3" title="Table 3 ‣ 5.2 Number of the Candidates ‣ 5 Ablation Studies ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">3</span></a>, the results exhibit a significant decrease in all the metrics compared with the two-stage approach. Additionally, training directly from scratch requires more time to converge when compared with the two-stage training process. Overall, the two-stage training process is essential from both performance and efficiency standpoints.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">In this paper, we introduced LAPDOG, an end-to-end learnable retrieval augmentation personalized dialogue generation framework. We show that LAPDOG jointly tunes the retriever with the generator to retrieve useful stories from the ROCStory dataset for enhancing the desired performance over the CONVAI2 dataset. LAPDOG gains consistent performance enhancement over language models with varying sizes.</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">This work is supported by NSFC general grant 62076118 and Shenzhen fundamental research program JCYJ20210324105000003.</p>
</div>
</section>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Limitations</h2>
<div class="ltx_para" id="Sx2.p1">
<p class="ltx_p" id="Sx2.p1.1">Given resource constraints, in this paper, we employ language models such as T5 and do not conduct experiments based on currently prevalent large language models <cite class="ltx_cite ltx_citemacro_cite">Brown et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib1" title="">2020</a>); Ouyang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib15" title="">2022</a>)</cite>. Recognizing the enhanced reasoning capabilities of large language models, we posit that tuning the retrieval content with such models could yield significant advantages. Additionally, due to resource limitations, we study a small number of extracted passages (i.e., 2-6) and a short context length (i.e., 512 tokens). Nevertheless, we anticipate that incorporating a larger set of integrated stories and a longer context would further enhance the performance. Also, a more diverse objective rather than the summation of F1, ROUGE, and BLEU might be more helpful to train an engaging conversational AI system. Also, the generator is simply a conventional T5 model rather than explicitly designed models, which could help improve the performance of the proposed LAPDOG model further.</p>
</div>
</section>
<section class="ltx_section" id="Sx3">
<h2 class="ltx_title ltx_title_section">Ethics Statement</h2>
<div class="ltx_para" id="Sx3.p1">
<p class="ltx_p" id="Sx3.p1.1">This work proposes a novel LAPDOG model for personalized dialogue generation, focusing on generating highly tailored responses by leveraging persona profiles and dialogue context. As with all machine learning applications, it is crucial to consider the ethical implications. The use of personal information in our model is limited to fictional persona profiles, and we do not handle or store any real personal data in our experiments. However, when applying our model to real-world applications, careful consideration should be given to data privacy and consent. It is essential to ensure that all personal information used to generate personalized dialogues is obtained ethically and used with the individuals’ informed consent. Moreover, the generated content should respect user privacy, dignity, and cultural sensitivities.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, J. Kaplan, Prafulla
Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell,
Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, T. Henighan,
R. Child, A. Ramesh, Daniel M. Ziegler, Jeff Wu, Clemens Winter, Christopher
Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess,
Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford, Ilya Sutskever,
and Dario Amodei. 2020.

</span>
<span class="ltx_bibblock">Language models are few-shot learners.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">arXiv:2005.14165</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cao et al. (2022)</span>
<span class="ltx_bibblock">
Yu Cao, Wei Bi, Meng Fang, Shuming Shi, and Dacheng Tao. 2022.

</span>
<span class="ltx_bibblock">A model-agnostic data manipulation method for persona-based dialogue
generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv:2204.09867</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Devlin et al. (2019)</span>
<span class="ltx_bibblock">
Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. 2019.

</span>
<span class="ltx_bibblock">BERT: Pre-training of deep bidirectional transformers for language
understanding.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">North American Chapter of the Association for Computational
Linguistics</em>, pages 4171–4186.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dinan et al. (2019)</span>
<span class="ltx_bibblock">
Emily Dinan, Varvara Logacheva, Valentin Malykh, Alexander H. Miller, Kurt
Shuster, Jack Urbanek, Douwe Kiela, Arthur D. Szlam, Iulian Serban, Ryan
Lowe, Shrimai Prabhumoye, Alan W. Black, Alexander I. Rudnicky, Jason
Williams, Joelle Pineau, Mikhail S. Burtsev, and Jason Weston. 2019.

</span>
<span class="ltx_bibblock">The second conversational intelligence challenge (convai2).

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">arXiv:1902.00098</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2022)</span>
<span class="ltx_bibblock">
Qiushi Huang, Yu Zhang, Tom Ko, Xubo Liu, Bo Wu, Wenwu Wang, and Lilian Tang.
2022.

</span>
<span class="ltx_bibblock">Personalized dialogue generation with persona-adaptive attention.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">arXiv preprint arXiv:2210.15088</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Izacard et al. (2021)</span>
<span class="ltx_bibblock">
Gautier Izacard, Mathilde Caron, Lucas Hosseini, Sebastian Riedel, Piotr
Bojanowski, Armand Joulin, and Edouard Grave. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.48550/ARXIV.2112.09118" title="">Unsupervised dense
information retrieval with contrastive learning</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Izacard and Grave (2021)</span>
<span class="ltx_bibblock">
Gautier Izacard and Edouard Grave. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2021.eacl-main.74" title="">Leveraging
passage retrieval with generative models for open domain question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of the 16th Conference of the European Chapter
of the Association for Computational Linguistics: Main Volume</em>, pages
874–880, Online. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Zhengbao Jiang, Frank F. Xu, Luyu Gao, Zhiqing Sun, Qian Liu, Jane Dwivedi-Yu,
Yiming Yang, Jamie Callan, and Graham Neubig. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2305.06983" title="">Active retrieval augmented
generation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karpukhin et al. (2020)</span>
<span class="ltx_bibblock">
Vladimir Karpukhin, Barlas Oguz, Sewon Min, Patrick Lewis, Ledell Wu, Sergey
Edunov, Danqi Chen, and Wen-tau Yih. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.emnlp-main.550" title="">Dense
passage retrieval for open-domain question answering</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">Proceedings of the 2020 Conference on Empirical Methods in
Natural Language Processing (EMNLP)</em>, pages 6769–6781, Online. Association
for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim
Rocktäschel, Sebastian Riedel, and Douwe Kiela. 2020.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Proceedings of the 34th International Conference on Neural
Information Processing Systems</em>, NIPS’20, Red Hook, NY, USA. Curran
Associates Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2019)</span>
<span class="ltx_bibblock">
Zekang Li, Cheng Niu, Fandong Meng, Yang Feng, Qian Li, and Jie Zhou. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/P19-1002" title="">Incremental transformer
with deliberation decoder for document grounded conversations</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the 57th Annual Meeting of the Association
for Computational Linguistics</em>, pages 12–21, Florence, Italy. Association
for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin (2004)</span>
<span class="ltx_bibblock">
Chin-Yew Lin. 2004.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/W04-1013" title="">ROUGE: A package for
automatic evaluation of summaries</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Text Summarization Branches Out</em>, pages 74–81, Barcelona,
Spain. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2020)</span>
<span class="ltx_bibblock">
Qian Liu, Yihong Chen, Bei Chen, Jian-Guang Lou, Zixuan Chen, Bin Zhou, and
Dongmei Zhang. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.acl-main.131" title="">You impress
me: Dialogue generation via mutual persona perception</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 58th Annual Meeting of the Association
for Computational Linguistics</em>, pages 1417–1427, Online. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mostafazadeh et al. (2016)</span>
<span class="ltx_bibblock">
Nasrin Mostafazadeh, Nathanael Chambers, Xiaodong He, Devi Parikh, Dhruv Batra,
Lucy Vanderwende, Pushmeet Kohli, and James Allen. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/N16-1098" title="">A corpus and cloze
evaluation for deeper understanding of commonsense stories</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Proceedings of the Conference of the North American
Chapter of the Association for Computational Linguistics: Human Language
Technologies</em>, pages 839–849, San Diego, California. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela
Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John
Schulman, Jacob Hilton, Fraser Kelton, Luke E. Miller, Maddie Simens, Amanda
Askell, Peter Welinder, Paul Francis Christiano, Jan Leike, and Ryan J. Lowe.
2022.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">ArXiv</em>, abs/2203.02155.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Papineni et al. (2002)</span>
<span class="ltx_bibblock">
Kishore Papineni, Salim Roukos, Todd Ward, and Wei-Jing Zhu. 2002.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.3115/1073083.1073135" title="">Bleu: A method for
automatic evaluation of machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Proceedings of the 40th Annual Meeting on Association for
Computational Linguistics</em>, Association for Computational Linguistics, page
311–318, USA. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Post (2018)</span>
<span class="ltx_bibblock">
Matt Post. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://www.aclweb.org/anthology/W18-6319" title="">A call for clarity
in reporting BLEU scores</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Proceedings of the Third Conference on Machine Translation:
Research Papers</em>, pages 186–191, Belgium, Brussels. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford et al. (2019)</span>
<span class="ltx_bibblock">
Alec Radford, Jeff Wu, Rewon Child, David Luan, Dario Amodei, and Ilya
Sutskever. 2019.

</span>
<span class="ltx_bibblock">Language models are unsupervised multitask learners.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Raffel et al. (2020)</span>
<span class="ltx_bibblock">
Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael
Matena, Yanqi Zhou, Wei Li, and Peter J. Liu. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://jmlr.org/papers/v21/20-074.html" title="">Exploring the limits
of transfer learning with a unified text-to-text transformer</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Journal of Machine Learning Research</em>, 21(140):1–67.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Santhanam et al. (2022)</span>
<span class="ltx_bibblock">
Keshav Santhanam, Omar Khattab, Jon Saad-Falcon, Christopher Potts, and Matei
Zaharia. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.naacl-main.272" title="">ColBERTv2: Effective and efficient retrieval via lightweight late
interaction</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Proceedings of the 2022 Conference of the North American
Chapter of the Association for Computational Linguistics: Human Language
Technologies</em>, pages 3715–3734, Seattle, United States. Association for
Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schick et al. (2023)</span>
<span class="ltx_bibblock">
Timo Schick, Jane Dwivedi-Yu, Roberto Dessìy, Roberta Raileanu, Maria Lomeli,
Luke Zettlemoyer, Nicola Cancedda, and Thomas Scialom. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2302.04761" title="">Toolformer: Language models
can teach themselves to use tools</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Rich James, Mike Lewis,
Luke Zettlemoyer, and Wen tau Yih. 2023.

</span>
<span class="ltx_bibblock">Replug: Retrieval-augmented black-box language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">ArXiv</em>, abs/2301.12652.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Song et al. (2021)</span>
<span class="ltx_bibblock">
Haoyu Song, Yan Wang, Kaiyan Zhang, Weinan Zhang, and Ting Liu. 2021.

</span>
<span class="ltx_bibblock">Bob: Bert over bert for training persona-based dialogue models from
limited personalized data.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Association for Computational Linguistics</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wolf et al. (2019)</span>
<span class="ltx_bibblock">
Thomas Wolf, Victor Sanh, Julien Chaumond, and Clement Delangue. 2019.

</span>
<span class="ltx_bibblock">Transfertransfo: A transfer learning approach for neural network
based conversational agents.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv:1901.08149</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2018)</span>
<span class="ltx_bibblock">
Saizheng Zhang, Emily Dinan, Jack Urbanek, Arthur D. Szlam, Douwe Kiela, and
Jason Weston. 2018.

</span>
<span class="ltx_bibblock">Personalizing dialogue agents: I have a dog, do you have pets too?

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Association for Computational Linguistics</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2020)</span>
<span class="ltx_bibblock">
Xueliang Zhao, Wei Wu, Chongyang Tao, Can Xu, Dongyan Zhao, and Rui Yan. 2020.

</span>
<span class="ltx_bibblock">Low-resource knowledge-grounded dialogue generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">arXiv preprint arXiv:2002.10348</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2022)</span>
<span class="ltx_bibblock">
Shuyan Zhou, Uri Alon, Frank F Xu, Zhengbao JIang, and Graham Neubig. 2022.

</span>
<span class="ltx_bibblock">Doccoder: Generating code by retrieving and reading docs.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2207.05987</em>.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Appendix</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Detail Settings for Training</h3>
<figure class="ltx_table" id="A1.T4">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T4.4">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T4.4.5.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T4.4.5.1.1">Setting</th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T4.4.5.1.2">Value</td>
</tr>
<tr class="ltx_tr" id="A1.T4.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T4.1.1.1"><math alttext="\tau_{g}" class="ltx_Math" display="inline" id="A1.T4.1.1.1.m1.1"><semantics id="A1.T4.1.1.1.m1.1a"><msub id="A1.T4.1.1.1.m1.1.1" xref="A1.T4.1.1.1.m1.1.1.cmml"><mi id="A1.T4.1.1.1.m1.1.1.2" xref="A1.T4.1.1.1.m1.1.1.2.cmml">τ</mi><mi id="A1.T4.1.1.1.m1.1.1.3" xref="A1.T4.1.1.1.m1.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="A1.T4.1.1.1.m1.1b"><apply id="A1.T4.1.1.1.m1.1.1.cmml" xref="A1.T4.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T4.1.1.1.m1.1.1.1.cmml" xref="A1.T4.1.1.1.m1.1.1">subscript</csymbol><ci id="A1.T4.1.1.1.m1.1.1.2.cmml" xref="A1.T4.1.1.1.m1.1.1.2">𝜏</ci><ci id="A1.T4.1.1.1.m1.1.1.3.cmml" xref="A1.T4.1.1.1.m1.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.1.1.1.m1.1c">\tau_{g}</annotation><annotation encoding="application/x-llamapun" id="A1.T4.1.1.1.m1.1d">italic_τ start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T4.1.1.2">0.85</td>
</tr>
<tr class="ltx_tr" id="A1.T4.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.2.2.1"><math alttext="\tau_{s}" class="ltx_Math" display="inline" id="A1.T4.2.2.1.m1.1"><semantics id="A1.T4.2.2.1.m1.1a"><msub id="A1.T4.2.2.1.m1.1.1" xref="A1.T4.2.2.1.m1.1.1.cmml"><mi id="A1.T4.2.2.1.m1.1.1.2" xref="A1.T4.2.2.1.m1.1.1.2.cmml">τ</mi><mi id="A1.T4.2.2.1.m1.1.1.3" xref="A1.T4.2.2.1.m1.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="A1.T4.2.2.1.m1.1b"><apply id="A1.T4.2.2.1.m1.1.1.cmml" xref="A1.T4.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T4.2.2.1.m1.1.1.1.cmml" xref="A1.T4.2.2.1.m1.1.1">subscript</csymbol><ci id="A1.T4.2.2.1.m1.1.1.2.cmml" xref="A1.T4.2.2.1.m1.1.1.2">𝜏</ci><ci id="A1.T4.2.2.1.m1.1.1.3.cmml" xref="A1.T4.2.2.1.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.2.2.1.m1.1c">\tau_{s}</annotation><annotation encoding="application/x-llamapun" id="A1.T4.2.2.1.m1.1d">italic_τ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_left" id="A1.T4.2.2.2">0.8</td>
</tr>
<tr class="ltx_tr" id="A1.T4.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.3.3.1"><math alttext="dialog_{maxturns}" class="ltx_Math" display="inline" id="A1.T4.3.3.1.m1.1"><semantics id="A1.T4.3.3.1.m1.1a"><mrow id="A1.T4.3.3.1.m1.1.1" xref="A1.T4.3.3.1.m1.1.1.cmml"><mi id="A1.T4.3.3.1.m1.1.1.2" xref="A1.T4.3.3.1.m1.1.1.2.cmml">d</mi><mo id="A1.T4.3.3.1.m1.1.1.1" xref="A1.T4.3.3.1.m1.1.1.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.3" xref="A1.T4.3.3.1.m1.1.1.3.cmml">i</mi><mo id="A1.T4.3.3.1.m1.1.1.1a" xref="A1.T4.3.3.1.m1.1.1.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.4" xref="A1.T4.3.3.1.m1.1.1.4.cmml">a</mi><mo id="A1.T4.3.3.1.m1.1.1.1b" xref="A1.T4.3.3.1.m1.1.1.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.5" xref="A1.T4.3.3.1.m1.1.1.5.cmml">l</mi><mo id="A1.T4.3.3.1.m1.1.1.1c" xref="A1.T4.3.3.1.m1.1.1.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.6" xref="A1.T4.3.3.1.m1.1.1.6.cmml">o</mi><mo id="A1.T4.3.3.1.m1.1.1.1d" xref="A1.T4.3.3.1.m1.1.1.1.cmml">⁢</mo><msub id="A1.T4.3.3.1.m1.1.1.7" xref="A1.T4.3.3.1.m1.1.1.7.cmml"><mi id="A1.T4.3.3.1.m1.1.1.7.2" xref="A1.T4.3.3.1.m1.1.1.7.2.cmml">g</mi><mrow id="A1.T4.3.3.1.m1.1.1.7.3" xref="A1.T4.3.3.1.m1.1.1.7.3.cmml"><mi id="A1.T4.3.3.1.m1.1.1.7.3.2" xref="A1.T4.3.3.1.m1.1.1.7.3.2.cmml">m</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.3" xref="A1.T4.3.3.1.m1.1.1.7.3.3.cmml">a</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1a" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.4" xref="A1.T4.3.3.1.m1.1.1.7.3.4.cmml">x</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1b" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.5" xref="A1.T4.3.3.1.m1.1.1.7.3.5.cmml">t</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1c" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.6" xref="A1.T4.3.3.1.m1.1.1.7.3.6.cmml">u</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1d" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.7" xref="A1.T4.3.3.1.m1.1.1.7.3.7.cmml">r</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1e" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.8" xref="A1.T4.3.3.1.m1.1.1.7.3.8.cmml">n</mi><mo id="A1.T4.3.3.1.m1.1.1.7.3.1f" xref="A1.T4.3.3.1.m1.1.1.7.3.1.cmml">⁢</mo><mi id="A1.T4.3.3.1.m1.1.1.7.3.9" xref="A1.T4.3.3.1.m1.1.1.7.3.9.cmml">s</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T4.3.3.1.m1.1b"><apply id="A1.T4.3.3.1.m1.1.1.cmml" xref="A1.T4.3.3.1.m1.1.1"><times id="A1.T4.3.3.1.m1.1.1.1.cmml" xref="A1.T4.3.3.1.m1.1.1.1"></times><ci id="A1.T4.3.3.1.m1.1.1.2.cmml" xref="A1.T4.3.3.1.m1.1.1.2">𝑑</ci><ci id="A1.T4.3.3.1.m1.1.1.3.cmml" xref="A1.T4.3.3.1.m1.1.1.3">𝑖</ci><ci id="A1.T4.3.3.1.m1.1.1.4.cmml" xref="A1.T4.3.3.1.m1.1.1.4">𝑎</ci><ci id="A1.T4.3.3.1.m1.1.1.5.cmml" xref="A1.T4.3.3.1.m1.1.1.5">𝑙</ci><ci id="A1.T4.3.3.1.m1.1.1.6.cmml" xref="A1.T4.3.3.1.m1.1.1.6">𝑜</ci><apply id="A1.T4.3.3.1.m1.1.1.7.cmml" xref="A1.T4.3.3.1.m1.1.1.7"><csymbol cd="ambiguous" id="A1.T4.3.3.1.m1.1.1.7.1.cmml" xref="A1.T4.3.3.1.m1.1.1.7">subscript</csymbol><ci id="A1.T4.3.3.1.m1.1.1.7.2.cmml" xref="A1.T4.3.3.1.m1.1.1.7.2">𝑔</ci><apply id="A1.T4.3.3.1.m1.1.1.7.3.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3"><times id="A1.T4.3.3.1.m1.1.1.7.3.1.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.1"></times><ci id="A1.T4.3.3.1.m1.1.1.7.3.2.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.2">𝑚</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.3.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.3">𝑎</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.4.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.4">𝑥</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.5.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.5">𝑡</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.6.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.6">𝑢</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.7.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.7">𝑟</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.8.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.8">𝑛</ci><ci id="A1.T4.3.3.1.m1.1.1.7.3.9.cmml" xref="A1.T4.3.3.1.m1.1.1.7.3.9">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.3.3.1.m1.1c">dialog_{maxturns}</annotation><annotation encoding="application/x-llamapun" id="A1.T4.3.3.1.m1.1d">italic_d italic_i italic_a italic_l italic_o italic_g start_POSTSUBSCRIPT italic_m italic_a italic_x italic_t italic_u italic_r italic_n italic_s end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_left" id="A1.T4.3.3.2">3</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.6.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.6.2.1">Dropout</th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.6.2.2">0.1</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.7.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.7.3.1">LR</th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.7.3.2">5.00E-04</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.8.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.8.4.1">Optimizer</th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.8.4.2">Adam</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.9.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.9.5.1">WeightDecay</th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.9.5.2">0.01</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.10.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.10.6.1">RetrievalCandidate</th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.10.6.2">6</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T4.4.4.1"><math alttext="\rho" class="ltx_Math" display="inline" id="A1.T4.4.4.1.m1.1"><semantics id="A1.T4.4.4.1.m1.1a"><mi id="A1.T4.4.4.1.m1.1.1" xref="A1.T4.4.4.1.m1.1.1.cmml">ρ</mi><annotation-xml encoding="MathML-Content" id="A1.T4.4.4.1.m1.1b"><ci id="A1.T4.4.4.1.m1.1.1.cmml" xref="A1.T4.4.4.1.m1.1.1">𝜌</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.4.4.1.m1.1c">\rho</annotation><annotation encoding="application/x-llamapun" id="A1.T4.4.4.1.m1.1d">italic_ρ</annotation></semantics></math></th>
<td class="ltx_td ltx_align_left" id="A1.T4.4.4.2">0.5</td>
</tr>
<tr class="ltx_tr" id="A1.T4.4.11.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="A1.T4.4.11.7.1">BatchSize</th>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T4.4.11.7.2">240</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Detail experimental settings for training LAPDOG.</figcaption>
</figure>
<figure class="ltx_table" id="A1.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T5.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T5.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T5.1.1.1.1" style="padding-left:3.0pt;padding-right:3.0pt;">Query</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T5.1.1.1.2" style="padding-left:3.0pt;padding-right:3.0pt;">BLEU</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T5.1.1.1.3" style="padding-left:3.0pt;padding-right:3.0pt;">ROUGE-L</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T5.1.1.1.4" style="padding-left:3.0pt;padding-right:3.0pt;">F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T5.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.2.1.1" style="padding-left:3.0pt;padding-right:3.0pt;">Persona</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.2.1.2" style="padding-left:3.0pt;padding-right:3.0pt;">3.23</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.2.1.3" style="padding-left:3.0pt;padding-right:3.0pt;">14.44</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.2.1.4" style="padding-left:3.0pt;padding-right:3.0pt;">14.62</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.3.2">
<td class="ltx_td ltx_align_left" id="A1.T5.1.3.2.1" style="padding-left:3.0pt;padding-right:3.0pt;">Persona+Dialogue</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.3.2.2" style="padding-left:3.0pt;padding-right:3.0pt;">3.19</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.3.2.3" style="padding-left:3.0pt;padding-right:3.0pt;">14.83</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.3.2.4" style="padding-left:3.0pt;padding-right:3.0pt;">15.06</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.4.3">
<td class="ltx_td ltx_align_left" id="A1.T5.1.4.3.1" style="padding-left:3.0pt;padding-right:3.0pt;">Generated</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.4.3.2" style="padding-left:3.0pt;padding-right:3.0pt;">3.05</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.4.3.3" style="padding-left:3.0pt;padding-right:3.0pt;">14.22</td>
<td class="ltx_td ltx_align_left" id="A1.T5.1.4.3.4" style="padding-left:3.0pt;padding-right:3.0pt;">14.32</td>
</tr>
<tr class="ltx_tr" id="A1.T5.1.5.4">
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T5.1.5.4.1" style="padding-left:3.0pt;padding-right:3.0pt;">One Persona</td>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T5.1.5.4.2" style="padding-left:3.0pt;padding-right:3.0pt;">3.10</td>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T5.1.5.4.3" style="padding-left:3.0pt;padding-right:3.0pt;">14.29</td>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T5.1.5.4.4" style="padding-left:3.0pt;padding-right:3.0pt;">14.39</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>The evaluation on different queries.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Query Analysis</h3>
<div class="ltx_para" id="A1.SS2.p1">
<p class="ltx_p" id="A1.SS2.p1.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T5" title="Table 5 ‣ A.1 Detail Settings for Training ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">5</span></a>, we aim to analyze the performance impact of different retriever queries. As indicated in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T5" title="Table 5 ‣ A.1 Detail Settings for Training ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">5</span></a>, using the <span class="ltx_text ltx_font_italic" id="A1.SS2.p1.1.1">Persona</span> alone as a query achieves the highest BLEU score, albeit with a slight trade-off in ROUGE-L and F1 scores. When combining <span class="ltx_text ltx_font_italic" id="A1.SS2.p1.1.2">Persona</span> with the <span class="ltx_text ltx_font_italic" id="A1.SS2.p1.1.3">Dialogue</span>, the ROUGE-L and F1 scores improve marginally, but at the expense of a slightly decreasing in BLEU. Following the idea of forward retrieval <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib8" title="">2023</a>)</cite>, we experimented with using the generator’s output (<span class="ltx_text ltx_font_italic" id="A1.SS2.p1.1.4">Generated</span>) as a query, but observed less competitive performance. Lastly, a strategy of using a single sentence from the persona profile chosen at random (<span class="ltx_text ltx_font_italic" id="A1.SS2.p1.1.5">One Persona</span>) resulted in worse performance on all metrics.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.3 </span>Evaluation Results on CONVIAI2 Revised Dataset</h3>
<div class="ltx_para" id="A1.SS3.p1">
<p class="ltx_p" id="A1.SS3.p1.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T6" title="Table 6 ‣ A.3 Evaluation Results on CONVIAI2 Revised Dataset ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">6</span></a>, LAPDOG consistently enhances the performance on the revised dataset, where the persona is paraphrased to more implicit background sentences. The revised version is considered a more difficult task than the original task.</p>
</div>
<figure class="ltx_table" id="A1.T6">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A1.T6.2">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T6.2.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t" id="A1.T6.2.3.1.1">Method</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T6.2.3.1.2">BLEU</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T6.2.3.1.3">ROUGE-L</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" id="A1.T6.2.3.1.4">F1</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T6.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T6.1.1.1"><math alttext="T5_{Sup}^{S}" class="ltx_Math" display="inline" id="A1.T6.1.1.1.m1.1"><semantics id="A1.T6.1.1.1.m1.1a"><mrow id="A1.T6.1.1.1.m1.1.1" xref="A1.T6.1.1.1.m1.1.1.cmml"><mi id="A1.T6.1.1.1.m1.1.1.2" xref="A1.T6.1.1.1.m1.1.1.2.cmml">T</mi><mo id="A1.T6.1.1.1.m1.1.1.1" xref="A1.T6.1.1.1.m1.1.1.1.cmml">⁢</mo><msubsup id="A1.T6.1.1.1.m1.1.1.3" xref="A1.T6.1.1.1.m1.1.1.3.cmml"><mn id="A1.T6.1.1.1.m1.1.1.3.2.2" xref="A1.T6.1.1.1.m1.1.1.3.2.2.cmml">5</mn><mrow id="A1.T6.1.1.1.m1.1.1.3.2.3" xref="A1.T6.1.1.1.m1.1.1.3.2.3.cmml"><mi id="A1.T6.1.1.1.m1.1.1.3.2.3.2" xref="A1.T6.1.1.1.m1.1.1.3.2.3.2.cmml">S</mi><mo id="A1.T6.1.1.1.m1.1.1.3.2.3.1" xref="A1.T6.1.1.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="A1.T6.1.1.1.m1.1.1.3.2.3.3" xref="A1.T6.1.1.1.m1.1.1.3.2.3.3.cmml">u</mi><mo id="A1.T6.1.1.1.m1.1.1.3.2.3.1a" xref="A1.T6.1.1.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="A1.T6.1.1.1.m1.1.1.3.2.3.4" xref="A1.T6.1.1.1.m1.1.1.3.2.3.4.cmml">p</mi></mrow><mi id="A1.T6.1.1.1.m1.1.1.3.3" xref="A1.T6.1.1.1.m1.1.1.3.3.cmml">S</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="A1.T6.1.1.1.m1.1b"><apply id="A1.T6.1.1.1.m1.1.1.cmml" xref="A1.T6.1.1.1.m1.1.1"><times id="A1.T6.1.1.1.m1.1.1.1.cmml" xref="A1.T6.1.1.1.m1.1.1.1"></times><ci id="A1.T6.1.1.1.m1.1.1.2.cmml" xref="A1.T6.1.1.1.m1.1.1.2">𝑇</ci><apply id="A1.T6.1.1.1.m1.1.1.3.cmml" xref="A1.T6.1.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T6.1.1.1.m1.1.1.3.1.cmml" xref="A1.T6.1.1.1.m1.1.1.3">superscript</csymbol><apply id="A1.T6.1.1.1.m1.1.1.3.2.cmml" xref="A1.T6.1.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T6.1.1.1.m1.1.1.3.2.1.cmml" xref="A1.T6.1.1.1.m1.1.1.3">subscript</csymbol><cn id="A1.T6.1.1.1.m1.1.1.3.2.2.cmml" type="integer" xref="A1.T6.1.1.1.m1.1.1.3.2.2">5</cn><apply id="A1.T6.1.1.1.m1.1.1.3.2.3.cmml" xref="A1.T6.1.1.1.m1.1.1.3.2.3"><times id="A1.T6.1.1.1.m1.1.1.3.2.3.1.cmml" xref="A1.T6.1.1.1.m1.1.1.3.2.3.1"></times><ci id="A1.T6.1.1.1.m1.1.1.3.2.3.2.cmml" xref="A1.T6.1.1.1.m1.1.1.3.2.3.2">𝑆</ci><ci id="A1.T6.1.1.1.m1.1.1.3.2.3.3.cmml" xref="A1.T6.1.1.1.m1.1.1.3.2.3.3">𝑢</ci><ci id="A1.T6.1.1.1.m1.1.1.3.2.3.4.cmml" xref="A1.T6.1.1.1.m1.1.1.3.2.3.4">𝑝</ci></apply></apply><ci id="A1.T6.1.1.1.m1.1.1.3.3.cmml" xref="A1.T6.1.1.1.m1.1.1.3.3">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T6.1.1.1.m1.1c">T5_{Sup}^{S}</annotation><annotation encoding="application/x-llamapun" id="A1.T6.1.1.1.m1.1d">italic_T 5 start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T6.1.1.2">2.01</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T6.1.1.3">12.48</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T6.1.1.4">11.56</td>
</tr>
<tr class="ltx_tr" id="A1.T6.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="A1.T6.2.2.1">
<math alttext="T5_{Sup}^{S}" class="ltx_Math" display="inline" id="A1.T6.2.2.1.m1.1"><semantics id="A1.T6.2.2.1.m1.1a"><mrow id="A1.T6.2.2.1.m1.1.1" xref="A1.T6.2.2.1.m1.1.1.cmml"><mi id="A1.T6.2.2.1.m1.1.1.2" xref="A1.T6.2.2.1.m1.1.1.2.cmml">T</mi><mo id="A1.T6.2.2.1.m1.1.1.1" xref="A1.T6.2.2.1.m1.1.1.1.cmml">⁢</mo><msubsup id="A1.T6.2.2.1.m1.1.1.3" xref="A1.T6.2.2.1.m1.1.1.3.cmml"><mn id="A1.T6.2.2.1.m1.1.1.3.2.2" xref="A1.T6.2.2.1.m1.1.1.3.2.2.cmml">5</mn><mrow id="A1.T6.2.2.1.m1.1.1.3.2.3" xref="A1.T6.2.2.1.m1.1.1.3.2.3.cmml"><mi id="A1.T6.2.2.1.m1.1.1.3.2.3.2" xref="A1.T6.2.2.1.m1.1.1.3.2.3.2.cmml">S</mi><mo id="A1.T6.2.2.1.m1.1.1.3.2.3.1" xref="A1.T6.2.2.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="A1.T6.2.2.1.m1.1.1.3.2.3.3" xref="A1.T6.2.2.1.m1.1.1.3.2.3.3.cmml">u</mi><mo id="A1.T6.2.2.1.m1.1.1.3.2.3.1a" xref="A1.T6.2.2.1.m1.1.1.3.2.3.1.cmml">⁢</mo><mi id="A1.T6.2.2.1.m1.1.1.3.2.3.4" xref="A1.T6.2.2.1.m1.1.1.3.2.3.4.cmml">p</mi></mrow><mi id="A1.T6.2.2.1.m1.1.1.3.3" xref="A1.T6.2.2.1.m1.1.1.3.3.cmml">S</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="A1.T6.2.2.1.m1.1b"><apply id="A1.T6.2.2.1.m1.1.1.cmml" xref="A1.T6.2.2.1.m1.1.1"><times id="A1.T6.2.2.1.m1.1.1.1.cmml" xref="A1.T6.2.2.1.m1.1.1.1"></times><ci id="A1.T6.2.2.1.m1.1.1.2.cmml" xref="A1.T6.2.2.1.m1.1.1.2">𝑇</ci><apply id="A1.T6.2.2.1.m1.1.1.3.cmml" xref="A1.T6.2.2.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T6.2.2.1.m1.1.1.3.1.cmml" xref="A1.T6.2.2.1.m1.1.1.3">superscript</csymbol><apply id="A1.T6.2.2.1.m1.1.1.3.2.cmml" xref="A1.T6.2.2.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T6.2.2.1.m1.1.1.3.2.1.cmml" xref="A1.T6.2.2.1.m1.1.1.3">subscript</csymbol><cn id="A1.T6.2.2.1.m1.1.1.3.2.2.cmml" type="integer" xref="A1.T6.2.2.1.m1.1.1.3.2.2">5</cn><apply id="A1.T6.2.2.1.m1.1.1.3.2.3.cmml" xref="A1.T6.2.2.1.m1.1.1.3.2.3"><times id="A1.T6.2.2.1.m1.1.1.3.2.3.1.cmml" xref="A1.T6.2.2.1.m1.1.1.3.2.3.1"></times><ci id="A1.T6.2.2.1.m1.1.1.3.2.3.2.cmml" xref="A1.T6.2.2.1.m1.1.1.3.2.3.2">𝑆</ci><ci id="A1.T6.2.2.1.m1.1.1.3.2.3.3.cmml" xref="A1.T6.2.2.1.m1.1.1.3.2.3.3">𝑢</ci><ci id="A1.T6.2.2.1.m1.1.1.3.2.3.4.cmml" xref="A1.T6.2.2.1.m1.1.1.3.2.3.4">𝑝</ci></apply></apply><ci id="A1.T6.2.2.1.m1.1.1.3.3.cmml" xref="A1.T6.2.2.1.m1.1.1.3.3">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T6.2.2.1.m1.1c">T5_{Sup}^{S}</annotation><annotation encoding="application/x-llamapun" id="A1.T6.2.2.1.m1.1d">italic_T 5 start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T6.2.2.2">2.21</td>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T6.2.2.3">13.44</td>
<td class="ltx_td ltx_align_left ltx_border_b" id="A1.T6.2.2.4">12.82</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 6: </span>Evaluation results on CONVIAI2-Revised version, where the persona is paraphrased to more implicit background sentences. The revised version is considered as a more difficult task than the original task.</figcaption>
</figure>
<figure class="ltx_table" id="A1.T7">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T7.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T7.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" id="A1.T7.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T7.1.1.1.1.1">Story Examples</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T7.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="A1.T7.1.2.1.1">
<table class="ltx_tabular ltx_align_middle" id="A1.T7.1.2.1.1.1">
<tr class="ltx_tr" id="A1.T7.1.2.1.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.2.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T7.1.2.1.1.1.1.1.1">Antique Car Show</span></td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.2.1.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.2.1.1.1.2.1">I like fixing cars.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.2.1.1.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.2.1.1.1.3.1">I have just finished repairing and restoring an antique sports car.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.2.1.1.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.2.1.1.1.4.1">I proudly enter it in a local car show for antique vehicles.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.2.1.1.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.2.1.1.1.5.1">I won a cash prize for my hard work! Now I have enough money to buy another antique car to restore.</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="A1.T7.1.3.2.1">
<table class="ltx_tabular ltx_align_middle" id="A1.T7.1.3.2.1.1">
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T7.1.3.2.1.1.1.1.1">Mechanic</span></td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.2.1">I am a mechanic and love to work on cars.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.3.1">I work in a shop three days a week.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.4.1">In my spare time I fix cars for people in my garage.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.5.1">I do great work at a fast pace for a small fee.</td>
</tr>
<tr class="ltx_tr" id="A1.T7.1.3.2.1.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T7.1.3.2.1.1.6.1">I get two incomes doing what I love.</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Two examples of stories, pre-processed from the ROCStory dataset.</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Pre-processing Procedure of Story Corpus</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="algx1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span>A story corpus <math alttext="\mathcal{D}_{ori}" class="ltx_Math" display="inline" id="algx1.l1.m1.1"><semantics id="algx1.l1.m1.1a"><msub id="algx1.l1.m1.1.1" xref="algx1.l1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l1.m1.1.1.2" xref="algx1.l1.m1.1.1.2.cmml">𝒟</mi><mrow id="algx1.l1.m1.1.1.3" xref="algx1.l1.m1.1.1.3.cmml"><mi id="algx1.l1.m1.1.1.3.2" xref="algx1.l1.m1.1.1.3.2.cmml">o</mi><mo id="algx1.l1.m1.1.1.3.1" xref="algx1.l1.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m1.1.1.3.3" xref="algx1.l1.m1.1.1.3.3.cmml">r</mi><mo id="algx1.l1.m1.1.1.3.1a" xref="algx1.l1.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l1.m1.1.1.3.4" xref="algx1.l1.m1.1.1.3.4.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l1.m1.1b"><apply id="algx1.l1.m1.1.1.cmml" xref="algx1.l1.m1.1.1"><csymbol cd="ambiguous" id="algx1.l1.m1.1.1.1.cmml" xref="algx1.l1.m1.1.1">subscript</csymbol><ci id="algx1.l1.m1.1.1.2.cmml" xref="algx1.l1.m1.1.1.2">𝒟</ci><apply id="algx1.l1.m1.1.1.3.cmml" xref="algx1.l1.m1.1.1.3"><times id="algx1.l1.m1.1.1.3.1.cmml" xref="algx1.l1.m1.1.1.3.1"></times><ci id="algx1.l1.m1.1.1.3.2.cmml" xref="algx1.l1.m1.1.1.3.2">𝑜</ci><ci id="algx1.l1.m1.1.1.3.3.cmml" xref="algx1.l1.m1.1.1.3.3">𝑟</ci><ci id="algx1.l1.m1.1.1.3.4.cmml" xref="algx1.l1.m1.1.1.3.4">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m1.1c">\mathcal{D}_{ori}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m1.1d">caligraphic_D start_POSTSUBSCRIPT italic_o italic_r italic_i end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>A pre-processed story corpus <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l2.m1.1"><semantics id="algx1.l2.m1.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l2.m1.1.1" xref="algx1.l2.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l2.m1.1b"><ci id="algx1.l2.m1.1.1.cmml" xref="algx1.l2.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.m1.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>Extract named entity using <span class="ltx_text ltx_font_italic" id="algx1.l3.1">BERT-BASE-NER</span> from <math alttext="\mathcal{D}_{ori}" class="ltx_Math" display="inline" id="algx1.l3.m1.1"><semantics id="algx1.l3.m1.1a"><msub id="algx1.l3.m1.1.1" xref="algx1.l3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l3.m1.1.1.2" xref="algx1.l3.m1.1.1.2.cmml">𝒟</mi><mrow id="algx1.l3.m1.1.1.3" xref="algx1.l3.m1.1.1.3.cmml"><mi id="algx1.l3.m1.1.1.3.2" xref="algx1.l3.m1.1.1.3.2.cmml">o</mi><mo id="algx1.l3.m1.1.1.3.1" xref="algx1.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l3.m1.1.1.3.3" xref="algx1.l3.m1.1.1.3.3.cmml">r</mi><mo id="algx1.l3.m1.1.1.3.1a" xref="algx1.l3.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l3.m1.1.1.3.4" xref="algx1.l3.m1.1.1.3.4.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l3.m1.1b"><apply id="algx1.l3.m1.1.1.cmml" xref="algx1.l3.m1.1.1"><csymbol cd="ambiguous" id="algx1.l3.m1.1.1.1.cmml" xref="algx1.l3.m1.1.1">subscript</csymbol><ci id="algx1.l3.m1.1.1.2.cmml" xref="algx1.l3.m1.1.1.2">𝒟</ci><apply id="algx1.l3.m1.1.1.3.cmml" xref="algx1.l3.m1.1.1.3"><times id="algx1.l3.m1.1.1.3.1.cmml" xref="algx1.l3.m1.1.1.3.1"></times><ci id="algx1.l3.m1.1.1.3.2.cmml" xref="algx1.l3.m1.1.1.3.2">𝑜</ci><ci id="algx1.l3.m1.1.1.3.3.cmml" xref="algx1.l3.m1.1.1.3.3">𝑟</ci><ci id="algx1.l3.m1.1.1.3.4.cmml" xref="algx1.l3.m1.1.1.3.4">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m1.1c">\mathcal{D}_{ori}</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m1.1d">caligraphic_D start_POSTSUBSCRIPT italic_o italic_r italic_i end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>Filter out person-related named entity with tag <span class="ltx_text ltx_font_italic" id="algx1.l4.1">B-PER</span>
</div>
<div class="ltx_listingline" id="algx1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>Replace the person-related named entity with the first-person narratives within stories in <math alttext="\mathcal{D}_{ori}" class="ltx_Math" display="inline" id="algx1.l5.m1.1"><semantics id="algx1.l5.m1.1a"><msub id="algx1.l5.m1.1.1" xref="algx1.l5.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l5.m1.1.1.2" xref="algx1.l5.m1.1.1.2.cmml">𝒟</mi><mrow id="algx1.l5.m1.1.1.3" xref="algx1.l5.m1.1.1.3.cmml"><mi id="algx1.l5.m1.1.1.3.2" xref="algx1.l5.m1.1.1.3.2.cmml">o</mi><mo id="algx1.l5.m1.1.1.3.1" xref="algx1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l5.m1.1.1.3.3" xref="algx1.l5.m1.1.1.3.3.cmml">r</mi><mo id="algx1.l5.m1.1.1.3.1a" xref="algx1.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="algx1.l5.m1.1.1.3.4" xref="algx1.l5.m1.1.1.3.4.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx1.l5.m1.1b"><apply id="algx1.l5.m1.1.1.cmml" xref="algx1.l5.m1.1.1"><csymbol cd="ambiguous" id="algx1.l5.m1.1.1.1.cmml" xref="algx1.l5.m1.1.1">subscript</csymbol><ci id="algx1.l5.m1.1.1.2.cmml" xref="algx1.l5.m1.1.1.2">𝒟</ci><apply id="algx1.l5.m1.1.1.3.cmml" xref="algx1.l5.m1.1.1.3"><times id="algx1.l5.m1.1.1.3.1.cmml" xref="algx1.l5.m1.1.1.3.1"></times><ci id="algx1.l5.m1.1.1.3.2.cmml" xref="algx1.l5.m1.1.1.3.2">𝑜</ci><ci id="algx1.l5.m1.1.1.3.3.cmml" xref="algx1.l5.m1.1.1.3.3">𝑟</ci><ci id="algx1.l5.m1.1.1.3.4.cmml" xref="algx1.l5.m1.1.1.3.4">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l5.m1.1c">\mathcal{D}_{ori}</annotation><annotation encoding="application/x-llamapun" id="algx1.l5.m1.1d">caligraphic_D start_POSTSUBSCRIPT italic_o italic_r italic_i end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>Process the first-person stories over a grammatical error correct model <span class="ltx_text ltx_font_italic" id="algx1.l6.1">gec-t5_small</span>
</div>
<div class="ltx_listingline" id="algx1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>Output the corrected stories as <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l7.m1.1"><semantics id="algx1.l7.m1.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l7.m1.1.1" xref="algx1.l7.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l7.m1.1b"><ci id="algx1.l7.m1.1.1.cmml" xref="algx1.l7.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l7.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l7.m1.1d">caligraphic_D</annotation></semantics></math>
</div>
</div>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg2.2.1.1">Algorithm 2</span> </span> Complete Training Process of LAPDOG</figcaption>
<div class="ltx_listing ltx_listing" id="alg2.3">
<div class="ltx_listingline" id="algx2.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span>Persona sentences <math alttext="P" class="ltx_Math" display="inline" id="algx2.l1.m1.1"><semantics id="algx2.l1.m1.1a"><mi id="algx2.l1.m1.1.1" xref="algx2.l1.m1.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m1.1b"><ci id="algx2.l1.m1.1.1.cmml" xref="algx2.l1.m1.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m1.1c">P</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m1.1d">italic_P</annotation></semantics></math>, dialogue context <math alttext="U" class="ltx_Math" display="inline" id="algx2.l1.m2.1"><semantics id="algx2.l1.m2.1a"><mi id="algx2.l1.m2.1.1" xref="algx2.l1.m2.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m2.1b"><ci id="algx2.l1.m2.1.1.cmml" xref="algx2.l1.m2.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m2.1c">U</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m2.1d">italic_U</annotation></semantics></math>, a ground truth response <math alttext="y" class="ltx_Math" display="inline" id="algx2.l1.m3.1"><semantics id="algx2.l1.m3.1a"><mi id="algx2.l1.m3.1.1" xref="algx2.l1.m3.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m3.1b"><ci id="algx2.l1.m3.1.1.cmml" xref="algx2.l1.m3.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m3.1c">y</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m3.1d">italic_y</annotation></semantics></math>, a generator <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="algx2.l1.m4.1"><semantics id="algx2.l1.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx2.l1.m4.1.1" xref="algx2.l1.m4.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m4.1b"><ci id="algx2.l1.m4.1.1.cmml" xref="algx2.l1.m4.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m4.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m4.1d">caligraphic_G</annotation></semantics></math>, a dense retriever <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="algx2.l1.m5.1"><semantics id="algx2.l1.m5.1a"><mi class="ltx_font_mathcaligraphic" id="algx2.l1.m5.1.1" xref="algx2.l1.m5.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m5.1b"><ci id="algx2.l1.m5.1.1.cmml" xref="algx2.l1.m5.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m5.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m5.1d">caligraphic_R</annotation></semantics></math>, and a story corpus <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx2.l1.m6.1"><semantics id="algx2.l1.m6.1a"><mi class="ltx_font_mathcaligraphic" id="algx2.l1.m6.1.1" xref="algx2.l1.m6.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx2.l1.m6.1b"><ci id="algx2.l1.m6.1.1.cmml" xref="algx2.l1.m6.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l1.m6.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx2.l1.m6.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>A tuned retriever <math alttext="\mathcal{R}_{tuned}" class="ltx_Math" display="inline" id="algx2.l2.m1.1"><semantics id="algx2.l2.m1.1a"><msub id="algx2.l2.m1.1.1" xref="algx2.l2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l2.m1.1.1.2" xref="algx2.l2.m1.1.1.2.cmml">ℛ</mi><mrow id="algx2.l2.m1.1.1.3" xref="algx2.l2.m1.1.1.3.cmml"><mi id="algx2.l2.m1.1.1.3.2" xref="algx2.l2.m1.1.1.3.2.cmml">t</mi><mo id="algx2.l2.m1.1.1.3.1" xref="algx2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m1.1.1.3.3" xref="algx2.l2.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l2.m1.1.1.3.1a" xref="algx2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m1.1.1.3.4" xref="algx2.l2.m1.1.1.3.4.cmml">n</mi><mo id="algx2.l2.m1.1.1.3.1b" xref="algx2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m1.1.1.3.5" xref="algx2.l2.m1.1.1.3.5.cmml">e</mi><mo id="algx2.l2.m1.1.1.3.1c" xref="algx2.l2.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m1.1.1.3.6" xref="algx2.l2.m1.1.1.3.6.cmml">d</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l2.m1.1b"><apply id="algx2.l2.m1.1.1.cmml" xref="algx2.l2.m1.1.1"><csymbol cd="ambiguous" id="algx2.l2.m1.1.1.1.cmml" xref="algx2.l2.m1.1.1">subscript</csymbol><ci id="algx2.l2.m1.1.1.2.cmml" xref="algx2.l2.m1.1.1.2">ℛ</ci><apply id="algx2.l2.m1.1.1.3.cmml" xref="algx2.l2.m1.1.1.3"><times id="algx2.l2.m1.1.1.3.1.cmml" xref="algx2.l2.m1.1.1.3.1"></times><ci id="algx2.l2.m1.1.1.3.2.cmml" xref="algx2.l2.m1.1.1.3.2">𝑡</ci><ci id="algx2.l2.m1.1.1.3.3.cmml" xref="algx2.l2.m1.1.1.3.3">𝑢</ci><ci id="algx2.l2.m1.1.1.3.4.cmml" xref="algx2.l2.m1.1.1.3.4">𝑛</ci><ci id="algx2.l2.m1.1.1.3.5.cmml" xref="algx2.l2.m1.1.1.3.5">𝑒</ci><ci id="algx2.l2.m1.1.1.3.6.cmml" xref="algx2.l2.m1.1.1.3.6">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l2.m1.1c">\mathcal{R}_{tuned}</annotation><annotation encoding="application/x-llamapun" id="algx2.l2.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_t italic_u italic_n italic_e italic_d end_POSTSUBSCRIPT</annotation></semantics></math>, a tuned generator <math alttext="\mathcal{G}_{tuned}" class="ltx_Math" display="inline" id="algx2.l2.m2.1"><semantics id="algx2.l2.m2.1a"><msub id="algx2.l2.m2.1.1" xref="algx2.l2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l2.m2.1.1.2" xref="algx2.l2.m2.1.1.2.cmml">𝒢</mi><mrow id="algx2.l2.m2.1.1.3" xref="algx2.l2.m2.1.1.3.cmml"><mi id="algx2.l2.m2.1.1.3.2" xref="algx2.l2.m2.1.1.3.2.cmml">t</mi><mo id="algx2.l2.m2.1.1.3.1" xref="algx2.l2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m2.1.1.3.3" xref="algx2.l2.m2.1.1.3.3.cmml">u</mi><mo id="algx2.l2.m2.1.1.3.1a" xref="algx2.l2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m2.1.1.3.4" xref="algx2.l2.m2.1.1.3.4.cmml">n</mi><mo id="algx2.l2.m2.1.1.3.1b" xref="algx2.l2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m2.1.1.3.5" xref="algx2.l2.m2.1.1.3.5.cmml">e</mi><mo id="algx2.l2.m2.1.1.3.1c" xref="algx2.l2.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l2.m2.1.1.3.6" xref="algx2.l2.m2.1.1.3.6.cmml">d</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l2.m2.1b"><apply id="algx2.l2.m2.1.1.cmml" xref="algx2.l2.m2.1.1"><csymbol cd="ambiguous" id="algx2.l2.m2.1.1.1.cmml" xref="algx2.l2.m2.1.1">subscript</csymbol><ci id="algx2.l2.m2.1.1.2.cmml" xref="algx2.l2.m2.1.1.2">𝒢</ci><apply id="algx2.l2.m2.1.1.3.cmml" xref="algx2.l2.m2.1.1.3"><times id="algx2.l2.m2.1.1.3.1.cmml" xref="algx2.l2.m2.1.1.3.1"></times><ci id="algx2.l2.m2.1.1.3.2.cmml" xref="algx2.l2.m2.1.1.3.2">𝑡</ci><ci id="algx2.l2.m2.1.1.3.3.cmml" xref="algx2.l2.m2.1.1.3.3">𝑢</ci><ci id="algx2.l2.m2.1.1.3.4.cmml" xref="algx2.l2.m2.1.1.3.4">𝑛</ci><ci id="algx2.l2.m2.1.1.3.5.cmml" xref="algx2.l2.m2.1.1.3.5">𝑒</ci><ci id="algx2.l2.m2.1.1.3.6.cmml" xref="algx2.l2.m2.1.1.3.6">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l2.m2.1c">\mathcal{G}_{tuned}</annotation><annotation encoding="application/x-llamapun" id="algx2.l2.m2.1d">caligraphic_G start_POSTSUBSCRIPT italic_t italic_u italic_n italic_e italic_d end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>Construct query <math alttext="q" class="ltx_Math" display="inline" id="algx2.l3.m1.1"><semantics id="algx2.l3.m1.1a"><mi id="algx2.l3.m1.1.1" xref="algx2.l3.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="algx2.l3.m1.1b"><ci id="algx2.l3.m1.1.1.cmml" xref="algx2.l3.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l3.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="algx2.l3.m1.1d">italic_q</annotation></semantics></math> from a query function <math alttext="Query(P,U)" class="ltx_Math" display="inline" id="algx2.l3.m2.2"><semantics id="algx2.l3.m2.2a"><mrow id="algx2.l3.m2.2.3" xref="algx2.l3.m2.2.3.cmml"><mi id="algx2.l3.m2.2.3.2" xref="algx2.l3.m2.2.3.2.cmml">Q</mi><mo id="algx2.l3.m2.2.3.1" xref="algx2.l3.m2.2.3.1.cmml">⁢</mo><mi id="algx2.l3.m2.2.3.3" xref="algx2.l3.m2.2.3.3.cmml">u</mi><mo id="algx2.l3.m2.2.3.1a" xref="algx2.l3.m2.2.3.1.cmml">⁢</mo><mi id="algx2.l3.m2.2.3.4" xref="algx2.l3.m2.2.3.4.cmml">e</mi><mo id="algx2.l3.m2.2.3.1b" xref="algx2.l3.m2.2.3.1.cmml">⁢</mo><mi id="algx2.l3.m2.2.3.5" xref="algx2.l3.m2.2.3.5.cmml">r</mi><mo id="algx2.l3.m2.2.3.1c" xref="algx2.l3.m2.2.3.1.cmml">⁢</mo><mi id="algx2.l3.m2.2.3.6" xref="algx2.l3.m2.2.3.6.cmml">y</mi><mo id="algx2.l3.m2.2.3.1d" xref="algx2.l3.m2.2.3.1.cmml">⁢</mo><mrow id="algx2.l3.m2.2.3.7.2" xref="algx2.l3.m2.2.3.7.1.cmml"><mo id="algx2.l3.m2.2.3.7.2.1" stretchy="false" xref="algx2.l3.m2.2.3.7.1.cmml">(</mo><mi id="algx2.l3.m2.1.1" xref="algx2.l3.m2.1.1.cmml">P</mi><mo id="algx2.l3.m2.2.3.7.2.2" xref="algx2.l3.m2.2.3.7.1.cmml">,</mo><mi id="algx2.l3.m2.2.2" xref="algx2.l3.m2.2.2.cmml">U</mi><mo id="algx2.l3.m2.2.3.7.2.3" stretchy="false" xref="algx2.l3.m2.2.3.7.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l3.m2.2b"><apply id="algx2.l3.m2.2.3.cmml" xref="algx2.l3.m2.2.3"><times id="algx2.l3.m2.2.3.1.cmml" xref="algx2.l3.m2.2.3.1"></times><ci id="algx2.l3.m2.2.3.2.cmml" xref="algx2.l3.m2.2.3.2">𝑄</ci><ci id="algx2.l3.m2.2.3.3.cmml" xref="algx2.l3.m2.2.3.3">𝑢</ci><ci id="algx2.l3.m2.2.3.4.cmml" xref="algx2.l3.m2.2.3.4">𝑒</ci><ci id="algx2.l3.m2.2.3.5.cmml" xref="algx2.l3.m2.2.3.5">𝑟</ci><ci id="algx2.l3.m2.2.3.6.cmml" xref="algx2.l3.m2.2.3.6">𝑦</ci><interval closure="open" id="algx2.l3.m2.2.3.7.1.cmml" xref="algx2.l3.m2.2.3.7.2"><ci id="algx2.l3.m2.1.1.cmml" xref="algx2.l3.m2.1.1">𝑃</ci><ci id="algx2.l3.m2.2.2.cmml" xref="algx2.l3.m2.2.2">𝑈</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l3.m2.2c">Query(P,U)</annotation><annotation encoding="application/x-llamapun" id="algx2.l3.m2.2d">italic_Q italic_u italic_e italic_r italic_y ( italic_P , italic_U )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span><span class="ltx_text ltx_font_bold" id="algx2.l4.1">Stage1:</span>
</div>
<div class="ltx_listingline" id="algx2.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>Initialize <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="algx2.l5.m1.1"><semantics id="algx2.l5.m1.1a"><msub id="algx2.l5.m1.1.1" xref="algx2.l5.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l5.m1.1.1.2" xref="algx2.l5.m1.1.1.2.cmml">𝒢</mi><mrow id="algx2.l5.m1.1.1.3" xref="algx2.l5.m1.1.1.3.cmml"><mi id="algx2.l5.m1.1.1.3.2" xref="algx2.l5.m1.1.1.3.2.cmml">s</mi><mo id="algx2.l5.m1.1.1.3.1" xref="algx2.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l5.m1.1.1.3.3" xref="algx2.l5.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l5.m1.1.1.3.1a" xref="algx2.l5.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l5.m1.1.1.3.4" xref="algx2.l5.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l5.m1.1b"><apply id="algx2.l5.m1.1.1.cmml" xref="algx2.l5.m1.1.1"><csymbol cd="ambiguous" id="algx2.l5.m1.1.1.1.cmml" xref="algx2.l5.m1.1.1">subscript</csymbol><ci id="algx2.l5.m1.1.1.2.cmml" xref="algx2.l5.m1.1.1.2">𝒢</ci><apply id="algx2.l5.m1.1.1.3.cmml" xref="algx2.l5.m1.1.1.3"><times id="algx2.l5.m1.1.1.3.1.cmml" xref="algx2.l5.m1.1.1.3.1"></times><ci id="algx2.l5.m1.1.1.3.2.cmml" xref="algx2.l5.m1.1.1.3.2">𝑠</ci><ci id="algx2.l5.m1.1.1.3.3.cmml" xref="algx2.l5.m1.1.1.3.3">𝑢</ci><ci id="algx2.l5.m1.1.1.3.4.cmml" xref="algx2.l5.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l5.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="algx2.l5.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> with <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="algx2.l5.m2.1"><semantics id="algx2.l5.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx2.l5.m2.1.1" xref="algx2.l5.m2.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="algx2.l5.m2.1b"><ci id="algx2.l5.m2.1.1.cmml" xref="algx2.l5.m2.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l5.m2.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="algx2.l5.m2.1d">caligraphic_G</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>Train a supervised tuned generator <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="algx2.l6.m1.1"><semantics id="algx2.l6.m1.1a"><msub id="algx2.l6.m1.1.1" xref="algx2.l6.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l6.m1.1.1.2" xref="algx2.l6.m1.1.1.2.cmml">𝒢</mi><mrow id="algx2.l6.m1.1.1.3" xref="algx2.l6.m1.1.1.3.cmml"><mi id="algx2.l6.m1.1.1.3.2" xref="algx2.l6.m1.1.1.3.2.cmml">s</mi><mo id="algx2.l6.m1.1.1.3.1" xref="algx2.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l6.m1.1.1.3.3" xref="algx2.l6.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l6.m1.1.1.3.1a" xref="algx2.l6.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l6.m1.1.1.3.4" xref="algx2.l6.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l6.m1.1b"><apply id="algx2.l6.m1.1.1.cmml" xref="algx2.l6.m1.1.1"><csymbol cd="ambiguous" id="algx2.l6.m1.1.1.1.cmml" xref="algx2.l6.m1.1.1">subscript</csymbol><ci id="algx2.l6.m1.1.1.2.cmml" xref="algx2.l6.m1.1.1.2">𝒢</ci><apply id="algx2.l6.m1.1.1.3.cmml" xref="algx2.l6.m1.1.1.3"><times id="algx2.l6.m1.1.1.3.1.cmml" xref="algx2.l6.m1.1.1.3.1"></times><ci id="algx2.l6.m1.1.1.3.2.cmml" xref="algx2.l6.m1.1.1.3.2">𝑠</ci><ci id="algx2.l6.m1.1.1.3.3.cmml" xref="algx2.l6.m1.1.1.3.3">𝑢</ci><ci id="algx2.l6.m1.1.1.3.4.cmml" xref="algx2.l6.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l6.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="algx2.l6.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> given input <math alttext="(P,U)" class="ltx_Math" display="inline" id="algx2.l6.m2.2"><semantics id="algx2.l6.m2.2a"><mrow id="algx2.l6.m2.2.3.2" xref="algx2.l6.m2.2.3.1.cmml"><mo id="algx2.l6.m2.2.3.2.1" stretchy="false" xref="algx2.l6.m2.2.3.1.cmml">(</mo><mi id="algx2.l6.m2.1.1" xref="algx2.l6.m2.1.1.cmml">P</mi><mo id="algx2.l6.m2.2.3.2.2" xref="algx2.l6.m2.2.3.1.cmml">,</mo><mi id="algx2.l6.m2.2.2" xref="algx2.l6.m2.2.2.cmml">U</mi><mo id="algx2.l6.m2.2.3.2.3" stretchy="false" xref="algx2.l6.m2.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="algx2.l6.m2.2b"><interval closure="open" id="algx2.l6.m2.2.3.1.cmml" xref="algx2.l6.m2.2.3.2"><ci id="algx2.l6.m2.1.1.cmml" xref="algx2.l6.m2.1.1">𝑃</ci><ci id="algx2.l6.m2.2.2.cmml" xref="algx2.l6.m2.2.2">𝑈</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="algx2.l6.m2.2c">(P,U)</annotation><annotation encoding="application/x-llamapun" id="algx2.l6.m2.2d">( italic_P , italic_U )</annotation></semantics></math> and ground truth <math alttext="y" class="ltx_Math" display="inline" id="algx2.l6.m3.1"><semantics id="algx2.l6.m3.1a"><mi id="algx2.l6.m3.1.1" xref="algx2.l6.m3.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="algx2.l6.m3.1b"><ci id="algx2.l6.m3.1.1.cmml" xref="algx2.l6.m3.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l6.m3.1c">y</annotation><annotation encoding="application/x-llamapun" id="algx2.l6.m3.1d">italic_y</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>Train <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="algx2.l7.m1.1"><semantics id="algx2.l7.m1.1a"><msub id="algx2.l7.m1.1.1" xref="algx2.l7.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l7.m1.1.1.2" xref="algx2.l7.m1.1.1.2.cmml">𝒢</mi><mrow id="algx2.l7.m1.1.1.3" xref="algx2.l7.m1.1.1.3.cmml"><mi id="algx2.l7.m1.1.1.3.2" xref="algx2.l7.m1.1.1.3.2.cmml">s</mi><mo id="algx2.l7.m1.1.1.3.1" xref="algx2.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l7.m1.1.1.3.3" xref="algx2.l7.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l7.m1.1.1.3.1a" xref="algx2.l7.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l7.m1.1.1.3.4" xref="algx2.l7.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l7.m1.1b"><apply id="algx2.l7.m1.1.1.cmml" xref="algx2.l7.m1.1.1"><csymbol cd="ambiguous" id="algx2.l7.m1.1.1.1.cmml" xref="algx2.l7.m1.1.1">subscript</csymbol><ci id="algx2.l7.m1.1.1.2.cmml" xref="algx2.l7.m1.1.1.2">𝒢</ci><apply id="algx2.l7.m1.1.1.3.cmml" xref="algx2.l7.m1.1.1.3"><times id="algx2.l7.m1.1.1.3.1.cmml" xref="algx2.l7.m1.1.1.3.1"></times><ci id="algx2.l7.m1.1.1.3.2.cmml" xref="algx2.l7.m1.1.1.3.2">𝑠</ci><ci id="algx2.l7.m1.1.1.3.3.cmml" xref="algx2.l7.m1.1.1.3.3">𝑢</ci><ci id="algx2.l7.m1.1.1.3.4.cmml" xref="algx2.l7.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l7.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="algx2.l7.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> until converge

</div>
<div class="ltx_listingline" id="algx2.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span><span class="ltx_text ltx_font_bold" id="algx2.l8.1">Stage2:</span>
</div>
<div class="ltx_listingline" id="algx2.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>Retrieve top-<math alttext="K" class="ltx_Math" display="inline" id="algx2.l9.m1.1"><semantics id="algx2.l9.m1.1a"><mi id="algx2.l9.m1.1.1" xref="algx2.l9.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="algx2.l9.m1.1b"><ci id="algx2.l9.m1.1.1.cmml" xref="algx2.l9.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.m1.1d">italic_K</annotation></semantics></math> stories <math alttext="D_{q}" class="ltx_Math" display="inline" id="algx2.l9.m2.1"><semantics id="algx2.l9.m2.1a"><msub id="algx2.l9.m2.1.1" xref="algx2.l9.m2.1.1.cmml"><mi id="algx2.l9.m2.1.1.2" xref="algx2.l9.m2.1.1.2.cmml">D</mi><mi id="algx2.l9.m2.1.1.3" xref="algx2.l9.m2.1.1.3.cmml">q</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l9.m2.1b"><apply id="algx2.l9.m2.1.1.cmml" xref="algx2.l9.m2.1.1"><csymbol cd="ambiguous" id="algx2.l9.m2.1.1.1.cmml" xref="algx2.l9.m2.1.1">subscript</csymbol><ci id="algx2.l9.m2.1.1.2.cmml" xref="algx2.l9.m2.1.1.2">𝐷</ci><ci id="algx2.l9.m2.1.1.3.cmml" xref="algx2.l9.m2.1.1.3">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.m2.1c">D_{q}</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.m2.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> given <math alttext="q" class="ltx_Math" display="inline" id="algx2.l9.m3.1"><semantics id="algx2.l9.m3.1a"><mi id="algx2.l9.m3.1.1" xref="algx2.l9.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="algx2.l9.m3.1b"><ci id="algx2.l9.m3.1.1.cmml" xref="algx2.l9.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l9.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="algx2.l9.m3.1d">italic_q</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>Apply Candidate Augmentation <math alttext="D_{q}^{aug}=\text{CandAug}(d_{i},\rho);d_{i}\in D_{q}" class="ltx_Math" display="inline" id="algx2.l10.m1.3"><semantics id="algx2.l10.m1.3a"><mrow id="algx2.l10.m1.3.3.2" xref="algx2.l10.m1.3.3.3.cmml"><mrow id="algx2.l10.m1.2.2.1.1" xref="algx2.l10.m1.2.2.1.1.cmml"><msubsup id="algx2.l10.m1.2.2.1.1.3" xref="algx2.l10.m1.2.2.1.1.3.cmml"><mi id="algx2.l10.m1.2.2.1.1.3.2.2" xref="algx2.l10.m1.2.2.1.1.3.2.2.cmml">D</mi><mi id="algx2.l10.m1.2.2.1.1.3.2.3" xref="algx2.l10.m1.2.2.1.1.3.2.3.cmml">q</mi><mrow id="algx2.l10.m1.2.2.1.1.3.3" xref="algx2.l10.m1.2.2.1.1.3.3.cmml"><mi id="algx2.l10.m1.2.2.1.1.3.3.2" xref="algx2.l10.m1.2.2.1.1.3.3.2.cmml">a</mi><mo id="algx2.l10.m1.2.2.1.1.3.3.1" xref="algx2.l10.m1.2.2.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l10.m1.2.2.1.1.3.3.3" xref="algx2.l10.m1.2.2.1.1.3.3.3.cmml">u</mi><mo id="algx2.l10.m1.2.2.1.1.3.3.1a" xref="algx2.l10.m1.2.2.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l10.m1.2.2.1.1.3.3.4" xref="algx2.l10.m1.2.2.1.1.3.3.4.cmml">g</mi></mrow></msubsup><mo id="algx2.l10.m1.2.2.1.1.2" xref="algx2.l10.m1.2.2.1.1.2.cmml">=</mo><mrow id="algx2.l10.m1.2.2.1.1.1" xref="algx2.l10.m1.2.2.1.1.1.cmml"><mtext id="algx2.l10.m1.2.2.1.1.1.3" xref="algx2.l10.m1.2.2.1.1.1.3a.cmml">CandAug</mtext><mo id="algx2.l10.m1.2.2.1.1.1.2" xref="algx2.l10.m1.2.2.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l10.m1.2.2.1.1.1.1.1" xref="algx2.l10.m1.2.2.1.1.1.1.2.cmml"><mo id="algx2.l10.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="algx2.l10.m1.2.2.1.1.1.1.2.cmml">(</mo><msub id="algx2.l10.m1.2.2.1.1.1.1.1.1" xref="algx2.l10.m1.2.2.1.1.1.1.1.1.cmml"><mi id="algx2.l10.m1.2.2.1.1.1.1.1.1.2" xref="algx2.l10.m1.2.2.1.1.1.1.1.1.2.cmml">d</mi><mi id="algx2.l10.m1.2.2.1.1.1.1.1.1.3" xref="algx2.l10.m1.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l10.m1.2.2.1.1.1.1.1.3" xref="algx2.l10.m1.2.2.1.1.1.1.2.cmml">,</mo><mi id="algx2.l10.m1.1.1" xref="algx2.l10.m1.1.1.cmml">ρ</mi><mo id="algx2.l10.m1.2.2.1.1.1.1.1.4" stretchy="false" xref="algx2.l10.m1.2.2.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="algx2.l10.m1.3.3.2.3" xref="algx2.l10.m1.3.3.3a.cmml">;</mo><mrow id="algx2.l10.m1.3.3.2.2" xref="algx2.l10.m1.3.3.2.2.cmml"><msub id="algx2.l10.m1.3.3.2.2.2" xref="algx2.l10.m1.3.3.2.2.2.cmml"><mi id="algx2.l10.m1.3.3.2.2.2.2" xref="algx2.l10.m1.3.3.2.2.2.2.cmml">d</mi><mi id="algx2.l10.m1.3.3.2.2.2.3" xref="algx2.l10.m1.3.3.2.2.2.3.cmml">i</mi></msub><mo id="algx2.l10.m1.3.3.2.2.1" xref="algx2.l10.m1.3.3.2.2.1.cmml">∈</mo><msub id="algx2.l10.m1.3.3.2.2.3" xref="algx2.l10.m1.3.3.2.2.3.cmml"><mi id="algx2.l10.m1.3.3.2.2.3.2" xref="algx2.l10.m1.3.3.2.2.3.2.cmml">D</mi><mi id="algx2.l10.m1.3.3.2.2.3.3" xref="algx2.l10.m1.3.3.2.2.3.3.cmml">q</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l10.m1.3b"><apply id="algx2.l10.m1.3.3.3.cmml" xref="algx2.l10.m1.3.3.2"><csymbol cd="ambiguous" id="algx2.l10.m1.3.3.3a.cmml" xref="algx2.l10.m1.3.3.2.3">formulae-sequence</csymbol><apply id="algx2.l10.m1.2.2.1.1.cmml" xref="algx2.l10.m1.2.2.1.1"><eq id="algx2.l10.m1.2.2.1.1.2.cmml" xref="algx2.l10.m1.2.2.1.1.2"></eq><apply id="algx2.l10.m1.2.2.1.1.3.cmml" xref="algx2.l10.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="algx2.l10.m1.2.2.1.1.3.1.cmml" xref="algx2.l10.m1.2.2.1.1.3">superscript</csymbol><apply id="algx2.l10.m1.2.2.1.1.3.2.cmml" xref="algx2.l10.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="algx2.l10.m1.2.2.1.1.3.2.1.cmml" xref="algx2.l10.m1.2.2.1.1.3">subscript</csymbol><ci id="algx2.l10.m1.2.2.1.1.3.2.2.cmml" xref="algx2.l10.m1.2.2.1.1.3.2.2">𝐷</ci><ci id="algx2.l10.m1.2.2.1.1.3.2.3.cmml" xref="algx2.l10.m1.2.2.1.1.3.2.3">𝑞</ci></apply><apply id="algx2.l10.m1.2.2.1.1.3.3.cmml" xref="algx2.l10.m1.2.2.1.1.3.3"><times id="algx2.l10.m1.2.2.1.1.3.3.1.cmml" xref="algx2.l10.m1.2.2.1.1.3.3.1"></times><ci id="algx2.l10.m1.2.2.1.1.3.3.2.cmml" xref="algx2.l10.m1.2.2.1.1.3.3.2">𝑎</ci><ci id="algx2.l10.m1.2.2.1.1.3.3.3.cmml" xref="algx2.l10.m1.2.2.1.1.3.3.3">𝑢</ci><ci id="algx2.l10.m1.2.2.1.1.3.3.4.cmml" xref="algx2.l10.m1.2.2.1.1.3.3.4">𝑔</ci></apply></apply><apply id="algx2.l10.m1.2.2.1.1.1.cmml" xref="algx2.l10.m1.2.2.1.1.1"><times id="algx2.l10.m1.2.2.1.1.1.2.cmml" xref="algx2.l10.m1.2.2.1.1.1.2"></times><ci id="algx2.l10.m1.2.2.1.1.1.3a.cmml" xref="algx2.l10.m1.2.2.1.1.1.3"><mtext id="algx2.l10.m1.2.2.1.1.1.3.cmml" xref="algx2.l10.m1.2.2.1.1.1.3">CandAug</mtext></ci><interval closure="open" id="algx2.l10.m1.2.2.1.1.1.1.2.cmml" xref="algx2.l10.m1.2.2.1.1.1.1.1"><apply id="algx2.l10.m1.2.2.1.1.1.1.1.1.cmml" xref="algx2.l10.m1.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l10.m1.2.2.1.1.1.1.1.1.1.cmml" xref="algx2.l10.m1.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l10.m1.2.2.1.1.1.1.1.1.2.cmml" xref="algx2.l10.m1.2.2.1.1.1.1.1.1.2">𝑑</ci><ci id="algx2.l10.m1.2.2.1.1.1.1.1.1.3.cmml" xref="algx2.l10.m1.2.2.1.1.1.1.1.1.3">𝑖</ci></apply><ci id="algx2.l10.m1.1.1.cmml" xref="algx2.l10.m1.1.1">𝜌</ci></interval></apply></apply><apply id="algx2.l10.m1.3.3.2.2.cmml" xref="algx2.l10.m1.3.3.2.2"><in id="algx2.l10.m1.3.3.2.2.1.cmml" xref="algx2.l10.m1.3.3.2.2.1"></in><apply id="algx2.l10.m1.3.3.2.2.2.cmml" xref="algx2.l10.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="algx2.l10.m1.3.3.2.2.2.1.cmml" xref="algx2.l10.m1.3.3.2.2.2">subscript</csymbol><ci id="algx2.l10.m1.3.3.2.2.2.2.cmml" xref="algx2.l10.m1.3.3.2.2.2.2">𝑑</ci><ci id="algx2.l10.m1.3.3.2.2.2.3.cmml" xref="algx2.l10.m1.3.3.2.2.2.3">𝑖</ci></apply><apply id="algx2.l10.m1.3.3.2.2.3.cmml" xref="algx2.l10.m1.3.3.2.2.3"><csymbol cd="ambiguous" id="algx2.l10.m1.3.3.2.2.3.1.cmml" xref="algx2.l10.m1.3.3.2.2.3">subscript</csymbol><ci id="algx2.l10.m1.3.3.2.2.3.2.cmml" xref="algx2.l10.m1.3.3.2.2.3.2">𝐷</ci><ci id="algx2.l10.m1.3.3.2.2.3.3.cmml" xref="algx2.l10.m1.3.3.2.2.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l10.m1.3c">D_{q}^{aug}=\text{CandAug}(d_{i},\rho);d_{i}\in D_{q}</annotation><annotation encoding="application/x-llamapun" id="algx2.l10.m1.3d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = CandAug ( italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ρ ) ; italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span>Compute retriever scores <math alttext="S_{q}^{aug}" class="ltx_Math" display="inline" id="algx2.l11.m1.1"><semantics id="algx2.l11.m1.1a"><msubsup id="algx2.l11.m1.1.1" xref="algx2.l11.m1.1.1.cmml"><mi id="algx2.l11.m1.1.1.2.2" xref="algx2.l11.m1.1.1.2.2.cmml">S</mi><mi id="algx2.l11.m1.1.1.2.3" xref="algx2.l11.m1.1.1.2.3.cmml">q</mi><mrow id="algx2.l11.m1.1.1.3" xref="algx2.l11.m1.1.1.3.cmml"><mi id="algx2.l11.m1.1.1.3.2" xref="algx2.l11.m1.1.1.3.2.cmml">a</mi><mo id="algx2.l11.m1.1.1.3.1" xref="algx2.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.1.1.3.3" xref="algx2.l11.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l11.m1.1.1.3.1a" xref="algx2.l11.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l11.m1.1.1.3.4" xref="algx2.l11.m1.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx2.l11.m1.1b"><apply id="algx2.l11.m1.1.1.cmml" xref="algx2.l11.m1.1.1"><csymbol cd="ambiguous" id="algx2.l11.m1.1.1.1.cmml" xref="algx2.l11.m1.1.1">superscript</csymbol><apply id="algx2.l11.m1.1.1.2.cmml" xref="algx2.l11.m1.1.1"><csymbol cd="ambiguous" id="algx2.l11.m1.1.1.2.1.cmml" xref="algx2.l11.m1.1.1">subscript</csymbol><ci id="algx2.l11.m1.1.1.2.2.cmml" xref="algx2.l11.m1.1.1.2.2">𝑆</ci><ci id="algx2.l11.m1.1.1.2.3.cmml" xref="algx2.l11.m1.1.1.2.3">𝑞</ci></apply><apply id="algx2.l11.m1.1.1.3.cmml" xref="algx2.l11.m1.1.1.3"><times id="algx2.l11.m1.1.1.3.1.cmml" xref="algx2.l11.m1.1.1.3.1"></times><ci id="algx2.l11.m1.1.1.3.2.cmml" xref="algx2.l11.m1.1.1.3.2">𝑎</ci><ci id="algx2.l11.m1.1.1.3.3.cmml" xref="algx2.l11.m1.1.1.3.3">𝑢</ci><ci id="algx2.l11.m1.1.1.3.4.cmml" xref="algx2.l11.m1.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.m1.1c">S_{q}^{aug}</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.m1.1d">italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> between query <math alttext="q" class="ltx_Math" display="inline" id="algx2.l11.m2.1"><semantics id="algx2.l11.m2.1a"><mi id="algx2.l11.m2.1.1" xref="algx2.l11.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="algx2.l11.m2.1b"><ci id="algx2.l11.m2.1.1.cmml" xref="algx2.l11.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.m2.1d">italic_q</annotation></semantics></math> and <math alttext="D_{q}^{aug}" class="ltx_Math" display="inline" id="algx2.l11.m3.1"><semantics id="algx2.l11.m3.1a"><msubsup id="algx2.l11.m3.1.1" xref="algx2.l11.m3.1.1.cmml"><mi id="algx2.l11.m3.1.1.2.2" xref="algx2.l11.m3.1.1.2.2.cmml">D</mi><mi id="algx2.l11.m3.1.1.2.3" xref="algx2.l11.m3.1.1.2.3.cmml">q</mi><mrow id="algx2.l11.m3.1.1.3" xref="algx2.l11.m3.1.1.3.cmml"><mi id="algx2.l11.m3.1.1.3.2" xref="algx2.l11.m3.1.1.3.2.cmml">a</mi><mo id="algx2.l11.m3.1.1.3.1" xref="algx2.l11.m3.1.1.3.1.cmml">⁢</mo><mi id="algx2.l11.m3.1.1.3.3" xref="algx2.l11.m3.1.1.3.3.cmml">u</mi><mo id="algx2.l11.m3.1.1.3.1a" xref="algx2.l11.m3.1.1.3.1.cmml">⁢</mo><mi id="algx2.l11.m3.1.1.3.4" xref="algx2.l11.m3.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx2.l11.m3.1b"><apply id="algx2.l11.m3.1.1.cmml" xref="algx2.l11.m3.1.1"><csymbol cd="ambiguous" id="algx2.l11.m3.1.1.1.cmml" xref="algx2.l11.m3.1.1">superscript</csymbol><apply id="algx2.l11.m3.1.1.2.cmml" xref="algx2.l11.m3.1.1"><csymbol cd="ambiguous" id="algx2.l11.m3.1.1.2.1.cmml" xref="algx2.l11.m3.1.1">subscript</csymbol><ci id="algx2.l11.m3.1.1.2.2.cmml" xref="algx2.l11.m3.1.1.2.2">𝐷</ci><ci id="algx2.l11.m3.1.1.2.3.cmml" xref="algx2.l11.m3.1.1.2.3">𝑞</ci></apply><apply id="algx2.l11.m3.1.1.3.cmml" xref="algx2.l11.m3.1.1.3"><times id="algx2.l11.m3.1.1.3.1.cmml" xref="algx2.l11.m3.1.1.3.1"></times><ci id="algx2.l11.m3.1.1.3.2.cmml" xref="algx2.l11.m3.1.1.3.2">𝑎</ci><ci id="algx2.l11.m3.1.1.3.3.cmml" xref="algx2.l11.m3.1.1.3.3">𝑢</ci><ci id="algx2.l11.m3.1.1.3.4.cmml" xref="algx2.l11.m3.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l11.m3.1c">D_{q}^{aug}</annotation><annotation encoding="application/x-llamapun" id="algx2.l11.m3.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span><span class="ltx_text ltx_font_bold" id="algx2.l12.1">for</span> Retrieved story <math alttext="d_{i}" class="ltx_Math" display="inline" id="algx2.l12.m1.1"><semantics id="algx2.l12.m1.1a"><msub id="algx2.l12.m1.1.1" xref="algx2.l12.m1.1.1.cmml"><mi id="algx2.l12.m1.1.1.2" xref="algx2.l12.m1.1.1.2.cmml">d</mi><mi id="algx2.l12.m1.1.1.3" xref="algx2.l12.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l12.m1.1b"><apply id="algx2.l12.m1.1.1.cmml" xref="algx2.l12.m1.1.1"><csymbol cd="ambiguous" id="algx2.l12.m1.1.1.1.cmml" xref="algx2.l12.m1.1.1">subscript</csymbol><ci id="algx2.l12.m1.1.1.2.cmml" xref="algx2.l12.m1.1.1.2">𝑑</ci><ci id="algx2.l12.m1.1.1.3.cmml" xref="algx2.l12.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l12.m1.1c">d_{i}</annotation><annotation encoding="application/x-llamapun" id="algx2.l12.m1.1d">italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in <math alttext="D_{q}^{aug}" class="ltx_Math" display="inline" id="algx2.l12.m2.1"><semantics id="algx2.l12.m2.1a"><msubsup id="algx2.l12.m2.1.1" xref="algx2.l12.m2.1.1.cmml"><mi id="algx2.l12.m2.1.1.2.2" xref="algx2.l12.m2.1.1.2.2.cmml">D</mi><mi id="algx2.l12.m2.1.1.2.3" xref="algx2.l12.m2.1.1.2.3.cmml">q</mi><mrow id="algx2.l12.m2.1.1.3" xref="algx2.l12.m2.1.1.3.cmml"><mi id="algx2.l12.m2.1.1.3.2" xref="algx2.l12.m2.1.1.3.2.cmml">a</mi><mo id="algx2.l12.m2.1.1.3.1" xref="algx2.l12.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l12.m2.1.1.3.3" xref="algx2.l12.m2.1.1.3.3.cmml">u</mi><mo id="algx2.l12.m2.1.1.3.1a" xref="algx2.l12.m2.1.1.3.1.cmml">⁢</mo><mi id="algx2.l12.m2.1.1.3.4" xref="algx2.l12.m2.1.1.3.4.cmml">g</mi></mrow></msubsup><annotation-xml encoding="MathML-Content" id="algx2.l12.m2.1b"><apply id="algx2.l12.m2.1.1.cmml" xref="algx2.l12.m2.1.1"><csymbol cd="ambiguous" id="algx2.l12.m2.1.1.1.cmml" xref="algx2.l12.m2.1.1">superscript</csymbol><apply id="algx2.l12.m2.1.1.2.cmml" xref="algx2.l12.m2.1.1"><csymbol cd="ambiguous" id="algx2.l12.m2.1.1.2.1.cmml" xref="algx2.l12.m2.1.1">subscript</csymbol><ci id="algx2.l12.m2.1.1.2.2.cmml" xref="algx2.l12.m2.1.1.2.2">𝐷</ci><ci id="algx2.l12.m2.1.1.2.3.cmml" xref="algx2.l12.m2.1.1.2.3">𝑞</ci></apply><apply id="algx2.l12.m2.1.1.3.cmml" xref="algx2.l12.m2.1.1.3"><times id="algx2.l12.m2.1.1.3.1.cmml" xref="algx2.l12.m2.1.1.3.1"></times><ci id="algx2.l12.m2.1.1.3.2.cmml" xref="algx2.l12.m2.1.1.3.2">𝑎</ci><ci id="algx2.l12.m2.1.1.3.3.cmml" xref="algx2.l12.m2.1.1.3.3">𝑢</ci><ci id="algx2.l12.m2.1.1.3.4.cmml" xref="algx2.l12.m2.1.1.3.4">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l12.m2.1c">D_{q}^{aug}</annotation><annotation encoding="application/x-llamapun" id="algx2.l12.m2.1d">italic_D start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx2.l12.2">do</span>
</div>
<div class="ltx_listingline" id="algx2.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>     Construct augmented input by concatenation <math alttext="a_{i}=[d_{i};P;U]" class="ltx_Math" display="inline" id="algx2.l13.m1.3"><semantics id="algx2.l13.m1.3a"><mrow id="algx2.l13.m1.3.3" xref="algx2.l13.m1.3.3.cmml"><msub id="algx2.l13.m1.3.3.3" xref="algx2.l13.m1.3.3.3.cmml"><mi id="algx2.l13.m1.3.3.3.2" xref="algx2.l13.m1.3.3.3.2.cmml">a</mi><mi id="algx2.l13.m1.3.3.3.3" xref="algx2.l13.m1.3.3.3.3.cmml">i</mi></msub><mo id="algx2.l13.m1.3.3.2" xref="algx2.l13.m1.3.3.2.cmml">=</mo><mrow id="algx2.l13.m1.3.3.1.1" xref="algx2.l13.m1.3.3.1.2.cmml"><mo id="algx2.l13.m1.3.3.1.1.2" stretchy="false" xref="algx2.l13.m1.3.3.1.2.cmml">[</mo><msub id="algx2.l13.m1.3.3.1.1.1" xref="algx2.l13.m1.3.3.1.1.1.cmml"><mi id="algx2.l13.m1.3.3.1.1.1.2" xref="algx2.l13.m1.3.3.1.1.1.2.cmml">d</mi><mi id="algx2.l13.m1.3.3.1.1.1.3" xref="algx2.l13.m1.3.3.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l13.m1.3.3.1.1.3" xref="algx2.l13.m1.3.3.1.2.cmml">;</mo><mi id="algx2.l13.m1.1.1" xref="algx2.l13.m1.1.1.cmml">P</mi><mo id="algx2.l13.m1.3.3.1.1.4" xref="algx2.l13.m1.3.3.1.2.cmml">;</mo><mi id="algx2.l13.m1.2.2" xref="algx2.l13.m1.2.2.cmml">U</mi><mo id="algx2.l13.m1.3.3.1.1.5" stretchy="false" xref="algx2.l13.m1.3.3.1.2.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l13.m1.3b"><apply id="algx2.l13.m1.3.3.cmml" xref="algx2.l13.m1.3.3"><eq id="algx2.l13.m1.3.3.2.cmml" xref="algx2.l13.m1.3.3.2"></eq><apply id="algx2.l13.m1.3.3.3.cmml" xref="algx2.l13.m1.3.3.3"><csymbol cd="ambiguous" id="algx2.l13.m1.3.3.3.1.cmml" xref="algx2.l13.m1.3.3.3">subscript</csymbol><ci id="algx2.l13.m1.3.3.3.2.cmml" xref="algx2.l13.m1.3.3.3.2">𝑎</ci><ci id="algx2.l13.m1.3.3.3.3.cmml" xref="algx2.l13.m1.3.3.3.3">𝑖</ci></apply><list id="algx2.l13.m1.3.3.1.2.cmml" xref="algx2.l13.m1.3.3.1.1"><apply id="algx2.l13.m1.3.3.1.1.1.cmml" xref="algx2.l13.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="algx2.l13.m1.3.3.1.1.1.1.cmml" xref="algx2.l13.m1.3.3.1.1.1">subscript</csymbol><ci id="algx2.l13.m1.3.3.1.1.1.2.cmml" xref="algx2.l13.m1.3.3.1.1.1.2">𝑑</ci><ci id="algx2.l13.m1.3.3.1.1.1.3.cmml" xref="algx2.l13.m1.3.3.1.1.1.3">𝑖</ci></apply><ci id="algx2.l13.m1.1.1.cmml" xref="algx2.l13.m1.1.1">𝑃</ci><ci id="algx2.l13.m1.2.2.cmml" xref="algx2.l13.m1.2.2">𝑈</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l13.m1.3c">a_{i}=[d_{i};P;U]</annotation><annotation encoding="application/x-llamapun" id="algx2.l13.m1.3d">italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = [ italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ; italic_P ; italic_U ]</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>     Generate text by <math alttext="\text{pred}_{i}=\mathcal{G}_{sup}(a_{i})" class="ltx_Math" display="inline" id="algx2.l14.m1.1"><semantics id="algx2.l14.m1.1a"><mrow id="algx2.l14.m1.1.1" xref="algx2.l14.m1.1.1.cmml"><msub id="algx2.l14.m1.1.1.3" xref="algx2.l14.m1.1.1.3.cmml"><mtext id="algx2.l14.m1.1.1.3.2" xref="algx2.l14.m1.1.1.3.2a.cmml">pred</mtext><mi id="algx2.l14.m1.1.1.3.3" xref="algx2.l14.m1.1.1.3.3.cmml">i</mi></msub><mo id="algx2.l14.m1.1.1.2" xref="algx2.l14.m1.1.1.2.cmml">=</mo><mrow id="algx2.l14.m1.1.1.1" xref="algx2.l14.m1.1.1.1.cmml"><msub id="algx2.l14.m1.1.1.1.3" xref="algx2.l14.m1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l14.m1.1.1.1.3.2" xref="algx2.l14.m1.1.1.1.3.2.cmml">𝒢</mi><mrow id="algx2.l14.m1.1.1.1.3.3" xref="algx2.l14.m1.1.1.1.3.3.cmml"><mi id="algx2.l14.m1.1.1.1.3.3.2" xref="algx2.l14.m1.1.1.1.3.3.2.cmml">s</mi><mo id="algx2.l14.m1.1.1.1.3.3.1" xref="algx2.l14.m1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l14.m1.1.1.1.3.3.3" xref="algx2.l14.m1.1.1.1.3.3.3.cmml">u</mi><mo id="algx2.l14.m1.1.1.1.3.3.1a" xref="algx2.l14.m1.1.1.1.3.3.1.cmml">⁢</mo><mi id="algx2.l14.m1.1.1.1.3.3.4" xref="algx2.l14.m1.1.1.1.3.3.4.cmml">p</mi></mrow></msub><mo id="algx2.l14.m1.1.1.1.2" xref="algx2.l14.m1.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l14.m1.1.1.1.1.1" xref="algx2.l14.m1.1.1.1.1.1.1.cmml"><mo id="algx2.l14.m1.1.1.1.1.1.2" stretchy="false" xref="algx2.l14.m1.1.1.1.1.1.1.cmml">(</mo><msub id="algx2.l14.m1.1.1.1.1.1.1" xref="algx2.l14.m1.1.1.1.1.1.1.cmml"><mi id="algx2.l14.m1.1.1.1.1.1.1.2" xref="algx2.l14.m1.1.1.1.1.1.1.2.cmml">a</mi><mi id="algx2.l14.m1.1.1.1.1.1.1.3" xref="algx2.l14.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l14.m1.1.1.1.1.1.3" stretchy="false" xref="algx2.l14.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l14.m1.1b"><apply id="algx2.l14.m1.1.1.cmml" xref="algx2.l14.m1.1.1"><eq id="algx2.l14.m1.1.1.2.cmml" xref="algx2.l14.m1.1.1.2"></eq><apply id="algx2.l14.m1.1.1.3.cmml" xref="algx2.l14.m1.1.1.3"><csymbol cd="ambiguous" id="algx2.l14.m1.1.1.3.1.cmml" xref="algx2.l14.m1.1.1.3">subscript</csymbol><ci id="algx2.l14.m1.1.1.3.2a.cmml" xref="algx2.l14.m1.1.1.3.2"><mtext id="algx2.l14.m1.1.1.3.2.cmml" xref="algx2.l14.m1.1.1.3.2">pred</mtext></ci><ci id="algx2.l14.m1.1.1.3.3.cmml" xref="algx2.l14.m1.1.1.3.3">𝑖</ci></apply><apply id="algx2.l14.m1.1.1.1.cmml" xref="algx2.l14.m1.1.1.1"><times id="algx2.l14.m1.1.1.1.2.cmml" xref="algx2.l14.m1.1.1.1.2"></times><apply id="algx2.l14.m1.1.1.1.3.cmml" xref="algx2.l14.m1.1.1.1.3"><csymbol cd="ambiguous" id="algx2.l14.m1.1.1.1.3.1.cmml" xref="algx2.l14.m1.1.1.1.3">subscript</csymbol><ci id="algx2.l14.m1.1.1.1.3.2.cmml" xref="algx2.l14.m1.1.1.1.3.2">𝒢</ci><apply id="algx2.l14.m1.1.1.1.3.3.cmml" xref="algx2.l14.m1.1.1.1.3.3"><times id="algx2.l14.m1.1.1.1.3.3.1.cmml" xref="algx2.l14.m1.1.1.1.3.3.1"></times><ci id="algx2.l14.m1.1.1.1.3.3.2.cmml" xref="algx2.l14.m1.1.1.1.3.3.2">𝑠</ci><ci id="algx2.l14.m1.1.1.1.3.3.3.cmml" xref="algx2.l14.m1.1.1.1.3.3.3">𝑢</ci><ci id="algx2.l14.m1.1.1.1.3.3.4.cmml" xref="algx2.l14.m1.1.1.1.3.3.4">𝑝</ci></apply></apply><apply id="algx2.l14.m1.1.1.1.1.1.1.cmml" xref="algx2.l14.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l14.m1.1.1.1.1.1.1.1.cmml" xref="algx2.l14.m1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l14.m1.1.1.1.1.1.1.2.cmml" xref="algx2.l14.m1.1.1.1.1.1.1.2">𝑎</ci><ci id="algx2.l14.m1.1.1.1.1.1.1.3.cmml" xref="algx2.l14.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l14.m1.1c">\text{pred}_{i}=\mathcal{G}_{sup}(a_{i})</annotation><annotation encoding="application/x-llamapun" id="algx2.l14.m1.1d">pred start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>     Compute metrics as <math alttext="m_{i}=\text{M}(\text{pred}_{i},y)" class="ltx_Math" display="inline" id="algx2.l15.m1.2"><semantics id="algx2.l15.m1.2a"><mrow id="algx2.l15.m1.2.2" xref="algx2.l15.m1.2.2.cmml"><msub id="algx2.l15.m1.2.2.3" xref="algx2.l15.m1.2.2.3.cmml"><mi id="algx2.l15.m1.2.2.3.2" xref="algx2.l15.m1.2.2.3.2.cmml">m</mi><mi id="algx2.l15.m1.2.2.3.3" xref="algx2.l15.m1.2.2.3.3.cmml">i</mi></msub><mo id="algx2.l15.m1.2.2.2" xref="algx2.l15.m1.2.2.2.cmml">=</mo><mrow id="algx2.l15.m1.2.2.1" xref="algx2.l15.m1.2.2.1.cmml"><mtext id="algx2.l15.m1.2.2.1.3" xref="algx2.l15.m1.2.2.1.3a.cmml">M</mtext><mo id="algx2.l15.m1.2.2.1.2" xref="algx2.l15.m1.2.2.1.2.cmml">⁢</mo><mrow id="algx2.l15.m1.2.2.1.1.1" xref="algx2.l15.m1.2.2.1.1.2.cmml"><mo id="algx2.l15.m1.2.2.1.1.1.2" stretchy="false" xref="algx2.l15.m1.2.2.1.1.2.cmml">(</mo><msub id="algx2.l15.m1.2.2.1.1.1.1" xref="algx2.l15.m1.2.2.1.1.1.1.cmml"><mtext id="algx2.l15.m1.2.2.1.1.1.1.2" xref="algx2.l15.m1.2.2.1.1.1.1.2a.cmml">pred</mtext><mi id="algx2.l15.m1.2.2.1.1.1.1.3" xref="algx2.l15.m1.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l15.m1.2.2.1.1.1.3" xref="algx2.l15.m1.2.2.1.1.2.cmml">,</mo><mi id="algx2.l15.m1.1.1" xref="algx2.l15.m1.1.1.cmml">y</mi><mo id="algx2.l15.m1.2.2.1.1.1.4" stretchy="false" xref="algx2.l15.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l15.m1.2b"><apply id="algx2.l15.m1.2.2.cmml" xref="algx2.l15.m1.2.2"><eq id="algx2.l15.m1.2.2.2.cmml" xref="algx2.l15.m1.2.2.2"></eq><apply id="algx2.l15.m1.2.2.3.cmml" xref="algx2.l15.m1.2.2.3"><csymbol cd="ambiguous" id="algx2.l15.m1.2.2.3.1.cmml" xref="algx2.l15.m1.2.2.3">subscript</csymbol><ci id="algx2.l15.m1.2.2.3.2.cmml" xref="algx2.l15.m1.2.2.3.2">𝑚</ci><ci id="algx2.l15.m1.2.2.3.3.cmml" xref="algx2.l15.m1.2.2.3.3">𝑖</ci></apply><apply id="algx2.l15.m1.2.2.1.cmml" xref="algx2.l15.m1.2.2.1"><times id="algx2.l15.m1.2.2.1.2.cmml" xref="algx2.l15.m1.2.2.1.2"></times><ci id="algx2.l15.m1.2.2.1.3a.cmml" xref="algx2.l15.m1.2.2.1.3"><mtext id="algx2.l15.m1.2.2.1.3.cmml" xref="algx2.l15.m1.2.2.1.3">M</mtext></ci><interval closure="open" id="algx2.l15.m1.2.2.1.1.2.cmml" xref="algx2.l15.m1.2.2.1.1.1"><apply id="algx2.l15.m1.2.2.1.1.1.1.cmml" xref="algx2.l15.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l15.m1.2.2.1.1.1.1.1.cmml" xref="algx2.l15.m1.2.2.1.1.1.1">subscript</csymbol><ci id="algx2.l15.m1.2.2.1.1.1.1.2a.cmml" xref="algx2.l15.m1.2.2.1.1.1.1.2"><mtext id="algx2.l15.m1.2.2.1.1.1.1.2.cmml" xref="algx2.l15.m1.2.2.1.1.1.1.2">pred</mtext></ci><ci id="algx2.l15.m1.2.2.1.1.1.1.3.cmml" xref="algx2.l15.m1.2.2.1.1.1.1.3">𝑖</ci></apply><ci id="algx2.l15.m1.1.1.cmml" xref="algx2.l15.m1.1.1">𝑦</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l15.m1.2c">m_{i}=\text{M}(\text{pred}_{i},y)</annotation><annotation encoding="application/x-llamapun" id="algx2.l15.m1.2d">italic_m start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = M ( pred start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_y )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span><span class="ltx_text ltx_font_bold" id="algx2.l16.1">end</span> <span class="ltx_text ltx_font_bold" id="algx2.l16.2">for</span>
</div>
<div class="ltx_listingline" id="algx2.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span>Gather <math alttext="M=\{\text{softmax}(m_{i})\}_{i=1}^{K}" class="ltx_Math" display="inline" id="algx2.l17.m1.1"><semantics id="algx2.l17.m1.1a"><mrow id="algx2.l17.m1.1.1" xref="algx2.l17.m1.1.1.cmml"><mi id="algx2.l17.m1.1.1.3" xref="algx2.l17.m1.1.1.3.cmml">M</mi><mo id="algx2.l17.m1.1.1.2" xref="algx2.l17.m1.1.1.2.cmml">=</mo><msubsup id="algx2.l17.m1.1.1.1" xref="algx2.l17.m1.1.1.1.cmml"><mrow id="algx2.l17.m1.1.1.1.1.1.1" xref="algx2.l17.m1.1.1.1.1.1.2.cmml"><mo id="algx2.l17.m1.1.1.1.1.1.1.2" stretchy="false" xref="algx2.l17.m1.1.1.1.1.1.2.cmml">{</mo><mrow id="algx2.l17.m1.1.1.1.1.1.1.1" xref="algx2.l17.m1.1.1.1.1.1.1.1.cmml"><mtext id="algx2.l17.m1.1.1.1.1.1.1.1.3" xref="algx2.l17.m1.1.1.1.1.1.1.1.3a.cmml">softmax</mtext><mo id="algx2.l17.m1.1.1.1.1.1.1.1.2" xref="algx2.l17.m1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l17.m1.1.1.1.1.1.1.1.1.1" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.2" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.2.cmml">m</mi><mi id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.3" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="algx2.l17.m1.1.1.1.1.1.1.3" stretchy="false" xref="algx2.l17.m1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="algx2.l17.m1.1.1.1.1.3" xref="algx2.l17.m1.1.1.1.1.3.cmml"><mi id="algx2.l17.m1.1.1.1.1.3.2" xref="algx2.l17.m1.1.1.1.1.3.2.cmml">i</mi><mo id="algx2.l17.m1.1.1.1.1.3.1" xref="algx2.l17.m1.1.1.1.1.3.1.cmml">=</mo><mn id="algx2.l17.m1.1.1.1.1.3.3" xref="algx2.l17.m1.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="algx2.l17.m1.1.1.1.3" xref="algx2.l17.m1.1.1.1.3.cmml">K</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx2.l17.m1.1b"><apply id="algx2.l17.m1.1.1.cmml" xref="algx2.l17.m1.1.1"><eq id="algx2.l17.m1.1.1.2.cmml" xref="algx2.l17.m1.1.1.2"></eq><ci id="algx2.l17.m1.1.1.3.cmml" xref="algx2.l17.m1.1.1.3">𝑀</ci><apply id="algx2.l17.m1.1.1.1.cmml" xref="algx2.l17.m1.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m1.1.1.1.2.cmml" xref="algx2.l17.m1.1.1.1">superscript</csymbol><apply id="algx2.l17.m1.1.1.1.1.cmml" xref="algx2.l17.m1.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m1.1.1.1.1.2.cmml" xref="algx2.l17.m1.1.1.1">subscript</csymbol><set id="algx2.l17.m1.1.1.1.1.1.2.cmml" xref="algx2.l17.m1.1.1.1.1.1.1"><apply id="algx2.l17.m1.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1"><times id="algx2.l17.m1.1.1.1.1.1.1.1.2.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.2"></times><ci id="algx2.l17.m1.1.1.1.1.1.1.1.3a.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.3"><mtext id="algx2.l17.m1.1.1.1.1.1.1.1.3.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.3">softmax</mtext></ci><apply id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.2">𝑚</ci><ci id="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="algx2.l17.m1.1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></set><apply id="algx2.l17.m1.1.1.1.1.3.cmml" xref="algx2.l17.m1.1.1.1.1.3"><eq id="algx2.l17.m1.1.1.1.1.3.1.cmml" xref="algx2.l17.m1.1.1.1.1.3.1"></eq><ci id="algx2.l17.m1.1.1.1.1.3.2.cmml" xref="algx2.l17.m1.1.1.1.1.3.2">𝑖</ci><cn id="algx2.l17.m1.1.1.1.1.3.3.cmml" type="integer" xref="algx2.l17.m1.1.1.1.1.3.3">1</cn></apply></apply><ci id="algx2.l17.m1.1.1.1.3.cmml" xref="algx2.l17.m1.1.1.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l17.m1.1c">M=\{\text{softmax}(m_{i})\}_{i=1}^{K}</annotation><annotation encoding="application/x-llamapun" id="algx2.l17.m1.1d">italic_M = { softmax ( italic_m start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>, <math alttext="A=\{\text{softmax}(a_{i})\}_{i=1}^{K}" class="ltx_Math" display="inline" id="algx2.l17.m2.1"><semantics id="algx2.l17.m2.1a"><mrow id="algx2.l17.m2.1.1" xref="algx2.l17.m2.1.1.cmml"><mi id="algx2.l17.m2.1.1.3" xref="algx2.l17.m2.1.1.3.cmml">A</mi><mo id="algx2.l17.m2.1.1.2" xref="algx2.l17.m2.1.1.2.cmml">=</mo><msubsup id="algx2.l17.m2.1.1.1" xref="algx2.l17.m2.1.1.1.cmml"><mrow id="algx2.l17.m2.1.1.1.1.1.1" xref="algx2.l17.m2.1.1.1.1.1.2.cmml"><mo id="algx2.l17.m2.1.1.1.1.1.1.2" stretchy="false" xref="algx2.l17.m2.1.1.1.1.1.2.cmml">{</mo><mrow id="algx2.l17.m2.1.1.1.1.1.1.1" xref="algx2.l17.m2.1.1.1.1.1.1.1.cmml"><mtext id="algx2.l17.m2.1.1.1.1.1.1.1.3" xref="algx2.l17.m2.1.1.1.1.1.1.1.3a.cmml">softmax</mtext><mo id="algx2.l17.m2.1.1.1.1.1.1.1.2" xref="algx2.l17.m2.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="algx2.l17.m2.1.1.1.1.1.1.1.1.1" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.2" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.2.cmml">a</mi><mi id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.3" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="algx2.l17.m2.1.1.1.1.1.1.3" stretchy="false" xref="algx2.l17.m2.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="algx2.l17.m2.1.1.1.1.3" xref="algx2.l17.m2.1.1.1.1.3.cmml"><mi id="algx2.l17.m2.1.1.1.1.3.2" xref="algx2.l17.m2.1.1.1.1.3.2.cmml">i</mi><mo id="algx2.l17.m2.1.1.1.1.3.1" xref="algx2.l17.m2.1.1.1.1.3.1.cmml">=</mo><mn id="algx2.l17.m2.1.1.1.1.3.3" xref="algx2.l17.m2.1.1.1.1.3.3.cmml">1</mn></mrow><mi id="algx2.l17.m2.1.1.1.3" xref="algx2.l17.m2.1.1.1.3.cmml">K</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="algx2.l17.m2.1b"><apply id="algx2.l17.m2.1.1.cmml" xref="algx2.l17.m2.1.1"><eq id="algx2.l17.m2.1.1.2.cmml" xref="algx2.l17.m2.1.1.2"></eq><ci id="algx2.l17.m2.1.1.3.cmml" xref="algx2.l17.m2.1.1.3">𝐴</ci><apply id="algx2.l17.m2.1.1.1.cmml" xref="algx2.l17.m2.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m2.1.1.1.2.cmml" xref="algx2.l17.m2.1.1.1">superscript</csymbol><apply id="algx2.l17.m2.1.1.1.1.cmml" xref="algx2.l17.m2.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m2.1.1.1.1.2.cmml" xref="algx2.l17.m2.1.1.1">subscript</csymbol><set id="algx2.l17.m2.1.1.1.1.1.2.cmml" xref="algx2.l17.m2.1.1.1.1.1.1"><apply id="algx2.l17.m2.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1"><times id="algx2.l17.m2.1.1.1.1.1.1.1.2.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.2"></times><ci id="algx2.l17.m2.1.1.1.1.1.1.1.3a.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.3"><mtext id="algx2.l17.m2.1.1.1.1.1.1.1.3.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.3">softmax</mtext></ci><apply id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.2">𝑎</ci><ci id="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="algx2.l17.m2.1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></set><apply id="algx2.l17.m2.1.1.1.1.3.cmml" xref="algx2.l17.m2.1.1.1.1.3"><eq id="algx2.l17.m2.1.1.1.1.3.1.cmml" xref="algx2.l17.m2.1.1.1.1.3.1"></eq><ci id="algx2.l17.m2.1.1.1.1.3.2.cmml" xref="algx2.l17.m2.1.1.1.1.3.2">𝑖</ci><cn id="algx2.l17.m2.1.1.1.1.3.3.cmml" type="integer" xref="algx2.l17.m2.1.1.1.1.3.3">1</cn></apply></apply><ci id="algx2.l17.m2.1.1.1.3.cmml" xref="algx2.l17.m2.1.1.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l17.m2.1c">A=\{\text{softmax}(a_{i})\}_{i=1}^{K}</annotation><annotation encoding="application/x-llamapun" id="algx2.l17.m2.1d">italic_A = { softmax ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l18">
<span class="ltx_tag ltx_tag_listingline">18:</span>Compute retriever’s loss by <math alttext="\mathcal{L}_{\mathcal{R}}^{aug}=\text{KL}(M,S_{q}^{aug})" class="ltx_Math" display="inline" id="algx2.l18.m1.2"><semantics id="algx2.l18.m1.2a"><mrow id="algx2.l18.m1.2.2" xref="algx2.l18.m1.2.2.cmml"><msubsup id="algx2.l18.m1.2.2.3" xref="algx2.l18.m1.2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l18.m1.2.2.3.2.2" xref="algx2.l18.m1.2.2.3.2.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="algx2.l18.m1.2.2.3.2.3" xref="algx2.l18.m1.2.2.3.2.3.cmml">ℛ</mi><mrow id="algx2.l18.m1.2.2.3.3" xref="algx2.l18.m1.2.2.3.3.cmml"><mi id="algx2.l18.m1.2.2.3.3.2" xref="algx2.l18.m1.2.2.3.3.2.cmml">a</mi><mo id="algx2.l18.m1.2.2.3.3.1" xref="algx2.l18.m1.2.2.3.3.1.cmml">⁢</mo><mi id="algx2.l18.m1.2.2.3.3.3" xref="algx2.l18.m1.2.2.3.3.3.cmml">u</mi><mo id="algx2.l18.m1.2.2.3.3.1a" xref="algx2.l18.m1.2.2.3.3.1.cmml">⁢</mo><mi id="algx2.l18.m1.2.2.3.3.4" xref="algx2.l18.m1.2.2.3.3.4.cmml">g</mi></mrow></msubsup><mo id="algx2.l18.m1.2.2.2" xref="algx2.l18.m1.2.2.2.cmml">=</mo><mrow id="algx2.l18.m1.2.2.1" xref="algx2.l18.m1.2.2.1.cmml"><mtext id="algx2.l18.m1.2.2.1.3" xref="algx2.l18.m1.2.2.1.3a.cmml">KL</mtext><mo id="algx2.l18.m1.2.2.1.2" xref="algx2.l18.m1.2.2.1.2.cmml">⁢</mo><mrow id="algx2.l18.m1.2.2.1.1.1" xref="algx2.l18.m1.2.2.1.1.2.cmml"><mo id="algx2.l18.m1.2.2.1.1.1.2" stretchy="false" xref="algx2.l18.m1.2.2.1.1.2.cmml">(</mo><mi id="algx2.l18.m1.1.1" xref="algx2.l18.m1.1.1.cmml">M</mi><mo id="algx2.l18.m1.2.2.1.1.1.3" xref="algx2.l18.m1.2.2.1.1.2.cmml">,</mo><msubsup id="algx2.l18.m1.2.2.1.1.1.1" xref="algx2.l18.m1.2.2.1.1.1.1.cmml"><mi id="algx2.l18.m1.2.2.1.1.1.1.2.2" xref="algx2.l18.m1.2.2.1.1.1.1.2.2.cmml">S</mi><mi id="algx2.l18.m1.2.2.1.1.1.1.2.3" xref="algx2.l18.m1.2.2.1.1.1.1.2.3.cmml">q</mi><mrow id="algx2.l18.m1.2.2.1.1.1.1.3" xref="algx2.l18.m1.2.2.1.1.1.1.3.cmml"><mi id="algx2.l18.m1.2.2.1.1.1.1.3.2" xref="algx2.l18.m1.2.2.1.1.1.1.3.2.cmml">a</mi><mo id="algx2.l18.m1.2.2.1.1.1.1.3.1" xref="algx2.l18.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l18.m1.2.2.1.1.1.1.3.3" xref="algx2.l18.m1.2.2.1.1.1.1.3.3.cmml">u</mi><mo id="algx2.l18.m1.2.2.1.1.1.1.3.1a" xref="algx2.l18.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l18.m1.2.2.1.1.1.1.3.4" xref="algx2.l18.m1.2.2.1.1.1.1.3.4.cmml">g</mi></mrow></msubsup><mo id="algx2.l18.m1.2.2.1.1.1.4" stretchy="false" xref="algx2.l18.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l18.m1.2b"><apply id="algx2.l18.m1.2.2.cmml" xref="algx2.l18.m1.2.2"><eq id="algx2.l18.m1.2.2.2.cmml" xref="algx2.l18.m1.2.2.2"></eq><apply id="algx2.l18.m1.2.2.3.cmml" xref="algx2.l18.m1.2.2.3"><csymbol cd="ambiguous" id="algx2.l18.m1.2.2.3.1.cmml" xref="algx2.l18.m1.2.2.3">superscript</csymbol><apply id="algx2.l18.m1.2.2.3.2.cmml" xref="algx2.l18.m1.2.2.3"><csymbol cd="ambiguous" id="algx2.l18.m1.2.2.3.2.1.cmml" xref="algx2.l18.m1.2.2.3">subscript</csymbol><ci id="algx2.l18.m1.2.2.3.2.2.cmml" xref="algx2.l18.m1.2.2.3.2.2">ℒ</ci><ci id="algx2.l18.m1.2.2.3.2.3.cmml" xref="algx2.l18.m1.2.2.3.2.3">ℛ</ci></apply><apply id="algx2.l18.m1.2.2.3.3.cmml" xref="algx2.l18.m1.2.2.3.3"><times id="algx2.l18.m1.2.2.3.3.1.cmml" xref="algx2.l18.m1.2.2.3.3.1"></times><ci id="algx2.l18.m1.2.2.3.3.2.cmml" xref="algx2.l18.m1.2.2.3.3.2">𝑎</ci><ci id="algx2.l18.m1.2.2.3.3.3.cmml" xref="algx2.l18.m1.2.2.3.3.3">𝑢</ci><ci id="algx2.l18.m1.2.2.3.3.4.cmml" xref="algx2.l18.m1.2.2.3.3.4">𝑔</ci></apply></apply><apply id="algx2.l18.m1.2.2.1.cmml" xref="algx2.l18.m1.2.2.1"><times id="algx2.l18.m1.2.2.1.2.cmml" xref="algx2.l18.m1.2.2.1.2"></times><ci id="algx2.l18.m1.2.2.1.3a.cmml" xref="algx2.l18.m1.2.2.1.3"><mtext id="algx2.l18.m1.2.2.1.3.cmml" xref="algx2.l18.m1.2.2.1.3">KL</mtext></ci><interval closure="open" id="algx2.l18.m1.2.2.1.1.2.cmml" xref="algx2.l18.m1.2.2.1.1.1"><ci id="algx2.l18.m1.1.1.cmml" xref="algx2.l18.m1.1.1">𝑀</ci><apply id="algx2.l18.m1.2.2.1.1.1.1.cmml" xref="algx2.l18.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l18.m1.2.2.1.1.1.1.1.cmml" xref="algx2.l18.m1.2.2.1.1.1.1">superscript</csymbol><apply id="algx2.l18.m1.2.2.1.1.1.1.2.cmml" xref="algx2.l18.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="algx2.l18.m1.2.2.1.1.1.1.2.1.cmml" xref="algx2.l18.m1.2.2.1.1.1.1">subscript</csymbol><ci id="algx2.l18.m1.2.2.1.1.1.1.2.2.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.2.2">𝑆</ci><ci id="algx2.l18.m1.2.2.1.1.1.1.2.3.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.2.3">𝑞</ci></apply><apply id="algx2.l18.m1.2.2.1.1.1.1.3.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.3"><times id="algx2.l18.m1.2.2.1.1.1.1.3.1.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.3.1"></times><ci id="algx2.l18.m1.2.2.1.1.1.1.3.2.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.3.2">𝑎</ci><ci id="algx2.l18.m1.2.2.1.1.1.1.3.3.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.3.3">𝑢</ci><ci id="algx2.l18.m1.2.2.1.1.1.1.3.4.cmml" xref="algx2.l18.m1.2.2.1.1.1.1.3.4">𝑔</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l18.m1.2c">\mathcal{L}_{\mathcal{R}}^{aug}=\text{KL}(M,S_{q}^{aug})</annotation><annotation encoding="application/x-llamapun" id="algx2.l18.m1.2d">caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT = KL ( italic_M , italic_S start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l19">
<span class="ltx_tag ltx_tag_listingline">19:</span><span class="ltx_text ltx_font_bold" id="algx2.l19.1">for</span> augmented input <math alttext="a_{i}" class="ltx_Math" display="inline" id="algx2.l19.m1.1"><semantics id="algx2.l19.m1.1a"><msub id="algx2.l19.m1.1.1" xref="algx2.l19.m1.1.1.cmml"><mi id="algx2.l19.m1.1.1.2" xref="algx2.l19.m1.1.1.2.cmml">a</mi><mi id="algx2.l19.m1.1.1.3" xref="algx2.l19.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l19.m1.1b"><apply id="algx2.l19.m1.1.1.cmml" xref="algx2.l19.m1.1.1"><csymbol cd="ambiguous" id="algx2.l19.m1.1.1.1.cmml" xref="algx2.l19.m1.1.1">subscript</csymbol><ci id="algx2.l19.m1.1.1.2.cmml" xref="algx2.l19.m1.1.1.2">𝑎</ci><ci id="algx2.l19.m1.1.1.3.cmml" xref="algx2.l19.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.m1.1c">a_{i}</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.m1.1d">italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in <math alttext="A" class="ltx_Math" display="inline" id="algx2.l19.m2.1"><semantics id="algx2.l19.m2.1a"><mi id="algx2.l19.m2.1.1" xref="algx2.l19.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="algx2.l19.m2.1b"><ci id="algx2.l19.m2.1.1.cmml" xref="algx2.l19.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l19.m2.1c">A</annotation><annotation encoding="application/x-llamapun" id="algx2.l19.m2.1d">italic_A</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="algx2.l19.2">do</span>
</div>
<div class="ltx_listingline" id="algx2.l20">
<span class="ltx_tag ltx_tag_listingline">20:</span>     Compute negative log-likelihood loss <math alttext="\mathcal{L}_{\mathcal{G}}" class="ltx_Math" display="inline" id="algx2.l20.m1.1"><semantics id="algx2.l20.m1.1a"><msub id="algx2.l20.m1.1.1" xref="algx2.l20.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l20.m1.1.1.2" xref="algx2.l20.m1.1.1.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="algx2.l20.m1.1.1.3" xref="algx2.l20.m1.1.1.3.cmml">𝒢</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l20.m1.1b"><apply id="algx2.l20.m1.1.1.cmml" xref="algx2.l20.m1.1.1"><csymbol cd="ambiguous" id="algx2.l20.m1.1.1.1.cmml" xref="algx2.l20.m1.1.1">subscript</csymbol><ci id="algx2.l20.m1.1.1.2.cmml" xref="algx2.l20.m1.1.1.2">ℒ</ci><ci id="algx2.l20.m1.1.1.3.cmml" xref="algx2.l20.m1.1.1.3">𝒢</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.m1.1c">\mathcal{L}_{\mathcal{G}}</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.m1.1d">caligraphic_L start_POSTSUBSCRIPT caligraphic_G end_POSTSUBSCRIPT</annotation></semantics></math> with input <math alttext="a_{i}" class="ltx_Math" display="inline" id="algx2.l20.m2.1"><semantics id="algx2.l20.m2.1a"><msub id="algx2.l20.m2.1.1" xref="algx2.l20.m2.1.1.cmml"><mi id="algx2.l20.m2.1.1.2" xref="algx2.l20.m2.1.1.2.cmml">a</mi><mi id="algx2.l20.m2.1.1.3" xref="algx2.l20.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="algx2.l20.m2.1b"><apply id="algx2.l20.m2.1.1.cmml" xref="algx2.l20.m2.1.1"><csymbol cd="ambiguous" id="algx2.l20.m2.1.1.1.cmml" xref="algx2.l20.m2.1.1">subscript</csymbol><ci id="algx2.l20.m2.1.1.2.cmml" xref="algx2.l20.m2.1.1.2">𝑎</ci><ci id="algx2.l20.m2.1.1.3.cmml" xref="algx2.l20.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.m2.1c">a_{i}</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.m2.1d">italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and ground truth target <math alttext="y" class="ltx_Math" display="inline" id="algx2.l20.m3.1"><semantics id="algx2.l20.m3.1a"><mi id="algx2.l20.m3.1.1" xref="algx2.l20.m3.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="algx2.l20.m3.1b"><ci id="algx2.l20.m3.1.1.cmml" xref="algx2.l20.m3.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l20.m3.1c">y</annotation><annotation encoding="application/x-llamapun" id="algx2.l20.m3.1d">italic_y</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l21">
<span class="ltx_tag ltx_tag_listingline">21:</span>     Update <math alttext="\mathcal{G}_{sup}" class="ltx_Math" display="inline" id="algx2.l21.m1.1"><semantics id="algx2.l21.m1.1a"><msub id="algx2.l21.m1.1.1" xref="algx2.l21.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m1.1.1.2" xref="algx2.l21.m1.1.1.2.cmml">𝒢</mi><mrow id="algx2.l21.m1.1.1.3" xref="algx2.l21.m1.1.1.3.cmml"><mi id="algx2.l21.m1.1.1.3.2" xref="algx2.l21.m1.1.1.3.2.cmml">s</mi><mo id="algx2.l21.m1.1.1.3.1" xref="algx2.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m1.1.1.3.3" xref="algx2.l21.m1.1.1.3.3.cmml">u</mi><mo id="algx2.l21.m1.1.1.3.1a" xref="algx2.l21.m1.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m1.1.1.3.4" xref="algx2.l21.m1.1.1.3.4.cmml">p</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l21.m1.1b"><apply id="algx2.l21.m1.1.1.cmml" xref="algx2.l21.m1.1.1"><csymbol cd="ambiguous" id="algx2.l21.m1.1.1.1.cmml" xref="algx2.l21.m1.1.1">subscript</csymbol><ci id="algx2.l21.m1.1.1.2.cmml" xref="algx2.l21.m1.1.1.2">𝒢</ci><apply id="algx2.l21.m1.1.1.3.cmml" xref="algx2.l21.m1.1.1.3"><times id="algx2.l21.m1.1.1.3.1.cmml" xref="algx2.l21.m1.1.1.3.1"></times><ci id="algx2.l21.m1.1.1.3.2.cmml" xref="algx2.l21.m1.1.1.3.2">𝑠</ci><ci id="algx2.l21.m1.1.1.3.3.cmml" xref="algx2.l21.m1.1.1.3.3">𝑢</ci><ci id="algx2.l21.m1.1.1.3.4.cmml" xref="algx2.l21.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l21.m1.1c">\mathcal{G}_{sup}</annotation><annotation encoding="application/x-llamapun" id="algx2.l21.m1.1d">caligraphic_G start_POSTSUBSCRIPT italic_s italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="algx2.l21.m2.1"><semantics id="algx2.l21.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m2.1.1" xref="algx2.l21.m2.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="algx2.l21.m2.1b"><ci id="algx2.l21.m2.1.1.cmml" xref="algx2.l21.m2.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="algx2.l21.m2.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="algx2.l21.m2.1d">caligraphic_R</annotation></semantics></math> by <math alttext="\mathcal{L}=\mathcal{L}_{\mathcal{R}}^{aug}+\mathcal{L}_{\mathcal{G}}" class="ltx_Math" display="inline" id="algx2.l21.m3.1"><semantics id="algx2.l21.m3.1a"><mrow id="algx2.l21.m3.1.1" xref="algx2.l21.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m3.1.1.2" xref="algx2.l21.m3.1.1.2.cmml">ℒ</mi><mo id="algx2.l21.m3.1.1.1" xref="algx2.l21.m3.1.1.1.cmml">=</mo><mrow id="algx2.l21.m3.1.1.3" xref="algx2.l21.m3.1.1.3.cmml"><msubsup id="algx2.l21.m3.1.1.3.2" xref="algx2.l21.m3.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m3.1.1.3.2.2.2" xref="algx2.l21.m3.1.1.3.2.2.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m3.1.1.3.2.2.3" xref="algx2.l21.m3.1.1.3.2.2.3.cmml">ℛ</mi><mrow id="algx2.l21.m3.1.1.3.2.3" xref="algx2.l21.m3.1.1.3.2.3.cmml"><mi id="algx2.l21.m3.1.1.3.2.3.2" xref="algx2.l21.m3.1.1.3.2.3.2.cmml">a</mi><mo id="algx2.l21.m3.1.1.3.2.3.1" xref="algx2.l21.m3.1.1.3.2.3.1.cmml">⁢</mo><mi id="algx2.l21.m3.1.1.3.2.3.3" xref="algx2.l21.m3.1.1.3.2.3.3.cmml">u</mi><mo id="algx2.l21.m3.1.1.3.2.3.1a" xref="algx2.l21.m3.1.1.3.2.3.1.cmml">⁢</mo><mi id="algx2.l21.m3.1.1.3.2.3.4" xref="algx2.l21.m3.1.1.3.2.3.4.cmml">g</mi></mrow></msubsup><mo id="algx2.l21.m3.1.1.3.1" xref="algx2.l21.m3.1.1.3.1.cmml">+</mo><msub id="algx2.l21.m3.1.1.3.3" xref="algx2.l21.m3.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m3.1.1.3.3.2" xref="algx2.l21.m3.1.1.3.3.2.cmml">ℒ</mi><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m3.1.1.3.3.3" xref="algx2.l21.m3.1.1.3.3.3.cmml">𝒢</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx2.l21.m3.1b"><apply id="algx2.l21.m3.1.1.cmml" xref="algx2.l21.m3.1.1"><eq id="algx2.l21.m3.1.1.1.cmml" xref="algx2.l21.m3.1.1.1"></eq><ci id="algx2.l21.m3.1.1.2.cmml" xref="algx2.l21.m3.1.1.2">ℒ</ci><apply id="algx2.l21.m3.1.1.3.cmml" xref="algx2.l21.m3.1.1.3"><plus id="algx2.l21.m3.1.1.3.1.cmml" xref="algx2.l21.m3.1.1.3.1"></plus><apply id="algx2.l21.m3.1.1.3.2.cmml" xref="algx2.l21.m3.1.1.3.2"><csymbol cd="ambiguous" id="algx2.l21.m3.1.1.3.2.1.cmml" xref="algx2.l21.m3.1.1.3.2">superscript</csymbol><apply id="algx2.l21.m3.1.1.3.2.2.cmml" xref="algx2.l21.m3.1.1.3.2"><csymbol cd="ambiguous" id="algx2.l21.m3.1.1.3.2.2.1.cmml" xref="algx2.l21.m3.1.1.3.2">subscript</csymbol><ci id="algx2.l21.m3.1.1.3.2.2.2.cmml" xref="algx2.l21.m3.1.1.3.2.2.2">ℒ</ci><ci id="algx2.l21.m3.1.1.3.2.2.3.cmml" xref="algx2.l21.m3.1.1.3.2.2.3">ℛ</ci></apply><apply id="algx2.l21.m3.1.1.3.2.3.cmml" xref="algx2.l21.m3.1.1.3.2.3"><times id="algx2.l21.m3.1.1.3.2.3.1.cmml" xref="algx2.l21.m3.1.1.3.2.3.1"></times><ci id="algx2.l21.m3.1.1.3.2.3.2.cmml" xref="algx2.l21.m3.1.1.3.2.3.2">𝑎</ci><ci id="algx2.l21.m3.1.1.3.2.3.3.cmml" xref="algx2.l21.m3.1.1.3.2.3.3">𝑢</ci><ci id="algx2.l21.m3.1.1.3.2.3.4.cmml" xref="algx2.l21.m3.1.1.3.2.3.4">𝑔</ci></apply></apply><apply id="algx2.l21.m3.1.1.3.3.cmml" xref="algx2.l21.m3.1.1.3.3"><csymbol cd="ambiguous" id="algx2.l21.m3.1.1.3.3.1.cmml" xref="algx2.l21.m3.1.1.3.3">subscript</csymbol><ci id="algx2.l21.m3.1.1.3.3.2.cmml" xref="algx2.l21.m3.1.1.3.3.2">ℒ</ci><ci id="algx2.l21.m3.1.1.3.3.3.cmml" xref="algx2.l21.m3.1.1.3.3.3">𝒢</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l21.m3.1c">\mathcal{L}=\mathcal{L}_{\mathcal{R}}^{aug}+\mathcal{L}_{\mathcal{G}}</annotation><annotation encoding="application/x-llamapun" id="algx2.l21.m3.1d">caligraphic_L = caligraphic_L start_POSTSUBSCRIPT caligraphic_R end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_a italic_u italic_g end_POSTSUPERSCRIPT + caligraphic_L start_POSTSUBSCRIPT caligraphic_G end_POSTSUBSCRIPT</annotation></semantics></math> as <math alttext="\mathcal{G}_{tuned}" class="ltx_Math" display="inline" id="algx2.l21.m4.1"><semantics id="algx2.l21.m4.1a"><msub id="algx2.l21.m4.1.1" xref="algx2.l21.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m4.1.1.2" xref="algx2.l21.m4.1.1.2.cmml">𝒢</mi><mrow id="algx2.l21.m4.1.1.3" xref="algx2.l21.m4.1.1.3.cmml"><mi id="algx2.l21.m4.1.1.3.2" xref="algx2.l21.m4.1.1.3.2.cmml">t</mi><mo id="algx2.l21.m4.1.1.3.1" xref="algx2.l21.m4.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m4.1.1.3.3" xref="algx2.l21.m4.1.1.3.3.cmml">u</mi><mo id="algx2.l21.m4.1.1.3.1a" xref="algx2.l21.m4.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m4.1.1.3.4" xref="algx2.l21.m4.1.1.3.4.cmml">n</mi><mo id="algx2.l21.m4.1.1.3.1b" xref="algx2.l21.m4.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m4.1.1.3.5" xref="algx2.l21.m4.1.1.3.5.cmml">e</mi><mo id="algx2.l21.m4.1.1.3.1c" xref="algx2.l21.m4.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m4.1.1.3.6" xref="algx2.l21.m4.1.1.3.6.cmml">d</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l21.m4.1b"><apply id="algx2.l21.m4.1.1.cmml" xref="algx2.l21.m4.1.1"><csymbol cd="ambiguous" id="algx2.l21.m4.1.1.1.cmml" xref="algx2.l21.m4.1.1">subscript</csymbol><ci id="algx2.l21.m4.1.1.2.cmml" xref="algx2.l21.m4.1.1.2">𝒢</ci><apply id="algx2.l21.m4.1.1.3.cmml" xref="algx2.l21.m4.1.1.3"><times id="algx2.l21.m4.1.1.3.1.cmml" xref="algx2.l21.m4.1.1.3.1"></times><ci id="algx2.l21.m4.1.1.3.2.cmml" xref="algx2.l21.m4.1.1.3.2">𝑡</ci><ci id="algx2.l21.m4.1.1.3.3.cmml" xref="algx2.l21.m4.1.1.3.3">𝑢</ci><ci id="algx2.l21.m4.1.1.3.4.cmml" xref="algx2.l21.m4.1.1.3.4">𝑛</ci><ci id="algx2.l21.m4.1.1.3.5.cmml" xref="algx2.l21.m4.1.1.3.5">𝑒</ci><ci id="algx2.l21.m4.1.1.3.6.cmml" xref="algx2.l21.m4.1.1.3.6">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l21.m4.1c">\mathcal{G}_{tuned}</annotation><annotation encoding="application/x-llamapun" id="algx2.l21.m4.1d">caligraphic_G start_POSTSUBSCRIPT italic_t italic_u italic_n italic_e italic_d end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{R}_{tuned}" class="ltx_Math" display="inline" id="algx2.l21.m5.1"><semantics id="algx2.l21.m5.1a"><msub id="algx2.l21.m5.1.1" xref="algx2.l21.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx2.l21.m5.1.1.2" xref="algx2.l21.m5.1.1.2.cmml">ℛ</mi><mrow id="algx2.l21.m5.1.1.3" xref="algx2.l21.m5.1.1.3.cmml"><mi id="algx2.l21.m5.1.1.3.2" xref="algx2.l21.m5.1.1.3.2.cmml">t</mi><mo id="algx2.l21.m5.1.1.3.1" xref="algx2.l21.m5.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m5.1.1.3.3" xref="algx2.l21.m5.1.1.3.3.cmml">u</mi><mo id="algx2.l21.m5.1.1.3.1a" xref="algx2.l21.m5.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m5.1.1.3.4" xref="algx2.l21.m5.1.1.3.4.cmml">n</mi><mo id="algx2.l21.m5.1.1.3.1b" xref="algx2.l21.m5.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m5.1.1.3.5" xref="algx2.l21.m5.1.1.3.5.cmml">e</mi><mo id="algx2.l21.m5.1.1.3.1c" xref="algx2.l21.m5.1.1.3.1.cmml">⁢</mo><mi id="algx2.l21.m5.1.1.3.6" xref="algx2.l21.m5.1.1.3.6.cmml">d</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="algx2.l21.m5.1b"><apply id="algx2.l21.m5.1.1.cmml" xref="algx2.l21.m5.1.1"><csymbol cd="ambiguous" id="algx2.l21.m5.1.1.1.cmml" xref="algx2.l21.m5.1.1">subscript</csymbol><ci id="algx2.l21.m5.1.1.2.cmml" xref="algx2.l21.m5.1.1.2">ℛ</ci><apply id="algx2.l21.m5.1.1.3.cmml" xref="algx2.l21.m5.1.1.3"><times id="algx2.l21.m5.1.1.3.1.cmml" xref="algx2.l21.m5.1.1.3.1"></times><ci id="algx2.l21.m5.1.1.3.2.cmml" xref="algx2.l21.m5.1.1.3.2">𝑡</ci><ci id="algx2.l21.m5.1.1.3.3.cmml" xref="algx2.l21.m5.1.1.3.3">𝑢</ci><ci id="algx2.l21.m5.1.1.3.4.cmml" xref="algx2.l21.m5.1.1.3.4">𝑛</ci><ci id="algx2.l21.m5.1.1.3.5.cmml" xref="algx2.l21.m5.1.1.3.5">𝑒</ci><ci id="algx2.l21.m5.1.1.3.6.cmml" xref="algx2.l21.m5.1.1.3.6">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx2.l21.m5.1c">\mathcal{R}_{tuned}</annotation><annotation encoding="application/x-llamapun" id="algx2.l21.m5.1d">caligraphic_R start_POSTSUBSCRIPT italic_t italic_u italic_n italic_e italic_d end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx2.l22">
<span class="ltx_tag ltx_tag_listingline">22:</span><span class="ltx_text ltx_font_bold" id="algx2.l22.1">end</span> <span class="ltx_text ltx_font_bold" id="algx2.l22.2">for</span>
</div>
<div class="ltx_listingline" id="algx2.l23">
<span class="ltx_tag ltx_tag_listingline">23:</span>Repeat the steps in Stage2 until converge

</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="A1.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.4 </span>Case Study</h3>
<div class="ltx_para" id="A1.SS4.p1">
<p class="ltx_p" id="A1.SS4.p1.2">As shown in Tables <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T11" title="Table 11 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">11</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T12" title="Table 12 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">12</span></a>, we present the case studies on two conversations to compare the generation results among the non-retrieval-augmented results of T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.SS4.p1.1.m1.1"><semantics id="A1.SS4.p1.1.m1.1a"><mmultiscripts id="A1.SS4.p1.1.m1.1.1" xref="A1.SS4.p1.1.m1.1.1.cmml"><mi id="A1.SS4.p1.1.m1.1.1.2.2" xref="A1.SS4.p1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.SS4.p1.1.m1.1.1a" xref="A1.SS4.p1.1.m1.1.1.cmml"></mprescripts><mrow id="A1.SS4.p1.1.m1.1.1b" xref="A1.SS4.p1.1.m1.1.1.cmml"></mrow><mrow id="A1.SS4.p1.1.m1.1.1.3" xref="A1.SS4.p1.1.m1.1.1.3.cmml"><mi id="A1.SS4.p1.1.m1.1.1.3.2" xref="A1.SS4.p1.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.SS4.p1.1.m1.1.1.3.1" xref="A1.SS4.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.1.m1.1.1.3.3" xref="A1.SS4.p1.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.SS4.p1.1.m1.1.1.2.3" xref="A1.SS4.p1.1.m1.1.1.2.3.cmml"><mi id="A1.SS4.p1.1.m1.1.1.2.3.2" xref="A1.SS4.p1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.SS4.p1.1.m1.1.1.2.3.1" xref="A1.SS4.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.1.m1.1.1.2.3.3" xref="A1.SS4.p1.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.SS4.p1.1.m1.1.1.2.3.1a" xref="A1.SS4.p1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.1.m1.1.1.2.3.4" xref="A1.SS4.p1.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.SS4.p1.1.m1.1.1c" xref="A1.SS4.p1.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.SS4.p1.1.m1.1b"><apply id="A1.SS4.p1.1.m1.1.1.cmml" xref="A1.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p1.1.m1.1.1.1.cmml" xref="A1.SS4.p1.1.m1.1.1">superscript</csymbol><apply id="A1.SS4.p1.1.m1.1.1.2.cmml" xref="A1.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p1.1.m1.1.1.2.1.cmml" xref="A1.SS4.p1.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.SS4.p1.1.m1.1.1.2.2.cmml" xref="A1.SS4.p1.1.m1.1.1.2.2">absent</csymbol><apply id="A1.SS4.p1.1.m1.1.1.2.3.cmml" xref="A1.SS4.p1.1.m1.1.1.2.3"><times id="A1.SS4.p1.1.m1.1.1.2.3.1.cmml" xref="A1.SS4.p1.1.m1.1.1.2.3.1"></times><ci id="A1.SS4.p1.1.m1.1.1.2.3.2.cmml" xref="A1.SS4.p1.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.SS4.p1.1.m1.1.1.2.3.3.cmml" xref="A1.SS4.p1.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.SS4.p1.1.m1.1.1.2.3.4.cmml" xref="A1.SS4.p1.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.SS4.p1.1.m1.1.1.3.cmml" xref="A1.SS4.p1.1.m1.1.1.3"><times id="A1.SS4.p1.1.m1.1.1.3.1.cmml" xref="A1.SS4.p1.1.m1.1.1.3.1"></times><ci id="A1.SS4.p1.1.m1.1.1.3.2.cmml" xref="A1.SS4.p1.1.m1.1.1.3.2">𝑋</ci><ci id="A1.SS4.p1.1.m1.1.1.3.3.cmml" xref="A1.SS4.p1.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS4.p1.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.SS4.p1.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>, retrieval augmented results of T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.SS4.p1.2.m2.1"><semantics id="A1.SS4.p1.2.m2.1a"><mmultiscripts id="A1.SS4.p1.2.m2.1.1" xref="A1.SS4.p1.2.m2.1.1.cmml"><mi id="A1.SS4.p1.2.m2.1.1.2.2" xref="A1.SS4.p1.2.m2.1.1.2.2.cmml"></mi><mprescripts id="A1.SS4.p1.2.m2.1.1a" xref="A1.SS4.p1.2.m2.1.1.cmml"></mprescripts><mrow id="A1.SS4.p1.2.m2.1.1b" xref="A1.SS4.p1.2.m2.1.1.cmml"></mrow><mrow id="A1.SS4.p1.2.m2.1.1.3" xref="A1.SS4.p1.2.m2.1.1.3.cmml"><mi id="A1.SS4.p1.2.m2.1.1.3.2" xref="A1.SS4.p1.2.m2.1.1.3.2.cmml">X</mi><mo id="A1.SS4.p1.2.m2.1.1.3.1" xref="A1.SS4.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.2.m2.1.1.3.3" xref="A1.SS4.p1.2.m2.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.SS4.p1.2.m2.1.1.2.3" xref="A1.SS4.p1.2.m2.1.1.2.3.cmml"><mi id="A1.SS4.p1.2.m2.1.1.2.3.2" xref="A1.SS4.p1.2.m2.1.1.2.3.2.cmml">s</mi><mo id="A1.SS4.p1.2.m2.1.1.2.3.1" xref="A1.SS4.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.2.m2.1.1.2.3.3" xref="A1.SS4.p1.2.m2.1.1.2.3.3.cmml">u</mi><mo id="A1.SS4.p1.2.m2.1.1.2.3.1a" xref="A1.SS4.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p1.2.m2.1.1.2.3.4" xref="A1.SS4.p1.2.m2.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.SS4.p1.2.m2.1.1c" xref="A1.SS4.p1.2.m2.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.SS4.p1.2.m2.1b"><apply id="A1.SS4.p1.2.m2.1.1.cmml" xref="A1.SS4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A1.SS4.p1.2.m2.1.1.1.cmml" xref="A1.SS4.p1.2.m2.1.1">superscript</csymbol><apply id="A1.SS4.p1.2.m2.1.1.2.cmml" xref="A1.SS4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A1.SS4.p1.2.m2.1.1.2.1.cmml" xref="A1.SS4.p1.2.m2.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.SS4.p1.2.m2.1.1.2.2.cmml" xref="A1.SS4.p1.2.m2.1.1.2.2">absent</csymbol><apply id="A1.SS4.p1.2.m2.1.1.2.3.cmml" xref="A1.SS4.p1.2.m2.1.1.2.3"><times id="A1.SS4.p1.2.m2.1.1.2.3.1.cmml" xref="A1.SS4.p1.2.m2.1.1.2.3.1"></times><ci id="A1.SS4.p1.2.m2.1.1.2.3.2.cmml" xref="A1.SS4.p1.2.m2.1.1.2.3.2">𝑠</ci><ci id="A1.SS4.p1.2.m2.1.1.2.3.3.cmml" xref="A1.SS4.p1.2.m2.1.1.2.3.3">𝑢</ci><ci id="A1.SS4.p1.2.m2.1.1.2.3.4.cmml" xref="A1.SS4.p1.2.m2.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.SS4.p1.2.m2.1.1.3.cmml" xref="A1.SS4.p1.2.m2.1.1.3"><times id="A1.SS4.p1.2.m2.1.1.3.1.cmml" xref="A1.SS4.p1.2.m2.1.1.3.1"></times><ci id="A1.SS4.p1.2.m2.1.1.3.2.cmml" xref="A1.SS4.p1.2.m2.1.1.3.2">𝑋</ci><ci id="A1.SS4.p1.2.m2.1.1.3.3.cmml" xref="A1.SS4.p1.2.m2.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS4.p1.2.m2.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.SS4.p1.2.m2.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>+LAPDOG, and the ground truth.</p>
</div>
<div class="ltx_para" id="A1.SS4.p2">
<p class="ltx_p" id="A1.SS4.p2.1">For the conversation in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T11" title="Table 11 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">11</span></a>, the agent is going to talk about divorce as indicated in the ground truth. LAPDOG retrieves several stories about the bad days with his life and family, and this could be a clue for him to decide to divorce. In this conversation, T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.SS4.p2.1.m1.1"><semantics id="A1.SS4.p2.1.m1.1a"><mmultiscripts id="A1.SS4.p2.1.m1.1.1" xref="A1.SS4.p2.1.m1.1.1.cmml"><mi id="A1.SS4.p2.1.m1.1.1.2.2" xref="A1.SS4.p2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.SS4.p2.1.m1.1.1a" xref="A1.SS4.p2.1.m1.1.1.cmml"></mprescripts><mrow id="A1.SS4.p2.1.m1.1.1b" xref="A1.SS4.p2.1.m1.1.1.cmml"></mrow><mrow id="A1.SS4.p2.1.m1.1.1.3" xref="A1.SS4.p2.1.m1.1.1.3.cmml"><mi id="A1.SS4.p2.1.m1.1.1.3.2" xref="A1.SS4.p2.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.SS4.p2.1.m1.1.1.3.1" xref="A1.SS4.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.SS4.p2.1.m1.1.1.3.3" xref="A1.SS4.p2.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.SS4.p2.1.m1.1.1.2.3" xref="A1.SS4.p2.1.m1.1.1.2.3.cmml"><mi id="A1.SS4.p2.1.m1.1.1.2.3.2" xref="A1.SS4.p2.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.SS4.p2.1.m1.1.1.2.3.1" xref="A1.SS4.p2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p2.1.m1.1.1.2.3.3" xref="A1.SS4.p2.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.SS4.p2.1.m1.1.1.2.3.1a" xref="A1.SS4.p2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p2.1.m1.1.1.2.3.4" xref="A1.SS4.p2.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.SS4.p2.1.m1.1.1c" xref="A1.SS4.p2.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.SS4.p2.1.m1.1b"><apply id="A1.SS4.p2.1.m1.1.1.cmml" xref="A1.SS4.p2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p2.1.m1.1.1.1.cmml" xref="A1.SS4.p2.1.m1.1.1">superscript</csymbol><apply id="A1.SS4.p2.1.m1.1.1.2.cmml" xref="A1.SS4.p2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p2.1.m1.1.1.2.1.cmml" xref="A1.SS4.p2.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.SS4.p2.1.m1.1.1.2.2.cmml" xref="A1.SS4.p2.1.m1.1.1.2.2">absent</csymbol><apply id="A1.SS4.p2.1.m1.1.1.2.3.cmml" xref="A1.SS4.p2.1.m1.1.1.2.3"><times id="A1.SS4.p2.1.m1.1.1.2.3.1.cmml" xref="A1.SS4.p2.1.m1.1.1.2.3.1"></times><ci id="A1.SS4.p2.1.m1.1.1.2.3.2.cmml" xref="A1.SS4.p2.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.SS4.p2.1.m1.1.1.2.3.3.cmml" xref="A1.SS4.p2.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.SS4.p2.1.m1.1.1.2.3.4.cmml" xref="A1.SS4.p2.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.SS4.p2.1.m1.1.1.3.cmml" xref="A1.SS4.p2.1.m1.1.1.3"><times id="A1.SS4.p2.1.m1.1.1.3.1.cmml" xref="A1.SS4.p2.1.m1.1.1.3.1"></times><ci id="A1.SS4.p2.1.m1.1.1.3.2.cmml" xref="A1.SS4.p2.1.m1.1.1.3.2">𝑋</ci><ci id="A1.SS4.p2.1.m1.1.1.3.3.cmml" xref="A1.SS4.p2.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS4.p2.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.SS4.p2.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math> complains about his life but does not mention anything about divorce. LAPDOG, reinforced by the retrieval stories and persona, has a stronger intention to generate the divorce decision, which would be more aligned with the intention in the ground truth. The other retrieved stories describe the messes that happened during the working time, which may reflect the persona <span class="ltx_text ltx_font_italic" id="A1.SS4.p2.1.1">“I hate my job.”</span></p>
</div>
<div class="ltx_para" id="A1.SS4.p3">
<p class="ltx_p" id="A1.SS4.p3.1">In the conversation mentioned in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T12" title="Table 12 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">12</span></a>, the conversation is a simple start with a <span class="ltx_text ltx_font_italic" id="A1.SS4.p3.1.1">“How are you doing today?”</span>, T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.SS4.p3.1.m1.1"><semantics id="A1.SS4.p3.1.m1.1a"><mmultiscripts id="A1.SS4.p3.1.m1.1.1" xref="A1.SS4.p3.1.m1.1.1.cmml"><mi id="A1.SS4.p3.1.m1.1.1.2.2" xref="A1.SS4.p3.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.SS4.p3.1.m1.1.1a" xref="A1.SS4.p3.1.m1.1.1.cmml"></mprescripts><mrow id="A1.SS4.p3.1.m1.1.1b" xref="A1.SS4.p3.1.m1.1.1.cmml"></mrow><mrow id="A1.SS4.p3.1.m1.1.1.3" xref="A1.SS4.p3.1.m1.1.1.3.cmml"><mi id="A1.SS4.p3.1.m1.1.1.3.2" xref="A1.SS4.p3.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.SS4.p3.1.m1.1.1.3.1" xref="A1.SS4.p3.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.SS4.p3.1.m1.1.1.3.3" xref="A1.SS4.p3.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.SS4.p3.1.m1.1.1.2.3" xref="A1.SS4.p3.1.m1.1.1.2.3.cmml"><mi id="A1.SS4.p3.1.m1.1.1.2.3.2" xref="A1.SS4.p3.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.SS4.p3.1.m1.1.1.2.3.1" xref="A1.SS4.p3.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p3.1.m1.1.1.2.3.3" xref="A1.SS4.p3.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.SS4.p3.1.m1.1.1.2.3.1a" xref="A1.SS4.p3.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p3.1.m1.1.1.2.3.4" xref="A1.SS4.p3.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.SS4.p3.1.m1.1.1c" xref="A1.SS4.p3.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.SS4.p3.1.m1.1b"><apply id="A1.SS4.p3.1.m1.1.1.cmml" xref="A1.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p3.1.m1.1.1.1.cmml" xref="A1.SS4.p3.1.m1.1.1">superscript</csymbol><apply id="A1.SS4.p3.1.m1.1.1.2.cmml" xref="A1.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p3.1.m1.1.1.2.1.cmml" xref="A1.SS4.p3.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.SS4.p3.1.m1.1.1.2.2.cmml" xref="A1.SS4.p3.1.m1.1.1.2.2">absent</csymbol><apply id="A1.SS4.p3.1.m1.1.1.2.3.cmml" xref="A1.SS4.p3.1.m1.1.1.2.3"><times id="A1.SS4.p3.1.m1.1.1.2.3.1.cmml" xref="A1.SS4.p3.1.m1.1.1.2.3.1"></times><ci id="A1.SS4.p3.1.m1.1.1.2.3.2.cmml" xref="A1.SS4.p3.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.SS4.p3.1.m1.1.1.2.3.3.cmml" xref="A1.SS4.p3.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.SS4.p3.1.m1.1.1.2.3.4.cmml" xref="A1.SS4.p3.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.SS4.p3.1.m1.1.1.3.cmml" xref="A1.SS4.p3.1.m1.1.1.3"><times id="A1.SS4.p3.1.m1.1.1.3.1.cmml" xref="A1.SS4.p3.1.m1.1.1.3.1"></times><ci id="A1.SS4.p3.1.m1.1.1.3.2.cmml" xref="A1.SS4.p3.1.m1.1.1.3.2">𝑋</ci><ci id="A1.SS4.p3.1.m1.1.1.3.3.cmml" xref="A1.SS4.p3.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS4.p3.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.SS4.p3.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math> gives a standard, safe, but bland answer as <span class="ltx_text ltx_font_italic" id="A1.SS4.p3.1.2">“I am good. How are you?”</span>, while LAPDOG incorporates stories and persona about the gym to answer with <span class="ltx_text ltx_font_italic" id="A1.SS4.p3.1.3">“I’m good. Just got back from the gym. How are you?”</span>, which would be more information-intensive and engaging. Additionally, the story <span class="ltx_text ltx_font_italic" id="A1.SS4.p3.1.4">“Lifestyle Change”</span> provides a good clue for the agent about why he decided to go to the gym, and the story <span class="ltx_text ltx_font_italic" id="A1.SS4.p3.1.5">“Home Gym”</span> describes the enthusiasm about the workout. These would potentially provide the model with enriched information on generating personalized responses.</p>
</div>
<div class="ltx_para" id="A1.SS4.p4">
<p class="ltx_p" id="A1.SS4.p4.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T13" title="Table 13 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">13</span></a>, the T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.SS4.p4.1.m1.1"><semantics id="A1.SS4.p4.1.m1.1a"><mmultiscripts id="A1.SS4.p4.1.m1.1.1" xref="A1.SS4.p4.1.m1.1.1.cmml"><mi id="A1.SS4.p4.1.m1.1.1.2.2" xref="A1.SS4.p4.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.SS4.p4.1.m1.1.1a" xref="A1.SS4.p4.1.m1.1.1.cmml"></mprescripts><mrow id="A1.SS4.p4.1.m1.1.1b" xref="A1.SS4.p4.1.m1.1.1.cmml"></mrow><mrow id="A1.SS4.p4.1.m1.1.1.3" xref="A1.SS4.p4.1.m1.1.1.3.cmml"><mi id="A1.SS4.p4.1.m1.1.1.3.2" xref="A1.SS4.p4.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.SS4.p4.1.m1.1.1.3.1" xref="A1.SS4.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.SS4.p4.1.m1.1.1.3.3" xref="A1.SS4.p4.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.SS4.p4.1.m1.1.1.2.3" xref="A1.SS4.p4.1.m1.1.1.2.3.cmml"><mi id="A1.SS4.p4.1.m1.1.1.2.3.2" xref="A1.SS4.p4.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.SS4.p4.1.m1.1.1.2.3.1" xref="A1.SS4.p4.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p4.1.m1.1.1.2.3.3" xref="A1.SS4.p4.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.SS4.p4.1.m1.1.1.2.3.1a" xref="A1.SS4.p4.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.SS4.p4.1.m1.1.1.2.3.4" xref="A1.SS4.p4.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.SS4.p4.1.m1.1.1c" xref="A1.SS4.p4.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.SS4.p4.1.m1.1b"><apply id="A1.SS4.p4.1.m1.1.1.cmml" xref="A1.SS4.p4.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p4.1.m1.1.1.1.cmml" xref="A1.SS4.p4.1.m1.1.1">superscript</csymbol><apply id="A1.SS4.p4.1.m1.1.1.2.cmml" xref="A1.SS4.p4.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS4.p4.1.m1.1.1.2.1.cmml" xref="A1.SS4.p4.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.SS4.p4.1.m1.1.1.2.2.cmml" xref="A1.SS4.p4.1.m1.1.1.2.2">absent</csymbol><apply id="A1.SS4.p4.1.m1.1.1.2.3.cmml" xref="A1.SS4.p4.1.m1.1.1.2.3"><times id="A1.SS4.p4.1.m1.1.1.2.3.1.cmml" xref="A1.SS4.p4.1.m1.1.1.2.3.1"></times><ci id="A1.SS4.p4.1.m1.1.1.2.3.2.cmml" xref="A1.SS4.p4.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.SS4.p4.1.m1.1.1.2.3.3.cmml" xref="A1.SS4.p4.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.SS4.p4.1.m1.1.1.2.3.4.cmml" xref="A1.SS4.p4.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.SS4.p4.1.m1.1.1.3.cmml" xref="A1.SS4.p4.1.m1.1.1.3"><times id="A1.SS4.p4.1.m1.1.1.3.1.cmml" xref="A1.SS4.p4.1.m1.1.1.3.1"></times><ci id="A1.SS4.p4.1.m1.1.1.3.2.cmml" xref="A1.SS4.p4.1.m1.1.1.3.2">𝑋</ci><ci id="A1.SS4.p4.1.m1.1.1.3.3.cmml" xref="A1.SS4.p4.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS4.p4.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.SS4.p4.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math> model simply replied with a <span class="ltx_text ltx_font_italic" id="A1.SS4.p4.1.1">“I hope so!”</span> without further informative content, while LAPDOG answers with richer information as <span class="ltx_text ltx_font_italic" id="A1.SS4.p4.1.2">“I hope so! I’m only in grade 3 so I’m hoping to go to Disney World soon!”</span>, which might consider the information from both persona and stories. Additionally, the retrieved stories like <span class="ltx_text ltx_font_italic" id="A1.SS4.p4.1.3">“Dream Job”</span> or <span class="ltx_text ltx_font_italic" id="A1.SS4.p4.1.4">“Disneyland”</span> are aligned with the agent’s favor.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.5 </span>Comparison to Traditional Knowledge Dialogue Approaches</h3>
<div class="ltx_para" id="A1.SS5.p1">
<p class="ltx_p" id="A1.SS5.p1.1">Evaluating LAPDOG against traditional knowledge-grounded dialogue methods is crucial. A comparison with <span class="ltx_text ltx_font_italic" id="A1.SS5.p1.1.1">“Low-Resource Knowledge-Grounded Dialogue Generation”</span> <cite class="ltx_cite ltx_citemacro_cite">Zhao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib26" title="">2020</a>)</cite> was considered but not possible due to the unavailability of its code. Instead, we selected ITDD (Incremental Transformer with Deliberation Decoder) <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib11" title="">2019</a>)</cite> for this purpose, given its proven effectiveness and wide recognition.</p>
</div>
<section class="ltx_subsubsection" id="A1.SS5.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.5.1 </span>ITDD Experimental Setup</h4>
<div class="ltx_para" id="A1.SS5.SSS1.p1">
<p class="ltx_p" id="A1.SS5.SSS1.p1.1">LAPDOG and ITDD are based on different principles. LAPDOG uses an unsupervised approach to train both a retriever and a generator for extracting relevant content from an external corpus. On the other hand, ITDD is designed to merge pre-annotated document-conversation pairs. To ensure a fair comparison, we used an off-the-shelf retriever <cite class="ltx_cite ltx_citemacro_cite">Izacard et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib6" title="">2021</a>)</cite> to create paired data from the persona and ROC story corpus for the ITDD model.</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS5.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.5.2 </span>Comparison Results</h4>
<div class="ltx_para" id="A1.SS5.SSS2.p1">
<p class="ltx_p" id="A1.SS5.SSS2.p1.1">We compared LAPDOG and ITDD using various metrics, and the results are presented in the table below, showcasing LAPDOG’s superior performance.</p>
</div>
<figure class="ltx_table" id="A1.T8">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T8.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T8.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t" id="A1.T8.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T8.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T8.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A1.T8.1.1.1.2.1">F1</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T8.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A1.T8.1.1.1.3.1">BLEU</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T8.1.1.1.4"><span class="ltx_text ltx_font_bold" id="A1.T8.1.1.1.4.1">ROUGE-L</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T8.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T8.1.2.1.1">ITDD</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.1.2">9.71</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.1.3">0.66</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.1.4">10.90</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T8.1.3.2.1">T5-S+LAPDOG</th>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.2.2">14.62</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.2.3">3.23</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.2.4">14.44</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T8.1.4.3.1">T5-B+LAPDOG</th>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.3.2">16.08</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.3.3">3.53</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.3.4">15.33</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="A1.T8.1.5.4.1">T5-L+LAPDOG</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T8.1.5.4.2">17.11</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T8.1.5.4.3">3.56</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T8.1.5.4.4">15.64</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Comparison of LAPDOG and ITDD on key performance metrics.</figcaption>
</figure>
<div class="ltx_para" id="A1.SS5.SSS2.p2">
<p class="ltx_p" id="A1.SS5.SSS2.p2.1">These results highlight LAPDOG’s effectiveness compared to the traditional ITDD method, enhancing the paper’s overall assessment of LAPDOG’s performance.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="A1.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.6 </span>Complete Training Procedure</h3>
<div class="ltx_para" id="A1.SS6.p1">
<p class="ltx_p" id="A1.SS6.p1.1">The complete training procedure is described at Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#alg2" title="Algorithm 2 ‣ A.3 Evaluation Results on CONVIAI2 Revised Dataset ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS7">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.7 </span>Pre-process ROCStory Coprus</h3>
<div class="ltx_para" id="A1.SS7.p1">
<p class="ltx_p" id="A1.SS7.p1.1">The pre-processing procedure is described at Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#alg1" title="Algorithm 1 ‣ A.3 Evaluation Results on CONVIAI2 Revised Dataset ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS8">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.8 </span>Extended Evaluation Metrics</h3>
<div class="ltx_para" id="A1.SS8.p1">
<p class="ltx_p" id="A1.SS8.p1.1">The evaluation metrics for LAPDOG have been broadened to incorporate METEOR and BERT scores. This enhancement supplements the foundational assessment based on F1, BLEU, and ROUGE-L metrics, presenting a more diverse evaluation landscape. The additional evaluation outcomes are tabulated in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T9" title="Table 9 ‣ A.8 Extended Evaluation Metrics ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">9</span></a>.</p>
</div>
<div class="ltx_para" id="A1.SS8.p2">
<p class="ltx_p" id="A1.SS8.p2.1">Based on the results in Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T9" title="Table 9 ‣ A.8 Extended Evaluation Metrics ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">9</span></a>, LAPDOG excels in the METEOR score relative to baseline models, showcasing its capability in nuanced linguistic comprehension. However, the variance in BERT scores is minimal, likely due to LAPDOG’s optimization for traditional metrics. Enhancing performance by tailoring optimization for BERT scores represents a promising area for future inquiry.</p>
</div>
<figure class="ltx_table" id="A1.T9">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T9.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T9.4.5.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t" id="A1.T9.4.5.1.1"><span class="ltx_text ltx_font_bold" id="A1.T9.4.5.1.1.1">Model</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T9.4.5.1.2"><span class="ltx_text ltx_font_bold" id="A1.T9.4.5.1.2.1">METEOR</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T9.4.5.1.3"><span class="ltx_text ltx_font_bold" id="A1.T9.4.5.1.3.1">BERT-F1</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T9.4.5.1.4"><span class="ltx_text ltx_font_bold" id="A1.T9.4.5.1.4.1">BERT-PRECISION</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="A1.T9.4.5.1.5"><span class="ltx_text ltx_font_bold" id="A1.T9.4.5.1.5.1">BERT-RECALL</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T9.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T9.1.1.1">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="A1.T9.1.1.1.m1.1"><semantics id="A1.T9.1.1.1.m1.1a"><mmultiscripts id="A1.T9.1.1.1.m1.1.1" xref="A1.T9.1.1.1.m1.1.1.cmml"><mi id="A1.T9.1.1.1.m1.1.1.2.2" xref="A1.T9.1.1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T9.1.1.1.m1.1.1a" xref="A1.T9.1.1.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T9.1.1.1.m1.1.1.3" xref="A1.T9.1.1.1.m1.1.1.3.cmml"><mi id="A1.T9.1.1.1.m1.1.1.3.2" xref="A1.T9.1.1.1.m1.1.1.3.2.cmml">S</mi><mo id="A1.T9.1.1.1.m1.1.1.3.1" xref="A1.T9.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.1.1.1.m1.1.1.3.3" xref="A1.T9.1.1.1.m1.1.1.3.3.cmml">u</mi><mo id="A1.T9.1.1.1.m1.1.1.3.1a" xref="A1.T9.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.1.1.1.m1.1.1.3.4" xref="A1.T9.1.1.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="A1.T9.1.1.1.m1.1.1b" xref="A1.T9.1.1.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.1.1.1.m1.1.1c" xref="A1.T9.1.1.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.1.1.1.m1.1.1.2.3" xref="A1.T9.1.1.1.m1.1.1.2.3.cmml"><mi id="A1.T9.1.1.1.m1.1.1.2.3.2" xref="A1.T9.1.1.1.m1.1.1.2.3.2.cmml">X</mi><mo id="A1.T9.1.1.1.m1.1.1.2.3.1" xref="A1.T9.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T9.1.1.1.m1.1.1.2.3.3" xref="A1.T9.1.1.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T9.1.1.1.m1.1b"><apply id="A1.T9.1.1.1.m1.1.1.cmml" xref="A1.T9.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.1.1.1.m1.1.1.1.cmml" xref="A1.T9.1.1.1.m1.1.1">subscript</csymbol><apply id="A1.T9.1.1.1.m1.1.1.2.cmml" xref="A1.T9.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.1.1.1.m1.1.1.2.1.cmml" xref="A1.T9.1.1.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="A1.T9.1.1.1.m1.1.1.2.2.cmml" xref="A1.T9.1.1.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T9.1.1.1.m1.1.1.2.3.cmml" xref="A1.T9.1.1.1.m1.1.1.2.3"><times id="A1.T9.1.1.1.m1.1.1.2.3.1.cmml" xref="A1.T9.1.1.1.m1.1.1.2.3.1"></times><ci id="A1.T9.1.1.1.m1.1.1.2.3.2.cmml" xref="A1.T9.1.1.1.m1.1.1.2.3.2">𝑋</ci><ci id="A1.T9.1.1.1.m1.1.1.2.3.3.cmml" xref="A1.T9.1.1.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="A1.T9.1.1.1.m1.1.1.3.cmml" xref="A1.T9.1.1.1.m1.1.1.3"><times id="A1.T9.1.1.1.m1.1.1.3.1.cmml" xref="A1.T9.1.1.1.m1.1.1.3.1"></times><ci id="A1.T9.1.1.1.m1.1.1.3.2.cmml" xref="A1.T9.1.1.1.m1.1.1.3.2">𝑆</ci><ci id="A1.T9.1.1.1.m1.1.1.3.3.cmml" xref="A1.T9.1.1.1.m1.1.1.3.3">𝑢</ci><ci id="A1.T9.1.1.1.m1.1.1.3.4.cmml" xref="A1.T9.1.1.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.1.1.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="A1.T9.1.1.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.1.1.2">16.45</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.1.1.3">85.95</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.1.1.4">87.07</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.1.1.5">84.88</td>
</tr>
<tr class="ltx_tr" id="A1.T9.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T9.3.3.2">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="A1.T9.2.2.1.m1.1"><semantics id="A1.T9.2.2.1.m1.1a"><mmultiscripts id="A1.T9.2.2.1.m1.1.1" xref="A1.T9.2.2.1.m1.1.1.cmml"><mi id="A1.T9.2.2.1.m1.1.1.2.2" xref="A1.T9.2.2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T9.2.2.1.m1.1.1a" xref="A1.T9.2.2.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T9.2.2.1.m1.1.1.3" xref="A1.T9.2.2.1.m1.1.1.3.cmml"><mi id="A1.T9.2.2.1.m1.1.1.3.2" xref="A1.T9.2.2.1.m1.1.1.3.2.cmml">S</mi><mo id="A1.T9.2.2.1.m1.1.1.3.1" xref="A1.T9.2.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.2.2.1.m1.1.1.3.3" xref="A1.T9.2.2.1.m1.1.1.3.3.cmml">u</mi><mo id="A1.T9.2.2.1.m1.1.1.3.1a" xref="A1.T9.2.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.2.2.1.m1.1.1.3.4" xref="A1.T9.2.2.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="A1.T9.2.2.1.m1.1.1b" xref="A1.T9.2.2.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.2.2.1.m1.1.1c" xref="A1.T9.2.2.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.2.2.1.m1.1.1.2.3" xref="A1.T9.2.2.1.m1.1.1.2.3.cmml"><mi id="A1.T9.2.2.1.m1.1.1.2.3.2" xref="A1.T9.2.2.1.m1.1.1.2.3.2.cmml">X</mi><mo id="A1.T9.2.2.1.m1.1.1.2.3.1" xref="A1.T9.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T9.2.2.1.m1.1.1.2.3.3" xref="A1.T9.2.2.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T9.2.2.1.m1.1b"><apply id="A1.T9.2.2.1.m1.1.1.cmml" xref="A1.T9.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.2.2.1.m1.1.1.1.cmml" xref="A1.T9.2.2.1.m1.1.1">subscript</csymbol><apply id="A1.T9.2.2.1.m1.1.1.2.cmml" xref="A1.T9.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.2.2.1.m1.1.1.2.1.cmml" xref="A1.T9.2.2.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="A1.T9.2.2.1.m1.1.1.2.2.cmml" xref="A1.T9.2.2.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T9.2.2.1.m1.1.1.2.3.cmml" xref="A1.T9.2.2.1.m1.1.1.2.3"><times id="A1.T9.2.2.1.m1.1.1.2.3.1.cmml" xref="A1.T9.2.2.1.m1.1.1.2.3.1"></times><ci id="A1.T9.2.2.1.m1.1.1.2.3.2.cmml" xref="A1.T9.2.2.1.m1.1.1.2.3.2">𝑋</ci><ci id="A1.T9.2.2.1.m1.1.1.2.3.3.cmml" xref="A1.T9.2.2.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="A1.T9.2.2.1.m1.1.1.3.cmml" xref="A1.T9.2.2.1.m1.1.1.3"><times id="A1.T9.2.2.1.m1.1.1.3.1.cmml" xref="A1.T9.2.2.1.m1.1.1.3.1"></times><ci id="A1.T9.2.2.1.m1.1.1.3.2.cmml" xref="A1.T9.2.2.1.m1.1.1.3.2">𝑆</ci><ci id="A1.T9.2.2.1.m1.1.1.3.3.cmml" xref="A1.T9.2.2.1.m1.1.1.3.3">𝑢</ci><ci id="A1.T9.2.2.1.m1.1.1.3.4.cmml" xref="A1.T9.2.2.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.2.2.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="A1.T9.2.2.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+<math alttext="\mathcal{R}{fix}" class="ltx_Math" display="inline" id="A1.T9.3.3.2.m2.1"><semantics id="A1.T9.3.3.2.m2.1a"><mrow id="A1.T9.3.3.2.m2.1.1" xref="A1.T9.3.3.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A1.T9.3.3.2.m2.1.1.2" xref="A1.T9.3.3.2.m2.1.1.2.cmml">ℛ</mi><mo id="A1.T9.3.3.2.m2.1.1.1" xref="A1.T9.3.3.2.m2.1.1.1.cmml">⁢</mo><mi id="A1.T9.3.3.2.m2.1.1.3" xref="A1.T9.3.3.2.m2.1.1.3.cmml">f</mi><mo id="A1.T9.3.3.2.m2.1.1.1a" xref="A1.T9.3.3.2.m2.1.1.1.cmml">⁢</mo><mi id="A1.T9.3.3.2.m2.1.1.4" xref="A1.T9.3.3.2.m2.1.1.4.cmml">i</mi><mo id="A1.T9.3.3.2.m2.1.1.1b" xref="A1.T9.3.3.2.m2.1.1.1.cmml">⁢</mo><mi id="A1.T9.3.3.2.m2.1.1.5" xref="A1.T9.3.3.2.m2.1.1.5.cmml">x</mi></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.3.3.2.m2.1b"><apply id="A1.T9.3.3.2.m2.1.1.cmml" xref="A1.T9.3.3.2.m2.1.1"><times id="A1.T9.3.3.2.m2.1.1.1.cmml" xref="A1.T9.3.3.2.m2.1.1.1"></times><ci id="A1.T9.3.3.2.m2.1.1.2.cmml" xref="A1.T9.3.3.2.m2.1.1.2">ℛ</ci><ci id="A1.T9.3.3.2.m2.1.1.3.cmml" xref="A1.T9.3.3.2.m2.1.1.3">𝑓</ci><ci id="A1.T9.3.3.2.m2.1.1.4.cmml" xref="A1.T9.3.3.2.m2.1.1.4">𝑖</ci><ci id="A1.T9.3.3.2.m2.1.1.5.cmml" xref="A1.T9.3.3.2.m2.1.1.5">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.3.3.2.m2.1c">\mathcal{R}{fix}</annotation><annotation encoding="application/x-llamapun" id="A1.T9.3.3.2.m2.1d">caligraphic_R italic_f italic_i italic_x</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_center" id="A1.T9.3.3.3">16.21</td>
<td class="ltx_td ltx_align_center" id="A1.T9.3.3.4">85.78</td>
<td class="ltx_td ltx_align_center" id="A1.T9.3.3.5">86.99</td>
<td class="ltx_td ltx_align_center" id="A1.T9.3.3.6">84.62</td>
</tr>
<tr class="ltx_tr" id="A1.T9.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="A1.T9.4.4.1">T5<math alttext="{}^{XL}_{Sup}" class="ltx_Math" display="inline" id="A1.T9.4.4.1.m1.1"><semantics id="A1.T9.4.4.1.m1.1a"><mmultiscripts id="A1.T9.4.4.1.m1.1.1" xref="A1.T9.4.4.1.m1.1.1.cmml"><mi id="A1.T9.4.4.1.m1.1.1.2.2" xref="A1.T9.4.4.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T9.4.4.1.m1.1.1a" xref="A1.T9.4.4.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T9.4.4.1.m1.1.1.3" xref="A1.T9.4.4.1.m1.1.1.3.cmml"><mi id="A1.T9.4.4.1.m1.1.1.3.2" xref="A1.T9.4.4.1.m1.1.1.3.2.cmml">S</mi><mo id="A1.T9.4.4.1.m1.1.1.3.1" xref="A1.T9.4.4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.4.4.1.m1.1.1.3.3" xref="A1.T9.4.4.1.m1.1.1.3.3.cmml">u</mi><mo id="A1.T9.4.4.1.m1.1.1.3.1a" xref="A1.T9.4.4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T9.4.4.1.m1.1.1.3.4" xref="A1.T9.4.4.1.m1.1.1.3.4.cmml">p</mi></mrow><mrow id="A1.T9.4.4.1.m1.1.1b" xref="A1.T9.4.4.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.4.4.1.m1.1.1c" xref="A1.T9.4.4.1.m1.1.1.cmml"></mrow><mrow id="A1.T9.4.4.1.m1.1.1.2.3" xref="A1.T9.4.4.1.m1.1.1.2.3.cmml"><mi id="A1.T9.4.4.1.m1.1.1.2.3.2" xref="A1.T9.4.4.1.m1.1.1.2.3.2.cmml">X</mi><mo id="A1.T9.4.4.1.m1.1.1.2.3.1" xref="A1.T9.4.4.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T9.4.4.1.m1.1.1.2.3.3" xref="A1.T9.4.4.1.m1.1.1.2.3.3.cmml">L</mi></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T9.4.4.1.m1.1b"><apply id="A1.T9.4.4.1.m1.1.1.cmml" xref="A1.T9.4.4.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.4.4.1.m1.1.1.1.cmml" xref="A1.T9.4.4.1.m1.1.1">subscript</csymbol><apply id="A1.T9.4.4.1.m1.1.1.2.cmml" xref="A1.T9.4.4.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T9.4.4.1.m1.1.1.2.1.cmml" xref="A1.T9.4.4.1.m1.1.1">superscript</csymbol><csymbol cd="latexml" id="A1.T9.4.4.1.m1.1.1.2.2.cmml" xref="A1.T9.4.4.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T9.4.4.1.m1.1.1.2.3.cmml" xref="A1.T9.4.4.1.m1.1.1.2.3"><times id="A1.T9.4.4.1.m1.1.1.2.3.1.cmml" xref="A1.T9.4.4.1.m1.1.1.2.3.1"></times><ci id="A1.T9.4.4.1.m1.1.1.2.3.2.cmml" xref="A1.T9.4.4.1.m1.1.1.2.3.2">𝑋</ci><ci id="A1.T9.4.4.1.m1.1.1.2.3.3.cmml" xref="A1.T9.4.4.1.m1.1.1.2.3.3">𝐿</ci></apply></apply><apply id="A1.T9.4.4.1.m1.1.1.3.cmml" xref="A1.T9.4.4.1.m1.1.1.3"><times id="A1.T9.4.4.1.m1.1.1.3.1.cmml" xref="A1.T9.4.4.1.m1.1.1.3.1"></times><ci id="A1.T9.4.4.1.m1.1.1.3.2.cmml" xref="A1.T9.4.4.1.m1.1.1.3.2">𝑆</ci><ci id="A1.T9.4.4.1.m1.1.1.3.3.cmml" xref="A1.T9.4.4.1.m1.1.1.3.3">𝑢</ci><ci id="A1.T9.4.4.1.m1.1.1.3.4.cmml" xref="A1.T9.4.4.1.m1.1.1.3.4">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.4.4.1.m1.1c">{}^{XL}_{Sup}</annotation><annotation encoding="application/x-llamapun" id="A1.T9.4.4.1.m1.1d">start_FLOATSUPERSCRIPT italic_X italic_L end_FLOATSUPERSCRIPT start_POSTSUBSCRIPT italic_S italic_u italic_p end_POSTSUBSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T9.4.4.2">17.76</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T9.4.4.3">85.99</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T9.4.4.4">87.35</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A1.T9.4.4.5">84.70</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Additional evaluation metrics, METEOR and BERT scores.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A1.SS9">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.9 </span>Additional Related Work on Large Language Models (LLMs)</h3>
<div class="ltx_para" id="A1.SS9.p1">
<p class="ltx_p" id="A1.SS9.p1.1">Language models compute probability distributions over text sequences. Recent advancements have escalated these models from millions of parameters <cite class="ltx_cite ltx_citemacro_cite">Radford et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib18" title="">2019</a>)</cite> to billions <cite class="ltx_cite ltx_citemacro_cite">Brown et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib1" title="">2020</a>)</cite>, extending the training corpus to encompass web texts and instructional data <cite class="ltx_cite ltx_citemacro_cite">Ouyang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#bib.bib15" title="">2022</a>)</cite>. These strides have significantly enhanced the performance of large language models (LLMs) across a myriad of NLP tasks. Notably, in conversational tasks, the quality of generated text improves with the expansion of both the model size and training corpus. Our proposed approach, LAPDOG, diverges from the prevailing trend of scaling; it leverages retrieval-augmented generation to yield more diverse and interpretable results, albeit with smaller model parameters and corpus size. Despite employing a smaller model in our experiments, we posit that our adaptive retrieval approach could complement existing LLMs, thereby potentially elevating their result-generation efficacy.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS10">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.10 </span>Human Evaluation</h3>
<div class="ltx_para" id="A1.SS10.p1">
<p class="ltx_p" id="A1.SS10.p1.1">We conducted a human evaluation to gauge the preference between the retrieval-augmented LAPDOG and the fine-tuned T5 model. Evaluators were presented with a dialogue accompanied by two responses from each model and were asked to choose their preferred response.</p>
</div>
<figure class="ltx_table" id="A1.T10">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A1.T10.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T10.1.1.1">
<td class="ltx_td ltx_border_t" id="A1.T10.1.1.1.1"></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T10.1.1.1.2">LAPDOG</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T10.1.1.1.3">Fine-tuned Model</td>
</tr>
<tr class="ltx_tr" id="A1.T10.1.2.2">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_t" id="A1.T10.1.2.2.1">Human Preferred</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_t" id="A1.T10.1.2.2.2">56.32%</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_t" id="A1.T10.1.2.2.3">43.68%</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 10: </span>Comparison of human preference for responses generated by LAPDOG and a fine-tuned T5 model.</figcaption>
</figure>
<div class="ltx_para" id="A1.SS10.p2">
<p class="ltx_p" id="A1.SS10.p2.1">Referring to Table <a class="ltx_ref" href="https://arxiv.org/html/2406.18847v1#A1.T10" title="Table 10 ‣ A.10 Human Evaluation ‣ Appendix A Appendix ‣ Learning Retrieval Augmentation for Personalized Dialogue Generation"><span class="ltx_text ltx_ref_tag">10</span></a>, while LAPDOG was preferred by 56.32% of the evaluators, the difference between the two models is relatively narrow. This indicates that both models have their merits in certain conversational contexts. The slight edge for LAPDOG suggests that retrieval-augmented responses might align closer to human expectations in some scenarios. Delving deeper into the nuances of this preference, especially across varied dialogue topics, would provide a more comprehensive understanding.</p>
</div>
<figure class="ltx_table" id="A1.T11">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T11.2">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T11.2.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="2" id="A1.T11.2.3.1.1"><span class="ltx_text ltx_font_bold" id="A1.T11.2.3.1.1.1">Conversation #1</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T11.2.4.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.2.4.1.1">Persona</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T11.2.4.1.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T11.2.4.1.2.1">
<tr class="ltx_tr" id="A1.T11.2.4.1.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.4.1.2.1.1.1">I am 40 years old.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.4.1.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.4.1.2.1.2.1">I work as a car salesman.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.4.1.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.4.1.2.1.3.1">My wife spends all my money.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.4.1.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.4.1.2.1.4.1">I hate my job.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.4.1.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.4.1.2.1.5.1">I’m planning on getting a divorce.</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.5.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.2.5.2.1">Dialogue</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T11.2.5.2.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T11.2.5.2.2.1">
<tr class="ltx_tr" id="A1.T11.2.5.2.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.5.2.2.1.1.1">…</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.5.2.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.5.2.2.1.2.1">Agent: I know the struggle, I volunteer at a homeless shelter.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.5.2.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.5.2.2.1.3.1">Human: I hope not either, would not wish it on my worse enemy.</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T11.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.1.1.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T11.1.1.1.m1.1"><semantics id="A1.T11.1.1.1.m1.1a"><mmultiscripts id="A1.T11.1.1.1.m1.1.1" xref="A1.T11.1.1.1.m1.1.1.cmml"><mi id="A1.T11.1.1.1.m1.1.1.2.2" xref="A1.T11.1.1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T11.1.1.1.m1.1.1a" xref="A1.T11.1.1.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T11.1.1.1.m1.1.1b" xref="A1.T11.1.1.1.m1.1.1.cmml"></mrow><mrow id="A1.T11.1.1.1.m1.1.1.3" xref="A1.T11.1.1.1.m1.1.1.3.cmml"><mi id="A1.T11.1.1.1.m1.1.1.3.2" xref="A1.T11.1.1.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T11.1.1.1.m1.1.1.3.1" xref="A1.T11.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T11.1.1.1.m1.1.1.3.3" xref="A1.T11.1.1.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T11.1.1.1.m1.1.1.2.3" xref="A1.T11.1.1.1.m1.1.1.2.3.cmml"><mi id="A1.T11.1.1.1.m1.1.1.2.3.2" xref="A1.T11.1.1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T11.1.1.1.m1.1.1.2.3.1" xref="A1.T11.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T11.1.1.1.m1.1.1.2.3.3" xref="A1.T11.1.1.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T11.1.1.1.m1.1.1.2.3.1a" xref="A1.T11.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T11.1.1.1.m1.1.1.2.3.4" xref="A1.T11.1.1.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T11.1.1.1.m1.1.1c" xref="A1.T11.1.1.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T11.1.1.1.m1.1b"><apply id="A1.T11.1.1.1.m1.1.1.cmml" xref="A1.T11.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T11.1.1.1.m1.1.1.1.cmml" xref="A1.T11.1.1.1.m1.1.1">superscript</csymbol><apply id="A1.T11.1.1.1.m1.1.1.2.cmml" xref="A1.T11.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T11.1.1.1.m1.1.1.2.1.cmml" xref="A1.T11.1.1.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T11.1.1.1.m1.1.1.2.2.cmml" xref="A1.T11.1.1.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T11.1.1.1.m1.1.1.2.3.cmml" xref="A1.T11.1.1.1.m1.1.1.2.3"><times id="A1.T11.1.1.1.m1.1.1.2.3.1.cmml" xref="A1.T11.1.1.1.m1.1.1.2.3.1"></times><ci id="A1.T11.1.1.1.m1.1.1.2.3.2.cmml" xref="A1.T11.1.1.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T11.1.1.1.m1.1.1.2.3.3.cmml" xref="A1.T11.1.1.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T11.1.1.1.m1.1.1.2.3.4.cmml" xref="A1.T11.1.1.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T11.1.1.1.m1.1.1.3.cmml" xref="A1.T11.1.1.1.m1.1.1.3"><times id="A1.T11.1.1.1.m1.1.1.3.1.cmml" xref="A1.T11.1.1.1.m1.1.1.3.1"></times><ci id="A1.T11.1.1.1.m1.1.1.3.2.cmml" xref="A1.T11.1.1.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T11.1.1.1.m1.1.1.3.3.cmml" xref="A1.T11.1.1.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T11.1.1.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T11.1.1.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T11.1.1.2">I am 40, so I think I am done with it.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.2.2.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T11.2.2.1.m1.1"><semantics id="A1.T11.2.2.1.m1.1a"><mmultiscripts id="A1.T11.2.2.1.m1.1.1" xref="A1.T11.2.2.1.m1.1.1.cmml"><mi id="A1.T11.2.2.1.m1.1.1.2.2" xref="A1.T11.2.2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T11.2.2.1.m1.1.1a" xref="A1.T11.2.2.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T11.2.2.1.m1.1.1b" xref="A1.T11.2.2.1.m1.1.1.cmml"></mrow><mrow id="A1.T11.2.2.1.m1.1.1.3" xref="A1.T11.2.2.1.m1.1.1.3.cmml"><mi id="A1.T11.2.2.1.m1.1.1.3.2" xref="A1.T11.2.2.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T11.2.2.1.m1.1.1.3.1" xref="A1.T11.2.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T11.2.2.1.m1.1.1.3.3" xref="A1.T11.2.2.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T11.2.2.1.m1.1.1.2.3" xref="A1.T11.2.2.1.m1.1.1.2.3.cmml"><mi id="A1.T11.2.2.1.m1.1.1.2.3.2" xref="A1.T11.2.2.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T11.2.2.1.m1.1.1.2.3.1" xref="A1.T11.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T11.2.2.1.m1.1.1.2.3.3" xref="A1.T11.2.2.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T11.2.2.1.m1.1.1.2.3.1a" xref="A1.T11.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T11.2.2.1.m1.1.1.2.3.4" xref="A1.T11.2.2.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T11.2.2.1.m1.1.1c" xref="A1.T11.2.2.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T11.2.2.1.m1.1b"><apply id="A1.T11.2.2.1.m1.1.1.cmml" xref="A1.T11.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T11.2.2.1.m1.1.1.1.cmml" xref="A1.T11.2.2.1.m1.1.1">superscript</csymbol><apply id="A1.T11.2.2.1.m1.1.1.2.cmml" xref="A1.T11.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T11.2.2.1.m1.1.1.2.1.cmml" xref="A1.T11.2.2.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T11.2.2.1.m1.1.1.2.2.cmml" xref="A1.T11.2.2.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T11.2.2.1.m1.1.1.2.3.cmml" xref="A1.T11.2.2.1.m1.1.1.2.3"><times id="A1.T11.2.2.1.m1.1.1.2.3.1.cmml" xref="A1.T11.2.2.1.m1.1.1.2.3.1"></times><ci id="A1.T11.2.2.1.m1.1.1.2.3.2.cmml" xref="A1.T11.2.2.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T11.2.2.1.m1.1.1.2.3.3.cmml" xref="A1.T11.2.2.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T11.2.2.1.m1.1.1.2.3.4.cmml" xref="A1.T11.2.2.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T11.2.2.1.m1.1.1.3.cmml" xref="A1.T11.2.2.1.m1.1.1.3"><times id="A1.T11.2.2.1.m1.1.1.3.1.cmml" xref="A1.T11.2.2.1.m1.1.1.3.1"></times><ci id="A1.T11.2.2.1.m1.1.1.3.2.cmml" xref="A1.T11.2.2.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T11.2.2.1.m1.1.1.3.3.cmml" xref="A1.T11.2.2.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T11.2.2.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T11.2.2.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T11.2.2.2">Yeah, I feel you. I want to get a divorce.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.6.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.2.6.3.1">Ground Truth</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T11.2.6.3.2">Between wife, job with no money, I am thinking now of divorce.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="A1.T11.2.7.4.1">Retrieval Stories</th>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="A1.T11.2.7.4.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T11.2.7.4.2.1">
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T11.2.7.4.2.1.1.1.1">Money</span></td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.2.1">I have a full-time job.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.3.1">My wife stays at home.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.4.1">One day, I worked an over-time shift.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.5.1">I decided to spend all the extra money on myself.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.6.1">This made my wife sad.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.7.1"><span class="ltx_text ltx_font_bold" id="A1.T11.2.7.4.2.1.7.1.1">Randy leaves</span></td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.8.1">I am a man who has 5 kids.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.9.1">I started arguing with my wife one day.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.10">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.10.1">I got so upset I promised to leave my wife.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.11">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.11.1">So that’s what I did.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.12">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.12.1">I left my children and wife.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.13">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.13.1"><span class="ltx_text ltx_font_bold" id="A1.T11.2.7.4.2.1.13.1.1">Cruel Boss</span></td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.14">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.14.1">I have been dealing with extra expenses in the family.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.15">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.15.1">Since my wife is a stay-at-home mom, I pay for everything.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.16">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.16.1">I tried to get a raise by talking to my boss the next day.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.17">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.17.1">My boss understood my situation and sincerely apologized.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.18">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.18.1">Although I have been my employee for years, the offer was rejected.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.19">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.19.1"><span class="ltx_text ltx_font_bold" id="A1.T11.2.7.4.2.1.19.1.1">Paul Gets Fired</span></td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.20">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.20.1">I hate my job.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.21">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.21.1">Every day at work I get angry and say mean things to people.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.22">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.22.1">My boss gave me a verbal warning about my attitude at work.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.23">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.23.1">Currently I am on a performance plan at work.</td>
</tr>
<tr class="ltx_tr" id="A1.T11.2.7.4.2.1.24">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T11.2.7.4.2.1.24.1">Next month I will be fired.</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 11: </span>The first case study.</figcaption>
</figure>
<figure class="ltx_table" id="A1.T12">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T12.2">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T12.2.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="2" id="A1.T12.2.3.1.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.3.1.1.1">Conversation #2</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T12.2.4.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.2.4.1.1">Persona</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T12.2.4.1.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T12.2.4.1.2.1">
<tr class="ltx_tr" id="A1.T12.2.4.1.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.4.1.2.1.1.1">I like to spend my money on cars.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.4.1.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.4.1.2.1.2.1">I go to the gym most days just to socialize.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.4.1.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.4.1.2.1.3.1">I work from home.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.4.1.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.4.1.2.1.4.1">I watch too much tv in spare time.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.4.1.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.4.1.2.1.5.1">I have never had a steady relationship.</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.5.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.2.5.2.1">Dialogue</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T12.2.5.2.2">Human: Hi, How are you doing today?</td>
</tr>
<tr class="ltx_tr" id="A1.T12.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.1.1.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T12.1.1.1.m1.1"><semantics id="A1.T12.1.1.1.m1.1a"><mmultiscripts id="A1.T12.1.1.1.m1.1.1" xref="A1.T12.1.1.1.m1.1.1.cmml"><mi id="A1.T12.1.1.1.m1.1.1.2.2" xref="A1.T12.1.1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T12.1.1.1.m1.1.1a" xref="A1.T12.1.1.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T12.1.1.1.m1.1.1b" xref="A1.T12.1.1.1.m1.1.1.cmml"></mrow><mrow id="A1.T12.1.1.1.m1.1.1.3" xref="A1.T12.1.1.1.m1.1.1.3.cmml"><mi id="A1.T12.1.1.1.m1.1.1.3.2" xref="A1.T12.1.1.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T12.1.1.1.m1.1.1.3.1" xref="A1.T12.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T12.1.1.1.m1.1.1.3.3" xref="A1.T12.1.1.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T12.1.1.1.m1.1.1.2.3" xref="A1.T12.1.1.1.m1.1.1.2.3.cmml"><mi id="A1.T12.1.1.1.m1.1.1.2.3.2" xref="A1.T12.1.1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T12.1.1.1.m1.1.1.2.3.1" xref="A1.T12.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T12.1.1.1.m1.1.1.2.3.3" xref="A1.T12.1.1.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T12.1.1.1.m1.1.1.2.3.1a" xref="A1.T12.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T12.1.1.1.m1.1.1.2.3.4" xref="A1.T12.1.1.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T12.1.1.1.m1.1.1c" xref="A1.T12.1.1.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T12.1.1.1.m1.1b"><apply id="A1.T12.1.1.1.m1.1.1.cmml" xref="A1.T12.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T12.1.1.1.m1.1.1.1.cmml" xref="A1.T12.1.1.1.m1.1.1">superscript</csymbol><apply id="A1.T12.1.1.1.m1.1.1.2.cmml" xref="A1.T12.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T12.1.1.1.m1.1.1.2.1.cmml" xref="A1.T12.1.1.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T12.1.1.1.m1.1.1.2.2.cmml" xref="A1.T12.1.1.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T12.1.1.1.m1.1.1.2.3.cmml" xref="A1.T12.1.1.1.m1.1.1.2.3"><times id="A1.T12.1.1.1.m1.1.1.2.3.1.cmml" xref="A1.T12.1.1.1.m1.1.1.2.3.1"></times><ci id="A1.T12.1.1.1.m1.1.1.2.3.2.cmml" xref="A1.T12.1.1.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T12.1.1.1.m1.1.1.2.3.3.cmml" xref="A1.T12.1.1.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T12.1.1.1.m1.1.1.2.3.4.cmml" xref="A1.T12.1.1.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T12.1.1.1.m1.1.1.3.cmml" xref="A1.T12.1.1.1.m1.1.1.3"><times id="A1.T12.1.1.1.m1.1.1.3.1.cmml" xref="A1.T12.1.1.1.m1.1.1.3.1"></times><ci id="A1.T12.1.1.1.m1.1.1.3.2.cmml" xref="A1.T12.1.1.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T12.1.1.1.m1.1.1.3.3.cmml" xref="A1.T12.1.1.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T12.1.1.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T12.1.1.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T12.1.1.2">I am good. How are you?</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.2.2.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T12.2.2.1.m1.1"><semantics id="A1.T12.2.2.1.m1.1a"><mmultiscripts id="A1.T12.2.2.1.m1.1.1" xref="A1.T12.2.2.1.m1.1.1.cmml"><mi id="A1.T12.2.2.1.m1.1.1.2.2" xref="A1.T12.2.2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T12.2.2.1.m1.1.1a" xref="A1.T12.2.2.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T12.2.2.1.m1.1.1b" xref="A1.T12.2.2.1.m1.1.1.cmml"></mrow><mrow id="A1.T12.2.2.1.m1.1.1.3" xref="A1.T12.2.2.1.m1.1.1.3.cmml"><mi id="A1.T12.2.2.1.m1.1.1.3.2" xref="A1.T12.2.2.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T12.2.2.1.m1.1.1.3.1" xref="A1.T12.2.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T12.2.2.1.m1.1.1.3.3" xref="A1.T12.2.2.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T12.2.2.1.m1.1.1.2.3" xref="A1.T12.2.2.1.m1.1.1.2.3.cmml"><mi id="A1.T12.2.2.1.m1.1.1.2.3.2" xref="A1.T12.2.2.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T12.2.2.1.m1.1.1.2.3.1" xref="A1.T12.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T12.2.2.1.m1.1.1.2.3.3" xref="A1.T12.2.2.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T12.2.2.1.m1.1.1.2.3.1a" xref="A1.T12.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T12.2.2.1.m1.1.1.2.3.4" xref="A1.T12.2.2.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T12.2.2.1.m1.1.1c" xref="A1.T12.2.2.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T12.2.2.1.m1.1b"><apply id="A1.T12.2.2.1.m1.1.1.cmml" xref="A1.T12.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T12.2.2.1.m1.1.1.1.cmml" xref="A1.T12.2.2.1.m1.1.1">superscript</csymbol><apply id="A1.T12.2.2.1.m1.1.1.2.cmml" xref="A1.T12.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T12.2.2.1.m1.1.1.2.1.cmml" xref="A1.T12.2.2.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T12.2.2.1.m1.1.1.2.2.cmml" xref="A1.T12.2.2.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T12.2.2.1.m1.1.1.2.3.cmml" xref="A1.T12.2.2.1.m1.1.1.2.3"><times id="A1.T12.2.2.1.m1.1.1.2.3.1.cmml" xref="A1.T12.2.2.1.m1.1.1.2.3.1"></times><ci id="A1.T12.2.2.1.m1.1.1.2.3.2.cmml" xref="A1.T12.2.2.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T12.2.2.1.m1.1.1.2.3.3.cmml" xref="A1.T12.2.2.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T12.2.2.1.m1.1.1.2.3.4.cmml" xref="A1.T12.2.2.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T12.2.2.1.m1.1.1.3.cmml" xref="A1.T12.2.2.1.m1.1.1.3"><times id="A1.T12.2.2.1.m1.1.1.3.1.cmml" xref="A1.T12.2.2.1.m1.1.1.3.1"></times><ci id="A1.T12.2.2.1.m1.1.1.3.2.cmml" xref="A1.T12.2.2.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T12.2.2.1.m1.1.1.3.3.cmml" xref="A1.T12.2.2.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T12.2.2.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T12.2.2.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T12.2.2.2">I’m good. Just got back from the gym. How are you?</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.6.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.2.6.3.1">Ground Truth</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T12.2.6.3.2">I’m pretty good. Just a little lonely.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="A1.T12.2.7.4.1">Retrieval Stories</th>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="A1.T12.2.7.4.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T12.2.7.4.2.1">
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.7.4.2.1.1.1.1">Lifestyle Change</span></td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.2.1">I was overweight and always tired of not having a girlfriend.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.3.1">I decided to make some lifestyle changes.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.4.1">I cancelled my cable TV and joined a gym.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.5.1">I exercised and ate healthily for five months.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.6.1">I started to feel good about myself and started to date!</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.7.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.7.4.2.1.7.1.1">Home Gym</span></td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.8.1">I am addicted to working out and I go every day.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.9.1">I just started a new job that has me working long hours.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.10">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.10.1">These long hours prevent me from being able to go to the gym.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.11">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.11.1">By the time I get off work the gym is closed.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.12">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.12.1">I went out and bought all the stuff I needed to work out at home.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.13">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.13.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.7.4.2.1.13.1.1">Mechanic</span></td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.14">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.14.1">I am a mechanic and love to work on cars.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.15">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.15.1">I work in a shop three days a week.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.16">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.16.1">In my spare time I fix cars for people in my garage.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.17">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.17.1">I do great work at a fast pace for a small fee.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.18">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.18.1">I get two incomes doing what I love.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.19">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.19.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.7.4.2.1.19.1.1">Car Mechanic</span></td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.20">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.20.1">I love to work on cars.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.21">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.21.1">I work as a mechanic at a local car repair shop.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.22">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.22.1">I decided to work on cars in my spare time too.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.23">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.23.1">I advertised on social media that I would fix cars for cheap.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.24">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.24.1">Before long I had a nice little side business going.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.25">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.25.1"><span class="ltx_text ltx_font_bold" id="A1.T12.2.7.4.2.1.25.1.1">The Drive-Through</span></td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.26">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.26.1">I ate out every day of my adult life.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.27">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.27.1">I was a 27-year-old man.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.28">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.28.1">I loved going to drive troughs and preferred eating in my car.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.29">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.29.1">One day while I was ordering my favorite food I had a heart attack.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.30">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.30.1">I was rushed to the hospital by the employees and went into a coma.</td>
</tr>
<tr class="ltx_tr" id="A1.T12.2.7.4.2.1.31">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T12.2.7.4.2.1.31.1">I died due to my excessive and unhealthy lifestyle later that night.</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 12: </span>The second case study.</figcaption>
</figure>
<figure class="ltx_table" id="A1.T13">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T13.2">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A1.T13.2.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t" colspan="2" id="A1.T13.2.3.1.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.3.1.1.1">Conversation #3</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T13.2.4.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.2.4.1.1">Persona</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T13.2.4.1.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T13.2.4.1.2.1">
<tr class="ltx_tr" id="A1.T13.2.4.1.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.4.1.2.1.1.1">I love to sing songs from the movie Frozen.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.4.1.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.4.1.2.1.2.1">I am in the third grade.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.4.1.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.4.1.2.1.3.1">I play with my friends on the playground.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.4.1.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.4.1.2.1.4.1">I love to go to Disney world every year.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.4.1.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.4.1.2.1.5.1">Mickey Mouse is my favorite character.</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.5.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.2.5.2.1">Dialogue</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T13.2.5.2.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T13.2.5.2.2.1">
<tr class="ltx_tr" id="A1.T13.2.5.2.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.5.2.2.1.1.1">…</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.5.2.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.5.2.2.1.2.1">Human: They’re about 5 years old.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.5.2.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.5.2.2.1.3.1">Agent: Yeah Disney is their favorite! We always go to Disney land!</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.5.2.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.5.2.2.1.4.1">Human: That’s great, maybe we will meet there one day!</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="A1.T13.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.1.1.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T13.1.1.1.m1.1"><semantics id="A1.T13.1.1.1.m1.1a"><mmultiscripts id="A1.T13.1.1.1.m1.1.1" xref="A1.T13.1.1.1.m1.1.1.cmml"><mi id="A1.T13.1.1.1.m1.1.1.2.2" xref="A1.T13.1.1.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T13.1.1.1.m1.1.1a" xref="A1.T13.1.1.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T13.1.1.1.m1.1.1b" xref="A1.T13.1.1.1.m1.1.1.cmml"></mrow><mrow id="A1.T13.1.1.1.m1.1.1.3" xref="A1.T13.1.1.1.m1.1.1.3.cmml"><mi id="A1.T13.1.1.1.m1.1.1.3.2" xref="A1.T13.1.1.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T13.1.1.1.m1.1.1.3.1" xref="A1.T13.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T13.1.1.1.m1.1.1.3.3" xref="A1.T13.1.1.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T13.1.1.1.m1.1.1.2.3" xref="A1.T13.1.1.1.m1.1.1.2.3.cmml"><mi id="A1.T13.1.1.1.m1.1.1.2.3.2" xref="A1.T13.1.1.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T13.1.1.1.m1.1.1.2.3.1" xref="A1.T13.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T13.1.1.1.m1.1.1.2.3.3" xref="A1.T13.1.1.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T13.1.1.1.m1.1.1.2.3.1a" xref="A1.T13.1.1.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T13.1.1.1.m1.1.1.2.3.4" xref="A1.T13.1.1.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T13.1.1.1.m1.1.1c" xref="A1.T13.1.1.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T13.1.1.1.m1.1b"><apply id="A1.T13.1.1.1.m1.1.1.cmml" xref="A1.T13.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T13.1.1.1.m1.1.1.1.cmml" xref="A1.T13.1.1.1.m1.1.1">superscript</csymbol><apply id="A1.T13.1.1.1.m1.1.1.2.cmml" xref="A1.T13.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T13.1.1.1.m1.1.1.2.1.cmml" xref="A1.T13.1.1.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T13.1.1.1.m1.1.1.2.2.cmml" xref="A1.T13.1.1.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T13.1.1.1.m1.1.1.2.3.cmml" xref="A1.T13.1.1.1.m1.1.1.2.3"><times id="A1.T13.1.1.1.m1.1.1.2.3.1.cmml" xref="A1.T13.1.1.1.m1.1.1.2.3.1"></times><ci id="A1.T13.1.1.1.m1.1.1.2.3.2.cmml" xref="A1.T13.1.1.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T13.1.1.1.m1.1.1.2.3.3.cmml" xref="A1.T13.1.1.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T13.1.1.1.m1.1.1.2.3.4.cmml" xref="A1.T13.1.1.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T13.1.1.1.m1.1.1.3.cmml" xref="A1.T13.1.1.1.m1.1.1.3"><times id="A1.T13.1.1.1.m1.1.1.3.1.cmml" xref="A1.T13.1.1.1.m1.1.1.3.1"></times><ci id="A1.T13.1.1.1.m1.1.1.3.2.cmml" xref="A1.T13.1.1.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T13.1.1.1.m1.1.1.3.3.cmml" xref="A1.T13.1.1.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T13.1.1.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T13.1.1.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>
</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T13.1.1.2">I hope so!</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.2.2.1">T5<math alttext="{}_{sup}^{XL}" class="ltx_Math" display="inline" id="A1.T13.2.2.1.m1.1"><semantics id="A1.T13.2.2.1.m1.1a"><mmultiscripts id="A1.T13.2.2.1.m1.1.1" xref="A1.T13.2.2.1.m1.1.1.cmml"><mi id="A1.T13.2.2.1.m1.1.1.2.2" xref="A1.T13.2.2.1.m1.1.1.2.2.cmml"></mi><mprescripts id="A1.T13.2.2.1.m1.1.1a" xref="A1.T13.2.2.1.m1.1.1.cmml"></mprescripts><mrow id="A1.T13.2.2.1.m1.1.1b" xref="A1.T13.2.2.1.m1.1.1.cmml"></mrow><mrow id="A1.T13.2.2.1.m1.1.1.3" xref="A1.T13.2.2.1.m1.1.1.3.cmml"><mi id="A1.T13.2.2.1.m1.1.1.3.2" xref="A1.T13.2.2.1.m1.1.1.3.2.cmml">X</mi><mo id="A1.T13.2.2.1.m1.1.1.3.1" xref="A1.T13.2.2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.T13.2.2.1.m1.1.1.3.3" xref="A1.T13.2.2.1.m1.1.1.3.3.cmml">L</mi></mrow><mrow id="A1.T13.2.2.1.m1.1.1.2.3" xref="A1.T13.2.2.1.m1.1.1.2.3.cmml"><mi id="A1.T13.2.2.1.m1.1.1.2.3.2" xref="A1.T13.2.2.1.m1.1.1.2.3.2.cmml">s</mi><mo id="A1.T13.2.2.1.m1.1.1.2.3.1" xref="A1.T13.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T13.2.2.1.m1.1.1.2.3.3" xref="A1.T13.2.2.1.m1.1.1.2.3.3.cmml">u</mi><mo id="A1.T13.2.2.1.m1.1.1.2.3.1a" xref="A1.T13.2.2.1.m1.1.1.2.3.1.cmml">⁢</mo><mi id="A1.T13.2.2.1.m1.1.1.2.3.4" xref="A1.T13.2.2.1.m1.1.1.2.3.4.cmml">p</mi></mrow><mrow id="A1.T13.2.2.1.m1.1.1c" xref="A1.T13.2.2.1.m1.1.1.cmml"></mrow></mmultiscripts><annotation-xml encoding="MathML-Content" id="A1.T13.2.2.1.m1.1b"><apply id="A1.T13.2.2.1.m1.1.1.cmml" xref="A1.T13.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T13.2.2.1.m1.1.1.1.cmml" xref="A1.T13.2.2.1.m1.1.1">superscript</csymbol><apply id="A1.T13.2.2.1.m1.1.1.2.cmml" xref="A1.T13.2.2.1.m1.1.1"><csymbol cd="ambiguous" id="A1.T13.2.2.1.m1.1.1.2.1.cmml" xref="A1.T13.2.2.1.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="A1.T13.2.2.1.m1.1.1.2.2.cmml" xref="A1.T13.2.2.1.m1.1.1.2.2">absent</csymbol><apply id="A1.T13.2.2.1.m1.1.1.2.3.cmml" xref="A1.T13.2.2.1.m1.1.1.2.3"><times id="A1.T13.2.2.1.m1.1.1.2.3.1.cmml" xref="A1.T13.2.2.1.m1.1.1.2.3.1"></times><ci id="A1.T13.2.2.1.m1.1.1.2.3.2.cmml" xref="A1.T13.2.2.1.m1.1.1.2.3.2">𝑠</ci><ci id="A1.T13.2.2.1.m1.1.1.2.3.3.cmml" xref="A1.T13.2.2.1.m1.1.1.2.3.3">𝑢</ci><ci id="A1.T13.2.2.1.m1.1.1.2.3.4.cmml" xref="A1.T13.2.2.1.m1.1.1.2.3.4">𝑝</ci></apply></apply><apply id="A1.T13.2.2.1.m1.1.1.3.cmml" xref="A1.T13.2.2.1.m1.1.1.3"><times id="A1.T13.2.2.1.m1.1.1.3.1.cmml" xref="A1.T13.2.2.1.m1.1.1.3.1"></times><ci id="A1.T13.2.2.1.m1.1.1.3.2.cmml" xref="A1.T13.2.2.1.m1.1.1.3.2">𝑋</ci><ci id="A1.T13.2.2.1.m1.1.1.3.3.cmml" xref="A1.T13.2.2.1.m1.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T13.2.2.1.m1.1c">{}_{sup}^{XL}</annotation><annotation encoding="application/x-llamapun" id="A1.T13.2.2.1.m1.1d">start_FLOATSUBSCRIPT italic_s italic_u italic_p end_FLOATSUBSCRIPT start_POSTSUPERSCRIPT italic_X italic_L end_POSTSUPERSCRIPT</annotation></semantics></math>+LAPDOG</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T13.2.2.2">I hope so! I’m only in grade 3 so I’m hoping to go to Disney World soon!</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.6.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.2.6.3.1">Ground Truth</th>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A1.T13.2.6.3.2">Mickey Mouse is my favorite, and I love songs from the movie Frozen.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="A1.T13.2.7.4.1">Retrieval Stories</th>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="A1.T13.2.7.4.2">
<table class="ltx_tabular ltx_align_middle" id="A1.T13.2.7.4.2.1">
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.1.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.1.1.1">Xena The Shy</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.2.1">My friend is very shy.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.3.1">I am always being teased because of my name.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.4.1">The boys at school call my warrior princess.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.5.1">People are so mean.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.6.1">I wish I was a warrior princess so I could make them be quiet!</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.7.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.7.1.1">Meeting Mickey</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.8.1">I went to Disney World for the first time when I was 7.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.9.1">My parents bought me a book to collect character signatures.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.10">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.10.1">I was so excited to get my signature so I didn’t notice a line.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.11">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.11.1">I ran to hug I cut in front of many other kids.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.12">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.12.1">The girl who was next in line yelled at me.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.13">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.13.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.13.1.1">dream job</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.14">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.14.1">I have always wanted to play a character at Disney World.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.15">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.15.1">I moved to Orlando and applied for a job.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.16">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.16.1">Disney hired me as a customer service rep.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.17">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.17.1">I worked very hard to achieve my goal.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.18">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.18.1">The other day I got a promotion to play Mickey Mouse.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.19">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.19.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.19.1.1">Pageant</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.20">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.20.1">Little I was a three-year-old beauty queen.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.21">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.21.1">I was very good at walking and smiling for the judges.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.22">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.22.1">This week it was different.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.23">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.23.1">I would have to sing.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.24">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.24.1">The day of the show I looked beautiful.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.25">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.25.1">Too bad butterflies in my tummy flew away with the words to the song.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.26">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.26.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.26.1.1">Cade’s Christmas Show</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.27">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.27.1">I am excited about my Christmas show.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.28">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.28.1">I have been practicing Jingle Bells all week.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.29">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.29.1">On the day of the show I was so nervous.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.30">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.30.1">On stage I look out at the audience to find my mom.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.31">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.31.1">I am in the first row, so now I know everything will be fine.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.32">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.32.1"><span class="ltx_text ltx_font_bold" id="A1.T13.2.7.4.2.1.32.1.1">Disneyland</span></td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.33">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.33.1">I have never been to Disneyland.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.34">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.34.1">I love all the Disney characters.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.35">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.35.1">My mom decided to take me to Disneyland.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.36">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.36.1">I was so excited when I got there.</td>
</tr>
<tr class="ltx_tr" id="A1.T13.2.7.4.2.1.37">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="A1.T13.2.7.4.2.1.37.1">It was the best day of my young life.</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 13: </span>The third case study.</figcaption>
</figure>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Jun 27 02:31:51 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
